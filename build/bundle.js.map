{"version":3,"file":"bundle.js","mappings":"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gBACA,WACA,gBACA,mBACA,aACA,eACA,aACA,YACA,YACA,kBACA,0BACA,0BACA,yBACA,0BACA,0BACA,oBACA,oBACA,mBACA,gBACA,yBACA,uBACA,gBACA,cACA,cACA,eACA,eACA,SACA,QACA,QACA,aACA,kBACA,oBACA,kBACA,UACA,oBACA,oBACA,iBACA,iBACA,aACA,aACA,cACA,gBACA,UACA,WACA,OACA,gBACA,cACA,gBACA,eACA,eACA,cACA,WACA,YACA,eACA,OACA,eACA,UACA,WACA,UACA,QACA,WACA,YACA,eACA,aACA,UACA,UACA,kBACA,oBACA,oBACA,iBACA,mBACA,iBACA,kBACA,uBACA,kBACA,eACA,oBACA,gBACA,gBACA,mBACA,eACA,gBACA,cACA,oBACA,iBACA,oBACA,oBACA,iBACA,gBACA,gBACA,QACA,QACA,WACA,OACA,UACA,WACA,SACA,SACA,cACA,QACA,cACA,YACA,aACA,cACA,aACA,iBACA,oBACA,eACA,WACA,aACA,iBACA,aACA,WACA,WAEJnc,EAAQkc,qBAAuB,CAC3B,QACA,uBACA,QACA,SACA,OACA,UACA,WACA,QACA,OACA,OACA,aACA,YACA,gBACA,QACA,aACA,iBAEJlc,EAAQic,iBAAmB,CACvB,EAAG,eACH,EAAG,WACH,GAAI,YACJ,GAAI,iBACJ,GAAI,aACJ,GAAI,WACJ,GAAI,YACJ,GAAI,gBACJ,GAAI,e,4DC7JR,MAAMG,EAAY,SAClB,SAASC,EAAeC,EAAeC,GACrC,OAAID,IAAkBF,EACbG,EAELA,IAAmBH,EACdE,GAEF,OAAkBA,EAAeC,EAC1C,C,sECTA,MAAMC,EAAe,GACrB,KAAWC,kBAAkB,KAAcC,YAAaF,G,kFCSxD,MAAMG,EAAiB,CACrB,OACA,UACA,gBACA,mBACA,aACA,YACA,cACA,SACA,SACA,aACA,aAEIC,EAAoB,MAAMA,UAA0B,IAMxD,WAAAja,CAAYka,GACVha,QAEA5B,KAAKP,KAAM,EAAAA,EAAA,GAAI,YAEfO,KAAK6b,QAA0Bta,OAAOC,OAAO,MAE7CxB,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","sources":["webpack://pixi-demo/webpack/runtime/create fake namespace object","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/arrayLikeToArray.js","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/data/uid.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/getGlobalMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureStyle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/cacheAsTextureMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/childrenHelperMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/collectRenderablesMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/mask/MaskEffectManager.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/effectsMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/findMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/getFastGlobalBoundsMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/utils/checkChildrenDidChange.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/measureMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/onRenderMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/sortMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/container-mixins/toLocalGlobalMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/Container.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/culling/cullingMixin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/logging/warn.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/RenderTarget.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/gpu/getTextureBatchBindGroup.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/buffer/BufferResource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/TextureSource.mjs","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/InstrumentMaps.js","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/utils/multiplyColors.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/environment/autoDetectEnvironment.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/system/AbstractRenderer.mjs","webpack://pixi-demo/./node_modules/array-flatten/dist.es2015/index.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/instructions/InstructionSet.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/buffer/Buffer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/utils/convertFillInputToFillStyle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/buffer/const.mjs","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/state/GpuStencilModesToPixi.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/utils/createStringVariations.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/resolver/Resolver.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureMatrix.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/canvas/utils/fontStringFromTextStyle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/const.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/uboSyncFunctions.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/DynamicBitmapFont.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/BitmapFontManager.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/utils/resolveCharacters.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/data/ViewableBuffer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/misc/const.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/CustomRenderPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/utils/executeInstructions.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/RenderGroupPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/utils/clearList.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/utils/updateRenderGroupTransforms.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/RenderGroupSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/utils/validateRenderables.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite/SpritePipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/shared/BatcherPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/mask/mask.wgsl.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/mask/MaskFilter.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/mask/mask.vert.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/mask/mask.frag.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/mask/alpha/AlphaMaskPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/mask/color/ColorMaskPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/mask/stencil/StencilMaskPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/background/BackgroundSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/blendModes/BlendModePipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/extract/ExtractSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/RenderTexture.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/extract/GenerateTextureSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/GlobalUniformSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/SchedulerSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/sayHello.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/startup/HelloSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/data/clean.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/RenderableGCSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TextureGCSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/view/ViewSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/system/SharedSystems.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/environment/adapter.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/environment-browser/BrowserAdapter.mjs","webpack://pixi-demo/./node_modules/automation-events/build/es5/bundle.js","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/AbstractBitmapFont.mjs","webpack://pixi-demo/./node_modules/screenfull/dist/screenfull.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/state/const.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/cache/Cache.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/data/updateQuadBounds.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/shader-bits/localUniformBit.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/matrix/groupD8.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/canvas/BatchableText.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/canvas/CanvasTextPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/canvas/CanvasTextSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/bounds/utils/matrixAndBoundsPool.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/utils/isSingleItem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/utils/copySearchParams.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/utils/updateTextBounds.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/utils/convertToList.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/TexturePool.mjs","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/Encode.js","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/utils/getPo2TextureFromSource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/const.mjs","webpack://pixi-demo/./node_modules/@pixi/colord/index.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/color/Color.mjs","webpack://pixi-demo/./node_modules/@pixi/colord/plugins/names.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/BatchableHTMLText.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/HTMLTextPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/HTMLTextRenderData.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/utils/getFontCss.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/utils/measureHtmlText.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/HTMLTextSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/utils/extractFontFamilies.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/utils/loadFontCSS.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/utils/loadFontAsBase64.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/utils/getSVGUrl.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/utils/loadSVGImage.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/browser/isSafari.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/utils/getTemporaryCanvasFromImage.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-html/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/utils/definedProps.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/gpu/colorToUniform.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/utils/getBitmapTextLayout.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/fill/FillPattern.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/point/ObservablePoint.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/path.mjs","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/arrayWithHoles.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/shader/const.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/GpuProgram.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/gpu/GpuGraphicsAdaptor.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/mesh/gpu/GpuMeshAdapter.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/gpu/GpuBatchAdaptor.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/BindGroupSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/buffer/GpuBufferSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/GpuColorMaskSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/GpuDeviceSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/GpuEncoderSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/GpuLimitsSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/GpuStencilSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/createUboElementsWGSL.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/generateArraySyncWGSL.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/utils/createUboSyncFunctionWGSL.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/GpuUboSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/buffer/UboBatch.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/GpuUniformBatchPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/pipeline/PipelineSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/renderTarget/GpuRenderTarget.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/renderTarget/GpuRenderTargetAdaptor.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/renderTarget/GpuRenderTargetSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/GpuShaderSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/state/GpuBlendModesToPixi.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/state/GpuStateSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/texture/uploaders/gpuUploadBufferImageResource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/texture/uploaders/gpuUploadCompressedTextureResource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/texture/uploaders/gpuUploadImageSource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/texture/uploaders/gpuUploadVideoSource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/texture/utils/GpuMipmapGenerator.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/texture/GpuTextureSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/WebGPURenderer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/RenderGroup.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/shader-bits/textureBit.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/shader/BindGroup.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/canvas/utils/getCanvasFillStyle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/gl/utils/maxRecommendedTextures.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/shared/BatchTextureArray.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/shared/Batcher.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/shared/BatchGeometry.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/shared/DefaultShader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/shared/DefaultBatcher.mjs","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/typeof.js","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/Midi.js","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/ControlChange.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getTestContext.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/FilterPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/defaults/passthrough/passthrough.wgsl.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/defaults/passthrough/PassthroughFilter.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/defaults/defaultFilter.vert.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/defaults/passthrough/passthrough.frag.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/bounds/getRenderableBounds.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/FilterSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/shader-bits/generateTextureBatchBit.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/canvas/CanvasTextMetrics.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/BufferImageSource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/ticker/const.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/shader-bits/colorBit.mjs","webpack://pixi-demo/./node_modules/midi-file/lib/midi-writer.js","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/browser/unsafeEvalSupported.mjs","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/createClass.js","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/parsers/LoaderParser.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/logging/deprecation.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/utils/multiplyHexColors.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/app/ResizePlugin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/app/TickerPlugin.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/app/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/CanvasSource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/view/ViewContainer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/mesh/shared/MeshGeometry.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/types.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/point/Point.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/mesh/shared/MeshPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/mesh/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/node_modules/eventemitter3/index.js","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/misc/NOOP.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/Texture.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/addBits.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileHooks.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileInputs.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/compileOutputs.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/compiler/utils/injectBits.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/compiler/compileHighShader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/defaultProgramTemplate.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/shader-bits/globalUniformsBit.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/compileHighShaderToProgram.mjs","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/slicedToArray.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/shader/types.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/shader/UniformGroup.mjs","webpack://pixi-demo/./node_modules/tiny-lru/dist/tiny-lru.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/Geometry.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/pool/GlobalResourceRegistry.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/VideoSource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/utils/assignWithIgnore.mjs","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/BinarySearch.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/createUboSyncFunction.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/sdfShader/shader-bits/localUniformMSDFBit.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/sdfShader/shader-bits/mSDFBit.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/sdfShader/SdfShader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/BitmapTextPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/gl/utils/checkMaxIfStatementsInShader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/transformVertices.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildCircle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/const.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildLine.mjs","webpack://pixi-demo/./node_modules/pixi.js/node_modules/earcut/src/earcut.js","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/utils.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/utils/triangulateWithHoles.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildPolygon.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildRectangle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildTriangle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/utils/generateTextureFillMatrix.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/utils/buildContextBatches.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildPixelLine.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/utils/getOrientationOfPoints.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/buildUvs.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContextSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/Filter.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/textureFrom.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/high-shader/shader-bits/roundPixelsBit.mjs","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/Track.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/buffer/utils/fastCopy.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite/Sprite.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/browser/detectVideoAlphaMode.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/BatchableGraphics.mjs","webpack://pixi-demo/./node_modules/midi-file/index.js","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/PitchBend.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/shader/UboSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/global/globalHooks.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/ensureAttributes.mjs","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/RenderTargetSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/renderTarget/isRenderingToScreen.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gpu/renderTarget/calculateProjection.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/mesh-plane/PlaneGeometry.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-nine-slice/NineSliceGeometry.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-nine-slice/NineSliceSpritePipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-nine-slice/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/bounds/getLocalBounds.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/fill/FillGradient.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/ticker/TickerListener.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/ticker/Ticker.mjs","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/classCallCheck.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/state/State.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/gl/GlGraphicsAdaptor.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/mesh/gl/GlMeshAdaptor.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/batcher/gl/GlBatchAdaptor.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/buffer/const.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/buffer/GlBuffer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/buffer/GlBufferSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/context/GlContextSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/const.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/geometry/GlGeometrySystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/GlBackBufferSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/GlColorMaskSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/GlEncoderSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/GlLimitsSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/GlStencilSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/createUboElementsSTD40.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/generateArraySyncSTD40.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/createUboSyncSTD40.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/GlUboSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/GlRenderTarget.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/renderTarget/GlRenderTargetSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlProgramData.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/compileShader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/defaultValue.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/mapType.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/logProgramError.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlShaderSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/generateProgram.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getUniformData.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getUboData.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/GenerateShaderSyncCode.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlUniformGroupSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/utils/generateUniformsSync.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/state/GlStateSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/state/mapWebGLBlendModesToPixi.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/GlTexture.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadImageResource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/uploaders/glUploadVideoResource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/pixiToGlMaps.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/applyStyleParams.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/GlTextureSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapFormatToGlType.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/texture/utils/mapFormatToGlFormat.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/WebGLRenderer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/CanvasPool.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/system/SystemRunner.mjs","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/toPropertyKey.js","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/nonIterableRest.js","webpack://pixi-demo/./node_modules/midi-file/lib/midi-parser.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/utils/createIdFromString.mjs","webpack://pixi-demo/./node_modules/parse-svg-path/index.js","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/shader/utils/uniformParsers.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/shapes/Circle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/shapes/Ellipse.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/misc/squaredDistanceToLineSegment.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/shapes/Polygon.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/shapes/RoundedRectangle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArc.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcToSvg.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/path/ShapePath.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/buildCommands/buildArcTo.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/path/roundShape.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/path/GraphicsPath.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGPath.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGFloatAttribute.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGDefinitions.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/svg/utils/extractSvgUrlId.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/svg/parseSVGStyle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/svg/utils/pathOperations.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/svg/SVGParser.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/svg/utils/fillOperations.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/GraphicsContext.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/TextStyle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/sources/ImageSource.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/dom/CanvasObserver.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/events/FederatedEvent.mjs","webpack://pixi-demo/./node_modules/ismobilejs/esm/isMobile.js","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/browser/isMobile.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/accessibility/AccessibilitySystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/accessibility/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/accessibility/accessibilityTarget.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/events/EventTicker.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/events/FederatedMouseEvent.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/events/FederatedPointerEvent.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/events/FederatedWheelEvent.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/events/EventBoundary.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/events/EventSystem.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/events/FederatedEventTarget.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/events/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/dom/DOMPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/dom/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite/BatchableSprite.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/shader/Shader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/mask/utils/addMaskBounds.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/mask/utils/addMaskLocalBounds.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/mask/alpha/AlphaMask.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/mask/color/ColorMask.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/mask/stencil/StencilMask.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/extensions/Extensions.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/ControlChanges.js","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/pool/Pool.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/pool/PoolGroup.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-tiling/shader/tilingBit.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-tiling/shader/TilingSpriteShader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-tiling/utils/QuadGeometry.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-tiling/TilingSpritePipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-tiling/utils/setUvs.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-tiling/utils/applyMatrix.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-tiling/utils/setPositions.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/sprite-tiling/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/shared/texture/utils/getCanvasTexture.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/mesh/shared/BatchableMesh.mjs","webpack://pixi-demo/./node_modules/pixi.js/node_modules/eventemitter3/index.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/GraphicsPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/spritesheet/Spritesheet.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/spritesheet/spritesheetAsset.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/spritesheet/init.mjs","webpack://pixi-demo/./node_modules/@babel/runtime/helpers/toPrimitive.js","webpack://pixi-demo/./node_modules/pixi.js/lib/filters/FilterEffect.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/GlProgram.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/shapes/Rectangle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/gl/GlParticleContainerAdaptor.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/utils/createIndicesForQuads.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/utils/generateParticleUpdateFunction.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/ParticleBuffer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/shader/particles.wgsl.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/shader/ParticleShader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/shader/particles.vert.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/shader/particles.frag.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/ParticleContainerPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/GlParticleContainerPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/gpu/GpuParticleContainerAdaptor.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/GpuParticleContainerPipe.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/init.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/matrix/Matrix.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/graphics/shared/Graphics.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/bounds/getGlobalBounds.mjs","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/Note.js","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/canvas/getCanvasBoundingBox.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/canvas/CanvasTextGenerator.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/container/bounds/Bounds.mjs","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/Header.js","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/data/removeItems.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/maths/misc/pow2.mjs","webpack://pixi-demo/./node_modules/@tonejs/midi/dist/Instrument.js","webpack://pixi-demo/webpack/bootstrap","webpack://pixi-demo/webpack/runtime/define property getters","webpack://pixi-demo/webpack/runtime/global","webpack://pixi-demo/webpack/runtime/hasOwnProperty shorthand","webpack://pixi-demo/webpack/runtime/make namespace object","webpack://pixi-demo/./node_modules/pixi.js/lib/environment-browser/browserExt.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/environment-webworker/webworkerExt.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/browser/isWebGLSupported.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/browser/isWebGPUSupported.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/rendering/renderers/autoDetectRenderer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/app/Application.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/BitmapFont.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontTextParser.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLParser.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/asset/loadBitmapFont.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/BackgroundLoader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/cache/parsers/cacheTextureArray.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/detections/utils/testImageFormat.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/detections/parsers/detectAvif.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/detections/parsers/detectDefaults.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/detections/utils/testVideoFormat.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/detections/parsers/detectMp4.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/detections/parsers/detectOgv.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/detections/parsers/detectWebm.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/detections/parsers/detectWebp.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/Loader.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/utils/checkDataUrl.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/utils/checkExtension.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/parsers/loadJson.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/parsers/loadTxt.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/parsers/loadWebFont.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/utils/network/getResolutionOfUrl.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/parsers/textures/utils/createTexture.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/parsers/textures/loadSVG.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/_virtual/checkImageBitmap.worker.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/_virtual/loadImageBitmap.worker.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/workers/WorkerManager.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/parsers/textures/loadTextures.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/loader/parsers/textures/loadVideoTextures.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/resolver/parsers/resolveTextureUrl.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/resolver/parsers/resolveJsonUrl.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/assets/Assets.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/Particle.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/particleData.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/particle-container/shared/ParticleContainer.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/AbstractText.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/BitmapText.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-split/AbstractSplitText.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-split/SplitBitmapText.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text-bitmap/utils/bitmapTextSplit.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/scene/text/Text.mjs","webpack://pixi-demo/./node_modules/pixi.js/lib/index.mjs","webpack://pixi-demo/./src/maths/lerp.ts","webpack://pixi-demo/./node_modules/lodash-es/_trimmedEndIndex.js","webpack://pixi-demo/./node_modules/lodash-es/_baseTrim.js","webpack://pixi-demo/./node_modules/lodash-es/isObject.js","webpack://pixi-demo/./node_modules/lodash-es/_freeGlobal.js","webpack://pixi-demo/./node_modules/lodash-es/_root.js","webpack://pixi-demo/./node_modules/lodash-es/_Symbol.js","webpack://pixi-demo/./node_modules/lodash-es/_getRawTag.js","webpack://pixi-demo/./node_modules/lodash-es/_objectToString.js","webpack://pixi-demo/./node_modules/lodash-es/_baseGetTag.js","webpack://pixi-demo/./node_modules/lodash-es/isObjectLike.js","webpack://pixi-demo/./node_modules/lodash-es/toNumber.js","webpack://pixi-demo/./node_modules/lodash-es/isSymbol.js","webpack://pixi-demo/./node_modules/lodash-es/identity.js","webpack://pixi-demo/./node_modules/lodash-es/_overRest.js","webpack://pixi-demo/./node_modules/lodash-es/isFunction.js","webpack://pixi-demo/./node_modules/lodash-es/_coreJsData.js","webpack://pixi-demo/./node_modules/lodash-es/_isMasked.js","webpack://pixi-demo/./node_modules/lodash-es/_toSource.js","webpack://pixi-demo/./node_modules/lodash-es/_baseIsNative.js","webpack://pixi-demo/./node_modules/lodash-es/_defineProperty.js","webpack://pixi-demo/./node_modules/lodash-es/_getNative.js","webpack://pixi-demo/./node_modules/lodash-es/_getValue.js","webpack://pixi-demo/./node_modules/lodash-es/_baseSetToString.js","webpack://pixi-demo/./node_modules/lodash-es/constant.js","webpack://pixi-demo/./node_modules/lodash-es/_shortOut.js","webpack://pixi-demo/./node_modules/lodash-es/_setToString.js","webpack://pixi-demo/./node_modules/lodash-es/_baseRest.js","webpack://pixi-demo/./node_modules/lodash-es/eq.js","webpack://pixi-demo/./node_modules/lodash-es/isLength.js","webpack://pixi-demo/./node_modules/lodash-es/isArrayLike.js","webpack://pixi-demo/./node_modules/lodash-es/_isIndex.js","webpack://pixi-demo/./node_modules/lodash-es/_baseIsArguments.js","webpack://pixi-demo/./node_modules/lodash-es/isArguments.js","webpack://pixi-demo/./node_modules/lodash-es/isArray.js","webpack://pixi-demo/./node_modules/lodash-es/isBuffer.js","webpack://pixi-demo/./node_modules/lodash-es/stubFalse.js","webpack://pixi-demo/./node_modules/lodash-es/_baseIsTypedArray.js","webpack://pixi-demo/./node_modules/lodash-es/_nodeUtil.js","webpack://pixi-demo/./node_modules/lodash-es/isTypedArray.js","webpack://pixi-demo/./node_modules/lodash-es/_baseUnary.js","webpack://pixi-demo/./node_modules/lodash-es/_arrayLikeKeys.js","webpack://pixi-demo/./node_modules/lodash-es/_baseTimes.js","webpack://pixi-demo/./node_modules/lodash-es/_isPrototype.js","webpack://pixi-demo/./node_modules/lodash-es/_baseKeysIn.js","webpack://pixi-demo/./node_modules/lodash-es/_nativeKeysIn.js","webpack://pixi-demo/./node_modules/lodash-es/keysIn.js","webpack://pixi-demo/./node_modules/lodash-es/defaults.js","webpack://pixi-demo/./node_modules/lodash-es/_apply.js","webpack://pixi-demo/./node_modules/lodash-es/_isIterateeCall.js","webpack://pixi-demo/./node_modules/tone/build/esm/version.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/abort-error.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/globals.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/is-constructible.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/split-import-statements.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/add-audio-worklet-module.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/get-value-for-key.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/pick-element-from-set.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/delete-passive-input-connection-to-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/get-event-listeners-of-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/set-internal-state-to-active.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/audio-worklet-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/set-internal-state-to-passive.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/set-internal-state-to-passive-when-necessary.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/analyser-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/is-owned-by-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/index-size-error.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-audio-buffer-get-channel-data-method.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-buffer-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/constants.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/is-active-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-buffer-source-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/get-audio-node-connections.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/get-audio-param-connections.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/deactivate-active-audio-node-input-connections.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/audio-buffer-source-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/biquad-filter-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/constant-source-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/gain-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/oscillator-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/stereo-panner-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/deactivate-audio-graph.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/audio-node-output-connection.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/insert-element-in-set.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/add-active-input-connection-to-audio-param.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/add-passive-input-connection-to-audio-param.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/native-audio-node-faker.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/connect-native-audio-node-to-native-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/delete-active-input-connection.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/delete-event-listeners-of-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/delete-passive-input-connection-to-audio-param.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/disconnect-native-audio-node-from-native-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/get-native-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/get-native-audio-param.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/is-part-of-a-cycle.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/is-passive-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-audio-node-disconnect-method-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/visit-each-audio-node-once.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/native-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-audio-node-disconnect-method.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/read-only-map.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-worklet-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/copy-from-channel.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/copy-to-channel.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/create-nested-arrays.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-worklet-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/get-audio-worklet-processor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/biquad-filter-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/channel-merger-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/channel-splitter-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/constant-source-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/convolver-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/detach-array-buffer.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/delay-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/disconnect-multiple-outputs.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/dynamics-compressor-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/gain-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/invalid-state-error.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/invalid-access-error.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/iir-filter-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/filter-buffer.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/media-stream-audio-destination-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-promise-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/assign-native-audio-node-option.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/assign-native-audio-node-options.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-analyser-node-get-float-time-domain-data-method-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/assign-native-audio-node-audio-param-value.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/compute-buffer-size.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-biquad-filter-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-channel-splitter-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-channel-splitter-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/intercept-connections.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-delay-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-gain-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-iir-filter-node-faker-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-script-processor-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/not-supported-error.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/offline-audio-context-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/oscillator-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/panner-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/periodic-wave-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/stereo-panner-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/unknown-error.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/wave-shaper-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/get-first-sample.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/is-dc-curve.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/overwrite-accessors.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/set-value-at-time-until-possible.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-event-listener.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/module.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/add-active-input-connection-to-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/add-passive-input-connection-to-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/delete-active-input-connection-to-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/get-audio-node-tail-time.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/cache-test-result.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/window.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-analyser-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-analyser-node-get-float-time-domain-data-method.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/get-audio-node-renderer.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/render-inputs-of-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/analyser-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/get-native-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-offline-audio-context-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-native-offline-audio-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/event-target-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-audio-context-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-native-audio-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-native-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-native-audio-param.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-audio-worklet-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/delete-active-input-connection-to-audio-param.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/add-audio-node-connections.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/add-connection-to-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/increment-cycle-counter-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/decrement-cycle-counter.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/detect-cycles.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/guards/delay-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-audio-buffer-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/convert-number-to-unsigned-long.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/wrap-audio-buffer-copy-channel-methods.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/test-audio-buffer-constructor-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/add-silent-connection.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/render-inputs-of-audio-param.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/connect-audio-param.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-audio-buffer-source-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-audio-buffer-source-node-start-method-offset-clamping.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-audio-buffer-source-node-start-method-offset-clamping-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/render-automation.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/get-audio-param-renderer.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-buffer-source-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-param-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-param-renderer.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/add-audio-param-connections.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-destination-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-destination-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-audio-destination-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/biquad-filter-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/set-audio-node-tail-time.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/monitor-connections.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/wrap-channel-merger-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-channel-merger-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/channel-merger-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/channel-splitter-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/sanitize-channel-splitter-options.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-constant-source-node-faker-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-constant-source-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/constant-source-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-convolver-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/convolver-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/delay-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-dynamics-compressor-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/dynamics-compressor-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/gain-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/render-native-offline-audio-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/test-offline-audio-context-current-time-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/iir-filter-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-iir-filter-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/wrap-iir-filter-node-get-frequency-response-method.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-listener-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/minimal-base-audio-context-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-oscillator-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/oscillator-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/connected-native-audio-buffer-source-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-wave-shaper-node-faker-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-wave-shaper-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-panner-node-faker-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-panner-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/panner-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-periodic-wave-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/sanitize-periodic-wave-options.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-stereo-panner-node-faker-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-stereo-panner-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/stereo-panner-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/wave-shaper-node-renderer-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-secure-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/expose-current-frame-and-current-time.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/get-or-create-backup-offline-audio-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/evaluate-source.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/fetch-source.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/test-audio-worklet-processor-post-message-support.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-native-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/decode-audio-data.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/data-clone-error.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/encoding-error.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/base-audio-context-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/media-element-audio-source-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-media-element-audio-source-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-media-stream-audio-destination-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/media-stream-audio-source-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-media-stream-audio-source-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-media-stream-track-audio-source-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/media-stream-track-audio-source-node-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/audio-context-constructor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/is-valid-latency-hint.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/get-unrendered-audio-worklet-nodes.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/add-unrendered-audio-worklet-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/connect-multiple-outputs.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/delete-unrendered-audio-worklet-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/get-active-audio-worklet-node-inputs.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-audio-worklet-node-faker-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/create-audio-worklet-processor.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/create-audio-worklet-processor-promise.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/clone-audio-worklet-node-options.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/native-audio-worklet-node-factory.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-clonability-of-audio-worklet-node-options.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/get-backup-offline-audio-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/set-active-audio-worklet-node-inputs.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/sanitize-audio-worklet-node-options.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/helpers/test-audio-worklet-node-options-clonability.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/create-native-offline-audio-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/start-rendering.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-any-audio-context.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-any-audio-node.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-any-audio-param.js","webpack://pixi-demo/./node_modules/standardized-audio-context/build/es2019/factories/is-any-offline-audio-context.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/TypeCheck.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/Debug.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/AudioContext.js","webpack://pixi-demo/./node_modules/tslib/tslib.es6.mjs","webpack://pixi-demo/./node_modules/tone/build/esm/core/clock/Ticker.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/AdvancedTypeCheck.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/Defaults.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/Tone.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/Math.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/Timeline.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/ContextInitialization.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/Emitter.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/BaseContext.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/Context.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/Interface.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/ToneAudioBuffer.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/OfflineContext.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/Global.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/DummyContext.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/type/Conversions.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/type/TimeBase.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/type/Time.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/type/Frequency.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/type/TransportTime.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/ToneWithContext.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/StateTimeline.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/Param.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/ToneAudioNode.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/Gain.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/OneShotSource.js","webpack://pixi-demo/./node_modules/tone/build/esm/signal/ToneConstantSource.js","webpack://pixi-demo/./node_modules/tone/build/esm/signal/Signal.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/clock/TickParam.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/clock/TickSignal.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/clock/TickSource.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/clock/Clock.js","webpack://pixi-demo/./node_modules/tone/build/esm/component/channel/Volume.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/Destination.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/Listener.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/context/ToneAudioBuffers.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/type/Midi.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/type/Ticks.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/Draw.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/IntervalTimeline.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/TimelineValue.js","webpack://pixi-demo/./node_modules/tone/build/esm/signal/SignalOperator.js","webpack://pixi-demo/./node_modules/tone/build/esm/signal/WaveShaper.js","webpack://pixi-demo/./node_modules/tone/build/esm/signal/Pow.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/clock/TransportEvent.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/clock/TransportRepeatEvent.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/clock/Transport.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/Source.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/buffer/ToneBufferSource.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/oscillator/OscillatorInterface.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/oscillator/ToneOscillatorNode.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/oscillator/Oscillator.js","webpack://pixi-demo/./node_modules/tone/build/esm/signal/AudioToGain.js","webpack://pixi-demo/./node_modules/tone/build/esm/signal/Multiply.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/oscillator/AMOscillator.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/oscillator/FMOscillator.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/oscillator/PulseOscillator.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/oscillator/FatOscillator.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/oscillator/PWMOscillator.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/oscillator/OmniOscillator.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/util/Decorator.js","webpack://pixi-demo/./node_modules/tone/build/esm/source/buffer/Player.js","webpack://pixi-demo/./node_modules/tone/build/esm/component/envelope/Envelope.js","webpack://pixi-demo/./node_modules/tone/build/esm/instrument/Instrument.js","webpack://pixi-demo/./node_modules/tone/build/esm/instrument/Monophonic.js","webpack://pixi-demo/./node_modules/tone/build/esm/component/envelope/AmplitudeEnvelope.js","webpack://pixi-demo/./node_modules/tone/build/esm/instrument/Synth.js","webpack://pixi-demo/./node_modules/tone/build/esm/instrument/MembraneSynth.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/worklet/WorkletGlobalScope.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/worklet/ToneAudioWorkletProcessor.worklet.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/worklet/SingleIOProcessor.worklet.js","webpack://pixi-demo/./node_modules/tone/build/esm/core/worklet/DelayLine.worklet.js","webpack://pixi-demo/./node_modules/tone/build/esm/component/filter/FeedbackCombFilter.worklet.js","webpack://pixi-demo/./node_modules/tone/build/esm/instrument/Sampler.js","webpack://pixi-demo/./node_modules/tone/build/esm/component/channel/Panner.js","webpack://pixi-demo/./node_modules/tone/build/esm/effect/BitCrusher.worklet.js","webpack://pixi-demo/./node_modules/tone/build/esm/component/channel/Solo.js","webpack://pixi-demo/./node_modules/tone/build/esm/component/channel/PanVol.js","webpack://pixi-demo/./node_modules/tone/build/esm/component/channel/Channel.js","webpack://pixi-demo/./node_modules/tone/build/esm/index.js","webpack://pixi-demo/./src/common/typed-emitter.ts","webpack://pixi-demo/./src/common/tone-audio.ts","webpack://pixi-demo/./node_modules/lodash-es/clamp.js","webpack://pixi-demo/./node_modules/lodash-es/_baseClamp.js","webpack://pixi-demo/./src/common/ease.ts","webpack://pixi-demo/./src/common/tween.ts","webpack://pixi-demo/./src/common/tween-group.ts","webpack://pixi-demo/./src/common/app-base.ts","webpack://pixi-demo/./src/demo-app/scene-key.ts","webpack://pixi-demo/./src/common/game-object.ts","webpack://pixi-demo/./src/common/scene.ts","webpack://pixi-demo/./src/common/ui/ui-button.ts","webpack://pixi-demo/./src/common/ui/ui-text-button.ts","webpack://pixi-demo/./src/demo-app/constants.ts","webpack://pixi-demo/./src/demo-app/ui/demo-app-hud.ts","webpack://pixi-demo/./src/demo-app/scenes/ace-of-shadows/constants.ts","webpack://pixi-demo/./src/demo-app/scenes/ace-of-shadows/card-sprite.ts","webpack://pixi-demo/./node_modules/lodash-es/_baseRandom.js","webpack://pixi-demo/./node_modules/lodash-es/_shuffleSelf.js","webpack://pixi-demo/./node_modules/lodash-es/_arrayShuffle.js","webpack://pixi-demo/./node_modules/lodash-es/_copyArray.js","webpack://pixi-demo/./node_modules/lodash-es/_baseValues.js","webpack://pixi-demo/./node_modules/lodash-es/_arrayMap.js","webpack://pixi-demo/./node_modules/lodash-es/_nativeKeys.js","webpack://pixi-demo/./node_modules/lodash-es/_overArg.js","webpack://pixi-demo/./node_modules/lodash-es/_baseKeys.js","webpack://pixi-demo/./node_modules/lodash-es/keys.js","webpack://pixi-demo/./node_modules/lodash-es/_baseShuffle.js","webpack://pixi-demo/./node_modules/lodash-es/values.js","webpack://pixi-demo/./src/demo-app/scenes/ace-of-shadows/cards-controller.ts","webpack://pixi-demo/./node_modules/lodash-es/shuffle.js","webpack://pixi-demo/./src/demo-app/scenes/ace-of-shadows/ace-of-shadows-scene.ts","webpack://pixi-demo/./src/demo-app/scenes/magic-words/magic-words-text.ts","webpack://pixi-demo/./src/demo-app/scenes/magic-words/magic-words-scene.ts","webpack://pixi-demo/./src/demo-app/scenes/magic-words/fetch-magic-words.ts","webpack://pixi-demo/./src/demo-app/scenes/magic-words/constants.ts","webpack://pixi-demo/./src/demo-app/scenes/menu/menu-scene.ts","webpack://pixi-demo/./node_modules/@spd789562/particle-emitter/dist/index.js","webpack://pixi-demo/./src/demo-app/scenes/phoenix-flame/phoenix-flame-scene.ts","webpack://pixi-demo/./src/demo-app/demo-app.ts","webpack://pixi-demo/./src/index.ts"],"sourcesContent":["var getProto = Object.getPrototypeOf ? (obj) => (Object.getPrototypeOf(obj)) : (obj) => (obj.__proto__);\nvar leafPrototypes;\n// create a fake namespace object\n// mode & 1: value is a module id, require it\n// mode & 2: merge all properties of value into the ns\n// mode & 4: return value when already ns object\n// mode & 16: return value when it's Promise-like\n// mode & 8|1: behave like require\n__webpack_require__.t = function(value, mode) {\n\tif(mode & 1) value = this(value);\n\tif(mode & 8) return value;\n\tif(typeof value === 'object' && value) {\n\t\tif((mode & 4) && value.__esModule) return value;\n\t\tif((mode & 16) && typeof value.then === 'function') return value;\n\t}\n\tvar ns = Object.create(null);\n\t__webpack_require__.r(ns);\n\tvar def = {};\n\tleafPrototypes = leafPrototypes || [null, getProto({}), getProto([]), getProto(getProto)];\n\tfor(var current = mode & 2 && value; (typeof current == 'object' || typeof current == 'function') && !~leafPrototypes.indexOf(current); current = getProto(current)) {\n\t\tObject.getOwnPropertyNames(current).forEach((key) => (def[key] = () => (value[key])));\n\t}\n\tdef['default'] = () => (value);\n\t__webpack_require__.d(ns, def);\n\treturn ns;\n};","function _arrayLikeToArray(r, a) {\n  (null == a || a > r.length) && (a = r.length);\n  for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];\n  return n;\n}\nmodule.exports = _arrayLikeToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nconst uidCache = {\n  default: -1\n};\nfunction uid(name = \"default\") {\n  if (uidCache[name] === void 0) {\n    uidCache[name] = -1;\n  }\n  return ++uidCache[name];\n}\nfunction resetUids() {\n  for (const key in uidCache) {\n    delete uidCache[key];\n  }\n}\n\nexport { resetUids, uid };\n//# sourceMappingURL=uid.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { updateTransformBackwards } from '../bounds/getGlobalBounds.mjs';\nimport { matrixPool } from '../bounds/utils/matrixAndBoundsPool.mjs';\nimport { multiplyColors } from '../utils/multiplyColors.mjs';\n\n\"use strict\";\nfunction bgr2rgb(color) {\n  return ((color & 255) << 16) + (color & 65280) + (color >> 16 & 255);\n}\nconst getGlobalMixin = {\n  getGlobalAlpha(skipUpdate) {\n    if (skipUpdate) {\n      if (this.renderGroup) {\n        return this.renderGroup.worldAlpha;\n      }\n      if (this.parentRenderGroup) {\n        return this.parentRenderGroup.worldAlpha * this.alpha;\n      }\n      return this.alpha;\n    }\n    let alpha = this.alpha;\n    let current = this.parent;\n    while (current) {\n      alpha *= current.alpha;\n      current = current.parent;\n    }\n    return alpha;\n  },\n  getGlobalTransform(matrix = new Matrix(), skipUpdate) {\n    if (skipUpdate) {\n      return matrix.copyFrom(this.worldTransform);\n    }\n    this.updateLocalTransform();\n    const parentTransform = updateTransformBackwards(this, matrixPool.get().identity());\n    matrix.appendFrom(this.localTransform, parentTransform);\n    matrixPool.return(parentTransform);\n    return matrix;\n  },\n  getGlobalTint(skipUpdate) {\n    if (skipUpdate) {\n      if (this.renderGroup) {\n        return bgr2rgb(this.renderGroup.worldColor);\n      }\n      if (this.parentRenderGroup) {\n        return bgr2rgb(\n          multiplyColors(this.localColor, this.parentRenderGroup.worldColor)\n        );\n      }\n      return this.tint;\n    }\n    let color = this.localColor;\n    let parent = this.parent;\n    while (parent) {\n      color = multiplyColors(color, parent.localColor);\n      parent = parent.parent;\n    }\n    return bgr2rgb(color);\n  }\n};\n\nexport { bgr2rgb, getGlobalMixin };\n//# sourceMappingURL=getGlobalMixin.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createResourceIdFromString(value) {\n  const id = idHash[value];\n  if (id === void 0) {\n    idHash[value] = uid(\"resource\");\n  }\n  return id;\n}\nconst _TextureStyle = class _TextureStyle extends EventEmitter {\n  /**\n   * @param options - options for the style\n   */\n  constructor(options = {}) {\n    super();\n    /** @internal */\n    this._resourceType = \"textureSampler\";\n    /** @internal */\n    this._touched = 0;\n    /**\n     * Specifies the maximum anisotropy value clamp used by the sampler.\n     * Note: Most implementations support {@link TextureStyle#maxAnisotropy} values in range\n     * between 1 and 16, inclusive. The used value of {@link TextureStyle#maxAnisotropy} will\n     * be clamped to the maximum value that the platform supports.\n     * @internal\n     */\n    this._maxAnisotropy = 1;\n    /**\n     * Has the style been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    options = { ..._TextureStyle.defaultOptions, ...options };\n    this.addressMode = options.addressMode;\n    this.addressModeU = options.addressModeU ?? this.addressModeU;\n    this.addressModeV = options.addressModeV ?? this.addressModeV;\n    this.addressModeW = options.addressModeW ?? this.addressModeW;\n    this.scaleMode = options.scaleMode;\n    this.magFilter = options.magFilter ?? this.magFilter;\n    this.minFilter = options.minFilter ?? this.minFilter;\n    this.mipmapFilter = options.mipmapFilter ?? this.mipmapFilter;\n    this.lodMinClamp = options.lodMinClamp;\n    this.lodMaxClamp = options.lodMaxClamp;\n    this.compare = options.compare;\n    this.maxAnisotropy = options.maxAnisotropy ?? 1;\n  }\n  set addressMode(value) {\n    this.addressModeU = value;\n    this.addressModeV = value;\n    this.addressModeW = value;\n  }\n  /** setting this will set wrapModeU,wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this.addressModeU;\n  }\n  set wrapMode(value) {\n    deprecation(v8_0_0, \"TextureStyle.wrapMode is now TextureStyle.addressMode\");\n    this.addressMode = value;\n  }\n  get wrapMode() {\n    return this.addressMode;\n  }\n  set scaleMode(value) {\n    this.magFilter = value;\n    this.minFilter = value;\n    this.mipmapFilter = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this.magFilter;\n  }\n  /** Specifies the maximum anisotropy value clamp used by the sampler. */\n  set maxAnisotropy(value) {\n    this._maxAnisotropy = Math.min(value, 16);\n    if (this._maxAnisotropy > 1) {\n      this.scaleMode = \"linear\";\n    }\n  }\n  get maxAnisotropy() {\n    return this._maxAnisotropy;\n  }\n  // TODO - move this to WebGL?\n  get _resourceId() {\n    return this._sharedResourceId || this._generateResourceId();\n  }\n  update() {\n    this.emit(\"change\", this);\n    this._sharedResourceId = null;\n  }\n  _generateResourceId() {\n    const bigKey = `${this.addressModeU}-${this.addressModeV}-${this.addressModeW}-${this.magFilter}-${this.minFilter}-${this.mipmapFilter}-${this.lodMinClamp}-${this.lodMaxClamp}-${this.compare}-${this._maxAnisotropy}`;\n    this._sharedResourceId = createResourceIdFromString(bigKey);\n    return this._resourceId;\n  }\n  /** Destroys the style */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this.removeAllListeners();\n  }\n};\n/** default options for the style */\n_TextureStyle.defaultOptions = {\n  addressMode: \"clamp-to-edge\",\n  scaleMode: \"linear\"\n};\nlet TextureStyle = _TextureStyle;\n\nexport { TextureStyle };\n//# sourceMappingURL=TextureStyle.mjs.map\n","import { deprecation } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst cacheAsTextureMixin = {\n  get isCachedAsTexture() {\n    return !!this.renderGroup?.isCachedAsTexture;\n  },\n  cacheAsTexture(val) {\n    if (typeof val === \"boolean\" && val === false) {\n      this.disableRenderGroup();\n    } else {\n      this.enableRenderGroup();\n      this.renderGroup.enableCacheAsTexture(val === true ? {} : val);\n    }\n  },\n  updateCacheTexture() {\n    this.renderGroup?.updateCacheTexture();\n  },\n  get cacheAsBitmap() {\n    return this.isCachedAsTexture;\n  },\n  set cacheAsBitmap(val) {\n    deprecation(\"v8.6.0\", \"cacheAsBitmap is deprecated, use cacheAsTexture instead.\");\n    this.cacheAsTexture(val);\n  }\n};\n\nexport { cacheAsTextureMixin };\n//# sourceMappingURL=cacheAsTextureMixin.mjs.map\n","import { removeItems } from '../../../utils/data/removeItems.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst childrenHelperMixin = {\n  allowChildren: true,\n  removeChildren(beginIndex = 0, endIndex) {\n    const end = endIndex ?? this.children.length;\n    const range = end - beginIndex;\n    const removed = [];\n    if (range > 0 && range <= end) {\n      for (let i = end - 1; i >= beginIndex; i--) {\n        const child = this.children[i];\n        if (!child)\n          continue;\n        removed.push(child);\n        child.parent = null;\n      }\n      removeItems(this.children, beginIndex, end);\n      const renderGroup = this.renderGroup || this.parentRenderGroup;\n      if (renderGroup) {\n        renderGroup.removeChildren(removed);\n      }\n      for (let i = 0; i < removed.length; ++i) {\n        const child = removed[i];\n        child.parentRenderLayer?.detach(child);\n        this.emit(\"childRemoved\", child, this, i);\n        removed[i].emit(\"removed\", this);\n      }\n      if (removed.length > 0) {\n        this._didViewChangeTick++;\n      }\n      return removed;\n    } else if (range === 0 && this.children.length === 0) {\n      return removed;\n    }\n    throw new RangeError(\"removeChildren: numeric values are outside the acceptable range.\");\n  },\n  removeChildAt(index) {\n    const child = this.getChildAt(index);\n    return this.removeChild(child);\n  },\n  getChildAt(index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`getChildAt: Index (${index}) does not exist.`);\n    }\n    return this.children[index];\n  },\n  setChildIndex(child, index) {\n    if (index < 0 || index >= this.children.length) {\n      throw new Error(`The index ${index} supplied is out of bounds ${this.children.length}`);\n    }\n    this.getChildIndex(child);\n    this.addChildAt(child, index);\n  },\n  getChildIndex(child) {\n    const index = this.children.indexOf(child);\n    if (index === -1) {\n      throw new Error(\"The supplied Container must be a child of the caller\");\n    }\n    return index;\n  },\n  addChildAt(child, index) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChildAt: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    const { children } = this;\n    if (index < 0 || index > children.length) {\n      throw new Error(`${child}addChildAt: The index ${index} supplied is out of bounds ${children.length}`);\n    }\n    if (child.parent) {\n      const currentIndex = child.parent.children.indexOf(child);\n      if (child.parent === this && currentIndex === index) {\n        return child;\n      }\n      if (currentIndex !== -1) {\n        child.parent.children.splice(currentIndex, 1);\n      }\n    }\n    if (index === children.length) {\n      children.push(child);\n    } else {\n      children.splice(index, 0, child);\n    }\n    child.parent = this;\n    child.didChange = true;\n    child._updateFlags = 15;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.addChild(child);\n    }\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    this.emit(\"childAdded\", child, this, index);\n    child.emit(\"added\", this);\n    return child;\n  },\n  swapChildren(child, child2) {\n    if (child === child2) {\n      return;\n    }\n    const index1 = this.getChildIndex(child);\n    const index2 = this.getChildIndex(child2);\n    this.children[index1] = child2;\n    this.children[index2] = child;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n    this._didContainerChangeTick++;\n  },\n  removeFromParent() {\n    this.parent?.removeChild(this);\n  },\n  reparentChild(...child) {\n    if (child.length === 1) {\n      return this.reparentChildAt(child[0], this.children.length);\n    }\n    child.forEach((c) => this.reparentChildAt(c, this.children.length));\n    return child[0];\n  },\n  reparentChildAt(child, index) {\n    if (child.parent === this) {\n      this.setChildIndex(child, index);\n      return child;\n    }\n    const childMat = child.worldTransform.clone();\n    child.removeFromParent();\n    this.addChildAt(child, index);\n    const newMatrix = this.worldTransform.clone();\n    newMatrix.invert();\n    childMat.prepend(newMatrix);\n    child.setFromMatrix(childMat);\n    return child;\n  },\n  replaceChild(oldChild, newChild) {\n    oldChild.updateLocalTransform();\n    this.addChildAt(newChild, this.getChildIndex(oldChild));\n    newChild.setFromMatrix(oldChild.localTransform);\n    newChild.updateLocalTransform();\n    this.removeChild(oldChild);\n  }\n};\n\nexport { childrenHelperMixin };\n//# sourceMappingURL=childrenHelperMixin.mjs.map\n","\"use strict\";\nconst collectRenderablesMixin = {\n  collectRenderables(instructionSet, renderer, currentLayer) {\n    if (this.parentRenderLayer && this.parentRenderLayer !== currentLayer || this.globalDisplayStatus < 7 || !this.includeInBuild)\n      return;\n    if (this.sortableChildren) {\n      this.sortChildren();\n    }\n    if (this.isSimple) {\n      this.collectRenderablesSimple(instructionSet, renderer, currentLayer);\n    } else if (this.renderGroup) {\n      renderer.renderPipes.renderGroup.addRenderGroup(this.renderGroup, instructionSet);\n    } else {\n      this.collectRenderablesWithEffects(instructionSet, renderer, currentLayer);\n    }\n  },\n  collectRenderablesSimple(instructionSet, renderer, currentLayer) {\n    const children = this.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      children[i].collectRenderables(instructionSet, renderer, currentLayer);\n    }\n  },\n  collectRenderablesWithEffects(instructionSet, renderer, currentLayer) {\n    const { renderPipes } = renderer;\n    for (let i = 0; i < this.effects.length; i++) {\n      const effect = this.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.push(effect, this, instructionSet);\n    }\n    this.collectRenderablesSimple(instructionSet, renderer, currentLayer);\n    for (let i = this.effects.length - 1; i >= 0; i--) {\n      const effect = this.effects[i];\n      const pipe = renderPipes[effect.pipe];\n      pipe.pop(effect, this, instructionSet);\n    }\n  }\n};\n\nexport { collectRenderablesMixin };\n//# sourceMappingURL=collectRenderablesMixin.mjs.map\n","import { extensions, ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\n\n\"use strict\";\nclass MaskEffectManagerClass {\n  constructor() {\n    /** @private */\n    this._effectClasses = [];\n    this._tests = [];\n    this._initialized = false;\n  }\n  init() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n    this._effectClasses.forEach((test) => {\n      this.add({\n        test: test.test,\n        maskClass: test\n      });\n    });\n  }\n  add(test) {\n    this._tests.push(test);\n  }\n  getMaskEffect(item) {\n    if (!this._initialized)\n      this.init();\n    for (let i = 0; i < this._tests.length; i++) {\n      const test = this._tests[i];\n      if (test.test(item)) {\n        return BigPool.get(test.maskClass, item);\n      }\n    }\n    return item;\n  }\n  returnMaskEffect(effect) {\n    BigPool.return(effect);\n  }\n}\nconst MaskEffectManager = new MaskEffectManagerClass();\nextensions.handleByList(ExtensionType.MaskEffect, MaskEffectManager._effectClasses);\n\nexport { MaskEffectManager, MaskEffectManagerClass };\n//# sourceMappingURL=MaskEffectManager.mjs.map\n","import { FilterEffect } from '../../../filters/FilterEffect.mjs';\nimport { MaskEffectManager } from '../../../rendering/mask/MaskEffectManager.mjs';\n\n\"use strict\";\nconst effectsMixin = {\n  _maskEffect: null,\n  _maskOptions: {\n    inverse: false\n  },\n  _filterEffect: null,\n  effects: [],\n  _markStructureAsChanged() {\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n  },\n  addEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index !== -1)\n      return;\n    this.effects.push(effect);\n    this.effects.sort((a, b) => a.priority - b.priority);\n    this._markStructureAsChanged();\n    this._updateIsSimple();\n  },\n  removeEffect(effect) {\n    const index = this.effects.indexOf(effect);\n    if (index === -1)\n      return;\n    this.effects.splice(index, 1);\n    this._markStructureAsChanged();\n    this._updateIsSimple();\n  },\n  set mask(value) {\n    const effect = this._maskEffect;\n    if (effect?.mask === value)\n      return;\n    if (effect) {\n      this.removeEffect(effect);\n      MaskEffectManager.returnMaskEffect(effect);\n      this._maskEffect = null;\n    }\n    if (value === null || value === void 0)\n      return;\n    this._maskEffect = MaskEffectManager.getMaskEffect(value);\n    this.addEffect(this._maskEffect);\n  },\n  get mask() {\n    return this._maskEffect?.mask;\n  },\n  setMask(options) {\n    this._maskOptions = {\n      ...this._maskOptions,\n      ...options\n    };\n    if (options.mask) {\n      this.mask = options.mask;\n    }\n    this._markStructureAsChanged();\n  },\n  set filters(value) {\n    if (!Array.isArray(value) && value)\n      value = [value];\n    const effect = this._filterEffect || (this._filterEffect = new FilterEffect());\n    value = value;\n    const hasFilters = value?.length > 0;\n    const hadFilters = effect.filters?.length > 0;\n    const didChange = hasFilters !== hadFilters;\n    value = Array.isArray(value) ? value.slice(0) : value;\n    effect.filters = Object.freeze(value);\n    if (didChange) {\n      if (hasFilters) {\n        this.addEffect(effect);\n      } else {\n        this.removeEffect(effect);\n        effect.filters = value ?? null;\n      }\n    }\n  },\n  get filters() {\n    return this._filterEffect?.filters;\n  },\n  set filterArea(value) {\n    this._filterEffect || (this._filterEffect = new FilterEffect());\n    this._filterEffect.filterArea = value;\n  },\n  get filterArea() {\n    return this._filterEffect?.filterArea;\n  }\n};\n\nexport { effectsMixin };\n//# sourceMappingURL=effectsMixin.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst findMixin = {\n  label: null,\n  get name() {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    return this.label;\n  },\n  set name(value) {\n    deprecation(v8_0_0, \"Container.name property has been removed, use Container.label instead\");\n    this.label = value;\n  },\n  getChildByName(name, deep = false) {\n    return this.getChildByLabel(name, deep);\n  },\n  getChildByLabel(label, deep = false) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label))\n        return child;\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        const child = children[i];\n        const found = child.getChildByLabel(label, true);\n        if (found) {\n          return found;\n        }\n      }\n    }\n    return null;\n  },\n  getChildrenByLabel(label, deep = false, out = []) {\n    const children = this.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      if (child.label === label || label instanceof RegExp && label.test(child.label)) {\n        out.push(child);\n      }\n    }\n    if (deep) {\n      for (let i = 0; i < children.length; i++) {\n        children[i].getChildrenByLabel(label, true, out);\n      }\n    }\n    return out;\n  }\n};\n\nexport { findMixin };\n//# sourceMappingURL=findMixin.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Bounds } from '../bounds/Bounds.mjs';\nimport { boundsPool } from '../bounds/utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nconst getFastGlobalBoundsMixin = {\n  getFastGlobalBounds(factorRenderLayers, bounds) {\n    bounds || (bounds = new Bounds());\n    bounds.clear();\n    this._getGlobalBoundsRecursive(!!factorRenderLayers, bounds, this.parentRenderLayer);\n    if (!bounds.isValid) {\n      bounds.set(0, 0, 0, 0);\n    }\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    bounds.applyMatrix(renderGroup.worldTransform);\n    return bounds;\n  },\n  _getGlobalBoundsRecursive(factorRenderLayers, bounds, currentLayer) {\n    let localBounds = bounds;\n    if (factorRenderLayers && this.parentRenderLayer && this.parentRenderLayer !== currentLayer)\n      return;\n    if (this.localDisplayStatus !== 7 || !this.measurable) {\n      return;\n    }\n    const manageEffects = !!this.effects.length;\n    if (this.renderGroup || manageEffects) {\n      localBounds = boundsPool.get().clear();\n    }\n    if (this.boundsArea) {\n      bounds.addRect(this.boundsArea, this.worldTransform);\n    } else {\n      if (this.renderPipeId) {\n        const viewBounds = this.bounds;\n        localBounds.addFrame(\n          viewBounds.minX,\n          viewBounds.minY,\n          viewBounds.maxX,\n          viewBounds.maxY,\n          this.groupTransform\n        );\n      }\n      const children = this.children;\n      for (let i = 0; i < children.length; i++) {\n        children[i]._getGlobalBoundsRecursive(factorRenderLayers, localBounds, currentLayer);\n      }\n    }\n    if (manageEffects) {\n      let advanced = false;\n      const renderGroup = this.renderGroup || this.parentRenderGroup;\n      for (let i = 0; i < this.effects.length; i++) {\n        if (this.effects[i].addBounds) {\n          if (!advanced) {\n            advanced = true;\n            localBounds.applyMatrix(renderGroup.worldTransform);\n          }\n          this.effects[i].addBounds(localBounds, true);\n        }\n      }\n      if (advanced) {\n        localBounds.applyMatrix(renderGroup.worldTransform.copyTo(tempMatrix).invert());\n      }\n      bounds.addBounds(localBounds);\n      boundsPool.return(localBounds);\n    } else if (this.renderGroup) {\n      bounds.addBounds(localBounds, this.relativeGroupTransform);\n      boundsPool.return(localBounds);\n    }\n  }\n};\n\nexport { getFastGlobalBoundsMixin };\n//# sourceMappingURL=getFastGlobalBoundsMixin.mjs.map\n","\"use strict\";\nfunction checkChildrenDidChange(container, previousData) {\n  const children = container.children;\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    const uid = child.uid;\n    const didChange = (child._didViewChangeTick & 65535) << 16 | child._didContainerChangeTick & 65535;\n    const index = previousData.index;\n    if (previousData.data[index] !== uid || previousData.data[index + 1] !== didChange) {\n      previousData.data[previousData.index] = uid;\n      previousData.data[previousData.index + 1] = didChange;\n      previousData.didChange = true;\n    }\n    previousData.index = index + 2;\n    if (child.children.length) {\n      checkChildrenDidChange(child, previousData);\n    }\n  }\n  return previousData.didChange;\n}\n\nexport { checkChildrenDidChange };\n//# sourceMappingURL=checkChildrenDidChange.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Bounds } from '../bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../bounds/getGlobalBounds.mjs';\nimport { getLocalBounds } from '../bounds/getLocalBounds.mjs';\nimport { checkChildrenDidChange } from '../utils/checkChildrenDidChange.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nconst measureMixin = {\n  _localBoundsCacheId: -1,\n  _localBoundsCacheData: null,\n  _setWidth(value, localWidth) {\n    const sign = Math.sign(this.scale.x) || 1;\n    if (localWidth !== 0) {\n      this.scale.x = value / localWidth * sign;\n    } else {\n      this.scale.x = sign;\n    }\n  },\n  _setHeight(value, localHeight) {\n    const sign = Math.sign(this.scale.y) || 1;\n    if (localHeight !== 0) {\n      this.scale.y = value / localHeight * sign;\n    } else {\n      this.scale.y = sign;\n    }\n  },\n  getLocalBounds() {\n    if (!this._localBoundsCacheData) {\n      this._localBoundsCacheData = {\n        data: [],\n        index: 1,\n        didChange: false,\n        localBounds: new Bounds()\n      };\n    }\n    const localBoundsCacheData = this._localBoundsCacheData;\n    localBoundsCacheData.index = 1;\n    localBoundsCacheData.didChange = false;\n    if (localBoundsCacheData.data[0] !== this._didViewChangeTick) {\n      localBoundsCacheData.didChange = true;\n      localBoundsCacheData.data[0] = this._didViewChangeTick;\n    }\n    checkChildrenDidChange(this, localBoundsCacheData);\n    if (localBoundsCacheData.didChange) {\n      getLocalBounds(this, localBoundsCacheData.localBounds, tempMatrix);\n    }\n    return localBoundsCacheData.localBounds;\n  },\n  getBounds(skipUpdate, bounds) {\n    return getGlobalBounds(this, skipUpdate, bounds || new Bounds());\n  }\n};\n\nexport { measureMixin };\n//# sourceMappingURL=measureMixin.mjs.map\n","\"use strict\";\nconst onRenderMixin = {\n  _onRender: null,\n  set onRender(func) {\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (!func) {\n      if (this._onRender) {\n        renderGroup?.removeOnRender(this);\n      }\n      this._onRender = null;\n      return;\n    }\n    if (!this._onRender) {\n      renderGroup?.addOnRender(this);\n    }\n    this._onRender = func;\n  },\n  get onRender() {\n    return this._onRender;\n  }\n};\n\nexport { onRenderMixin };\n//# sourceMappingURL=onRenderMixin.mjs.map\n","\"use strict\";\nconst sortMixin = {\n  _zIndex: 0,\n  sortDirty: false,\n  sortableChildren: false,\n  get zIndex() {\n    return this._zIndex;\n  },\n  set zIndex(value) {\n    if (this._zIndex === value)\n      return;\n    this._zIndex = value;\n    this.depthOfChildModified();\n  },\n  depthOfChildModified() {\n    if (this.parent) {\n      this.parent.sortableChildren = true;\n      this.parent.sortDirty = true;\n    }\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n  },\n  sortChildren() {\n    if (!this.sortDirty)\n      return;\n    this.sortDirty = false;\n    this.children.sort(sortChildren);\n  }\n};\nfunction sortChildren(a, b) {\n  return a._zIndex - b._zIndex;\n}\n\nexport { sortMixin };\n//# sourceMappingURL=sortMixin.mjs.map\n","import { Point } from '../../../maths/point/Point.mjs';\nimport { matrixPool } from '../bounds/utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nconst toLocalGlobalMixin = {\n  getGlobalPosition(point = new Point(), skipUpdate = false) {\n    if (this.parent) {\n      this.parent.toGlobal(this._position, point, skipUpdate);\n    } else {\n      point.x = this._position.x;\n      point.y = this._position.y;\n    }\n    return point;\n  },\n  toGlobal(position, point, skipUpdate = false) {\n    const globalMatrix = this.getGlobalTransform(matrixPool.get(), skipUpdate);\n    point = globalMatrix.apply(position, point);\n    matrixPool.return(globalMatrix);\n    return point;\n  },\n  toLocal(position, from, point, skipUpdate) {\n    if (from) {\n      position = from.toGlobal(position, point, skipUpdate);\n    }\n    const globalMatrix = this.getGlobalTransform(matrixPool.get(), skipUpdate);\n    point = globalMatrix.applyInverse(position, point);\n    matrixPool.return(globalMatrix);\n    return point;\n  }\n};\n\nexport { toLocalGlobalMixin };\n//# sourceMappingURL=toLocalGlobalMixin.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { cullingMixin } from '../../culling/cullingMixin.mjs';\nimport { extensions } from '../../extensions/Extensions.mjs';\nimport { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { RAD_TO_DEG, DEG_TO_RAD } from '../../maths/misc/const.mjs';\nimport { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { uid } from '../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { cacheAsTextureMixin } from './container-mixins/cacheAsTextureMixin.mjs';\nimport { childrenHelperMixin } from './container-mixins/childrenHelperMixin.mjs';\nimport { collectRenderablesMixin } from './container-mixins/collectRenderablesMixin.mjs';\nimport { effectsMixin } from './container-mixins/effectsMixin.mjs';\nimport { findMixin } from './container-mixins/findMixin.mjs';\nimport { getFastGlobalBoundsMixin } from './container-mixins/getFastGlobalBoundsMixin.mjs';\nimport { bgr2rgb, getGlobalMixin } from './container-mixins/getGlobalMixin.mjs';\nimport { measureMixin } from './container-mixins/measureMixin.mjs';\nimport { onRenderMixin } from './container-mixins/onRenderMixin.mjs';\nimport { sortMixin } from './container-mixins/sortMixin.mjs';\nimport { toLocalGlobalMixin } from './container-mixins/toLocalGlobalMixin.mjs';\nimport { RenderGroup } from './RenderGroup.mjs';\nimport { assignWithIgnore } from './utils/assignWithIgnore.mjs';\n\n\"use strict\";\nconst defaultSkew = new ObservablePoint(null);\nconst defaultPivot = new ObservablePoint(null);\nconst defaultScale = new ObservablePoint(null, 1, 1);\nconst defaultOrigin = new ObservablePoint(null);\nconst UPDATE_COLOR = 1;\nconst UPDATE_BLEND = 2;\nconst UPDATE_VISIBLE = 4;\nconst UPDATE_TRANSFORM = 8;\nclass Container extends EventEmitter {\n  constructor(options = {}) {\n    super();\n    /**\n     * unique id for this container\n     * @internal\n     */\n    this.uid = uid(\"renderable\");\n    /** @private */\n    this._updateFlags = 15;\n    // the render group this container owns\n    /** @private */\n    this.renderGroup = null;\n    // the render group this container belongs to\n    /** @private */\n    this.parentRenderGroup = null;\n    // the index of the container in the render group\n    /** @private */\n    this.parentRenderGroupIndex = 0;\n    // set to true if the container has changed. It is reset once the changes have been applied\n    // by the transform system\n    // its here to stop ensure that when things change, only one update gets registers with the transform system\n    /** @private */\n    this.didChange = false;\n    // same as above, but for the renderable\n    /** @private */\n    this.didViewUpdate = false;\n    // how deep is the container relative to its render group..\n    // unless the element is the root render group - it will be relative to its parent\n    /** @private */\n    this.relativeRenderGroupDepth = 0;\n    /**\n     * The array of children of this container. Each child must be a Container or extend from it.\n     *\n     * The array is read-only, but its contents can be modified using Container methods.\n     * @example\n     * ```ts\n     * // Access children\n     * const firstChild = container.children[0];\n     * const lastChild = container.children[container.children.length - 1];\n     * ```\n     * @readonly\n     * @see {@link Container#addChild} For adding children\n     * @see {@link Container#removeChild} For removing children\n     */\n    this.children = [];\n    /**\n     * The display object container that contains this display object.\n     * This represents the parent-child relationship in the display tree.\n     * @example\n     * ```ts\n     * // Basic parent access\n     * const parent = sprite.parent;\n     *\n     * // Walk up the tree\n     * let current = sprite;\n     * while (current.parent) {\n     *     console.log('Level up:', current.parent.constructor.name);\n     *     current = current.parent;\n     * }\n     * ```\n     * @readonly\n     * @see {@link Container#addChild} For adding to a parent\n     * @see {@link Container#removeChild} For removing from parent\n     */\n    this.parent = null;\n    // used internally for changing up the render order.. mainly for masks and filters\n    // TODO setting this should cause a rebuild??\n    /** @private */\n    this.includeInBuild = true;\n    /** @private */\n    this.measurable = true;\n    /** @private */\n    this.isSimple = true;\n    /**\n     * The RenderLayer this container belongs to, if any.\n     * If it belongs to a RenderLayer, it will be rendered from the RenderLayer's position in the scene.\n     * @readonly\n     * @advanced\n     */\n    this.parentRenderLayer = null;\n    // / /////////////Transform related props//////////////\n    // used by the transform system to check if a container needs to be updated that frame\n    // if the tick matches the current transform system tick, it is not updated again\n    /** @internal */\n    this.updateTick = -1;\n    /**\n     * Current transform of the object based on local factors: position, scale, other stuff.\n     * This matrix represents the local transformation without any parent influence.\n     * @example\n     * ```ts\n     * // Basic transform access\n     * const localMatrix = sprite.localTransform;\n     * console.log(localMatrix.toString());\n     * ```\n     * @readonly\n     * @see {@link Container#worldTransform} For global transform\n     * @see {@link Container#groupTransform} For render group transform\n     */\n    this.localTransform = new Matrix();\n    /**\n     * The relative group transform is a transform relative to the render group it belongs too. It will include all parent\n     * transforms and up to the render group (think of it as kind of like a stage - but the stage can be nested).\n     * If this container is is self a render group matrix will be relative to its parent render group\n     * @readonly\n     * @advanced\n     */\n    this.relativeGroupTransform = new Matrix();\n    /**\n     * The group transform is a transform relative to the render group it belongs too.\n     * If this container is render group then this will be an identity matrix. other wise it\n     * will be the same as the relativeGroupTransform.\n     * Use this value when actually rendering things to the screen\n     * @readonly\n     * @advanced\n     */\n    this.groupTransform = this.relativeGroupTransform;\n    /**\n     * Whether this object has been destroyed. If true, the object should no longer be used.\n     * After an object is destroyed, all of its functionality is disabled and references are removed.\n     * @example\n     * ```ts\n     * // Cleanup with destroy\n     * sprite.destroy();\n     * console.log(sprite.destroyed); // true\n     * ```\n     * @default false\n     * @see {@link Container#destroy} For destroying objects\n     */\n    this.destroyed = false;\n    // transform data..\n    /**\n     * The coordinate of the object relative to the local coordinates of the parent.\n     * @internal\n     */\n    this._position = new ObservablePoint(this, 0, 0);\n    /**\n     * The scale factor of the object.\n     * @internal\n     */\n    this._scale = defaultScale;\n    /**\n     * The pivot point of the container that it rotates around.\n     * @internal\n     */\n    this._pivot = defaultPivot;\n    /**\n     * The origin point around which the container rotates and scales.\n     * Unlike pivot, changing origin will not move the container's position.\n     * @private\n     */\n    this._origin = defaultOrigin;\n    /**\n     * The skew amount, on the x and y axis.\n     * @internal\n     */\n    this._skew = defaultSkew;\n    /**\n     * The X-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._cx = 1;\n    /**\n     * The Y-coordinate value of the normalized local X axis,\n     * the first column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._sx = 0;\n    /**\n     * The X-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._cy = 0;\n    /**\n     * The Y-coordinate value of the normalized local Y axis,\n     * the second column of the local transformation matrix without a scale.\n     * @internal\n     */\n    this._sy = 1;\n    /**\n     * The rotation amount.\n     * @internal\n     */\n    this._rotation = 0;\n    // / COLOR related props //////////////\n    // color stored as ABGR\n    /** @internal */\n    this.localColor = 16777215;\n    /** @internal */\n    this.localAlpha = 1;\n    /** @internal */\n    this.groupAlpha = 1;\n    // A\n    /** @internal */\n    this.groupColor = 16777215;\n    // BGR\n    /** @internal */\n    this.groupColorAlpha = 4294967295;\n    // ABGR\n    // / BLEND related props //////////////\n    /** @internal */\n    this.localBlendMode = \"inherit\";\n    /** @internal */\n    this.groupBlendMode = \"normal\";\n    // / VISIBILITY related props //////////////\n    // visibility\n    // 0b11\n    // first bit is visible, second bit is renderable\n    /**\n     * This property holds three bits: culled, visible, renderable\n     * the third bit represents culling (0 = culled, 1 = not culled) 0b100\n     * the second bit represents visibility (0 = not visible, 1 = visible) 0b010\n     * the first bit represents renderable (0 = not renderable, 1 = renderable) 0b001\n     * @internal\n     */\n    this.localDisplayStatus = 7;\n    // 0b11 | 0b10 | 0b01 | 0b00\n    /** @internal */\n    this.globalDisplayStatus = 7;\n    /**\n     * A value that increments each time the containe is modified\n     * eg children added, removed etc\n     * @ignore\n     */\n    this._didContainerChangeTick = 0;\n    /**\n     * A value that increments each time the container view is modified\n     * eg texture swap, geometry change etc\n     * @ignore\n     */\n    this._didViewChangeTick = 0;\n    /**\n     * property that tracks if the container transform has changed\n     * @ignore\n     */\n    this._didLocalTransformChangeId = -1;\n    this.effects = [];\n    assignWithIgnore(this, options, {\n      children: true,\n      parent: true,\n      effects: true\n    });\n    options.children?.forEach((child) => this.addChild(child));\n    options.parent?.addChild(this);\n  }\n  /**\n   * Mixes all enumerable properties and methods from a source object to Container.\n   * @param source - The source of properties and methods to mix in.\n   * @deprecated since 8.8.0\n   */\n  static mixin(source) {\n    deprecation(\"8.8.0\", \"Container.mixin is deprecated, please use extensions.mixin instead.\");\n    extensions.mixin(Container, source);\n  }\n  // = 'default';\n  /**\n   * We now use the _didContainerChangeTick and _didViewChangeTick to track changes\n   * @deprecated since 8.2.6\n   * @ignore\n   */\n  set _didChangeId(value) {\n    this._didViewChangeTick = value >> 12 & 4095;\n    this._didContainerChangeTick = value & 4095;\n  }\n  /** @ignore */\n  get _didChangeId() {\n    return this._didContainerChangeTick & 4095 | (this._didViewChangeTick & 4095) << 12;\n  }\n  /**\n   * Adds one or more children to the container.\n   * The children will be rendered as part of this container's display list.\n   * @example\n   * ```ts\n   * // Add a single child\n   * container.addChild(sprite);\n   *\n   * // Add multiple children\n   * container.addChild(background, player, foreground);\n   *\n   * // Add with type checking\n   * const sprite = container.addChild<Sprite>(new Sprite(texture));\n   * sprite.tint = 'red';\n   * ```\n   * @param children - The Container(s) to add to the container\n   * @returns The first child that was added\n   * @see {@link Container#removeChild} For removing children\n   * @see {@link Container#addChildAt} For adding at specific index\n   */\n  addChild(...children) {\n    if (!this.allowChildren) {\n      deprecation(v8_0_0, \"addChild: Only Containers will be allowed to add children in v8.0.0\");\n    }\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.addChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (child.parent === this) {\n      this.children.splice(this.children.indexOf(child), 1);\n      this.children.push(child);\n      if (renderGroup) {\n        renderGroup.structureDidChange = true;\n      }\n      return child;\n    }\n    if (child.parent) {\n      child.parent.removeChild(child);\n    }\n    this.children.push(child);\n    if (this.sortableChildren)\n      this.sortDirty = true;\n    child.parent = this;\n    child.didChange = true;\n    child._updateFlags = 15;\n    if (renderGroup) {\n      renderGroup.addChild(child);\n    }\n    this.emit(\"childAdded\", child, this, this.children.length - 1);\n    child.emit(\"added\", this);\n    this._didViewChangeTick++;\n    if (child._zIndex !== 0) {\n      child.depthOfChildModified();\n    }\n    return child;\n  }\n  /**\n   * Removes one or more children from the container.\n   * When removing multiple children, events will be triggered for each child in sequence.\n   * @example\n   * ```ts\n   * // Remove a single child\n   * const removed = container.removeChild(sprite);\n   *\n   * // Remove multiple children\n   * const bg = container.removeChild(background, player, userInterface);\n   *\n   * // Remove with type checking\n   * const sprite = container.removeChild<Sprite>(childSprite);\n   * sprite.texture = newTexture;\n   * ```\n   * @param children - The Container(s) to remove\n   * @returns The first child that was removed\n   * @see {@link Container#addChild} For adding children\n   * @see {@link Container#removeChildren} For removing multiple children\n   */\n  removeChild(...children) {\n    if (children.length > 1) {\n      for (let i = 0; i < children.length; i++) {\n        this.removeChild(children[i]);\n      }\n      return children[0];\n    }\n    const child = children[0];\n    const index = this.children.indexOf(child);\n    if (index > -1) {\n      this._didViewChangeTick++;\n      this.children.splice(index, 1);\n      if (this.renderGroup) {\n        this.renderGroup.removeChild(child);\n      } else if (this.parentRenderGroup) {\n        this.parentRenderGroup.removeChild(child);\n      }\n      if (child.parentRenderLayer) {\n        child.parentRenderLayer.detach(child);\n      }\n      child.parent = null;\n      this.emit(\"childRemoved\", child, this, index);\n      child.emit(\"removed\", this);\n    }\n    return child;\n  }\n  /** @ignore */\n  _onUpdate(point) {\n    if (point) {\n      if (point === this._skew) {\n        this._updateSkew();\n      }\n    }\n    this._didContainerChangeTick++;\n    if (this.didChange)\n      return;\n    this.didChange = true;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.onChildUpdate(this);\n    }\n  }\n  set isRenderGroup(value) {\n    if (!!this.renderGroup === value)\n      return;\n    if (value) {\n      this.enableRenderGroup();\n    } else {\n      this.disableRenderGroup();\n    }\n  }\n  /**\n   * Returns true if this container is a render group.\n   * This means that it will be rendered as a separate pass, with its own set of instructions\n   * @advanced\n   */\n  get isRenderGroup() {\n    return !!this.renderGroup;\n  }\n  /**\n   * Calling this enables a render group for this container.\n   * This means it will be rendered as a separate set of instructions.\n   * The transform of the container will also be handled on the GPU rather than the CPU.\n   * @advanced\n   */\n  enableRenderGroup() {\n    if (this.renderGroup)\n      return;\n    const parentRenderGroup = this.parentRenderGroup;\n    parentRenderGroup?.removeChild(this);\n    this.renderGroup = BigPool.get(RenderGroup, this);\n    this.groupTransform = Matrix.IDENTITY;\n    parentRenderGroup?.addChild(this);\n    this._updateIsSimple();\n  }\n  /**\n   * This will disable the render group for this container.\n   * @advanced\n   */\n  disableRenderGroup() {\n    if (!this.renderGroup)\n      return;\n    const parentRenderGroup = this.parentRenderGroup;\n    parentRenderGroup?.removeChild(this);\n    BigPool.return(this.renderGroup);\n    this.renderGroup = null;\n    this.groupTransform = this.relativeGroupTransform;\n    parentRenderGroup?.addChild(this);\n    this._updateIsSimple();\n  }\n  /** @ignore */\n  _updateIsSimple() {\n    this.isSimple = !this.renderGroup && this.effects.length === 0;\n  }\n  /**\n   * Current transform of the object based on world (parent) factors.\n   *\n   * This matrix represents the absolute transformation in the scene graph.\n   * @example\n   * ```ts\n   * // Get world position\n   * const worldPos = container.worldTransform;\n   * console.log(`World position: (${worldPos.tx}, ${worldPos.ty})`);\n   * ```\n   * @readonly\n   * @see {@link Container#localTransform} For local space transform\n   */\n  get worldTransform() {\n    this._worldTransform || (this._worldTransform = new Matrix());\n    if (this.renderGroup) {\n      this._worldTransform.copyFrom(this.renderGroup.worldTransform);\n    } else if (this.parentRenderGroup) {\n      this._worldTransform.appendFrom(this.relativeGroupTransform, this.parentRenderGroup.worldTransform);\n    }\n    return this._worldTransform;\n  }\n  /**\n   * The position of the container on the x axis relative to the local coordinates of the parent.\n   *\n   * An alias to position.x\n   * @example\n   * ```ts\n   * // Basic position\n   * container.x = 100;\n   * ```\n   */\n  get x() {\n    return this._position.x;\n  }\n  set x(value) {\n    this._position.x = value;\n  }\n  /**\n   * The position of the container on the y axis relative to the local coordinates of the parent.\n   *\n   * An alias to position.y\n   * @example\n   * ```ts\n   * // Basic position\n   * container.y = 200;\n   * ```\n   */\n  get y() {\n    return this._position.y;\n  }\n  set y(value) {\n    this._position.y = value;\n  }\n  /**\n   * The coordinate of the object relative to the local coordinates of the parent.\n   * @example\n   * ```ts\n   * // Basic position setting\n   * container.position.set(100, 200);\n   * container.position.set(100); // Sets both x and y to 100\n   * // Using point data\n   * container.position = { x: 50, y: 75 };\n   * ```\n   * @since 4.0.0\n   */\n  get position() {\n    return this._position;\n  }\n  set position(value) {\n    this._position.copyFrom(value);\n  }\n  /**\n   * The rotation of the object in radians.\n   *\n   * > [!NOTE] 'rotation' and 'angle' have the same effect on a display object;\n   * > rotation is in radians, angle is in degrees.\n   * @example\n   * ```ts\n   * // Basic rotation\n   * container.rotation = Math.PI / 4; // 45 degrees\n   *\n   * // Convert from degrees\n   * const degrees = 45;\n   * container.rotation = degrees * Math.PI / 180;\n   *\n   * // Rotate around center\n   * container.pivot.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // 180 degrees\n   *\n   * // Rotate around center with origin\n   * container.origin.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // 180 degrees\n   * ```\n   */\n  get rotation() {\n    return this._rotation;\n  }\n  set rotation(value) {\n    if (this._rotation !== value) {\n      this._rotation = value;\n      this._onUpdate(this._skew);\n    }\n  }\n  /**\n   * The angle of the object in degrees.\n   *\n   * > [!NOTE] 'rotation' and 'angle' have the same effect on a display object;\n   * > rotation is in radians, angle is in degrees.\n   * @example\n   * ```ts\n   * // Basic angle rotation\n   * sprite.angle = 45; // 45 degrees\n   *\n   * // Rotate around center\n   * sprite.pivot.set(sprite.width / 2, sprite.height / 2);\n   * sprite.angle = 180; // Half rotation\n   *\n   * // Rotate around center with origin\n   * sprite.origin.set(sprite.width / 2, sprite.height / 2);\n   * sprite.angle = 180; // Half rotation\n   *\n   * // Reset rotation\n   * sprite.angle = 0;\n   * ```\n   */\n  get angle() {\n    return this.rotation * RAD_TO_DEG;\n  }\n  set angle(value) {\n    this.rotation = value * DEG_TO_RAD;\n  }\n  /**\n   * The center of rotation, scaling, and skewing for this display object in its local space.\n   * The `position` is the projection of `pivot` in the parent's local space.\n   *\n   * By default, the pivot is the origin (0, 0).\n   * @example\n   * ```ts\n   * // Rotate around center\n   * container.pivot.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // Rotates around center\n   * ```\n   * @since 4.0.0\n   */\n  get pivot() {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n    }\n    return this._pivot;\n  }\n  set pivot(value) {\n    if (this._pivot === defaultPivot) {\n      this._pivot = new ObservablePoint(this, 0, 0);\n      if (this._origin !== defaultOrigin) {\n        warn(`Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.`);\n      }\n    }\n    typeof value === \"number\" ? this._pivot.set(value) : this._pivot.copyFrom(value);\n  }\n  /**\n   * The skew factor for the object in radians. Skewing is a transformation that distorts\n   * the object by rotating it differently at each point, creating a non-uniform shape.\n   * @example\n   * ```ts\n   * // Basic skewing\n   * container.skew.set(0.5, 0); // Skew horizontally\n   * container.skew.set(0, 0.5); // Skew vertically\n   *\n   * // Skew with point data\n   * container.skew = { x: 0.3, y: 0.3 }; // Diagonal skew\n   *\n   * // Reset skew\n   * container.skew.set(0, 0);\n   *\n   * // Animate skew\n   * app.ticker.add(() => {\n   *     // Create wave effect\n   *     container.skew.x = Math.sin(Date.now() / 1000) * 0.3;\n   * });\n   *\n   * // Combine with rotation\n   * container.rotation = Math.PI / 4; // 45 degrees\n   * container.skew.set(0.2, 0.2); // Skew the rotated object\n   * ```\n   * @since 4.0.0\n   * @type {ObservablePoint} Point-like object with x/y properties in radians\n   * @default {x: 0, y: 0}\n   */\n  get skew() {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    return this._skew;\n  }\n  set skew(value) {\n    if (this._skew === defaultSkew) {\n      this._skew = new ObservablePoint(this, 0, 0);\n    }\n    this._skew.copyFrom(value);\n  }\n  /**\n   * The scale factors of this object along the local coordinate axes.\n   *\n   * The default scale is (1, 1).\n   * @example\n   * ```ts\n   * // Basic scaling\n   * container.scale.set(2, 2); // Scales to double size\n   * container.scale.set(2); // Scales uniformly to double size\n   * container.scale = 2; // Scales uniformly to double size\n   * // Scale to a specific width and height\n   * container.setSize(200, 100); // Sets width to 200 and height to 100\n   * ```\n   * @since 4.0.0\n   */\n  get scale() {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 1, 1);\n    }\n    return this._scale;\n  }\n  set scale(value) {\n    if (this._scale === defaultScale) {\n      this._scale = new ObservablePoint(this, 0, 0);\n    }\n    if (typeof value === \"string\") {\n      value = parseFloat(value);\n    }\n    typeof value === \"number\" ? this._scale.set(value) : this._scale.copyFrom(value);\n  }\n  /**\n   * @experimental\n   * The origin point around which the container rotates and scales without affecting its position.\n   * Unlike pivot, changing the origin will not move the container's position.\n   * @example\n   * ```ts\n   * // Rotate around center point\n   * container.origin.set(container.width / 2, container.height / 2);\n   * container.rotation = Math.PI; // Rotates around center\n   *\n   * // Reset origin\n   * container.origin.set(0, 0);\n   * ```\n   */\n  get origin() {\n    if (this._origin === defaultOrigin) {\n      this._origin = new ObservablePoint(this, 0, 0);\n    }\n    return this._origin;\n  }\n  set origin(value) {\n    if (this._origin === defaultOrigin) {\n      this._origin = new ObservablePoint(this, 0, 0);\n      if (this._pivot !== defaultPivot) {\n        warn(`Setting both a pivot and origin on a Container is not recommended. This can lead to unexpected behavior if not handled carefully.`);\n      }\n    }\n    typeof value === \"number\" ? this._origin.set(value) : this._origin.copyFrom(value);\n  }\n  /**\n   * The width of the Container, setting this will actually modify the scale to achieve the value set.\n   * > [!NOTE] Changing the width will adjust the scale.x property of the container while maintaining its aspect ratio.\n   * > [!NOTE] If you want to set both width and height at the same time, use {@link Container#setSize}\n   * as it is more optimized by not recalculating the local bounds twice.\n   * @example\n   * ```ts\n   * // Basic width setting\n   * container.width = 100;\n   * // Optimized width setting\n   * container.setSize(100, 100);\n   * ```\n   */\n  get width() {\n    return Math.abs(this.scale.x * this.getLocalBounds().width);\n  }\n  set width(value) {\n    const localWidth = this.getLocalBounds().width;\n    this._setWidth(value, localWidth);\n  }\n  /**\n   * The height of the Container,\n   * > [!NOTE] Changing the height will adjust the scale.y property of the container while maintaining its aspect ratio.\n   * > [!NOTE] If you want to set both width and height at the same time, use {@link Container#setSize}\n   * as it is more optimized by not recalculating the local bounds twice.\n   * @example\n   * ```ts\n   * // Basic height setting\n   * container.height = 200;\n   * // Optimized height setting\n   * container.setSize(100, 200);\n   * ```\n   */\n  get height() {\n    return Math.abs(this.scale.y * this.getLocalBounds().height);\n  }\n  set height(value) {\n    const localHeight = this.getLocalBounds().height;\n    this._setHeight(value, localHeight);\n  }\n  /**\n   * Retrieves the size of the container as a [Size]{@link Size} object.\n   *\n   * This is faster than get the width and height separately.\n   * @example\n   * ```ts\n   * // Basic size retrieval\n   * const size = container.getSize();\n   * console.log(`Size: ${size.width}x${size.height}`);\n   *\n   * // Reuse existing size object\n   * const reuseSize = { width: 0, height: 0 };\n   * container.getSize(reuseSize);\n   * ```\n   * @param out - Optional object to store the size in.\n   * @returns The size of the container.\n   */\n  getSize(out) {\n    if (!out) {\n      out = {};\n    }\n    const bounds = this.getLocalBounds();\n    out.width = Math.abs(this.scale.x * bounds.width);\n    out.height = Math.abs(this.scale.y * bounds.height);\n    return out;\n  }\n  /**\n   * Sets the size of the container to the specified width and height.\n   * This is more efficient than setting width and height separately as it only recalculates bounds once.\n   * @example\n   * ```ts\n   * // Basic size setting\n   * container.setSize(100, 200);\n   *\n   * // Set uniform size\n   * container.setSize(100); // Sets both width and height to 100\n   * ```\n   * @param value - This can be either a number or a [Size]{@link Size} object.\n   * @param height - The height to set. Defaults to the value of `width` if not provided.\n   */\n  setSize(value, height) {\n    const size = this.getLocalBounds();\n    if (typeof value === \"object\") {\n      height = value.height ?? value.width;\n      value = value.width;\n    } else {\n      height ?? (height = value);\n    }\n    value !== void 0 && this._setWidth(value, size.width);\n    height !== void 0 && this._setHeight(height, size.height);\n  }\n  /** Called when the skew or the rotation changes. */\n  _updateSkew() {\n    const rotation = this._rotation;\n    const skew = this._skew;\n    this._cx = Math.cos(rotation + skew._y);\n    this._sx = Math.sin(rotation + skew._y);\n    this._cy = -Math.sin(rotation - skew._x);\n    this._sy = Math.cos(rotation - skew._x);\n  }\n  /**\n   * Updates the transform properties of the container.\n   * Allows partial updates of transform properties for optimized manipulation.\n   * @example\n   * ```ts\n   * // Basic transform update\n   * container.updateTransform({\n   *     x: 100,\n   *     y: 200,\n   *     rotation: Math.PI / 4\n   * });\n   *\n   * // Scale and rotate around center\n   * sprite.updateTransform({\n   *     pivotX: sprite.width / 2,\n   *     pivotY: sprite.height / 2,\n   *     scaleX: 2,\n   *     scaleY: 2,\n   *     rotation: Math.PI\n   * });\n   *\n   * // Update position only\n   * button.updateTransform({\n   *     x: button.x + 10, // Move right\n   *     y: button.y      // Keep same y\n   * });\n   * ```\n   * @param opts - Transform options to update\n   * @param opts.x - The x position\n   * @param opts.y - The y position\n   * @param opts.scaleX - The x-axis scale factor\n   * @param opts.scaleY - The y-axis scale factor\n   * @param opts.rotation - The rotation in radians\n   * @param opts.skewX - The x-axis skew factor\n   * @param opts.skewY - The y-axis skew factor\n   * @param opts.pivotX - The x-axis pivot point\n   * @param opts.pivotY - The y-axis pivot point\n   * @returns This container, for chaining\n   * @see {@link Container#setFromMatrix} For matrix-based transforms\n   * @see {@link Container#position} For direct position access\n   */\n  updateTransform(opts) {\n    this.position.set(\n      typeof opts.x === \"number\" ? opts.x : this.position.x,\n      typeof opts.y === \"number\" ? opts.y : this.position.y\n    );\n    this.scale.set(\n      typeof opts.scaleX === \"number\" ? opts.scaleX || 1 : this.scale.x,\n      typeof opts.scaleY === \"number\" ? opts.scaleY || 1 : this.scale.y\n    );\n    this.rotation = typeof opts.rotation === \"number\" ? opts.rotation : this.rotation;\n    this.skew.set(\n      typeof opts.skewX === \"number\" ? opts.skewX : this.skew.x,\n      typeof opts.skewY === \"number\" ? opts.skewY : this.skew.y\n    );\n    this.pivot.set(\n      typeof opts.pivotX === \"number\" ? opts.pivotX : this.pivot.x,\n      typeof opts.pivotY === \"number\" ? opts.pivotY : this.pivot.y\n    );\n    this.origin.set(\n      typeof opts.originX === \"number\" ? opts.originX : this.origin.x,\n      typeof opts.originY === \"number\" ? opts.originY : this.origin.y\n    );\n    return this;\n  }\n  /**\n   * Updates the local transform properties by decomposing the given matrix.\n   * Extracts position, scale, rotation, and skew from a transformation matrix.\n   * @example\n   * ```ts\n   * // Basic matrix transform\n   * const matrix = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4)\n   *     .scale(2, 2);\n   *\n   * container.setFromMatrix(matrix);\n   *\n   * // Copy transform from another container\n   * const source = new Container();\n   * source.position.set(100, 100);\n   * source.rotation = Math.PI / 2;\n   *\n   * target.setFromMatrix(source.localTransform);\n   *\n   * // Reset transform\n   * container.setFromMatrix(Matrix.IDENTITY);\n   * ```\n   * @param matrix - The matrix to use for updating the transform\n   * @see {@link Container#updateTransform} For property-based updates\n   * @see {@link Matrix#decompose} For matrix decomposition details\n   */\n  setFromMatrix(matrix) {\n    matrix.decompose(this);\n  }\n  /** Updates the local transform. */\n  updateLocalTransform() {\n    const localTransformChangeId = this._didContainerChangeTick;\n    if (this._didLocalTransformChangeId === localTransformChangeId)\n      return;\n    this._didLocalTransformChangeId = localTransformChangeId;\n    const lt = this.localTransform;\n    const scale = this._scale;\n    const pivot = this._pivot;\n    const origin = this._origin;\n    const position = this._position;\n    const sx = scale._x;\n    const sy = scale._y;\n    const px = pivot._x;\n    const py = pivot._y;\n    const ox = -origin._x;\n    const oy = -origin._y;\n    lt.a = this._cx * sx;\n    lt.b = this._sx * sx;\n    lt.c = this._cy * sy;\n    lt.d = this._sy * sy;\n    lt.tx = position._x - (px * lt.a + py * lt.c) + (ox * lt.a + oy * lt.c) - ox;\n    lt.ty = position._y - (px * lt.b + py * lt.d) + (ox * lt.b + oy * lt.d) - oy;\n  }\n  // / ///// color related stuff\n  set alpha(value) {\n    if (value === this.localAlpha)\n      return;\n    this.localAlpha = value;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /**\n   * The opacity of the object relative to its parent's opacity.\n   * Value ranges from 0 (fully transparent) to 1 (fully opaque).\n   * @example\n   * ```ts\n   * // Basic transparency\n   * sprite.alpha = 0.5; // 50% opacity\n   *\n   * // Inherited opacity\n   * container.alpha = 0.5;\n   * const child = new Sprite(texture);\n   * child.alpha = 0.5;\n   * container.addChild(child);\n   * // child's effective opacity is 0.25 (0.5 * 0.5)\n   * ```\n   * @default 1\n   * @see {@link Container#visible} For toggling visibility\n   * @see {@link Container#renderable} For render control\n   */\n  get alpha() {\n    return this.localAlpha;\n  }\n  set tint(value) {\n    const tempColor = Color.shared.setValue(value ?? 16777215);\n    const bgr = tempColor.toBgrNumber();\n    if (bgr === this.localColor)\n      return;\n    this.localColor = bgr;\n    this._updateFlags |= UPDATE_COLOR;\n    this._onUpdate();\n  }\n  /**\n   * The tint applied to the sprite.\n   *\n   * This can be any valid {@link ColorSource}.\n   * @example\n   * ```ts\n   * // Basic color tinting\n   * container.tint = 0xff0000; // Red tint\n   * container.tint = 'red';    // Same as above\n   * container.tint = '#00ff00'; // Green\n   * container.tint = 'rgb(0,0,255)'; // Blue\n   *\n   * // Remove tint\n   * container.tint = 0xffffff; // White = no tint\n   * container.tint = null;     // Also removes tint\n   * ```\n   * @default 0xFFFFFF\n   * @see {@link Container#alpha} For transparency\n   * @see {@link Container#visible} For visibility control\n   */\n  get tint() {\n    return bgr2rgb(this.localColor);\n  }\n  // / //////////////// blend related stuff\n  set blendMode(value) {\n    if (this.localBlendMode === value)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_BLEND;\n    this.localBlendMode = value;\n    this._onUpdate();\n  }\n  /**\n   * The blend mode to be applied to the sprite. Controls how pixels are blended when rendering.\n   *\n   * Setting to 'normal' will reset to default blending.\n   * > [!NOTE] More blend modes are available after importing the `pixi.js/advanced-blend-modes` sub-export.\n   * @example\n   * ```ts\n   * // Basic blend modes\n   * sprite.blendMode = 'add';        // Additive blending\n   * sprite.blendMode = 'multiply';   // Multiply colors\n   * sprite.blendMode = 'screen';     // Screen blend\n   *\n   * // Reset blend mode\n   * sprite.blendMode = 'normal';     // Normal blending\n   * ```\n   * @default 'normal'\n   * @see {@link Container#alpha} For transparency\n   * @see {@link Container#tint} For color adjustments\n   */\n  get blendMode() {\n    return this.localBlendMode;\n  }\n  // / ///////// VISIBILITY / RENDERABLE /////////////////\n  /**\n   * The visibility of the object. If false the object will not be drawn,\n   * and the transform will not be updated.\n   * @example\n   * ```ts\n   * // Basic visibility toggle\n   * sprite.visible = false; // Hide sprite\n   * sprite.visible = true;  // Show sprite\n   * ```\n   * @default true\n   * @see {@link Container#renderable} For render-only control\n   * @see {@link Container#alpha} For transparency\n   */\n  get visible() {\n    return !!(this.localDisplayStatus & 2);\n  }\n  set visible(value) {\n    const valueNumber = value ? 2 : 0;\n    if ((this.localDisplayStatus & 2) === valueNumber)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 2;\n    this._onUpdate();\n  }\n  /** @ignore */\n  get culled() {\n    return !(this.localDisplayStatus & 4);\n  }\n  /** @ignore */\n  set culled(value) {\n    const valueNumber = value ? 0 : 4;\n    if ((this.localDisplayStatus & 4) === valueNumber)\n      return;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 4;\n    this._onUpdate();\n  }\n  /**\n   * Controls whether this object can be rendered. If false the object will not be drawn,\n   * but the transform will still be updated. This is different from visible, which skips\n   * transform updates.\n   * @example\n   * ```ts\n   * // Basic render control\n   * sprite.renderable = false; // Skip rendering\n   * sprite.renderable = true;  // Enable rendering\n   * ```\n   * @default true\n   * @see {@link Container#visible} For skipping transform updates\n   * @see {@link Container#alpha} For transparency\n   */\n  get renderable() {\n    return !!(this.localDisplayStatus & 1);\n  }\n  set renderable(value) {\n    const valueNumber = value ? 1 : 0;\n    if ((this.localDisplayStatus & 1) === valueNumber)\n      return;\n    this._updateFlags |= UPDATE_VISIBLE;\n    this.localDisplayStatus ^= 1;\n    if (this.parentRenderGroup) {\n      this.parentRenderGroup.structureDidChange = true;\n    }\n    this._onUpdate();\n  }\n  /**\n   * Whether or not the object should be rendered.\n   * @advanced\n   */\n  get isRenderable() {\n    return this.localDisplayStatus === 7 && this.groupAlpha > 0;\n  }\n  /**\n   * Removes all internal references and listeners as well as removes children from the display list.\n   * Do not use a Container after calling `destroy`.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * ```ts\n   * container.destroy();\n   * container.destroy(true);\n   * container.destroy({ children: true });\n   * container.destroy({ children: true, texture: true, textureSource: true });\n   * ```\n   */\n  destroy(options = false) {\n    if (this.destroyed)\n      return;\n    this.destroyed = true;\n    let oldChildren;\n    if (this.children.length) {\n      oldChildren = this.removeChildren(0, this.children.length);\n    }\n    this.removeFromParent();\n    this.parent = null;\n    this._maskEffect = null;\n    this._filterEffect = null;\n    this.effects = null;\n    this._position = null;\n    this._scale = null;\n    this._pivot = null;\n    this._origin = null;\n    this._skew = null;\n    this.emit(\"destroyed\", this);\n    this.removeAllListeners();\n    const destroyChildren = typeof options === \"boolean\" ? options : options?.children;\n    if (destroyChildren && oldChildren) {\n      for (let i = 0; i < oldChildren.length; ++i) {\n        oldChildren[i].destroy(options);\n      }\n    }\n    this.renderGroup?.destroy();\n    this.renderGroup = null;\n  }\n}\nextensions.mixin(\n  Container,\n  childrenHelperMixin,\n  getFastGlobalBoundsMixin,\n  toLocalGlobalMixin,\n  onRenderMixin,\n  measureMixin,\n  effectsMixin,\n  findMixin,\n  sortMixin,\n  cullingMixin,\n  cacheAsTextureMixin,\n  getGlobalMixin,\n  collectRenderablesMixin\n);\n\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE };\n//# sourceMappingURL=Container.mjs.map\n","\"use strict\";\nconst cullingMixin = {\n  cullArea: null,\n  cullable: false,\n  cullableChildren: true\n};\n\nexport { cullingMixin };\n//# sourceMappingURL=cullingMixin.mjs.map\n","\"use strict\";\nlet warnCount = 0;\nconst maxWarnings = 500;\nfunction warn(...args) {\n  if (warnCount === maxWarnings)\n    return;\n  warnCount++;\n  if (warnCount === maxWarnings) {\n    console.warn(\"PixiJS Warning: too many warnings, no more warnings will be reported to the console by PixiJS.\");\n  } else {\n    console.warn(\"PixiJS Warning: \", ...args);\n  }\n}\n\nexport { warn };\n//# sourceMappingURL=warn.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\nimport { TextureSource } from '../texture/sources/TextureSource.mjs';\nimport { Texture } from '../texture/Texture.mjs';\n\n\"use strict\";\nconst _RenderTarget = class _RenderTarget {\n  /**\n   * @param [descriptor] - Options for creating a render target.\n   */\n  constructor(descriptor = {}) {\n    /** unique id for this render target */\n    this.uid = uid(\"renderTarget\");\n    /**\n     * An array of textures that can be written to by the GPU - mostly this has one texture in Pixi, but you could\n     * write to multiple if required! (eg deferred lighting)\n     */\n    this.colorTextures = [];\n    this.dirtyId = 0;\n    this.isRoot = false;\n    this._size = new Float32Array(2);\n    /** if true, then when the render target is destroyed, it will destroy all the textures that were created for it. */\n    this._managedColorTextures = false;\n    descriptor = { ..._RenderTarget.defaultOptions, ...descriptor };\n    this.stencil = descriptor.stencil;\n    this.depth = descriptor.depth;\n    this.isRoot = descriptor.isRoot;\n    if (typeof descriptor.colorTextures === \"number\") {\n      this._managedColorTextures = true;\n      for (let i = 0; i < descriptor.colorTextures; i++) {\n        this.colorTextures.push(\n          new TextureSource({\n            width: descriptor.width,\n            height: descriptor.height,\n            resolution: descriptor.resolution,\n            antialias: descriptor.antialias\n          })\n        );\n      }\n    } else {\n      this.colorTextures = [...descriptor.colorTextures.map((texture) => texture.source)];\n      const colorSource = this.colorTexture.source;\n      this.resize(colorSource.width, colorSource.height, colorSource._resolution);\n    }\n    this.colorTexture.source.on(\"resize\", this.onSourceResize, this);\n    if (descriptor.depthStencilTexture || this.stencil) {\n      if (descriptor.depthStencilTexture instanceof Texture || descriptor.depthStencilTexture instanceof TextureSource) {\n        this.depthStencilTexture = descriptor.depthStencilTexture.source;\n      } else {\n        this.ensureDepthStencilTexture();\n      }\n    }\n  }\n  get size() {\n    const _size = this._size;\n    _size[0] = this.pixelWidth;\n    _size[1] = this.pixelHeight;\n    return _size;\n  }\n  get width() {\n    return this.colorTexture.source.width;\n  }\n  get height() {\n    return this.colorTexture.source.height;\n  }\n  get pixelWidth() {\n    return this.colorTexture.source.pixelWidth;\n  }\n  get pixelHeight() {\n    return this.colorTexture.source.pixelHeight;\n  }\n  get resolution() {\n    return this.colorTexture.source._resolution;\n  }\n  get colorTexture() {\n    return this.colorTextures[0];\n  }\n  onSourceResize(source) {\n    this.resize(source.width, source.height, source._resolution, true);\n  }\n  /**\n   * This will ensure a depthStencil texture is created for this render target.\n   * Most likely called by the mask system to make sure we have stencil buffer added.\n   * @internal\n   */\n  ensureDepthStencilTexture() {\n    if (!this.depthStencilTexture) {\n      this.depthStencilTexture = new TextureSource({\n        width: this.width,\n        height: this.height,\n        resolution: this.resolution,\n        format: \"depth24plus-stencil8\",\n        autoGenerateMipmaps: false,\n        antialias: false,\n        mipLevelCount: 1\n        // sampleCount: handled by the render target system..\n      });\n    }\n  }\n  resize(width, height, resolution = this.resolution, skipColorTexture = false) {\n    this.dirtyId++;\n    this.colorTextures.forEach((colorTexture, i) => {\n      if (skipColorTexture && i === 0)\n        return;\n      colorTexture.source.resize(width, height, resolution);\n    });\n    if (this.depthStencilTexture) {\n      this.depthStencilTexture.source.resize(width, height, resolution);\n    }\n  }\n  destroy() {\n    this.colorTexture.source.off(\"resize\", this.onSourceResize, this);\n    if (this._managedColorTextures) {\n      this.colorTextures.forEach((texture) => {\n        texture.destroy();\n      });\n    }\n    if (this.depthStencilTexture) {\n      this.depthStencilTexture.destroy();\n      delete this.depthStencilTexture;\n    }\n  }\n};\n/** The default options for a render target */\n_RenderTarget.defaultOptions = {\n  /** the width of the RenderTarget */\n  width: 0,\n  /** the height of the RenderTarget */\n  height: 0,\n  /** the resolution of the RenderTarget */\n  resolution: 1,\n  /** an array of textures, or a number indicating how many color textures there should be */\n  colorTextures: 1,\n  /** should this render target have a stencil buffer? */\n  stencil: false,\n  /** should this render target have a depth buffer? */\n  depth: false,\n  /** should this render target be antialiased? */\n  antialias: false,\n  // save on perf by default!\n  /** is this a root element, true if this is gl context owners render target */\n  isRoot: false\n};\nlet RenderTarget = _RenderTarget;\n\nexport { RenderTarget };\n//# sourceMappingURL=RenderTarget.mjs.map\n","import { BindGroup } from '../../renderers/gpu/shader/BindGroup.mjs';\nimport { Texture } from '../../renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst cachedGroups = {};\nfunction getTextureBatchBindGroup(textures, size, maxTextures) {\n  let uid = 2166136261;\n  for (let i = 0; i < size; i++) {\n    uid ^= textures[i].uid;\n    uid = Math.imul(uid, 16777619);\n    uid >>>= 0;\n  }\n  return cachedGroups[uid] || generateTextureBatchBindGroup(textures, size, uid, maxTextures);\n}\nfunction generateTextureBatchBindGroup(textures, size, key, maxTextures) {\n  const bindGroupResources = {};\n  let bindIndex = 0;\n  for (let i = 0; i < maxTextures; i++) {\n    const texture = i < size ? textures[i] : Texture.EMPTY.source;\n    bindGroupResources[bindIndex++] = texture.source;\n    bindGroupResources[bindIndex++] = texture.style;\n  }\n  const bindGroup = new BindGroup(bindGroupResources);\n  cachedGroups[key] = bindGroup;\n  return bindGroup;\n}\n\nexport { getTextureBatchBindGroup };\n//# sourceMappingURL=getTextureBatchBindGroup.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nclass BufferResource extends EventEmitter {\n  /**\n   * Create a new Buffer Resource.\n   * @param options - The options for the buffer resource\n   * @param options.buffer - The underlying buffer that this resource is using\n   * @param options.offset - The offset of the buffer this resource is using.\n   * If not provided, then it will use the offset of the buffer.\n   * @param options.size - The size of the buffer this resource is using.\n   * If not provided, then it will use the size of the buffer.\n   */\n  constructor({ buffer, offset, size }) {\n    super();\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = uid(\"buffer\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     */\n    this._resourceType = \"bufferResource\";\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     */\n    this._touched = 0;\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * A cheeky hint to the GL renderer to let it know this is a BufferResource\n     * @internal\n     */\n    this._bufferResource = true;\n    /**\n     * Has the Buffer resource been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    this.buffer = buffer;\n    this.offset = offset | 0;\n    this.size = size;\n    this.buffer.on(\"change\", this.onBufferChange, this);\n  }\n  onBufferChange() {\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n  }\n  /**\n   * Destroys this resource. Make sure the underlying buffer is not used anywhere else\n   * if you want to destroy it as well, or code will explode\n   * @param destroyBuffer - Should the underlying buffer be destroyed as well?\n   */\n  destroy(destroyBuffer = false) {\n    this.destroyed = true;\n    if (destroyBuffer) {\n      this.buffer.destroy();\n    }\n    this.emit(\"change\", this);\n    this.buffer = null;\n    this.removeAllListeners();\n  }\n}\n\nexport { BufferResource };\n//# sourceMappingURL=BufferResource.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { isPow2 } from '../../../../../maths/misc/pow2.mjs';\nimport { definedProps } from '../../../../../scene/container/utils/definedProps.mjs';\nimport { uid } from '../../../../../utils/data/uid.mjs';\nimport { TextureStyle } from '../TextureStyle.mjs';\n\n\"use strict\";\nconst _TextureSource = class _TextureSource extends EventEmitter {\n  /**\n   * @param options - options for creating a new TextureSource\n   */\n  constructor(options = {}) {\n    super();\n    this.options = options;\n    /** unique id for this Texture source */\n    this.uid = uid(\"textureSource\");\n    /**\n     * The resource type used by this TextureSource. This is used by the bind groups to determine\n     * how to handle this resource.\n     * @internal\n     */\n    this._resourceType = \"textureSource\";\n    /**\n     * i unique resource id, used by the bind group systems.\n     * This can change if the texture is resized or its resource changes\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * this is how the backends know how to upload this texture to the GPU\n     * It changes depending on the resource type. Classes that extend TextureSource\n     * should override this property.\n     * @internal\n     */\n    this.uploadMethodId = \"unknown\";\n    /** @internal */\n    this._resolution = 1;\n    /** the pixel width of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelWidth = 1;\n    /** the pixel height of this texture source. This is the REAL pure number, not accounting resolution */\n    this.pixelHeight = 1;\n    /**\n     * the width of this texture source, accounting for resolution\n     * eg pixelWidth 200, resolution 2, then width will be 100\n     */\n    this.width = 1;\n    /**\n     * the height of this texture source, accounting for resolution\n     * eg pixelHeight 200, resolution 2, then height will be 100\n     */\n    this.height = 1;\n    /**\n     * The number of samples of a multisample texture. This is always 1 for non-multisample textures.\n     * To enable multisample for a texture, set antialias to true\n     * @internal\n     */\n    this.sampleCount = 1;\n    /** The number of mip levels to generate for this texture. this is  overridden if autoGenerateMipmaps is true */\n    this.mipLevelCount = 1;\n    /**\n     * Should we auto generate mipmaps for this texture? This will automatically generate mipmaps\n     * for this texture when uploading to the GPU. Mipmapped textures take up more memory, but\n     * can look better when scaled down.\n     *\n     * For performance reasons, it is recommended to NOT use this with RenderTextures, as they are often updated every frame.\n     * If you do, make sure to call `updateMipmaps` after you update the texture.\n     */\n    this.autoGenerateMipmaps = false;\n    /** the format that the texture data has */\n    this.format = \"rgba8unorm\";\n    /** how many dimensions does this texture have? currently v8 only supports 2d */\n    this.dimension = \"2d\";\n    /**\n     * Only really affects RenderTextures.\n     * Should we use antialiasing for this texture. It will look better, but may impact performance as a\n     * Blit operation will be required to resolve the texture.\n     */\n    this.antialias = false;\n    /**\n     * Used by automatic texture Garbage Collection, stores last GC tick when it was bound\n     * @protected\n     */\n    this._touched = 0;\n    /**\n     * Used by the batcher to build texture batches. faster to have the variable here!\n     * @protected\n     */\n    this._batchTick = -1;\n    /**\n     * A temporary batch location for the texture batching. Here for performance reasons only!\n     * @protected\n     */\n    this._textureBindLocation = -1;\n    options = { ..._TextureSource.defaultOptions, ...options };\n    this.label = options.label ?? \"\";\n    this.resource = options.resource;\n    this.autoGarbageCollect = options.autoGarbageCollect;\n    this._resolution = options.resolution;\n    if (options.width) {\n      this.pixelWidth = options.width * this._resolution;\n    } else {\n      this.pixelWidth = this.resource ? this.resourceWidth ?? 1 : 1;\n    }\n    if (options.height) {\n      this.pixelHeight = options.height * this._resolution;\n    } else {\n      this.pixelHeight = this.resource ? this.resourceHeight ?? 1 : 1;\n    }\n    this.width = this.pixelWidth / this._resolution;\n    this.height = this.pixelHeight / this._resolution;\n    this.format = options.format;\n    this.dimension = options.dimensions;\n    this.mipLevelCount = options.mipLevelCount;\n    this.autoGenerateMipmaps = options.autoGenerateMipmaps;\n    this.sampleCount = options.sampleCount;\n    this.antialias = options.antialias;\n    this.alphaMode = options.alphaMode;\n    this.style = new TextureStyle(definedProps(options));\n    this.destroyed = false;\n    this._refreshPOT();\n  }\n  /** returns itself */\n  get source() {\n    return this;\n  }\n  /** the style of the texture */\n  get style() {\n    return this._style;\n  }\n  set style(value) {\n    if (this.style === value)\n      return;\n    this._style?.off(\"change\", this._onStyleChange, this);\n    this._style = value;\n    this._style?.on(\"change\", this._onStyleChange, this);\n    this._onStyleChange();\n  }\n  /** Specifies the maximum anisotropy value clamp used by the sampler. */\n  set maxAnisotropy(value) {\n    this._style.maxAnisotropy = value;\n  }\n  get maxAnisotropy() {\n    return this._style.maxAnisotropy;\n  }\n  /** setting this will set wrapModeU, wrapModeV and wrapModeW all at once! */\n  get addressMode() {\n    return this._style.addressMode;\n  }\n  set addressMode(value) {\n    this._style.addressMode = value;\n  }\n  /** setting this will set wrapModeU, wrapModeV and wrapModeW all at once! */\n  get repeatMode() {\n    return this._style.addressMode;\n  }\n  set repeatMode(value) {\n    this._style.addressMode = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is smaller than or equal to one texel. */\n  get magFilter() {\n    return this._style.magFilter;\n  }\n  set magFilter(value) {\n    this._style.magFilter = value;\n  }\n  /** Specifies the sampling behavior when the sample footprint is larger than one texel. */\n  get minFilter() {\n    return this._style.minFilter;\n  }\n  set minFilter(value) {\n    this._style.minFilter = value;\n  }\n  /** Specifies behavior for sampling between mipmap levels. */\n  get mipmapFilter() {\n    return this._style.mipmapFilter;\n  }\n  set mipmapFilter(value) {\n    this._style.mipmapFilter = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMinClamp() {\n    return this._style.lodMinClamp;\n  }\n  set lodMinClamp(value) {\n    this._style.lodMinClamp = value;\n  }\n  /** Specifies the minimum and maximum levels of detail, respectively, used internally when sampling a texture. */\n  get lodMaxClamp() {\n    return this._style.lodMaxClamp;\n  }\n  set lodMaxClamp(value) {\n    this._style.lodMaxClamp = value;\n  }\n  _onStyleChange() {\n    this.emit(\"styleChange\", this);\n  }\n  /** call this if you have modified the texture outside of the constructor */\n  update() {\n    if (this.resource) {\n      const resolution = this._resolution;\n      const didResize = this.resize(this.resourceWidth / resolution, this.resourceHeight / resolution);\n      if (didResize)\n        return;\n    }\n    this.emit(\"update\", this);\n  }\n  /** Destroys this texture source */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    if (this._style) {\n      this._style.destroy();\n      this._style = null;\n    }\n    this.uploadMethodId = null;\n    this.resource = null;\n    this.removeAllListeners();\n  }\n  /**\n   * This will unload the Texture source from the GPU. This will free up the GPU memory\n   * As soon as it is required fore rendering, it will be re-uploaded.\n   */\n  unload() {\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    this.emit(\"unload\", this);\n  }\n  /** the width of the resource. This is the REAL pure number, not accounting resolution   */\n  get resourceWidth() {\n    const { resource } = this;\n    return resource.naturalWidth || resource.videoWidth || resource.displayWidth || resource.width;\n  }\n  /** the height of the resource. This is the REAL pure number, not accounting resolution */\n  get resourceHeight() {\n    const { resource } = this;\n    return resource.naturalHeight || resource.videoHeight || resource.displayHeight || resource.height;\n  }\n  /**\n   * the resolution of the texture. Changing this number, will not change the number of pixels in the actual texture\n   * but will the size of the texture when rendered.\n   *\n   * changing the resolution of this texture to 2 for example will make it appear twice as small when rendered (as pixel\n   * density will have increased)\n   */\n  get resolution() {\n    return this._resolution;\n  }\n  set resolution(resolution) {\n    if (this._resolution === resolution)\n      return;\n    this._resolution = resolution;\n    this.width = this.pixelWidth / resolution;\n    this.height = this.pixelHeight / resolution;\n  }\n  /**\n   * Resize the texture, this is handy if you want to use the texture as a render texture\n   * @param width - the new width of the texture\n   * @param height - the new height of the texture\n   * @param resolution - the new resolution of the texture\n   * @returns - if the texture was resized\n   */\n  resize(width, height, resolution) {\n    resolution || (resolution = this._resolution);\n    width || (width = this.width);\n    height || (height = this.height);\n    const newPixelWidth = Math.round(width * resolution);\n    const newPixelHeight = Math.round(height * resolution);\n    this.width = newPixelWidth / resolution;\n    this.height = newPixelHeight / resolution;\n    this._resolution = resolution;\n    if (this.pixelWidth === newPixelWidth && this.pixelHeight === newPixelHeight) {\n      return false;\n    }\n    this._refreshPOT();\n    this.pixelWidth = newPixelWidth;\n    this.pixelHeight = newPixelHeight;\n    this.emit(\"resize\", this);\n    this._resourceId = uid(\"resource\");\n    this.emit(\"change\", this);\n    return true;\n  }\n  /**\n   * Lets the renderer know that this texture has been updated and its mipmaps should be re-generated.\n   * This is only important for RenderTexture instances, as standard Texture instances will have their\n   * mipmaps generated on upload. You should call this method after you make any change to the texture\n   *\n   * The reason for this is is can be quite expensive to update mipmaps for a texture. So by default,\n   * We want you, the developer to specify when this action should happen.\n   *\n   * Generally you don't want to have mipmaps generated on Render targets that are changed every frame,\n   */\n  updateMipmaps() {\n    if (this.autoGenerateMipmaps && this.mipLevelCount > 1) {\n      this.emit(\"updateMipmaps\", this);\n    }\n  }\n  set wrapMode(value) {\n    this._style.wrapMode = value;\n  }\n  get wrapMode() {\n    return this._style.wrapMode;\n  }\n  set scaleMode(value) {\n    this._style.scaleMode = value;\n  }\n  /** setting this will set magFilter,minFilter and mipmapFilter all at once!  */\n  get scaleMode() {\n    return this._style.scaleMode;\n  }\n  /**\n   * Refresh check for isPowerOfTwo texture based on size\n   * @private\n   */\n  _refreshPOT() {\n    this.isPowerOfTwo = isPow2(this.pixelWidth) && isPow2(this.pixelHeight);\n  }\n  static test(_resource) {\n    throw new Error(\"Unimplemented\");\n  }\n};\n/** The default options used when creating a new TextureSource. override these to add your own defaults */\n_TextureSource.defaultOptions = {\n  resolution: 1,\n  format: \"bgra8unorm\",\n  alphaMode: \"premultiply-alpha-on-upload\",\n  dimensions: \"2d\",\n  mipLevelCount: 1,\n  autoGenerateMipmaps: false,\n  sampleCount: 1,\n  antialias: false,\n  autoGarbageCollect: false\n};\nlet TextureSource = _TextureSource;\n\nexport { TextureSource };\n//# sourceMappingURL=TextureSource.mjs.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.DrumKitByPatchID = exports.InstrumentFamilyByID = exports.instrumentByPatchID = void 0;\nexports.instrumentByPatchID = [\n    \"acoustic grand piano\",\n    \"bright acoustic piano\",\n    \"electric grand piano\",\n    \"honky-tonk piano\",\n    \"electric piano 1\",\n    \"electric piano 2\",\n    \"harpsichord\",\n    \"clavi\",\n    \"celesta\",\n    \"glockenspiel\",\n    \"music box\",\n    \"vibraphone\",\n    \"marimba\",\n    \"xylophone\",\n    \"tubular bells\",\n    \"dulcimer\",\n    \"drawbar organ\",\n    \"percussive organ\",\n    \"rock organ\",\n    \"church organ\",\n    \"reed organ\",\n    \"accordion\",\n    \"harmonica\",\n    \"tango accordion\",\n    \"acoustic guitar (nylon)\",\n    \"acoustic guitar (steel)\",\n    \"electric guitar (jazz)\",\n    \"electric guitar (clean)\",\n    \"electric guitar (muted)\",\n    \"overdriven guitar\",\n    \"distortion guitar\",\n    \"guitar harmonics\",\n    \"acoustic bass\",\n    \"electric bass (finger)\",\n    \"electric bass (pick)\",\n    \"fretless bass\",\n    \"slap bass 1\",\n    \"slap bass 2\",\n    \"synth bass 1\",\n    \"synth bass 2\",\n    \"violin\",\n    \"viola\",\n    \"cello\",\n    \"contrabass\",\n    \"tremolo strings\",\n    \"pizzicato strings\",\n    \"orchestral harp\",\n    \"timpani\",\n    \"string ensemble 1\",\n    \"string ensemble 2\",\n    \"synthstrings 1\",\n    \"synthstrings 2\",\n    \"choir aahs\",\n    \"voice oohs\",\n    \"synth voice\",\n    \"orchestra hit\",\n    \"trumpet\",\n    \"trombone\",\n    \"tuba\",\n    \"muted trumpet\",\n    \"french horn\",\n    \"brass section\",\n    \"synthbrass 1\",\n    \"synthbrass 2\",\n    \"soprano sax\",\n    \"alto sax\",\n    \"tenor sax\",\n    \"baritone sax\",\n    \"oboe\",\n    \"english horn\",\n    \"bassoon\",\n    \"clarinet\",\n    \"piccolo\",\n    \"flute\",\n    \"recorder\",\n    \"pan flute\",\n    \"blown bottle\",\n    \"shakuhachi\",\n    \"whistle\",\n    \"ocarina\",\n    \"lead 1 (square)\",\n    \"lead 2 (sawtooth)\",\n    \"lead 3 (calliope)\",\n    \"lead 4 (chiff)\",\n    \"lead 5 (charang)\",\n    \"lead 6 (voice)\",\n    \"lead 7 (fifths)\",\n    \"lead 8 (bass + lead)\",\n    \"pad 1 (new age)\",\n    \"pad 2 (warm)\",\n    \"pad 3 (polysynth)\",\n    \"pad 4 (choir)\",\n    \"pad 5 (bowed)\",\n    \"pad 6 (metallic)\",\n    \"pad 7 (halo)\",\n    \"pad 8 (sweep)\",\n    \"fx 1 (rain)\",\n    \"fx 2 (soundtrack)\",\n    \"fx 3 (crystal)\",\n    \"fx 4 (atmosphere)\",\n    \"fx 5 (brightness)\",\n    \"fx 6 (goblins)\",\n    \"fx 7 (echoes)\",\n    \"fx 8 (sci-fi)\",\n    \"sitar\",\n    \"banjo\",\n    \"shamisen\",\n    \"koto\",\n    \"kalimba\",\n    \"bag pipe\",\n    \"fiddle\",\n    \"shanai\",\n    \"tinkle bell\",\n    \"agogo\",\n    \"steel drums\",\n    \"woodblock\",\n    \"taiko drum\",\n    \"melodic tom\",\n    \"synth drum\",\n    \"reverse cymbal\",\n    \"guitar fret noise\",\n    \"breath noise\",\n    \"seashore\",\n    \"bird tweet\",\n    \"telephone ring\",\n    \"helicopter\",\n    \"applause\",\n    \"gunshot\",\n];\nexports.InstrumentFamilyByID = [\n    \"piano\",\n    \"chromatic percussion\",\n    \"organ\",\n    \"guitar\",\n    \"bass\",\n    \"strings\",\n    \"ensemble\",\n    \"brass\",\n    \"reed\",\n    \"pipe\",\n    \"synth lead\",\n    \"synth pad\",\n    \"synth effects\",\n    \"world\",\n    \"percussive\",\n    \"sound effects\",\n];\nexports.DrumKitByPatchID = {\n    0: \"standard kit\",\n    8: \"room kit\",\n    16: \"power kit\",\n    24: \"electronic kit\",\n    25: \"tr-808 kit\",\n    32: \"jazz kit\",\n    40: \"brush kit\",\n    48: \"orchestra kit\",\n    56: \"sound fx kit\",\n};\n//# sourceMappingURL=InstrumentMaps.js.map","import { multiplyHexColors } from './multiplyHexColors.mjs';\n\n\"use strict\";\nconst WHITE_BGR = 16777215;\nfunction multiplyColors(localBGRColor, parentBGRColor) {\n  if (localBGRColor === WHITE_BGR) {\n    return parentBGRColor;\n  }\n  if (parentBGRColor === WHITE_BGR) {\n    return localBGRColor;\n  }\n  return multiplyHexColors(localBGRColor, parentBGRColor);\n}\n\nexport { multiplyColors };\n//# sourceMappingURL=multiplyColors.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst environments = [];\nextensions.handleByNamedList(ExtensionType.Environment, environments);\nasync function loadEnvironmentExtensions(skip) {\n  if (skip)\n    return;\n  for (let i = 0; i < environments.length; i++) {\n    const env = environments[i];\n    if (env.value.test()) {\n      await env.value.load();\n      return;\n    }\n  }\n}\nasync function autoDetectEnvironment(add) {\n  return loadEnvironmentExtensions(!add);\n}\n\nexport { autoDetectEnvironment, loadEnvironmentExtensions };\n//# sourceMappingURL=autoDetectEnvironment.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { loadEnvironmentExtensions } from '../../../../environment/autoDetectEnvironment.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry.mjs';\nimport '../../../../utils/utils.mjs';\nimport { CLEAR } from '../../gl/const.mjs';\nimport { SystemRunner } from './SystemRunner.mjs';\nimport EventEmitter from 'eventemitter3';\n\n\"use strict\";\nconst defaultRunners = [\n  \"init\",\n  \"destroy\",\n  \"contextChange\",\n  \"resolutionChange\",\n  \"resetState\",\n  \"renderEnd\",\n  \"renderStart\",\n  \"render\",\n  \"update\",\n  \"postrender\",\n  \"prerender\"\n];\nconst _AbstractRenderer = class _AbstractRenderer extends EventEmitter {\n  /**\n   * Set up a system with a collection of SystemClasses and runners.\n   * Systems are attached dynamically to this class when added.\n   * @param config - the config for the system manager\n   */\n  constructor(config) {\n    super();\n    /** @internal */\n    this.uid = uid(\"renderer\");\n    /** @internal */\n    this.runners = /* @__PURE__ */ Object.create(null);\n    /** @internal */\n    this.renderPipes = /* @__PURE__ */ Object.create(null);\n    this._initOptions = {};\n    this._systemsHash = /* @__PURE__ */ Object.create(null);\n    this.type = config.type;\n    this.name = config.name;\n    this.config = config;\n    const combinedRunners = [...defaultRunners, ...this.config.runners ?? []];\n    this._addRunners(...combinedRunners);\n    this._unsafeEvalCheck();\n  }\n  /**\n   * Initialize the renderer.\n   * @param options - The options to use to create the renderer.\n   */\n  async init(options = {}) {\n    const skip = options.skipExtensionImports === true ? true : options.manageImports === false;\n    await loadEnvironmentExtensions(skip);\n    this._addSystems(this.config.systems);\n    this._addPipes(this.config.renderPipes, this.config.renderPipeAdaptors);\n    for (const systemName in this._systemsHash) {\n      const system = this._systemsHash[systemName];\n      const defaultSystemOptions = system.constructor.defaultOptions;\n      options = { ...defaultSystemOptions, ...options };\n    }\n    options = { ..._AbstractRenderer.defaultOptions, ...options };\n    this._roundPixels = options.roundPixels ? 1 : 0;\n    for (let i = 0; i < this.runners.init.items.length; i++) {\n      await this.runners.init.items[i].init(options);\n    }\n    this._initOptions = options;\n  }\n  render(args, deprecated) {\n    let options = args;\n    if (options instanceof Container) {\n      options = { container: options };\n      if (deprecated) {\n        deprecation(v8_0_0, \"passing a second argument is deprecated, please use render options instead\");\n        options.target = deprecated.renderTexture;\n      }\n    }\n    options.target || (options.target = this.view.renderTarget);\n    if (options.target === this.view.renderTarget) {\n      this._lastObjectRendered = options.container;\n      options.clearColor ?? (options.clearColor = this.background.colorRgba);\n      options.clear ?? (options.clear = this.background.clearBeforeRender);\n    }\n    if (options.clearColor) {\n      const isRGBAArray = Array.isArray(options.clearColor) && options.clearColor.length === 4;\n      options.clearColor = isRGBAArray ? options.clearColor : Color.shared.setValue(options.clearColor).toArray();\n    }\n    if (!options.transform) {\n      options.container.updateLocalTransform();\n      options.transform = options.container.localTransform;\n    }\n    if (!options.container.visible) {\n      return;\n    }\n    options.container.enableRenderGroup();\n    this.runners.prerender.emit(options);\n    this.runners.renderStart.emit(options);\n    this.runners.render.emit(options);\n    this.runners.renderEnd.emit(options);\n    this.runners.postrender.emit(options);\n  }\n  /**\n   * Resizes the WebGL view to the specified width and height.\n   * @param desiredScreenWidth - The desired width of the screen.\n   * @param desiredScreenHeight - The desired height of the screen.\n   * @param resolution - The resolution / device pixel ratio of the renderer.\n   */\n  resize(desiredScreenWidth, desiredScreenHeight, resolution) {\n    const previousResolution = this.view.resolution;\n    this.view.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n    this.emit(\"resize\", this.view.screen.width, this.view.screen.height, this.view.resolution);\n    if (resolution !== void 0 && resolution !== previousResolution) {\n      this.runners.resolutionChange.emit(resolution);\n    }\n  }\n  /**\n   * Clears the render target.\n   * @param options - The options to use when clearing the render target.\n   * @param options.target - The render target to clear.\n   * @param options.clearColor - The color to clear with.\n   * @param options.clear - The clear mode to use.\n   * @advanced\n   */\n  clear(options = {}) {\n    const renderer = this;\n    options.target || (options.target = renderer.renderTarget.renderTarget);\n    options.clearColor || (options.clearColor = this.background.colorRgba);\n    options.clear ?? (options.clear = CLEAR.ALL);\n    const { clear, clearColor, target } = options;\n    Color.shared.setValue(clearColor ?? this.background.colorRgba);\n    renderer.renderTarget.clear(target, clear, Color.shared.toArray());\n  }\n  /** The resolution / device pixel ratio of the renderer. */\n  get resolution() {\n    return this.view.resolution;\n  }\n  set resolution(value) {\n    this.view.resolution = value;\n    this.runners.resolutionChange.emit(value);\n  }\n  /**\n   * Same as view.width, actual number of pixels in the canvas by horizontal.\n   * @type {number}\n   * @readonly\n   * @default 800\n   */\n  get width() {\n    return this.view.texture.frame.width;\n  }\n  /**\n   * Same as view.height, actual number of pixels in the canvas by vertical.\n   * @default 600\n   */\n  get height() {\n    return this.view.texture.frame.height;\n  }\n  // NOTE: this was `view` in v7\n  /**\n   * The canvas element that everything is drawn to.\n   * @type {environment.ICanvas}\n   */\n  get canvas() {\n    return this.view.canvas;\n  }\n  /**\n   * the last object rendered by the renderer. Useful for other plugins like interaction managers\n   * @readonly\n   */\n  get lastObjectRendered() {\n    return this._lastObjectRendered;\n  }\n  /**\n   * Flag if we are rendering to the screen vs renderTexture\n   * @readonly\n   * @default true\n   */\n  get renderingToScreen() {\n    const renderer = this;\n    return renderer.renderTarget.renderingToScreen;\n  }\n  /**\n   * Measurements of the screen. (0, 0, screenWidth, screenHeight).\n   *\n   * Its safe to use as filterArea or hitArea for the whole stage.\n   */\n  get screen() {\n    return this.view.screen;\n  }\n  /**\n   * Create a bunch of runners based of a collection of ids\n   * @param runnerIds - the runner ids to add\n   */\n  _addRunners(...runnerIds) {\n    runnerIds.forEach((runnerId) => {\n      this.runners[runnerId] = new SystemRunner(runnerId);\n    });\n  }\n  _addSystems(systems) {\n    let i;\n    for (i in systems) {\n      const val = systems[i];\n      this._addSystem(val.value, val.name);\n    }\n  }\n  /**\n   * Add a new system to the renderer.\n   * @param ClassRef - Class reference\n   * @param name - Property name for system, if not specified\n   *        will use a static `name` property on the class itself. This\n   *        name will be assigned as s property on the Renderer so make\n   *        sure it doesn't collide with properties on Renderer.\n   * @returns Return instance of renderer\n   */\n  _addSystem(ClassRef, name) {\n    const system = new ClassRef(this);\n    if (this[name]) {\n      throw new Error(`Whoops! The name \"${name}\" is already in use`);\n    }\n    this[name] = system;\n    this._systemsHash[name] = system;\n    for (const i in this.runners) {\n      this.runners[i].add(system);\n    }\n    return this;\n  }\n  _addPipes(pipes, pipeAdaptors) {\n    const adaptors = pipeAdaptors.reduce((acc, adaptor) => {\n      acc[adaptor.name] = adaptor.value;\n      return acc;\n    }, {});\n    pipes.forEach((pipe) => {\n      const PipeClass = pipe.value;\n      const name = pipe.name;\n      const Adaptor = adaptors[name];\n      this.renderPipes[name] = new PipeClass(\n        this,\n        Adaptor ? new Adaptor() : null\n      );\n      this.runners.destroy.add(this.renderPipes[name]);\n    });\n  }\n  destroy(options = false) {\n    this.runners.destroy.items.reverse();\n    this.runners.destroy.emit(options);\n    if (options === true || typeof options === \"object\" && options.releaseGlobalResources) {\n      GlobalResourceRegistry.release();\n    }\n    Object.values(this.runners).forEach((runner) => {\n      runner.destroy();\n    });\n    this._systemsHash = null;\n    this.renderPipes = null;\n  }\n  /**\n   * Generate a texture from a container.\n   * @param options - options or container target to use when generating the texture\n   * @returns a texture\n   */\n  generateTexture(options) {\n    return this.textureGenerator.generateTexture(options);\n  }\n  /**\n   * Whether the renderer will round coordinates to whole pixels when rendering.\n   * Can be overridden on a per scene item basis.\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  /**\n   * Overridable function by `pixi.js/unsafe-eval` to silence\n   * throwing an error if platform doesn't support unsafe-evals.\n   * @private\n   * @ignore\n   */\n  _unsafeEvalCheck() {\n    if (!unsafeEvalSupported()) {\n      throw new Error(\"Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.\");\n    }\n  }\n  /**\n   * Resets the rendering state of the renderer.\n   * This is useful when you want to use the WebGL context directly and need to ensure PixiJS's internal state\n   * stays synchronized. When modifying the WebGL context state externally, calling this method before the next Pixi\n   * render will reset all internal caches and ensure it executes correctly.\n   *\n   * This is particularly useful when combining PixiJS with other rendering engines like Three.js:\n   * ```js\n   * // Reset Three.js state\n   * threeRenderer.resetState();\n   *\n   * // Render a Three.js scene\n   * threeRenderer.render(threeScene, threeCamera);\n   *\n   * // Reset PixiJS state since Three.js modified the WebGL context\n   * pixiRenderer.resetState();\n   *\n   * // Now render Pixi content\n   * pixiRenderer.render(pixiScene);\n   * ```\n   * @advanced\n   */\n  resetState() {\n    this.runners.resetState.emit();\n  }\n};\n/** The default options for the renderer. */\n_AbstractRenderer.defaultOptions = {\n  /**\n   * Default resolution / device pixel ratio of the renderer.\n   * @default 1\n   */\n  resolution: 1,\n  /**\n   * Should the `failIfMajorPerformanceCaveat` flag be enabled as a context option used in the `isWebGLSupported`\n   * function. If set to true, a WebGL renderer can fail to be created if the browser thinks there could be\n   * performance issues when using WebGL.\n   *\n   * In PixiJS v6 this has changed from true to false by default, to allow WebGL to work in as many\n   * scenarios as possible. However, some users may have a poor experience, for example, if a user has a gpu or\n   * driver version blacklisted by the\n   * browser.\n   *\n   * If your application requires high performance rendering, you may wish to set this to false.\n   * We recommend one of two options if you decide to set this flag to false:\n   *\n   * 1: Use the Canvas renderer as a fallback in case high performance WebGL is\n   *    not supported.\n   *\n   * 2: Call `isWebGLSupported` (which if found in the utils package) in your code before attempting to create a\n   *    PixiJS renderer, and show an error message to the user if the function returns false, explaining that their\n   *    device & browser combination does not support high performance WebGL.\n   *    This is a much better strategy than trying to create a PixiJS renderer and finding it then fails.\n   * @default false\n   */\n  failIfMajorPerformanceCaveat: false,\n  /**\n   * Should round pixels be forced when rendering?\n   * @default false\n   */\n  roundPixels: false\n};\nlet AbstractRenderer = _AbstractRenderer;\n\nexport { AbstractRenderer };\n//# sourceMappingURL=AbstractRenderer.mjs.map\n","/**\n * Flatten an array indefinitely.\n */\nexport function flatten(array) {\n    var result = [];\n    $flatten(array, result);\n    return result;\n}\n/**\n * Internal flatten function recursively passes `result`.\n */\nfunction $flatten(array, result) {\n    for (var i = 0; i < array.length; i++) {\n        var value = array[i];\n        if (Array.isArray(value)) {\n            $flatten(value, result);\n        }\n        else {\n            result.push(value);\n        }\n    }\n}\n//# sourceMappingURL=index.js.map","import { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nclass InstructionSet {\n  constructor() {\n    /** a unique id for this instruction set used through the renderer */\n    this.uid = uid(\"instructionSet\");\n    /** the array of instructions */\n    this.instructions = [];\n    /** the actual size of the array (any instructions passed this should be ignored) */\n    this.instructionSize = 0;\n    this.renderables = [];\n    /** used by the garbage collector to track when the instruction set was last used */\n    this.gcTick = 0;\n  }\n  /** reset the instruction set so it can be reused set size back to 0 */\n  reset() {\n    this.instructionSize = 0;\n  }\n  /**\n   * Destroy the instruction set, clearing the instructions and renderables.\n   * @internal\n   */\n  destroy() {\n    this.instructions.length = 0;\n    this.renderables.length = 0;\n    this.renderPipes = null;\n    this.gcTick = 0;\n  }\n  /**\n   * Add an instruction to the set\n   * @param instruction - add an instruction to the set\n   */\n  add(instruction) {\n    this.instructions[this.instructionSize++] = instruction;\n  }\n  /**\n   * Log the instructions to the console (for debugging)\n   * @internal\n   */\n  log() {\n    this.instructions.length = this.instructionSize;\n    console.table(this.instructions, [\"type\", \"action\"]);\n  }\n}\n\nexport { InstructionSet };\n//# sourceMappingURL=InstructionSet.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { BufferUsage } from './const.mjs';\n\n\"use strict\";\nclass Buffer extends EventEmitter {\n  /**\n   * Creates a new Buffer with the given options\n   * @param options - the options for the buffer\n   */\n  constructor(options) {\n    let { data, size } = options;\n    const { usage, label, shrinkToFit } = options;\n    super();\n    /**\n     * emits when the underlying buffer has changed shape (i.e. resized)\n     * letting the renderer know that it needs to discard the old buffer on the GPU and create a new one\n     * @event change\n     */\n    /**\n     * emits when the underlying buffer data has been updated. letting the renderer know\n     * that it needs to update the buffer on the GPU\n     * @event update\n     */\n    /**\n     * emits when the buffer is destroyed. letting the renderer know that it needs to destroy the buffer on the GPU\n     * @event destroy\n     */\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = uid(\"buffer\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     */\n    this._resourceType = \"buffer\";\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     */\n    this._touched = 0;\n    /** @internal */\n    this._updateID = 1;\n    this._dataInt32 = null;\n    /**\n     * should the GPU buffer be shrunk when the data becomes smaller?\n     * changing this will cause the buffer to be destroyed and a new one created on the GPU\n     * this can be expensive, especially if the buffer is already big enough!\n     * setting this to false will prevent the buffer from being shrunk. This will yield better performance\n     * if you are constantly setting data that is changing size often.\n     * @default true\n     */\n    this.shrinkToFit = true;\n    /**\n     * Has the buffer been destroyed?\n     * @readonly\n     */\n    this.destroyed = false;\n    if (data instanceof Array) {\n      data = new Float32Array(data);\n    }\n    this._data = data;\n    size ?? (size = data?.byteLength);\n    const mappedAtCreation = !!data;\n    this.descriptor = {\n      size,\n      usage,\n      mappedAtCreation,\n      label\n    };\n    this.shrinkToFit = shrinkToFit ?? true;\n  }\n  /** the data in the buffer */\n  get data() {\n    return this._data;\n  }\n  set data(value) {\n    this.setDataWithSize(value, value.length, true);\n  }\n  get dataInt32() {\n    if (!this._dataInt32) {\n      this._dataInt32 = new Int32Array(this.data.buffer);\n    }\n    return this._dataInt32;\n  }\n  /** whether the buffer is static or not */\n  get static() {\n    return !!(this.descriptor.usage & BufferUsage.STATIC);\n  }\n  set static(value) {\n    if (value) {\n      this.descriptor.usage |= BufferUsage.STATIC;\n    } else {\n      this.descriptor.usage &= ~BufferUsage.STATIC;\n    }\n  }\n  /**\n   * Sets the data in the buffer to the given value. This will immediately update the buffer on the GPU.\n   * If you only want to update a subset of the buffer, you can pass in the size of the data.\n   * @param value - the data to set\n   * @param size - the size of the data in bytes\n   * @param syncGPU - should the buffer be updated on the GPU immediately?\n   */\n  setDataWithSize(value, size, syncGPU) {\n    this._updateID++;\n    this._updateSize = size * value.BYTES_PER_ELEMENT;\n    if (this._data === value) {\n      if (syncGPU)\n        this.emit(\"update\", this);\n      return;\n    }\n    const oldData = this._data;\n    this._data = value;\n    this._dataInt32 = null;\n    if (!oldData || oldData.length !== value.length) {\n      if (!this.shrinkToFit && oldData && value.byteLength < oldData.byteLength) {\n        if (syncGPU)\n          this.emit(\"update\", this);\n      } else {\n        this.descriptor.size = value.byteLength;\n        this._resourceId = uid(\"resource\");\n        this.emit(\"change\", this);\n      }\n      return;\n    }\n    if (syncGPU)\n      this.emit(\"update\", this);\n  }\n  /**\n   * updates the buffer on the GPU to reflect the data in the buffer.\n   * By default it will update the entire buffer. If you only want to update a subset of the buffer,\n   * you can pass in the size of the buffer to update.\n   * @param sizeInBytes - the new size of the buffer in bytes\n   */\n  update(sizeInBytes) {\n    this._updateSize = sizeInBytes ?? this._updateSize;\n    this._updateID++;\n    this.emit(\"update\", this);\n  }\n  /** Destroys the buffer */\n  destroy() {\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.emit(\"change\", this);\n    this._data = null;\n    this.descriptor = null;\n    this.removeAllListeners();\n  }\n}\n\nexport { Buffer };\n//# sourceMappingURL=Buffer.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\nimport { FillPattern } from '../fill/FillPattern.mjs';\n\n\"use strict\";\nfunction isColorLike(value) {\n  return Color.isColorLike(value);\n}\nfunction isFillPattern(value) {\n  return value instanceof FillPattern;\n}\nfunction isFillGradient(value) {\n  return value instanceof FillGradient;\n}\nfunction isTexture(value) {\n  return value instanceof Texture;\n}\nfunction handleColorLike(fill, value, defaultStyle) {\n  const temp = Color.shared.setValue(value ?? 0);\n  fill.color = temp.toNumber();\n  fill.alpha = temp.alpha === 1 ? defaultStyle.alpha : temp.alpha;\n  fill.texture = Texture.WHITE;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleTexture(fill, value, defaultStyle) {\n  fill.texture = value;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillPattern(fill, value, defaultStyle) {\n  fill.fill = value;\n  fill.color = 16777215;\n  fill.texture = value.texture;\n  fill.matrix = value.transform;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillGradient(fill, value, defaultStyle) {\n  value.buildGradient();\n  fill.fill = value;\n  fill.color = 16777215;\n  fill.texture = value.texture;\n  fill.matrix = value.transform;\n  fill.textureSpace = value.textureSpace;\n  return { ...defaultStyle, ...fill };\n}\nfunction handleFillObject(value, defaultStyle) {\n  const style = { ...defaultStyle, ...value };\n  const color = Color.shared.setValue(style.color);\n  style.alpha *= color.alpha;\n  style.color = color.toNumber();\n  return style;\n}\nfunction toFillStyle(value, defaultStyle) {\n  if (value === void 0 || value === null) {\n    return null;\n  }\n  const fill = {};\n  const objectStyle = value;\n  if (isColorLike(value)) {\n    return handleColorLike(fill, value, defaultStyle);\n  } else if (isTexture(value)) {\n    return handleTexture(fill, value, defaultStyle);\n  } else if (isFillPattern(value)) {\n    return handleFillPattern(fill, value, defaultStyle);\n  } else if (isFillGradient(value)) {\n    return handleFillGradient(fill, value, defaultStyle);\n  } else if (objectStyle.fill && isFillPattern(objectStyle.fill)) {\n    return handleFillPattern(objectStyle, objectStyle.fill, defaultStyle);\n  } else if (objectStyle.fill && isFillGradient(objectStyle.fill)) {\n    return handleFillGradient(objectStyle, objectStyle.fill, defaultStyle);\n  }\n  return handleFillObject(objectStyle, defaultStyle);\n}\nfunction toStrokeStyle(value, defaultStyle) {\n  const { width, alignment, miterLimit, cap, join, pixelLine, ...rest } = defaultStyle;\n  const fill = toFillStyle(value, rest);\n  if (!fill) {\n    return null;\n  }\n  return {\n    width,\n    alignment,\n    miterLimit,\n    cap,\n    join,\n    pixelLine,\n    ...fill\n  };\n}\n\nexport { toFillStyle, toStrokeStyle };\n//# sourceMappingURL=convertFillInputToFillStyle.mjs.map\n","\"use strict\";\nvar BufferUsage = /* @__PURE__ */ ((BufferUsage2) => {\n  BufferUsage2[BufferUsage2[\"MAP_READ\"] = 1] = \"MAP_READ\";\n  BufferUsage2[BufferUsage2[\"MAP_WRITE\"] = 2] = \"MAP_WRITE\";\n  BufferUsage2[BufferUsage2[\"COPY_SRC\"] = 4] = \"COPY_SRC\";\n  BufferUsage2[BufferUsage2[\"COPY_DST\"] = 8] = \"COPY_DST\";\n  BufferUsage2[BufferUsage2[\"INDEX\"] = 16] = \"INDEX\";\n  BufferUsage2[BufferUsage2[\"VERTEX\"] = 32] = \"VERTEX\";\n  BufferUsage2[BufferUsage2[\"UNIFORM\"] = 64] = \"UNIFORM\";\n  BufferUsage2[BufferUsage2[\"STORAGE\"] = 128] = \"STORAGE\";\n  BufferUsage2[BufferUsage2[\"INDIRECT\"] = 256] = \"INDIRECT\";\n  BufferUsage2[BufferUsage2[\"QUERY_RESOLVE\"] = 512] = \"QUERY_RESOLVE\";\n  BufferUsage2[BufferUsage2[\"STATIC\"] = 1024] = \"STATIC\";\n  return BufferUsage2;\n})(BufferUsage || {});\n\nexport { BufferUsage };\n//# sourceMappingURL=const.mjs.map\n","function _iterableToArrayLimit(r, l) {\n  var t = null == r ? null : \"undefined\" != typeof Symbol && r[Symbol.iterator] || r[\"@@iterator\"];\n  if (null != t) {\n    var e,\n      n,\n      i,\n      u,\n      a = [],\n      f = !0,\n      o = !1;\n    try {\n      if (i = (t = t.call(r)).next, 0 === l) {\n        if (Object(t) !== t) return;\n        f = !1;\n      } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);\n    } catch (r) {\n      o = !0, n = r;\n    } finally {\n      try {\n        if (!f && null != t[\"return\"] && (u = t[\"return\"](), Object(u) !== u)) return;\n      } finally {\n        if (o) throw n;\n      }\n    }\n    return a;\n  }\n}\nmodule.exports = _iterableToArrayLimit, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { STENCIL_MODES } from '../../shared/state/const.mjs';\n\n\"use strict\";\nconst GpuStencilModesToPixi = [];\nGpuStencilModesToPixi[STENCIL_MODES.NONE] = void 0;\nGpuStencilModesToPixi[STENCIL_MODES.DISABLED] = {\n  stencilWriteMask: 0,\n  stencilReadMask: 0\n};\nGpuStencilModesToPixi[STENCIL_MODES.RENDERING_MASK_ADD] = {\n  stencilFront: {\n    compare: \"equal\",\n    passOp: \"increment-clamp\"\n  },\n  stencilBack: {\n    compare: \"equal\",\n    passOp: \"increment-clamp\"\n  }\n};\nGpuStencilModesToPixi[STENCIL_MODES.RENDERING_MASK_REMOVE] = {\n  stencilFront: {\n    compare: \"equal\",\n    passOp: \"decrement-clamp\"\n  },\n  stencilBack: {\n    compare: \"equal\",\n    passOp: \"decrement-clamp\"\n  }\n};\nGpuStencilModesToPixi[STENCIL_MODES.MASK_ACTIVE] = {\n  stencilWriteMask: 0,\n  stencilFront: {\n    compare: \"equal\",\n    passOp: \"keep\"\n  },\n  stencilBack: {\n    compare: \"equal\",\n    passOp: \"keep\"\n  }\n};\nGpuStencilModesToPixi[STENCIL_MODES.INVERSE_MASK_ACTIVE] = {\n  stencilWriteMask: 0,\n  stencilFront: {\n    compare: \"not-equal\",\n    passOp: \"keep\"\n  },\n  stencilBack: {\n    compare: \"not-equal\",\n    passOp: \"keep\"\n  }\n};\n\nexport { GpuStencilModesToPixi };\n//# sourceMappingURL=GpuStencilModesToPixi.mjs.map\n","\"use strict\";\nfunction processX(base, ids, depth, result, tags) {\n  const id = ids[depth];\n  for (let i = 0; i < id.length; i++) {\n    const value = id[i];\n    if (depth < ids.length - 1) {\n      processX(base.replace(result[depth], value), ids, depth + 1, result, tags);\n    } else {\n      tags.push(base.replace(result[depth], value));\n    }\n  }\n}\nfunction createStringVariations(string) {\n  const regex = /\\{(.*?)\\}/g;\n  const result = string.match(regex);\n  const tags = [];\n  if (result) {\n    const ids = [];\n    result.forEach((vars) => {\n      const split = vars.substring(1, vars.length - 1).split(\",\");\n      ids.push(split);\n    });\n    processX(string, ids, 0, result, tags);\n  } else {\n    tags.push(string);\n  }\n  return tags;\n}\n\nexport { createStringVariations };\n//# sourceMappingURL=createStringVariations.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { createStringVariations } from '../utils/createStringVariations.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nclass Resolver {\n  constructor() {\n    this._defaultBundleIdentifierOptions = {\n      connector: \"-\",\n      createBundleAssetId: (bundleId, assetId) => `${bundleId}${this._bundleIdConnector}${assetId}`,\n      extractAssetIdFromBundle: (bundleId, assetBundleId) => assetBundleId.replace(`${bundleId}${this._bundleIdConnector}`, \"\")\n    };\n    /** The character that is used to connect the bundleId and the assetId when generating a bundle asset id key */\n    this._bundleIdConnector = this._defaultBundleIdentifierOptions.connector;\n    /**\n     * A function that generates a bundle asset id key from a bundleId and an assetId\n     * @param bundleId - the bundleId\n     * @param assetId  - the assetId\n     * @returns the bundle asset id key\n     */\n    this._createBundleAssetId = this._defaultBundleIdentifierOptions.createBundleAssetId;\n    /**\n     * A function that generates an assetId from a bundle asset id key. This is the reverse of generateBundleAssetId\n     * @param bundleId - the bundleId\n     * @param assetBundleId - the bundle asset id key\n     * @returns the assetId\n     */\n    this._extractAssetIdFromBundle = this._defaultBundleIdentifierOptions.extractAssetIdFromBundle;\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._parsers = [];\n    this._resolverHash = {};\n    this._bundles = {};\n  }\n  /**\n   * Override how the resolver deals with generating bundle ids.\n   * must be called before any bundles are added\n   * @param bundleIdentifier - the bundle identifier options\n   */\n  setBundleIdentifier(bundleIdentifier) {\n    this._bundleIdConnector = bundleIdentifier.connector ?? this._bundleIdConnector;\n    this._createBundleAssetId = bundleIdentifier.createBundleAssetId ?? this._createBundleAssetId;\n    this._extractAssetIdFromBundle = bundleIdentifier.extractAssetIdFromBundle ?? this._extractAssetIdFromBundle;\n    if (this._extractAssetIdFromBundle(\"foo\", this._createBundleAssetId(\"foo\", \"bar\")) !== \"bar\") {\n      throw new Error(\"[Resolver] GenerateBundleAssetId are not working correctly\");\n    }\n  }\n  /**\n   * Let the resolver know which assets you prefer to use when resolving assets.\n   * Multiple prefer user defined rules can be added.\n   * @example\n   * resolver.prefer({\n   *     // first look for something with the correct format, and then then correct resolution\n   *     priority: ['format', 'resolution'],\n   *     params:{\n   *         format:'webp', // prefer webp images\n   *         resolution: 2, // prefer a resolution of 2\n   *     }\n   * })\n   * resolver.add('foo', ['bar@2x.webp', 'bar@2x.png', 'bar.webp', 'bar.png']);\n   * resolver.resolveUrl('foo') // => 'bar@2x.webp'\n   * @param preferOrders - the prefer options\n   */\n  prefer(...preferOrders) {\n    preferOrders.forEach((prefer) => {\n      this._preferredOrder.push(prefer);\n      if (!prefer.priority) {\n        prefer.priority = Object.keys(prefer.params);\n      }\n    });\n    this._resolverHash = {};\n  }\n  /**\n   * Set the base path to prepend to all urls when resolving\n   * @example\n   * resolver.basePath = 'https://home.com/';\n   * resolver.add('foo', 'bar.ong');\n   * resolver.resolveUrl('foo', 'bar.png'); // => 'https://home.com/bar.png'\n   * @param basePath - the base path to use\n   */\n  set basePath(basePath) {\n    this._basePath = basePath;\n  }\n  get basePath() {\n    return this._basePath;\n  }\n  /**\n   * Set the root path for root-relative URLs. By default the `basePath`'s root is used. If no `basePath` is set, then the\n   * default value for browsers is `window.location.origin`\n   * @example\n   * // Application hosted on https://home.com/some-path/index.html\n   * resolver.basePath = 'https://home.com/some-path/';\n   * resolver.rootPath = 'https://home.com/';\n   * resolver.add('foo', '/bar.png');\n   * resolver.resolveUrl('foo', '/bar.png'); // => 'https://home.com/bar.png'\n   * @param rootPath - the root path to use\n   */\n  set rootPath(rootPath) {\n    this._rootPath = rootPath;\n  }\n  get rootPath() {\n    return this._rootPath;\n  }\n  /**\n   * All the active URL parsers that help the parser to extract information and create\n   * an asset object-based on parsing the URL itself.\n   *\n   * Can be added using the extensions API\n   * @example\n   * resolver.add('foo', [\n   *     {\n   *         resolution: 2,\n   *         format: 'png',\n   *         src: 'image@2x.png',\n   *     },\n   *     {\n   *         resolution:1,\n   *         format:'png',\n   *         src: 'image.png',\n   *     },\n   * ]);\n   *\n   * // With a url parser the information such as resolution and file format could extracted from the url itself:\n   * extensions.add({\n   *     extension: ExtensionType.ResolveParser,\n   *     test: loadTextures.test, // test if url ends in an image\n   *     parse: (value: string) =>\n   *     ({\n   *         resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? '1'),\n   *         format: value.split('.').pop(),\n   *         src: value,\n   *     }),\n   * });\n   *\n   * // Now resolution and format can be extracted from the url\n   * resolver.add('foo', [\n   *     'image@2x.png',\n   *     'image.png',\n   * ]);\n   */\n  get parsers() {\n    return this._parsers;\n  }\n  /** Used for testing, this resets the resolver to its initial state */\n  reset() {\n    this.setBundleIdentifier(this._defaultBundleIdentifierOptions);\n    this._assetMap = {};\n    this._preferredOrder = [];\n    this._resolverHash = {};\n    this._rootPath = null;\n    this._basePath = null;\n    this._manifest = null;\n    this._bundles = {};\n    this._defaultSearchParams = null;\n  }\n  /**\n   * Sets the default URL search parameters for the URL resolver. The urls can be specified as a string or an object.\n   * @param searchParams - the default url parameters to append when resolving urls\n   */\n  setDefaultSearchParams(searchParams) {\n    if (typeof searchParams === \"string\") {\n      this._defaultSearchParams = searchParams;\n    } else {\n      const queryValues = searchParams;\n      this._defaultSearchParams = Object.keys(queryValues).map((key) => `${encodeURIComponent(key)}=${encodeURIComponent(queryValues[key])}`).join(\"&\");\n    }\n  }\n  /**\n   * Returns the aliases for a given asset\n   * @param asset - the asset to get the aliases for\n   */\n  getAlias(asset) {\n    const { alias, src } = asset;\n    const aliasesToUse = convertToList(\n      alias || src,\n      (value) => {\n        if (typeof value === \"string\")\n          return value;\n        if (Array.isArray(value))\n          return value.map((v) => v?.src ?? v);\n        if (value?.src)\n          return value.src;\n        return value;\n      },\n      true\n    );\n    return aliasesToUse;\n  }\n  /**\n   * Add a manifest to the asset resolver. This is a nice way to add all the asset information in one go.\n   * generally a manifest would be built using a tool.\n   * @param manifest - the manifest to add to the resolver\n   */\n  addManifest(manifest) {\n    if (this._manifest) {\n      warn(\"[Resolver] Manifest already exists, this will be overwritten\");\n    }\n    this._manifest = manifest;\n    manifest.bundles.forEach((bundle) => {\n      this.addBundle(bundle.name, bundle.assets);\n    });\n  }\n  /**\n   * This adds a bundle of assets in one go so that you can resolve them as a group.\n   * For example you could add a bundle for each screen in you pixi app\n   * @example\n   * resolver.addBundle('animals', [\n   *  { alias: 'bunny', src: 'bunny.png' },\n   *  { alias: 'chicken', src: 'chicken.png' },\n   *  { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   * // or\n   * resolver.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * const resolvedAssets = await resolver.resolveBundle('animals');\n   * @param bundleId - The id of the bundle to add\n   * @param assets - A record of the asset or assets that will be chosen from when loading via the specified key\n   */\n  addBundle(bundleId, assets) {\n    const assetNames = [];\n    let convertedAssets = assets;\n    if (!Array.isArray(assets)) {\n      convertedAssets = Object.entries(assets).map(([alias, src]) => {\n        if (typeof src === \"string\" || Array.isArray(src)) {\n          return { alias, src };\n        }\n        return { alias, ...src };\n      });\n    }\n    convertedAssets.forEach((asset) => {\n      const srcs = asset.src;\n      const aliases = asset.alias;\n      let ids;\n      if (typeof aliases === \"string\") {\n        const bundleAssetId = this._createBundleAssetId(bundleId, aliases);\n        assetNames.push(bundleAssetId);\n        ids = [aliases, bundleAssetId];\n      } else {\n        const bundleIds = aliases.map((name) => this._createBundleAssetId(bundleId, name));\n        assetNames.push(...bundleIds);\n        ids = [...aliases, ...bundleIds];\n      }\n      this.add({\n        ...asset,\n        ...{\n          alias: ids,\n          src: srcs\n        }\n      });\n    });\n    this._bundles[bundleId] = assetNames;\n  }\n  /**\n   * Tells the resolver what keys are associated with witch asset.\n   * The most important thing the resolver does\n   * @example\n   * // Single key, single asset:\n   * resolver.add({alias: 'foo', src: 'bar.png');\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Multiple keys, single asset:\n   * resolver.add({alias: ['foo', 'boo'], src: 'bar.png'});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   * resolver.resolveUrl('boo') // => 'bar.png'\n   *\n   * // Multiple keys, multiple assets:\n   * resolver.add({alias: ['foo', 'boo'], src: ['bar.png', 'bar.webp']});\n   * resolver.resolveUrl('foo') // => 'bar.png'\n   *\n   * // Add custom data attached to the resolver\n   * Resolver.add({\n   *     alias: 'bunnyBooBooSmooth',\n   *     src: 'bunny{png,webp}',\n   *     data: { scaleMode:SCALE_MODES.NEAREST }, // Base texture options\n   * });\n   *\n   * resolver.resolve('bunnyBooBooSmooth') // => { src: 'bunny.png', data: { scaleMode: SCALE_MODES.NEAREST } }\n   * @param aliases - the UnresolvedAsset or array of UnresolvedAssets to add to the resolver\n   */\n  add(aliases) {\n    const assets = [];\n    if (Array.isArray(aliases)) {\n      assets.push(...aliases);\n    } else {\n      assets.push(aliases);\n    }\n    let keyCheck;\n    keyCheck = (key) => {\n      if (this.hasKey(key)) {\n        warn(`[Resolver] already has key: ${key} overwriting`);\n      }\n    };\n    const assetArray = convertToList(assets);\n    assetArray.forEach((asset) => {\n      const { src } = asset;\n      let {\n        data,\n        format,\n        loadParser: userDefinedLoadParser,\n        parser: userDefinedParser\n      } = asset;\n      const srcsToUse = convertToList(src).map((src2) => {\n        if (typeof src2 === \"string\") {\n          return createStringVariations(src2);\n        }\n        return Array.isArray(src2) ? src2 : [src2];\n      });\n      const aliasesToUse = this.getAlias(asset);\n      Array.isArray(aliasesToUse) ? aliasesToUse.forEach(keyCheck) : keyCheck(aliasesToUse);\n      const resolvedAssets = [];\n      const parseUrl = (url) => {\n        const parser = this._parsers.find((p) => p.test(url));\n        return {\n          ...parser?.parse(url),\n          src: url\n        };\n      };\n      srcsToUse.forEach((srcs) => {\n        srcs.forEach((src2) => {\n          let formattedAsset = {};\n          if (typeof src2 !== \"object\") {\n            formattedAsset = parseUrl(src2);\n          } else {\n            data = src2.data ?? data;\n            format = src2.format ?? format;\n            if (src2.loadParser || src2.parser) {\n              userDefinedLoadParser = src2.loadParser ?? userDefinedLoadParser;\n              userDefinedParser = src2.parser ?? userDefinedParser;\n            }\n            formattedAsset = {\n              ...parseUrl(src2.src),\n              ...src2\n            };\n          }\n          if (!aliasesToUse) {\n            throw new Error(`[Resolver] alias is undefined for this asset: ${formattedAsset.src}`);\n          }\n          formattedAsset = this._buildResolvedAsset(formattedAsset, {\n            aliases: aliasesToUse,\n            data,\n            format,\n            loadParser: userDefinedLoadParser,\n            parser: userDefinedParser,\n            progressSize: asset.progressSize\n          });\n          resolvedAssets.push(formattedAsset);\n        });\n      });\n      aliasesToUse.forEach((alias) => {\n        this._assetMap[alias] = resolvedAssets;\n      });\n    });\n  }\n  // TODO: this needs an overload like load did in Assets\n  /**\n   * If the resolver has had a manifest set via setManifest, this will return the assets urls for\n   * a given bundleId or bundleIds.\n   * @example\n   * // Manifest Example\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}',\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * resolver.setManifest(manifest);\n   * const resolved = resolver.resolveBundle('load-screen');\n   * @param bundleIds - The bundle ids to resolve\n   * @returns All the bundles assets or a hash of assets for each bundle specified\n   */\n  resolveBundle(bundleIds) {\n    const singleAsset = isSingleItem(bundleIds);\n    bundleIds = convertToList(bundleIds);\n    const out = {};\n    bundleIds.forEach((bundleId) => {\n      const assetNames = this._bundles[bundleId];\n      if (assetNames) {\n        const results = this.resolve(assetNames);\n        const assets = {};\n        for (const key in results) {\n          const asset = results[key];\n          assets[this._extractAssetIdFromBundle(bundleId, key)] = asset;\n        }\n        out[bundleId] = assets;\n      }\n    });\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Does exactly what resolve does, but returns just the URL rather than the whole asset object\n   * @param key - The key or keys to resolve\n   * @returns - The URLs associated with the key(s)\n   */\n  resolveUrl(key) {\n    const result = this.resolve(key);\n    if (typeof key !== \"string\") {\n      const out = {};\n      for (const i in result) {\n        out[i] = result[i].src;\n      }\n      return out;\n    }\n    return result.src;\n  }\n  resolve(keys) {\n    const singleAsset = isSingleItem(keys);\n    keys = convertToList(keys);\n    const result = {};\n    keys.forEach((key) => {\n      if (!this._resolverHash[key]) {\n        if (this._assetMap[key]) {\n          let assets = this._assetMap[key];\n          const preferredOrder = this._getPreferredOrder(assets);\n          preferredOrder?.priority.forEach((priorityKey) => {\n            preferredOrder.params[priorityKey].forEach((value) => {\n              const filteredAssets = assets.filter((asset) => {\n                if (asset[priorityKey]) {\n                  return asset[priorityKey] === value;\n                }\n                return false;\n              });\n              if (filteredAssets.length) {\n                assets = filteredAssets;\n              }\n            });\n          });\n          this._resolverHash[key] = assets[0];\n        } else {\n          this._resolverHash[key] = this._buildResolvedAsset({\n            alias: [key],\n            src: key\n          }, {});\n        }\n      }\n      result[key] = this._resolverHash[key];\n    });\n    return singleAsset ? result[keys[0]] : result;\n  }\n  /**\n   * Checks if an asset with a given key exists in the resolver\n   * @param key - The key of the asset\n   */\n  hasKey(key) {\n    return !!this._assetMap[key];\n  }\n  /**\n   * Checks if a bundle with the given key exists in the resolver\n   * @param key - The key of the bundle\n   */\n  hasBundle(key) {\n    return !!this._bundles[key];\n  }\n  /**\n   * Internal function for figuring out what prefer criteria an asset should use.\n   * @param assets\n   */\n  _getPreferredOrder(assets) {\n    for (let i = 0; i < assets.length; i++) {\n      const asset = assets[i];\n      const preferred = this._preferredOrder.find((preference) => preference.params.format.includes(asset.format));\n      if (preferred) {\n        return preferred;\n      }\n    }\n    return this._preferredOrder[0];\n  }\n  /**\n   * Appends the default url parameters to the url\n   * @param url - The url to append the default parameters to\n   * @returns - The url with the default parameters appended\n   */\n  _appendDefaultSearchParams(url) {\n    if (!this._defaultSearchParams)\n      return url;\n    const paramConnector = /\\?/.test(url) ? \"&\" : \"?\";\n    return `${url}${paramConnector}${this._defaultSearchParams}`;\n  }\n  _buildResolvedAsset(formattedAsset, data) {\n    const { aliases, data: assetData, loadParser, parser, format, progressSize } = data;\n    if (this._basePath || this._rootPath) {\n      formattedAsset.src = path.toAbsolute(formattedAsset.src, this._basePath, this._rootPath);\n    }\n    formattedAsset.alias = aliases ?? formattedAsset.alias ?? [formattedAsset.src];\n    formattedAsset.src = this._appendDefaultSearchParams(formattedAsset.src);\n    formattedAsset.data = { ...assetData || {}, ...formattedAsset.data };\n    formattedAsset.loadParser = loadParser ?? formattedAsset.loadParser;\n    formattedAsset.parser = parser ?? formattedAsset.parser;\n    formattedAsset.format = format ?? formattedAsset.format ?? getUrlExtension(formattedAsset.src);\n    if (progressSize !== void 0) {\n      formattedAsset.progressSize = progressSize;\n    }\n    return formattedAsset;\n  }\n}\n/**\n * The prefix that denotes a URL is for a retina asset.\n * @default /@([0-9\\.]+)x/\n * @example `@2x`\n */\nResolver.RETINA_PREFIX = /@([0-9\\.]+)x/;\nfunction getUrlExtension(url) {\n  return url.split(\".\").pop().split(\"?\").shift().split(\"#\").shift();\n}\n\nexport { Resolver, getUrlExtension };\n//# sourceMappingURL=Resolver.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\n\n\"use strict\";\nconst tempMat = new Matrix();\nclass TextureMatrix {\n  /**\n   * @param texture - observed texture\n   * @param clampMargin - Changes frame clamping, 0.5 by default. Use -0.5 for extra border.\n   */\n  constructor(texture, clampMargin) {\n    this.mapCoord = new Matrix();\n    this.uClampFrame = new Float32Array(4);\n    this.uClampOffset = new Float32Array(2);\n    this._textureID = -1;\n    this._updateID = 0;\n    this.clampOffset = 0;\n    if (typeof clampMargin === \"undefined\") {\n      this.clampMargin = texture.width < 10 ? 0 : 0.5;\n    } else {\n      this.clampMargin = clampMargin;\n    }\n    this.isSimple = false;\n    this.texture = texture;\n  }\n  /** Texture property. */\n  get texture() {\n    return this._texture;\n  }\n  set texture(value) {\n    if (this.texture === value)\n      return;\n    this._texture?.removeListener(\"update\", this.update, this);\n    this._texture = value;\n    this._texture.addListener(\"update\", this.update, this);\n    this.update();\n  }\n  /**\n   * Multiplies uvs array to transform\n   * @param uvs - mesh uvs\n   * @param [out=uvs] - output\n   * @returns - output\n   */\n  multiplyUvs(uvs, out) {\n    if (out === void 0) {\n      out = uvs;\n    }\n    const mat = this.mapCoord;\n    for (let i = 0; i < uvs.length; i += 2) {\n      const x = uvs[i];\n      const y = uvs[i + 1];\n      out[i] = x * mat.a + y * mat.c + mat.tx;\n      out[i + 1] = x * mat.b + y * mat.d + mat.ty;\n    }\n    return out;\n  }\n  /**\n   * Updates matrices if texture was changed\n   * @returns - whether or not it was updated\n   */\n  update() {\n    const tex = this._texture;\n    this._updateID++;\n    const uvs = tex.uvs;\n    this.mapCoord.set(uvs.x1 - uvs.x0, uvs.y1 - uvs.y0, uvs.x3 - uvs.x0, uvs.y3 - uvs.y0, uvs.x0, uvs.y0);\n    const orig = tex.orig;\n    const trim = tex.trim;\n    if (trim) {\n      tempMat.set(\n        orig.width / trim.width,\n        0,\n        0,\n        orig.height / trim.height,\n        -trim.x / trim.width,\n        -trim.y / trim.height\n      );\n      this.mapCoord.append(tempMat);\n    }\n    const texBase = tex.source;\n    const frame = this.uClampFrame;\n    const margin = this.clampMargin / texBase._resolution;\n    const offset = this.clampOffset / texBase._resolution;\n    frame[0] = (tex.frame.x + margin + offset) / texBase.width;\n    frame[1] = (tex.frame.y + margin + offset) / texBase.height;\n    frame[2] = (tex.frame.x + tex.frame.width - margin + offset) / texBase.width;\n    frame[3] = (tex.frame.y + tex.frame.height - margin + offset) / texBase.height;\n    this.uClampOffset[0] = this.clampOffset / texBase.pixelWidth;\n    this.uClampOffset[1] = this.clampOffset / texBase.pixelHeight;\n    this.isSimple = tex.frame.width === texBase.width && tex.frame.height === texBase.height && tex.rotate === 0;\n    return true;\n  }\n}\n\nexport { TextureMatrix };\n//# sourceMappingURL=TextureMatrix.mjs.map\n","\"use strict\";\nconst genericFontFamilies = [\n  \"serif\",\n  \"sans-serif\",\n  \"monospace\",\n  \"cursive\",\n  \"fantasy\",\n  \"system-ui\"\n];\nfunction fontStringFromTextStyle(style) {\n  const fontSizeString = typeof style.fontSize === \"number\" ? `${style.fontSize}px` : style.fontSize;\n  let fontFamilies = style.fontFamily;\n  if (!Array.isArray(style.fontFamily)) {\n    fontFamilies = style.fontFamily.split(\",\");\n  }\n  for (let i = fontFamilies.length - 1; i >= 0; i--) {\n    let fontFamily = fontFamilies[i].trim();\n    if (!/([\\\"\\'])[^\\'\\\"]+\\1/.test(fontFamily) && !genericFontFamilies.includes(fontFamily)) {\n      fontFamily = `\"${fontFamily}\"`;\n    }\n    fontFamilies[i] = fontFamily;\n  }\n  return `${style.fontStyle} ${style.fontVariant} ${style.fontWeight} ${fontSizeString} ${fontFamilies.join(\",\")}`;\n}\n\nexport { fontStringFromTextStyle };\n//# sourceMappingURL=fontStringFromTextStyle.mjs.map\n","\"use strict\";\nvar CLEAR = /* @__PURE__ */ ((CLEAR2) => {\n  CLEAR2[CLEAR2[\"NONE\"] = 0] = \"NONE\";\n  CLEAR2[CLEAR2[\"COLOR\"] = 16384] = \"COLOR\";\n  CLEAR2[CLEAR2[\"STENCIL\"] = 1024] = \"STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH\"] = 256] = \"DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_DEPTH\"] = 16640] = \"COLOR_DEPTH\";\n  CLEAR2[CLEAR2[\"COLOR_STENCIL\"] = 17408] = \"COLOR_STENCIL\";\n  CLEAR2[CLEAR2[\"DEPTH_STENCIL\"] = 1280] = \"DEPTH_STENCIL\";\n  CLEAR2[CLEAR2[\"ALL\"] = 17664] = \"ALL\";\n  return CLEAR2;\n})(CLEAR || {});\n\nexport { CLEAR };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nfunction loopMatrix(col, row) {\n  const total = col * row;\n  return `\n        for (let i = 0; i < ${total}; i++) {\n            data[offset + (((i / ${col})|0) * 4) + (i % ${col})] = v[i];\n        }\n    `;\n}\nconst uboSyncFunctionsSTD40 = {\n  f32: `\n        data[offset] = v;`,\n  i32: `\n        dataInt32[offset] = v;`,\n  \"vec2<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];`,\n  \"vec3<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];`,\n  \"vec4<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 3] = v[3];`,\n  \"vec2<i32>\": `\n        dataInt32[offset] = v[0];\n        dataInt32[offset + 1] = v[1];`,\n  \"vec3<i32>\": `\n        dataInt32[offset] = v[0];\n        dataInt32[offset + 1] = v[1];\n        dataInt32[offset + 2] = v[2];`,\n  \"vec4<i32>\": `\n        dataInt32[offset] = v[0];\n        dataInt32[offset + 1] = v[1];\n        dataInt32[offset + 2] = v[2];\n        dataInt32[offset + 3] = v[3];`,\n  \"mat2x2<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 4] = v[2];\n        data[offset + 5] = v[3];`,\n  \"mat3x3<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 4] = v[3];\n        data[offset + 5] = v[4];\n        data[offset + 6] = v[5];\n        data[offset + 8] = v[6];\n        data[offset + 9] = v[7];\n        data[offset + 10] = v[8];`,\n  \"mat4x4<f32>\": `\n        for (let i = 0; i < 16; i++) {\n            data[offset + i] = v[i];\n        }`,\n  \"mat3x2<f32>\": loopMatrix(3, 2),\n  \"mat4x2<f32>\": loopMatrix(4, 2),\n  \"mat2x3<f32>\": loopMatrix(2, 3),\n  \"mat4x3<f32>\": loopMatrix(4, 3),\n  \"mat2x4<f32>\": loopMatrix(2, 4),\n  \"mat3x4<f32>\": loopMatrix(3, 4)\n};\nconst uboSyncFunctionsWGSL = {\n  ...uboSyncFunctionsSTD40,\n  \"mat2x2<f32>\": `\n        data[offset] = v[0];\n        data[offset + 1] = v[1];\n        data[offset + 2] = v[2];\n        data[offset + 3] = v[3];\n    `\n};\n\nexport { uboSyncFunctionsSTD40, uboSyncFunctionsWGSL };\n//# sourceMappingURL=uboSyncFunctions.mjs.map\n","import { Color } from '../../color/Color.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { ImageSource } from '../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { TextureStyle } from '../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from '../text/canvas/utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from '../text/canvas/utils/getCanvasFillStyle.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\n\n\"use strict\";\nconst _DynamicBitmapFont = class _DynamicBitmapFont extends AbstractBitmapFont {\n  /**\n   * @param options - The options for the dynamic bitmap font.\n   */\n  constructor(options) {\n    super();\n    /**\n     * this is a resolution modifier for the font size..\n     * texture resolution will also be used to scale texture according to its font size also\n     */\n    this.resolution = 1;\n    /** The pages of the font. */\n    this.pages = [];\n    this._padding = 0;\n    this._measureCache = /* @__PURE__ */ Object.create(null);\n    this._currentChars = [];\n    this._currentX = 0;\n    this._currentY = 0;\n    this._currentMaxCharHeight = 0;\n    this._currentPageIndex = -1;\n    this._skipKerning = false;\n    const dynamicOptions = { ..._DynamicBitmapFont.defaultOptions, ...options };\n    this._textureSize = dynamicOptions.textureSize;\n    this._mipmap = dynamicOptions.mipmap;\n    const style = dynamicOptions.style.clone();\n    if (dynamicOptions.overrideFill) {\n      style._fill.color = 16777215;\n      style._fill.alpha = 1;\n      style._fill.texture = Texture.WHITE;\n      style._fill.fill = null;\n    }\n    this.applyFillAsTint = dynamicOptions.overrideFill;\n    const requestedFontSize = style.fontSize;\n    style.fontSize = this.baseMeasurementFontSize;\n    const font = fontStringFromTextStyle(style);\n    if (dynamicOptions.overrideSize) {\n      if (style._stroke) {\n        style._stroke.width *= this.baseRenderedFontSize / requestedFontSize;\n      }\n    } else {\n      style.fontSize = this.baseRenderedFontSize = requestedFontSize;\n    }\n    this._style = style;\n    this._skipKerning = dynamicOptions.skipKerning ?? false;\n    this.resolution = dynamicOptions.resolution ?? 1;\n    this._padding = dynamicOptions.padding ?? 4;\n    if (dynamicOptions.textureStyle) {\n      this._textureStyle = dynamicOptions.textureStyle instanceof TextureStyle ? dynamicOptions.textureStyle : new TextureStyle(dynamicOptions.textureStyle);\n    }\n    this.fontMetrics = CanvasTextMetrics.measureFont(font);\n    this.lineHeight = style.lineHeight || this.fontMetrics.fontSize || style.fontSize;\n  }\n  ensureCharacters(chars) {\n    const charList = CanvasTextMetrics.graphemeSegmenter(chars).filter((char) => !this._currentChars.includes(char)).filter((char, index, self) => self.indexOf(char) === index);\n    if (!charList.length)\n      return;\n    this._currentChars = [...this._currentChars, ...charList];\n    let pageData;\n    if (this._currentPageIndex === -1) {\n      pageData = this._nextPage();\n    } else {\n      pageData = this.pages[this._currentPageIndex];\n    }\n    let { canvas, context } = pageData.canvasAndContext;\n    let textureSource = pageData.texture.source;\n    const style = this._style;\n    let currentX = this._currentX;\n    let currentY = this._currentY;\n    let currentMaxCharHeight = this._currentMaxCharHeight;\n    const fontScale = this.baseRenderedFontSize / this.baseMeasurementFontSize;\n    const padding = this._padding * fontScale;\n    let skipTexture = false;\n    const maxTextureWidth = canvas.width / this.resolution;\n    const maxTextureHeight = canvas.height / this.resolution;\n    for (let i = 0; i < charList.length; i++) {\n      const char = charList[i];\n      const metrics = CanvasTextMetrics.measureText(char, style, canvas, false);\n      metrics.lineHeight = metrics.height;\n      const width = metrics.width * fontScale;\n      const textureGlyphWidth = Math.ceil((style.fontStyle === \"italic\" ? 2 : 1) * width);\n      const height = metrics.height * fontScale;\n      const paddedWidth = textureGlyphWidth + padding * 2;\n      const paddedHeight = height + padding * 2;\n      skipTexture = false;\n      if (char !== \"\\n\" && char !== \"\\r\" && char !== \"\t\" && char !== \" \") {\n        skipTexture = true;\n        currentMaxCharHeight = Math.ceil(Math.max(paddedHeight, currentMaxCharHeight));\n      }\n      if (currentX + paddedWidth > maxTextureWidth) {\n        currentY += currentMaxCharHeight;\n        currentMaxCharHeight = paddedHeight;\n        currentX = 0;\n        if (currentY + currentMaxCharHeight > maxTextureHeight) {\n          textureSource.update();\n          const pageData2 = this._nextPage();\n          canvas = pageData2.canvasAndContext.canvas;\n          context = pageData2.canvasAndContext.context;\n          textureSource = pageData2.texture.source;\n          currentX = 0;\n          currentY = 0;\n          currentMaxCharHeight = 0;\n        }\n      }\n      const xAdvance = width / fontScale - (style.dropShadow?.distance ?? 0) - (style._stroke?.width ?? 0);\n      this.chars[char] = {\n        id: char.codePointAt(0),\n        xOffset: -this._padding,\n        yOffset: -this._padding,\n        xAdvance,\n        kerning: {}\n      };\n      if (skipTexture) {\n        this._drawGlyph(\n          context,\n          metrics,\n          currentX + padding,\n          currentY + padding,\n          fontScale,\n          style\n        );\n        const px = textureSource.width * fontScale;\n        const py = textureSource.height * fontScale;\n        const frame = new Rectangle(\n          currentX / px * textureSource.width,\n          currentY / py * textureSource.height,\n          paddedWidth / px * textureSource.width,\n          paddedHeight / py * textureSource.height\n        );\n        this.chars[char].texture = new Texture({\n          source: textureSource,\n          frame\n        });\n        currentX += Math.ceil(paddedWidth);\n      }\n    }\n    textureSource.update();\n    this._currentX = currentX;\n    this._currentY = currentY;\n    this._currentMaxCharHeight = currentMaxCharHeight;\n    this._skipKerning && this._applyKerning(charList, context);\n  }\n  /**\n   * @deprecated since 8.0.0\n   * The map of base page textures (i.e., sheets of glyphs).\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  _applyKerning(newChars, context) {\n    const measureCache = this._measureCache;\n    for (let i = 0; i < newChars.length; i++) {\n      const first = newChars[i];\n      for (let j = 0; j < this._currentChars.length; j++) {\n        const second = this._currentChars[j];\n        let c1 = measureCache[first];\n        if (!c1)\n          c1 = measureCache[first] = context.measureText(first).width;\n        let c2 = measureCache[second];\n        if (!c2)\n          c2 = measureCache[second] = context.measureText(second).width;\n        let total = context.measureText(first + second).width;\n        let amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[first].kerning[second] = amount;\n        }\n        total = context.measureText(first + second).width;\n        amount = total - (c1 + c2);\n        if (amount) {\n          this.chars[second].kerning[first] = amount;\n        }\n      }\n    }\n  }\n  _nextPage() {\n    this._currentPageIndex++;\n    const textureResolution = this.resolution;\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n      this._textureSize,\n      this._textureSize,\n      textureResolution\n    );\n    this._setupContext(canvasAndContext.context, this._style, textureResolution);\n    const resolution = textureResolution * (this.baseRenderedFontSize / this.baseMeasurementFontSize);\n    const texture = new Texture({\n      source: new ImageSource({\n        resource: canvasAndContext.canvas,\n        resolution,\n        alphaMode: \"premultiply-alpha-on-upload\",\n        autoGenerateMipmaps: this._mipmap\n      })\n    });\n    if (this._textureStyle) {\n      texture.source.style = this._textureStyle;\n    }\n    const pageData = {\n      canvasAndContext,\n      texture\n    };\n    this.pages[this._currentPageIndex] = pageData;\n    return pageData;\n  }\n  // canvas style!\n  _setupContext(context, style, resolution) {\n    style.fontSize = this.baseRenderedFontSize;\n    context.scale(resolution, resolution);\n    context.font = fontStringFromTextStyle(style);\n    style.fontSize = this.baseMeasurementFontSize;\n    context.textBaseline = style.textBaseline;\n    const stroke = style._stroke;\n    const strokeThickness = stroke?.width ?? 0;\n    if (stroke) {\n      context.lineWidth = strokeThickness;\n      context.lineJoin = stroke.join;\n      context.miterLimit = stroke.miterLimit;\n      context.strokeStyle = getCanvasFillStyle(stroke, context);\n    }\n    if (style._fill) {\n      context.fillStyle = getCanvasFillStyle(style._fill, context);\n    }\n    if (style.dropShadow) {\n      const shadowOptions = style.dropShadow;\n      const rgb = Color.shared.setValue(shadowOptions.color).toArray();\n      const dropShadowBlur = shadowOptions.blur * resolution;\n      const dropShadowDistance = shadowOptions.distance * resolution;\n      context.shadowColor = `rgba(${rgb[0] * 255},${rgb[1] * 255},${rgb[2] * 255},${shadowOptions.alpha})`;\n      context.shadowBlur = dropShadowBlur;\n      context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n      context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance;\n    } else {\n      context.shadowColor = \"black\";\n      context.shadowBlur = 0;\n      context.shadowOffsetX = 0;\n      context.shadowOffsetY = 0;\n    }\n  }\n  _drawGlyph(context, metrics, x, y, fontScale, style) {\n    const char = metrics.text;\n    const fontProperties = metrics.fontProperties;\n    const stroke = style._stroke;\n    const strokeThickness = (stroke?.width ?? 0) * fontScale;\n    const tx = x + strokeThickness / 2;\n    const ty = y - strokeThickness / 2;\n    const descent = fontProperties.descent * fontScale;\n    const lineHeight = metrics.lineHeight * fontScale;\n    let removeShadow = false;\n    if (style.stroke && strokeThickness) {\n      removeShadow = true;\n      context.strokeText(char, tx, ty + lineHeight - descent);\n    }\n    const { shadowBlur, shadowOffsetX, shadowOffsetY } = context;\n    if (style._fill) {\n      if (removeShadow) {\n        context.shadowBlur = 0;\n        context.shadowOffsetX = 0;\n        context.shadowOffsetY = 0;\n      }\n      context.fillText(char, tx, ty + lineHeight - descent);\n    }\n    if (removeShadow) {\n      context.shadowBlur = shadowBlur;\n      context.shadowOffsetX = shadowOffsetX;\n      context.shadowOffsetY = shadowOffsetY;\n    }\n  }\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { canvasAndContext, texture } = this.pages[i];\n      CanvasPool.returnCanvasAndContext(canvasAndContext);\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n};\n_DynamicBitmapFont.defaultOptions = {\n  textureSize: 512,\n  style: new TextStyle(),\n  mipmap: true\n};\nlet DynamicBitmapFont = _DynamicBitmapFont;\n\nexport { DynamicBitmapFont };\n//# sourceMappingURL=DynamicBitmapFont.mjs.map\n","import { lru } from 'tiny-lru';\nimport { Cache } from '../../assets/cache/Cache.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { DynamicBitmapFont } from './DynamicBitmapFont.mjs';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout.mjs';\nimport { resolveCharacters } from './utils/resolveCharacters.mjs';\n\n\"use strict\";\nlet fontCount = 0;\nclass BitmapFontManagerClass {\n  constructor() {\n    /**\n     * This character set includes all the letters in the alphabet (both lower- and upper- case).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.ALPHA })\n     */\n    this.ALPHA = [[\"a\", \"z\"], [\"A\", \"Z\"], \" \"];\n    /**\n     * This character set includes all decimal digits (from 0 to 9).\n     * @type {string[][]}\n     * @example\n     * BitmapFont.from('ExampleFont', style, { chars: BitmapFont.NUMERIC })\n     */\n    this.NUMERIC = [[\"0\", \"9\"]];\n    /**\n     * This character set is the union of `BitmapFont.ALPHA` and `BitmapFont.NUMERIC`.\n     * @type {string[][]}\n     */\n    this.ALPHANUMERIC = [[\"a\", \"z\"], [\"A\", \"Z\"], [\"0\", \"9\"], \" \"];\n    /**\n     * This character set consists of all the ASCII table.\n     * @type {string[][]}\n     * @see http://www.asciitable.com/\n     */\n    this.ASCII = [[\" \", \"~\"]];\n    /** Default options for installing a new BitmapFont. */\n    this.defaultOptions = {\n      chars: this.ALPHANUMERIC,\n      resolution: 1,\n      padding: 4,\n      skipKerning: false,\n      textureStyle: null\n    };\n    /** Cache for measured text layouts to avoid recalculating them multiple times. */\n    this.measureCache = lru(1e3);\n  }\n  /**\n   * Get a font for the specified text and style.\n   * @param text - The text to get the font for\n   * @param style - The style to use\n   */\n  getFont(text, style) {\n    let fontFamilyKey = `${style.fontFamily}-bitmap`;\n    let overrideFill = true;\n    if (style._fill.fill && !style._stroke) {\n      fontFamilyKey += style._fill.fill.styleKey;\n      overrideFill = false;\n    } else if (style._stroke || style.dropShadow) {\n      fontFamilyKey = `${style.styleKey}-bitmap`;\n      overrideFill = false;\n    }\n    if (!Cache.has(fontFamilyKey)) {\n      const styleCopy = Object.create(style);\n      styleCopy.lineHeight = 0;\n      const fnt = new DynamicBitmapFont({\n        style: styleCopy,\n        overrideFill,\n        overrideSize: true,\n        ...this.defaultOptions\n      });\n      fontCount++;\n      if (fontCount > 50) {\n        warn(\"BitmapText\", `You have dynamically created ${fontCount} bitmap fonts, this can be inefficient. Try pre installing your font styles using \\`BitmapFont.install({name:\"style1\", style})\\``);\n      }\n      fnt.once(\"destroy\", () => {\n        fontCount--;\n        Cache.remove(fontFamilyKey);\n      });\n      Cache.set(\n        fontFamilyKey,\n        fnt\n      );\n    }\n    const dynamicFont = Cache.get(fontFamilyKey);\n    dynamicFont.ensureCharacters?.(text);\n    return dynamicFont;\n  }\n  /**\n   * Get the layout of a text for the specified style.\n   * @param text - The text to get the layout for\n   * @param style - The style to use\n   * @param trimEnd - Whether to ignore whitespaces at the end of each line\n   */\n  getLayout(text, style, trimEnd = true) {\n    const bitmapFont = this.getFont(text, style);\n    const id = `${text}-${style.styleKey}-${trimEnd}`;\n    if (this.measureCache.has(id)) {\n      return this.measureCache.get(id);\n    }\n    const segments = CanvasTextMetrics.graphemeSegmenter(text);\n    const layoutData = getBitmapTextLayout(segments, style, bitmapFont, trimEnd);\n    this.measureCache.set(id, layoutData);\n    return layoutData;\n  }\n  /**\n   * Measure the text using the specified style.\n   * @param text - The text to measure\n   * @param style - The style to use\n   * @param trimEnd - Whether to ignore whitespaces at the end of each line\n   */\n  measureText(text, style, trimEnd = true) {\n    return this.getLayout(text, style, trimEnd);\n  }\n  // eslint-disable-next-line max-len\n  install(...args) {\n    let options = args[0];\n    if (typeof options === \"string\") {\n      options = {\n        name: options,\n        style: args[1],\n        chars: args[2]?.chars,\n        resolution: args[2]?.resolution,\n        padding: args[2]?.padding,\n        skipKerning: args[2]?.skipKerning\n      };\n      deprecation(v8_0_0, \"BitmapFontManager.install(name, style, options) is deprecated, use BitmapFontManager.install({name, style, ...options})\");\n    }\n    const name = options?.name;\n    if (!name) {\n      throw new Error(\"[BitmapFontManager] Property `name` is required.\");\n    }\n    options = { ...this.defaultOptions, ...options };\n    const textStyle = options.style;\n    const style = textStyle instanceof TextStyle ? textStyle : new TextStyle(textStyle);\n    const overrideFill = options.dynamicFill ?? this._canUseTintForStyle(style);\n    const font = new DynamicBitmapFont({\n      style,\n      overrideFill,\n      skipKerning: options.skipKerning,\n      padding: options.padding,\n      resolution: options.resolution,\n      overrideSize: false,\n      textureStyle: options.textureStyle\n    });\n    const flatChars = resolveCharacters(options.chars);\n    font.ensureCharacters(flatChars.join(\"\"));\n    Cache.set(`${name}-bitmap`, font);\n    font.once(\"destroy\", () => Cache.remove(`${name}-bitmap`));\n    return font;\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * @param {string} name - The name of the bitmap font to uninstall.\n   */\n  uninstall(name) {\n    const cacheKey = `${name}-bitmap`;\n    const font = Cache.get(cacheKey);\n    if (font) {\n      font.destroy();\n    }\n  }\n  /**\n   * Determines if a style can use tinting instead of baking colors into the bitmap.\n   * Tinting is more efficient as it allows reusing the same bitmap with different colors.\n   * @param style - The text style to evaluate\n   * @returns true if the style can use tinting, false if colors must be baked in\n   * @private\n   */\n  _canUseTintForStyle(style) {\n    return !style._stroke && (!style.dropShadow || style.dropShadow.color === 0) && !style._fill.fill && style._fill.color === 16777215;\n  }\n}\nconst BitmapFontManager = new BitmapFontManagerClass();\n\nexport { BitmapFontManager };\n//# sourceMappingURL=BitmapFontManager.mjs.map\n","\"use strict\";\nfunction resolveCharacters(chars) {\n  if (chars === \"\") {\n    return [];\n  }\n  if (typeof chars === \"string\") {\n    chars = [chars];\n  }\n  const result = [];\n  for (let i = 0, j = chars.length; i < j; i++) {\n    const item = chars[i];\n    if (Array.isArray(item)) {\n      if (item.length !== 2) {\n        throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${item.length}.`);\n      }\n      if (item[0].length === 0 || item[1].length === 0) {\n        throw new Error(\"[BitmapFont]: Invalid character delimiter.\");\n      }\n      const startCode = item[0].charCodeAt(0);\n      const endCode = item[1].charCodeAt(0);\n      if (endCode < startCode) {\n        throw new Error(\"[BitmapFont]: Invalid character range.\");\n      }\n      for (let i2 = startCode, j2 = endCode; i2 <= j2; i2++) {\n        result.push(String.fromCharCode(i2));\n      }\n    } else {\n      result.push(...Array.from(item));\n    }\n  }\n  if (result.length === 0) {\n    throw new Error(\"[BitmapFont]: Empty set when resolving characters.\");\n  }\n  return result;\n}\n\nexport { resolveCharacters };\n//# sourceMappingURL=resolveCharacters.mjs.map\n","\"use strict\";\nclass ViewableBuffer {\n  constructor(sizeOrBuffer) {\n    if (typeof sizeOrBuffer === \"number\") {\n      this.rawBinaryData = new ArrayBuffer(sizeOrBuffer);\n    } else if (sizeOrBuffer instanceof Uint8Array) {\n      this.rawBinaryData = sizeOrBuffer.buffer;\n    } else {\n      this.rawBinaryData = sizeOrBuffer;\n    }\n    this.uint32View = new Uint32Array(this.rawBinaryData);\n    this.float32View = new Float32Array(this.rawBinaryData);\n    this.size = this.rawBinaryData.byteLength;\n  }\n  /** View on the raw binary data as a `Int8Array`. */\n  get int8View() {\n    if (!this._int8View) {\n      this._int8View = new Int8Array(this.rawBinaryData);\n    }\n    return this._int8View;\n  }\n  /** View on the raw binary data as a `Uint8Array`. */\n  get uint8View() {\n    if (!this._uint8View) {\n      this._uint8View = new Uint8Array(this.rawBinaryData);\n    }\n    return this._uint8View;\n  }\n  /**  View on the raw binary data as a `Int16Array`. */\n  get int16View() {\n    if (!this._int16View) {\n      this._int16View = new Int16Array(this.rawBinaryData);\n    }\n    return this._int16View;\n  }\n  /** View on the raw binary data as a `Int32Array`. */\n  get int32View() {\n    if (!this._int32View) {\n      this._int32View = new Int32Array(this.rawBinaryData);\n    }\n    return this._int32View;\n  }\n  /** View on the raw binary data as a `Float64Array`. */\n  get float64View() {\n    if (!this._float64Array) {\n      this._float64Array = new Float64Array(this.rawBinaryData);\n    }\n    return this._float64Array;\n  }\n  /** View on the raw binary data as a `BigUint64Array`. */\n  get bigUint64View() {\n    if (!this._bigUint64Array) {\n      this._bigUint64Array = new BigUint64Array(this.rawBinaryData);\n    }\n    return this._bigUint64Array;\n  }\n  /**\n   * Returns the view of the given type.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *    `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - typed array of given type\n   */\n  view(type) {\n    return this[`${type}View`];\n  }\n  /** Destroys all buffer references. Do not use after calling this. */\n  destroy() {\n    this.rawBinaryData = null;\n    this.uint32View = null;\n    this.float32View = null;\n    this.uint16View = null;\n    this._int8View = null;\n    this._uint8View = null;\n    this._int16View = null;\n    this._int32View = null;\n    this._float64Array = null;\n    this._bigUint64Array = null;\n  }\n  /**\n   * Returns the size of the given type in bytes.\n   * @param type - One of `int8`, `uint8`, `int16`,\n   *   `uint16`, `int32`, `uint32`, and `float32`.\n   * @returns - size of the type in bytes\n   */\n  static sizeOf(type) {\n    switch (type) {\n      case \"int8\":\n      case \"uint8\":\n        return 1;\n      case \"int16\":\n      case \"uint16\":\n        return 2;\n      case \"int32\":\n      case \"uint32\":\n      case \"float32\":\n        return 4;\n      default:\n        throw new Error(`${type} isn't a valid view type`);\n    }\n  }\n}\n\nexport { ViewableBuffer };\n//# sourceMappingURL=ViewableBuffer.mjs.map\n","\"use strict\";\nconst PI_2 = Math.PI * 2;\nconst RAD_TO_DEG = 180 / Math.PI;\nconst DEG_TO_RAD = Math.PI / 180;\n\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG };\n//# sourceMappingURL=const.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass CustomRenderPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  updateRenderable() {\n  }\n  destroyRenderable() {\n  }\n  validateRenderable() {\n    return false;\n  }\n  addRenderable(container, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add(container);\n  }\n  execute(container) {\n    if (!container.isRenderable)\n      return;\n    container.render(this._renderer);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\nCustomRenderPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"customRender\"\n};\n\nexport { CustomRenderPipe };\n//# sourceMappingURL=CustomRenderPipe.mjs.map\n","\"use strict\";\nfunction executeInstructions(renderGroup, renderer) {\n  const instructionSet = renderGroup.instructionSet;\n  const instructions = instructionSet.instructions;\n  for (let i = 0; i < instructionSet.instructionSize; i++) {\n    const instruction = instructions[i];\n    renderer[instruction.renderPipeId].execute(instruction);\n  }\n}\n\nexport { executeInstructions };\n//# sourceMappingURL=executeInstructions.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { BatchableSprite } from '../sprite/BatchableSprite.mjs';\nimport { executeInstructions } from './utils/executeInstructions.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nclass RenderGroupPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  addRenderGroup(renderGroup, instructionSet) {\n    if (renderGroup.isCachedAsTexture) {\n      this._addRenderableCacheAsTexture(renderGroup, instructionSet);\n    } else {\n      this._addRenderableDirect(renderGroup, instructionSet);\n    }\n  }\n  execute(renderGroup) {\n    if (!renderGroup.isRenderable)\n      return;\n    if (renderGroup.isCachedAsTexture) {\n      this._executeCacheAsTexture(renderGroup);\n    } else {\n      this._executeDirect(renderGroup);\n    }\n  }\n  destroy() {\n    this._renderer = null;\n  }\n  _addRenderableDirect(renderGroup, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    if (renderGroup._batchableRenderGroup) {\n      BigPool.return(renderGroup._batchableRenderGroup);\n      renderGroup._batchableRenderGroup = null;\n    }\n    instructionSet.add(renderGroup);\n  }\n  _addRenderableCacheAsTexture(renderGroup, instructionSet) {\n    const batchableRenderGroup = renderGroup._batchableRenderGroup ?? (renderGroup._batchableRenderGroup = BigPool.get(BatchableSprite));\n    batchableRenderGroup.renderable = renderGroup.root;\n    batchableRenderGroup.transform = renderGroup.root.relativeGroupTransform;\n    batchableRenderGroup.texture = renderGroup.texture;\n    batchableRenderGroup.bounds = renderGroup._textureBounds;\n    instructionSet.add(renderGroup);\n    this._renderer.renderPipes.blendMode.pushBlendMode(renderGroup, renderGroup.root.groupBlendMode, instructionSet);\n    this._renderer.renderPipes.batch.addToBatch(batchableRenderGroup, instructionSet);\n    this._renderer.renderPipes.blendMode.popBlendMode(instructionSet);\n  }\n  _executeCacheAsTexture(renderGroup) {\n    if (renderGroup.textureNeedsUpdate) {\n      renderGroup.textureNeedsUpdate = false;\n      const worldTransformMatrix = tempMatrix.identity().translate(\n        -renderGroup._textureBounds.x,\n        -renderGroup._textureBounds.y\n      );\n      this._renderer.renderTarget.push(renderGroup.texture, true, null, renderGroup.texture.frame);\n      this._renderer.globalUniforms.push({\n        worldTransformMatrix,\n        worldColor: 4294967295,\n        offset: { x: 0, y: 0 }\n      });\n      executeInstructions(renderGroup, this._renderer.renderPipes);\n      this._renderer.renderTarget.finishRenderPass();\n      this._renderer.renderTarget.pop();\n      this._renderer.globalUniforms.pop();\n    }\n    renderGroup._batchableRenderGroup._batcher.updateElement(renderGroup._batchableRenderGroup);\n    renderGroup._batchableRenderGroup._batcher.geometry.buffers[0].update();\n  }\n  _executeDirect(renderGroup) {\n    this._renderer.globalUniforms.push({\n      worldTransformMatrix: renderGroup.inverseParentTextureTransform,\n      worldColor: renderGroup.worldColorAlpha\n    });\n    executeInstructions(renderGroup, this._renderer.renderPipes);\n    this._renderer.globalUniforms.pop();\n  }\n}\nRenderGroupPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"renderGroup\"\n};\n\nexport { RenderGroupPipe };\n//# sourceMappingURL=RenderGroupPipe.mjs.map\n","\"use strict\";\nfunction clearList(list, index) {\n  index || (index = 0);\n  for (let j = index; j < list.length; j++) {\n    if (list[j]) {\n      list[j] = null;\n    } else {\n      break;\n    }\n  }\n}\n\nexport { clearList };\n//# sourceMappingURL=clearList.mjs.map\n","import { Container, UPDATE_VISIBLE, UPDATE_COLOR, UPDATE_BLEND } from '../Container.mjs';\nimport { clearList } from './clearList.mjs';\nimport { multiplyColors } from './multiplyColors.mjs';\n\n\"use strict\";\nconst tempContainer = new Container();\nconst UPDATE_BLEND_COLOR_VISIBLE = UPDATE_VISIBLE | UPDATE_COLOR | UPDATE_BLEND;\nfunction updateRenderGroupTransforms(renderGroup, updateChildRenderGroups = false) {\n  updateRenderGroupTransform(renderGroup);\n  const childrenToUpdate = renderGroup.childrenToUpdate;\n  const updateTick = renderGroup.updateTick++;\n  for (const j in childrenToUpdate) {\n    const renderGroupDepth = Number(j);\n    const childrenAtDepth = childrenToUpdate[j];\n    const list = childrenAtDepth.list;\n    const index = childrenAtDepth.index;\n    for (let i = 0; i < index; i++) {\n      const child = list[i];\n      if (child.parentRenderGroup === renderGroup && child.relativeRenderGroupDepth === renderGroupDepth) {\n        updateTransformAndChildren(child, updateTick, 0);\n      }\n    }\n    clearList(list, index);\n    childrenAtDepth.index = 0;\n  }\n  if (updateChildRenderGroups) {\n    for (let i = 0; i < renderGroup.renderGroupChildren.length; i++) {\n      updateRenderGroupTransforms(renderGroup.renderGroupChildren[i], updateChildRenderGroups);\n    }\n  }\n}\nfunction updateRenderGroupTransform(renderGroup) {\n  const root = renderGroup.root;\n  let worldAlpha;\n  if (renderGroup.renderGroupParent) {\n    const renderGroupParent = renderGroup.renderGroupParent;\n    renderGroup.worldTransform.appendFrom(\n      root.relativeGroupTransform,\n      renderGroupParent.worldTransform\n    );\n    renderGroup.worldColor = multiplyColors(\n      root.groupColor,\n      renderGroupParent.worldColor\n    );\n    worldAlpha = root.groupAlpha * renderGroupParent.worldAlpha;\n  } else {\n    renderGroup.worldTransform.copyFrom(root.localTransform);\n    renderGroup.worldColor = root.localColor;\n    worldAlpha = root.localAlpha;\n  }\n  worldAlpha = worldAlpha < 0 ? 0 : worldAlpha > 1 ? 1 : worldAlpha;\n  renderGroup.worldAlpha = worldAlpha;\n  renderGroup.worldColorAlpha = renderGroup.worldColor + ((worldAlpha * 255 | 0) << 24);\n}\nfunction updateTransformAndChildren(container, updateTick, updateFlags) {\n  if (updateTick === container.updateTick)\n    return;\n  container.updateTick = updateTick;\n  container.didChange = false;\n  const localTransform = container.localTransform;\n  container.updateLocalTransform();\n  const parent = container.parent;\n  if (parent && !parent.renderGroup) {\n    updateFlags |= container._updateFlags;\n    container.relativeGroupTransform.appendFrom(\n      localTransform,\n      parent.relativeGroupTransform\n    );\n    if (updateFlags & UPDATE_BLEND_COLOR_VISIBLE) {\n      updateColorBlendVisibility(container, parent, updateFlags);\n    }\n  } else {\n    updateFlags = container._updateFlags;\n    container.relativeGroupTransform.copyFrom(localTransform);\n    if (updateFlags & UPDATE_BLEND_COLOR_VISIBLE) {\n      updateColorBlendVisibility(container, tempContainer, updateFlags);\n    }\n  }\n  if (!container.renderGroup) {\n    const children = container.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      updateTransformAndChildren(children[i], updateTick, updateFlags);\n    }\n    const renderGroup = container.parentRenderGroup;\n    const renderable = container;\n    if (renderable.renderPipeId && !renderGroup.structureDidChange) {\n      renderGroup.updateRenderable(renderable);\n    }\n  }\n}\nfunction updateColorBlendVisibility(container, parent, updateFlags) {\n  if (updateFlags & UPDATE_COLOR) {\n    container.groupColor = multiplyColors(\n      container.localColor,\n      parent.groupColor\n    );\n    let groupAlpha = container.localAlpha * parent.groupAlpha;\n    groupAlpha = groupAlpha < 0 ? 0 : groupAlpha > 1 ? 1 : groupAlpha;\n    container.groupAlpha = groupAlpha;\n    container.groupColorAlpha = container.groupColor + ((groupAlpha * 255 | 0) << 24);\n  }\n  if (updateFlags & UPDATE_BLEND) {\n    container.groupBlendMode = container.localBlendMode === \"inherit\" ? parent.groupBlendMode : container.localBlendMode;\n  }\n  if (updateFlags & UPDATE_VISIBLE) {\n    container.globalDisplayStatus = container.localDisplayStatus & parent.globalDisplayStatus;\n  }\n  container._updateFlags = 0;\n}\n\nexport { updateRenderGroupTransform, updateRenderGroupTransforms, updateTransformAndChildren };\n//# sourceMappingURL=updateRenderGroupTransforms.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { TexturePool } from '../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { TextureStyle } from '../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport { Bounds } from './bounds/Bounds.mjs';\nimport { clearList } from './utils/clearList.mjs';\nimport { executeInstructions } from './utils/executeInstructions.mjs';\nimport { updateRenderGroupTransforms } from './utils/updateRenderGroupTransforms.mjs';\nimport { validateRenderables } from './utils/validateRenderables.mjs';\n\n\"use strict\";\nconst tempMatrix = new Matrix();\nclass RenderGroupSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  render({ container, transform }) {\n    const parent = container.parent;\n    const renderGroupParent = container.renderGroup.renderGroupParent;\n    container.parent = null;\n    container.renderGroup.renderGroupParent = null;\n    const renderer = this._renderer;\n    const originalLocalTransform = tempMatrix;\n    if (transform) {\n      originalLocalTransform.copyFrom(container.renderGroup.localTransform);\n      container.renderGroup.localTransform.copyFrom(transform);\n    }\n    const renderPipes = renderer.renderPipes;\n    this._updateCachedRenderGroups(container.renderGroup, null);\n    this._updateRenderGroups(container.renderGroup);\n    renderer.globalUniforms.start({\n      worldTransformMatrix: transform ? container.renderGroup.localTransform : container.renderGroup.worldTransform,\n      worldColor: container.renderGroup.worldColorAlpha\n    });\n    executeInstructions(container.renderGroup, renderPipes);\n    if (renderPipes.uniformBatch) {\n      renderPipes.uniformBatch.renderEnd();\n    }\n    if (transform) {\n      container.renderGroup.localTransform.copyFrom(originalLocalTransform);\n    }\n    container.parent = parent;\n    container.renderGroup.renderGroupParent = renderGroupParent;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n  _updateCachedRenderGroups(renderGroup, closestCacheAsTexture) {\n    renderGroup._parentCacheAsTextureRenderGroup = closestCacheAsTexture;\n    if (renderGroup.isCachedAsTexture) {\n      if (!renderGroup.textureNeedsUpdate)\n        return;\n      closestCacheAsTexture = renderGroup;\n    }\n    for (let i = renderGroup.renderGroupChildren.length - 1; i >= 0; i--) {\n      this._updateCachedRenderGroups(renderGroup.renderGroupChildren[i], closestCacheAsTexture);\n    }\n    renderGroup.invalidateMatrices();\n    if (renderGroup.isCachedAsTexture) {\n      if (renderGroup.textureNeedsUpdate) {\n        const bounds = renderGroup.root.getLocalBounds();\n        bounds.ceil();\n        const lastTexture = renderGroup.texture;\n        if (renderGroup.texture) {\n          TexturePool.returnTexture(renderGroup.texture, true);\n        }\n        const renderer = this._renderer;\n        const resolution = renderGroup.textureOptions.resolution || renderer.view.resolution;\n        const antialias = renderGroup.textureOptions.antialias ?? renderer.view.antialias;\n        const scaleMode = renderGroup.textureOptions.scaleMode ?? \"linear\";\n        const texture = TexturePool.getOptimalTexture(\n          bounds.width,\n          bounds.height,\n          resolution,\n          antialias\n        );\n        texture._source.style = new TextureStyle({ scaleMode });\n        renderGroup.texture = texture;\n        renderGroup._textureBounds || (renderGroup._textureBounds = new Bounds());\n        renderGroup._textureBounds.copyFrom(bounds);\n        if (lastTexture !== renderGroup.texture) {\n          if (renderGroup.renderGroupParent) {\n            renderGroup.renderGroupParent.structureDidChange = true;\n          }\n        }\n      }\n    } else if (renderGroup.texture) {\n      TexturePool.returnTexture(renderGroup.texture, true);\n      renderGroup.texture = null;\n    }\n  }\n  _updateRenderGroups(renderGroup) {\n    const renderer = this._renderer;\n    const renderPipes = renderer.renderPipes;\n    renderGroup.runOnRender(renderer);\n    renderGroup.instructionSet.renderPipes = renderPipes;\n    if (!renderGroup.structureDidChange) {\n      validateRenderables(renderGroup, renderPipes);\n    } else {\n      clearList(renderGroup.childrenRenderablesToUpdate.list, 0);\n    }\n    updateRenderGroupTransforms(renderGroup);\n    if (renderGroup.structureDidChange) {\n      renderGroup.structureDidChange = false;\n      this._buildInstructions(renderGroup, renderer);\n    } else {\n      this._updateRenderables(renderGroup);\n    }\n    renderGroup.childrenRenderablesToUpdate.index = 0;\n    renderer.renderPipes.batch.upload(renderGroup.instructionSet);\n    if (renderGroup.isCachedAsTexture && !renderGroup.textureNeedsUpdate)\n      return;\n    for (let i = 0; i < renderGroup.renderGroupChildren.length; i++) {\n      this._updateRenderGroups(renderGroup.renderGroupChildren[i]);\n    }\n  }\n  _updateRenderables(renderGroup) {\n    const { list, index } = renderGroup.childrenRenderablesToUpdate;\n    for (let i = 0; i < index; i++) {\n      const container = list[i];\n      if (container.didViewUpdate) {\n        renderGroup.updateRenderable(container);\n      }\n    }\n    clearList(list, index);\n  }\n  _buildInstructions(renderGroup, rendererOrPipes) {\n    const root = renderGroup.root;\n    const instructionSet = renderGroup.instructionSet;\n    instructionSet.reset();\n    const renderer = rendererOrPipes.renderPipes ? rendererOrPipes : rendererOrPipes.batch.renderer;\n    const renderPipes = renderer.renderPipes;\n    renderPipes.batch.buildStart(instructionSet);\n    renderPipes.blendMode.buildStart();\n    renderPipes.colorMask.buildStart();\n    if (root.sortableChildren) {\n      root.sortChildren();\n    }\n    root.collectRenderablesWithEffects(instructionSet, renderer, null);\n    renderPipes.batch.buildEnd(instructionSet);\n    renderPipes.blendMode.buildEnd(instructionSet);\n  }\n}\n/** @ignore */\nRenderGroupSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"renderGroup\"\n};\n\nexport { RenderGroupSystem };\n//# sourceMappingURL=RenderGroupSystem.mjs.map\n","\"use strict\";\nfunction validateRenderables(renderGroup, renderPipes) {\n  const { list } = renderGroup.childrenRenderablesToUpdate;\n  let rebuildRequired = false;\n  for (let i = 0; i < renderGroup.childrenRenderablesToUpdate.index; i++) {\n    const container = list[i];\n    const renderable = container;\n    const pipe = renderPipes[renderable.renderPipeId];\n    rebuildRequired = pipe.validateRenderable(container);\n    if (rebuildRequired) {\n      break;\n    }\n  }\n  renderGroup.structureDidChange = rebuildRequired;\n  return rebuildRequired;\n}\n\nexport { validateRenderables };\n//# sourceMappingURL=validateRenderables.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BatchableSprite } from './BatchableSprite.mjs';\n\n\"use strict\";\nclass SpritePipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  addRenderable(sprite, instructionSet) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    this._renderer.renderPipes.batch.addToBatch(gpuSprite, instructionSet);\n  }\n  updateRenderable(sprite) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    gpuSprite._batcher.updateElement(gpuSprite);\n  }\n  validateRenderable(sprite) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    return !gpuSprite._batcher.checkAndUpdateTexture(\n      gpuSprite,\n      sprite._texture\n    );\n  }\n  _updateBatchableSprite(sprite, batchableSprite) {\n    batchableSprite.bounds = sprite.visualBounds;\n    batchableSprite.texture = sprite._texture;\n  }\n  _getGpuSprite(sprite) {\n    return sprite._gpuData[this._renderer.uid] || this._initGPUSprite(sprite);\n  }\n  _initGPUSprite(sprite) {\n    const batchableSprite = new BatchableSprite();\n    batchableSprite.renderable = sprite;\n    batchableSprite.transform = sprite.groupTransform;\n    batchableSprite.texture = sprite._texture;\n    batchableSprite.bounds = sprite.visualBounds;\n    batchableSprite.roundPixels = this._renderer._roundPixels | sprite._roundPixels;\n    sprite._gpuData[this._renderer.uid] = batchableSprite;\n    return batchableSprite;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nSpritePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"sprite\"\n};\n\nexport { SpritePipe };\n//# sourceMappingURL=SpritePipe.mjs.map\n","import { ExtensionType, extensions } from '../../../extensions/Extensions.mjs';\nimport { State } from '../../renderers/shared/state/State.mjs';\nimport { DefaultBatcher } from './DefaultBatcher.mjs';\n\n\"use strict\";\nconst _BatcherPipe = class _BatcherPipe {\n  constructor(renderer, adaptor) {\n    this.state = State.for2d();\n    this._batchersByInstructionSet = /* @__PURE__ */ Object.create(null);\n    /** A record of all active batchers, keyed by their names */\n    this._activeBatches = /* @__PURE__ */ Object.create(null);\n    this.renderer = renderer;\n    this._adaptor = adaptor;\n    this._adaptor.init?.(this);\n  }\n  static getBatcher(name) {\n    return new this._availableBatchers[name]();\n  }\n  buildStart(instructionSet) {\n    let batchers = this._batchersByInstructionSet[instructionSet.uid];\n    if (!batchers) {\n      batchers = this._batchersByInstructionSet[instructionSet.uid] = /* @__PURE__ */ Object.create(null);\n      batchers.default || (batchers.default = new DefaultBatcher({\n        maxTextures: this.renderer.limits.maxBatchableTextures\n      }));\n    }\n    this._activeBatches = batchers;\n    this._activeBatch = this._activeBatches.default;\n    for (const i in this._activeBatches) {\n      this._activeBatches[i].begin();\n    }\n  }\n  addToBatch(batchableObject, instructionSet) {\n    if (this._activeBatch.name !== batchableObject.batcherName) {\n      this._activeBatch.break(instructionSet);\n      let batch = this._activeBatches[batchableObject.batcherName];\n      if (!batch) {\n        batch = this._activeBatches[batchableObject.batcherName] = _BatcherPipe.getBatcher(batchableObject.batcherName);\n        batch.begin();\n      }\n      this._activeBatch = batch;\n    }\n    this._activeBatch.add(batchableObject);\n  }\n  break(instructionSet) {\n    this._activeBatch.break(instructionSet);\n  }\n  buildEnd(instructionSet) {\n    this._activeBatch.break(instructionSet);\n    const batches = this._activeBatches;\n    for (const i in batches) {\n      const batch = batches[i];\n      const geometry = batch.geometry;\n      geometry.indexBuffer.setDataWithSize(batch.indexBuffer, batch.indexSize, true);\n      geometry.buffers[0].setDataWithSize(batch.attributeBuffer.float32View, batch.attributeSize, false);\n    }\n  }\n  upload(instructionSet) {\n    const batchers = this._batchersByInstructionSet[instructionSet.uid];\n    for (const i in batchers) {\n      const batcher = batchers[i];\n      const geometry = batcher.geometry;\n      if (batcher.dirty) {\n        batcher.dirty = false;\n        geometry.buffers[0].update(batcher.attributeSize * 4);\n      }\n    }\n  }\n  execute(batch) {\n    if (batch.action === \"startBatch\") {\n      const batcher = batch.batcher;\n      const geometry = batcher.geometry;\n      const shader = batcher.shader;\n      this._adaptor.start(this, geometry, shader);\n    }\n    this._adaptor.execute(this, batch);\n  }\n  destroy() {\n    this.state = null;\n    this.renderer = null;\n    this._adaptor = null;\n    for (const i in this._activeBatches) {\n      this._activeBatches[i].destroy();\n    }\n    this._activeBatches = null;\n  }\n};\n/** @ignore */\n_BatcherPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"batch\"\n};\n_BatcherPipe._availableBatchers = /* @__PURE__ */ Object.create(null);\nlet BatcherPipe = _BatcherPipe;\nextensions.handleByMap(ExtensionType.Batcher, BatcherPipe._availableBatchers);\nextensions.add(DefaultBatcher);\n\nexport { BatcherPipe };\n//# sourceMappingURL=BatcherPipe.mjs.map\n","var source = \"struct GlobalFilterUniforms {\\n  uInputSize:vec4<f32>,\\n  uInputPixel:vec4<f32>,\\n  uInputClamp:vec4<f32>,\\n  uOutputFrame:vec4<f32>,\\n  uGlobalFrame:vec4<f32>,\\n  uOutputTexture:vec4<f32>,\\n};\\n\\nstruct MaskUniforms {\\n  uFilterMatrix:mat3x3<f32>,\\n  uMaskClamp:vec4<f32>,\\n  uAlpha:f32,\\n  uInverse:f32,\\n};\\n\\n@group(0) @binding(0) var<uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler : sampler;\\n\\n@group(1) @binding(0) var<uniform> filterUniforms : MaskUniforms;\\n@group(1) @binding(1) var uMaskTexture: texture_2d<f32>;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>,\\n    @location(1) filterUv : vec2<f32>,\\n};\\n\\nfn filterVertexPosition(aPosition:vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\nfn globalTextureCoord( aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return  (aPosition.xy / gfu.uGlobalFrame.zw) + (gfu.uGlobalFrame.xy / gfu.uGlobalFrame.zw);\\n}\\n\\nfn getFilterCoord(aPosition:vec2<f32> ) -> vec2<f32>\\n{\\n  return ( filterUniforms.uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\\n}\\n\\nfn getSize() -> vec2<f32>\\n{\\n  return gfu.uGlobalFrame.zw;\\n}\\n\\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition : vec2<f32>,\\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition),\\n   getFilterCoord(aPosition)\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @location(1) filterUv: vec2<f32>,\\n  @builtin(position) position: vec4<f32>\\n) -> @location(0) vec4<f32> {\\n\\n    var maskClamp = filterUniforms.uMaskClamp;\\n    var uAlpha = filterUniforms.uAlpha;\\n\\n    var clip = step(3.5,\\n      step(maskClamp.x, filterUv.x) +\\n      step(maskClamp.y, filterUv.y) +\\n      step(filterUv.x, maskClamp.z) +\\n      step(filterUv.y, maskClamp.w));\\n\\n    var mask = textureSample(uMaskTexture, uSampler, filterUv);\\n    var source = textureSample(uTexture, uSampler, uv);\\n    var alphaMul = 1.0 - uAlpha * (1.0 - mask.a);\\n\\n    var a: f32 = alphaMul * mask.r * uAlpha * clip;\\n\\n    if (filterUniforms.uInverse == 1.0) {\\n        a = 1.0 - a;\\n    }\\n\\n    return source * a;\\n}\\n\";\n\nexport { source as default };\n//# sourceMappingURL=mask.wgsl.mjs.map\n","import { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { GlProgram } from '../../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { UniformGroup } from '../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { TextureMatrix } from '../../rendering/renderers/shared/texture/TextureMatrix.mjs';\nimport { Filter } from '../Filter.mjs';\nimport fragment from './mask.frag.mjs';\nimport vertex from './mask.vert.mjs';\nimport source from './mask.wgsl.mjs';\n\n\"use strict\";\nclass MaskFilter extends Filter {\n  constructor(options) {\n    const { sprite, ...rest } = options;\n    const textureMatrix = new TextureMatrix(sprite.texture);\n    const filterUniforms = new UniformGroup({\n      uFilterMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uMaskClamp: { value: textureMatrix.uClampFrame, type: \"vec4<f32>\" },\n      uAlpha: { value: 1, type: \"f32\" },\n      uInverse: { value: options.inverse ? 1 : 0, type: \"f32\" }\n    });\n    const gpuProgram = GpuProgram.from({\n      vertex: {\n        source,\n        entryPoint: \"mainVertex\"\n      },\n      fragment: {\n        source,\n        entryPoint: \"mainFragment\"\n      }\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"mask-filter\"\n    });\n    super({\n      ...rest,\n      gpuProgram,\n      glProgram,\n      clipToViewport: false,\n      resources: {\n        filterUniforms,\n        uMaskTexture: sprite.texture.source\n      }\n    });\n    this.sprite = sprite;\n    this._textureMatrix = textureMatrix;\n  }\n  set inverse(value) {\n    this.resources.filterUniforms.uniforms.uInverse = value ? 1 : 0;\n  }\n  get inverse() {\n    return this.resources.filterUniforms.uniforms.uInverse === 1;\n  }\n  apply(filterManager, input, output, clearMode) {\n    this._textureMatrix.texture = this.sprite.texture;\n    filterManager.calculateSpriteMatrix(\n      this.resources.filterUniforms.uniforms.uFilterMatrix,\n      this.sprite\n    ).prepend(this._textureMatrix.mapCoord);\n    this.resources.uMaskTexture = this.sprite.texture.source;\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n}\n\nexport { MaskFilter };\n//# sourceMappingURL=MaskFilter.mjs.map\n","var vertex = \"in vec2 aPosition;\\n\\nout vec2 vTextureCoord;\\nout vec2 vMaskCoord;\\n\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\nuniform mat3 uFilterMatrix;\\n\\nvec4 filterVertexPosition(  vec2 aPosition )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n       \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord(  vec2 aPosition )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvec2 getFilterCoord( vec2 aPosition )\\n{\\n    return  ( uFilterMatrix * vec3( filterTextureCoord(aPosition), 1.0)  ).xy;\\n}   \\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition(aPosition);\\n    vTextureCoord = filterTextureCoord(aPosition);\\n    vMaskCoord = getFilterCoord(aPosition);\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=mask.vert.mjs.map\n","var fragment = \"in vec2 vMaskCoord;\\nin vec2 vTextureCoord;\\n\\nuniform sampler2D uTexture;\\nuniform sampler2D uMaskTexture;\\n\\nuniform float uAlpha;\\nuniform vec4 uMaskClamp;\\nuniform float uInverse;\\n\\nout vec4 finalColor;\\n\\nvoid main(void)\\n{\\n    float clip = step(3.5,\\n        step(uMaskClamp.x, vMaskCoord.x) +\\n        step(uMaskClamp.y, vMaskCoord.y) +\\n        step(vMaskCoord.x, uMaskClamp.z) +\\n        step(vMaskCoord.y, uMaskClamp.w));\\n\\n    // TODO look into why this is needed\\n    float npmAlpha = uAlpha;\\n    vec4 original = texture(uTexture, vTextureCoord);\\n    vec4 masky = texture(uMaskTexture, vMaskCoord);\\n    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);\\n\\n    float a = alphaMul * masky.r * npmAlpha * clip;\\n\\n    if (uInverse == 1.0) {\\n        a = 1.0 - a;\\n    }\\n\\n    finalColor = original * a;\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=mask.frag.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { FilterEffect } from '../../../filters/FilterEffect.mjs';\nimport { MaskFilter } from '../../../filters/mask/MaskFilter.mjs';\nimport { Bounds } from '../../../scene/container/bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds.mjs';\nimport { Sprite } from '../../../scene/sprite/Sprite.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { Texture } from '../../renderers/shared/texture/Texture.mjs';\nimport { TexturePool } from '../../renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../../renderers/types.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nclass AlphaMaskEffect extends FilterEffect {\n  constructor() {\n    super();\n    this.filters = [new MaskFilter({\n      sprite: new Sprite(Texture.EMPTY),\n      inverse: false,\n      resolution: \"inherit\",\n      antialias: \"inherit\"\n    })];\n  }\n  get sprite() {\n    return this.filters[0].sprite;\n  }\n  set sprite(value) {\n    this.filters[0].sprite = value;\n  }\n  get inverse() {\n    return this.filters[0].inverse;\n  }\n  set inverse(value) {\n    this.filters[0].inverse = value;\n  }\n}\nclass AlphaMaskPipe {\n  constructor(renderer) {\n    this._activeMaskStage = [];\n    this._renderer = renderer;\n  }\n  push(mask, maskedContainer, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"alphaMask\",\n      action: \"pushMaskBegin\",\n      mask,\n      inverse: maskedContainer._maskOptions.inverse,\n      canBundle: false,\n      maskedContainer\n    });\n    mask.inverse = maskedContainer._maskOptions.inverse;\n    if (mask.renderMaskToTexture) {\n      const maskContainer = mask.mask;\n      maskContainer.includeInBuild = true;\n      maskContainer.collectRenderables(\n        instructionSet,\n        renderer,\n        null\n      );\n      maskContainer.includeInBuild = false;\n    }\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"alphaMask\",\n      action: \"pushMaskEnd\",\n      mask,\n      maskedContainer,\n      inverse: maskedContainer._maskOptions.inverse,\n      canBundle: false\n    });\n  }\n  pop(mask, _maskedContainer, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"alphaMask\",\n      action: \"popMaskEnd\",\n      mask,\n      inverse: _maskedContainer._maskOptions.inverse,\n      canBundle: false\n    });\n  }\n  execute(instruction) {\n    const renderer = this._renderer;\n    const renderMask = instruction.mask.renderMaskToTexture;\n    if (instruction.action === \"pushMaskBegin\") {\n      const filterEffect = BigPool.get(AlphaMaskEffect);\n      filterEffect.inverse = instruction.inverse;\n      if (renderMask) {\n        instruction.mask.mask.measurable = true;\n        const bounds = getGlobalBounds(instruction.mask.mask, true, tempBounds);\n        instruction.mask.mask.measurable = false;\n        bounds.ceil();\n        const colorTextureSource = renderer.renderTarget.renderTarget.colorTexture.source;\n        const filterTexture = TexturePool.getOptimalTexture(\n          bounds.width,\n          bounds.height,\n          colorTextureSource._resolution,\n          colorTextureSource.antialias\n        );\n        renderer.renderTarget.push(filterTexture, true);\n        renderer.globalUniforms.push({\n          offset: bounds,\n          worldColor: 4294967295\n        });\n        const sprite = filterEffect.sprite;\n        sprite.texture = filterTexture;\n        sprite.worldTransform.tx = bounds.minX;\n        sprite.worldTransform.ty = bounds.minY;\n        this._activeMaskStage.push({\n          filterEffect,\n          maskedContainer: instruction.maskedContainer,\n          filterTexture\n        });\n      } else {\n        filterEffect.sprite = instruction.mask.mask;\n        this._activeMaskStage.push({\n          filterEffect,\n          maskedContainer: instruction.maskedContainer\n        });\n      }\n    } else if (instruction.action === \"pushMaskEnd\") {\n      const maskData = this._activeMaskStage[this._activeMaskStage.length - 1];\n      if (renderMask) {\n        if (renderer.type === RendererType.WEBGL) {\n          renderer.renderTarget.finishRenderPass();\n        }\n        renderer.renderTarget.pop();\n        renderer.globalUniforms.pop();\n      }\n      renderer.filter.push({\n        renderPipeId: \"filter\",\n        action: \"pushFilter\",\n        container: maskData.maskedContainer,\n        filterEffect: maskData.filterEffect,\n        canBundle: false\n      });\n    } else if (instruction.action === \"popMaskEnd\") {\n      renderer.filter.pop();\n      const maskData = this._activeMaskStage.pop();\n      if (renderMask) {\n        TexturePool.returnTexture(maskData.filterTexture);\n      }\n      BigPool.return(maskData.filterEffect);\n    }\n  }\n  destroy() {\n    this._renderer = null;\n    this._activeMaskStage = null;\n  }\n}\n/** @ignore */\nAlphaMaskPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"alphaMask\"\n};\n\nexport { AlphaMaskPipe };\n//# sourceMappingURL=AlphaMaskPipe.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ColorMaskPipe {\n  constructor(renderer) {\n    this._colorStack = [];\n    this._colorStackIndex = 0;\n    this._currentColor = 0;\n    this._renderer = renderer;\n  }\n  buildStart() {\n    this._colorStack[0] = 15;\n    this._colorStackIndex = 1;\n    this._currentColor = 15;\n  }\n  push(mask, _container, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    const colorStack = this._colorStack;\n    colorStack[this._colorStackIndex] = colorStack[this._colorStackIndex - 1] & mask.mask;\n    const currentColor = this._colorStack[this._colorStackIndex];\n    if (currentColor !== this._currentColor) {\n      this._currentColor = currentColor;\n      instructionSet.add({\n        renderPipeId: \"colorMask\",\n        colorMask: currentColor,\n        canBundle: false\n      });\n    }\n    this._colorStackIndex++;\n  }\n  pop(_mask, _container, instructionSet) {\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    const colorStack = this._colorStack;\n    this._colorStackIndex--;\n    const currentColor = colorStack[this._colorStackIndex - 1];\n    if (currentColor !== this._currentColor) {\n      this._currentColor = currentColor;\n      instructionSet.add({\n        renderPipeId: \"colorMask\",\n        colorMask: currentColor,\n        canBundle: false\n      });\n    }\n  }\n  execute(instruction) {\n    const renderer = this._renderer;\n    renderer.colorMask.setMask(instruction.colorMask);\n  }\n  destroy() {\n    this._renderer = null;\n    this._colorStack = null;\n  }\n}\n/** @ignore */\nColorMaskPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"colorMask\"\n};\n\nexport { ColorMaskPipe };\n//# sourceMappingURL=ColorMaskPipe.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { CLEAR } from '../../renderers/gl/const.mjs';\nimport { STENCIL_MODES } from '../../renderers/shared/state/const.mjs';\n\n\"use strict\";\nclass StencilMaskPipe {\n  constructor(renderer) {\n    // used when building and also when executing..\n    this._maskStackHash = {};\n    this._maskHash = /* @__PURE__ */ new WeakMap();\n    this._renderer = renderer;\n  }\n  push(mask, _container, instructionSet) {\n    var _a;\n    const effect = mask;\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    renderer.renderPipes.blendMode.setBlendMode(effect.mask, \"none\", instructionSet);\n    instructionSet.add({\n      renderPipeId: \"stencilMask\",\n      action: \"pushMaskBegin\",\n      mask,\n      inverse: _container._maskOptions.inverse,\n      canBundle: false\n    });\n    const maskContainer = effect.mask;\n    maskContainer.includeInBuild = true;\n    if (!this._maskHash.has(effect)) {\n      this._maskHash.set(effect, {\n        instructionsStart: 0,\n        instructionsLength: 0\n      });\n    }\n    const maskData = this._maskHash.get(effect);\n    maskData.instructionsStart = instructionSet.instructionSize;\n    maskContainer.collectRenderables(\n      instructionSet,\n      renderer,\n      null\n    );\n    maskContainer.includeInBuild = false;\n    renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"stencilMask\",\n      action: \"pushMaskEnd\",\n      mask,\n      inverse: _container._maskOptions.inverse,\n      canBundle: false\n    });\n    const instructionsLength = instructionSet.instructionSize - maskData.instructionsStart - 1;\n    maskData.instructionsLength = instructionsLength;\n    const renderTargetUid = renderer.renderTarget.renderTarget.uid;\n    (_a = this._maskStackHash)[renderTargetUid] ?? (_a[renderTargetUid] = 0);\n  }\n  pop(mask, _container, instructionSet) {\n    const effect = mask;\n    const renderer = this._renderer;\n    renderer.renderPipes.batch.break(instructionSet);\n    renderer.renderPipes.blendMode.setBlendMode(effect.mask, \"none\", instructionSet);\n    instructionSet.add({\n      renderPipeId: \"stencilMask\",\n      action: \"popMaskBegin\",\n      inverse: _container._maskOptions.inverse,\n      canBundle: false\n    });\n    const maskData = this._maskHash.get(mask);\n    for (let i = 0; i < maskData.instructionsLength; i++) {\n      instructionSet.instructions[instructionSet.instructionSize++] = instructionSet.instructions[maskData.instructionsStart++];\n    }\n    instructionSet.add({\n      renderPipeId: \"stencilMask\",\n      action: \"popMaskEnd\",\n      canBundle: false\n    });\n  }\n  execute(instruction) {\n    var _a;\n    const renderer = this._renderer;\n    const renderTargetUid = renderer.renderTarget.renderTarget.uid;\n    let maskStackIndex = (_a = this._maskStackHash)[renderTargetUid] ?? (_a[renderTargetUid] = 0);\n    if (instruction.action === \"pushMaskBegin\") {\n      renderer.renderTarget.ensureDepthStencil();\n      renderer.stencil.setStencilMode(STENCIL_MODES.RENDERING_MASK_ADD, maskStackIndex);\n      maskStackIndex++;\n      renderer.colorMask.setMask(0);\n    } else if (instruction.action === \"pushMaskEnd\") {\n      if (instruction.inverse) {\n        renderer.stencil.setStencilMode(STENCIL_MODES.INVERSE_MASK_ACTIVE, maskStackIndex);\n      } else {\n        renderer.stencil.setStencilMode(STENCIL_MODES.MASK_ACTIVE, maskStackIndex);\n      }\n      renderer.colorMask.setMask(15);\n    } else if (instruction.action === \"popMaskBegin\") {\n      renderer.colorMask.setMask(0);\n      if (maskStackIndex !== 0) {\n        renderer.stencil.setStencilMode(STENCIL_MODES.RENDERING_MASK_REMOVE, maskStackIndex);\n      } else {\n        renderer.renderTarget.clear(null, CLEAR.STENCIL);\n        renderer.stencil.setStencilMode(STENCIL_MODES.DISABLED, maskStackIndex);\n      }\n      maskStackIndex--;\n    } else if (instruction.action === \"popMaskEnd\") {\n      if (instruction.inverse) {\n        renderer.stencil.setStencilMode(STENCIL_MODES.INVERSE_MASK_ACTIVE, maskStackIndex);\n      } else {\n        renderer.stencil.setStencilMode(STENCIL_MODES.MASK_ACTIVE, maskStackIndex);\n      }\n      renderer.colorMask.setMask(15);\n    }\n    this._maskStackHash[renderTargetUid] = maskStackIndex;\n  }\n  destroy() {\n    this._renderer = null;\n    this._maskStackHash = null;\n    this._maskHash = null;\n  }\n}\nStencilMaskPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"stencilMask\"\n};\n\nexport { StencilMaskPipe };\n//# sourceMappingURL=StencilMaskPipe.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nconst _BackgroundSystem = class _BackgroundSystem {\n  constructor() {\n    this.clearBeforeRender = true;\n    this._backgroundColor = new Color(0);\n    this.color = this._backgroundColor;\n    this.alpha = 1;\n  }\n  /**\n   * initiates the background system\n   * @param options - the options for the background colors\n   */\n  init(options) {\n    options = { ..._BackgroundSystem.defaultOptions, ...options };\n    this.clearBeforeRender = options.clearBeforeRender;\n    this.color = options.background || options.backgroundColor || this._backgroundColor;\n    this.alpha = options.backgroundAlpha;\n    this._backgroundColor.setAlpha(options.backgroundAlpha);\n  }\n  /** The background color to fill if not transparent */\n  get color() {\n    return this._backgroundColor;\n  }\n  set color(value) {\n    const incoming = Color.shared.setValue(value);\n    if (incoming.alpha < 1 && this._backgroundColor.alpha === 1) {\n      warn(\n        \"Cannot set a transparent background on an opaque canvas. To enable transparency, set backgroundAlpha < 1 when initializing your Application.\"\n      );\n    }\n    this._backgroundColor.setValue(value);\n  }\n  /** The background color alpha. Setting this to 0 will make the canvas transparent. */\n  get alpha() {\n    return this._backgroundColor.alpha;\n  }\n  set alpha(value) {\n    this._backgroundColor.setAlpha(value);\n  }\n  /** The background color as an [R, G, B, A] array. */\n  get colorRgba() {\n    return this._backgroundColor.toArray();\n  }\n  /**\n   * destroys the background system\n   * @internal\n   */\n  destroy() {\n  }\n};\n/** @ignore */\n_BackgroundSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"background\",\n  priority: 0\n};\n/** default options used by the system */\n_BackgroundSystem.defaultOptions = {\n  /**\n   * {@link WebGLOptions.backgroundAlpha}\n   * @default 1\n   */\n  backgroundAlpha: 1,\n  /**\n   * {@link WebGLOptions.backgroundColor}\n   * @default 0x000000\n   */\n  backgroundColor: 0,\n  /**\n   * {@link WebGLOptions.clearBeforeRender}\n   * @default true\n   */\n  clearBeforeRender: true\n};\nlet BackgroundSystem = _BackgroundSystem;\n\nexport { BackgroundSystem };\n//# sourceMappingURL=BackgroundSystem.mjs.map\n","import { extensions, ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { FilterEffect } from '../../../../filters/FilterEffect.mjs';\nimport { RenderGroup } from '../../../../scene/container/RenderGroup.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nconst BLEND_MODE_FILTERS = {};\nextensions.handle(ExtensionType.BlendMode, (value) => {\n  if (!value.name) {\n    throw new Error(\"BlendMode extension must have a name property\");\n  }\n  BLEND_MODE_FILTERS[value.name] = value.ref;\n}, (value) => {\n  delete BLEND_MODE_FILTERS[value.name];\n});\nclass BlendModePipe {\n  constructor(renderer) {\n    this._blendModeStack = [];\n    this._isAdvanced = false;\n    this._filterHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    this._renderer.runners.prerender.add(this);\n  }\n  prerender() {\n    this._activeBlendMode = \"normal\";\n    this._isAdvanced = false;\n  }\n  /**\n   * Push a blend mode onto the internal stack and apply it to the instruction set if needed.\n   * @param renderable - The renderable or {@link RenderGroup} associated with the change.\n   * @param blendMode - The blend mode to activate.\n   * @param instructionSet - The instruction set being built.\n   */\n  pushBlendMode(renderable, blendMode, instructionSet) {\n    this._blendModeStack.push(blendMode);\n    this.setBlendMode(renderable, blendMode, instructionSet);\n  }\n  /**\n   * Pop the last blend mode from the stack and apply the new top-of-stack mode.\n   * @param instructionSet - The instruction set being built.\n   */\n  popBlendMode(instructionSet) {\n    this._blendModeStack.pop();\n    const blendMode = this._blendModeStack[this._activeBlendMode.length - 1] ?? \"normal\";\n    this.setBlendMode(null, blendMode, instructionSet);\n  }\n  /**\n   * Ensure a blend mode switch is added to the instruction set when the mode changes.\n   * If an advanced blend mode is active, subsequent renderables will be collected so they can be\n   * rendered within a single filter pass.\n   * @param renderable - The renderable or {@link RenderGroup} to associate with the change, or null when unwinding.\n   * @param blendMode - The target blend mode.\n   * @param instructionSet - The instruction set being built.\n   */\n  setBlendMode(renderable, blendMode, instructionSet) {\n    const isRenderGroup = renderable instanceof RenderGroup;\n    if (this._activeBlendMode === blendMode) {\n      if (this._isAdvanced && renderable && !isRenderGroup) {\n        this._renderableList?.push(renderable);\n      }\n      return;\n    }\n    if (this._isAdvanced)\n      this._endAdvancedBlendMode(instructionSet);\n    this._activeBlendMode = blendMode;\n    if (!renderable)\n      return;\n    this._isAdvanced = !!BLEND_MODE_FILTERS[blendMode];\n    if (this._isAdvanced)\n      this._beginAdvancedBlendMode(renderable, instructionSet);\n  }\n  _beginAdvancedBlendMode(renderable, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    const blendMode = this._activeBlendMode;\n    if (!BLEND_MODE_FILTERS[blendMode]) {\n      warn(`Unable to assign BlendMode: '${blendMode}'. You may want to include: import 'pixi.js/advanced-blend-modes'`);\n      return;\n    }\n    const filterEffect = this._ensureFilterEffect(blendMode);\n    const isRenderGroup = renderable instanceof RenderGroup;\n    const instruction = {\n      renderPipeId: \"filter\",\n      action: \"pushFilter\",\n      filterEffect,\n      renderables: isRenderGroup ? null : [renderable],\n      container: isRenderGroup ? renderable.root : null,\n      canBundle: false\n    };\n    this._renderableList = instruction.renderables;\n    instructionSet.add(instruction);\n  }\n  _ensureFilterEffect(blendMode) {\n    let filterEffect = this._filterHash[blendMode];\n    if (!filterEffect) {\n      filterEffect = this._filterHash[blendMode] = new FilterEffect();\n      filterEffect.filters = [new BLEND_MODE_FILTERS[blendMode]()];\n    }\n    return filterEffect;\n  }\n  _endAdvancedBlendMode(instructionSet) {\n    this._isAdvanced = false;\n    this._renderableList = null;\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"filter\",\n      action: \"popFilter\",\n      canBundle: false\n    });\n  }\n  /**\n   * called when the instruction build process is starting this will reset internally to the default blend mode\n   * @internal\n   */\n  buildStart() {\n    this._isAdvanced = false;\n  }\n  /**\n   * called when the instruction build process is finished, ensuring that if there is an advanced blend mode\n   * active, we add the final render instructions added to the instruction set\n   * @param instructionSet - The instruction set we are adding to\n   * @internal\n   */\n  buildEnd(instructionSet) {\n    if (!this._isAdvanced)\n      return;\n    this._endAdvancedBlendMode(instructionSet);\n  }\n  /** @internal */\n  destroy() {\n    this._renderer = null;\n    this._renderableList = null;\n    for (const i in this._filterHash) {\n      this._filterHash[i].destroy();\n    }\n    this._filterHash = null;\n  }\n}\n/** @ignore */\nBlendModePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"blendMode\"\n};\n\nexport { BlendModePipe };\n//# sourceMappingURL=BlendModePipe.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { Texture } from '../texture/Texture.mjs';\n\n\"use strict\";\nconst imageTypes = {\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  webp: \"image/webp\"\n};\nconst _ExtractSystem = class _ExtractSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  _normalizeOptions(options, defaults = {}) {\n    if (options instanceof Container || options instanceof Texture) {\n      return {\n        target: options,\n        ...defaults\n      };\n    }\n    return {\n      ...defaults,\n      ...options\n    };\n  }\n  /**\n   * Creates an IImage from a display object or texture.\n   * @param options - Options for creating the image, or the target to extract\n   * @returns Promise that resolves with the generated IImage\n   * @example\n   * ```ts\n   * // Basic usage with a sprite\n   * const sprite = new Sprite(texture);\n   * const image = await renderer.extract.image(sprite);\n   * document.body.appendChild(image);\n   *\n   * // Advanced usage with options\n   * const image = await renderer.extract.image({\n   *     target: container,\n   *     format: 'webp',\n   *     quality: 0.8,\n   *     frame: new Rectangle(0, 0, 100, 100),\n   *     resolution: 2,\n   *     clearColor: '#ff0000',\n   *     antialias: true\n   * });\n   *\n   * // Extract directly from a texture\n   * const texture = Texture.from('myTexture.png');\n   * const image = await renderer.extract.image(texture);\n   * ```\n   * @see {@link ExtractImageOptions} For detailed options\n   * @see {@link ExtractSystem.base64} For base64 string output\n   * @see {@link ExtractSystem.canvas} For canvas output\n   * @see {@link ImageLike} For the image interface\n   * @category rendering\n   */\n  async image(options) {\n    const image = DOMAdapter.get().createImage();\n    image.src = await this.base64(options);\n    return image;\n  }\n  /**\n   * Converts the target into a base64 encoded string.\n   *\n   * This method works by first creating\n   * a canvas using `Extract.canvas` and then converting it to a base64 string.\n   * @param options - The options for creating the base64 string, or the target to extract\n   * @returns Promise that resolves with the base64 encoded string\n   * @example\n   * ```ts\n   * // Basic usage with a sprite\n   * const sprite = new Sprite(texture);\n   * const base64 = await renderer.extract.base64(sprite);\n   * console.log(base64); // data:image/png;base64,...\n   *\n   * // Advanced usage with options\n   * const base64 = await renderer.extract.base64({\n   *     target: container,\n   *     format: 'webp',\n   *     quality: 0.8,\n   *     frame: new Rectangle(0, 0, 100, 100),\n   *     resolution: 2\n   * });\n   * ```\n   * @throws Will throw an error if the platform doesn't support any of:\n   * - ICanvas.toDataURL\n   * - ICanvas.toBlob\n   * - ICanvas.convertToBlob\n   * @see {@link ExtractImageOptions} For detailed options\n   * @see {@link ExtractSystem.canvas} For canvas output\n   * @see {@link ExtractSystem.image} For HTMLImage output\n   * @category rendering\n   */\n  async base64(options) {\n    options = this._normalizeOptions(\n      options,\n      _ExtractSystem.defaultImageOptions\n    );\n    const { format, quality } = options;\n    const canvas = this.canvas(options);\n    if (canvas.toBlob !== void 0) {\n      return new Promise((resolve, reject) => {\n        canvas.toBlob((blob) => {\n          if (!blob) {\n            reject(new Error(\"ICanvas.toBlob failed!\"));\n            return;\n          }\n          const reader = new FileReader();\n          reader.onload = () => resolve(reader.result);\n          reader.onerror = reject;\n          reader.readAsDataURL(blob);\n        }, imageTypes[format], quality);\n      });\n    }\n    if (canvas.toDataURL !== void 0) {\n      return canvas.toDataURL(imageTypes[format], quality);\n    }\n    if (canvas.convertToBlob !== void 0) {\n      const blob = await canvas.convertToBlob({ type: imageTypes[format], quality });\n      return new Promise((resolve, reject) => {\n        const reader = new FileReader();\n        reader.onload = () => resolve(reader.result);\n        reader.onerror = reject;\n        reader.readAsDataURL(blob);\n      });\n    }\n    throw new Error(\"Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented\");\n  }\n  /**\n   * Creates a Canvas element, renders the target to it and returns it.\n   * This method is useful for creating static images or when you need direct canvas access.\n   * @param options - The options for creating the canvas, or the target to extract\n   * @returns A Canvas element with the texture rendered on\n   * @example\n   * ```ts\n   * // Basic canvas extraction from a sprite\n   * const sprite = new Sprite(texture);\n   * const canvas = renderer.extract.canvas(sprite);\n   * document.body.appendChild(canvas);\n   *\n   * // Extract with custom region\n   * const canvas = renderer.extract.canvas({\n   *     target: container,\n   *     frame: new Rectangle(0, 0, 100, 100)\n   * });\n   *\n   * // Extract with high resolution\n   * const canvas = renderer.extract.canvas({\n   *     target: sprite,\n   *     resolution: 2,\n   *     clearColor: '#ff0000'\n   * });\n   *\n   * // Extract directly from a texture\n   * const texture = Texture.from('myTexture.png');\n   * const canvas = renderer.extract.canvas(texture);\n   *\n   * // Extract with anti-aliasing\n   * const canvas = renderer.extract.canvas({\n   *     target: graphics,\n   *     antialias: true\n   * });\n   * ```\n   * @see {@link ExtractOptions} For detailed options\n   * @see {@link ExtractSystem.image} For HTMLImage output\n   * @see {@link ExtractSystem.pixels} For raw pixel data\n   * @category rendering\n   */\n  canvas(options) {\n    options = this._normalizeOptions(options);\n    const target = options.target;\n    const renderer = this._renderer;\n    if (target instanceof Texture) {\n      return renderer.texture.generateCanvas(target);\n    }\n    const texture = renderer.textureGenerator.generateTexture(options);\n    const canvas = renderer.texture.generateCanvas(texture);\n    texture.destroy(true);\n    return canvas;\n  }\n  /**\n   * Returns a one-dimensional array containing the pixel data of the entire texture in RGBA order,\n   * with integer values between 0 and 255 (inclusive).\n   * > [!NOE] The returned array is a flat Uint8Array where every 4 values represent RGBA\n   * @param options - The options for extracting the image, or the target to extract\n   * @returns One-dimensional Uint8Array containing the pixel data in RGBA format\n   * @example\n   * ```ts\n   * // Basic pixel extraction\n   * const sprite = new Sprite(texture);\n   * const pixels = renderer.extract.pixels(sprite);\n   * console.log(pixels[0], pixels[1], pixels[2], pixels[3]); // R,G,B,A values\n   *\n   * // Extract with custom region\n   * const pixels = renderer.extract.pixels({\n   *     target: sprite,\n   *     frame: new Rectangle(0, 0, 100, 100)\n   * });\n   *\n   * // Extract with high resolution\n   * const pixels = renderer.extract.pixels({\n   *     target: sprite,\n   *     resolution: 2\n   * });\n   * ```\n   * @see {@link ExtractOptions} For detailed options\n   * @see {@link ExtractSystem.canvas} For canvas output\n   * @see {@link ExtractSystem.image} For image output\n   * @category rendering\n   */\n  pixels(options) {\n    options = this._normalizeOptions(options);\n    const target = options.target;\n    const renderer = this._renderer;\n    const texture = target instanceof Texture ? target : renderer.textureGenerator.generateTexture(options);\n    const pixelInfo = renderer.texture.getPixels(texture);\n    if (target instanceof Container) {\n      texture.destroy(true);\n    }\n    return pixelInfo;\n  }\n  /**\n   * Creates a texture from a display object or existing texture.\n   *\n   * This is useful for creating\n   * reusable textures from rendered content or making copies of existing textures.\n   * > [!NOTE] The returned texture should be destroyed when no longer needed\n   * @param options - The options for creating the texture, or the target to extract\n   * @returns A new texture containing the extracted content\n   * @example\n   * ```ts\n   * // Basic texture extraction from a sprite\n   * const sprite = new Sprite(texture);\n   * const extractedTexture = renderer.extract.texture(sprite);\n   *\n   * // Extract with custom region\n   * const regionTexture = renderer.extract.texture({\n   *     target: container,\n   *     frame: new Rectangle(0, 0, 100, 100)\n   * });\n   *\n   * // Extract with high resolution\n   * const hiResTexture = renderer.extract.texture({\n   *     target: sprite,\n   *     resolution: 2,\n   *     clearColor: '#ff0000'\n   * });\n   *\n   * // Create a new sprite from extracted texture\n   * const newSprite = new Sprite(\n   *     renderer.extract.texture({\n   *         target: graphics,\n   *         antialias: true\n   *     })\n   * );\n   *\n   * // Clean up when done\n   * extractedTexture.destroy(true);\n   * ```\n   * @see {@link ExtractOptions} For detailed options\n   * @see {@link Texture} For texture management\n   * @see {@link GenerateTextureSystem} For texture generation\n   * @category rendering\n   */\n  texture(options) {\n    options = this._normalizeOptions(options);\n    if (options.target instanceof Texture)\n      return options.target;\n    return this._renderer.textureGenerator.generateTexture(options);\n  }\n  /**\n   * Extracts and downloads content from the renderer as an image file.\n   * This is a convenient way to save screenshots or export rendered content.\n   * > [!NOTE] The download will use PNG format regardless of the filename extension\n   * @param options - The options for downloading and extracting the image, or the target to extract\n   * @example\n   * ```ts\n   * // Basic download with default filename\n   * const sprite = new Sprite(texture);\n   * renderer.extract.download(sprite); // Downloads as 'image.png'\n   *\n   * // Download with custom filename\n   * renderer.extract.download({\n   *     target: sprite,\n   *     filename: 'screenshot.png'\n   * });\n   *\n   * // Download with custom region\n   * renderer.extract.download({\n   *     target: container,\n   *     filename: 'region.png',\n   *     frame: new Rectangle(0, 0, 100, 100)\n   * });\n   *\n   * // Download with high resolution and background\n   * renderer.extract.download({\n   *     target: stage,\n   *     filename: 'hd-screenshot.png',\n   *     resolution: 2,\n   *     clearColor: '#ff0000'\n   * });\n   *\n   * // Download with anti-aliasing\n   * renderer.extract.download({\n   *     target: graphics,\n   *     filename: 'smooth.png',\n   *     antialias: true\n   * });\n   * ```\n   * @see {@link ExtractDownloadOptions} For detailed options\n   * @see {@link ExtractSystem.image} For creating images without download\n   * @see {@link ExtractSystem.canvas} For canvas output\n   * @category rendering\n   */\n  download(options) {\n    options = this._normalizeOptions(options);\n    const canvas = this.canvas(options);\n    const link = document.createElement(\"a\");\n    link.download = options.filename ?? \"image.png\";\n    link.href = canvas.toDataURL(\"image/png\");\n    document.body.appendChild(link);\n    link.click();\n    document.body.removeChild(link);\n  }\n  /**\n   * Logs the target to the console as an image. This is a useful way to debug what's happening in the renderer.\n   * The image will be displayed in the browser's console using CSS background images.\n   * @param options - The options for logging the image, or the target to log\n   * @param options.width - The width of the logged image preview in the console (in pixels)\n   * @example\n   * ```ts\n   * // Basic usage\n   * const sprite = new Sprite(texture);\n   * renderer.extract.log(sprite);\n   * ```\n   * @see {@link ExtractSystem.canvas} For getting raw canvas output\n   * @see {@link ExtractSystem.pixels} For raw pixel data\n   * @category rendering\n   * @advanced\n   */\n  log(options) {\n    const width = options.width ?? 200;\n    options = this._normalizeOptions(options);\n    const canvas = this.canvas(options);\n    const base64 = canvas.toDataURL();\n    console.log(`[Pixi Texture] ${canvas.width}px ${canvas.height}px`);\n    const style = [\n      \"font-size: 1px;\",\n      `padding: ${width}px ${300}px;`,\n      `background: url(${base64}) no-repeat;`,\n      \"background-size: contain;\"\n    ].join(\" \");\n    console.log(\"%c \", style);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n};\n/** @ignore */\n_ExtractSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"extract\"\n};\n/**\n * Default options for image extraction.\n * @example\n * ```ts\n * // Customize default options\n * ExtractSystem.defaultImageOptions.format = 'webp';\n * ExtractSystem.defaultImageOptions.quality = 0.8;\n *\n * // Use defaults\n * const image = await renderer.extract.image(sprite);\n * ```\n */\n_ExtractSystem.defaultImageOptions = {\n  format: \"png\",\n  quality: 1\n};\nlet ExtractSystem = _ExtractSystem;\n\nexport { ExtractSystem };\n//# sourceMappingURL=ExtractSystem.mjs.map\n","import { TextureSource } from './sources/TextureSource.mjs';\nimport { Texture } from './Texture.mjs';\n\n\"use strict\";\nclass RenderTexture extends Texture {\n  static create(options) {\n    return new RenderTexture({\n      source: new TextureSource(options)\n    });\n  }\n  /**\n   * Resizes the render texture.\n   * @param width - The new width of the render texture.\n   * @param height - The new height of the render texture.\n   * @param resolution - The new resolution of the render texture.\n   * @returns This texture.\n   */\n  resize(width, height, resolution) {\n    this.source.resize(width, height, resolution);\n    return this;\n  }\n}\n\nexport { RenderTexture };\n//# sourceMappingURL=RenderTexture.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds.mjs';\nimport { getLocalBounds } from '../../../../scene/container/bounds/getLocalBounds.mjs';\nimport { Container } from '../../../../scene/container/Container.mjs';\nimport { RenderTexture } from '../texture/RenderTexture.mjs';\n\n\"use strict\";\nconst tempRect = new Rectangle();\nconst tempBounds = new Bounds();\nconst noColor = [0, 0, 0, 0];\nclass GenerateTextureSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  /**\n   * Creates a texture from a display object that can be used for creating sprites and other textures.\n   * This is particularly useful for optimizing performance when a complex container needs to be reused.\n   * @param options - Generate texture options or a container to convert to texture\n   * @returns A new RenderTexture containing the rendered display object\n   * @example\n   * ```ts\n   * // Basic usage with a container\n   * const container = new Container();\n   * container.addChild(\n   *     new Graphics()\n   *         .circle(0, 0, 50)\n   *         .fill('red')\n   * );\n   *\n   * const texture = renderer.textureGenerator.generateTexture(container);\n   *\n   * // Advanced usage with options\n   * const texture = renderer.textureGenerator.generateTexture({\n   *     target: container,\n   *     frame: new Rectangle(0, 0, 100, 100), // Specific region\n   *     resolution: 2,                        // High DPI\n   *     clearColor: '#ff0000',               // Red background\n   *     antialias: true                      // Smooth edges\n   * });\n   *\n   * // Create a sprite from the generated texture\n   * const sprite = new Sprite(texture);\n   *\n   * // Clean up when done\n   * texture.destroy(true);\n   * ```\n   * @see {@link GenerateTextureOptions} For detailed texture generation options\n   * @see {@link RenderTexture} For the type of texture created\n   * @category rendering\n   */\n  generateTexture(options) {\n    if (options instanceof Container) {\n      options = {\n        target: options,\n        frame: void 0,\n        textureSourceOptions: {},\n        resolution: void 0\n      };\n    }\n    const resolution = options.resolution || this._renderer.resolution;\n    const antialias = options.antialias || this._renderer.view.antialias;\n    const container = options.target;\n    let clearColor = options.clearColor;\n    if (clearColor) {\n      const isRGBAArray = Array.isArray(clearColor) && clearColor.length === 4;\n      clearColor = isRGBAArray ? clearColor : Color.shared.setValue(clearColor).toArray();\n    } else {\n      clearColor = noColor;\n    }\n    const region = options.frame?.copyTo(tempRect) || getLocalBounds(container, tempBounds).rectangle;\n    region.width = Math.max(region.width, 1 / resolution) | 0;\n    region.height = Math.max(region.height, 1 / resolution) | 0;\n    const target = RenderTexture.create({\n      ...options.textureSourceOptions,\n      width: region.width,\n      height: region.height,\n      resolution,\n      antialias\n    });\n    const transform = Matrix.shared.translate(-region.x, -region.y);\n    this._renderer.render({\n      container,\n      transform,\n      target,\n      clearColor\n    });\n    target.source.updateMipmaps();\n    return target;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGenerateTextureSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"textureGenerator\"\n};\n\nexport { GenerateTextureSystem };\n//# sourceMappingURL=GenerateTextureSystem.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../../maths/point/Point.mjs';\nimport { color32BitToUniform } from '../../../../scene/graphics/gpu/colorToUniform.mjs';\nimport { BindGroup } from '../../gpu/shader/BindGroup.mjs';\nimport { RendererType } from '../../types.mjs';\nimport { UniformGroup } from '../shader/UniformGroup.mjs';\n\n\"use strict\";\nclass GlobalUniformSystem {\n  constructor(renderer) {\n    this._stackIndex = 0;\n    this._globalUniformDataStack = [];\n    this._uniformsPool = [];\n    this._activeUniforms = [];\n    this._bindGroupPool = [];\n    this._activeBindGroups = [];\n    this._renderer = renderer;\n  }\n  reset() {\n    this._stackIndex = 0;\n    for (let i = 0; i < this._activeUniforms.length; i++) {\n      this._uniformsPool.push(this._activeUniforms[i]);\n    }\n    for (let i = 0; i < this._activeBindGroups.length; i++) {\n      this._bindGroupPool.push(this._activeBindGroups[i]);\n    }\n    this._activeUniforms.length = 0;\n    this._activeBindGroups.length = 0;\n  }\n  start(options) {\n    this.reset();\n    this.push(options);\n  }\n  bind({\n    size,\n    projectionMatrix,\n    worldTransformMatrix,\n    worldColor,\n    offset\n  }) {\n    const renderTarget = this._renderer.renderTarget.renderTarget;\n    const currentGlobalUniformData = this._stackIndex ? this._globalUniformDataStack[this._stackIndex - 1] : {\n      projectionData: renderTarget,\n      worldTransformMatrix: new Matrix(),\n      worldColor: 4294967295,\n      offset: new Point()\n    };\n    const globalUniformData = {\n      projectionMatrix: projectionMatrix || this._renderer.renderTarget.projectionMatrix,\n      resolution: size || renderTarget.size,\n      worldTransformMatrix: worldTransformMatrix || currentGlobalUniformData.worldTransformMatrix,\n      worldColor: worldColor || currentGlobalUniformData.worldColor,\n      offset: offset || currentGlobalUniformData.offset,\n      bindGroup: null\n    };\n    const uniformGroup = this._uniformsPool.pop() || this._createUniforms();\n    this._activeUniforms.push(uniformGroup);\n    const uniforms = uniformGroup.uniforms;\n    uniforms.uProjectionMatrix = globalUniformData.projectionMatrix;\n    uniforms.uResolution = globalUniformData.resolution;\n    uniforms.uWorldTransformMatrix.copyFrom(globalUniformData.worldTransformMatrix);\n    uniforms.uWorldTransformMatrix.tx -= globalUniformData.offset.x;\n    uniforms.uWorldTransformMatrix.ty -= globalUniformData.offset.y;\n    color32BitToUniform(\n      globalUniformData.worldColor,\n      uniforms.uWorldColorAlpha,\n      0\n    );\n    uniformGroup.update();\n    let bindGroup;\n    if (this._renderer.renderPipes.uniformBatch) {\n      bindGroup = this._renderer.renderPipes.uniformBatch.getUniformBindGroup(uniformGroup, false);\n    } else {\n      bindGroup = this._bindGroupPool.pop() || new BindGroup();\n      this._activeBindGroups.push(bindGroup);\n      bindGroup.setResource(uniformGroup, 0);\n    }\n    globalUniformData.bindGroup = bindGroup;\n    this._currentGlobalUniformData = globalUniformData;\n  }\n  push(options) {\n    this.bind(options);\n    this._globalUniformDataStack[this._stackIndex++] = this._currentGlobalUniformData;\n  }\n  pop() {\n    this._currentGlobalUniformData = this._globalUniformDataStack[--this._stackIndex - 1];\n    if (this._renderer.type === RendererType.WEBGL) {\n      this._currentGlobalUniformData.bindGroup.resources[0].update();\n    }\n  }\n  get bindGroup() {\n    return this._currentGlobalUniformData.bindGroup;\n  }\n  get globalUniformData() {\n    return this._currentGlobalUniformData;\n  }\n  get uniformGroup() {\n    return this._currentGlobalUniformData.bindGroup.resources[0];\n  }\n  _createUniforms() {\n    const globalUniforms = new UniformGroup({\n      uProjectionMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uWorldTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      // TODO - someone smart - set this to be a unorm8x4 rather than a vec4<f32>\n      uWorldColorAlpha: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uResolution: { value: [0, 0], type: \"vec2<f32>\" }\n    }, {\n      isStatic: true\n    });\n    return globalUniforms;\n  }\n  destroy() {\n    this._renderer = null;\n    this._globalUniformDataStack.length = 0;\n    this._uniformsPool.length = 0;\n    this._activeUniforms.length = 0;\n    this._bindGroupPool.length = 0;\n    this._activeBindGroups.length = 0;\n    this._currentGlobalUniformData = null;\n  }\n}\n/** @ignore */\nGlobalUniformSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"globalUniforms\"\n};\n\nexport { GlobalUniformSystem };\n//# sourceMappingURL=GlobalUniformSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Ticker } from '../../../ticker/Ticker.mjs';\n\n\"use strict\";\nlet uid = 1;\nclass SchedulerSystem {\n  constructor() {\n    this._tasks = [];\n    /** a small off set to apply to the repeat schedules. This is just to make sure they run at slightly different times */\n    this._offset = 0;\n  }\n  /** Initializes the scheduler system and starts the ticker. */\n  init() {\n    Ticker.system.add(this._update, this);\n  }\n  /**\n   * Schedules a repeating task.\n   * @param func - The function to execute.\n   * @param duration - The interval duration in milliseconds.\n   * @param useOffset - this will spread out tasks so that they do not all run at the same time\n   * @returns The unique identifier for the scheduled task.\n   */\n  repeat(func, duration, useOffset = true) {\n    const id = uid++;\n    let offset = 0;\n    if (useOffset) {\n      this._offset += 1e3;\n      offset = this._offset;\n    }\n    this._tasks.push({\n      func,\n      duration,\n      start: performance.now(),\n      offset,\n      last: performance.now(),\n      repeat: true,\n      id\n    });\n    return id;\n  }\n  /**\n   * Cancels a scheduled task.\n   * @param id - The unique identifier of the task to cancel.\n   */\n  cancel(id) {\n    for (let i = 0; i < this._tasks.length; i++) {\n      if (this._tasks[i].id === id) {\n        this._tasks.splice(i, 1);\n        return;\n      }\n    }\n  }\n  /**\n   * Updates and executes the scheduled tasks.\n   * @private\n   */\n  _update() {\n    const now = performance.now();\n    for (let i = 0; i < this._tasks.length; i++) {\n      const task = this._tasks[i];\n      if (now - task.offset - task.last >= task.duration) {\n        const elapsed = now - task.start;\n        task.func(elapsed);\n        task.last = now;\n      }\n    }\n  }\n  /**\n   * Destroys the scheduler system and removes all tasks.\n   * @internal\n   */\n  destroy() {\n    Ticker.system.remove(this._update, this);\n    this._tasks.length = 0;\n  }\n}\n/** @ignore */\nSchedulerSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"scheduler\",\n  priority: 0\n};\n\nexport { SchedulerSystem };\n//# sourceMappingURL=SchedulerSystem.mjs.map\n","import { DOMAdapter } from '../environment/adapter.mjs';\nimport { VERSION } from './const.mjs';\n\n\"use strict\";\nlet saidHello = false;\nfunction sayHello(type) {\n  if (saidHello) {\n    return;\n  }\n  if (DOMAdapter.get().getNavigator().userAgent.toLowerCase().indexOf(\"chrome\") > -1) {\n    const args = [\n      `%c  %c  %c  %c  %c PixiJS %c v${VERSION} (${type}) http://www.pixijs.com/\n\n`,\n      \"background: #E72264; padding:5px 0;\",\n      \"background: #6CA2EA; padding:5px 0;\",\n      \"background: #B5D33D; padding:5px 0;\",\n      \"background: #FED23F; padding:5px 0;\",\n      \"color: #FFFFFF; background: #E72264; padding:5px 0;\",\n      \"color: #E72264; background: #FFFFFF; padding:5px 0;\"\n    ];\n    globalThis.console.log(...args);\n  } else if (globalThis.console) {\n    globalThis.console.log(`PixiJS ${VERSION} - ${type} - http://www.pixijs.com/`);\n  }\n  saidHello = true;\n}\n\nexport { sayHello };\n//# sourceMappingURL=sayHello.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { sayHello } from '../../../../utils/sayHello.mjs';\nimport { RendererType } from '../../types.mjs';\n\n\"use strict\";\nclass HelloSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  /**\n   * It all starts here! This initiates every system, passing in the options for any system by name.\n   * @param options - the config for the renderer and all its systems\n   */\n  init(options) {\n    if (options.hello) {\n      let name = this._renderer.name;\n      if (this._renderer.type === RendererType.WEBGL) {\n        name += ` ${this._renderer.context.webGLVersion}`;\n      }\n      sayHello(name);\n    }\n  }\n}\n/** @ignore */\nHelloSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"hello\",\n  priority: -2\n};\n/** The default options for the system. */\nHelloSystem.defaultOptions = {\n  /** {@link WebGLOptions.hello} */\n  hello: false\n};\n\nexport { HelloSystem };\n//# sourceMappingURL=HelloSystem.mjs.map\n","\"use strict\";\nfunction cleanHash(hash) {\n  let clean = false;\n  for (const i in hash) {\n    if (hash[i] == void 0) {\n      clean = true;\n      break;\n    }\n  }\n  if (!clean)\n    return hash;\n  const cleanHash2 = /* @__PURE__ */ Object.create(null);\n  for (const i in hash) {\n    const value = hash[i];\n    if (value) {\n      cleanHash2[i] = value;\n    }\n  }\n  return cleanHash2;\n}\nfunction cleanArray(arr) {\n  let offset = 0;\n  for (let i = 0; i < arr.length; i++) {\n    if (arr[i] == void 0) {\n      offset++;\n    } else {\n      arr[i - offset] = arr[i];\n    }\n  }\n  arr.length -= offset;\n  return arr;\n}\n\nexport { cleanArray, cleanHash };\n//# sourceMappingURL=clean.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { cleanHash, cleanArray } from '../../../../utils/data/clean.mjs';\n\n\"use strict\";\nlet renderableGCTick = 0;\nconst _RenderableGCSystem = class _RenderableGCSystem {\n  /**\n   * Creates a new RenderableGCSystem instance.\n   * @param renderer - The renderer this garbage collection system works for\n   */\n  constructor(renderer) {\n    /** Array of renderables being tracked for garbage collection */\n    this._managedRenderables = [];\n    /** Array of hash objects being tracked for cleanup */\n    this._managedHashes = [];\n    /** Array of arrays being tracked for cleanup */\n    this._managedArrays = [];\n    this._renderer = renderer;\n  }\n  /**\n   * Initializes the garbage collection system with the provided options.\n   * @param options - Configuration options for the renderer\n   */\n  init(options) {\n    options = { ..._RenderableGCSystem.defaultOptions, ...options };\n    this.maxUnusedTime = options.renderableGCMaxUnusedTime;\n    this._frequency = options.renderableGCFrequency;\n    this.enabled = options.renderableGCActive;\n  }\n  /**\n   * Gets whether the garbage collection system is currently enabled.\n   * @returns True if GC is enabled, false otherwise\n   */\n  get enabled() {\n    return !!this._handler;\n  }\n  /**\n   * Enables or disables the garbage collection system.\n   * When enabled, schedules periodic cleanup of resources.\n   * When disabled, cancels all scheduled cleanups.\n   */\n  set enabled(value) {\n    if (this.enabled === value)\n      return;\n    if (value) {\n      this._handler = this._renderer.scheduler.repeat(\n        () => this.run(),\n        this._frequency,\n        false\n      );\n      this._hashHandler = this._renderer.scheduler.repeat(\n        () => {\n          for (const hash of this._managedHashes) {\n            hash.context[hash.hash] = cleanHash(hash.context[hash.hash]);\n          }\n        },\n        this._frequency\n      );\n      this._arrayHandler = this._renderer.scheduler.repeat(\n        () => {\n          for (const array of this._managedArrays) {\n            cleanArray(array.context[array.hash]);\n          }\n        },\n        this._frequency\n      );\n    } else {\n      this._renderer.scheduler.cancel(this._handler);\n      this._renderer.scheduler.cancel(this._hashHandler);\n      this._renderer.scheduler.cancel(this._arrayHandler);\n    }\n  }\n  /**\n   * Adds a hash table to be managed by the garbage collector.\n   * @param context - The object containing the hash table\n   * @param hash - The property name of the hash table\n   */\n  addManagedHash(context, hash) {\n    this._managedHashes.push({ context, hash });\n  }\n  /**\n   * Adds an array to be managed by the garbage collector.\n   * @param context - The object containing the array\n   * @param hash - The property name of the array\n   */\n  addManagedArray(context, hash) {\n    this._managedArrays.push({ context, hash });\n  }\n  /**\n   * Updates the GC timestamp and tracking before rendering.\n   * @param options - The render options\n   * @param options.container - The container to render\n   */\n  prerender({\n    container\n  }) {\n    this._now = performance.now();\n    container.renderGroup.gcTick = renderableGCTick++;\n    this._updateInstructionGCTick(container.renderGroup, container.renderGroup.gcTick);\n  }\n  /**\n   * Starts tracking a renderable for garbage collection.\n   * @param renderable - The renderable to track\n   */\n  addRenderable(renderable) {\n    if (!this.enabled)\n      return;\n    if (renderable._lastUsed === -1) {\n      this._managedRenderables.push(renderable);\n      renderable.once(\"destroyed\", this._removeRenderable, this);\n    }\n    renderable._lastUsed = this._now;\n  }\n  /**\n   * Performs garbage collection by cleaning up unused renderables.\n   * Removes renderables that haven't been used for longer than maxUnusedTime.\n   */\n  run() {\n    const now = this._now;\n    const managedRenderables = this._managedRenderables;\n    const renderPipes = this._renderer.renderPipes;\n    let offset = 0;\n    for (let i = 0; i < managedRenderables.length; i++) {\n      const renderable = managedRenderables[i];\n      if (renderable === null) {\n        offset++;\n        continue;\n      }\n      const renderGroup = renderable.renderGroup ?? renderable.parentRenderGroup;\n      const currentTick = renderGroup?.instructionSet?.gcTick ?? -1;\n      if ((renderGroup?.gcTick ?? 0) === currentTick) {\n        renderable._lastUsed = now;\n      }\n      if (now - renderable._lastUsed > this.maxUnusedTime) {\n        if (!renderable.destroyed) {\n          const rp = renderPipes;\n          if (renderGroup)\n            renderGroup.structureDidChange = true;\n          rp[renderable.renderPipeId].destroyRenderable(renderable);\n        }\n        renderable._lastUsed = -1;\n        offset++;\n        renderable.off(\"destroyed\", this._removeRenderable, this);\n      } else {\n        managedRenderables[i - offset] = renderable;\n      }\n    }\n    managedRenderables.length -= offset;\n  }\n  /** Cleans up the garbage collection system. Disables GC and removes all tracked resources. */\n  destroy() {\n    this.enabled = false;\n    this._renderer = null;\n    this._managedRenderables.length = 0;\n    this._managedHashes.length = 0;\n    this._managedArrays.length = 0;\n  }\n  /**\n   * Removes a renderable from being tracked when it's destroyed.\n   * @param renderable - The renderable to stop tracking\n   */\n  _removeRenderable(renderable) {\n    const index = this._managedRenderables.indexOf(renderable);\n    if (index >= 0) {\n      renderable.off(\"destroyed\", this._removeRenderable, this);\n      this._managedRenderables[index] = null;\n    }\n  }\n  /**\n   * Updates the GC tick counter for a render group and its children.\n   * @param renderGroup - The render group to update\n   * @param gcTick - The new tick value\n   */\n  _updateInstructionGCTick(renderGroup, gcTick) {\n    renderGroup.instructionSet.gcTick = gcTick;\n    for (const child of renderGroup.renderGroupChildren) {\n      this._updateInstructionGCTick(child, gcTick);\n    }\n  }\n};\n/**\n * Extension metadata for registering this system with the renderer.\n * @ignore\n */\n_RenderableGCSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"renderableGC\",\n  priority: 0\n};\n/**\n * Default configuration options for the garbage collection system.\n * These can be overridden when initializing the renderer.\n */\n_RenderableGCSystem.defaultOptions = {\n  /** Enable/disable the garbage collector */\n  renderableGCActive: true,\n  /** Time in ms before an unused resource is collected (default 1 minute) */\n  renderableGCMaxUnusedTime: 6e4,\n  /** How often to run garbage collection in ms (default 30 seconds) */\n  renderableGCFrequency: 3e4\n};\nlet RenderableGCSystem = _RenderableGCSystem;\n\nexport { RenderableGCSystem };\n//# sourceMappingURL=RenderableGCSystem.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst _TextureGCSystem = class _TextureGCSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    this._renderer = renderer;\n    this.count = 0;\n    this.checkCount = 0;\n  }\n  init(options) {\n    options = { ..._TextureGCSystem.defaultOptions, ...options };\n    this.checkCountMax = options.textureGCCheckCountMax;\n    this.maxIdle = options.textureGCAMaxIdle ?? options.textureGCMaxIdle;\n    this.active = options.textureGCActive;\n  }\n  /**\n   * Checks to see when the last time a texture was used.\n   * If the texture has not been used for a specified amount of time, it will be removed from the GPU.\n   */\n  postrender() {\n    if (!this._renderer.renderingToScreen) {\n      return;\n    }\n    this.count++;\n    if (!this.active)\n      return;\n    this.checkCount++;\n    if (this.checkCount > this.checkCountMax) {\n      this.checkCount = 0;\n      this.run();\n    }\n  }\n  /**\n   * Checks to see when the last time a texture was used.\n   * If the texture has not been used for a specified amount of time, it will be removed from the GPU.\n   */\n  run() {\n    const managedTextures = this._renderer.texture.managedTextures;\n    for (let i = 0; i < managedTextures.length; i++) {\n      const texture = managedTextures[i];\n      if (texture.autoGarbageCollect && texture.resource && texture._touched > -1 && this.count - texture._touched > this.maxIdle) {\n        texture._touched = -1;\n        texture.unload();\n      }\n    }\n  }\n  destroy() {\n    this._renderer = null;\n  }\n};\n/** @ignore */\n_TextureGCSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"textureGC\"\n};\n/** default options for the TextureGCSystem */\n_TextureGCSystem.defaultOptions = {\n  /**\n   * If set to true, this will enable the garbage collector on the GPU.\n   * @default true\n   */\n  textureGCActive: true,\n  /**\n   * @deprecated since 8.3.0\n   * @see {@link TextureGCSystemOptions.textureGCMaxIdle}\n   */\n  textureGCAMaxIdle: null,\n  /**\n   * The maximum idle frames before a texture is destroyed by garbage collection.\n   * @default 60 * 60\n   */\n  textureGCMaxIdle: 60 * 60,\n  /**\n   * Frames between two garbage collections.\n   * @default 600\n   */\n  textureGCCheckCountMax: 600\n};\nlet TextureGCSystem = _TextureGCSystem;\n\nexport { TextureGCSystem };\n//# sourceMappingURL=TextureGCSystem.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { RenderTarget } from '../renderTarget/RenderTarget.mjs';\nimport { getCanvasTexture } from '../texture/utils/getCanvasTexture.mjs';\n\n\"use strict\";\nconst _ViewSystem = class _ViewSystem {\n  /**\n   * Whether CSS dimensions of canvas view should be resized to screen dimensions automatically.\n   * This is only supported for HTMLCanvasElement and will be ignored if the canvas is an OffscreenCanvas.\n   * @type {boolean}\n   */\n  get autoDensity() {\n    return this.texture.source.autoDensity;\n  }\n  set autoDensity(value) {\n    this.texture.source.autoDensity = value;\n  }\n  /** The resolution / device pixel ratio of the renderer. */\n  get resolution() {\n    return this.texture.source._resolution;\n  }\n  set resolution(value) {\n    this.texture.source.resize(\n      this.texture.source.width,\n      this.texture.source.height,\n      value\n    );\n  }\n  /**\n   * initiates the view system\n   * @param options - the options for the view\n   */\n  init(options) {\n    options = {\n      ..._ViewSystem.defaultOptions,\n      ...options\n    };\n    if (options.view) {\n      deprecation(v8_0_0, \"ViewSystem.view has been renamed to ViewSystem.canvas\");\n      options.canvas = options.view;\n    }\n    this.screen = new Rectangle(0, 0, options.width, options.height);\n    this.canvas = options.canvas || DOMAdapter.get().createCanvas();\n    this.antialias = !!options.antialias;\n    this.texture = getCanvasTexture(this.canvas, options);\n    this.renderTarget = new RenderTarget({\n      colorTextures: [this.texture],\n      depth: !!options.depth,\n      isRoot: true\n    });\n    this.texture.source.transparent = options.backgroundAlpha < 1;\n    this.resolution = options.resolution;\n  }\n  /**\n   * Resizes the screen and canvas to the specified dimensions.\n   * @param desiredScreenWidth - The new width of the screen.\n   * @param desiredScreenHeight - The new height of the screen.\n   * @param resolution\n   */\n  resize(desiredScreenWidth, desiredScreenHeight, resolution) {\n    this.texture.source.resize(desiredScreenWidth, desiredScreenHeight, resolution);\n    this.screen.width = this.texture.frame.width;\n    this.screen.height = this.texture.frame.height;\n  }\n  /**\n   * Destroys this System and optionally removes the canvas from the dom.\n   * @param {options | false} options - The options for destroying the view, or \"false\".\n   * @example\n   * viewSystem.destroy();\n   * viewSystem.destroy(true);\n   * viewSystem.destroy({ removeView: true });\n   */\n  destroy(options = false) {\n    const removeView = typeof options === \"boolean\" ? options : !!options?.removeView;\n    if (removeView && this.canvas.parentNode) {\n      this.canvas.parentNode.removeChild(this.canvas);\n    }\n    this.texture.destroy();\n  }\n};\n/** @ignore */\n_ViewSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"view\",\n  priority: 0\n};\n/** The default options for the view system. */\n_ViewSystem.defaultOptions = {\n  /**\n   * {@link WebGLOptions.width}\n   * @default 800\n   */\n  width: 800,\n  /**\n   * {@link WebGLOptions.height}\n   * @default 600\n   */\n  height: 600,\n  /**\n   * {@link WebGLOptions.autoDensity}\n   * @default false\n   */\n  autoDensity: false,\n  /**\n   * {@link WebGLOptions.antialias}\n   * @default false\n   */\n  antialias: false\n};\nlet ViewSystem = _ViewSystem;\n\nexport { ViewSystem };\n//# sourceMappingURL=ViewSystem.mjs.map\n","import { CustomRenderPipe } from '../../../../scene/container/CustomRenderPipe.mjs';\nimport { RenderGroupPipe } from '../../../../scene/container/RenderGroupPipe.mjs';\nimport { RenderGroupSystem } from '../../../../scene/container/RenderGroupSystem.mjs';\nimport { SpritePipe } from '../../../../scene/sprite/SpritePipe.mjs';\nimport { RendererInitHook } from '../../../../utils/global/globalHooks.mjs';\nimport { BatcherPipe } from '../../../batcher/shared/BatcherPipe.mjs';\nimport { AlphaMaskPipe } from '../../../mask/alpha/AlphaMaskPipe.mjs';\nimport { ColorMaskPipe } from '../../../mask/color/ColorMaskPipe.mjs';\nimport { StencilMaskPipe } from '../../../mask/stencil/StencilMaskPipe.mjs';\nimport { BackgroundSystem } from '../background/BackgroundSystem.mjs';\nimport { BlendModePipe } from '../blendModes/BlendModePipe.mjs';\nimport { ExtractSystem } from '../extract/ExtractSystem.mjs';\nimport { GenerateTextureSystem } from '../extract/GenerateTextureSystem.mjs';\nimport { GlobalUniformSystem } from '../renderTarget/GlobalUniformSystem.mjs';\nimport { SchedulerSystem } from '../SchedulerSystem.mjs';\nimport { HelloSystem } from '../startup/HelloSystem.mjs';\nimport { RenderableGCSystem } from '../texture/RenderableGCSystem.mjs';\nimport { TextureGCSystem } from '../texture/TextureGCSystem.mjs';\nimport { ViewSystem } from '../view/ViewSystem.mjs';\n\n\"use strict\";\nconst SharedSystems = [\n  BackgroundSystem,\n  GlobalUniformSystem,\n  HelloSystem,\n  ViewSystem,\n  RenderGroupSystem,\n  TextureGCSystem,\n  GenerateTextureSystem,\n  ExtractSystem,\n  RendererInitHook,\n  RenderableGCSystem,\n  SchedulerSystem\n];\nconst SharedRenderPipes = [\n  BlendModePipe,\n  BatcherPipe,\n  SpritePipe,\n  RenderGroupPipe,\n  AlphaMaskPipe,\n  StencilMaskPipe,\n  ColorMaskPipe,\n  CustomRenderPipe\n];\n\nexport { SharedRenderPipes, SharedSystems };\n//# sourceMappingURL=SharedSystems.mjs.map\n","import { BrowserAdapter } from '../environment-browser/BrowserAdapter.mjs';\n\n\"use strict\";\nlet currentAdapter = BrowserAdapter;\nconst DOMAdapter = {\n  /**\n   * Returns the current adapter.\n   * @returns {environment.Adapter} The current adapter.\n   */\n  get() {\n    return currentAdapter;\n  },\n  /**\n   * Sets the current adapter.\n   * @param adapter - The new adapter.\n   */\n  set(adapter) {\n    currentAdapter = adapter;\n  }\n};\n\nexport { DOMAdapter };\n//# sourceMappingURL=adapter.mjs.map\n","\"use strict\";\nconst BrowserAdapter = {\n  createCanvas: (width, height) => {\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = width;\n    canvas.height = height;\n    return canvas;\n  },\n  createImage: () => new Image(),\n  getCanvasRenderingContext2D: () => CanvasRenderingContext2D,\n  getWebGLRenderingContext: () => WebGLRenderingContext,\n  getNavigator: () => navigator,\n  getBaseUrl: () => document.baseURI ?? window.location.href,\n  getFontFaceSet: () => document.fonts,\n  fetch: (url, options) => fetch(url, options),\n  parseXML: (xml) => {\n    const parser = new DOMParser();\n    return parser.parseFromString(xml, \"text/xml\");\n  }\n};\n\nexport { BrowserAdapter };\n//# sourceMappingURL=BrowserAdapter.mjs.map\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? factory(exports, require('@babel/runtime/helpers/slicedToArray'), require('@babel/runtime/helpers/classCallCheck'), require('@babel/runtime/helpers/createClass')) :\n    typeof define === 'function' && define.amd ? define(['exports', '@babel/runtime/helpers/slicedToArray', '@babel/runtime/helpers/classCallCheck', '@babel/runtime/helpers/createClass'], factory) :\n    (global = typeof globalThis !== 'undefined' ? globalThis : global || self, factory(global.automationEvents = {}, global._slicedToArray, global._classCallCheck, global._createClass));\n})(this, (function (exports, _slicedToArray, _classCallCheck, _createClass) { 'use strict';\n\n    var createExtendedExponentialRampToValueAutomationEvent = function createExtendedExponentialRampToValueAutomationEvent(value, endTime, insertTime) {\n      return {\n        endTime: endTime,\n        insertTime: insertTime,\n        type: 'exponentialRampToValue',\n        value: value\n      };\n    };\n\n    var createExtendedLinearRampToValueAutomationEvent = function createExtendedLinearRampToValueAutomationEvent(value, endTime, insertTime) {\n      return {\n        endTime: endTime,\n        insertTime: insertTime,\n        type: 'linearRampToValue',\n        value: value\n      };\n    };\n\n    var createSetValueAutomationEvent = function createSetValueAutomationEvent(value, startTime) {\n      return {\n        startTime: startTime,\n        type: 'setValue',\n        value: value\n      };\n    };\n\n    var createSetValueCurveAutomationEvent = function createSetValueCurveAutomationEvent(values, startTime, duration) {\n      return {\n        duration: duration,\n        startTime: startTime,\n        type: 'setValueCurve',\n        values: values\n      };\n    };\n\n    var getTargetValueAtTime = function getTargetValueAtTime(time, valueAtStartTime, _ref) {\n      var startTime = _ref.startTime,\n        target = _ref.target,\n        timeConstant = _ref.timeConstant;\n      return target + (valueAtStartTime - target) * Math.exp((startTime - time) / timeConstant);\n    };\n\n    var isExponentialRampToValueAutomationEvent = function isExponentialRampToValueAutomationEvent(automationEvent) {\n      return automationEvent.type === 'exponentialRampToValue';\n    };\n\n    var isLinearRampToValueAutomationEvent = function isLinearRampToValueAutomationEvent(automationEvent) {\n      return automationEvent.type === 'linearRampToValue';\n    };\n\n    var isAnyRampToValueAutomationEvent = function isAnyRampToValueAutomationEvent(automationEvent) {\n      return isExponentialRampToValueAutomationEvent(automationEvent) || isLinearRampToValueAutomationEvent(automationEvent);\n    };\n\n    var isSetValueAutomationEvent = function isSetValueAutomationEvent(automationEvent) {\n      return automationEvent.type === 'setValue';\n    };\n\n    var isSetValueCurveAutomationEvent = function isSetValueCurveAutomationEvent(automationEvent) {\n      return automationEvent.type === 'setValueCurve';\n    };\n\n    var getValueOfAutomationEventAtIndexAtTime = function getValueOfAutomationEventAtIndexAtTime(automationEvents, index, time, defaultValue) {\n      var automationEvent = automationEvents[index];\n      return automationEvent === undefined ? defaultValue : isAnyRampToValueAutomationEvent(automationEvent) || isSetValueAutomationEvent(automationEvent) ? automationEvent.value : isSetValueCurveAutomationEvent(automationEvent) ? automationEvent.values[automationEvent.values.length - 1] : getTargetValueAtTime(time, getValueOfAutomationEventAtIndexAtTime(automationEvents, index - 1, automationEvent.startTime, defaultValue), automationEvent);\n    };\n\n    var getEndTimeAndValueOfPreviousAutomationEvent = function getEndTimeAndValueOfPreviousAutomationEvent(automationEvents, index, currentAutomationEvent, nextAutomationEvent, defaultValue) {\n      return currentAutomationEvent === undefined ? [nextAutomationEvent.insertTime, defaultValue] : isAnyRampToValueAutomationEvent(currentAutomationEvent) ? [currentAutomationEvent.endTime, currentAutomationEvent.value] : isSetValueAutomationEvent(currentAutomationEvent) ? [currentAutomationEvent.startTime, currentAutomationEvent.value] : isSetValueCurveAutomationEvent(currentAutomationEvent) ? [currentAutomationEvent.startTime + currentAutomationEvent.duration, currentAutomationEvent.values[currentAutomationEvent.values.length - 1]] : [currentAutomationEvent.startTime, getValueOfAutomationEventAtIndexAtTime(automationEvents, index - 1, currentAutomationEvent.startTime, defaultValue)];\n    };\n\n    var isCancelAndHoldAutomationEvent = function isCancelAndHoldAutomationEvent(automationEvent) {\n      return automationEvent.type === 'cancelAndHold';\n    };\n\n    var isCancelScheduledValuesAutomationEvent = function isCancelScheduledValuesAutomationEvent(automationEvent) {\n      return automationEvent.type === 'cancelScheduledValues';\n    };\n\n    var getEventTime = function getEventTime(automationEvent) {\n      if (isCancelAndHoldAutomationEvent(automationEvent) || isCancelScheduledValuesAutomationEvent(automationEvent)) {\n        return automationEvent.cancelTime;\n      }\n      if (isExponentialRampToValueAutomationEvent(automationEvent) || isLinearRampToValueAutomationEvent(automationEvent)) {\n        return automationEvent.endTime;\n      }\n      return automationEvent.startTime;\n    };\n\n    var getExponentialRampValueAtTime = function getExponentialRampValueAtTime(time, startTime, valueAtStartTime, _ref) {\n      var endTime = _ref.endTime,\n        value = _ref.value;\n      if (valueAtStartTime === value) {\n        return value;\n      }\n      if (0 < valueAtStartTime && 0 < value || valueAtStartTime < 0 && value < 0) {\n        return valueAtStartTime * Math.pow(value / valueAtStartTime, (time - startTime) / (endTime - startTime));\n      }\n      return 0;\n    };\n\n    var getLinearRampValueAtTime = function getLinearRampValueAtTime(time, startTime, valueAtStartTime, _ref) {\n      var endTime = _ref.endTime,\n        value = _ref.value;\n      return valueAtStartTime + (time - startTime) / (endTime - startTime) * (value - valueAtStartTime);\n    };\n\n    var interpolateValue = function interpolateValue(values, theoreticIndex) {\n      var lowerIndex = Math.floor(theoreticIndex);\n      var upperIndex = Math.ceil(theoreticIndex);\n      if (lowerIndex === upperIndex) {\n        return values[lowerIndex];\n      }\n      return (1 - (theoreticIndex - lowerIndex)) * values[lowerIndex] + (1 - (upperIndex - theoreticIndex)) * values[upperIndex];\n    };\n\n    var getValueCurveValueAtTime = function getValueCurveValueAtTime(time, _ref) {\n      var duration = _ref.duration,\n        startTime = _ref.startTime,\n        values = _ref.values;\n      var theoreticIndex = (time - startTime) / duration * (values.length - 1);\n      return interpolateValue(values, theoreticIndex);\n    };\n\n    var isSetTargetAutomationEvent = function isSetTargetAutomationEvent(automationEvent) {\n      return automationEvent.type === 'setTarget';\n    };\n\n    var AutomationEventList = /*#__PURE__*/function () {\n      function AutomationEventList(defaultValue) {\n        _classCallCheck(this, AutomationEventList);\n        this._automationEvents = [];\n        this._currenTime = 0;\n        this._defaultValue = defaultValue;\n      }\n      return _createClass(AutomationEventList, [{\n        key: Symbol.iterator,\n        value: function value() {\n          return this._automationEvents[Symbol.iterator]();\n        }\n      }, {\n        key: \"add\",\n        value: function add(automationEvent) {\n          var eventTime = getEventTime(automationEvent);\n          if (isCancelAndHoldAutomationEvent(automationEvent) || isCancelScheduledValuesAutomationEvent(automationEvent)) {\n            var index = this._automationEvents.findIndex(function (currentAutomationEvent) {\n              if (isCancelScheduledValuesAutomationEvent(automationEvent) && isSetValueCurveAutomationEvent(currentAutomationEvent)) {\n                return currentAutomationEvent.startTime + currentAutomationEvent.duration >= eventTime;\n              }\n              return getEventTime(currentAutomationEvent) >= eventTime;\n            });\n            var removedAutomationEvent = this._automationEvents[index];\n            if (index !== -1) {\n              this._automationEvents = this._automationEvents.slice(0, index);\n            }\n            if (isCancelAndHoldAutomationEvent(automationEvent)) {\n              var lastAutomationEvent = this._automationEvents[this._automationEvents.length - 1];\n              if (removedAutomationEvent !== undefined && isAnyRampToValueAutomationEvent(removedAutomationEvent)) {\n                if (lastAutomationEvent !== undefined && isSetTargetAutomationEvent(lastAutomationEvent)) {\n                  throw new Error('The internal list is malformed.');\n                }\n                var startTime = lastAutomationEvent === undefined ? removedAutomationEvent.insertTime : isSetValueCurveAutomationEvent(lastAutomationEvent) ? lastAutomationEvent.startTime + lastAutomationEvent.duration : getEventTime(lastAutomationEvent);\n                var startValue = lastAutomationEvent === undefined ? this._defaultValue : isSetValueCurveAutomationEvent(lastAutomationEvent) ? lastAutomationEvent.values[lastAutomationEvent.values.length - 1] : lastAutomationEvent.value;\n                var value = isExponentialRampToValueAutomationEvent(removedAutomationEvent) ? getExponentialRampValueAtTime(eventTime, startTime, startValue, removedAutomationEvent) : getLinearRampValueAtTime(eventTime, startTime, startValue, removedAutomationEvent);\n                var truncatedAutomationEvent = isExponentialRampToValueAutomationEvent(removedAutomationEvent) ? createExtendedExponentialRampToValueAutomationEvent(value, eventTime, this._currenTime) : createExtendedLinearRampToValueAutomationEvent(value, eventTime, this._currenTime);\n                this._automationEvents.push(truncatedAutomationEvent);\n              }\n              if (lastAutomationEvent !== undefined && isSetTargetAutomationEvent(lastAutomationEvent)) {\n                this._automationEvents.push(createSetValueAutomationEvent(this.getValue(eventTime), eventTime));\n              }\n              if (lastAutomationEvent !== undefined && isSetValueCurveAutomationEvent(lastAutomationEvent) && lastAutomationEvent.startTime + lastAutomationEvent.duration > eventTime) {\n                var duration = eventTime - lastAutomationEvent.startTime;\n                var ratio = (lastAutomationEvent.values.length - 1) / lastAutomationEvent.duration;\n                var length = Math.max(2, 1 + Math.ceil(duration * ratio));\n                var fraction = duration / (length - 1) * ratio;\n                var values = lastAutomationEvent.values.slice(0, length);\n                if (fraction < 1) {\n                  for (var i = 1; i < length; i += 1) {\n                    var factor = fraction * i % 1;\n                    values[i] = lastAutomationEvent.values[i - 1] * (1 - factor) + lastAutomationEvent.values[i] * factor;\n                  }\n                }\n                this._automationEvents[this._automationEvents.length - 1] = createSetValueCurveAutomationEvent(values, lastAutomationEvent.startTime, duration);\n              }\n            }\n          } else {\n            var _index = this._automationEvents.findIndex(function (currentAutomationEvent) {\n              return getEventTime(currentAutomationEvent) > eventTime;\n            });\n            var previousAutomationEvent = _index === -1 ? this._automationEvents[this._automationEvents.length - 1] : this._automationEvents[_index - 1];\n            if (previousAutomationEvent !== undefined && isSetValueCurveAutomationEvent(previousAutomationEvent) && getEventTime(previousAutomationEvent) + previousAutomationEvent.duration > eventTime) {\n              return false;\n            }\n            var persistentAutomationEvent = isExponentialRampToValueAutomationEvent(automationEvent) ? createExtendedExponentialRampToValueAutomationEvent(automationEvent.value, automationEvent.endTime, this._currenTime) : isLinearRampToValueAutomationEvent(automationEvent) ? createExtendedLinearRampToValueAutomationEvent(automationEvent.value, eventTime, this._currenTime) : automationEvent;\n            if (_index === -1) {\n              this._automationEvents.push(persistentAutomationEvent);\n            } else {\n              if (isSetValueCurveAutomationEvent(automationEvent) && eventTime + automationEvent.duration > getEventTime(this._automationEvents[_index])) {\n                return false;\n              }\n              this._automationEvents.splice(_index, 0, persistentAutomationEvent);\n            }\n          }\n          return true;\n        }\n      }, {\n        key: \"flush\",\n        value: function flush(time) {\n          var index = this._automationEvents.findIndex(function (currentAutomationEvent) {\n            return getEventTime(currentAutomationEvent) > time;\n          });\n          if (index > 1) {\n            var remainingAutomationEvents = this._automationEvents.slice(index - 1);\n            var firstRemainingAutomationEvent = remainingAutomationEvents[0];\n            if (isSetTargetAutomationEvent(firstRemainingAutomationEvent)) {\n              remainingAutomationEvents.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents, index - 2, firstRemainingAutomationEvent.startTime, this._defaultValue), firstRemainingAutomationEvent.startTime));\n            }\n            this._automationEvents = remainingAutomationEvents;\n          }\n        }\n      }, {\n        key: \"getValue\",\n        value: function getValue(time) {\n          if (this._automationEvents.length === 0) {\n            return this._defaultValue;\n          }\n          var indexOfNextEvent = this._automationEvents.findIndex(function (automationEvent) {\n            return getEventTime(automationEvent) > time;\n          });\n          var nextAutomationEvent = this._automationEvents[indexOfNextEvent];\n          var indexOfCurrentEvent = (indexOfNextEvent === -1 ? this._automationEvents.length : indexOfNextEvent) - 1;\n          var currentAutomationEvent = this._automationEvents[indexOfCurrentEvent];\n          if (currentAutomationEvent !== undefined && isSetTargetAutomationEvent(currentAutomationEvent) && (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent) || nextAutomationEvent.insertTime > time)) {\n            return getTargetValueAtTime(time, getValueOfAutomationEventAtIndexAtTime(this._automationEvents, indexOfCurrentEvent - 1, currentAutomationEvent.startTime, this._defaultValue), currentAutomationEvent);\n          }\n          if (currentAutomationEvent !== undefined && isSetValueAutomationEvent(currentAutomationEvent) && (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent))) {\n            return currentAutomationEvent.value;\n          }\n          if (currentAutomationEvent !== undefined && isSetValueCurveAutomationEvent(currentAutomationEvent) && (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent) || currentAutomationEvent.startTime + currentAutomationEvent.duration > time)) {\n            if (time < currentAutomationEvent.startTime + currentAutomationEvent.duration) {\n              return getValueCurveValueAtTime(time, currentAutomationEvent);\n            }\n            return currentAutomationEvent.values[currentAutomationEvent.values.length - 1];\n          }\n          if (currentAutomationEvent !== undefined && isAnyRampToValueAutomationEvent(currentAutomationEvent) && (nextAutomationEvent === undefined || !isAnyRampToValueAutomationEvent(nextAutomationEvent))) {\n            return currentAutomationEvent.value;\n          }\n          if (nextAutomationEvent !== undefined && isExponentialRampToValueAutomationEvent(nextAutomationEvent)) {\n            var _getEndTimeAndValueOf = getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents, indexOfCurrentEvent, currentAutomationEvent, nextAutomationEvent, this._defaultValue),\n              _getEndTimeAndValueOf2 = _slicedToArray(_getEndTimeAndValueOf, 2),\n              startTime = _getEndTimeAndValueOf2[0],\n              value = _getEndTimeAndValueOf2[1];\n            return getExponentialRampValueAtTime(time, startTime, value, nextAutomationEvent);\n          }\n          if (nextAutomationEvent !== undefined && isLinearRampToValueAutomationEvent(nextAutomationEvent)) {\n            var _getEndTimeAndValueOf3 = getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents, indexOfCurrentEvent, currentAutomationEvent, nextAutomationEvent, this._defaultValue),\n              _getEndTimeAndValueOf4 = _slicedToArray(_getEndTimeAndValueOf3, 2),\n              _startTime = _getEndTimeAndValueOf4[0],\n              _value = _getEndTimeAndValueOf4[1];\n            return getLinearRampValueAtTime(time, _startTime, _value, nextAutomationEvent);\n          }\n          return this._defaultValue;\n        }\n      }]);\n    }();\n\n    var createCancelAndHoldAutomationEvent = function createCancelAndHoldAutomationEvent(cancelTime) {\n      return {\n        cancelTime: cancelTime,\n        type: 'cancelAndHold'\n      };\n    };\n\n    var createCancelScheduledValuesAutomationEvent = function createCancelScheduledValuesAutomationEvent(cancelTime) {\n      return {\n        cancelTime: cancelTime,\n        type: 'cancelScheduledValues'\n      };\n    };\n\n    var createExponentialRampToValueAutomationEvent = function createExponentialRampToValueAutomationEvent(value, endTime) {\n      return {\n        endTime: endTime,\n        type: 'exponentialRampToValue',\n        value: value\n      };\n    };\n\n    var createLinearRampToValueAutomationEvent = function createLinearRampToValueAutomationEvent(value, endTime) {\n      return {\n        endTime: endTime,\n        type: 'linearRampToValue',\n        value: value\n      };\n    };\n\n    var createSetTargetAutomationEvent = function createSetTargetAutomationEvent(target, startTime, timeConstant) {\n      return {\n        startTime: startTime,\n        target: target,\n        timeConstant: timeConstant,\n        type: 'setTarget'\n      };\n    };\n\n    exports.AutomationEventList = AutomationEventList;\n    exports.createCancelAndHoldAutomationEvent = createCancelAndHoldAutomationEvent;\n    exports.createCancelScheduledValuesAutomationEvent = createCancelScheduledValuesAutomationEvent;\n    exports.createExponentialRampToValueAutomationEvent = createExponentialRampToValueAutomationEvent;\n    exports.createLinearRampToValueAutomationEvent = createLinearRampToValueAutomationEvent;\n    exports.createSetTargetAutomationEvent = createSetTargetAutomationEvent;\n    exports.createSetValueAutomationEvent = createSetValueAutomationEvent;\n    exports.createSetValueCurveAutomationEvent = createSetValueCurveAutomationEvent;\n\n}));\n","import EventEmitter from 'eventemitter3';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nclass AbstractBitmapFont extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /** The map of characters by character code. */\n    this.chars = /* @__PURE__ */ Object.create(null);\n    /**\n     * The line-height of the font face in pixels.\n     * @type {number}\n     */\n    this.lineHeight = 0;\n    /**\n     * The name of the font face\n     * @type {string}\n     */\n    this.fontFamily = \"\";\n    /** The metrics of the font face. */\n    this.fontMetrics = { fontSize: 0, ascent: 0, descent: 0 };\n    /**\n     * The offset of the font face from the baseline.\n     * @type {number}\n     */\n    this.baseLineOffset = 0;\n    /** The range and type of the distance field for this font. */\n    this.distanceField = { type: \"none\", range: 0 };\n    /** The map of base page textures (i.e., sheets of glyphs). */\n    this.pages = [];\n    /** should the fill for this font be applied as a tint to the text. */\n    this.applyFillAsTint = true;\n    /** The size of the font face in pixels. */\n    this.baseMeasurementFontSize = 100;\n    this.baseRenderedFontSize = 100;\n  }\n  /**\n   * The name of the font face.\n   * @deprecated since 8.0.0 Use `fontFamily` instead.\n   */\n  get font() {\n    deprecation(v8_0_0, \"BitmapFont.font is deprecated, please use BitmapFont.fontFamily instead.\");\n    return this.fontFamily;\n  }\n  /**\n   * The map of base page textures (i.e., sheets of glyphs).\n   * @deprecated since 8.0.0 Use `pages` instead.\n   */\n  get pageTextures() {\n    deprecation(v8_0_0, \"BitmapFont.pageTextures is deprecated, please use BitmapFont.pages instead.\");\n    return this.pages;\n  }\n  /**\n   * The size of the font face in pixels.\n   * @deprecated since 8.0.0 Use `fontMetrics.fontSize` instead.\n   */\n  get size() {\n    deprecation(v8_0_0, \"BitmapFont.size is deprecated, please use BitmapFont.fontMetrics.fontSize instead.\");\n    return this.fontMetrics.fontSize;\n  }\n  /**\n   * The kind of distance field for this font or \"none\".\n   * @deprecated since 8.0.0 Use `distanceField.type` instead.\n   */\n  get distanceFieldRange() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldRange is deprecated, please use BitmapFont.distanceField.range instead.\");\n    return this.distanceField.range;\n  }\n  /**\n   * The range of the distance field in pixels.\n   * @deprecated since 8.0.0 Use `distanceField.range` instead.\n   */\n  get distanceFieldType() {\n    deprecation(v8_0_0, \"BitmapFont.distanceFieldType is deprecated, please use BitmapFont.distanceField.type instead.\");\n    return this.distanceField.type;\n  }\n  destroy(destroyTextures = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    for (const i in this.chars) {\n      this.chars[i].texture?.destroy();\n    }\n    this.chars = null;\n    if (destroyTextures) {\n      this.pages.forEach((page) => page.texture.destroy(true));\n      this.pages = null;\n    }\n  }\n}\n\nexport { AbstractBitmapFont };\n//# sourceMappingURL=AbstractBitmapFont.mjs.map\n","/*!\n* screenfull\n* v5.2.0 - 2021-11-03\n* (c) Sindre Sorhus; MIT License\n*/\n(function () {\n\t'use strict';\n\n\tvar document = typeof window !== 'undefined' && typeof window.document !== 'undefined' ? window.document : {};\n\tvar isCommonjs = typeof module !== 'undefined' && module.exports;\n\n\tvar fn = (function () {\n\t\tvar val;\n\n\t\tvar fnMap = [\n\t\t\t[\n\t\t\t\t'requestFullscreen',\n\t\t\t\t'exitFullscreen',\n\t\t\t\t'fullscreenElement',\n\t\t\t\t'fullscreenEnabled',\n\t\t\t\t'fullscreenchange',\n\t\t\t\t'fullscreenerror'\n\t\t\t],\n\t\t\t// New WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullscreen',\n\t\t\t\t'webkitExitFullscreen',\n\t\t\t\t'webkitFullscreenElement',\n\t\t\t\t'webkitFullscreenEnabled',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t// Old WebKit\n\t\t\t[\n\t\t\t\t'webkitRequestFullScreen',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitCurrentFullScreenElement',\n\t\t\t\t'webkitCancelFullScreen',\n\t\t\t\t'webkitfullscreenchange',\n\t\t\t\t'webkitfullscreenerror'\n\n\t\t\t],\n\t\t\t[\n\t\t\t\t'mozRequestFullScreen',\n\t\t\t\t'mozCancelFullScreen',\n\t\t\t\t'mozFullScreenElement',\n\t\t\t\t'mozFullScreenEnabled',\n\t\t\t\t'mozfullscreenchange',\n\t\t\t\t'mozfullscreenerror'\n\t\t\t],\n\t\t\t[\n\t\t\t\t'msRequestFullscreen',\n\t\t\t\t'msExitFullscreen',\n\t\t\t\t'msFullscreenElement',\n\t\t\t\t'msFullscreenEnabled',\n\t\t\t\t'MSFullscreenChange',\n\t\t\t\t'MSFullscreenError'\n\t\t\t]\n\t\t];\n\n\t\tvar i = 0;\n\t\tvar l = fnMap.length;\n\t\tvar ret = {};\n\n\t\tfor (; i < l; i++) {\n\t\t\tval = fnMap[i];\n\t\t\tif (val && val[1] in document) {\n\t\t\t\tfor (i = 0; i < val.length; i++) {\n\t\t\t\t\tret[fnMap[0][i]] = val[i];\n\t\t\t\t}\n\t\t\t\treturn ret;\n\t\t\t}\n\t\t}\n\n\t\treturn false;\n\t})();\n\n\tvar eventNameMap = {\n\t\tchange: fn.fullscreenchange,\n\t\terror: fn.fullscreenerror\n\t};\n\n\tvar screenfull = {\n\t\trequest: function (element, options) {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tvar onFullScreenEntered = function () {\n\t\t\t\t\tthis.off('change', onFullScreenEntered);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenEntered);\n\n\t\t\t\telement = element || document.documentElement;\n\n\t\t\t\tvar returnPromise = element[fn.requestFullscreen](options);\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenEntered).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\texit: function () {\n\t\t\treturn new Promise(function (resolve, reject) {\n\t\t\t\tif (!this.isFullscreen) {\n\t\t\t\t\tresolve();\n\t\t\t\t\treturn;\n\t\t\t\t}\n\n\t\t\t\tvar onFullScreenExit = function () {\n\t\t\t\t\tthis.off('change', onFullScreenExit);\n\t\t\t\t\tresolve();\n\t\t\t\t}.bind(this);\n\n\t\t\t\tthis.on('change', onFullScreenExit);\n\n\t\t\t\tvar returnPromise = document[fn.exitFullscreen]();\n\n\t\t\t\tif (returnPromise instanceof Promise) {\n\t\t\t\t\treturnPromise.then(onFullScreenExit).catch(reject);\n\t\t\t\t}\n\t\t\t}.bind(this));\n\t\t},\n\t\ttoggle: function (element, options) {\n\t\t\treturn this.isFullscreen ? this.exit() : this.request(element, options);\n\t\t},\n\t\tonchange: function (callback) {\n\t\t\tthis.on('change', callback);\n\t\t},\n\t\tonerror: function (callback) {\n\t\t\tthis.on('error', callback);\n\t\t},\n\t\ton: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.addEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\toff: function (event, callback) {\n\t\t\tvar eventName = eventNameMap[event];\n\t\t\tif (eventName) {\n\t\t\t\tdocument.removeEventListener(eventName, callback, false);\n\t\t\t}\n\t\t},\n\t\traw: fn\n\t};\n\n\tif (!fn) {\n\t\tif (isCommonjs) {\n\t\t\tmodule.exports = {isEnabled: false};\n\t\t} else {\n\t\t\twindow.screenfull = {isEnabled: false};\n\t\t}\n\n\t\treturn;\n\t}\n\n\tObject.defineProperties(screenfull, {\n\t\tisFullscreen: {\n\t\t\tget: function () {\n\t\t\t\treturn Boolean(document[fn.fullscreenElement]);\n\t\t\t}\n\t\t},\n\t\telement: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\treturn document[fn.fullscreenElement];\n\t\t\t}\n\t\t},\n\t\tisEnabled: {\n\t\t\tenumerable: true,\n\t\t\tget: function () {\n\t\t\t\t// Coerce to boolean in case of old WebKit\n\t\t\t\treturn Boolean(document[fn.fullscreenEnabled]);\n\t\t\t}\n\t\t}\n\t});\n\n\tif (isCommonjs) {\n\t\tmodule.exports = screenfull;\n\t} else {\n\t\twindow.screenfull = screenfull;\n\t}\n})();\n","\"use strict\";\nconst BLEND_TO_NPM = {\n  normal: \"normal-npm\",\n  add: \"add-npm\",\n  screen: \"screen-npm\"\n};\nvar STENCIL_MODES = /* @__PURE__ */ ((STENCIL_MODES2) => {\n  STENCIL_MODES2[STENCIL_MODES2[\"DISABLED\"] = 0] = \"DISABLED\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_ADD\"] = 1] = \"RENDERING_MASK_ADD\";\n  STENCIL_MODES2[STENCIL_MODES2[\"MASK_ACTIVE\"] = 2] = \"MASK_ACTIVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"INVERSE_MASK_ACTIVE\"] = 3] = \"INVERSE_MASK_ACTIVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"RENDERING_MASK_REMOVE\"] = 4] = \"RENDERING_MASK_REMOVE\";\n  STENCIL_MODES2[STENCIL_MODES2[\"NONE\"] = 5] = \"NONE\";\n  return STENCIL_MODES2;\n})(STENCIL_MODES || {});\n\nexport { BLEND_TO_NPM, STENCIL_MODES };\n//# sourceMappingURL=const.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\n\n\"use strict\";\nclass CacheClass {\n  constructor() {\n    this._parsers = [];\n    this._cache = /* @__PURE__ */ new Map();\n    this._cacheMap = /* @__PURE__ */ new Map();\n  }\n  /** Clear all entries. */\n  reset() {\n    this._cacheMap.clear();\n    this._cache.clear();\n  }\n  /**\n   * Check if the key exists\n   * @param key - The key to check\n   */\n  has(key) {\n    return this._cache.has(key);\n  }\n  /**\n   * Fetch entry by key\n   * @param key - The key of the entry to get\n   */\n  get(key) {\n    const result = this._cache.get(key);\n    if (!result) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n    }\n    return result;\n  }\n  /**\n   * Set a value by key or keys name\n   * @param key - The key or keys to set\n   * @param value - The value to store in the cache or from which cacheable assets will be derived.\n   */\n  set(key, value) {\n    const keys = convertToList(key);\n    let cacheableAssets;\n    for (let i = 0; i < this.parsers.length; i++) {\n      const parser = this.parsers[i];\n      if (parser.test(value)) {\n        cacheableAssets = parser.getCacheableAssets(keys, value);\n        break;\n      }\n    }\n    const cacheableMap = new Map(Object.entries(cacheableAssets || {}));\n    if (!cacheableAssets) {\n      keys.forEach((key2) => {\n        cacheableMap.set(key2, value);\n      });\n    }\n    const cacheKeys = [...cacheableMap.keys()];\n    const cachedAssets = {\n      cacheKeys,\n      keys\n    };\n    keys.forEach((key2) => {\n      this._cacheMap.set(key2, cachedAssets);\n    });\n    cacheKeys.forEach((key2) => {\n      const val = cacheableAssets ? cacheableAssets[key2] : value;\n      if (this._cache.has(key2) && this._cache.get(key2) !== val) {\n        warn(\"[Cache] already has key:\", key2);\n      }\n      this._cache.set(key2, cacheableMap.get(key2));\n    });\n  }\n  /**\n   * Remove entry by key\n   *\n   * This function will also remove any associated alias from the cache also.\n   * @param key - The key of the entry to remove\n   */\n  remove(key) {\n    if (!this._cacheMap.has(key)) {\n      warn(`[Assets] Asset id ${key} was not found in the Cache`);\n      return;\n    }\n    const cacheMap = this._cacheMap.get(key);\n    const cacheKeys = cacheMap.cacheKeys;\n    cacheKeys.forEach((key2) => {\n      this._cache.delete(key2);\n    });\n    cacheMap.keys.forEach((key2) => {\n      this._cacheMap.delete(key2);\n    });\n  }\n  /**\n   * All loader parsers registered\n   * @advanced\n   */\n  get parsers() {\n    return this._parsers;\n  }\n}\nconst Cache = new CacheClass();\n\nexport { Cache };\n//# sourceMappingURL=Cache.mjs.map\n","\"use strict\";\nfunction updateQuadBounds(bounds, anchor, texture) {\n  const { width, height } = texture.orig;\n  const trim = texture.trim;\n  if (trim) {\n    const sourceWidth = trim.width;\n    const sourceHeight = trim.height;\n    bounds.minX = trim.x - anchor._x * width;\n    bounds.maxX = bounds.minX + sourceWidth;\n    bounds.minY = trim.y - anchor._y * height;\n    bounds.maxY = bounds.minY + sourceHeight;\n  } else {\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height;\n    bounds.maxY = bounds.minY + height;\n  }\n}\n\nexport { updateQuadBounds };\n//# sourceMappingURL=updateQuadBounds.mjs.map\n","\"use strict\";\nconst localUniformBit = {\n  name: \"local-uniform-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n\n            struct LocalUniforms {\n                uTransformMatrix:mat3x3<f32>,\n                uColor:vec4<f32>,\n                uRound:f32,\n            }\n\n            @group(1) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        `\n    ),\n    end: (\n      /* wgsl */\n      `\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        `\n    )\n  }\n};\nconst localUniformBitGroup2 = {\n  ...localUniformBit,\n  vertex: {\n    ...localUniformBit.vertex,\n    // replace the group!\n    header: localUniformBit.vertex.header.replace(\"group(1)\", \"group(2)\")\n  }\n};\nconst localUniformBitGl = {\n  name: \"local-uniform-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= uColor;\n            modelMatrix = uTransformMatrix;\n        `\n    ),\n    end: (\n      /* glsl */\n      `\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        `\n    )\n  }\n};\n\nexport { localUniformBit, localUniformBitGl, localUniformBitGroup2 };\n//# sourceMappingURL=localUniformBit.mjs.map\n","import { Matrix } from './Matrix.mjs';\n\n\"use strict\";\nconst ux = [1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1, 0, 1];\nconst uy = [0, 1, 1, 1, 0, -1, -1, -1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vx = [0, -1, -1, -1, 0, 1, 1, 1, 0, 1, 1, 1, 0, -1, -1, -1];\nconst vy = [1, 1, 0, -1, -1, -1, 0, 1, -1, -1, 0, 1, 1, 1, 0, -1];\nconst rotationCayley = [];\nconst rotationMatrices = [];\nconst signum = Math.sign;\nfunction init() {\n  for (let i = 0; i < 16; i++) {\n    const row = [];\n    rotationCayley.push(row);\n    for (let j = 0; j < 16; j++) {\n      const _ux = signum(ux[i] * ux[j] + vx[i] * uy[j]);\n      const _uy = signum(uy[i] * ux[j] + vy[i] * uy[j]);\n      const _vx = signum(ux[i] * vx[j] + vx[i] * vy[j]);\n      const _vy = signum(uy[i] * vx[j] + vy[i] * vy[j]);\n      for (let k = 0; k < 16; k++) {\n        if (ux[k] === _ux && uy[k] === _uy && vx[k] === _vx && vy[k] === _vy) {\n          row.push(k);\n          break;\n        }\n      }\n    }\n  }\n  for (let i = 0; i < 16; i++) {\n    const mat = new Matrix();\n    mat.set(ux[i], uy[i], vx[i], vy[i], 0, 0);\n    rotationMatrices.push(mat);\n  }\n}\ninit();\nconst groupD8 = {\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 0       | East      |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  E: 0,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 45     | Southeast |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  SE: 1,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 90     | South     |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  S: 2,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 135    | Southwest |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  SW: 3,\n  /**\n   * | Rotation | Direction |\n   * |----------|-----------|\n   * | 180     | West      |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  W: 4,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -135/225 | Northwest    |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  NW: 5,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -90/270  | North        |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  N: 6,\n  /**\n   * | Rotation    | Direction    |\n   * |-------------|--------------|\n   * | -45/315  | Northeast    |\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  NE: 7,\n  /**\n   * Reflection about Y-axis.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  MIRROR_VERTICAL: 8,\n  /**\n   * Reflection about the main diagonal.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  MAIN_DIAGONAL: 10,\n  /**\n   * Reflection about X-axis.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  MIRROR_HORIZONTAL: 12,\n  /**\n   * Reflection about reverse diagonal.\n   * @group groupD8\n   * @type {GD8Symmetry}\n   */\n  REVERSE_DIAGONAL: 14,\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the U-axis\n   *    after rotating the axes.\n   */\n  uX: (ind) => ux[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the U-axis\n   *    after rotating the axes.\n   */\n  uY: (ind) => uy[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The X-component of the V-axis\n   *    after rotating the axes.\n   */\n  vX: (ind) => vx[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} ind - sprite rotation angle.\n   * @returns {GD8Symmetry} The Y-component of the V-axis\n   *    after rotating the axes.\n   */\n  vY: (ind) => vy[ind],\n  /**\n   * @group groupD8\n   * @param {GD8Symmetry} rotation - symmetry whose opposite\n   *   is needed. Only rotations have opposite symmetries while\n   *   reflections don't.\n   * @returns {GD8Symmetry} The opposite symmetry of `rotation`\n   */\n  inv: (rotation) => {\n    if (rotation & 8) {\n      return rotation & 15;\n    }\n    return -rotation & 7;\n  },\n  /**\n   * Composes the two D8 operations.\n   *\n   * Taking `^` as reflection:\n   *\n   * |       | E=0 | S=2 | W=4 | N=6 | E^=8 | S^=10 | W^=12 | N^=14 |\n   * |-------|-----|-----|-----|-----|------|-------|-------|-------|\n   * | E=0   | E   | S   | W   | N   | E^   | S^    | W^    | N^    |\n   * | S=2   | S   | W   | N   | E   | S^   | W^    | N^    | E^    |\n   * | W=4   | W   | N   | E   | S   | W^   | N^    | E^    | S^    |\n   * | N=6   | N   | E   | S   | W   | N^   | E^    | S^    | W^    |\n   * | E^=8  | E^  | N^  | W^  | S^  | E    | N     | W     | S     |\n   * | S^=10 | S^  | E^  | N^  | W^  | S    | E     | N     | W     |\n   * | W^=12 | W^  | S^  | E^  | N^  | W    | S     | E     | N     |\n   * | N^=14 | N^  | W^  | S^  | E^  | N    | W     | S     | E     |\n   *\n   * [This is a Cayley table]{@link https://en.wikipedia.org/wiki/Cayley_table}\n   * @group groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation, which\n   *   is the row in the above cayley table.\n   * @param {GD8Symmetry} rotationFirst - First operation, which\n   *   is the column in the above cayley table.\n   * @returns {GD8Symmetry} Composed operation\n   */\n  add: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][rotationFirst],\n  /**\n   * Reverse of `add`.\n   * @group groupD8\n   * @param {GD8Symmetry} rotationSecond - Second operation\n   * @param {GD8Symmetry} rotationFirst - First operation\n   * @returns {GD8Symmetry} Result\n   */\n  sub: (rotationSecond, rotationFirst) => rotationCayley[rotationSecond][groupD8.inv(rotationFirst)],\n  /**\n   * Adds 180 degrees to rotation, which is a commutative\n   * operation.\n   * @group groupD8\n   * @param {number} rotation - The number to rotate.\n   * @returns {number} Rotated number\n   */\n  rotate180: (rotation) => rotation ^ 4,\n  /**\n   * Checks if the rotation angle is vertical, i.e. south\n   * or north. It doesn't work for reflections.\n   * @group groupD8\n   * @param {GD8Symmetry} rotation - The number to check.\n   * @returns {boolean} Whether or not the direction is vertical\n   */\n  isVertical: (rotation) => (rotation & 3) === 2,\n  // rotation % 4 === 2\n  /**\n   * Approximates the vector `V(dx,dy)` into one of the\n   * eight directions provided by `groupD8`.\n   * @group groupD8\n   * @param {number} dx - X-component of the vector\n   * @param {number} dy - Y-component of the vector\n   * @returns {GD8Symmetry} Approximation of the vector into\n   *  one of the eight symmetries.\n   */\n  byDirection: (dx, dy) => {\n    if (Math.abs(dx) * 2 <= Math.abs(dy)) {\n      if (dy >= 0) {\n        return groupD8.S;\n      }\n      return groupD8.N;\n    } else if (Math.abs(dy) * 2 <= Math.abs(dx)) {\n      if (dx > 0) {\n        return groupD8.E;\n      }\n      return groupD8.W;\n    } else if (dy > 0) {\n      if (dx > 0) {\n        return groupD8.SE;\n      }\n      return groupD8.SW;\n    } else if (dx > 0) {\n      return groupD8.NE;\n    }\n    return groupD8.NW;\n  },\n  /**\n   * Helps sprite to compensate texture packer rotation.\n   * @group groupD8\n   * @param {Matrix} matrix - sprite world matrix\n   * @param {GD8Symmetry} rotation - The rotation factor to use.\n   * @param {number} tx - sprite anchoring\n   * @param {number} ty - sprite anchoring\n   */\n  matrixAppendRotationInv: (matrix, rotation, tx = 0, ty = 0) => {\n    const mat = rotationMatrices[groupD8.inv(rotation)];\n    mat.tx = tx;\n    mat.ty = ty;\n    matrix.append(mat);\n  },\n  /**\n   * Transforms rectangle coordinates based on texture packer rotation.\n   * Used when texture atlas pages are rotated and coordinates need to be adjusted.\n   * @group groupD8\n   * @param {RectangleLike} rect - Rectangle with original coordinates to transform\n   * @param {RectangleLike} sourceFrame - Source texture frame (includes offset and dimensions)\n   * @param {GD8Symmetry} rotation - The groupD8 rotation value\n   * @param {Rectangle} out - Rectangle to store the result\n   * @returns {Rectangle} Transformed coordinates (includes source frame offset)\n   */\n  transformRectCoords: (rect, sourceFrame, rotation, out) => {\n    const { x, y, width, height } = rect;\n    const { x: frameX, y: frameY, width: frameWidth, height: frameHeight } = sourceFrame;\n    if (rotation === groupD8.E) {\n      out.set(x + frameX, y + frameY, width, height);\n      return out;\n    } else if (rotation === groupD8.S) {\n      return out.set(\n        frameWidth - y - height + frameX,\n        x + frameY,\n        height,\n        width\n      );\n    } else if (rotation === groupD8.W) {\n      return out.set(\n        frameWidth - x - width + frameX,\n        frameHeight - y - height + frameY,\n        width,\n        height\n      );\n    } else if (rotation === groupD8.N) {\n      return out.set(\n        y + frameX,\n        frameHeight - x - width + frameY,\n        height,\n        width\n      );\n    }\n    return out.set(x + frameX, y + frameY, width, height);\n  }\n};\n\nexport { groupD8 };\n//# sourceMappingURL=groupD8.mjs.map\n","import { BatchableSprite } from '../../sprite/BatchableSprite.mjs';\n\n\"use strict\";\nclass BatchableText extends BatchableSprite {\n  constructor(renderer) {\n    super();\n    this._renderer = renderer;\n    renderer.runners.resolutionChange.add(this);\n  }\n  resolutionChange() {\n    const text = this.renderable;\n    if (text._autoResolution) {\n      text.onViewUpdate();\n    }\n  }\n  destroy() {\n    const { canvasText } = this._renderer;\n    const refCount = canvasText.getReferenceCount(this.currentKey);\n    if (refCount > 0) {\n      canvasText.decreaseReferenceCount(this.currentKey);\n    } else if (this.texture) {\n      canvasText.returnTexture(this.texture);\n    }\n    this._renderer.runners.resolutionChange.remove(this);\n    this._renderer = null;\n  }\n}\n\nexport { BatchableText };\n//# sourceMappingURL=BatchableText.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { updateTextBounds } from '../utils/updateTextBounds.mjs';\nimport { BatchableText } from './BatchableText.mjs';\n\n\"use strict\";\nclass CanvasTextPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  validateRenderable(text) {\n    const gpuText = this._getGpuText(text);\n    const newKey = text.styleKey;\n    if (gpuText.currentKey !== newKey)\n      return true;\n    return text._didTextUpdate;\n  }\n  addRenderable(text, instructionSet) {\n    const batchableText = this._getGpuText(text);\n    if (text._didTextUpdate) {\n      const resolution = text._autoResolution ? this._renderer.resolution : text.resolution;\n      if (batchableText.currentKey !== text.styleKey || text.resolution !== resolution) {\n        this._updateGpuText(text);\n      }\n      text._didTextUpdate = false;\n      updateTextBounds(batchableText, text);\n    }\n    this._renderer.renderPipes.batch.addToBatch(batchableText, instructionSet);\n  }\n  updateRenderable(text) {\n    const batchableText = this._getGpuText(text);\n    batchableText._batcher.updateElement(batchableText);\n  }\n  _updateGpuText(text) {\n    const batchableText = this._getGpuText(text);\n    if (batchableText.texture) {\n      this._renderer.canvasText.decreaseReferenceCount(batchableText.currentKey);\n    }\n    text._resolution = text._autoResolution ? this._renderer.resolution : text.resolution;\n    batchableText.texture = this._renderer.canvasText.getManagedTexture(text);\n    batchableText.currentKey = text.styleKey;\n  }\n  _getGpuText(text) {\n    return text._gpuData[this._renderer.uid] || this.initGpuText(text);\n  }\n  initGpuText(text) {\n    const batchableText = new BatchableText(this._renderer);\n    batchableText.currentKey = \"--\";\n    batchableText.renderable = text;\n    batchableText.transform = text.groupTransform;\n    batchableText.bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    batchableText.roundPixels = this._renderer._roundPixels | text._roundPixels;\n    text._gpuData[this._renderer.uid] = batchableText;\n    return batchableText;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nCanvasTextPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"text\"\n};\n\nexport { CanvasTextPipe };\n//# sourceMappingURL=CanvasTextPipe.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { TextureStyle } from '../../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport { deprecation } from '../../../utils/logging/deprecation.mjs';\nimport { TextStyle } from '../TextStyle.mjs';\nimport { getPo2TextureFromSource } from '../utils/getPo2TextureFromSource.mjs';\nimport { CanvasTextGenerator } from './CanvasTextGenerator.mjs';\n\n\"use strict\";\nclass CanvasTextSystem {\n  constructor(_renderer) {\n    this._activeTextures = {};\n    this._renderer = _renderer;\n  }\n  getTexture(options, _resolution, _style, _textKey) {\n    if (typeof options === \"string\") {\n      deprecation(\"8.0.0\", \"CanvasTextSystem.getTexture: Use object TextOptions instead of separate arguments\");\n      options = {\n        text: options,\n        style: _style,\n        resolution: _resolution\n      };\n    }\n    if (!(options.style instanceof TextStyle)) {\n      options.style = new TextStyle(options.style);\n    }\n    if (!(options.textureStyle instanceof TextureStyle)) {\n      options.textureStyle = new TextureStyle(options.textureStyle);\n    }\n    if (typeof options.text !== \"string\") {\n      options.text = options.text.toString();\n    }\n    const { text, style, textureStyle } = options;\n    const resolution = options.resolution ?? this._renderer.resolution;\n    const { frame, canvasAndContext } = CanvasTextGenerator.getCanvasAndContext({\n      text,\n      style,\n      resolution\n    });\n    const texture = getPo2TextureFromSource(canvasAndContext.canvas, frame.width, frame.height, resolution);\n    if (textureStyle)\n      texture.source.style = textureStyle;\n    if (style.trim) {\n      frame.pad(style.padding);\n      texture.frame.copyFrom(frame);\n      texture.frame.scale(1 / resolution);\n      texture.updateUvs();\n    }\n    if (style.filters) {\n      const filteredTexture = this._applyFilters(texture, style.filters);\n      this.returnTexture(texture);\n      CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n      return filteredTexture;\n    }\n    this._renderer.texture.initSource(texture._source);\n    CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n    return texture;\n  }\n  /**\n   * Returns a texture that was created wit the above `getTexture` function.\n   * Handy if you are done with a texture and want to return it to the pool.\n   * @param texture - The texture to be returned.\n   */\n  returnTexture(texture) {\n    const source = texture.source;\n    source.resource = null;\n    source.uploadMethodId = \"unknown\";\n    source.alphaMode = \"no-premultiply-alpha\";\n    TexturePool.returnTexture(texture, true);\n  }\n  /**\n   * Renders text to its canvas, and updates its texture.\n   * @deprecated since 8.10.0\n   */\n  renderTextToCanvas() {\n    deprecation(\n      \"8.10.0\",\n      \"CanvasTextSystem.renderTextToCanvas: no longer supported, use CanvasTextSystem.getTexture instead\"\n    );\n  }\n  /**\n   * Gets or creates a managed texture for a Text object. This method handles texture reuse and reference counting.\n   * @param text - The Text object that needs a texture\n   * @returns A Texture instance that represents the rendered text\n   * @remarks\n   * This method performs the following:\n   * 1. Sets the appropriate resolution based on auto-resolution settings\n   * 2. Checks if a texture already exists for the text's style\n   * 3. Creates a new texture if needed or returns an existing one\n   * 4. Manages reference counting for texture reuse\n   */\n  getManagedTexture(text) {\n    text._resolution = text._autoResolution ? this._renderer.resolution : text.resolution;\n    const textKey = text.styleKey;\n    if (this._activeTextures[textKey]) {\n      this._increaseReferenceCount(textKey);\n      return this._activeTextures[textKey].texture;\n    }\n    const texture = this.getTexture({\n      text: text.text,\n      style: text.style,\n      resolution: text._resolution,\n      textureStyle: text.textureStyle\n    });\n    this._activeTextures[textKey] = {\n      texture,\n      usageCount: 1\n    };\n    return texture;\n  }\n  /**\n   * Decreases the reference count for a texture associated with a text key.\n   * When the reference count reaches zero, the texture is returned to the pool.\n   * @param textKey - The unique key identifying the text style configuration\n   * @remarks\n   * This method is crucial for memory management, ensuring textures are properly\n   * cleaned up when they are no longer needed by any Text instances.\n   */\n  decreaseReferenceCount(textKey) {\n    const activeTexture = this._activeTextures[textKey];\n    activeTexture.usageCount--;\n    if (activeTexture.usageCount === 0) {\n      this.returnTexture(activeTexture.texture);\n      this._activeTextures[textKey] = null;\n    }\n  }\n  /**\n   * Gets the current reference count for a texture associated with a text key.\n   * @param textKey - The unique key identifying the text style configuration\n   * @returns The number of Text instances currently using this texture\n   */\n  getReferenceCount(textKey) {\n    return this._activeTextures[textKey]?.usageCount ?? 0;\n  }\n  _increaseReferenceCount(textKey) {\n    this._activeTextures[textKey].usageCount++;\n  }\n  /**\n   * Applies the specified filters to the given texture.\n   *\n   * This method takes a texture and a list of filters, applies the filters to the texture,\n   * and returns the resulting texture. It also ensures that the alpha mode of the resulting\n   * texture is set to 'premultiplied-alpha'.\n   * @param {Texture} texture - The texture to which the filters will be applied.\n   * @param {Filter[]} filters - The filters to apply to the texture.\n   * @returns {Texture} The resulting texture after all filters have been applied.\n   */\n  _applyFilters(texture, filters) {\n    const currentRenderTarget = this._renderer.renderTarget.renderTarget;\n    const resultTexture = this._renderer.filter.generateFilteredTexture({\n      texture,\n      filters\n    });\n    this._renderer.renderTarget.bind(currentRenderTarget, false);\n    return resultTexture;\n  }\n  destroy() {\n    this._renderer = null;\n    for (const key in this._activeTextures) {\n      if (this._activeTextures[key])\n        this.returnTexture(this._activeTextures[key].texture);\n    }\n    this._activeTextures = null;\n  }\n}\n/** @ignore */\nCanvasTextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"canvasText\"\n};\n\nexport { CanvasTextSystem };\n//# sourceMappingURL=CanvasTextSystem.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { CanvasTextPipe } from './canvas/CanvasTextPipe.mjs';\nimport { CanvasTextSystem } from './canvas/CanvasTextSystem.mjs';\n\n\"use strict\";\nextensions.add(CanvasTextSystem);\nextensions.add(CanvasTextPipe);\n//# sourceMappingURL=init.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { BigPool } from '../../../../utils/pool/PoolGroup.mjs';\nimport { Bounds } from '../Bounds.mjs';\n\n\"use strict\";\nconst matrixPool = BigPool.getPool(Matrix);\nconst boundsPool = BigPool.getPool(Bounds);\n\nexport { boundsPool, matrixPool };\n//# sourceMappingURL=matrixAndBoundsPool.mjs.map\n","\"use strict\";\nconst isSingleItem = (item) => !Array.isArray(item);\n\nexport { isSingleItem };\n//# sourceMappingURL=isSingleItem.mjs.map\n","\"use strict\";\nconst copySearchParams = (targetUrl, sourceUrl) => {\n  const searchParams = sourceUrl.split(\"?\")[1];\n  if (searchParams) {\n    targetUrl += `?${searchParams}`;\n  }\n  return targetUrl;\n};\n\nexport { copySearchParams };\n//# sourceMappingURL=copySearchParams.mjs.map\n","import { updateQuadBounds } from '../../../utils/data/updateQuadBounds.mjs';\n\n\"use strict\";\nfunction updateTextBounds(batchableSprite, text) {\n  const { texture, bounds } = batchableSprite;\n  const padding = text._style._getFinalPadding();\n  updateQuadBounds(bounds, text._anchor, texture);\n  const paddingOffset = text._anchor._x * padding * 2;\n  const paddingOffsetY = text._anchor._y * padding * 2;\n  bounds.minX -= padding - paddingOffset;\n  bounds.minY -= padding - paddingOffsetY;\n  bounds.maxX -= padding - paddingOffset;\n  bounds.maxY -= padding - paddingOffsetY;\n}\n\nexport { updateTextBounds };\n//# sourceMappingURL=updateTextBounds.mjs.map\n","\"use strict\";\nconst convertToList = (input, transform, forceTransform = false) => {\n  if (!Array.isArray(input)) {\n    input = [input];\n  }\n  if (!transform) {\n    return input;\n  }\n  return input.map((item) => {\n    if (typeof item === \"string\" || forceTransform) {\n      return transform(item);\n    }\n    return item;\n  });\n};\n\nexport { convertToList };\n//# sourceMappingURL=convertToList.mjs.map\n","import { nextPow2 } from '../../../../maths/misc/pow2.mjs';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { Texture } from './Texture.mjs';\nimport { TextureStyle } from './TextureStyle.mjs';\n\n\"use strict\";\nlet count = 0;\nclass TexturePoolClass {\n  /**\n   * @param textureOptions - options that will be passed to BaseRenderTexture constructor\n   * @param {SCALE_MODE} [textureOptions.scaleMode] - See {@link SCALE_MODE} for possible values.\n   */\n  constructor(textureOptions) {\n    this._poolKeyHash = /* @__PURE__ */ Object.create(null);\n    this._texturePool = {};\n    this.textureOptions = textureOptions || {};\n    this.enableFullScreen = false;\n    this.textureStyle = new TextureStyle(this.textureOptions);\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   * @param antialias\n   */\n  createTexture(pixelWidth, pixelHeight, antialias) {\n    const textureSource = new TextureSource({\n      ...this.textureOptions,\n      width: pixelWidth,\n      height: pixelHeight,\n      resolution: 1,\n      antialias,\n      autoGarbageCollect: false\n    });\n    return new Texture({\n      source: textureSource,\n      label: `texturePool_${count++}`\n    });\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param frameWidth - The minimum width of the render texture.\n   * @param frameHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @param antialias\n   * @returns The new render texture.\n   */\n  getOptimalTexture(frameWidth, frameHeight, resolution = 1, antialias) {\n    let po2Width = Math.ceil(frameWidth * resolution - 1e-6);\n    let po2Height = Math.ceil(frameHeight * resolution - 1e-6);\n    po2Width = nextPow2(po2Width);\n    po2Height = nextPow2(po2Height);\n    const key = (po2Width << 17) + (po2Height << 1) + (antialias ? 1 : 0);\n    if (!this._texturePool[key]) {\n      this._texturePool[key] = [];\n    }\n    let texture = this._texturePool[key].pop();\n    if (!texture) {\n      texture = this.createTexture(po2Width, po2Height, antialias);\n    }\n    texture.source._resolution = resolution;\n    texture.source.width = po2Width / resolution;\n    texture.source.height = po2Height / resolution;\n    texture.source.pixelWidth = po2Width;\n    texture.source.pixelHeight = po2Height;\n    texture.frame.x = 0;\n    texture.frame.y = 0;\n    texture.frame.width = frameWidth;\n    texture.frame.height = frameHeight;\n    texture.updateUvs();\n    this._poolKeyHash[texture.uid] = key;\n    return texture;\n  }\n  /**\n   * Gets extra texture of the same size as input renderTexture\n   * @param texture - The texture to check what size it is.\n   * @param antialias - Whether to use antialias.\n   * @returns A texture that is a power of two\n   */\n  getSameSizeTexture(texture, antialias = false) {\n    const source = texture.source;\n    return this.getOptimalTexture(texture.width, texture.height, source._resolution, antialias);\n  }\n  /**\n   * Place a render texture back into the pool. Optionally reset the style of the texture to the default texture style.\n   * useful if you modified the style of the texture after getting it from the pool.\n   * @param renderTexture - The renderTexture to free\n   * @param resetStyle - Whether to reset the style of the texture to the default texture style\n   */\n  returnTexture(renderTexture, resetStyle = false) {\n    const key = this._poolKeyHash[renderTexture.uid];\n    if (resetStyle) {\n      renderTexture.source.style = this.textureStyle;\n    }\n    this._texturePool[key].push(renderTexture);\n  }\n  /**\n   * Clears the pool.\n   * @param destroyTextures - Destroy all stored textures.\n   */\n  clear(destroyTextures) {\n    destroyTextures = destroyTextures !== false;\n    if (destroyTextures) {\n      for (const i in this._texturePool) {\n        const textures = this._texturePool[i];\n        if (textures) {\n          for (let j = 0; j < textures.length; j++) {\n            textures[j].destroy(true);\n          }\n        }\n      }\n    }\n    this._texturePool = {};\n  }\n}\nconst TexturePool = new TexturePoolClass();\nGlobalResourceRegistry.register(TexturePool);\n\nexport { TexturePool, TexturePoolClass };\n//# sourceMappingURL=TexturePool.mjs.map\n","\"use strict\";\nvar __spreadArray = (this && this.__spreadArray) || function (to, from, pack) {\n    if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n        if (ar || !(i in from)) {\n            if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n            ar[i] = from[i];\n        }\n    }\n    return to.concat(ar || Array.prototype.slice.call(from));\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.encode = void 0;\nvar midi_file_1 = require(\"midi-file\");\nvar Header_1 = require(\"./Header\");\nvar array_flatten_1 = require(\"array-flatten\");\nfunction encodeNote(note, channel) {\n    return [{\n            absoluteTime: note.ticks,\n            channel: channel,\n            deltaTime: 0,\n            noteNumber: note.midi,\n            type: \"noteOn\",\n            velocity: Math.floor(note.velocity * 127),\n        },\n        {\n            absoluteTime: note.ticks + note.durationTicks,\n            channel: channel,\n            deltaTime: 0,\n            noteNumber: note.midi,\n            type: \"noteOff\",\n            velocity: Math.floor(note.noteOffVelocity * 127),\n        }];\n}\nfunction encodeNotes(track) {\n    return (0, array_flatten_1.flatten)(track.notes.map(function (note) { return encodeNote(note, track.channel); }));\n}\nfunction encodeControlChange(cc, channel) {\n    return {\n        absoluteTime: cc.ticks,\n        channel: channel,\n        controllerType: cc.number,\n        deltaTime: 0,\n        type: \"controller\",\n        value: Math.floor(cc.value * 127),\n    };\n}\nfunction encodeControlChanges(track) {\n    var controlChanges = [];\n    for (var i = 0; i < 127; i++) {\n        if (track.controlChanges.hasOwnProperty(i)) {\n            track.controlChanges[i].forEach(function (cc) {\n                controlChanges.push(encodeControlChange(cc, track.channel));\n            });\n        }\n    }\n    return controlChanges;\n}\nfunction encodePitchBend(pb, channel) {\n    return {\n        absoluteTime: pb.ticks,\n        channel: channel,\n        deltaTime: 0,\n        type: \"pitchBend\",\n        value: pb.value,\n    };\n}\nfunction encodePitchBends(track) {\n    var pitchBends = [];\n    track.pitchBends.forEach(function (pb) {\n        pitchBends.push(encodePitchBend(pb, track.channel));\n    });\n    return pitchBends;\n}\nfunction encodeInstrument(track) {\n    return {\n        absoluteTime: 0,\n        channel: track.channel,\n        deltaTime: 0,\n        programNumber: track.instrument.number,\n        type: \"programChange\",\n    };\n}\nfunction encodeTrackName(name) {\n    return {\n        absoluteTime: 0,\n        deltaTime: 0,\n        meta: true,\n        text: name,\n        type: \"trackName\",\n    };\n}\nfunction encodeTempo(tempo) {\n    return {\n        absoluteTime: tempo.ticks,\n        deltaTime: 0,\n        meta: true,\n        microsecondsPerBeat: Math.floor(60000000 / tempo.bpm),\n        type: \"setTempo\",\n    };\n}\nfunction encodeTimeSignature(timeSig) {\n    return {\n        absoluteTime: timeSig.ticks,\n        deltaTime: 0,\n        denominator: timeSig.timeSignature[1],\n        meta: true,\n        metronome: 24,\n        numerator: timeSig.timeSignature[0],\n        thirtyseconds: 8,\n        type: \"timeSignature\",\n    };\n}\n// function encodeMeta(event: )\nfunction encodeKeySignature(keySig) {\n    var keyIndex = Header_1.keySignatureKeys.indexOf(keySig.key);\n    return {\n        absoluteTime: keySig.ticks,\n        deltaTime: 0,\n        key: keyIndex + 7,\n        meta: true,\n        scale: keySig.scale === \"major\" ? 0 : 1,\n        type: \"keySignature\",\n    };\n}\nfunction encodeText(textEvent) {\n    return {\n        absoluteTime: textEvent.ticks,\n        deltaTime: 0,\n        meta: true,\n        text: textEvent.text,\n        type: textEvent.type,\n    };\n}\n/**\n * Convert the MIDI object to an array.\n */\nfunction encode(midi) {\n    var midiData = {\n        header: {\n            format: 1,\n            numTracks: midi.tracks.length + 1,\n            ticksPerBeat: midi.header.ppq,\n        },\n        tracks: __spreadArray([\n            __spreadArray(__spreadArray(__spreadArray(__spreadArray([\n                // The name data.\n                {\n                    absoluteTime: 0,\n                    deltaTime: 0,\n                    meta: true,\n                    text: midi.header.name,\n                    type: \"trackName\",\n                }\n            ], midi.header.keySignatures.map(function (keySig) { return encodeKeySignature(keySig); }), true), midi.header.meta.map(function (e) { return encodeText(e); }), true), midi.header.tempos.map(function (tempo) { return encodeTempo(tempo); }), true), midi.header.timeSignatures.map(function (timeSig) { return encodeTimeSignature(timeSig); }), true)\n        ], midi.tracks.map(function (track) {\n            return __spreadArray(__spreadArray(__spreadArray([\n                // Add the name\n                encodeTrackName(track.name),\n                // the instrument\n                encodeInstrument(track)\n            ], encodeNotes(track), true), encodeControlChanges(track), true), encodePitchBends(track), true);\n        }), true),\n    };\n    // Sort and set `deltaTime` of all of the tracks.\n    midiData.tracks = midiData.tracks.map(function (track) {\n        track = track.sort(function (a, b) { return a.absoluteTime - b.absoluteTime; });\n        var lastTime = 0;\n        track.forEach(function (note) {\n            note.deltaTime = note.absoluteTime - lastTime;\n            lastTime = note.absoluteTime;\n            delete note.absoluteTime;\n        });\n        // End of track.\n        track.push({\n            deltaTime: 0,\n            meta: true,\n            type: \"endOfTrack\",\n        });\n        return track;\n    });\n    // Rreturn `midiData`.\n    return new Uint8Array((0, midi_file_1.writeMidi)(midiData));\n}\nexports.encode = encode;\n//# sourceMappingURL=Encode.js.map","import { TexturePool } from '../../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { Bounds } from '../../container/bounds/Bounds.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nfunction getPo2TextureFromSource(image, width, height, resolution) {\n  const bounds = tempBounds;\n  bounds.minX = 0;\n  bounds.minY = 0;\n  bounds.maxX = image.width / resolution | 0;\n  bounds.maxY = image.height / resolution | 0;\n  const texture = TexturePool.getOptimalTexture(\n    bounds.width,\n    bounds.height,\n    resolution,\n    false\n  );\n  texture.source.uploadMethodId = \"image\";\n  texture.source.resource = image;\n  texture.source.alphaMode = \"premultiply-alpha-on-upload\";\n  texture.frame.width = width / resolution;\n  texture.frame.height = height / resolution;\n  texture.source.emit(\"update\", texture.source);\n  texture.updateUvs();\n  return texture;\n}\n\nexport { getPo2TextureFromSource };\n//# sourceMappingURL=getPo2TextureFromSource.mjs.map\n","export { default as EventEmitter } from 'eventemitter3';\n\n\"use strict\";\nconst DATA_URI = /^\\s*data:(?:([\\w-]+)\\/([\\w+.-]+))?(?:;charset=([\\w-]+))?(?:;(base64))?,(.*)/i;\nconst VERSION = \"8.14.3\";\n\nexport { DATA_URI, VERSION };\n//# sourceMappingURL=const.mjs.map\n","var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(r){return\"string\"==typeof r?r.length>0:\"number\"==typeof r},n=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=Math.pow(10,t)),Math.round(n*r)/n+0},e=function(r,t,n){return void 0===t&&(t=0),void 0===n&&(n=1),r>n?n:r>t?r:t},u=function(r){return(r=isFinite(r)?r%360:0)>0?r:r+360},a=function(r){return{r:e(r.r,0,255),g:e(r.g,0,255),b:e(r.b,0,255),a:e(r.a)}},o=function(r){return{r:n(r.r),g:n(r.g),b:n(r.b),a:n(r.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(r){var t=r.toString(16);return t.length<2?\"0\"+t:t},h=function(r){var t=r.r,n=r.g,e=r.b,u=r.a,a=Math.max(t,n,e),o=a-Math.min(t,n,e),i=o?a===t?(n-e)/o:a===n?2+(e-t)/o:4+(t-n)/o:0;return{h:60*(i<0?i+6:i),s:a?o/a*100:0,v:a/255*100,a:u}},b=function(r){var t=r.h,n=r.s,e=r.v,u=r.a;t=t/360*6,n/=100,e/=100;var a=Math.floor(t),o=e*(1-n),i=e*(1-(t-a)*n),s=e*(1-(1-t+a)*n),h=a%6;return{r:255*[e,i,o,o,s,e][h],g:255*[s,e,e,i,o,o][h],b:255*[o,o,s,e,e,i][h],a:u}},g=function(r){return{h:u(r.h),s:e(r.s,0,100),l:e(r.l,0,100),a:e(r.a)}},d=function(r){return{h:n(r.h),s:n(r.s),l:n(r.l),a:n(r.a,3)}},f=function(r){return b((n=(t=r).s,{h:t.h,s:(n*=((e=t.l)<50?e:100-e)/100)>0?2*n/(e+n)*100:0,v:e+n,a:t.a}));var t,n,e},c=function(r){return{h:(t=h(r)).h,s:(u=(200-(n=t.s))*(e=t.v)/100)>0&&u<200?n*e/100/(u<=100?u:200-u)*100:0,l:u/2,a:t.a};var t,n,e,u},l=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*,\\s*([+-]?\\d*\\.?\\d+)%\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,p=/^hsla?\\(\\s*([+-]?\\d*\\.?\\d+)(deg|rad|grad|turn)?\\s+([+-]?\\d*\\.?\\d+)%\\s+([+-]?\\d*\\.?\\d+)%\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,v=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*(?:,\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,m=/^rgba?\\(\\s*([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s+([+-]?\\d*\\.?\\d+)(%)?\\s*(?:\\/\\s*([+-]?\\d*\\.?\\d+)(%)?\\s*)?\\)$/i,y={string:[[function(r){var t=i.exec(r);return t?(r=t[1]).length<=4?{r:parseInt(r[0]+r[0],16),g:parseInt(r[1]+r[1],16),b:parseInt(r[2]+r[2],16),a:4===r.length?n(parseInt(r[3]+r[3],16)/255,2):1}:6===r.length||8===r.length?{r:parseInt(r.substr(0,2),16),g:parseInt(r.substr(2,2),16),b:parseInt(r.substr(4,2),16),a:8===r.length?n(parseInt(r.substr(6,2),16)/255,2):1}:null:null},\"hex\"],[function(r){var t=v.exec(r)||m.exec(r);return t?t[2]!==t[4]||t[4]!==t[6]?null:a({r:Number(t[1])/(t[2]?100/255:1),g:Number(t[3])/(t[4]?100/255:1),b:Number(t[5])/(t[6]?100/255:1),a:void 0===t[7]?1:Number(t[7])/(t[8]?100:1)}):null},\"rgb\"],[function(t){var n=l.exec(t)||p.exec(t);if(!n)return null;var e,u,a=g({h:(e=n[1],u=n[2],void 0===u&&(u=\"deg\"),Number(e)*(r[u]||1)),s:Number(n[3]),l:Number(n[4]),a:void 0===n[5]?1:Number(n[5])/(n[6]?100:1)});return f(a)},\"hsl\"]],object:[[function(r){var n=r.r,e=r.g,u=r.b,o=r.a,i=void 0===o?1:o;return t(n)&&t(e)&&t(u)?a({r:Number(n),g:Number(e),b:Number(u),a:Number(i)}):null},\"rgb\"],[function(r){var n=r.h,e=r.s,u=r.l,a=r.a,o=void 0===a?1:a;if(!t(n)||!t(e)||!t(u))return null;var i=g({h:Number(n),s:Number(e),l:Number(u),a:Number(o)});return f(i)},\"hsl\"],[function(r){var n=r.h,a=r.s,o=r.v,i=r.a,s=void 0===i?1:i;if(!t(n)||!t(a)||!t(o))return null;var h=function(r){return{h:u(r.h),s:e(r.s,0,100),v:e(r.v,0,100),a:e(r.a)}}({h:Number(n),s:Number(a),v:Number(o),a:Number(s)});return b(h)},\"hsv\"]]},N=function(r,t){for(var n=0;n<t.length;n++){var e=t[n][0](r);if(e)return[e,t[n][1]]}return[null,void 0]},x=function(r){return\"string\"==typeof r?N(r.trim(),y.string):\"object\"==typeof r&&null!==r?N(r,y.object):[null,void 0]},I=function(r){return x(r)[1]},M=function(r,t){var n=c(r);return{h:n.h,s:e(n.s+100*t,0,100),l:n.l,a:n.a}},H=function(r){return(299*r.r+587*r.g+114*r.b)/1e3/255},$=function(r,t){var n=c(r);return{h:n.h,s:n.s,l:e(n.l+100*t,0,100),a:n.a}},j=function(){function r(r){this.parsed=x(r)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return r.prototype.isValid=function(){return null!==this.parsed},r.prototype.brightness=function(){return n(H(this.rgba),2)},r.prototype.isDark=function(){return H(this.rgba)<.5},r.prototype.isLight=function(){return H(this.rgba)>=.5},r.prototype.toHex=function(){return r=o(this.rgba),t=r.r,e=r.g,u=r.b,i=(a=r.a)<1?s(n(255*a)):\"\",\"#\"+s(t)+s(e)+s(u)+i;var r,t,e,u,a,i},r.prototype.toRgb=function(){return o(this.rgba)},r.prototype.toRgbString=function(){return r=o(this.rgba),t=r.r,n=r.g,e=r.b,(u=r.a)<1?\"rgba(\"+t+\", \"+n+\", \"+e+\", \"+u+\")\":\"rgb(\"+t+\", \"+n+\", \"+e+\")\";var r,t,n,e,u},r.prototype.toHsl=function(){return d(c(this.rgba))},r.prototype.toHslString=function(){return r=d(c(this.rgba)),t=r.h,n=r.s,e=r.l,(u=r.a)<1?\"hsla(\"+t+\", \"+n+\"%, \"+e+\"%, \"+u+\")\":\"hsl(\"+t+\", \"+n+\"%, \"+e+\"%)\";var r,t,n,e,u},r.prototype.toHsv=function(){return r=h(this.rgba),{h:n(r.h),s:n(r.s),v:n(r.v),a:n(r.a,3)};var r},r.prototype.invert=function(){return w({r:255-(r=this.rgba).r,g:255-r.g,b:255-r.b,a:r.a});var r},r.prototype.saturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,r))},r.prototype.desaturate=function(r){return void 0===r&&(r=.1),w(M(this.rgba,-r))},r.prototype.grayscale=function(){return w(M(this.rgba,-1))},r.prototype.lighten=function(r){return void 0===r&&(r=.1),w($(this.rgba,r))},r.prototype.darken=function(r){return void 0===r&&(r=.1),w($(this.rgba,-r))},r.prototype.rotate=function(r){return void 0===r&&(r=15),this.hue(this.hue()+r)},r.prototype.alpha=function(r){return\"number\"==typeof r?w({r:(t=this.rgba).r,g:t.g,b:t.b,a:r}):n(this.rgba.a,3);var t},r.prototype.hue=function(r){var t=c(this.rgba);return\"number\"==typeof r?w({h:r,s:t.s,l:t.l,a:t.a}):n(t.h)},r.prototype.isEqual=function(r){return this.toHex()===w(r).toHex()},r}(),w=function(r){return r instanceof j?r:new j(r)},S=[],k=function(r){r.forEach(function(r){S.indexOf(r)<0&&(r(j,y),S.push(r))})},E=function(){return new j({r:255*Math.random(),g:255*Math.random(),b:255*Math.random()})};export{j as Colord,w as colord,k as extend,I as getFormat,E as random};\n","import { extend, colord } from '@pixi/colord';\nimport namesPlugin from '@pixi/colord/plugins/names';\n\n\"use strict\";\nextend([namesPlugin]);\nconst _Color = class _Color {\n  /**\n   * @param {ColorSource} value - Optional value to use, if not provided, white is used.\n   */\n  constructor(value = 16777215) {\n    this._value = null;\n    this._components = new Float32Array(4);\n    this._components.fill(1);\n    this._int = 16777215;\n    this.value = value;\n  }\n  /**\n   * Get the red component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('red');\n   * console.log(color.red); // 1\n   *\n   * const green = new Color('#00ff00');\n   * console.log(green.red); // 0\n   * ```\n   */\n  get red() {\n    return this._components[0];\n  }\n  /**\n   * Get the green component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('lime');\n   * console.log(color.green); // 1\n   *\n   * const red = new Color('#ff0000');\n   * console.log(red.green); // 0\n   * ```\n   */\n  get green() {\n    return this._components[1];\n  }\n  /**\n   * Get the blue component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('blue');\n   * console.log(color.blue); // 1\n   *\n   * const yellow = new Color('#ffff00');\n   * console.log(yellow.blue); // 0\n   * ```\n   */\n  get blue() {\n    return this._components[2];\n  }\n  /**\n   * Get the alpha component of the color, normalized between 0 and 1.\n   * @example\n   * ```ts\n   * const color = new Color('red');\n   * console.log(color.alpha); // 1 (fully opaque)\n   *\n   * const transparent = new Color('rgba(255, 0, 0, 0.5)');\n   * console.log(transparent.alpha); // 0.5 (semi-transparent)\n   * ```\n   */\n  get alpha() {\n    return this._components[3];\n  }\n  /**\n   * Sets the color value and returns the instance for chaining.\n   *\n   * This is a chainable version of setting the `value` property.\n   * @param value - The color to set. Accepts various formats:\n   * - Hex strings/numbers (e.g., '#ff0000', 0xff0000)\n   * - RGB/RGBA values (arrays, objects)\n   * - CSS color names\n   * - HSL/HSLA values\n   * - HSV/HSVA values\n   * @returns The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic usage\n   * const color = new Color();\n   * color.setValue('#ff0000')\n   *     .setAlpha(0.5)\n   *     .premultiply(0.8);\n   *\n   * // Different formats\n   * color.setValue(0xff0000);          // Hex number\n   * color.setValue('#ff0000');         // Hex string\n   * color.setValue([1, 0, 0]);         // RGB array\n   * color.setValue([1, 0, 0, 0.5]);    // RGBA array\n   * color.setValue({ r: 1, g: 0, b: 0 }); // RGB object\n   *\n   * // Copy from another color\n   * const red = new Color('red');\n   * color.setValue(red);\n   * ```\n   * @throws {Error} If the color value is invalid or null\n   * @see {@link Color.value} For the underlying value property\n   */\n  setValue(value) {\n    this.value = value;\n    return this;\n  }\n  /**\n   * The current color source. This property allows getting and setting the color value\n   * while preserving the original format where possible.\n   * @remarks\n   * When setting:\n   * - Setting to a `Color` instance copies its source and components\n   * - Setting to other valid sources normalizes and stores the value\n   * - Setting to `null` throws an Error\n   * - The color remains unchanged if normalization fails\n   *\n   * When getting:\n   * - Returns `null` if color was modified by {@link Color.multiply} or {@link Color.premultiply}\n   * - Otherwise returns the original color source\n   * @example\n   * ```ts\n   * // Setting different color formats\n   * const color = new Color();\n   *\n   * color.value = 0xff0000;         // Hex number\n   * color.value = '#ff0000';        // Hex string\n   * color.value = [1, 0, 0];        // RGB array\n   * color.value = [1, 0, 0, 0.5];   // RGBA array\n   * color.value = { r: 1, g: 0, b: 0 }; // RGB object\n   *\n   * // Copying from another color\n   * const red = new Color('red');\n   * color.value = red;  // Copies red's components\n   *\n   * // Getting the value\n   * console.log(color.value);  // Returns original format\n   *\n   * // After modifications\n   * color.multiply([0.5, 0.5, 0.5]);\n   * console.log(color.value);  // Returns null\n   * ```\n   * @throws {Error} When attempting to set `null`\n   */\n  set value(value) {\n    if (value instanceof _Color) {\n      this._value = this._cloneSource(value._value);\n      this._int = value._int;\n      this._components.set(value._components);\n    } else if (value === null) {\n      throw new Error(\"Cannot set Color#value to null\");\n    } else if (this._value === null || !this._isSourceEqual(this._value, value)) {\n      this._value = this._cloneSource(value);\n      this._normalize(this._value);\n    }\n  }\n  get value() {\n    return this._value;\n  }\n  /**\n   * Copy a color source internally.\n   * @param value - Color source\n   */\n  _cloneSource(value) {\n    if (typeof value === \"string\" || typeof value === \"number\" || value instanceof Number || value === null) {\n      return value;\n    } else if (Array.isArray(value) || ArrayBuffer.isView(value)) {\n      return value.slice(0);\n    } else if (typeof value === \"object\" && value !== null) {\n      return { ...value };\n    }\n    return value;\n  }\n  /**\n   * Equality check for color sources.\n   * @param value1 - First color source\n   * @param value2 - Second color source\n   * @returns `true` if the color sources are equal, `false` otherwise.\n   */\n  _isSourceEqual(value1, value2) {\n    const type1 = typeof value1;\n    const type2 = typeof value2;\n    if (type1 !== type2) {\n      return false;\n    } else if (type1 === \"number\" || type1 === \"string\" || value1 instanceof Number) {\n      return value1 === value2;\n    } else if (Array.isArray(value1) && Array.isArray(value2) || ArrayBuffer.isView(value1) && ArrayBuffer.isView(value2)) {\n      if (value1.length !== value2.length) {\n        return false;\n      }\n      return value1.every((v, i) => v === value2[i]);\n    } else if (value1 !== null && value2 !== null) {\n      const keys1 = Object.keys(value1);\n      const keys2 = Object.keys(value2);\n      if (keys1.length !== keys2.length) {\n        return false;\n      }\n      return keys1.every((key) => value1[key] === value2[key]);\n    }\n    return value1 === value2;\n  }\n  /**\n   * Convert to a RGBA color object with normalized components (0-1).\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert colors to RGBA objects\n   * new Color('white').toRgba();     // returns { r: 1, g: 1, b: 1, a: 1 }\n   * new Color('#ff0000').toRgba();   // returns { r: 1, g: 0, b: 0, a: 1 }\n   *\n   * // With transparency\n   * new Color('rgba(255,0,0,0.5)').toRgba(); // returns { r: 1, g: 0, b: 0, a: 0.5 }\n   * ```\n   * @returns An RGBA object with normalized components\n   */\n  toRgba() {\n    const [r, g, b, a] = this._components;\n    return { r, g, b, a };\n  }\n  /**\n   * Convert to a RGB color object with normalized components (0-1).\n   *\n   * Alpha component is omitted in the output.\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert colors to RGB objects\n   * new Color('white').toRgb();     // returns { r: 1, g: 1, b: 1 }\n   * new Color('#ff0000').toRgb();   // returns { r: 1, g: 0, b: 0 }\n   *\n   * // Alpha is ignored\n   * new Color('rgba(255,0,0,0.5)').toRgb(); // returns { r: 1, g: 0, b: 0 }\n   * ```\n   * @returns An RGB object with normalized components\n   */\n  toRgb() {\n    const [r, g, b] = this._components;\n    return { r, g, b };\n  }\n  /**\n   * Convert to a CSS-style rgba string representation.\n   *\n   * RGB components are scaled to 0-255 range, alpha remains 0-1.\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert colors to RGBA strings\n   * new Color('white').toRgbaString();     // returns \"rgba(255,255,255,1)\"\n   * new Color('#ff0000').toRgbaString();   // returns \"rgba(255,0,0,1)\"\n   *\n   * // With transparency\n   * new Color([1, 0, 0, 0.5]).toRgbaString(); // returns \"rgba(255,0,0,0.5)\"\n   * ```\n   * @returns A CSS-compatible rgba string\n   */\n  toRgbaString() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return `rgba(${r},${g},${b},${this.alpha})`;\n  }\n  /**\n   * Convert to an [R, G, B] array of clamped uint8 values (0 to 255).\n   * @param {number[]|Uint8Array|Uint8ClampedArray} [out] - Optional output array. If not provided,\n   * a cached array will be used and returned.\n   * @returns Array containing RGB components as integers between 0-255\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toUint8RgbArray(); // returns [255, 255, 255]\n   * new Color('#ff0000').toUint8RgbArray(); // returns [255, 0, 0]\n   *\n   * // Using custom output array\n   * const rgb = new Uint8Array(3);\n   * new Color('blue').toUint8RgbArray(rgb); // rgb is now [0, 0, 255]\n   *\n   * // Using different array types\n   * new Color('red').toUint8RgbArray(new Uint8ClampedArray(3)); // [255, 0, 0]\n   * new Color('red').toUint8RgbArray([]); // [255, 0, 0]\n   * ```\n   * @remarks\n   * - Output values are always clamped between 0-255\n   * - Alpha component is not included in output\n   * - Reuses internal cache array if no output array provided\n   */\n  toUint8RgbArray(out) {\n    const [r, g, b] = this._components;\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out || (out = this._arrayRgb);\n    out[0] = Math.round(r * 255);\n    out[1] = Math.round(g * 255);\n    out[2] = Math.round(b * 255);\n    return out;\n  }\n  /**\n   * Convert to an [R, G, B, A] array of normalized floats (numbers from 0.0 to 1.0).\n   * @param {number[]|Float32Array} [out] - Optional output array. If not provided,\n   * a cached array will be used and returned.\n   * @returns Array containing RGBA components as floats between 0-1\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toArray();  // returns [1, 1, 1, 1]\n   * new Color('red').toArray();    // returns [1, 0, 0, 1]\n   *\n   * // With alpha\n   * new Color('rgba(255,0,0,0.5)').toArray(); // returns [1, 0, 0, 0.5]\n   *\n   * // Using custom output array\n   * const rgba = new Float32Array(4);\n   * new Color('blue').toArray(rgba); // rgba is now [0, 0, 1, 1]\n   * ```\n   * @remarks\n   * - Output values are normalized between 0-1\n   * - Includes alpha component as the fourth value\n   * - Reuses internal cache array if no output array provided\n   */\n  toArray(out) {\n    if (!this._arrayRgba) {\n      this._arrayRgba = [];\n    }\n    out || (out = this._arrayRgba);\n    const [r, g, b, a] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    out[3] = a;\n    return out;\n  }\n  /**\n   * Convert to an [R, G, B] array of normalized floats (numbers from 0.0 to 1.0).\n   * @param {number[]|Float32Array} [out] - Optional output array. If not provided,\n   * a cached array will be used and returned.\n   * @returns Array containing RGB components as floats between 0-1\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toRgbArray(); // returns [1, 1, 1]\n   * new Color('red').toRgbArray();   // returns [1, 0, 0]\n   *\n   * // Using custom output array\n   * const rgb = new Float32Array(3);\n   * new Color('blue').toRgbArray(rgb); // rgb is now [0, 0, 1]\n   * ```\n   * @remarks\n   * - Output values are normalized between 0-1\n   * - Alpha component is omitted from output\n   * - Reuses internal cache array if no output array provided\n   */\n  toRgbArray(out) {\n    if (!this._arrayRgb) {\n      this._arrayRgb = [];\n    }\n    out || (out = this._arrayRgb);\n    const [r, g, b] = this._components;\n    out[0] = r;\n    out[1] = g;\n    out[2] = b;\n    return out;\n  }\n  /**\n   * Convert to a hexadecimal number.\n   * @returns The color as a 24-bit RGB integer\n   * @example\n   * ```ts\n   * // Basic usage\n   * new Color('white').toNumber(); // returns 0xffffff\n   * new Color('red').toNumber();   // returns 0xff0000\n   *\n   * // Store as hex\n   * const color = new Color('blue');\n   * const hex = color.toNumber(); // 0x0000ff\n   * ```\n   */\n  toNumber() {\n    return this._int;\n  }\n  /**\n   * Convert to a BGR number.\n   *\n   * Useful for platforms that expect colors in BGR format.\n   * @returns The color as a 24-bit BGR integer\n   * @example\n   * ```ts\n   * // Convert RGB to BGR\n   * new Color(0xffcc99).toBgrNumber(); // returns 0x99ccff\n   *\n   * // Common use case: platform-specific color format\n   * const color = new Color('orange');\n   * const bgrColor = color.toBgrNumber(); // Color with swapped R/B channels\n   * ```\n   * @remarks\n   * This swaps the red and blue channels compared to the normal RGB format:\n   * - RGB 0xRRGGBB becomes BGR 0xBBGGRR\n   */\n  toBgrNumber() {\n    const [r, g, b] = this.toUint8RgbArray();\n    return (b << 16) + (g << 8) + r;\n  }\n  /**\n   * Convert to a hexadecimal number in little endian format (e.g., BBGGRR).\n   *\n   * Useful for platforms that expect colors in little endian byte order.\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Convert RGB color to little endian format\n   * new Color(0xffcc99).toLittleEndianNumber(); // returns 0x99ccff\n   *\n   * // Common use cases:\n   * const color = new Color('orange');\n   * const leColor = color.toLittleEndianNumber(); // Swaps byte order for LE systems\n   *\n   * // Multiple conversions\n   * const colors = {\n   *     normal: 0xffcc99,\n   *     littleEndian: new Color(0xffcc99).toLittleEndianNumber(), // 0x99ccff\n   *     backToNormal: new Color(0x99ccff).toLittleEndianNumber()  // 0xffcc99\n   * };\n   * ```\n   * @remarks\n   * - Swaps R and B channels in the color value\n   * - RGB 0xRRGGBB becomes 0xBBGGRR\n   * - Useful for systems that use little endian byte order\n   * - Can be used to convert back and forth between formats\n   * @returns The color as a number in little endian format (BBGGRR)\n   * @see {@link Color.toBgrNumber} For BGR format without byte swapping\n   */\n  toLittleEndianNumber() {\n    const value = this._int;\n    return (value >> 16) + (value & 65280) + ((value & 255) << 16);\n  }\n  /**\n   * Multiply with another color.\n   *\n   * This action is destructive and modifies the original color.\n   * @param {ColorSource} value - The color to multiply by. Accepts any valid color format:\n   * - Hex strings/numbers (e.g., '#ff0000', 0xff0000)\n   * - RGB/RGBA arrays ([1, 0, 0], [1, 0, 0, 1])\n   * - Color objects ({ r: 1, g: 0, b: 0 })\n   * - CSS color names ('red', 'blue')\n   * @returns this - The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic multiplication\n   * const color = new Color('#ff0000');\n   * color.multiply(0x808080); // 50% darker red\n   *\n   * // With transparency\n   * color.multiply([1, 1, 1, 0.5]); // 50% transparent\n   *\n   * // Chain operations\n   * color\n   *     .multiply('#808080')\n   *     .multiply({ r: 1, g: 1, b: 1, a: 0.5 });\n   * ```\n   * @remarks\n   * - Multiplies each RGB component and alpha separately\n   * - Values are clamped between 0-1\n   * - Original color format is lost (value becomes null)\n   * - Operation cannot be undone\n   */\n  multiply(value) {\n    const [r, g, b, a] = _Color._temp.setValue(value)._components;\n    this._components[0] *= r;\n    this._components[1] *= g;\n    this._components[2] *= b;\n    this._components[3] *= a;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Converts color to a premultiplied alpha format.\n   *\n   * This action is destructive and modifies the original color.\n   * @param alpha - The alpha value to multiply by (0-1)\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels\n   * @returns {Color} The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic premultiplication\n   * const color = new Color('red');\n   * color.premultiply(0.5); // 50% transparent red with premultiplied RGB\n   *\n   * // Alpha only (RGB unchanged)\n   * color.premultiply(0.5, false); // 50% transparent, original RGB\n   *\n   * // Chain with other operations\n   * color\n   *     .multiply(0x808080)\n   *     .premultiply(0.5)\n   *     .toNumber();\n   * ```\n   * @remarks\n   * - RGB channels are multiplied by alpha when applyToRGB is true\n   * - Alpha is always set to the provided value\n   * - Values are clamped between 0-1\n   * - Original color format is lost (value becomes null)\n   * - Operation cannot be undone\n   */\n  premultiply(alpha, applyToRGB = true) {\n    if (applyToRGB) {\n      this._components[0] *= alpha;\n      this._components[1] *= alpha;\n      this._components[2] *= alpha;\n    }\n    this._components[3] = alpha;\n    this._refreshInt();\n    this._value = null;\n    return this;\n  }\n  /**\n   * Returns the color as a 32-bit premultiplied alpha integer.\n   *\n   * Format: 0xAARRGGBB\n   * @param {number} alpha - The alpha value to multiply by (0-1)\n   * @param {boolean} [applyToRGB=true] - Whether to premultiply RGB channels\n   * @returns {number} The premultiplied color as a 32-bit integer\n   * @example\n   * ```ts\n   * // Convert to premultiplied format\n   * const color = new Color('red');\n   *\n   * // Full opacity (0xFFRRGGBB)\n   * color.toPremultiplied(1.0); // 0xFFFF0000\n   *\n   * // 50% transparency with premultiplied RGB\n   * color.toPremultiplied(0.5); // 0x7F7F0000\n   *\n   * // 50% transparency without RGB premultiplication\n   * color.toPremultiplied(0.5, false); // 0x7FFF0000\n   * ```\n   * @remarks\n   * - Returns full opacity (0xFF000000) when alpha is 1.0\n   * - Returns 0 when alpha is 0.0 and applyToRGB is true\n   * - RGB values are rounded during premultiplication\n   */\n  toPremultiplied(alpha, applyToRGB = true) {\n    if (alpha === 1) {\n      return (255 << 24) + this._int;\n    }\n    if (alpha === 0) {\n      return applyToRGB ? 0 : this._int;\n    }\n    let r = this._int >> 16 & 255;\n    let g = this._int >> 8 & 255;\n    let b = this._int & 255;\n    if (applyToRGB) {\n      r = r * alpha + 0.5 | 0;\n      g = g * alpha + 0.5 | 0;\n      b = b * alpha + 0.5 | 0;\n    }\n    return (alpha * 255 << 24) + (r << 16) + (g << 8) + b;\n  }\n  /**\n   * Convert to a hexadecimal string (6 characters).\n   * @returns A CSS-compatible hex color string (e.g., \"#ff0000\")\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Basic colors\n   * new Color('red').toHex();    // returns \"#ff0000\"\n   * new Color('white').toHex();  // returns \"#ffffff\"\n   * new Color('black').toHex();  // returns \"#000000\"\n   *\n   * // From different formats\n   * new Color(0xff0000).toHex(); // returns \"#ff0000\"\n   * new Color([1, 0, 0]).toHex(); // returns \"#ff0000\"\n   * new Color({ r: 1, g: 0, b: 0 }).toHex(); // returns \"#ff0000\"\n   * ```\n   * @remarks\n   * - Always returns a 6-character hex string\n   * - Includes leading \"#\" character\n   * - Alpha channel is ignored\n   * - Values are rounded to nearest hex value\n   */\n  toHex() {\n    const hexString = this._int.toString(16);\n    return `#${\"000000\".substring(0, 6 - hexString.length) + hexString}`;\n  }\n  /**\n   * Convert to a hexadecimal string with alpha (8 characters).\n   * @returns A CSS-compatible hex color string with alpha (e.g., \"#ff0000ff\")\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // Fully opaque colors\n   * new Color('red').toHexa();   // returns \"#ff0000ff\"\n   * new Color('white').toHexa(); // returns \"#ffffffff\"\n   *\n   * // With transparency\n   * new Color('rgba(255, 0, 0, 0.5)').toHexa(); // returns \"#ff00007f\"\n   * new Color([1, 0, 0, 0]).toHexa(); // returns \"#ff000000\"\n   * ```\n   * @remarks\n   * - Returns an 8-character hex string\n   * - Includes leading \"#\" character\n   * - Alpha is encoded in last two characters\n   * - Values are rounded to nearest hex value\n   */\n  toHexa() {\n    const alphaValue = Math.round(this._components[3] * 255);\n    const alphaString = alphaValue.toString(16);\n    return this.toHex() + \"00\".substring(0, 2 - alphaString.length) + alphaString;\n  }\n  /**\n   * Set alpha (transparency) value while preserving color components.\n   *\n   * Provides a chainable interface for setting alpha.\n   * @param alpha - Alpha value between 0 (fully transparent) and 1 (fully opaque)\n   * @returns The Color instance for chaining\n   * @example\n   * ```ts\n   * // Basic alpha setting\n   * const color = new Color('red');\n   * color.setAlpha(0.5);  // 50% transparent red\n   *\n   * // Chain with other operations\n   * color\n   *     .setValue('#ff0000')\n   *     .setAlpha(0.8)    // 80% opaque\n   *     .premultiply(0.5); // Further modify alpha\n   *\n   * // Reset to fully opaque\n   * color.setAlpha(1);\n   * ```\n   * @remarks\n   * - Alpha value is clamped between 0-1\n   * - Can be chained with other color operations\n   */\n  setAlpha(alpha) {\n    this._components[3] = this._clamp(alpha);\n    return this;\n  }\n  /**\n   * Normalize the input value into rgba\n   * @param value - Input value\n   */\n  _normalize(value) {\n    let r;\n    let g;\n    let b;\n    let a;\n    if ((typeof value === \"number\" || value instanceof Number) && value >= 0 && value <= 16777215) {\n      const int = value;\n      r = (int >> 16 & 255) / 255;\n      g = (int >> 8 & 255) / 255;\n      b = (int & 255) / 255;\n      a = 1;\n    } else if ((Array.isArray(value) || value instanceof Float32Array) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value);\n      [r, g, b, a = 1] = value;\n    } else if ((value instanceof Uint8Array || value instanceof Uint8ClampedArray) && value.length >= 3 && value.length <= 4) {\n      value = this._clamp(value, 0, 255);\n      [r, g, b, a = 255] = value;\n      r /= 255;\n      g /= 255;\n      b /= 255;\n      a /= 255;\n    } else if (typeof value === \"string\" || typeof value === \"object\") {\n      if (typeof value === \"string\") {\n        const match = _Color.HEX_PATTERN.exec(value);\n        if (match) {\n          value = `#${match[2]}`;\n        }\n      }\n      const color = colord(value);\n      if (color.isValid()) {\n        ({ r, g, b, a } = color.rgba);\n        r /= 255;\n        g /= 255;\n        b /= 255;\n      }\n    }\n    if (r !== void 0) {\n      this._components[0] = r;\n      this._components[1] = g;\n      this._components[2] = b;\n      this._components[3] = a;\n      this._refreshInt();\n    } else {\n      throw new Error(`Unable to convert color ${value}`);\n    }\n  }\n  /** Refresh the internal color rgb number */\n  _refreshInt() {\n    this._clamp(this._components);\n    const [r, g, b] = this._components;\n    this._int = (r * 255 << 16) + (g * 255 << 8) + (b * 255 | 0);\n  }\n  /**\n   * Clamps values to a range. Will override original values\n   * @param value - Value(s) to clamp\n   * @param min - Minimum value\n   * @param max - Maximum value\n   */\n  _clamp(value, min = 0, max = 1) {\n    if (typeof value === \"number\") {\n      return Math.min(Math.max(value, min), max);\n    }\n    value.forEach((v, i) => {\n      value[i] = Math.min(Math.max(v, min), max);\n    });\n    return value;\n  }\n  /**\n   * Check if a value can be interpreted as a valid color format.\n   * Supports all color formats that can be used with the Color class.\n   * @param value - Value to check\n   * @returns True if the value can be used as a color\n   * @example\n   * ```ts\n   * import { Color } from 'pixi.js';\n   *\n   * // CSS colors and hex values\n   * Color.isColorLike('red');          // true\n   * Color.isColorLike('#ff0000');      // true\n   * Color.isColorLike(0xff0000);       // true\n   *\n   * // Arrays (RGB/RGBA)\n   * Color.isColorLike([1, 0, 0]);      // true\n   * Color.isColorLike([1, 0, 0, 0.5]); // true\n   *\n   * // TypedArrays\n   * Color.isColorLike(new Float32Array([1, 0, 0]));          // true\n   * Color.isColorLike(new Uint8Array([255, 0, 0]));          // true\n   * Color.isColorLike(new Uint8ClampedArray([255, 0, 0]));   // true\n   *\n   * // Object formats\n   * Color.isColorLike({ r: 1, g: 0, b: 0 });            // true (RGB)\n   * Color.isColorLike({ r: 1, g: 0, b: 0, a: 0.5 });    // true (RGBA)\n   * Color.isColorLike({ h: 0, s: 100, l: 50 });         // true (HSL)\n   * Color.isColorLike({ h: 0, s: 100, l: 50, a: 0.5 }); // true (HSLA)\n   * Color.isColorLike({ h: 0, s: 100, v: 100 });        // true (HSV)\n   * Color.isColorLike({ h: 0, s: 100, v: 100, a: 0.5 });// true (HSVA)\n   *\n   * // Color instances\n   * Color.isColorLike(new Color('red')); // true\n   *\n   * // Invalid values\n   * Color.isColorLike(null);           // false\n   * Color.isColorLike(undefined);      // false\n   * Color.isColorLike({});             // false\n   * Color.isColorLike([]);             // false\n   * Color.isColorLike('not-a-color');  // false\n   * ```\n   * @remarks\n   * Checks for the following formats:\n   * - Numbers (0x000000 to 0xffffff)\n   * - CSS color strings\n   * - RGB/RGBA arrays and objects\n   * - HSL/HSLA objects\n   * - HSV/HSVA objects\n   * - TypedArrays (Float32Array, Uint8Array, Uint8ClampedArray)\n   * - Color instances\n   * @see {@link ColorSource} For supported color format types\n   * @see {@link Color.setValue} For setting color values\n   * @category utility\n   */\n  static isColorLike(value) {\n    return typeof value === \"number\" || typeof value === \"string\" || value instanceof Number || value instanceof _Color || Array.isArray(value) || value instanceof Uint8Array || value instanceof Uint8ClampedArray || value instanceof Float32Array || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 || value.r !== void 0 && value.g !== void 0 && value.b !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 || value.h !== void 0 && value.s !== void 0 && value.l !== void 0 && value.a !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 || value.h !== void 0 && value.s !== void 0 && value.v !== void 0 && value.a !== void 0;\n  }\n};\n/**\n * Static shared Color instance used for utility operations. This is a singleton color object\n * that can be reused to avoid creating unnecessary Color instances.\n * > [!IMPORTANT] You should be careful when using this shared instance, as it is mutable and can be\n * > changed by any code that uses it.\n * >\n * > It is best used for one-off color operations or temporary transformations.\n * > For persistent colors, create your own Color instance instead.\n * @example\n * ```ts\n * import { Color } from 'pixi.js';\n *\n * // Use shared instance for one-off color operations\n * Color.shared.setValue(0xff0000);\n * const redHex = Color.shared.toHex();     // \"#ff0000\"\n * const redRgb = Color.shared.toRgbArray(); // [1, 0, 0]\n *\n * // Temporary color transformations\n * const colorNumber = Color.shared\n *     .setValue('#ff0000')     // Set to red\n *     .setAlpha(0.5)          // Make semi-transparent\n *     .premultiply(0.8)       // Apply premultiplication\n *     .toNumber();            // Convert to number\n *\n * // Chain multiple operations\n * const result = Color.shared\n *     .setValue(someColor)\n *     .multiply(tintColor)\n *     .toPremultiplied(alpha);\n * ```\n * @remarks\n * - This is a shared instance - be careful about multiple code paths using it simultaneously\n * - Use for temporary color operations to avoid allocating new Color instances\n * - The value is preserved between operations, so reset if needed\n * - For persistent colors, create your own Color instance instead\n */\n_Color.shared = new _Color();\n/**\n * Temporary Color object for static uses internally.\n * As to not conflict with Color.shared.\n * @ignore\n */\n_Color._temp = new _Color();\n/** Pattern for hex strings */\n// eslint-disable-next-line @typescript-eslint/naming-convention\n_Color.HEX_PATTERN = /^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;\nlet Color = _Color;\n\nexport { Color };\n//# sourceMappingURL=Color.mjs.map\n","export default function(e,f){var a={white:\"#ffffff\",bisque:\"#ffe4c4\",blue:\"#0000ff\",cadetblue:\"#5f9ea0\",chartreuse:\"#7fff00\",chocolate:\"#d2691e\",coral:\"#ff7f50\",antiquewhite:\"#faebd7\",aqua:\"#00ffff\",azure:\"#f0ffff\",whitesmoke:\"#f5f5f5\",papayawhip:\"#ffefd5\",plum:\"#dda0dd\",blanchedalmond:\"#ffebcd\",black:\"#000000\",gold:\"#ffd700\",goldenrod:\"#daa520\",gainsboro:\"#dcdcdc\",cornsilk:\"#fff8dc\",cornflowerblue:\"#6495ed\",burlywood:\"#deb887\",aquamarine:\"#7fffd4\",beige:\"#f5f5dc\",crimson:\"#dc143c\",cyan:\"#00ffff\",darkblue:\"#00008b\",darkcyan:\"#008b8b\",darkgoldenrod:\"#b8860b\",darkkhaki:\"#bdb76b\",darkgray:\"#a9a9a9\",darkgreen:\"#006400\",darkgrey:\"#a9a9a9\",peachpuff:\"#ffdab9\",darkmagenta:\"#8b008b\",darkred:\"#8b0000\",darkorchid:\"#9932cc\",darkorange:\"#ff8c00\",darkslateblue:\"#483d8b\",gray:\"#808080\",darkslategray:\"#2f4f4f\",darkslategrey:\"#2f4f4f\",deeppink:\"#ff1493\",deepskyblue:\"#00bfff\",wheat:\"#f5deb3\",firebrick:\"#b22222\",floralwhite:\"#fffaf0\",ghostwhite:\"#f8f8ff\",darkviolet:\"#9400d3\",magenta:\"#ff00ff\",green:\"#008000\",dodgerblue:\"#1e90ff\",grey:\"#808080\",honeydew:\"#f0fff0\",hotpink:\"#ff69b4\",blueviolet:\"#8a2be2\",forestgreen:\"#228b22\",lawngreen:\"#7cfc00\",indianred:\"#cd5c5c\",indigo:\"#4b0082\",fuchsia:\"#ff00ff\",brown:\"#a52a2a\",maroon:\"#800000\",mediumblue:\"#0000cd\",lightcoral:\"#f08080\",darkturquoise:\"#00ced1\",lightcyan:\"#e0ffff\",ivory:\"#fffff0\",lightyellow:\"#ffffe0\",lightsalmon:\"#ffa07a\",lightseagreen:\"#20b2aa\",linen:\"#faf0e6\",mediumaquamarine:\"#66cdaa\",lemonchiffon:\"#fffacd\",lime:\"#00ff00\",khaki:\"#f0e68c\",mediumseagreen:\"#3cb371\",limegreen:\"#32cd32\",mediumspringgreen:\"#00fa9a\",lightskyblue:\"#87cefa\",lightblue:\"#add8e6\",midnightblue:\"#191970\",lightpink:\"#ffb6c1\",mistyrose:\"#ffe4e1\",moccasin:\"#ffe4b5\",mintcream:\"#f5fffa\",lightslategray:\"#778899\",lightslategrey:\"#778899\",navajowhite:\"#ffdead\",navy:\"#000080\",mediumvioletred:\"#c71585\",powderblue:\"#b0e0e6\",palegoldenrod:\"#eee8aa\",oldlace:\"#fdf5e6\",paleturquoise:\"#afeeee\",mediumturquoise:\"#48d1cc\",mediumorchid:\"#ba55d3\",rebeccapurple:\"#663399\",lightsteelblue:\"#b0c4de\",mediumslateblue:\"#7b68ee\",thistle:\"#d8bfd8\",tan:\"#d2b48c\",orchid:\"#da70d6\",mediumpurple:\"#9370db\",purple:\"#800080\",pink:\"#ffc0cb\",skyblue:\"#87ceeb\",springgreen:\"#00ff7f\",palegreen:\"#98fb98\",red:\"#ff0000\",yellow:\"#ffff00\",slateblue:\"#6a5acd\",lavenderblush:\"#fff0f5\",peru:\"#cd853f\",palevioletred:\"#db7093\",violet:\"#ee82ee\",teal:\"#008080\",slategray:\"#708090\",slategrey:\"#708090\",aliceblue:\"#f0f8ff\",darkseagreen:\"#8fbc8f\",darkolivegreen:\"#556b2f\",greenyellow:\"#adff2f\",seagreen:\"#2e8b57\",seashell:\"#fff5ee\",tomato:\"#ff6347\",silver:\"#c0c0c0\",sienna:\"#a0522d\",lavender:\"#e6e6fa\",lightgreen:\"#90ee90\",orange:\"#ffa500\",orangered:\"#ff4500\",steelblue:\"#4682b4\",royalblue:\"#4169e1\",turquoise:\"#40e0d0\",yellowgreen:\"#9acd32\",salmon:\"#fa8072\",saddlebrown:\"#8b4513\",sandybrown:\"#f4a460\",rosybrown:\"#bc8f8f\",darksalmon:\"#e9967a\",lightgoldenrodyellow:\"#fafad2\",snow:\"#fffafa\",lightgrey:\"#d3d3d3\",lightgray:\"#d3d3d3\",dimgray:\"#696969\",dimgrey:\"#696969\",olivedrab:\"#6b8e23\",olive:\"#808000\"},r={};for(var d in a)r[a[d]]=d;var l={};e.prototype.toName=function(f){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return\"transparent\";var d,i,n=r[this.toHex()];if(n)return n;if(null==f?void 0:f.closest){var o=this.toRgb(),t=1/0,b=\"black\";if(!l.length)for(var c in a)l[c]=new e(a[c]).toRgb();for(var g in a){var u=(d=o,i=l[g],Math.pow(d.r-i.r,2)+Math.pow(d.g-i.g,2)+Math.pow(d.b-i.b,2));u<t&&(t=u,b=g)}return b}};f.string.push([function(f){var r=f.toLowerCase(),d=\"transparent\"===r?\"#0000\":a[r];return d?new e(d).toRgb():null},\"name\"])}\n","import { BatchableSprite } from '../sprite/BatchableSprite.mjs';\n\n\"use strict\";\nclass BatchableHTMLText extends BatchableSprite {\n  /**\n   * Creates an instance of BatchableHTMLText.\n   * @param renderer - The renderer instance to be used.\n   */\n  constructor(renderer) {\n    super();\n    this.generatingTexture = false;\n    this.currentKey = \"--\";\n    this._renderer = renderer;\n    renderer.runners.resolutionChange.add(this);\n  }\n  /** Handles resolution changes for the HTML text. If the text has auto resolution enabled, it triggers a view update. */\n  resolutionChange() {\n    const text = this.renderable;\n    if (text._autoResolution) {\n      text.onViewUpdate();\n    }\n  }\n  /** Destroys the BatchableHTMLText instance. Returns the texture promise to the renderer and cleans up references. */\n  destroy() {\n    const { htmlText } = this._renderer;\n    htmlText.getReferenceCount(this.currentKey) === null ? htmlText.returnTexturePromise(this.texturePromise) : htmlText.decreaseReferenceCount(this.currentKey);\n    this._renderer.runners.resolutionChange.remove(this);\n    this.texturePromise = null;\n    this._renderer = null;\n  }\n}\n\nexport { BatchableHTMLText };\n//# sourceMappingURL=BatchableHTMLText.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { updateTextBounds } from '../text/utils/updateTextBounds.mjs';\nimport { BatchableHTMLText } from './BatchableHTMLText.mjs';\n\n\"use strict\";\nclass HTMLTextPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  validateRenderable(htmlText) {\n    const gpuText = this._getGpuText(htmlText);\n    const newKey = htmlText.styleKey;\n    if (gpuText.currentKey !== newKey) {\n      return true;\n    }\n    return false;\n  }\n  addRenderable(htmlText, instructionSet) {\n    const batchableHTMLText = this._getGpuText(htmlText);\n    if (htmlText._didTextUpdate) {\n      const resolution = htmlText._autoResolution ? this._renderer.resolution : htmlText.resolution;\n      if (batchableHTMLText.currentKey !== htmlText.styleKey || htmlText.resolution !== resolution) {\n        this._updateGpuText(htmlText).catch((e) => {\n          console.error(e);\n        });\n      }\n      htmlText._didTextUpdate = false;\n      updateTextBounds(batchableHTMLText, htmlText);\n    }\n    this._renderer.renderPipes.batch.addToBatch(batchableHTMLText, instructionSet);\n  }\n  updateRenderable(htmlText) {\n    const batchableHTMLText = this._getGpuText(htmlText);\n    batchableHTMLText._batcher.updateElement(batchableHTMLText);\n  }\n  async _updateGpuText(htmlText) {\n    htmlText._didTextUpdate = false;\n    const batchableHTMLText = this._getGpuText(htmlText);\n    if (batchableHTMLText.generatingTexture)\n      return;\n    const oldTexturePromise = batchableHTMLText.texturePromise;\n    batchableHTMLText.texturePromise = null;\n    batchableHTMLText.generatingTexture = true;\n    htmlText._resolution = htmlText._autoResolution ? this._renderer.resolution : htmlText.resolution;\n    let texturePromise = this._renderer.htmlText.getTexturePromise(htmlText);\n    if (oldTexturePromise) {\n      texturePromise = texturePromise.finally(() => {\n        this._renderer.htmlText.decreaseReferenceCount(batchableHTMLText.currentKey);\n        this._renderer.htmlText.returnTexturePromise(oldTexturePromise);\n      });\n    }\n    batchableHTMLText.texturePromise = texturePromise;\n    batchableHTMLText.currentKey = htmlText.styleKey;\n    batchableHTMLText.texture = await texturePromise;\n    const renderGroup = htmlText.renderGroup || htmlText.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.structureDidChange = true;\n    }\n    batchableHTMLText.generatingTexture = false;\n    updateTextBounds(batchableHTMLText, htmlText);\n  }\n  _getGpuText(htmlText) {\n    return htmlText._gpuData[this._renderer.uid] || this.initGpuText(htmlText);\n  }\n  initGpuText(htmlText) {\n    const batchableHTMLText = new BatchableHTMLText(this._renderer);\n    batchableHTMLText.renderable = htmlText;\n    batchableHTMLText.transform = htmlText.groupTransform;\n    batchableHTMLText.texture = Texture.EMPTY;\n    batchableHTMLText.bounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    batchableHTMLText.roundPixels = this._renderer._roundPixels | htmlText._roundPixels;\n    htmlText._resolution = htmlText._autoResolution ? this._renderer.resolution : htmlText.resolution;\n    htmlText._gpuData[this._renderer.uid] = batchableHTMLText;\n    return batchableHTMLText;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nHTMLTextPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"htmlText\"\n};\n\nexport { HTMLTextPipe };\n//# sourceMappingURL=HTMLTextPipe.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nconst nssvg = \"http://www.w3.org/2000/svg\";\nconst nsxhtml = \"http://www.w3.org/1999/xhtml\";\nclass HTMLTextRenderData {\n  constructor() {\n    this.svgRoot = document.createElementNS(nssvg, \"svg\");\n    this.foreignObject = document.createElementNS(nssvg, \"foreignObject\");\n    this.domElement = document.createElementNS(nsxhtml, \"div\");\n    this.styleElement = document.createElementNS(nsxhtml, \"style\");\n    const { foreignObject, svgRoot, styleElement, domElement } = this;\n    foreignObject.setAttribute(\"width\", \"10000\");\n    foreignObject.setAttribute(\"height\", \"10000\");\n    foreignObject.style.overflow = \"hidden\";\n    svgRoot.appendChild(foreignObject);\n    foreignObject.appendChild(styleElement);\n    foreignObject.appendChild(domElement);\n    this.image = DOMAdapter.get().createImage();\n  }\n  destroy() {\n    this.svgRoot.remove();\n    this.foreignObject.remove();\n    this.styleElement.remove();\n    this.domElement.remove();\n    this.image.src = \"\";\n    this.image.remove();\n    this.svgRoot = null;\n    this.foreignObject = null;\n    this.styleElement = null;\n    this.domElement = null;\n    this.image = null;\n    this.canvasAndContext = null;\n  }\n}\n\nexport { HTMLTextRenderData };\n//# sourceMappingURL=HTMLTextRenderData.mjs.map\n","import { Cache } from '../../../assets/cache/Cache.mjs';\nimport { loadFontCSS } from './loadFontCSS.mjs';\n\n\"use strict\";\nconst FontStylePromiseCache = /* @__PURE__ */ new Map();\nasync function getFontCss(fontFamilies) {\n  const fontPromises = fontFamilies.filter((fontFamily) => Cache.has(`${fontFamily}-and-url`)).map((fontFamily) => {\n    if (!FontStylePromiseCache.has(fontFamily)) {\n      const { entries } = Cache.get(`${fontFamily}-and-url`);\n      const promises = [];\n      entries.forEach((entry) => {\n        const url = entry.url;\n        const faces = entry.faces;\n        const out = faces.map((face) => ({ weight: face.weight, style: face.style }));\n        promises.push(\n          ...out.map(\n            (style) => loadFontCSS(\n              {\n                fontWeight: style.weight,\n                fontStyle: style.style,\n                fontFamily\n              },\n              url\n            )\n          )\n        );\n      });\n      FontStylePromiseCache.set(\n        fontFamily,\n        Promise.all(promises).then((css) => css.join(\"\\n\"))\n      );\n    }\n    return FontStylePromiseCache.get(fontFamily);\n  });\n  return (await Promise.all(fontPromises)).join(\"\\n\");\n}\n\nexport { FontStylePromiseCache, getFontCss };\n//# sourceMappingURL=getFontCss.mjs.map\n","import { HTMLTextRenderData } from '../HTMLTextRenderData.mjs';\n\n\"use strict\";\nlet tempHTMLTextRenderData;\nfunction measureHtmlText(text, style, fontStyleCSS, htmlTextRenderData) {\n  htmlTextRenderData || (htmlTextRenderData = tempHTMLTextRenderData || (tempHTMLTextRenderData = new HTMLTextRenderData()));\n  const { domElement, styleElement, svgRoot } = htmlTextRenderData;\n  domElement.innerHTML = `<style>${style.cssStyle};</style><div style='padding:0'>${text}</div>`;\n  domElement.setAttribute(\"style\", \"transform-origin: top left; display: inline-block\");\n  if (fontStyleCSS) {\n    styleElement.textContent = fontStyleCSS;\n  }\n  document.body.appendChild(svgRoot);\n  const contentBounds = domElement.getBoundingClientRect();\n  svgRoot.remove();\n  const doublePadding = style.padding * 2;\n  return {\n    width: contentBounds.width - doublePadding,\n    height: contentBounds.height - doublePadding\n  };\n}\n\nexport { measureHtmlText };\n//# sourceMappingURL=measureHtmlText.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { CanvasPool } from '../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { TexturePool } from '../../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../../rendering/renderers/types.mjs';\nimport { isSafari } from '../../utils/browser/isSafari.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { BigPool } from '../../utils/pool/PoolGroup.mjs';\nimport { getPo2TextureFromSource } from '../text/utils/getPo2TextureFromSource.mjs';\nimport { HTMLTextRenderData } from './HTMLTextRenderData.mjs';\nimport { extractFontFamilies } from './utils/extractFontFamilies.mjs';\nimport { getFontCss } from './utils/getFontCss.mjs';\nimport { getSVGUrl } from './utils/getSVGUrl.mjs';\nimport { getTemporaryCanvasFromImage } from './utils/getTemporaryCanvasFromImage.mjs';\nimport { loadSVGImage } from './utils/loadSVGImage.mjs';\nimport { measureHtmlText } from './utils/measureHtmlText.mjs';\n\n\"use strict\";\nclass HTMLTextSystem {\n  constructor(renderer) {\n    this._activeTextures = {};\n    this._renderer = renderer;\n    this._createCanvas = renderer.type === RendererType.WEBGPU;\n  }\n  /**\n   * @param options\n   * @deprecated Use getTexturePromise instead\n   */\n  getTexture(options) {\n    return this.getTexturePromise(options);\n  }\n  /**\n   * Increases the reference count for a texture.\n   * @param text - The HTMLText instance associated with the texture.\n   */\n  getManagedTexture(text) {\n    const textKey = text.styleKey;\n    if (this._activeTextures[textKey]) {\n      this._increaseReferenceCount(textKey);\n      return this._activeTextures[textKey].promise;\n    }\n    const promise = this._buildTexturePromise(text).then((texture) => {\n      this._activeTextures[textKey].texture = texture;\n      return texture;\n    });\n    this._activeTextures[textKey] = {\n      texture: null,\n      promise,\n      usageCount: 1\n    };\n    return promise;\n  }\n  /**\n   * Gets the current reference count for a texture associated with a text key.\n   * @param textKey - The unique key identifying the text style configuration\n   * @returns The number of Text instances currently using this texture\n   */\n  getReferenceCount(textKey) {\n    return this._activeTextures[textKey]?.usageCount ?? null;\n  }\n  _increaseReferenceCount(textKey) {\n    this._activeTextures[textKey].usageCount++;\n  }\n  /**\n   * Decreases the reference count for a texture.\n   * If the count reaches zero, the texture is cleaned up.\n   * @param textKey - The key associated with the HTMLText instance.\n   */\n  decreaseReferenceCount(textKey) {\n    const activeTexture = this._activeTextures[textKey];\n    if (!activeTexture)\n      return;\n    activeTexture.usageCount--;\n    if (activeTexture.usageCount === 0) {\n      if (activeTexture.texture) {\n        this._cleanUp(activeTexture.texture);\n      } else {\n        activeTexture.promise.then((texture) => {\n          activeTexture.texture = texture;\n          this._cleanUp(activeTexture.texture);\n        }).catch(() => {\n          warn(\"HTMLTextSystem: Failed to clean texture\");\n        });\n      }\n      this._activeTextures[textKey] = null;\n    }\n  }\n  /**\n   * Returns a promise that resolves to a texture for the given HTMLText options.\n   * @param options - The options for the HTMLText.\n   * @returns A promise that resolves to a Texture.\n   */\n  getTexturePromise(options) {\n    return this._buildTexturePromise(options);\n  }\n  async _buildTexturePromise(options) {\n    const { text, style, resolution, textureStyle } = options;\n    const htmlTextData = BigPool.get(HTMLTextRenderData);\n    const fontFamilies = extractFontFamilies(text, style);\n    const fontCSS = await getFontCss(fontFamilies);\n    const measured = measureHtmlText(text, style, fontCSS, htmlTextData);\n    const width = Math.ceil(Math.ceil(Math.max(1, measured.width) + style.padding * 2) * resolution);\n    const height = Math.ceil(Math.ceil(Math.max(1, measured.height) + style.padding * 2) * resolution);\n    const image = htmlTextData.image;\n    const uvSafeOffset = 2;\n    image.width = (width | 0) + uvSafeOffset;\n    image.height = (height | 0) + uvSafeOffset;\n    const svgURL = getSVGUrl(text, style, resolution, fontCSS, htmlTextData);\n    await loadSVGImage(image, svgURL, isSafari() && fontFamilies.length > 0);\n    const resource = image;\n    let canvasAndContext;\n    if (this._createCanvas) {\n      canvasAndContext = getTemporaryCanvasFromImage(image, resolution);\n    }\n    const texture = getPo2TextureFromSource(\n      canvasAndContext ? canvasAndContext.canvas : resource,\n      image.width - uvSafeOffset,\n      image.height - uvSafeOffset,\n      resolution\n    );\n    if (textureStyle)\n      texture.source.style = textureStyle;\n    if (this._createCanvas) {\n      this._renderer.texture.initSource(texture.source);\n      CanvasPool.returnCanvasAndContext(canvasAndContext);\n    }\n    BigPool.return(htmlTextData);\n    return texture;\n  }\n  returnTexturePromise(texturePromise) {\n    texturePromise.then((texture) => {\n      this._cleanUp(texture);\n    }).catch(() => {\n      warn(\"HTMLTextSystem: Failed to clean texture\");\n    });\n  }\n  _cleanUp(texture) {\n    TexturePool.returnTexture(texture, true);\n    texture.source.resource = null;\n    texture.source.uploadMethodId = \"unknown\";\n  }\n  destroy() {\n    this._renderer = null;\n    for (const key in this._activeTextures) {\n      if (this._activeTextures[key])\n        this.returnTexturePromise(this._activeTextures[key].promise);\n    }\n    this._activeTextures = null;\n  }\n}\n/** @ignore */\nHTMLTextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"htmlText\"\n};\n\nexport { HTMLTextSystem };\n//# sourceMappingURL=HTMLTextSystem.mjs.map\n","\"use strict\";\nfunction extractFontFamilies(text, style) {\n  const fontFamily = style.fontFamily;\n  const fontFamilies = [];\n  const dedupe = {};\n  const regex = /font-family:([^;\"\\s]+)/g;\n  const matches = text.match(regex);\n  function addFontFamily(fontFamily2) {\n    if (!dedupe[fontFamily2]) {\n      fontFamilies.push(fontFamily2);\n      dedupe[fontFamily2] = true;\n    }\n  }\n  if (Array.isArray(fontFamily)) {\n    for (let i = 0; i < fontFamily.length; i++) {\n      addFontFamily(fontFamily[i]);\n    }\n  } else {\n    addFontFamily(fontFamily);\n  }\n  if (matches) {\n    matches.forEach((match) => {\n      const fontFamily2 = match.split(\":\")[1].trim();\n      addFontFamily(fontFamily2);\n    });\n  }\n  for (const i in style.tagStyles) {\n    const fontFamily2 = style.tagStyles[i].fontFamily;\n    addFontFamily(fontFamily2);\n  }\n  return fontFamilies;\n}\n\nexport { extractFontFamilies };\n//# sourceMappingURL=extractFontFamilies.mjs.map\n","import { loadFontAsBase64 } from './loadFontAsBase64.mjs';\n\n\"use strict\";\nasync function loadFontCSS(style, url) {\n  const dataSrc = await loadFontAsBase64(url);\n  return `@font-face {\n        font-family: \"${style.fontFamily}\";\n        font-weight: ${style.fontWeight};\n        font-style: ${style.fontStyle};\n        src: url('${dataSrc}');\n    }`;\n}\n\nexport { loadFontCSS };\n//# sourceMappingURL=loadFontCSS.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\n\n\"use strict\";\nasync function loadFontAsBase64(url) {\n  const response = await DOMAdapter.get().fetch(url);\n  const blob = await response.blob();\n  const reader = new FileReader();\n  const dataSrc = await new Promise((resolve, reject) => {\n    reader.onloadend = () => resolve(reader.result);\n    reader.onerror = reject;\n    reader.readAsDataURL(blob);\n  });\n  return dataSrc;\n}\n\nexport { loadFontAsBase64 };\n//# sourceMappingURL=loadFontAsBase64.mjs.map\n","\"use strict\";\nfunction getSVGUrl(text, style, resolution, fontCSS, htmlTextData) {\n  const { domElement, styleElement, svgRoot } = htmlTextData;\n  domElement.innerHTML = `<style>${style.cssStyle}</style><div style='padding:0;'>${text}</div>`;\n  domElement.setAttribute(\"style\", `transform: scale(${resolution});transform-origin: top left; display: inline-block`);\n  styleElement.textContent = fontCSS;\n  const { width, height } = htmlTextData.image;\n  svgRoot.setAttribute(\"width\", width.toString());\n  svgRoot.setAttribute(\"height\", height.toString());\n  return new XMLSerializer().serializeToString(svgRoot);\n}\n\nexport { getSVGUrl };\n//# sourceMappingURL=getSVGUrl.mjs.map\n","\"use strict\";\nfunction loadSVGImage(image, url, delay) {\n  return new Promise(async (resolve) => {\n    if (delay) {\n      await new Promise((resolve2) => setTimeout(resolve2, 100));\n    }\n    image.onload = () => {\n      resolve();\n    };\n    image.src = `data:image/svg+xml;charset=utf8,${encodeURIComponent(url)}`;\n    image.crossOrigin = \"anonymous\";\n  });\n}\n\nexport { loadSVGImage };\n//# sourceMappingURL=loadSVGImage.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nfunction isSafari() {\n  const { userAgent } = DOMAdapter.get().getNavigator();\n  return /^((?!chrome|android).)*safari/i.test(userAgent);\n}\n\nexport { isSafari };\n//# sourceMappingURL=isSafari.mjs.map\n","import { CanvasPool } from '../../../rendering/renderers/shared/texture/CanvasPool.mjs';\n\n\"use strict\";\nfunction getTemporaryCanvasFromImage(image, resolution) {\n  const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(\n    image.width,\n    image.height,\n    resolution\n  );\n  const { context } = canvasAndContext;\n  context.clearRect(0, 0, image.width, image.height);\n  context.drawImage(image, 0, 0);\n  return canvasAndContext;\n}\n\nexport { getTemporaryCanvasFromImage };\n//# sourceMappingURL=getTemporaryCanvasFromImage.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { HTMLTextPipe } from './HTMLTextPipe.mjs';\nimport { HTMLTextSystem } from './HTMLTextSystem.mjs';\n\n\"use strict\";\nextensions.add(HTMLTextSystem);\nextensions.add(HTMLTextPipe);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nfunction definedProps(obj) {\n  const result = {};\n  for (const key in obj) {\n    if (obj[key] !== void 0) {\n      result[key] = obj[key];\n    }\n  }\n  return result;\n}\n\nexport { definedProps };\n//# sourceMappingURL=definedProps.mjs.map\n","\"use strict\";\nfunction colorToUniform(rgb, alpha, out, offset) {\n  out[offset++] = (rgb >> 16 & 255) / 255;\n  out[offset++] = (rgb >> 8 & 255) / 255;\n  out[offset++] = (rgb & 255) / 255;\n  out[offset++] = alpha;\n}\nfunction color32BitToUniform(abgr, out, offset) {\n  const alpha = (abgr >> 24 & 255) / 255;\n  out[offset++] = (abgr & 255) / 255 * alpha;\n  out[offset++] = (abgr >> 8 & 255) / 255 * alpha;\n  out[offset++] = (abgr >> 16 & 255) / 255 * alpha;\n  out[offset++] = alpha;\n}\n\nexport { color32BitToUniform, colorToUniform };\n//# sourceMappingURL=colorToUniform.mjs.map\n","\"use strict\";\nfunction getBitmapTextLayout(chars, style, font, trimEnd) {\n  const layoutData = {\n    width: 0,\n    height: 0,\n    offsetY: 0,\n    scale: style.fontSize / font.baseMeasurementFontSize,\n    lines: [{\n      width: 0,\n      charPositions: [],\n      spaceWidth: 0,\n      spacesIndex: [],\n      chars: []\n    }]\n  };\n  layoutData.offsetY = font.baseLineOffset;\n  let currentLine = layoutData.lines[0];\n  let previousChar = null;\n  let firstWord = true;\n  const currentWord = {\n    spaceWord: false,\n    width: 0,\n    start: 0,\n    index: 0,\n    // use index to not modify the array as we use it a lot!\n    positions: [],\n    chars: []\n  };\n  const scale = font.baseMeasurementFontSize / style.fontSize;\n  const adjustedLetterSpacing = style.letterSpacing * scale;\n  const adjustedWordWrapWidth = style.wordWrapWidth * scale;\n  const adjustedLineHeight = style.lineHeight ? style.lineHeight * scale : font.lineHeight;\n  const breakWords = style.wordWrap && style.breakWords;\n  const nextWord = (word) => {\n    const start = currentLine.width;\n    for (let j = 0; j < currentWord.index; j++) {\n      const position = word.positions[j];\n      currentLine.chars.push(word.chars[j]);\n      currentLine.charPositions.push(position + start);\n    }\n    currentLine.width += word.width;\n    firstWord = false;\n    currentWord.width = 0;\n    currentWord.index = 0;\n    currentWord.chars.length = 0;\n  };\n  const nextLine = () => {\n    let index = currentLine.chars.length - 1;\n    if (trimEnd) {\n      let lastChar = currentLine.chars[index];\n      while (lastChar === \" \") {\n        currentLine.width -= font.chars[lastChar].xAdvance;\n        lastChar = currentLine.chars[--index];\n      }\n    }\n    layoutData.width = Math.max(layoutData.width, currentLine.width);\n    currentLine = {\n      width: 0,\n      charPositions: [],\n      chars: [],\n      spaceWidth: 0,\n      spacesIndex: []\n    };\n    firstWord = true;\n    layoutData.lines.push(currentLine);\n    layoutData.height += adjustedLineHeight;\n  };\n  const checkIsOverflow = (lineWidth) => lineWidth - adjustedLetterSpacing > adjustedWordWrapWidth;\n  for (let i = 0; i < chars.length + 1; i++) {\n    let char;\n    const isEnd = i === chars.length;\n    if (!isEnd) {\n      char = chars[i];\n    }\n    const charData = font.chars[char] || font.chars[\" \"];\n    const isSpace = /(?:\\s)/.test(char);\n    const isWordBreak = isSpace || char === \"\\r\" || char === \"\\n\" || isEnd;\n    if (isWordBreak) {\n      const addWordToNextLine = !firstWord && style.wordWrap && checkIsOverflow(currentLine.width + currentWord.width);\n      if (addWordToNextLine) {\n        nextLine();\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      } else {\n        currentWord.start = currentLine.width;\n        nextWord(currentWord);\n        if (!isEnd) {\n          currentLine.charPositions.push(0);\n        }\n      }\n      if (char === \"\\r\" || char === \"\\n\") {\n        nextLine();\n      } else if (!isEnd) {\n        const spaceWidth = charData.xAdvance + (charData.kerning[previousChar] || 0) + adjustedLetterSpacing;\n        currentLine.width += spaceWidth;\n        currentLine.spaceWidth = spaceWidth;\n        currentLine.spacesIndex.push(currentLine.charPositions.length);\n        currentLine.chars.push(char);\n      }\n    } else {\n      const kerning = charData.kerning[previousChar] || 0;\n      const nextCharWidth = charData.xAdvance + kerning + adjustedLetterSpacing;\n      const addWordToNextLine = breakWords && checkIsOverflow(currentLine.width + currentWord.width + nextCharWidth);\n      if (addWordToNextLine) {\n        nextWord(currentWord);\n        nextLine();\n      }\n      currentWord.positions[currentWord.index++] = currentWord.width + kerning;\n      currentWord.chars.push(char);\n      currentWord.width += nextCharWidth;\n    }\n    previousChar = char;\n  }\n  nextLine();\n  if (style.align === \"center\") {\n    alignCenter(layoutData);\n  } else if (style.align === \"right\") {\n    alignRight(layoutData);\n  } else if (style.align === \"justify\") {\n    alignJustify(layoutData);\n  }\n  return layoutData;\n}\nfunction alignCenter(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width / 2 - line.width / 2;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignRight(measurementData) {\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    const offset = measurementData.width - line.width;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      line.charPositions[j] += offset;\n    }\n  }\n}\nfunction alignJustify(measurementData) {\n  const width = measurementData.width;\n  for (let i = 0; i < measurementData.lines.length; i++) {\n    const line = measurementData.lines[i];\n    let indy = 0;\n    let spaceIndex = line.spacesIndex[indy++];\n    let offset = 0;\n    const totalSpaces = line.spacesIndex.length;\n    const newSpaceWidth = (width - line.width) / totalSpaces;\n    const spaceWidth = newSpaceWidth;\n    for (let j = 0; j < line.charPositions.length; j++) {\n      if (j === spaceIndex) {\n        spaceIndex = line.spacesIndex[indy++];\n        offset += spaceWidth;\n      }\n      line.charPositions[j] += offset;\n    }\n  }\n}\n\nexport { getBitmapTextLayout };\n//# sourceMappingURL=getBitmapTextLayout.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\n\n\"use strict\";\nconst repetitionMap = {\n  repeat: {\n    addressModeU: \"repeat\",\n    addressModeV: \"repeat\"\n  },\n  \"repeat-x\": {\n    addressModeU: \"repeat\",\n    addressModeV: \"clamp-to-edge\"\n  },\n  \"repeat-y\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"repeat\"\n  },\n  \"no-repeat\": {\n    addressModeU: \"clamp-to-edge\",\n    addressModeV: \"clamp-to-edge\"\n  }\n};\nclass FillPattern {\n  constructor(texture, repetition) {\n    /**\n     * unique id for this fill pattern\n     * @internal\n     */\n    this.uid = uid(\"fillPattern\");\n    /**\n     * Internal tick counter to track changes in the pattern.\n     * This is used to invalidate the pattern when the texture or transform changes.\n     * @internal\n     */\n    this._tick = 0;\n    /** The transform matrix applied to the pattern */\n    this.transform = new Matrix();\n    this.texture = texture;\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    if (repetition) {\n      texture.source.style.addressModeU = repetitionMap[repetition].addressModeU;\n      texture.source.style.addressModeV = repetitionMap[repetition].addressModeV;\n    }\n  }\n  /**\n   * Sets the transform for the pattern\n   * @param transform - The transform matrix to apply to the pattern.\n   * If not provided, the pattern will use the default transform.\n   */\n  setTransform(transform) {\n    const texture = this.texture;\n    this.transform.copyFrom(transform);\n    this.transform.invert();\n    this.transform.scale(\n      1 / texture.frame.width,\n      1 / texture.frame.height\n    );\n    this._tick++;\n  }\n  /** Internal texture used to render the gradient */\n  get texture() {\n    return this._texture;\n  }\n  set texture(value) {\n    if (this._texture === value)\n      return;\n    this._texture = value;\n    this._tick++;\n  }\n  /**\n   * Returns a unique key for this instance.\n   * This key is used for caching.\n   * @returns {string} Unique key for the instance\n   */\n  get styleKey() {\n    return `fill-pattern-${this.uid}-${this._tick}`;\n  }\n  /** Destroys the fill pattern, releasing resources. This will also destroy the internal texture. */\n  destroy() {\n    this.texture.destroy(true);\n    this.texture = null;\n  }\n}\n\nexport { FillPattern };\n//# sourceMappingURL=FillPattern.mjs.map\n","\"use strict\";\nclass ObservablePoint {\n  /**\n   * Creates a new `ObservablePoint`\n   * @param observer - Observer to pass to listen for change events.\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(observer, x, y) {\n    this._x = x || 0;\n    this._y = y || 0;\n    this._observer = observer;\n  }\n  /**\n   * Creates a clone of this point.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const point = new ObservablePoint(observer, 100, 200);\n   * const copy = point.clone();\n   *\n   * // Clone with new observer\n   * const newObserver = {\n   *     _onUpdate: (p) => console.log(`Clone updated: (${p.x}, ${p.y})`)\n   * };\n   * const watched = point.clone(newObserver);\n   *\n   * // Verify independence\n   * watched.set(300, 400); // Only triggers new observer\n   * ```\n   * @param observer - Optional observer to pass to the new observable point\n   * @returns A copy of this observable point\n   * @see {@link ObservablePoint.copyFrom} For copying into existing point\n   * @see {@link Observer} For observer interface details\n   */\n  clone(observer) {\n    return new ObservablePoint(observer ?? this._observer, this._x, this._y);\n  }\n  /**\n   * Sets the point to a new x and y position.\n   *\n   * If y is omitted, both x and y will be set to x.\n   * @example\n   * ```ts\n   * // Basic position setting\n   * const point = new ObservablePoint(observer);\n   * point.set(100, 200);\n   *\n   * // Set both x and y to same value\n   * point.set(50); // x=50, y=50\n   * ```\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis, defaults to x\n   * @returns The point instance itself\n   * @see {@link ObservablePoint.copyFrom} For copying from another point\n   * @see {@link ObservablePoint.equals} For comparing positions\n   */\n  set(x = 0, y = x) {\n    if (this._x !== x || this._y !== y) {\n      this._x = x;\n      this._y = y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies x and y from the given point into this point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new ObservablePoint(observer, 100, 200);\n   * const target = new ObservablePoint();\n   * target.copyFrom(source);\n   *\n   * // Copy and chain operations\n   * const point = new ObservablePoint()\n   *     .copyFrom(source)\n   *     .set(x + 50, y + 50);\n   *\n   * // Copy from any PointData\n   * const data = { x: 10, y: 20 };\n   * point.copyFrom(data);\n   * ```\n   * @param p - The point to copy from\n   * @returns The point instance itself\n   * @see {@link ObservablePoint.copyTo} For copying to another point\n   * @see {@link ObservablePoint.clone} For creating new point copy\n   */\n  copyFrom(p) {\n    if (this._x !== p.x || this._y !== p.y) {\n      this._x = p.x;\n      this._y = p.y;\n      this._observer._onUpdate(this);\n    }\n    return this;\n  }\n  /**\n   * Copies this point's x and y into the given point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new ObservablePoint(100, 200);\n   * const target = new ObservablePoint();\n   * source.copyTo(target);\n   * ```\n   * @param p - The point to copy to. Can be any type that is or extends `PointLike`\n   * @returns The point (`p`) with values updated\n   * @see {@link ObservablePoint.copyFrom} For copying from another point\n   * @see {@link ObservablePoint.clone} For creating new point copy\n   */\n  copyTo(p) {\n    p.set(this._x, this._y);\n    return p;\n  }\n  /**\n   * Checks if another point is equal to this point.\n   *\n   * Compares x and y values using strict equality.\n   * @example\n   * ```ts\n   * // Basic equality check\n   * const p1 = new ObservablePoint(100, 200);\n   * const p2 = new ObservablePoint(100, 200);\n   * console.log(p1.equals(p2)); // true\n   *\n   * // Compare with PointData\n   * const data = { x: 100, y: 200 };\n   * console.log(p1.equals(data)); // true\n   *\n   * // Check different points\n   * const p3 = new ObservablePoint(200, 300);\n   * console.log(p1.equals(p3)); // false\n   * ```\n   * @param p - The point to check\n   * @returns `true` if both `x` and `y` are equal\n   * @see {@link ObservablePoint.copyFrom} For making points equal\n   * @see {@link PointData} For point data interface\n   */\n  equals(p) {\n    return p.x === this._x && p.y === this._y;\n  }\n  toString() {\n    return `[pixi.js/math:ObservablePoint x=${this._x} y=${this._y} scope=${this._observer}]`;\n  }\n  /**\n   * Position of the observable point on the x axis.\n   * Triggers observer callback when value changes.\n   * @example\n   * ```ts\n   * // Basic x position\n   * const point = new ObservablePoint(observer);\n   * point.x = 100; // Triggers observer\n   *\n   * // Use in calculations\n   * const width = rightPoint.x - leftPoint.x;\n   * ```\n   * @default 0\n   */\n  get x() {\n    return this._x;\n  }\n  set x(value) {\n    if (this._x !== value) {\n      this._x = value;\n      this._observer._onUpdate(this);\n    }\n  }\n  /**\n   * Position of the observable point on the y axis.\n   * Triggers observer callback when value changes.\n   * @example\n   * ```ts\n   * // Basic y position\n   * const point = new ObservablePoint(observer);\n   * point.y = 200; // Triggers observer\n   *\n   * // Use in calculations\n   * const height = bottomPoint.y - topPoint.y;\n   * ```\n   * @default 0\n   */\n  get y() {\n    return this._y;\n  }\n  set y(value) {\n    if (this._y !== value) {\n      this._y = value;\n      this._observer._onUpdate(this);\n    }\n  }\n}\n\nexport { ObservablePoint };\n//# sourceMappingURL=ObservablePoint.mjs.map\n","import { DOMAdapter } from '../environment/adapter.mjs';\n\n\"use strict\";\nfunction assertPath(path2) {\n  if (typeof path2 !== \"string\") {\n    throw new TypeError(`Path must be a string. Received ${JSON.stringify(path2)}`);\n  }\n}\nfunction removeUrlParams(url) {\n  const re = url.split(\"?\")[0];\n  return re.split(\"#\")[0];\n}\nfunction escapeRegExp(string) {\n  return string.replace(/[.*+?^${}()|[\\]\\\\]/g, \"\\\\$&\");\n}\nfunction replaceAll(str, find, replace) {\n  return str.replace(new RegExp(escapeRegExp(find), \"g\"), replace);\n}\nfunction normalizeStringPosix(path2, allowAboveRoot) {\n  let res = \"\";\n  let lastSegmentLength = 0;\n  let lastSlash = -1;\n  let dots = 0;\n  let code = -1;\n  for (let i = 0; i <= path2.length; ++i) {\n    if (i < path2.length) {\n      code = path2.charCodeAt(i);\n    } else if (code === 47) {\n      break;\n    } else {\n      code = 47;\n    }\n    if (code === 47) {\n      if (lastSlash === i - 1 || dots === 1) {\n      } else if (lastSlash !== i - 1 && dots === 2) {\n        if (res.length < 2 || lastSegmentLength !== 2 || res.charCodeAt(res.length - 1) !== 46 || res.charCodeAt(res.length - 2) !== 46) {\n          if (res.length > 2) {\n            const lastSlashIndex = res.lastIndexOf(\"/\");\n            if (lastSlashIndex !== res.length - 1) {\n              if (lastSlashIndex === -1) {\n                res = \"\";\n                lastSegmentLength = 0;\n              } else {\n                res = res.slice(0, lastSlashIndex);\n                lastSegmentLength = res.length - 1 - res.lastIndexOf(\"/\");\n              }\n              lastSlash = i;\n              dots = 0;\n              continue;\n            }\n          } else if (res.length === 2 || res.length === 1) {\n            res = \"\";\n            lastSegmentLength = 0;\n            lastSlash = i;\n            dots = 0;\n            continue;\n          }\n        }\n        if (allowAboveRoot) {\n          if (res.length > 0) {\n            res += \"/..\";\n          } else {\n            res = \"..\";\n          }\n          lastSegmentLength = 2;\n        }\n      } else {\n        if (res.length > 0) {\n          res += `/${path2.slice(lastSlash + 1, i)}`;\n        } else {\n          res = path2.slice(lastSlash + 1, i);\n        }\n        lastSegmentLength = i - lastSlash - 1;\n      }\n      lastSlash = i;\n      dots = 0;\n    } else if (code === 46 && dots !== -1) {\n      ++dots;\n    } else {\n      dots = -1;\n    }\n  }\n  return res;\n}\nconst path = {\n  /**\n   * Converts a path to posix format.\n   * @param path - The path to convert to posix\n   * @example\n   * ```ts\n   * // Convert a Windows path to POSIX format\n   * path.toPosix('C:\\\\Users\\\\User\\\\Documents\\\\file.txt');\n   * // -> 'C:/Users/User/Documents/file.txt'\n   * ```\n   */\n  toPosix(path2) {\n    return replaceAll(path2, \"\\\\\", \"/\");\n  },\n  /**\n   * Checks if the path is a URL e.g. http://, https://\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path is a URL\n   * path.isUrl('http://www.example.com');\n   * // -> true\n   * path.isUrl('C:/Users/User/Documents/file.txt');\n   * // -> false\n   * ```\n   */\n  isUrl(path2) {\n    return /^https?:/.test(this.toPosix(path2));\n  },\n  /**\n   * Checks if the path is a data URL\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path is a data URL\n   * path.isDataUrl('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUA...');\n   * // -> true\n   * ```\n   */\n  isDataUrl(path2) {\n    return /^data:([a-z]+\\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\\-._~:@\\/?%\\s<>]*?)$/i.test(path2);\n  },\n  /**\n   * Checks if the path is a blob URL\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path is a blob URL\n   * path.isBlobUrl('blob:http://www.example.com/12345678-1234-1234-1234-123456789012');\n   * // -> true\n   * ```\n   */\n  isBlobUrl(path2) {\n    return path2.startsWith(\"blob:\");\n  },\n  /**\n   * Checks if the path has a protocol e.g. http://, https://, file:///, data:, blob:, C:/\n   * This will return true for windows file paths\n   * @param path - The path to check\n   * @example\n   * ```ts\n   * // Check if a path has a protocol\n   * path.hasProtocol('http://www.example.com');\n   * // -> true\n   * path.hasProtocol('C:/Users/User/Documents/file.txt');\n   * // -> true\n   * ```\n   */\n  hasProtocol(path2) {\n    return /^[^/:]+:/.test(this.toPosix(path2));\n  },\n  /**\n   * Returns the protocol of the path e.g. http://, https://, file:///, data:, blob:, C:/\n   * @param path - The path to get the protocol from\n   * @example\n   * ```ts\n   * // Get the protocol from a URL\n   * path.getProtocol('http://www.example.com/path/to/resource');\n   * // -> 'http://'\n   * // Get the protocol from a file path\n   * path.getProtocol('C:/Users/User/Documents/file.txt');\n   * // -> 'C:/'\n   * ```\n   */\n  getProtocol(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    const matchFile = /^file:\\/\\/\\//.exec(path2);\n    if (matchFile) {\n      return matchFile[0];\n    }\n    const matchProtocol = /^[^/:]+:\\/{0,2}/.exec(path2);\n    if (matchProtocol) {\n      return matchProtocol[0];\n    }\n    return \"\";\n  },\n  /**\n   * Converts URL to an absolute path.\n   * When loading from a Web Worker, we must use absolute paths.\n   * If the URL is already absolute we return it as is\n   * If it's not, we convert it\n   * @param url - The URL to test\n   * @param customBaseUrl - The base URL to use\n   * @param customRootUrl - The root URL to use\n   * @example\n   * ```ts\n   * // Convert a relative URL to an absolute path\n   * path.toAbsolute('images/texture.png', 'http://example.com/assets/');\n   * // -> 'http://example.com/assets/images/texture.png'\n   * ```\n   */\n  toAbsolute(url, customBaseUrl, customRootUrl) {\n    assertPath(url);\n    if (this.isDataUrl(url) || this.isBlobUrl(url))\n      return url;\n    const baseUrl = removeUrlParams(this.toPosix(customBaseUrl ?? DOMAdapter.get().getBaseUrl()));\n    const rootUrl = removeUrlParams(this.toPosix(customRootUrl ?? this.rootname(baseUrl)));\n    url = this.toPosix(url);\n    if (url.startsWith(\"/\")) {\n      return path.join(rootUrl, url.slice(1));\n    }\n    const absolutePath = this.isAbsolute(url) ? url : this.join(baseUrl, url);\n    return absolutePath;\n  },\n  /**\n   * Normalizes the given path, resolving '..' and '.' segments\n   * @param path - The path to normalize\n   * @example\n   * ```ts\n   * // Normalize a path with relative segments\n   * path.normalize('http://www.example.com/foo/bar/../baz');\n   * // -> 'http://www.example.com/foo/baz'\n   * // Normalize a file path with relative segments\n   * path.normalize('C:\\\\Users\\\\User\\\\Documents\\\\..\\\\file.txt');\n   * // -> 'C:/Users/User/file.txt'\n   * ```\n   */\n  normalize(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    if (this.isDataUrl(path2) || this.isBlobUrl(path2))\n      return path2;\n    path2 = this.toPosix(path2);\n    let protocol = \"\";\n    const isAbsolute = path2.startsWith(\"/\");\n    if (this.hasProtocol(path2)) {\n      protocol = this.rootname(path2);\n      path2 = path2.slice(protocol.length);\n    }\n    const trailingSeparator = path2.endsWith(\"/\");\n    path2 = normalizeStringPosix(path2, false);\n    if (path2.length > 0 && trailingSeparator)\n      path2 += \"/\";\n    if (isAbsolute)\n      return `/${path2}`;\n    return protocol + path2;\n  },\n  /**\n   * Determines if path is an absolute path.\n   * Absolute paths can be urls, data urls, or paths on disk\n   * @param path - The path to test\n   * @example\n   * ```ts\n   * // Check if a path is absolute\n   * path.isAbsolute('http://www.example.com/foo/bar');\n   * // -> true\n   * path.isAbsolute('C:/Users/User/Documents/file.txt');\n   * // -> true\n   * ```\n   */\n  isAbsolute(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    if (this.hasProtocol(path2))\n      return true;\n    return path2.startsWith(\"/\");\n  },\n  /**\n   * Joins all given path segments together using the platform-specific separator as a delimiter,\n   * then normalizes the resulting path\n   * @param segments - The segments of the path to join\n   * @example\n   * ```ts\n   * // Join multiple path segments\n   * path.join('assets', 'images', 'sprite.png');\n   * // -> 'assets/images/sprite.png'\n   * // Join with relative segments\n   * path.join('assets', 'images', '../textures', 'sprite.png');\n   * // -> 'assets/textures/sprite.png'\n   * ```\n   */\n  join(...segments) {\n    if (segments.length === 0) {\n      return \".\";\n    }\n    let joined;\n    for (let i = 0; i < segments.length; ++i) {\n      const arg = segments[i];\n      assertPath(arg);\n      if (arg.length > 0) {\n        if (joined === void 0)\n          joined = arg;\n        else {\n          const prevArg = segments[i - 1] ?? \"\";\n          if (this.joinExtensions.includes(this.extname(prevArg).toLowerCase())) {\n            joined += `/../${arg}`;\n          } else {\n            joined += `/${arg}`;\n          }\n        }\n      }\n    }\n    if (joined === void 0) {\n      return \".\";\n    }\n    return this.normalize(joined);\n  },\n  /**\n   * Returns the directory name of a path\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Get the directory name of a path\n   * path.dirname('http://www.example.com/foo/bar/baz.png');\n   * // -> 'http://www.example.com/foo/bar'\n   * // Get the directory name of a file path\n   * path.dirname('C:/Users/User/Documents/file.txt');\n   * // -> 'C:/Users/User/Documents'\n   * ```\n   */\n  dirname(path2) {\n    assertPath(path2);\n    if (path2.length === 0)\n      return \".\";\n    path2 = this.toPosix(path2);\n    let code = path2.charCodeAt(0);\n    const hasRoot = code === 47;\n    let end = -1;\n    let matchedSlash = true;\n    const proto = this.getProtocol(path2);\n    const origpath = path2;\n    path2 = path2.slice(proto.length);\n    for (let i = path2.length - 1; i >= 1; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          end = i;\n          break;\n        }\n      } else {\n        matchedSlash = false;\n      }\n    }\n    if (end === -1)\n      return hasRoot ? \"/\" : this.isUrl(origpath) ? proto + path2 : proto;\n    if (hasRoot && end === 1)\n      return \"//\";\n    return proto + path2.slice(0, end);\n  },\n  /**\n   * Returns the root of the path e.g. /, C:/, file:///, http://domain.com/\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Get the root of a URL\n   * path.rootname('http://www.example.com/foo/bar/baz.png');\n   * // -> 'http://www.example.com/'\n   * // Get the root of a file path\n   * path.rootname('C:/Users/User/Documents/file.txt');\n   * // -> 'C:/'\n   * ```\n   */\n  rootname(path2) {\n    assertPath(path2);\n    path2 = this.toPosix(path2);\n    let root = \"\";\n    if (path2.startsWith(\"/\"))\n      root = \"/\";\n    else {\n      root = this.getProtocol(path2);\n    }\n    if (this.isUrl(path2)) {\n      const index = path2.indexOf(\"/\", root.length);\n      if (index !== -1) {\n        root = path2.slice(0, index);\n      } else\n        root = path2;\n      if (!root.endsWith(\"/\"))\n        root += \"/\";\n    }\n    return root;\n  },\n  /**\n   * Returns the last portion of a path\n   * @param path - The path to test\n   * @param ext - Optional extension to remove\n   * @example\n   * ```ts\n   * // Get the basename of a URL\n   * path.basename('http://www.example.com/foo/bar/baz.png');\n   * // -> 'baz.png'\n   * // Get the basename of a file path\n   * path.basename('C:/Users/User/Documents/file.txt');\n   * // -> 'file.txt'\n   * ```\n   */\n  basename(path2, ext) {\n    assertPath(path2);\n    if (ext)\n      assertPath(ext);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let start = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i;\n    if (ext !== void 0 && ext.length > 0 && ext.length <= path2.length) {\n      if (ext.length === path2.length && ext === path2)\n        return \"\";\n      let extIdx = ext.length - 1;\n      let firstNonSlashEnd = -1;\n      for (i = path2.length - 1; i >= 0; --i) {\n        const code = path2.charCodeAt(i);\n        if (code === 47) {\n          if (!matchedSlash) {\n            start = i + 1;\n            break;\n          }\n        } else {\n          if (firstNonSlashEnd === -1) {\n            matchedSlash = false;\n            firstNonSlashEnd = i + 1;\n          }\n          if (extIdx >= 0) {\n            if (code === ext.charCodeAt(extIdx)) {\n              if (--extIdx === -1) {\n                end = i;\n              }\n            } else {\n              extIdx = -1;\n              end = firstNonSlashEnd;\n            }\n          }\n        }\n      }\n      if (start === end)\n        end = firstNonSlashEnd;\n      else if (end === -1)\n        end = path2.length;\n      return path2.slice(start, end);\n    }\n    for (i = path2.length - 1; i >= 0; --i) {\n      if (path2.charCodeAt(i) === 47) {\n        if (!matchedSlash) {\n          start = i + 1;\n          break;\n        }\n      } else if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n    }\n    if (end === -1)\n      return \"\";\n    return path2.slice(start, end);\n  },\n  /**\n   * Returns the extension of the path, from the last occurrence of the . (period) character to end of string in the last\n   * portion of the path. If there is no . in the last portion of the path, or if there are no . characters other than\n   * the first character of the basename of path, an empty string is returned.\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Get the extension of a URL\n   * path.extname('http://www.example.com/foo/bar/baz.png');\n   * // -> '.png'\n   * // Get the extension of a file path\n   * path.extname('C:/Users/User/Documents/file.txt');\n   * // -> '.txt'\n   * ```\n   */\n  extname(path2) {\n    assertPath(path2);\n    path2 = removeUrlParams(this.toPosix(path2));\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let preDotState = 0;\n    for (let i = path2.length - 1; i >= 0; --i) {\n      const code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      return \"\";\n    }\n    return path2.slice(startDot, end);\n  },\n  /**\n   * Parses a path into an object containing the 'root', `dir`, `base`, `ext`, and `name` properties.\n   * @param path - The path to parse\n   * @example\n   * ```ts\n   * // Parse a URL\n   * const parsed = path.parse('http://www.example.com/foo/bar/baz.png');\n   * // -> {\n   * //   root: 'http://www.example.com/',\n   * //   dir: 'http://www.example.com/foo/bar',\n   * //   base: 'baz.png',\n   * //   ext: '.png',\n   * //   name: 'baz'\n   * // }\n   * // Parse a file path\n   * const parsedFile = path.parse('C:/Users/User/Documents/file.txt');\n   * // -> {\n   * //   root: 'C:/',\n   * //   dir: 'C:/Users/User/Documents',\n   * //   base: 'file.txt',\n   * //   ext: '.txt',\n   * //   name: 'file'\n   * // }\n   * ```\n   */\n  parse(path2) {\n    assertPath(path2);\n    const ret = { root: \"\", dir: \"\", base: \"\", ext: \"\", name: \"\" };\n    if (path2.length === 0)\n      return ret;\n    path2 = removeUrlParams(this.toPosix(path2));\n    let code = path2.charCodeAt(0);\n    const isAbsolute = this.isAbsolute(path2);\n    let start;\n    const protocol = \"\";\n    ret.root = this.rootname(path2);\n    if (isAbsolute || this.hasProtocol(path2)) {\n      start = 1;\n    } else {\n      start = 0;\n    }\n    let startDot = -1;\n    let startPart = 0;\n    let end = -1;\n    let matchedSlash = true;\n    let i = path2.length - 1;\n    let preDotState = 0;\n    for (; i >= start; --i) {\n      code = path2.charCodeAt(i);\n      if (code === 47) {\n        if (!matchedSlash) {\n          startPart = i + 1;\n          break;\n        }\n        continue;\n      }\n      if (end === -1) {\n        matchedSlash = false;\n        end = i + 1;\n      }\n      if (code === 46) {\n        if (startDot === -1)\n          startDot = i;\n        else if (preDotState !== 1)\n          preDotState = 1;\n      } else if (startDot !== -1) {\n        preDotState = -1;\n      }\n    }\n    if (startDot === -1 || end === -1 || preDotState === 0 || preDotState === 1 && startDot === end - 1 && startDot === startPart + 1) {\n      if (end !== -1) {\n        if (startPart === 0 && isAbsolute)\n          ret.base = ret.name = path2.slice(1, end);\n        else\n          ret.base = ret.name = path2.slice(startPart, end);\n      }\n    } else {\n      if (startPart === 0 && isAbsolute) {\n        ret.name = path2.slice(1, startDot);\n        ret.base = path2.slice(1, end);\n      } else {\n        ret.name = path2.slice(startPart, startDot);\n        ret.base = path2.slice(startPart, end);\n      }\n      ret.ext = path2.slice(startDot, end);\n    }\n    ret.dir = this.dirname(path2);\n    if (protocol)\n      ret.dir = protocol + ret.dir;\n    return ret;\n  },\n  sep: \"/\",\n  delimiter: \":\",\n  joinExtensions: [\".html\"]\n};\n\nexport { path };\n//# sourceMappingURL=path.mjs.map\n","function _arrayWithHoles(r) {\n  if (Array.isArray(r)) return r;\n}\nmodule.exports = _arrayWithHoles, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nconst WGSL_TO_VERTEX_TYPES = {\n  f32: \"float32\",\n  \"vec2<f32>\": \"float32x2\",\n  \"vec3<f32>\": \"float32x3\",\n  \"vec4<f32>\": \"float32x4\",\n  vec2f: \"float32x2\",\n  vec3f: \"float32x3\",\n  vec4f: \"float32x4\",\n  i32: \"sint32\",\n  \"vec2<i32>\": \"sint32x2\",\n  \"vec3<i32>\": \"sint32x3\",\n  \"vec4<i32>\": \"sint32x4\",\n  u32: \"uint32\",\n  \"vec2<u32>\": \"uint32x2\",\n  \"vec3<u32>\": \"uint32x3\",\n  \"vec4<u32>\": \"uint32x4\",\n  bool: \"uint32\",\n  \"vec2<bool>\": \"uint32x2\",\n  \"vec3<bool>\": \"uint32x3\",\n  \"vec4<bool>\": \"uint32x4\"\n};\nfunction extractAttributesFromGpuProgram({ source, entryPoint }) {\n  const results = {};\n  const mainVertStart = source.indexOf(`fn ${entryPoint}`);\n  if (mainVertStart !== -1) {\n    const arrowFunctionStart = source.indexOf(\"->\", mainVertStart);\n    if (arrowFunctionStart !== -1) {\n      const functionArgsSubstring = source.substring(mainVertStart, arrowFunctionStart);\n      const inputsRegex = /@location\\((\\d+)\\)\\s+([a-zA-Z0-9_]+)\\s*:\\s*([a-zA-Z0-9_<>]+)(?:,|\\s|$)/g;\n      let match;\n      while ((match = inputsRegex.exec(functionArgsSubstring)) !== null) {\n        const format = WGSL_TO_VERTEX_TYPES[match[3]] ?? \"float32\";\n        results[match[2]] = {\n          location: parseInt(match[1], 10),\n          format,\n          stride: getAttributeInfoFromFormat(format).stride,\n          offset: 0,\n          instance: false,\n          start: 0\n        };\n      }\n    }\n  }\n  return results;\n}\n\nexport { extractAttributesFromGpuProgram };\n//# sourceMappingURL=extractAttributesFromGpuProgram.mjs.map\n","\"use strict\";\nfunction extractStructAndGroups(wgsl) {\n  const linePattern = /(^|[^/])@(group|binding)\\(\\d+\\)[^;]+;/g;\n  const groupPattern = /@group\\((\\d+)\\)/;\n  const bindingPattern = /@binding\\((\\d+)\\)/;\n  const namePattern = /var(<[^>]+>)? (\\w+)/;\n  const typePattern = /:\\s*(\\w+)/;\n  const structPattern = /struct\\s+(\\w+)\\s*{([^}]+)}/g;\n  const structMemberPattern = /(\\w+)\\s*:\\s*([\\w\\<\\>]+)/g;\n  const structName = /struct\\s+(\\w+)/;\n  const groups = wgsl.match(linePattern)?.map((item) => ({\n    group: parseInt(item.match(groupPattern)[1], 10),\n    binding: parseInt(item.match(bindingPattern)[1], 10),\n    name: item.match(namePattern)[2],\n    isUniform: item.match(namePattern)[1] === \"<uniform>\",\n    type: item.match(typePattern)[1]\n  }));\n  if (!groups) {\n    return {\n      groups: [],\n      structs: []\n    };\n  }\n  const structs = wgsl.match(structPattern)?.map((struct) => {\n    const name = struct.match(structName)[1];\n    const members = struct.match(structMemberPattern).reduce((acc, member) => {\n      const [name2, type] = member.split(\":\");\n      acc[name2.trim()] = type.trim();\n      return acc;\n    }, {});\n    if (!members) {\n      return null;\n    }\n    return { name, members };\n  }).filter(({ name }) => groups.some((group) => group.type === name)) ?? [];\n  return {\n    groups,\n    structs\n  };\n}\n\nexport { extractStructAndGroups };\n//# sourceMappingURL=extractStructAndGroups.mjs.map\n","\"use strict\";\nvar ShaderStage = /* @__PURE__ */ ((ShaderStage2) => {\n  ShaderStage2[ShaderStage2[\"VERTEX\"] = 1] = \"VERTEX\";\n  ShaderStage2[ShaderStage2[\"FRAGMENT\"] = 2] = \"FRAGMENT\";\n  ShaderStage2[ShaderStage2[\"COMPUTE\"] = 4] = \"COMPUTE\";\n  return ShaderStage2;\n})(ShaderStage || {});\n\nexport { ShaderStage };\n//# sourceMappingURL=const.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { extractAttributesFromGpuProgram } from './utils/extractAttributesFromGpuProgram.mjs';\nimport { extractStructAndGroups } from './utils/extractStructAndGroups.mjs';\nimport { generateGpuLayoutGroups } from './utils/generateGpuLayoutGroups.mjs';\nimport { generateLayoutHash } from './utils/generateLayoutHash.mjs';\nimport { removeStructAndGroupDuplicates } from './utils/removeStructAndGroupDuplicates.mjs';\n\n\"use strict\";\nconst programCache = /* @__PURE__ */ Object.create(null);\nclass GpuProgram {\n  /**\n   * Create a new GpuProgram\n   * @param options - The options for the gpu program\n   */\n  constructor(options) {\n    /** @internal */\n    this._layoutKey = 0;\n    /** @internal */\n    this._attributeLocationsKey = 0;\n    const { fragment, vertex, layout, gpuLayout, name } = options;\n    this.name = name;\n    this.fragment = fragment;\n    this.vertex = vertex;\n    if (fragment.source === vertex.source) {\n      const structsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = structsAndGroups;\n    } else {\n      const vertexStructsAndGroups = extractStructAndGroups(vertex.source);\n      const fragmentStructsAndGroups = extractStructAndGroups(fragment.source);\n      this.structsAndGroups = removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups);\n    }\n    this.layout = layout ?? generateLayoutHash(this.structsAndGroups);\n    this.gpuLayout = gpuLayout ?? generateGpuLayoutGroups(this.structsAndGroups);\n    this.autoAssignGlobalUniforms = !!(this.layout[0]?.globalUniforms !== void 0);\n    this.autoAssignLocalUniforms = !!(this.layout[1]?.localUniforms !== void 0);\n    this._generateProgramKey();\n  }\n  // TODO maker this pure\n  _generateProgramKey() {\n    const { vertex, fragment } = this;\n    const bigKey = vertex.source + fragment.source + vertex.entryPoint + fragment.entryPoint;\n    this._layoutKey = createIdFromString(bigKey, \"program\");\n  }\n  get attributeData() {\n    this._attributeData ?? (this._attributeData = extractAttributesFromGpuProgram(this.vertex));\n    return this._attributeData;\n  }\n  /** destroys the program */\n  destroy() {\n    this.gpuLayout = null;\n    this.layout = null;\n    this.structsAndGroups = null;\n    this.fragment = null;\n    this.vertex = null;\n    programCache[this._cacheKey] = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex.source}:${options.fragment.source}:${options.fragment.entryPoint}:${options.vertex.entryPoint}`;\n    if (!programCache[key]) {\n      programCache[key] = new GpuProgram(options);\n      programCache[key]._cacheKey = key;\n    }\n    return programCache[key];\n  }\n}\n\nexport { GpuProgram };\n//# sourceMappingURL=GpuProgram.mjs.map\n","\"use strict\";\nfunction removeStructAndGroupDuplicates(vertexStructsAndGroups, fragmentStructsAndGroups) {\n  const structNameSet = /* @__PURE__ */ new Set();\n  const dupeGroupKeySet = /* @__PURE__ */ new Set();\n  const structs = [...vertexStructsAndGroups.structs, ...fragmentStructsAndGroups.structs].filter((struct) => {\n    if (structNameSet.has(struct.name)) {\n      return false;\n    }\n    structNameSet.add(struct.name);\n    return true;\n  });\n  const groups = [...vertexStructsAndGroups.groups, ...fragmentStructsAndGroups.groups].filter((group) => {\n    const key = `${group.name}-${group.binding}`;\n    if (dupeGroupKeySet.has(key)) {\n      return false;\n    }\n    dupeGroupKeySet.add(key);\n    return true;\n  });\n  return { structs, groups };\n}\n\nexport { removeStructAndGroupDuplicates };\n//# sourceMappingURL=removeStructAndGroupDuplicates.mjs.map\n","\"use strict\";\nfunction generateLayoutHash({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = {};\n    }\n    layout[group.group][group.name] = group.binding;\n  }\n  return layout;\n}\n\nexport { generateLayoutHash };\n//# sourceMappingURL=generateLayoutHash.mjs.map\n","import { ShaderStage } from '../../../shared/shader/const.mjs';\n\n\"use strict\";\nfunction generateGpuLayoutGroups({ groups }) {\n  const layout = [];\n  for (let i = 0; i < groups.length; i++) {\n    const group = groups[i];\n    if (!layout[group.group]) {\n      layout[group.group] = [];\n    }\n    if (group.isUniform) {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.VERTEX | ShaderStage.FRAGMENT,\n        buffer: {\n          type: \"uniform\"\n        }\n      });\n    } else if (group.type === \"sampler\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        sampler: {\n          type: \"filtering\"\n        }\n      });\n    } else if (group.type === \"texture_2d\") {\n      layout[group.group].push({\n        binding: group.binding,\n        visibility: ShaderStage.FRAGMENT,\n        texture: {\n          sampleType: \"float\",\n          viewDimension: \"2d\",\n          multisampled: false\n        }\n      });\n    }\n  }\n  return layout;\n}\n\nexport { generateGpuLayoutGroups };\n//# sourceMappingURL=generateGpuLayoutGroups.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nimport { compileHighShaderGpuProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { colorBit } from '../../../rendering/high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBit } from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { localUniformBitGroup2 } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBit } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nclass GpuGraphicsAdaptor {\n  constructor() {\n    this._maxTextures = 0;\n  }\n  contextChange(renderer) {\n    const localUniforms = new UniformGroup({\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    this._maxTextures = renderer.limits.maxBatchableTextures;\n    const gpuProgram = compileHighShaderGpuProgram({\n      name: \"graphics\",\n      bits: [\n        colorBit,\n        generateTextureBatchBit(this._maxTextures),\n        localUniformBitGroup2,\n        roundPixelsBit\n      ]\n    });\n    this.shader = new Shader({\n      gpuProgram,\n      resources: {\n        // added on the fly!\n        localUniforms\n      }\n    });\n  }\n  execute(graphicsPipe, renderable) {\n    const context = renderable.context;\n    const shader = context.customShader || this.shader;\n    const renderer = graphicsPipe.renderer;\n    const contextSystem = renderer.graphicsContext;\n    const {\n      batcher,\n      instructions\n    } = contextSystem.getContextRenderData(context);\n    const encoder = renderer.encoder;\n    encoder.setGeometry(batcher.geometry, shader.gpuProgram);\n    const globalUniformsBindGroup = renderer.globalUniforms.bindGroup;\n    encoder.setBindGroup(0, globalUniformsBindGroup, shader.gpuProgram);\n    const localBindGroup = renderer.renderPipes.uniformBatch.getUniformBindGroup(shader.resources.localUniforms, true);\n    encoder.setBindGroup(2, localBindGroup, shader.gpuProgram);\n    const batches = instructions.instructions;\n    let topology = null;\n    for (let i = 0; i < instructions.instructionSize; i++) {\n      const batch = batches[i];\n      if (batch.topology !== topology) {\n        topology = batch.topology;\n        encoder.setPipelineFromGeometryProgramAndState(\n          batcher.geometry,\n          shader.gpuProgram,\n          graphicsPipe.state,\n          batch.topology\n        );\n      }\n      shader.groups[1] = batch.bindGroup;\n      if (!batch.gpuBindGroup) {\n        const textureBatch = batch.textures;\n        batch.bindGroup = getTextureBatchBindGroup(\n          textureBatch.textures,\n          textureBatch.count,\n          this._maxTextures\n        );\n        batch.gpuBindGroup = renderer.bindGroup.getBindGroup(\n          batch.bindGroup,\n          shader.gpuProgram,\n          1\n        );\n      }\n      encoder.setBindGroup(1, batch.bindGroup, shader.gpuProgram);\n      encoder.renderPassEncoder.drawIndexed(batch.size, 1, batch.start);\n    }\n  }\n  destroy() {\n    this.shader.destroy(true);\n    this.shader = null;\n  }\n}\n/** @ignore */\nGpuGraphicsAdaptor.extension = {\n  type: [\n    ExtensionType.WebGPUPipesAdaptor\n  ],\n  name: \"graphics\"\n};\n\nexport { GpuGraphicsAdaptor };\n//# sourceMappingURL=GpuGraphicsAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGpuProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { localUniformBit } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBit } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { textureBit } from '../../../rendering/high-shader/shader-bits/textureBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nclass GpuMeshAdapter {\n  init() {\n    const gpuProgram = compileHighShaderGpuProgram({\n      name: \"mesh\",\n      bits: [\n        localUniformBit,\n        textureBit,\n        roundPixelsBit\n      ]\n    });\n    this._shader = new Shader({\n      gpuProgram,\n      resources: {\n        uTexture: Texture.EMPTY._source,\n        uSampler: Texture.EMPTY._source.style,\n        textureUniforms: {\n          uTextureMatrix: { type: \"mat3x3<f32>\", value: new Matrix() }\n        }\n      }\n    });\n  }\n  execute(meshPipe, mesh) {\n    const renderer = meshPipe.renderer;\n    let shader = mesh._shader;\n    if (!shader) {\n      shader = this._shader;\n      shader.groups[2] = renderer.texture.getTextureBindGroup(mesh.texture);\n    } else if (!shader.gpuProgram) {\n      warn(\"Mesh shader has no gpuProgram\", mesh.shader);\n      return;\n    }\n    const gpuProgram = shader.gpuProgram;\n    if (gpuProgram.autoAssignGlobalUniforms) {\n      shader.groups[0] = renderer.globalUniforms.bindGroup;\n    }\n    if (gpuProgram.autoAssignLocalUniforms) {\n      const localUniforms = meshPipe.localUniforms;\n      shader.groups[1] = renderer.renderPipes.uniformBatch.getUniformBindGroup(localUniforms, true);\n    }\n    renderer.encoder.draw({\n      geometry: mesh._geometry,\n      shader,\n      state: mesh.state\n    });\n  }\n  destroy() {\n    this._shader.destroy(true);\n    this._shader = null;\n  }\n}\n/** @ignore */\nGpuMeshAdapter.extension = {\n  type: [\n    ExtensionType.WebGPUPipesAdaptor\n  ],\n  name: \"mesh\"\n};\n\nexport { GpuMeshAdapter };\n//# sourceMappingURL=GpuMeshAdapter.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { State } from '../../renderers/shared/state/State.mjs';\nimport { getTextureBatchBindGroup } from './getTextureBatchBindGroup.mjs';\n\n\"use strict\";\nconst tempState = State.for2d();\nclass GpuBatchAdaptor {\n  start(batchPipe, geometry, shader) {\n    const renderer = batchPipe.renderer;\n    const encoder = renderer.encoder;\n    const program = shader.gpuProgram;\n    this._shader = shader;\n    this._geometry = geometry;\n    encoder.setGeometry(geometry, program);\n    tempState.blendMode = \"normal\";\n    renderer.pipeline.getPipeline(\n      geometry,\n      program,\n      tempState\n    );\n    const globalUniformsBindGroup = renderer.globalUniforms.bindGroup;\n    encoder.resetBindGroup(1);\n    encoder.setBindGroup(0, globalUniformsBindGroup, program);\n  }\n  execute(batchPipe, batch) {\n    const program = this._shader.gpuProgram;\n    const renderer = batchPipe.renderer;\n    const encoder = renderer.encoder;\n    if (!batch.bindGroup) {\n      const textureBatch = batch.textures;\n      batch.bindGroup = getTextureBatchBindGroup(\n        textureBatch.textures,\n        textureBatch.count,\n        renderer.limits.maxBatchableTextures\n      );\n    }\n    tempState.blendMode = batch.blendMode;\n    const gpuBindGroup = renderer.bindGroup.getBindGroup(\n      batch.bindGroup,\n      program,\n      1\n    );\n    const pipeline = renderer.pipeline.getPipeline(\n      this._geometry,\n      program,\n      tempState,\n      batch.topology\n    );\n    batch.bindGroup._touch(renderer.textureGC.count);\n    encoder.setPipeline(pipeline);\n    encoder.renderPassEncoder.setBindGroup(1, gpuBindGroup);\n    encoder.renderPassEncoder.drawIndexed(batch.size, 1, batch.start);\n  }\n}\n/** @ignore */\nGpuBatchAdaptor.extension = {\n  type: [\n    ExtensionType.WebGPUPipesAdaptor\n  ],\n  name: \"batch\"\n};\n\nexport { GpuBatchAdaptor };\n//# sourceMappingURL=GpuBatchAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass BindGroupSystem {\n  constructor(renderer) {\n    this._hash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    this._renderer.renderableGC.addManagedHash(this, \"_hash\");\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n  getBindGroup(bindGroup, program, groupIndex) {\n    bindGroup._updateKey();\n    const gpuBindGroup = this._hash[bindGroup._key] || this._createBindGroup(bindGroup, program, groupIndex);\n    return gpuBindGroup;\n  }\n  _createBindGroup(group, program, groupIndex) {\n    const device = this._gpu.device;\n    const groupLayout = program.layout[groupIndex];\n    const entries = [];\n    const renderer = this._renderer;\n    for (const j in groupLayout) {\n      const resource = group.resources[j] ?? group.resources[groupLayout[j]];\n      let gpuResource;\n      if (resource._resourceType === \"uniformGroup\") {\n        const uniformGroup = resource;\n        renderer.ubo.updateUniformGroup(uniformGroup);\n        const buffer = uniformGroup.buffer;\n        gpuResource = {\n          buffer: renderer.buffer.getGPUBuffer(buffer),\n          offset: 0,\n          size: buffer.descriptor.size\n        };\n      } else if (resource._resourceType === \"buffer\") {\n        const buffer = resource;\n        gpuResource = {\n          buffer: renderer.buffer.getGPUBuffer(buffer),\n          offset: 0,\n          size: buffer.descriptor.size\n        };\n      } else if (resource._resourceType === \"bufferResource\") {\n        const bufferResource = resource;\n        gpuResource = {\n          buffer: renderer.buffer.getGPUBuffer(bufferResource.buffer),\n          offset: bufferResource.offset,\n          size: bufferResource.size\n        };\n      } else if (resource._resourceType === \"textureSampler\") {\n        const sampler = resource;\n        gpuResource = renderer.texture.getGpuSampler(sampler);\n      } else if (resource._resourceType === \"textureSource\") {\n        const texture = resource;\n        gpuResource = renderer.texture.getGpuSource(texture).createView({});\n      }\n      entries.push({\n        binding: groupLayout[j],\n        resource: gpuResource\n      });\n    }\n    const layout = renderer.shader.getProgramData(program).bindGroups[groupIndex];\n    const gpuBindGroup = device.createBindGroup({\n      layout,\n      entries\n    });\n    this._hash[group._key] = gpuBindGroup;\n    return gpuBindGroup;\n  }\n  destroy() {\n    for (const key of Object.keys(this._hash)) {\n      this._hash[key] = null;\n    }\n    this._hash = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nBindGroupSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"bindGroup\"\n};\n\nexport { BindGroupSystem };\n//# sourceMappingURL=BindGroupSystem.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { fastCopy } from '../../shared/buffer/utils/fastCopy.mjs';\n\n\"use strict\";\nclass GpuBufferSystem {\n  constructor(renderer) {\n    this._gpuBuffers = /* @__PURE__ */ Object.create(null);\n    renderer.renderableGC.addManagedHash(this, \"_gpuBuffers\");\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n  getGPUBuffer(buffer) {\n    return this._gpuBuffers[buffer.uid] || this.createGPUBuffer(buffer);\n  }\n  updateBuffer(buffer) {\n    const gpuBuffer = this._gpuBuffers[buffer.uid] || this.createGPUBuffer(buffer);\n    const data = buffer.data;\n    if (buffer._updateID && data) {\n      buffer._updateID = 0;\n      this._gpu.device.queue.writeBuffer(\n        gpuBuffer,\n        0,\n        data.buffer,\n        0,\n        // round to the nearest 4 bytes\n        (buffer._updateSize || data.byteLength) + 3 & ~3\n      );\n    }\n    return gpuBuffer;\n  }\n  /** dispose all WebGL resources of all managed buffers */\n  destroyAll() {\n    for (const id in this._gpuBuffers) {\n      this._gpuBuffers[id]?.destroy();\n    }\n    this._gpuBuffers = {};\n  }\n  createGPUBuffer(buffer) {\n    if (!this._gpuBuffers[buffer.uid]) {\n      buffer.on(\"update\", this.updateBuffer, this);\n      buffer.on(\"change\", this.onBufferChange, this);\n      buffer.on(\"destroy\", this.onBufferDestroy, this);\n    }\n    const gpuBuffer = this._gpu.device.createBuffer(buffer.descriptor);\n    buffer._updateID = 0;\n    if (buffer.data) {\n      fastCopy(buffer.data.buffer, gpuBuffer.getMappedRange());\n      gpuBuffer.unmap();\n    }\n    this._gpuBuffers[buffer.uid] = gpuBuffer;\n    return gpuBuffer;\n  }\n  onBufferChange(buffer) {\n    const gpuBuffer = this._gpuBuffers[buffer.uid];\n    gpuBuffer.destroy();\n    buffer._updateID = 0;\n    this._gpuBuffers[buffer.uid] = this.createGPUBuffer(buffer);\n  }\n  /**\n   * Disposes buffer\n   * @param buffer - buffer with data\n   */\n  onBufferDestroy(buffer) {\n    this._destroyBuffer(buffer);\n  }\n  destroy() {\n    this.destroyAll();\n    this._gpuBuffers = {};\n  }\n  _destroyBuffer(buffer) {\n    buffer.off(\"update\", this.updateBuffer, this);\n    buffer.off(\"change\", this.onBufferChange, this);\n    buffer.off(\"destroy\", this.onBufferDestroy, this);\n    if (!this._gpuBuffers[buffer.uid])\n      return;\n    const gpuBuffer = this._gpuBuffers[buffer.uid];\n    gpuBuffer.destroy();\n    this._gpuBuffers[buffer.uid] = null;\n  }\n}\n/** @ignore */\nGpuBufferSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"buffer\"\n};\n\nexport { GpuBufferSystem };\n//# sourceMappingURL=GpuBufferSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GpuColorMaskSystem {\n  constructor(renderer) {\n    this._colorMaskCache = 15;\n    this._renderer = renderer;\n  }\n  setMask(colorMask) {\n    if (this._colorMaskCache === colorMask)\n      return;\n    this._colorMaskCache = colorMask;\n    this._renderer.pipeline.setColorMask(colorMask);\n  }\n  destroy() {\n    this._renderer = null;\n    this._colorMaskCache = null;\n  }\n}\n/** @ignore */\nGpuColorMaskSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"colorMask\"\n};\n\nexport { GpuColorMaskSystem };\n//# sourceMappingURL=GpuColorMaskSystem.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GpuDeviceSystem {\n  /**\n   * @param {WebGPURenderer} renderer - The renderer this System works for.\n   */\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  async init(options) {\n    if (this._initPromise)\n      return this._initPromise;\n    this._initPromise = (options.gpu ? Promise.resolve(options.gpu) : this._createDeviceAndAdaptor(options)).then((gpu) => {\n      this.gpu = gpu;\n      this._renderer.runners.contextChange.emit(this.gpu);\n    });\n    return this._initPromise;\n  }\n  /**\n   * Handle the context change event\n   * @param gpu\n   */\n  contextChange(gpu) {\n    this._renderer.gpu = gpu;\n  }\n  /**\n   * Helper class to create a WebGL Context\n   * @param {object} options - An options object that gets passed in to the canvas element containing the\n   *    context attributes\n   * @see https://developer.mozilla.org/en/docs/Web/API/HTMLCanvasElement/getContext\n   * @returns {WebGLRenderingContext} the WebGL context\n   */\n  async _createDeviceAndAdaptor(options) {\n    const adapter = await DOMAdapter.get().getNavigator().gpu.requestAdapter({\n      powerPreference: options.powerPreference,\n      forceFallbackAdapter: options.forceFallbackAdapter\n    });\n    const requiredFeatures = [\n      \"texture-compression-bc\",\n      \"texture-compression-astc\",\n      \"texture-compression-etc2\"\n    ].filter((feature) => adapter.features.has(feature));\n    const device = await adapter.requestDevice({\n      requiredFeatures\n    });\n    return { adapter, device };\n  }\n  destroy() {\n    this.gpu = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGpuDeviceSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"device\"\n};\n/** The default options for the GpuDeviceSystem. */\nGpuDeviceSystem.defaultOptions = {\n  /**\n   * {@link WebGPUOptions.powerPreference}\n   * @default default\n   */\n  powerPreference: void 0,\n  /**\n   * Force the use of the fallback adapter\n   * @default false\n   */\n  forceFallbackAdapter: false\n};\n\nexport { GpuDeviceSystem };\n//# sourceMappingURL=GpuDeviceSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GpuEncoderSystem {\n  constructor(renderer) {\n    this._boundBindGroup = /* @__PURE__ */ Object.create(null);\n    this._boundVertexBuffer = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n  }\n  renderStart() {\n    this.commandFinished = new Promise((resolve) => {\n      this._resolveCommandFinished = resolve;\n    });\n    this.commandEncoder = this._renderer.gpu.device.createCommandEncoder();\n  }\n  beginRenderPass(gpuRenderTarget) {\n    this.endRenderPass();\n    this._clearCache();\n    this.renderPassEncoder = this.commandEncoder.beginRenderPass(gpuRenderTarget.descriptor);\n  }\n  endRenderPass() {\n    if (this.renderPassEncoder) {\n      this.renderPassEncoder.end();\n    }\n    this.renderPassEncoder = null;\n  }\n  setViewport(viewport) {\n    this.renderPassEncoder.setViewport(viewport.x, viewport.y, viewport.width, viewport.height, 0, 1);\n  }\n  setPipelineFromGeometryProgramAndState(geometry, program, state, topology) {\n    const pipeline = this._renderer.pipeline.getPipeline(geometry, program, state, topology);\n    this.setPipeline(pipeline);\n  }\n  setPipeline(pipeline) {\n    if (this._boundPipeline === pipeline)\n      return;\n    this._boundPipeline = pipeline;\n    this.renderPassEncoder.setPipeline(pipeline);\n  }\n  _setVertexBuffer(index, buffer) {\n    if (this._boundVertexBuffer[index] === buffer)\n      return;\n    this._boundVertexBuffer[index] = buffer;\n    this.renderPassEncoder.setVertexBuffer(index, this._renderer.buffer.updateBuffer(buffer));\n  }\n  _setIndexBuffer(buffer) {\n    if (this._boundIndexBuffer === buffer)\n      return;\n    this._boundIndexBuffer = buffer;\n    const indexFormat = buffer.data.BYTES_PER_ELEMENT === 2 ? \"uint16\" : \"uint32\";\n    this.renderPassEncoder.setIndexBuffer(this._renderer.buffer.updateBuffer(buffer), indexFormat);\n  }\n  resetBindGroup(index) {\n    this._boundBindGroup[index] = null;\n  }\n  setBindGroup(index, bindGroup, program) {\n    if (this._boundBindGroup[index] === bindGroup)\n      return;\n    this._boundBindGroup[index] = bindGroup;\n    bindGroup._touch(this._renderer.textureGC.count);\n    const gpuBindGroup = this._renderer.bindGroup.getBindGroup(bindGroup, program, index);\n    this.renderPassEncoder.setBindGroup(index, gpuBindGroup);\n  }\n  setGeometry(geometry, program) {\n    const buffersToBind = this._renderer.pipeline.getBufferNamesToBind(geometry, program);\n    for (const i in buffersToBind) {\n      this._setVertexBuffer(parseInt(i, 10), geometry.attributes[buffersToBind[i]].buffer);\n    }\n    if (geometry.indexBuffer) {\n      this._setIndexBuffer(geometry.indexBuffer);\n    }\n  }\n  _setShaderBindGroups(shader, skipSync) {\n    for (const i in shader.groups) {\n      const bindGroup = shader.groups[i];\n      if (!skipSync) {\n        this._syncBindGroup(bindGroup);\n      }\n      this.setBindGroup(i, bindGroup, shader.gpuProgram);\n    }\n  }\n  _syncBindGroup(bindGroup) {\n    for (const j in bindGroup.resources) {\n      const resource = bindGroup.resources[j];\n      if (resource.isUniformGroup) {\n        this._renderer.ubo.updateUniformGroup(resource);\n      }\n    }\n  }\n  draw(options) {\n    const { geometry, shader, state, topology, size, start, instanceCount, skipSync } = options;\n    this.setPipelineFromGeometryProgramAndState(geometry, shader.gpuProgram, state, topology);\n    this.setGeometry(geometry, shader.gpuProgram);\n    this._setShaderBindGroups(shader, skipSync);\n    if (geometry.indexBuffer) {\n      this.renderPassEncoder.drawIndexed(\n        size || geometry.indexBuffer.data.length,\n        instanceCount ?? geometry.instanceCount,\n        start || 0\n      );\n    } else {\n      this.renderPassEncoder.draw(size || geometry.getSize(), instanceCount ?? geometry.instanceCount, start || 0);\n    }\n  }\n  finishRenderPass() {\n    if (this.renderPassEncoder) {\n      this.renderPassEncoder.end();\n      this.renderPassEncoder = null;\n    }\n  }\n  postrender() {\n    this.finishRenderPass();\n    this._gpu.device.queue.submit([this.commandEncoder.finish()]);\n    this._resolveCommandFinished();\n    this.commandEncoder = null;\n  }\n  // restores a render pass if finishRenderPass was called\n  // not optimised as really used for debugging!\n  // used when we want to stop drawing and log a texture..\n  restoreRenderPass() {\n    const descriptor = this._renderer.renderTarget.adaptor.getDescriptor(\n      this._renderer.renderTarget.renderTarget,\n      false,\n      [0, 0, 0, 1]\n    );\n    this.renderPassEncoder = this.commandEncoder.beginRenderPass(descriptor);\n    const boundPipeline = this._boundPipeline;\n    const boundVertexBuffer = { ...this._boundVertexBuffer };\n    const boundIndexBuffer = this._boundIndexBuffer;\n    const boundBindGroup = { ...this._boundBindGroup };\n    this._clearCache();\n    const viewport = this._renderer.renderTarget.viewport;\n    this.renderPassEncoder.setViewport(viewport.x, viewport.y, viewport.width, viewport.height, 0, 1);\n    this.setPipeline(boundPipeline);\n    for (const i in boundVertexBuffer) {\n      this._setVertexBuffer(i, boundVertexBuffer[i]);\n    }\n    for (const i in boundBindGroup) {\n      this.setBindGroup(i, boundBindGroup[i], null);\n    }\n    this._setIndexBuffer(boundIndexBuffer);\n  }\n  _clearCache() {\n    for (let i = 0; i < 16; i++) {\n      this._boundBindGroup[i] = null;\n      this._boundVertexBuffer[i] = null;\n    }\n    this._boundIndexBuffer = null;\n    this._boundPipeline = null;\n  }\n  destroy() {\n    this._renderer = null;\n    this._gpu = null;\n    this._boundBindGroup = null;\n    this._boundVertexBuffer = null;\n    this._boundIndexBuffer = null;\n    this._boundPipeline = null;\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n}\n/** @ignore */\nGpuEncoderSystem.extension = {\n  type: [ExtensionType.WebGPUSystem],\n  name: \"encoder\",\n  priority: 1\n};\n\nexport { GpuEncoderSystem };\n//# sourceMappingURL=GpuEncoderSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GpuLimitsSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  contextChange() {\n    this.maxTextures = this._renderer.device.gpu.device.limits.maxSampledTexturesPerShaderStage;\n    this.maxBatchableTextures = this.maxTextures;\n  }\n  destroy() {\n  }\n}\n/** @ignore */\nGpuLimitsSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"limits\"\n};\n\nexport { GpuLimitsSystem };\n//# sourceMappingURL=GpuLimitsSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { STENCIL_MODES } from '../shared/state/const.mjs';\n\n\"use strict\";\nclass GpuStencilSystem {\n  constructor(renderer) {\n    this._renderTargetStencilState = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    renderer.renderTarget.onRenderTargetChange.add(this);\n  }\n  onRenderTargetChange(renderTarget) {\n    let stencilState = this._renderTargetStencilState[renderTarget.uid];\n    if (!stencilState) {\n      stencilState = this._renderTargetStencilState[renderTarget.uid] = {\n        stencilMode: STENCIL_MODES.DISABLED,\n        stencilReference: 0\n      };\n    }\n    this._activeRenderTarget = renderTarget;\n    this.setStencilMode(stencilState.stencilMode, stencilState.stencilReference);\n  }\n  setStencilMode(stencilMode, stencilReference) {\n    const stencilState = this._renderTargetStencilState[this._activeRenderTarget.uid];\n    stencilState.stencilMode = stencilMode;\n    stencilState.stencilReference = stencilReference;\n    const renderer = this._renderer;\n    renderer.pipeline.setStencilMode(stencilMode);\n    renderer.encoder.renderPassEncoder.setStencilReference(stencilReference);\n  }\n  destroy() {\n    this._renderer.renderTarget.onRenderTargetChange.remove(this);\n    this._renderer = null;\n    this._activeRenderTarget = null;\n    this._renderTargetStencilState = null;\n  }\n}\n/** @ignore */\nGpuStencilSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"stencil\"\n};\n\nexport { GpuStencilSystem };\n//# sourceMappingURL=GpuStencilSystem.mjs.map\n","\"use strict\";\nconst WGSL_ALIGN_SIZE_DATA = {\n  i32: { align: 4, size: 4 },\n  u32: { align: 4, size: 4 },\n  f32: { align: 4, size: 4 },\n  f16: { align: 2, size: 2 },\n  \"vec2<i32>\": { align: 8, size: 8 },\n  \"vec2<u32>\": { align: 8, size: 8 },\n  \"vec2<f32>\": { align: 8, size: 8 },\n  \"vec2<f16>\": { align: 4, size: 4 },\n  \"vec3<i32>\": { align: 16, size: 12 },\n  \"vec3<u32>\": { align: 16, size: 12 },\n  \"vec3<f32>\": { align: 16, size: 12 },\n  \"vec3<f16>\": { align: 8, size: 6 },\n  \"vec4<i32>\": { align: 16, size: 16 },\n  \"vec4<u32>\": { align: 16, size: 16 },\n  \"vec4<f32>\": { align: 16, size: 16 },\n  \"vec4<f16>\": { align: 8, size: 8 },\n  \"mat2x2<f32>\": { align: 8, size: 16 },\n  \"mat2x2<f16>\": { align: 4, size: 8 },\n  \"mat3x2<f32>\": { align: 8, size: 24 },\n  \"mat3x2<f16>\": { align: 4, size: 12 },\n  \"mat4x2<f32>\": { align: 8, size: 32 },\n  \"mat4x2<f16>\": { align: 4, size: 16 },\n  \"mat2x3<f32>\": { align: 16, size: 32 },\n  \"mat2x3<f16>\": { align: 8, size: 16 },\n  \"mat3x3<f32>\": { align: 16, size: 48 },\n  \"mat3x3<f16>\": { align: 8, size: 24 },\n  \"mat4x3<f32>\": { align: 16, size: 64 },\n  \"mat4x3<f16>\": { align: 8, size: 32 },\n  \"mat2x4<f32>\": { align: 16, size: 32 },\n  \"mat2x4<f16>\": { align: 8, size: 16 },\n  \"mat3x4<f32>\": { align: 16, size: 48 },\n  \"mat3x4<f16>\": { align: 8, size: 24 },\n  \"mat4x4<f32>\": { align: 16, size: 64 },\n  \"mat4x4<f16>\": { align: 8, size: 32 }\n};\nfunction createUboElementsWGSL(uniformData) {\n  const uboElements = uniformData.map((data) => ({\n    data,\n    offset: 0,\n    size: 0\n  }));\n  let offset = 0;\n  for (let i = 0; i < uboElements.length; i++) {\n    const uboElement = uboElements[i];\n    let size = WGSL_ALIGN_SIZE_DATA[uboElement.data.type].size;\n    const align = WGSL_ALIGN_SIZE_DATA[uboElement.data.type].align;\n    if (!WGSL_ALIGN_SIZE_DATA[uboElement.data.type]) {\n      throw new Error(`[Pixi.js] WebGPU UniformBuffer: Unknown type ${uboElement.data.type}`);\n    }\n    if (uboElement.data.size > 1) {\n      size = Math.max(size, align) * uboElement.data.size;\n    }\n    offset = Math.ceil(offset / align) * align;\n    uboElement.size = size;\n    uboElement.offset = offset;\n    offset += size;\n  }\n  offset = Math.ceil(offset / 16) * 16;\n  return { uboElements, size: offset };\n}\n\nexport { WGSL_ALIGN_SIZE_DATA, createUboElementsWGSL };\n//# sourceMappingURL=createUboElementsWGSL.mjs.map\n","import { WGSL_ALIGN_SIZE_DATA } from './createUboElementsWGSL.mjs';\n\n\"use strict\";\nfunction generateArraySyncWGSL(uboElement, offsetToAdd) {\n  const { size, align } = WGSL_ALIGN_SIZE_DATA[uboElement.data.type];\n  const remainder = (align - size) / 4;\n  const data = uboElement.data.type.indexOf(\"i32\") >= 0 ? \"dataInt32\" : \"data\";\n  return `\n         v = uv.${uboElement.data.name};\n         ${offsetToAdd !== 0 ? `offset += ${offsetToAdd};` : \"\"}\n\n         arrayOffset = offset;\n\n         t = 0;\n\n         for(var i=0; i < ${uboElement.data.size * (size / 4)}; i++)\n         {\n             for(var j = 0; j < ${size / 4}; j++)\n             {\n                 ${data}[arrayOffset++] = v[t++];\n             }\n             ${remainder !== 0 ? `arrayOffset += ${remainder};` : \"\"}\n         }\n     `;\n}\n\nexport { generateArraySyncWGSL };\n//# sourceMappingURL=generateArraySyncWGSL.mjs.map\n","import { createUboSyncFunction } from '../../../shared/shader/utils/createUboSyncFunction.mjs';\nimport { uboSyncFunctionsWGSL } from '../../../shared/shader/utils/uboSyncFunctions.mjs';\nimport { generateArraySyncWGSL } from './generateArraySyncWGSL.mjs';\n\n\"use strict\";\nfunction createUboSyncFunctionWGSL(uboElements) {\n  return createUboSyncFunction(\n    uboElements,\n    \"uboWgsl\",\n    generateArraySyncWGSL,\n    uboSyncFunctionsWGSL\n  );\n}\n\nexport { createUboSyncFunctionWGSL };\n//# sourceMappingURL=createUboSyncFunctionWGSL.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { UboSystem } from '../shared/shader/UboSystem.mjs';\nimport { createUboElementsWGSL } from './shader/utils/createUboElementsWGSL.mjs';\nimport { createUboSyncFunctionWGSL } from './shader/utils/createUboSyncFunctionWGSL.mjs';\n\n\"use strict\";\nclass GpuUboSystem extends UboSystem {\n  constructor() {\n    super({\n      createUboElements: createUboElementsWGSL,\n      generateUboSync: createUboSyncFunctionWGSL\n    });\n  }\n}\n/** @ignore */\nGpuUboSystem.extension = {\n  type: [ExtensionType.WebGPUSystem],\n  name: \"ubo\"\n};\n\nexport { GpuUboSystem };\n//# sourceMappingURL=GpuUboSystem.mjs.map\n","\"use strict\";\nclass UboBatch {\n  constructor({ minUniformOffsetAlignment }) {\n    this._minUniformOffsetAlignment = 256;\n    this.byteIndex = 0;\n    this._minUniformOffsetAlignment = minUniformOffsetAlignment;\n    this.data = new Float32Array(65535);\n  }\n  clear() {\n    this.byteIndex = 0;\n  }\n  addEmptyGroup(size) {\n    if (size > this._minUniformOffsetAlignment / 4) {\n      throw new Error(`UniformBufferBatch: array is too large: ${size * 4}`);\n    }\n    const start = this.byteIndex;\n    let newSize = start + size * 4;\n    newSize = Math.ceil(newSize / this._minUniformOffsetAlignment) * this._minUniformOffsetAlignment;\n    if (newSize > this.data.length * 4) {\n      throw new Error(\"UniformBufferBatch: ubo batch got too big\");\n    }\n    this.byteIndex = newSize;\n    return start;\n  }\n  addGroup(array) {\n    const offset = this.addEmptyGroup(array.length);\n    for (let i = 0; i < array.length; i++) {\n      this.data[offset / 4 + i] = array[i];\n    }\n    return offset;\n  }\n  destroy() {\n    this.data = null;\n  }\n}\n\nexport { UboBatch };\n//# sourceMappingURL=UboBatch.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Buffer } from '../shared/buffer/Buffer.mjs';\nimport { BufferResource } from '../shared/buffer/BufferResource.mjs';\nimport { BufferUsage } from '../shared/buffer/const.mjs';\nimport { UboBatch } from './buffer/UboBatch.mjs';\nimport { BindGroup } from './shader/BindGroup.mjs';\n\n\"use strict\";\nconst minUniformOffsetAlignment = 128;\nclass GpuUniformBatchPipe {\n  constructor(renderer) {\n    this._bindGroupHash = /* @__PURE__ */ Object.create(null);\n    // number of buffers..\n    this._buffers = [];\n    this._bindGroups = [];\n    this._bufferResources = [];\n    this._renderer = renderer;\n    this._renderer.renderableGC.addManagedHash(this, \"_bindGroupHash\");\n    this._batchBuffer = new UboBatch({ minUniformOffsetAlignment });\n    const totalBuffers = 256 / minUniformOffsetAlignment;\n    for (let i = 0; i < totalBuffers; i++) {\n      let usage = BufferUsage.UNIFORM | BufferUsage.COPY_DST;\n      if (i === 0)\n        usage |= BufferUsage.COPY_SRC;\n      this._buffers.push(new Buffer({\n        data: this._batchBuffer.data,\n        usage\n      }));\n    }\n  }\n  renderEnd() {\n    this._uploadBindGroups();\n    this._resetBindGroups();\n  }\n  _resetBindGroups() {\n    for (const i in this._bindGroupHash) {\n      this._bindGroupHash[i] = null;\n    }\n    this._batchBuffer.clear();\n  }\n  // just works for single bind groups for now\n  getUniformBindGroup(group, duplicate) {\n    if (!duplicate && this._bindGroupHash[group.uid]) {\n      return this._bindGroupHash[group.uid];\n    }\n    this._renderer.ubo.ensureUniformGroup(group);\n    const data = group.buffer.data;\n    const offset = this._batchBuffer.addEmptyGroup(data.length);\n    this._renderer.ubo.syncUniformGroup(group, this._batchBuffer.data, offset / 4);\n    this._bindGroupHash[group.uid] = this._getBindGroup(offset / minUniformOffsetAlignment);\n    return this._bindGroupHash[group.uid];\n  }\n  getUboResource(group) {\n    this._renderer.ubo.updateUniformGroup(group);\n    const data = group.buffer.data;\n    const offset = this._batchBuffer.addGroup(data);\n    return this._getBufferResource(offset / minUniformOffsetAlignment);\n  }\n  getArrayBindGroup(data) {\n    const offset = this._batchBuffer.addGroup(data);\n    return this._getBindGroup(offset / minUniformOffsetAlignment);\n  }\n  getArrayBufferResource(data) {\n    const offset = this._batchBuffer.addGroup(data);\n    const index = offset / minUniformOffsetAlignment;\n    return this._getBufferResource(index);\n  }\n  _getBufferResource(index) {\n    if (!this._bufferResources[index]) {\n      const buffer = this._buffers[index % 2];\n      this._bufferResources[index] = new BufferResource({\n        buffer,\n        offset: (index / 2 | 0) * 256,\n        size: minUniformOffsetAlignment\n      });\n    }\n    return this._bufferResources[index];\n  }\n  _getBindGroup(index) {\n    if (!this._bindGroups[index]) {\n      const bindGroup = new BindGroup({\n        0: this._getBufferResource(index)\n      });\n      this._bindGroups[index] = bindGroup;\n    }\n    return this._bindGroups[index];\n  }\n  _uploadBindGroups() {\n    const bufferSystem = this._renderer.buffer;\n    const firstBuffer = this._buffers[0];\n    firstBuffer.update(this._batchBuffer.byteIndex);\n    bufferSystem.updateBuffer(firstBuffer);\n    const commandEncoder = this._renderer.gpu.device.createCommandEncoder();\n    for (let i = 1; i < this._buffers.length; i++) {\n      const buffer = this._buffers[i];\n      commandEncoder.copyBufferToBuffer(\n        bufferSystem.getGPUBuffer(firstBuffer),\n        minUniformOffsetAlignment,\n        bufferSystem.getGPUBuffer(buffer),\n        0,\n        this._batchBuffer.byteIndex\n      );\n    }\n    this._renderer.gpu.device.queue.submit([commandEncoder.finish()]);\n  }\n  destroy() {\n    for (let i = 0; i < this._bindGroups.length; i++) {\n      this._bindGroups[i]?.destroy();\n    }\n    this._bindGroups = null;\n    this._bindGroupHash = null;\n    for (let i = 0; i < this._buffers.length; i++) {\n      this._buffers[i].destroy();\n    }\n    this._buffers = null;\n    for (let i = 0; i < this._bufferResources.length; i++) {\n      this._bufferResources[i].destroy();\n    }\n    this._bufferResources = null;\n    this._batchBuffer.destroy();\n    this._bindGroupHash = null;\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGpuUniformBatchPipe.extension = {\n  type: [\n    ExtensionType.WebGPUPipes\n  ],\n  name: \"uniformBatch\"\n};\n\nexport { GpuUniformBatchPipe };\n//# sourceMappingURL=GpuUniformBatchPipe.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { ensureAttributes } from '../../gl/shader/program/ensureAttributes.mjs';\nimport { STENCIL_MODES } from '../../shared/state/const.mjs';\nimport { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { GpuStencilModesToPixi } from '../state/GpuStencilModesToPixi.mjs';\n\n\"use strict\";\nconst topologyStringToId = {\n  \"point-list\": 0,\n  \"line-list\": 1,\n  \"line-strip\": 2,\n  \"triangle-list\": 3,\n  \"triangle-strip\": 4\n};\nfunction getGraphicsStateKey(geometryLayout, shaderKey, state, blendMode, topology) {\n  return geometryLayout << 24 | shaderKey << 16 | state << 10 | blendMode << 5 | topology;\n}\nfunction getGlobalStateKey(stencilStateId, multiSampleCount, colorMask, renderTarget) {\n  return colorMask << 6 | stencilStateId << 3 | renderTarget << 1 | multiSampleCount;\n}\nclass PipelineSystem {\n  constructor(renderer) {\n    this._moduleCache = /* @__PURE__ */ Object.create(null);\n    this._bufferLayoutsCache = /* @__PURE__ */ Object.create(null);\n    this._bindingNamesCache = /* @__PURE__ */ Object.create(null);\n    this._pipeCache = /* @__PURE__ */ Object.create(null);\n    this._pipeStateCaches = /* @__PURE__ */ Object.create(null);\n    this._colorMask = 15;\n    this._multisampleCount = 1;\n    this._renderer = renderer;\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n    this.setStencilMode(STENCIL_MODES.DISABLED);\n    this._updatePipeHash();\n  }\n  setMultisampleCount(multisampleCount) {\n    if (this._multisampleCount === multisampleCount)\n      return;\n    this._multisampleCount = multisampleCount;\n    this._updatePipeHash();\n  }\n  setRenderTarget(renderTarget) {\n    this._multisampleCount = renderTarget.msaaSamples;\n    this._depthStencilAttachment = renderTarget.descriptor.depthStencilAttachment ? 1 : 0;\n    this._updatePipeHash();\n  }\n  setColorMask(colorMask) {\n    if (this._colorMask === colorMask)\n      return;\n    this._colorMask = colorMask;\n    this._updatePipeHash();\n  }\n  setStencilMode(stencilMode) {\n    if (this._stencilMode === stencilMode)\n      return;\n    this._stencilMode = stencilMode;\n    this._stencilState = GpuStencilModesToPixi[stencilMode];\n    this._updatePipeHash();\n  }\n  setPipeline(geometry, program, state, passEncoder) {\n    const pipeline = this.getPipeline(geometry, program, state);\n    passEncoder.setPipeline(pipeline);\n  }\n  getPipeline(geometry, program, state, topology) {\n    if (!geometry._layoutKey) {\n      ensureAttributes(geometry, program.attributeData);\n      this._generateBufferKey(geometry);\n    }\n    topology || (topology = geometry.topology);\n    const key = getGraphicsStateKey(\n      geometry._layoutKey,\n      program._layoutKey,\n      state.data,\n      state._blendModeId,\n      topologyStringToId[topology]\n    );\n    if (this._pipeCache[key])\n      return this._pipeCache[key];\n    this._pipeCache[key] = this._createPipeline(geometry, program, state, topology);\n    return this._pipeCache[key];\n  }\n  _createPipeline(geometry, program, state, topology) {\n    const device = this._gpu.device;\n    const buffers = this._createVertexBufferLayouts(geometry, program);\n    const blendModes = this._renderer.state.getColorTargets(state);\n    blendModes[0].writeMask = this._stencilMode === STENCIL_MODES.RENDERING_MASK_ADD ? 0 : this._colorMask;\n    const layout = this._renderer.shader.getProgramData(program).pipeline;\n    const descriptor = {\n      // TODO later check if its helpful to create..\n      // layout,\n      vertex: {\n        module: this._getModule(program.vertex.source),\n        entryPoint: program.vertex.entryPoint,\n        // geometry..\n        buffers\n      },\n      fragment: {\n        module: this._getModule(program.fragment.source),\n        entryPoint: program.fragment.entryPoint,\n        targets: blendModes\n      },\n      primitive: {\n        topology,\n        cullMode: state.cullMode\n      },\n      layout,\n      multisample: {\n        count: this._multisampleCount\n      },\n      // depthStencil,\n      label: `PIXI Pipeline`\n    };\n    if (this._depthStencilAttachment) {\n      descriptor.depthStencil = {\n        ...this._stencilState,\n        format: \"depth24plus-stencil8\",\n        depthWriteEnabled: state.depthTest,\n        depthCompare: state.depthTest ? \"less\" : \"always\"\n      };\n    }\n    const pipeline = device.createRenderPipeline(descriptor);\n    return pipeline;\n  }\n  _getModule(code) {\n    return this._moduleCache[code] || this._createModule(code);\n  }\n  _createModule(code) {\n    const device = this._gpu.device;\n    this._moduleCache[code] = device.createShaderModule({\n      code\n    });\n    return this._moduleCache[code];\n  }\n  _generateBufferKey(geometry) {\n    const keyGen = [];\n    let index = 0;\n    const attributeKeys = Object.keys(geometry.attributes).sort();\n    for (let i = 0; i < attributeKeys.length; i++) {\n      const attribute = geometry.attributes[attributeKeys[i]];\n      keyGen[index++] = attribute.offset;\n      keyGen[index++] = attribute.format;\n      keyGen[index++] = attribute.stride;\n      keyGen[index++] = attribute.instance;\n    }\n    const stringKey = keyGen.join(\"|\");\n    geometry._layoutKey = createIdFromString(stringKey, \"geometry\");\n    return geometry._layoutKey;\n  }\n  _generateAttributeLocationsKey(program) {\n    const keyGen = [];\n    let index = 0;\n    const attributeKeys = Object.keys(program.attributeData).sort();\n    for (let i = 0; i < attributeKeys.length; i++) {\n      const attribute = program.attributeData[attributeKeys[i]];\n      keyGen[index++] = attribute.location;\n    }\n    const stringKey = keyGen.join(\"|\");\n    program._attributeLocationsKey = createIdFromString(stringKey, \"programAttributes\");\n    return program._attributeLocationsKey;\n  }\n  /**\n   * Returns a hash of buffer names mapped to bind locations.\n   * This is used to bind the correct buffer to the correct location in the shader.\n   * @param geometry - The geometry where to get the buffer names\n   * @param program - The program where to get the buffer names\n   * @returns An object of buffer names mapped to the bind location.\n   */\n  getBufferNamesToBind(geometry, program) {\n    const key = geometry._layoutKey << 16 | program._attributeLocationsKey;\n    if (this._bindingNamesCache[key])\n      return this._bindingNamesCache[key];\n    const data = this._createVertexBufferLayouts(geometry, program);\n    const bufferNamesToBind = /* @__PURE__ */ Object.create(null);\n    const attributeData = program.attributeData;\n    for (let i = 0; i < data.length; i++) {\n      const attributes = Object.values(data[i].attributes);\n      const shaderLocation = attributes[0].shaderLocation;\n      for (const j in attributeData) {\n        if (attributeData[j].location === shaderLocation) {\n          bufferNamesToBind[i] = j;\n          break;\n        }\n      }\n    }\n    this._bindingNamesCache[key] = bufferNamesToBind;\n    return bufferNamesToBind;\n  }\n  _createVertexBufferLayouts(geometry, program) {\n    if (!program._attributeLocationsKey)\n      this._generateAttributeLocationsKey(program);\n    const key = geometry._layoutKey << 16 | program._attributeLocationsKey;\n    if (this._bufferLayoutsCache[key]) {\n      return this._bufferLayoutsCache[key];\n    }\n    const vertexBuffersLayout = [];\n    geometry.buffers.forEach((buffer) => {\n      const bufferEntry = {\n        arrayStride: 0,\n        stepMode: \"vertex\",\n        attributes: []\n      };\n      const bufferEntryAttributes = bufferEntry.attributes;\n      for (const i in program.attributeData) {\n        const attribute = geometry.attributes[i];\n        if ((attribute.divisor ?? 1) !== 1) {\n          warn(`Attribute ${i} has an invalid divisor value of '${attribute.divisor}'. WebGPU only supports a divisor value of 1`);\n        }\n        if (attribute.buffer === buffer) {\n          bufferEntry.arrayStride = attribute.stride;\n          bufferEntry.stepMode = attribute.instance ? \"instance\" : \"vertex\";\n          bufferEntryAttributes.push({\n            shaderLocation: program.attributeData[i].location,\n            offset: attribute.offset,\n            format: attribute.format\n          });\n        }\n      }\n      if (bufferEntryAttributes.length) {\n        vertexBuffersLayout.push(bufferEntry);\n      }\n    });\n    this._bufferLayoutsCache[key] = vertexBuffersLayout;\n    return vertexBuffersLayout;\n  }\n  _updatePipeHash() {\n    const key = getGlobalStateKey(\n      this._stencilMode,\n      this._multisampleCount,\n      this._colorMask,\n      this._depthStencilAttachment\n    );\n    if (!this._pipeStateCaches[key]) {\n      this._pipeStateCaches[key] = /* @__PURE__ */ Object.create(null);\n    }\n    this._pipeCache = this._pipeStateCaches[key];\n  }\n  destroy() {\n    this._renderer = null;\n    this._bufferLayoutsCache = null;\n  }\n}\n/** @ignore */\nPipelineSystem.extension = {\n  type: [ExtensionType.WebGPUSystem],\n  name: \"pipeline\"\n};\n\nexport { PipelineSystem };\n//# sourceMappingURL=PipelineSystem.mjs.map\n","\"use strict\";\nclass GpuRenderTarget {\n  constructor() {\n    this.contexts = [];\n    this.msaaTextures = [];\n    this.msaaSamples = 1;\n  }\n}\n\nexport { GpuRenderTarget };\n//# sourceMappingURL=GpuRenderTarget.mjs.map\n","import { CLEAR } from '../../gl/const.mjs';\nimport { CanvasSource } from '../../shared/texture/sources/CanvasSource.mjs';\nimport { TextureSource } from '../../shared/texture/sources/TextureSource.mjs';\nimport { GpuRenderTarget } from './GpuRenderTarget.mjs';\n\n\"use strict\";\nclass GpuRenderTargetAdaptor {\n  init(renderer, renderTargetSystem) {\n    this._renderer = renderer;\n    this._renderTargetSystem = renderTargetSystem;\n  }\n  copyToTexture(sourceRenderSurfaceTexture, destinationTexture, originSrc, size, originDest) {\n    const renderer = this._renderer;\n    const baseGpuTexture = this._getGpuColorTexture(\n      sourceRenderSurfaceTexture\n    );\n    const backGpuTexture = renderer.texture.getGpuSource(\n      destinationTexture.source\n    );\n    renderer.encoder.commandEncoder.copyTextureToTexture(\n      {\n        texture: baseGpuTexture,\n        origin: originSrc\n      },\n      {\n        texture: backGpuTexture,\n        origin: originDest\n      },\n      size\n    );\n    return destinationTexture;\n  }\n  startRenderPass(renderTarget, clear = true, clearColor, viewport) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const gpuRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    const descriptor = this.getDescriptor(renderTarget, clear, clearColor);\n    gpuRenderTarget.descriptor = descriptor;\n    this._renderer.pipeline.setRenderTarget(gpuRenderTarget);\n    this._renderer.encoder.beginRenderPass(gpuRenderTarget);\n    this._renderer.encoder.setViewport(viewport);\n  }\n  finishRenderPass() {\n    this._renderer.encoder.endRenderPass();\n  }\n  /**\n   * returns the gpu texture for the first color texture in the render target\n   * mainly used by the filter manager to get copy the texture for blending\n   * @param renderTarget\n   * @returns a gpu texture\n   */\n  _getGpuColorTexture(renderTarget) {\n    const gpuRenderTarget = this._renderTargetSystem.getGpuRenderTarget(renderTarget);\n    if (gpuRenderTarget.contexts[0]) {\n      return gpuRenderTarget.contexts[0].getCurrentTexture();\n    }\n    return this._renderer.texture.getGpuSource(\n      renderTarget.colorTextures[0].source\n    );\n  }\n  getDescriptor(renderTarget, clear, clearValue) {\n    if (typeof clear === \"boolean\") {\n      clear = clear ? CLEAR.ALL : CLEAR.NONE;\n    }\n    const renderTargetSystem = this._renderTargetSystem;\n    const gpuRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    const colorAttachments = renderTarget.colorTextures.map(\n      (texture, i) => {\n        const context = gpuRenderTarget.contexts[i];\n        let view;\n        let resolveTarget;\n        if (context) {\n          const currentTexture = context.getCurrentTexture();\n          const canvasTextureView = currentTexture.createView();\n          view = canvasTextureView;\n        } else {\n          view = this._renderer.texture.getGpuSource(texture).createView({\n            mipLevelCount: 1\n          });\n        }\n        if (gpuRenderTarget.msaaTextures[i]) {\n          resolveTarget = view;\n          view = this._renderer.texture.getTextureView(\n            gpuRenderTarget.msaaTextures[i]\n          );\n        }\n        const loadOp = clear & CLEAR.COLOR ? \"clear\" : \"load\";\n        clearValue ?? (clearValue = renderTargetSystem.defaultClearColor);\n        return {\n          view,\n          resolveTarget,\n          clearValue,\n          storeOp: \"store\",\n          loadOp\n        };\n      }\n    );\n    let depthStencilAttachment;\n    if ((renderTarget.stencil || renderTarget.depth) && !renderTarget.depthStencilTexture) {\n      renderTarget.ensureDepthStencilTexture();\n      renderTarget.depthStencilTexture.source.sampleCount = gpuRenderTarget.msaa ? 4 : 1;\n    }\n    if (renderTarget.depthStencilTexture) {\n      const stencilLoadOp = clear & CLEAR.STENCIL ? \"clear\" : \"load\";\n      const depthLoadOp = clear & CLEAR.DEPTH ? \"clear\" : \"load\";\n      depthStencilAttachment = {\n        view: this._renderer.texture.getGpuSource(renderTarget.depthStencilTexture.source).createView(),\n        stencilStoreOp: \"store\",\n        stencilLoadOp,\n        depthClearValue: 1,\n        depthLoadOp,\n        depthStoreOp: \"store\"\n      };\n    }\n    const descriptor = {\n      colorAttachments,\n      depthStencilAttachment\n    };\n    return descriptor;\n  }\n  clear(renderTarget, clear = true, clearColor, viewport) {\n    if (!clear)\n      return;\n    const { gpu, encoder } = this._renderer;\n    const device = gpu.device;\n    const standAlone = encoder.commandEncoder === null;\n    if (standAlone) {\n      const commandEncoder = device.createCommandEncoder();\n      const renderPassDescriptor = this.getDescriptor(renderTarget, clear, clearColor);\n      const passEncoder = commandEncoder.beginRenderPass(renderPassDescriptor);\n      passEncoder.setViewport(viewport.x, viewport.y, viewport.width, viewport.height, 0, 1);\n      passEncoder.end();\n      const gpuCommands = commandEncoder.finish();\n      device.queue.submit([gpuCommands]);\n    } else {\n      this.startRenderPass(renderTarget, clear, clearColor, viewport);\n    }\n  }\n  initGpuRenderTarget(renderTarget) {\n    renderTarget.isRoot = true;\n    const gpuRenderTarget = new GpuRenderTarget();\n    renderTarget.colorTextures.forEach((colorTexture, i) => {\n      if (colorTexture instanceof CanvasSource) {\n        const context = colorTexture.resource.getContext(\n          \"webgpu\"\n        );\n        const alphaMode = colorTexture.transparent ? \"premultiplied\" : \"opaque\";\n        try {\n          context.configure({\n            device: this._renderer.gpu.device,\n            usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST | GPUTextureUsage.RENDER_ATTACHMENT | GPUTextureUsage.COPY_SRC,\n            format: \"bgra8unorm\",\n            alphaMode\n          });\n        } catch (e) {\n          console.error(e);\n        }\n        gpuRenderTarget.contexts[i] = context;\n      }\n      gpuRenderTarget.msaa = colorTexture.source.antialias;\n      if (colorTexture.source.antialias) {\n        const msaaTexture = new TextureSource({\n          width: 0,\n          height: 0,\n          sampleCount: 4\n        });\n        gpuRenderTarget.msaaTextures[i] = msaaTexture;\n      }\n    });\n    if (gpuRenderTarget.msaa) {\n      gpuRenderTarget.msaaSamples = 4;\n      if (renderTarget.depthStencilTexture) {\n        renderTarget.depthStencilTexture.source.sampleCount = 4;\n      }\n    }\n    return gpuRenderTarget;\n  }\n  destroyGpuRenderTarget(gpuRenderTarget) {\n    gpuRenderTarget.contexts.forEach((context) => {\n      context.unconfigure();\n    });\n    gpuRenderTarget.msaaTextures.forEach((texture) => {\n      texture.destroy();\n    });\n    gpuRenderTarget.msaaTextures.length = 0;\n    gpuRenderTarget.contexts.length = 0;\n  }\n  ensureDepthStencilTexture(renderTarget) {\n    const gpuRenderTarget = this._renderTargetSystem.getGpuRenderTarget(renderTarget);\n    if (renderTarget.depthStencilTexture && gpuRenderTarget.msaa) {\n      renderTarget.depthStencilTexture.source.sampleCount = 4;\n    }\n  }\n  resizeGpuRenderTarget(renderTarget) {\n    const gpuRenderTarget = this._renderTargetSystem.getGpuRenderTarget(renderTarget);\n    gpuRenderTarget.width = renderTarget.width;\n    gpuRenderTarget.height = renderTarget.height;\n    if (gpuRenderTarget.msaa) {\n      renderTarget.colorTextures.forEach((colorTexture, i) => {\n        const msaaTexture = gpuRenderTarget.msaaTextures[i];\n        msaaTexture?.resize(\n          colorTexture.source.width,\n          colorTexture.source.height,\n          colorTexture.source._resolution\n        );\n      });\n    }\n  }\n}\n\nexport { GpuRenderTargetAdaptor };\n//# sourceMappingURL=GpuRenderTargetAdaptor.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { RenderTargetSystem } from '../../shared/renderTarget/RenderTargetSystem.mjs';\nimport { GpuRenderTargetAdaptor } from './GpuRenderTargetAdaptor.mjs';\n\n\"use strict\";\nclass GpuRenderTargetSystem extends RenderTargetSystem {\n  constructor(renderer) {\n    super(renderer);\n    this.adaptor = new GpuRenderTargetAdaptor();\n    this.adaptor.init(renderer, this);\n  }\n}\n/** @ignore */\nGpuRenderTargetSystem.extension = {\n  type: [ExtensionType.WebGPUSystem],\n  name: \"renderTarget\"\n};\n\nexport { GpuRenderTargetSystem };\n//# sourceMappingURL=GpuRenderTargetSystem.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GpuShaderSystem {\n  constructor() {\n    this._gpuProgramData = /* @__PURE__ */ Object.create(null);\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n  getProgramData(program) {\n    return this._gpuProgramData[program._layoutKey] || this._createGPUProgramData(program);\n  }\n  _createGPUProgramData(program) {\n    const device = this._gpu.device;\n    const bindGroups = program.gpuLayout.map((group) => device.createBindGroupLayout({ entries: group }));\n    const pipelineLayoutDesc = { bindGroupLayouts: bindGroups };\n    this._gpuProgramData[program._layoutKey] = {\n      bindGroups,\n      pipeline: device.createPipelineLayout(pipelineLayoutDesc)\n    };\n    return this._gpuProgramData[program._layoutKey];\n  }\n  destroy() {\n    this._gpu = null;\n    this._gpuProgramData = null;\n  }\n}\n/** @ignore */\nGpuShaderSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"shader\"\n};\n\nexport { GpuShaderSystem };\n//# sourceMappingURL=GpuShaderSystem.mjs.map\n","\"use strict\";\nconst GpuBlendModesToPixi = {};\nGpuBlendModesToPixi.normal = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.add = {\n  alpha: {\n    srcFactor: \"src-alpha\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.multiply = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"dst\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.screen = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.overlay = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.none = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"zero\",\n    dstFactor: \"zero\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi[\"normal-npm\"] = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"src-alpha\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi[\"add-npm\"] = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"src-alpha\",\n    dstFactor: \"one\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi[\"screen-npm\"] = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"src-alpha\",\n    dstFactor: \"one-minus-src\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.erase = {\n  alpha: {\n    srcFactor: \"zero\",\n    dstFactor: \"one-minus-src-alpha\",\n    operation: \"add\"\n  },\n  color: {\n    srcFactor: \"zero\",\n    dstFactor: \"one-minus-src\",\n    operation: \"add\"\n  }\n};\nGpuBlendModesToPixi.min = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one\",\n    operation: \"min\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one\",\n    operation: \"min\"\n  }\n};\nGpuBlendModesToPixi.max = {\n  alpha: {\n    srcFactor: \"one\",\n    dstFactor: \"one\",\n    operation: \"max\"\n  },\n  color: {\n    srcFactor: \"one\",\n    dstFactor: \"one\",\n    operation: \"max\"\n  }\n};\n\nexport { GpuBlendModesToPixi };\n//# sourceMappingURL=GpuBlendModesToPixi.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { State } from '../../shared/state/State.mjs';\nimport { GpuBlendModesToPixi } from './GpuBlendModesToPixi.mjs';\n\n\"use strict\";\nclass GpuStateSystem {\n  constructor() {\n    this.defaultState = new State();\n    this.defaultState.blend = true;\n  }\n  contextChange(gpu) {\n    this.gpu = gpu;\n  }\n  /**\n   * Gets the blend mode data for the current state\n   * @param state - The state to get the blend mode from\n   */\n  getColorTargets(state) {\n    const blend = GpuBlendModesToPixi[state.blendMode] || GpuBlendModesToPixi.normal;\n    return [\n      {\n        format: \"bgra8unorm\",\n        writeMask: 0,\n        blend\n      }\n    ];\n  }\n  destroy() {\n    this.gpu = null;\n  }\n}\n/** @ignore */\nGpuStateSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"state\"\n};\n\nexport { GpuStateSystem };\n//# sourceMappingURL=GpuStateSystem.mjs.map\n","\"use strict\";\nconst gpuUploadBufferImageResource = {\n  type: \"image\",\n  upload(source, gpuTexture, gpu) {\n    const resource = source.resource;\n    const total = (source.pixelWidth | 0) * (source.pixelHeight | 0);\n    const bytesPerPixel = resource.byteLength / total;\n    gpu.device.queue.writeTexture(\n      { texture: gpuTexture },\n      resource,\n      {\n        offset: 0,\n        rowsPerImage: source.pixelHeight,\n        bytesPerRow: source.pixelWidth * bytesPerPixel\n      },\n      {\n        width: source.pixelWidth,\n        height: source.pixelHeight,\n        depthOrArrayLayers: 1\n      }\n    );\n  }\n};\n\nexport { gpuUploadBufferImageResource };\n//# sourceMappingURL=gpuUploadBufferImageResource.mjs.map\n","\"use strict\";\nconst blockDataMap = {\n  \"bc1-rgba-unorm\": { blockBytes: 8, blockWidth: 4, blockHeight: 4 },\n  \"bc2-rgba-unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 },\n  \"bc3-rgba-unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 },\n  \"bc7-rgba-unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 },\n  \"etc1-rgb-unorm\": { blockBytes: 8, blockWidth: 4, blockHeight: 4 },\n  \"etc2-rgba8unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 },\n  \"astc-4x4-unorm\": { blockBytes: 16, blockWidth: 4, blockHeight: 4 }\n};\nconst defaultBlockData = { blockBytes: 4, blockWidth: 1, blockHeight: 1 };\nconst gpuUploadCompressedTextureResource = {\n  type: \"compressed\",\n  upload(source, gpuTexture, gpu) {\n    let mipWidth = source.pixelWidth;\n    let mipHeight = source.pixelHeight;\n    const blockData = blockDataMap[source.format] || defaultBlockData;\n    for (let i = 0; i < source.resource.length; i++) {\n      const levelBuffer = source.resource[i];\n      const bytesPerRow = Math.ceil(mipWidth / blockData.blockWidth) * blockData.blockBytes;\n      gpu.device.queue.writeTexture(\n        {\n          texture: gpuTexture,\n          mipLevel: i\n        },\n        levelBuffer,\n        {\n          offset: 0,\n          bytesPerRow\n        },\n        {\n          width: Math.ceil(mipWidth / blockData.blockWidth) * blockData.blockWidth,\n          height: Math.ceil(mipHeight / blockData.blockHeight) * blockData.blockHeight,\n          depthOrArrayLayers: 1\n        }\n      );\n      mipWidth = Math.max(mipWidth >> 1, 1);\n      mipHeight = Math.max(mipHeight >> 1, 1);\n    }\n  }\n};\n\nexport { blockDataMap, gpuUploadCompressedTextureResource };\n//# sourceMappingURL=gpuUploadCompressedTextureResource.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { warn } from '../../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nconst gpuUploadImageResource = {\n  type: \"image\",\n  upload(source, gpuTexture, gpu) {\n    const resource = source.resource;\n    if (!resource)\n      return;\n    if (globalThis.HTMLImageElement && resource instanceof HTMLImageElement) {\n      const canvas = DOMAdapter.get().createCanvas(resource.width, resource.height);\n      const context = canvas.getContext(\"2d\");\n      context.drawImage(resource, 0, 0, resource.width, resource.height);\n      source.resource = canvas;\n      warn(\"ImageSource: Image element passed, converting to canvas and replacing resource.\");\n    }\n    const width = Math.min(gpuTexture.width, source.resourceWidth || source.pixelWidth);\n    const height = Math.min(gpuTexture.height, source.resourceHeight || source.pixelHeight);\n    const premultipliedAlpha = source.alphaMode === \"premultiply-alpha-on-upload\";\n    gpu.device.queue.copyExternalImageToTexture(\n      { source: resource },\n      { texture: gpuTexture, premultipliedAlpha },\n      {\n        width,\n        height\n      }\n    );\n  }\n};\n\nexport { gpuUploadImageResource };\n//# sourceMappingURL=gpuUploadImageSource.mjs.map\n","import { gpuUploadImageResource } from './gpuUploadImageSource.mjs';\n\n\"use strict\";\nconst gpuUploadVideoResource = {\n  type: \"video\",\n  upload(source, gpuTexture, gpu) {\n    gpuUploadImageResource.upload(source, gpuTexture, gpu);\n  }\n};\n\nexport { gpuUploadVideoResource };\n//# sourceMappingURL=gpuUploadVideoSource.mjs.map\n","\"use strict\";\nclass GpuMipmapGenerator {\n  constructor(device) {\n    this.device = device;\n    this.sampler = device.createSampler({ minFilter: \"linear\" });\n    this.pipelines = {};\n  }\n  _getMipmapPipeline(format) {\n    let pipeline = this.pipelines[format];\n    if (!pipeline) {\n      if (!this.mipmapShaderModule) {\n        this.mipmapShaderModule = this.device.createShaderModule({\n          code: (\n            /* wgsl */\n            `\n                        var<private> pos : array<vec2<f32>, 3> = array<vec2<f32>, 3>(\n                        vec2<f32>(-1.0, -1.0), vec2<f32>(-1.0, 3.0), vec2<f32>(3.0, -1.0));\n\n                        struct VertexOutput {\n                        @builtin(position) position : vec4<f32>,\n                        @location(0) texCoord : vec2<f32>,\n                        };\n\n                        @vertex\n                        fn vertexMain(@builtin(vertex_index) vertexIndex : u32) -> VertexOutput {\n                        var output : VertexOutput;\n                        output.texCoord = pos[vertexIndex] * vec2<f32>(0.5, -0.5) + vec2<f32>(0.5);\n                        output.position = vec4<f32>(pos[vertexIndex], 0.0, 1.0);\n                        return output;\n                        }\n\n                        @group(0) @binding(0) var imgSampler : sampler;\n                        @group(0) @binding(1) var img : texture_2d<f32>;\n\n                        @fragment\n                        fn fragmentMain(@location(0) texCoord : vec2<f32>) -> @location(0) vec4<f32> {\n                        return textureSample(img, imgSampler, texCoord);\n                        }\n                    `\n          )\n        });\n      }\n      pipeline = this.device.createRenderPipeline({\n        layout: \"auto\",\n        vertex: {\n          module: this.mipmapShaderModule,\n          entryPoint: \"vertexMain\"\n        },\n        fragment: {\n          module: this.mipmapShaderModule,\n          entryPoint: \"fragmentMain\",\n          targets: [{ format }]\n        }\n      });\n      this.pipelines[format] = pipeline;\n    }\n    return pipeline;\n  }\n  /**\n   * Generates mipmaps for the given GPUTexture from the data in level 0.\n   * @param {module:External.GPUTexture} texture - Texture to generate mipmaps for.\n   * @returns {module:External.GPUTexture} - The originally passed texture\n   */\n  generateMipmap(texture) {\n    const pipeline = this._getMipmapPipeline(texture.format);\n    if (texture.dimension === \"3d\" || texture.dimension === \"1d\") {\n      throw new Error(\"Generating mipmaps for non-2d textures is currently unsupported!\");\n    }\n    let mipTexture = texture;\n    const arrayLayerCount = texture.depthOrArrayLayers || 1;\n    const renderToSource = texture.usage & GPUTextureUsage.RENDER_ATTACHMENT;\n    if (!renderToSource) {\n      const mipTextureDescriptor = {\n        size: {\n          width: Math.ceil(texture.width / 2),\n          height: Math.ceil(texture.height / 2),\n          depthOrArrayLayers: arrayLayerCount\n        },\n        format: texture.format,\n        usage: GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_SRC | GPUTextureUsage.RENDER_ATTACHMENT,\n        mipLevelCount: texture.mipLevelCount - 1\n      };\n      mipTexture = this.device.createTexture(mipTextureDescriptor);\n    }\n    const commandEncoder = this.device.createCommandEncoder({});\n    const bindGroupLayout = pipeline.getBindGroupLayout(0);\n    for (let arrayLayer = 0; arrayLayer < arrayLayerCount; ++arrayLayer) {\n      let srcView = texture.createView({\n        baseMipLevel: 0,\n        mipLevelCount: 1,\n        dimension: \"2d\",\n        baseArrayLayer: arrayLayer,\n        arrayLayerCount: 1\n      });\n      let dstMipLevel = renderToSource ? 1 : 0;\n      for (let i = 1; i < texture.mipLevelCount; ++i) {\n        const dstView = mipTexture.createView({\n          baseMipLevel: dstMipLevel++,\n          mipLevelCount: 1,\n          dimension: \"2d\",\n          baseArrayLayer: arrayLayer,\n          arrayLayerCount: 1\n        });\n        const passEncoder = commandEncoder.beginRenderPass({\n          colorAttachments: [{\n            view: dstView,\n            storeOp: \"store\",\n            loadOp: \"clear\",\n            clearValue: { r: 0, g: 0, b: 0, a: 0 }\n          }]\n        });\n        const bindGroup = this.device.createBindGroup({\n          layout: bindGroupLayout,\n          entries: [{\n            binding: 0,\n            resource: this.sampler\n          }, {\n            binding: 1,\n            resource: srcView\n          }]\n        });\n        passEncoder.setPipeline(pipeline);\n        passEncoder.setBindGroup(0, bindGroup);\n        passEncoder.draw(3, 1, 0, 0);\n        passEncoder.end();\n        srcView = dstView;\n      }\n    }\n    if (!renderToSource) {\n      const mipLevelSize = {\n        width: Math.ceil(texture.width / 2),\n        height: Math.ceil(texture.height / 2),\n        depthOrArrayLayers: arrayLayerCount\n      };\n      for (let i = 1; i < texture.mipLevelCount; ++i) {\n        commandEncoder.copyTextureToTexture({\n          texture: mipTexture,\n          mipLevel: i - 1\n        }, {\n          texture,\n          mipLevel: i\n        }, mipLevelSize);\n        mipLevelSize.width = Math.ceil(mipLevelSize.width / 2);\n        mipLevelSize.height = Math.ceil(mipLevelSize.height / 2);\n      }\n    }\n    this.device.queue.submit([commandEncoder.finish()]);\n    if (!renderToSource) {\n      mipTexture.destroy();\n    }\n    return texture;\n  }\n}\n\nexport { GpuMipmapGenerator };\n//# sourceMappingURL=GpuMipmapGenerator.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { UniformGroup } from '../../shared/shader/UniformGroup.mjs';\nimport { CanvasPool } from '../../shared/texture/CanvasPool.mjs';\nimport { BindGroup } from '../shader/BindGroup.mjs';\nimport { gpuUploadBufferImageResource } from './uploaders/gpuUploadBufferImageResource.mjs';\nimport { gpuUploadCompressedTextureResource, blockDataMap } from './uploaders/gpuUploadCompressedTextureResource.mjs';\nimport { gpuUploadImageResource } from './uploaders/gpuUploadImageSource.mjs';\nimport { gpuUploadVideoResource } from './uploaders/gpuUploadVideoSource.mjs';\nimport { GpuMipmapGenerator } from './utils/GpuMipmapGenerator.mjs';\n\n\"use strict\";\nclass GpuTextureSystem {\n  constructor(renderer) {\n    this.managedTextures = [];\n    this._gpuSources = /* @__PURE__ */ Object.create(null);\n    this._gpuSamplers = /* @__PURE__ */ Object.create(null);\n    this._bindGroupHash = /* @__PURE__ */ Object.create(null);\n    this._textureViewHash = /* @__PURE__ */ Object.create(null);\n    this._uploads = {\n      image: gpuUploadImageResource,\n      buffer: gpuUploadBufferImageResource,\n      video: gpuUploadVideoResource,\n      compressed: gpuUploadCompressedTextureResource\n    };\n    this._renderer = renderer;\n    renderer.renderableGC.addManagedHash(this, \"_gpuSources\");\n    renderer.renderableGC.addManagedHash(this, \"_gpuSamplers\");\n    renderer.renderableGC.addManagedHash(this, \"_bindGroupHash\");\n    renderer.renderableGC.addManagedHash(this, \"_textureViewHash\");\n  }\n  contextChange(gpu) {\n    this._gpu = gpu;\n  }\n  /**\n   * Initializes a texture source, if it has already been initialized nothing will happen.\n   * @param source - The texture source to initialize.\n   * @returns The initialized texture source.\n   */\n  initSource(source) {\n    if (this._gpuSources[source.uid]) {\n      return this._gpuSources[source.uid];\n    }\n    return this._initSource(source);\n  }\n  _initSource(source) {\n    if (source.autoGenerateMipmaps) {\n      const biggestDimension = Math.max(source.pixelWidth, source.pixelHeight);\n      source.mipLevelCount = Math.floor(Math.log2(biggestDimension)) + 1;\n    }\n    let usage = GPUTextureUsage.TEXTURE_BINDING | GPUTextureUsage.COPY_DST;\n    if (source.uploadMethodId !== \"compressed\") {\n      usage |= GPUTextureUsage.RENDER_ATTACHMENT;\n      usage |= GPUTextureUsage.COPY_SRC;\n    }\n    const blockData = blockDataMap[source.format] || { blockBytes: 4, blockWidth: 1, blockHeight: 1 };\n    const width = Math.ceil(source.pixelWidth / blockData.blockWidth) * blockData.blockWidth;\n    const height = Math.ceil(source.pixelHeight / blockData.blockHeight) * blockData.blockHeight;\n    const textureDescriptor = {\n      label: source.label,\n      size: { width, height },\n      format: source.format,\n      sampleCount: source.sampleCount,\n      mipLevelCount: source.mipLevelCount,\n      dimension: source.dimension,\n      usage\n    };\n    const gpuTexture = this._gpuSources[source.uid] = this._gpu.device.createTexture(textureDescriptor);\n    if (!this.managedTextures.includes(source)) {\n      source.on(\"update\", this.onSourceUpdate, this);\n      source.on(\"resize\", this.onSourceResize, this);\n      source.on(\"destroy\", this.onSourceDestroy, this);\n      source.on(\"unload\", this.onSourceUnload, this);\n      source.on(\"updateMipmaps\", this.onUpdateMipmaps, this);\n      this.managedTextures.push(source);\n    }\n    this.onSourceUpdate(source);\n    return gpuTexture;\n  }\n  onSourceUpdate(source) {\n    const gpuTexture = this.getGpuSource(source);\n    if (!gpuTexture)\n      return;\n    if (this._uploads[source.uploadMethodId]) {\n      this._uploads[source.uploadMethodId].upload(source, gpuTexture, this._gpu);\n    }\n    if (source.autoGenerateMipmaps && source.mipLevelCount > 1) {\n      this.onUpdateMipmaps(source);\n    }\n  }\n  onSourceUnload(source) {\n    const gpuTexture = this._gpuSources[source.uid];\n    if (gpuTexture) {\n      this._gpuSources[source.uid] = null;\n      gpuTexture.destroy();\n    }\n  }\n  onUpdateMipmaps(source) {\n    if (!this._mipmapGenerator) {\n      this._mipmapGenerator = new GpuMipmapGenerator(this._gpu.device);\n    }\n    const gpuTexture = this.getGpuSource(source);\n    this._mipmapGenerator.generateMipmap(gpuTexture);\n  }\n  onSourceDestroy(source) {\n    source.off(\"update\", this.onSourceUpdate, this);\n    source.off(\"unload\", this.onSourceUnload, this);\n    source.off(\"destroy\", this.onSourceDestroy, this);\n    source.off(\"resize\", this.onSourceResize, this);\n    source.off(\"updateMipmaps\", this.onUpdateMipmaps, this);\n    this.managedTextures.splice(this.managedTextures.indexOf(source), 1);\n    this.onSourceUnload(source);\n  }\n  onSourceResize(source) {\n    const gpuTexture = this._gpuSources[source.uid];\n    if (!gpuTexture) {\n      this.initSource(source);\n    } else if (gpuTexture.width !== source.pixelWidth || gpuTexture.height !== source.pixelHeight) {\n      this._textureViewHash[source.uid] = null;\n      this._bindGroupHash[source.uid] = null;\n      this.onSourceUnload(source);\n      this.initSource(source);\n    }\n  }\n  _initSampler(sampler) {\n    this._gpuSamplers[sampler._resourceId] = this._gpu.device.createSampler(sampler);\n    return this._gpuSamplers[sampler._resourceId];\n  }\n  getGpuSampler(sampler) {\n    return this._gpuSamplers[sampler._resourceId] || this._initSampler(sampler);\n  }\n  getGpuSource(source) {\n    return this._gpuSources[source.uid] || this.initSource(source);\n  }\n  /**\n   * this returns s bind group for a specific texture, the bind group contains\n   * - the texture source\n   * - the texture style\n   * - the texture matrix\n   * This is cached so the bind group should only be created once per texture\n   * @param texture - the texture you want the bindgroup for\n   * @returns the bind group for the texture\n   */\n  getTextureBindGroup(texture) {\n    return this._bindGroupHash[texture.uid] ?? this._createTextureBindGroup(texture);\n  }\n  _createTextureBindGroup(texture) {\n    const source = texture.source;\n    this._bindGroupHash[texture.uid] = new BindGroup({\n      0: source,\n      1: source.style,\n      2: new UniformGroup({\n        uTextureMatrix: { type: \"mat3x3<f32>\", value: texture.textureMatrix.mapCoord }\n      })\n    });\n    return this._bindGroupHash[texture.uid];\n  }\n  getTextureView(texture) {\n    const source = texture.source;\n    return this._textureViewHash[source.uid] ?? this._createTextureView(source);\n  }\n  _createTextureView(texture) {\n    this._textureViewHash[texture.uid] = this.getGpuSource(texture).createView();\n    return this._textureViewHash[texture.uid];\n  }\n  generateCanvas(texture) {\n    const renderer = this._renderer;\n    const commandEncoder = renderer.gpu.device.createCommandEncoder();\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = texture.source.pixelWidth;\n    canvas.height = texture.source.pixelHeight;\n    const context = canvas.getContext(\"webgpu\");\n    context.configure({\n      device: renderer.gpu.device,\n      usage: GPUTextureUsage.COPY_DST | GPUTextureUsage.COPY_SRC,\n      format: DOMAdapter.get().getNavigator().gpu.getPreferredCanvasFormat(),\n      alphaMode: \"premultiplied\"\n    });\n    commandEncoder.copyTextureToTexture({\n      texture: renderer.texture.getGpuSource(texture.source),\n      origin: {\n        x: 0,\n        y: 0\n      }\n    }, {\n      texture: context.getCurrentTexture()\n    }, {\n      width: canvas.width,\n      height: canvas.height\n    });\n    renderer.gpu.device.queue.submit([commandEncoder.finish()]);\n    return canvas;\n  }\n  getPixels(texture) {\n    const webGPUCanvas = this.generateCanvas(texture);\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(webGPUCanvas.width, webGPUCanvas.height);\n    const context = canvasAndContext.context;\n    context.drawImage(webGPUCanvas, 0, 0);\n    const { width, height } = webGPUCanvas;\n    const imageData = context.getImageData(0, 0, width, height);\n    const pixels = new Uint8ClampedArray(imageData.data.buffer);\n    CanvasPool.returnCanvasAndContext(canvasAndContext);\n    return { pixels, width, height };\n  }\n  destroy() {\n    this.managedTextures.slice().forEach((source) => this.onSourceDestroy(source));\n    this.managedTextures = null;\n    for (const k of Object.keys(this._bindGroupHash)) {\n      const key = Number(k);\n      const bindGroup = this._bindGroupHash[key];\n      bindGroup?.destroy();\n      this._bindGroupHash[key] = null;\n    }\n    this._renderer = null;\n    this._gpu = null;\n    this._mipmapGenerator = null;\n    this._gpuSources = null;\n    this._bindGroupHash = null;\n    this._textureViewHash = null;\n    this._gpuSamplers = null;\n  }\n}\n/** @ignore */\nGpuTextureSystem.extension = {\n  type: [\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"texture\"\n};\n\nexport { GpuTextureSystem };\n//# sourceMappingURL=GpuTextureSystem.mjs.map\n","import { extensions, ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GpuGraphicsAdaptor } from '../../../scene/graphics/gpu/GpuGraphicsAdaptor.mjs';\nimport { GpuMeshAdapter } from '../../../scene/mesh/gpu/GpuMeshAdapter.mjs';\nimport { GpuBatchAdaptor } from '../../batcher/gpu/GpuBatchAdaptor.mjs';\nimport { AbstractRenderer } from '../shared/system/AbstractRenderer.mjs';\nimport { SharedSystems, SharedRenderPipes } from '../shared/system/SharedSystems.mjs';\nimport { RendererType } from '../types.mjs';\nimport { BindGroupSystem } from './BindGroupSystem.mjs';\nimport { GpuBufferSystem } from './buffer/GpuBufferSystem.mjs';\nimport { GpuColorMaskSystem } from './GpuColorMaskSystem.mjs';\nimport { GpuDeviceSystem } from './GpuDeviceSystem.mjs';\nimport { GpuEncoderSystem } from './GpuEncoderSystem.mjs';\nimport { GpuLimitsSystem } from './GpuLimitsSystem.mjs';\nimport { GpuStencilSystem } from './GpuStencilSystem.mjs';\nimport { GpuUboSystem } from './GpuUboSystem.mjs';\nimport { GpuUniformBatchPipe } from './GpuUniformBatchPipe.mjs';\nimport { PipelineSystem } from './pipeline/PipelineSystem.mjs';\nimport { GpuRenderTargetSystem } from './renderTarget/GpuRenderTargetSystem.mjs';\nimport { GpuShaderSystem } from './shader/GpuShaderSystem.mjs';\nimport { GpuStateSystem } from './state/GpuStateSystem.mjs';\nimport { GpuTextureSystem } from './texture/GpuTextureSystem.mjs';\n\n\"use strict\";\nconst DefaultWebGPUSystems = [\n  ...SharedSystems,\n  GpuUboSystem,\n  GpuEncoderSystem,\n  GpuDeviceSystem,\n  GpuLimitsSystem,\n  GpuBufferSystem,\n  GpuTextureSystem,\n  GpuRenderTargetSystem,\n  GpuShaderSystem,\n  GpuStateSystem,\n  PipelineSystem,\n  GpuColorMaskSystem,\n  GpuStencilSystem,\n  BindGroupSystem\n];\nconst DefaultWebGPUPipes = [...SharedRenderPipes, GpuUniformBatchPipe];\nconst DefaultWebGPUAdapters = [GpuBatchAdaptor, GpuMeshAdapter, GpuGraphicsAdaptor];\nconst systems = [];\nconst renderPipes = [];\nconst renderPipeAdaptors = [];\nextensions.handleByNamedList(ExtensionType.WebGPUSystem, systems);\nextensions.handleByNamedList(ExtensionType.WebGPUPipes, renderPipes);\nextensions.handleByNamedList(ExtensionType.WebGPUPipesAdaptor, renderPipeAdaptors);\nextensions.add(...DefaultWebGPUSystems, ...DefaultWebGPUPipes, ...DefaultWebGPUAdapters);\nclass WebGPURenderer extends AbstractRenderer {\n  constructor() {\n    const systemConfig = {\n      name: \"webgpu\",\n      type: RendererType.WEBGPU,\n      systems,\n      renderPipes,\n      renderPipeAdaptors\n    };\n    super(systemConfig);\n  }\n}\n\nexport { WebGPURenderer };\n//# sourceMappingURL=WebGPURenderer.mjs.map\n","import { Matrix } from '../../maths/matrix/Matrix.mjs';\nimport { InstructionSet } from '../../rendering/renderers/shared/instructions/InstructionSet.mjs';\nimport { TexturePool } from '../../rendering/renderers/shared/texture/TexturePool.mjs';\n\n\"use strict\";\nclass RenderGroup {\n  constructor() {\n    this.renderPipeId = \"renderGroup\";\n    this.root = null;\n    this.canBundle = false;\n    this.renderGroupParent = null;\n    this.renderGroupChildren = [];\n    this.worldTransform = new Matrix();\n    this.worldColorAlpha = 4294967295;\n    this.worldColor = 16777215;\n    this.worldAlpha = 1;\n    // these updates are transform changes..\n    this.childrenToUpdate = /* @__PURE__ */ Object.create(null);\n    this.updateTick = 0;\n    this.gcTick = 0;\n    // these update are renderable changes..\n    this.childrenRenderablesToUpdate = { list: [], index: 0 };\n    // other\n    this.structureDidChange = true;\n    this.instructionSet = new InstructionSet();\n    this._onRenderContainers = [];\n    /**\n     * Indicates if the cached texture needs to be updated.\n     * @default true\n     */\n    this.textureNeedsUpdate = true;\n    /**\n     * Indicates if the container should be cached as a texture.\n     * @default false\n     */\n    this.isCachedAsTexture = false;\n    this._matrixDirty = 7;\n  }\n  init(root) {\n    this.root = root;\n    if (root._onRender)\n      this.addOnRender(root);\n    root.didChange = true;\n    const children = root.children;\n    for (let i = 0; i < children.length; i++) {\n      const child = children[i];\n      child._updateFlags = 15;\n      this.addChild(child);\n    }\n  }\n  enableCacheAsTexture(options = {}) {\n    this.textureOptions = options;\n    this.isCachedAsTexture = true;\n    this.textureNeedsUpdate = true;\n  }\n  disableCacheAsTexture() {\n    this.isCachedAsTexture = false;\n    if (this.texture) {\n      TexturePool.returnTexture(this.texture, true);\n      this.texture = null;\n    }\n  }\n  updateCacheTexture() {\n    this.textureNeedsUpdate = true;\n    const cachedParent = this._parentCacheAsTextureRenderGroup;\n    if (cachedParent && !cachedParent.textureNeedsUpdate) {\n      cachedParent.updateCacheTexture();\n    }\n  }\n  reset() {\n    this.renderGroupChildren.length = 0;\n    for (const i in this.childrenToUpdate) {\n      const childrenAtDepth = this.childrenToUpdate[i];\n      childrenAtDepth.list.fill(null);\n      childrenAtDepth.index = 0;\n    }\n    this.childrenRenderablesToUpdate.index = 0;\n    this.childrenRenderablesToUpdate.list.fill(null);\n    this.root = null;\n    this.updateTick = 0;\n    this.structureDidChange = true;\n    this._onRenderContainers.length = 0;\n    this.renderGroupParent = null;\n    this.disableCacheAsTexture();\n  }\n  get localTransform() {\n    return this.root.localTransform;\n  }\n  addRenderGroupChild(renderGroupChild) {\n    if (renderGroupChild.renderGroupParent) {\n      renderGroupChild.renderGroupParent._removeRenderGroupChild(renderGroupChild);\n    }\n    renderGroupChild.renderGroupParent = this;\n    this.renderGroupChildren.push(renderGroupChild);\n  }\n  _removeRenderGroupChild(renderGroupChild) {\n    const index = this.renderGroupChildren.indexOf(renderGroupChild);\n    if (index > -1) {\n      this.renderGroupChildren.splice(index, 1);\n    }\n    renderGroupChild.renderGroupParent = null;\n  }\n  addChild(child) {\n    this.structureDidChange = true;\n    child.parentRenderGroup = this;\n    child.updateTick = -1;\n    if (child.parent === this.root) {\n      child.relativeRenderGroupDepth = 1;\n    } else {\n      child.relativeRenderGroupDepth = child.parent.relativeRenderGroupDepth + 1;\n    }\n    child.didChange = true;\n    this.onChildUpdate(child);\n    if (child.renderGroup) {\n      this.addRenderGroupChild(child.renderGroup);\n      return;\n    }\n    if (child._onRender)\n      this.addOnRender(child);\n    const children = child.children;\n    for (let i = 0; i < children.length; i++) {\n      this.addChild(children[i]);\n    }\n  }\n  removeChild(child) {\n    this.structureDidChange = true;\n    if (child._onRender) {\n      if (!child.renderGroup) {\n        this.removeOnRender(child);\n      }\n    }\n    child.parentRenderGroup = null;\n    if (child.renderGroup) {\n      this._removeRenderGroupChild(child.renderGroup);\n      return;\n    }\n    const children = child.children;\n    for (let i = 0; i < children.length; i++) {\n      this.removeChild(children[i]);\n    }\n  }\n  removeChildren(children) {\n    for (let i = 0; i < children.length; i++) {\n      this.removeChild(children[i]);\n    }\n  }\n  onChildUpdate(child) {\n    let childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth];\n    if (!childrenToUpdate) {\n      childrenToUpdate = this.childrenToUpdate[child.relativeRenderGroupDepth] = {\n        index: 0,\n        list: []\n      };\n    }\n    childrenToUpdate.list[childrenToUpdate.index++] = child;\n  }\n  updateRenderable(renderable) {\n    if (renderable.globalDisplayStatus < 7)\n      return;\n    this.instructionSet.renderPipes[renderable.renderPipeId].updateRenderable(renderable);\n    renderable.didViewUpdate = false;\n  }\n  onChildViewUpdate(child) {\n    this.childrenRenderablesToUpdate.list[this.childrenRenderablesToUpdate.index++] = child;\n  }\n  get isRenderable() {\n    return this.root.localDisplayStatus === 7 && this.worldAlpha > 0;\n  }\n  /**\n   * adding a container to the onRender list will make sure the user function\n   * passed in to the user defined 'onRender` callBack\n   * @param container - the container to add to the onRender list\n   */\n  addOnRender(container) {\n    this._onRenderContainers.push(container);\n  }\n  removeOnRender(container) {\n    this._onRenderContainers.splice(this._onRenderContainers.indexOf(container), 1);\n  }\n  runOnRender(renderer) {\n    for (let i = 0; i < this._onRenderContainers.length; i++) {\n      this._onRenderContainers[i]._onRender(renderer);\n    }\n  }\n  destroy() {\n    this.disableCacheAsTexture();\n    this.renderGroupParent = null;\n    this.root = null;\n    this.childrenRenderablesToUpdate = null;\n    this.childrenToUpdate = null;\n    this.renderGroupChildren = null;\n    this._onRenderContainers = null;\n    this.instructionSet = null;\n  }\n  getChildren(out = []) {\n    const children = this.root.children;\n    for (let i = 0; i < children.length; i++) {\n      this._getChildren(children[i], out);\n    }\n    return out;\n  }\n  _getChildren(container, out = []) {\n    out.push(container);\n    if (container.renderGroup)\n      return out;\n    const children = container.children;\n    for (let i = 0; i < children.length; i++) {\n      this._getChildren(children[i], out);\n    }\n    return out;\n  }\n  invalidateMatrices() {\n    this._matrixDirty = 7;\n  }\n  /**\n   * Returns the inverse of the world transform matrix.\n   * @returns {Matrix} The inverse of the world transform matrix.\n   */\n  get inverseWorldTransform() {\n    if ((this._matrixDirty & 1) === 0)\n      return this._inverseWorldTransform;\n    this._matrixDirty &= ~1;\n    this._inverseWorldTransform || (this._inverseWorldTransform = new Matrix());\n    return this._inverseWorldTransform.copyFrom(this.worldTransform).invert();\n  }\n  /**\n   * Returns the inverse of the texture offset transform matrix.\n   * @returns {Matrix} The inverse of the texture offset transform matrix.\n   */\n  get textureOffsetInverseTransform() {\n    if ((this._matrixDirty & 2) === 0)\n      return this._textureOffsetInverseTransform;\n    this._matrixDirty &= ~2;\n    this._textureOffsetInverseTransform || (this._textureOffsetInverseTransform = new Matrix());\n    return this._textureOffsetInverseTransform.copyFrom(this.inverseWorldTransform).translate(\n      -this._textureBounds.x,\n      -this._textureBounds.y\n    );\n  }\n  /**\n   * Returns the inverse of the parent texture transform matrix.\n   * This is used to properly transform coordinates when rendering into cached textures.\n   * @returns {Matrix} The inverse of the parent texture transform matrix.\n   */\n  get inverseParentTextureTransform() {\n    if ((this._matrixDirty & 4) === 0)\n      return this._inverseParentTextureTransform;\n    this._matrixDirty &= ~4;\n    const parentCacheAsTexture = this._parentCacheAsTextureRenderGroup;\n    if (parentCacheAsTexture) {\n      this._inverseParentTextureTransform || (this._inverseParentTextureTransform = new Matrix());\n      return this._inverseParentTextureTransform.copyFrom(this.worldTransform).prepend(parentCacheAsTexture.inverseWorldTransform).translate(\n        -parentCacheAsTexture._textureBounds.x,\n        -parentCacheAsTexture._textureBounds.y\n      );\n    }\n    return this.worldTransform;\n  }\n  /**\n   * Returns a matrix that transforms coordinates to the correct coordinate space of the texture being rendered to.\n   * This is the texture offset inverse transform of the closest parent RenderGroup that is cached as a texture.\n   * @returns {Matrix | null} The transform matrix for the cached texture coordinate space,\n   * or null if no parent is cached as texture.\n   */\n  get cacheToLocalTransform() {\n    if (this.isCachedAsTexture) {\n      return this.textureOffsetInverseTransform;\n    }\n    if (!this._parentCacheAsTextureRenderGroup)\n      return null;\n    return this._parentCacheAsTextureRenderGroup.textureOffsetInverseTransform;\n  }\n}\n\nexport { RenderGroup };\n//# sourceMappingURL=RenderGroup.mjs.map\n","\"use strict\";\nconst textureBit = {\n  name: \"texture-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n\n        struct TextureUniforms {\n            uTextureMatrix:mat3x3<f32>,\n        }\n\n        @group(2) @binding(2) var<uniform> textureUniforms : TextureUniforms;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            uv = (textureUniforms.uTextureMatrix * vec3(uv, 1.0)).xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            @group(2) @binding(0) var uTexture: texture_2d<f32>;\n            @group(2) @binding(1) var uSampler: sampler;\n\n\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            outColor = textureSample(uTexture, uSampler, vUV);\n        `\n    )\n  }\n};\nconst textureBitGl = {\n  name: \"texture-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            uniform mat3 uTextureMatrix;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            uv = (uTextureMatrix * vec3(uv, 1.0)).xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* glsl */\n      `\n        uniform sampler2D uTexture;\n\n\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            outColor = texture(uTexture, vUV);\n        `\n    )\n  }\n};\n\nexport { textureBit, textureBitGl };\n//# sourceMappingURL=textureBit.mjs.map\n","\"use strict\";\nclass BindGroup {\n  /**\n   * Create a new instance eof the Bind Group.\n   * @param resources - The resources that are bound together for use by a shader.\n   */\n  constructor(resources) {\n    /** The resources that are bound together for use by a shader. */\n    this.resources = /* @__PURE__ */ Object.create(null);\n    this._dirty = true;\n    let index = 0;\n    for (const i in resources) {\n      const resource = resources[i];\n      this.setResource(resource, index++);\n    }\n    this._updateKey();\n  }\n  /**\n   * Updates the key if its flagged as dirty. This is used internally to\n   * match this bind group to a WebGPU BindGroup.\n   * @internal\n   */\n  _updateKey() {\n    if (!this._dirty)\n      return;\n    this._dirty = false;\n    const keyParts = [];\n    let index = 0;\n    for (const i in this.resources) {\n      keyParts[index++] = this.resources[i]._resourceId;\n    }\n    this._key = keyParts.join(\"|\");\n  }\n  /**\n   * Set a resource at a given index. this function will\n   * ensure that listeners will be removed from the current resource\n   * and added to the new resource.\n   * @param resource - The resource to set.\n   * @param index - The index to set the resource at.\n   */\n  setResource(resource, index) {\n    const currentResource = this.resources[index];\n    if (resource === currentResource)\n      return;\n    if (currentResource) {\n      resource.off?.(\"change\", this.onResourceChange, this);\n    }\n    resource.on?.(\"change\", this.onResourceChange, this);\n    this.resources[index] = resource;\n    this._dirty = true;\n  }\n  /**\n   * Returns the resource at the current specified index.\n   * @param index - The index of the resource to get.\n   * @returns - The resource at the specified index.\n   */\n  getResource(index) {\n    return this.resources[index];\n  }\n  /**\n   * Used internally to 'touch' each resource, to ensure that the GC\n   * knows that all resources in this bind group are still being used.\n   * @param tick - The current tick.\n   * @internal\n   */\n  _touch(tick) {\n    const resources = this.resources;\n    for (const i in resources) {\n      resources[i]._touched = tick;\n    }\n  }\n  /** Destroys this bind group and removes all listeners. */\n  destroy() {\n    const resources = this.resources;\n    for (const i in resources) {\n      const resource = resources[i];\n      resource?.off?.(\"change\", this.onResourceChange, this);\n    }\n    this.resources = null;\n  }\n  onResourceChange(resource) {\n    this._dirty = true;\n    if (resource.destroyed) {\n      const resources = this.resources;\n      for (const i in resources) {\n        if (resources[i] === resource) {\n          resources[i] = null;\n        }\n      }\n    } else {\n      this._updateKey();\n    }\n  }\n}\n\nexport { BindGroup };\n//# sourceMappingURL=BindGroup.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { FillGradient } from '../../../graphics/shared/fill/FillGradient.mjs';\nimport { FillPattern } from '../../../graphics/shared/fill/FillPattern.mjs';\n\n\"use strict\";\nconst PRECISION = 1e5;\nfunction getCanvasFillStyle(fillStyle, context, textMetrics, padding = 0) {\n  if (fillStyle.texture === Texture.WHITE && !fillStyle.fill) {\n    return Color.shared.setValue(fillStyle.color).setAlpha(fillStyle.alpha ?? 1).toHexa();\n  } else if (!fillStyle.fill) {\n    const pattern = context.createPattern(fillStyle.texture.source.resource, \"repeat\");\n    const tempMatrix = fillStyle.matrix.copyTo(Matrix.shared);\n    tempMatrix.scale(fillStyle.texture.frame.width, fillStyle.texture.frame.height);\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillPattern) {\n    const fillPattern = fillStyle.fill;\n    const pattern = context.createPattern(fillPattern.texture.source.resource, \"repeat\");\n    const tempMatrix = fillPattern.transform.copyTo(Matrix.shared);\n    tempMatrix.scale(\n      fillPattern.texture.frame.width,\n      fillPattern.texture.frame.height\n    );\n    pattern.setTransform(tempMatrix);\n    return pattern;\n  } else if (fillStyle.fill instanceof FillGradient) {\n    const fillGradient = fillStyle.fill;\n    const isLinear = fillGradient.type === \"linear\";\n    const isLocal = fillGradient.textureSpace === \"local\";\n    let width = 1;\n    let height = 1;\n    if (isLocal && textMetrics) {\n      width = textMetrics.width + padding;\n      height = textMetrics.height + padding;\n    }\n    let gradient;\n    let isNearlyVertical = false;\n    if (isLinear) {\n      const { start, end } = fillGradient;\n      gradient = context.createLinearGradient(\n        start.x * width,\n        start.y * height,\n        end.x * width,\n        end.y * height\n      );\n      isNearlyVertical = Math.abs(end.x - start.x) < Math.abs((end.y - start.y) * 0.1);\n    } else {\n      const { center, innerRadius, outerCenter, outerRadius } = fillGradient;\n      gradient = context.createRadialGradient(\n        center.x * width,\n        center.y * height,\n        innerRadius * width,\n        outerCenter.x * width,\n        outerCenter.y * height,\n        outerRadius * width\n      );\n    }\n    if (isNearlyVertical && isLocal && textMetrics) {\n      const ratio = textMetrics.lineHeight / height;\n      for (let i = 0; i < textMetrics.lines.length; i++) {\n        const start = (i * textMetrics.lineHeight + padding / 2) / height;\n        fillGradient.colorStops.forEach((stop) => {\n          const globalStop = start + stop.offset * ratio;\n          gradient.addColorStop(\n            // fix to 5 decimal places to avoid floating point precision issues\n            Math.floor(globalStop * PRECISION) / PRECISION,\n            Color.shared.setValue(stop.color).toHex()\n          );\n        });\n      }\n    } else {\n      fillGradient.colorStops.forEach((stop) => {\n        gradient.addColorStop(stop.offset, Color.shared.setValue(stop.color).toHex());\n      });\n    }\n    return gradient;\n  }\n  warn(\"FillStyle not recognised\", fillStyle);\n  return \"red\";\n}\n\nexport { getCanvasFillStyle };\n//# sourceMappingURL=getCanvasFillStyle.mjs.map\n","import { getTestContext } from '../../../renderers/gl/shader/program/getTestContext.mjs';\nimport { checkMaxIfStatementsInShader } from './checkMaxIfStatementsInShader.mjs';\n\n\"use strict\";\nlet maxTexturesPerBatchCache = null;\nfunction getMaxTexturesPerBatch() {\n  if (maxTexturesPerBatchCache)\n    return maxTexturesPerBatchCache;\n  const gl = getTestContext();\n  maxTexturesPerBatchCache = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n  maxTexturesPerBatchCache = checkMaxIfStatementsInShader(\n    maxTexturesPerBatchCache,\n    gl\n  );\n  gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n  return maxTexturesPerBatchCache;\n}\n\nexport { getMaxTexturesPerBatch };\n//# sourceMappingURL=maxRecommendedTextures.mjs.map\n","\"use strict\";\nclass BatchTextureArray {\n  constructor() {\n    /** Respective locations for textures. */\n    this.ids = /* @__PURE__ */ Object.create(null);\n    this.textures = [];\n    this.count = 0;\n  }\n  /** Clear the textures and their locations. */\n  clear() {\n    for (let i = 0; i < this.count; i++) {\n      const t = this.textures[i];\n      this.textures[i] = null;\n      this.ids[t.uid] = null;\n    }\n    this.count = 0;\n  }\n}\n\nexport { BatchTextureArray };\n//# sourceMappingURL=BatchTextureArray.mjs.map\n","import { uid } from '../../../utils/data/uid.mjs';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer.mjs';\nimport { deprecation } from '../../../utils/logging/deprecation.mjs';\nimport { GlobalResourceRegistry } from '../../../utils/pool/GlobalResourceRegistry.mjs';\nimport { fastCopy } from '../../renderers/shared/buffer/utils/fastCopy.mjs';\nimport { getAdjustedBlendModeBlend } from '../../renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { getMaxTexturesPerBatch } from '../gl/utils/maxRecommendedTextures.mjs';\nimport { BatchTextureArray } from './BatchTextureArray.mjs';\n\n\"use strict\";\nclass Batch {\n  constructor() {\n    this.renderPipeId = \"batch\";\n    this.action = \"startBatch\";\n    // TODO - eventually this could be useful for flagging batches as dirty and then only rebuilding those ones\n    // public elementStart = 0;\n    // public elementSize = 0;\n    // for drawing..\n    this.start = 0;\n    this.size = 0;\n    this.textures = new BatchTextureArray();\n    this.blendMode = \"normal\";\n    this.topology = \"triangle-strip\";\n    this.canBundle = true;\n  }\n  destroy() {\n    this.textures = null;\n    this.gpuBindGroup = null;\n    this.bindGroup = null;\n    this.batcher = null;\n  }\n}\nconst batchPool = [];\nlet batchPoolIndex = 0;\nGlobalResourceRegistry.register({\n  clear: () => {\n    if (batchPool.length > 0) {\n      for (const item of batchPool) {\n        if (item)\n          item.destroy();\n      }\n    }\n    batchPool.length = 0;\n    batchPoolIndex = 0;\n  }\n});\nfunction getBatchFromPool() {\n  return batchPoolIndex > 0 ? batchPool[--batchPoolIndex] : new Batch();\n}\nfunction returnBatchToPool(batch) {\n  batchPool[batchPoolIndex++] = batch;\n}\nlet BATCH_TICK = 0;\nconst _Batcher = class _Batcher {\n  constructor(options) {\n    /** unique id for this batcher */\n    this.uid = uid(\"batcher\");\n    /** Indicates whether the batch data has been modified and needs updating. */\n    this.dirty = true;\n    /** The current index of the batch being processed. */\n    this.batchIndex = 0;\n    /** An array of all batches created during the current rendering process. */\n    this.batches = [];\n    this._elements = [];\n    options = { ..._Batcher.defaultOptions, ...options };\n    if (!options.maxTextures) {\n      deprecation(\"v8.8.0\", \"maxTextures is a required option for Batcher now, please pass it in the options\");\n      options.maxTextures = getMaxTexturesPerBatch();\n    }\n    const { maxTextures, attributesInitialSize, indicesInitialSize } = options;\n    this.attributeBuffer = new ViewableBuffer(attributesInitialSize * 4);\n    this.indexBuffer = new Uint16Array(indicesInitialSize);\n    this.maxTextures = maxTextures;\n  }\n  begin() {\n    this.elementSize = 0;\n    this.elementStart = 0;\n    this.indexSize = 0;\n    this.attributeSize = 0;\n    for (let i = 0; i < this.batchIndex; i++) {\n      returnBatchToPool(this.batches[i]);\n    }\n    this.batchIndex = 0;\n    this._batchIndexStart = 0;\n    this._batchIndexSize = 0;\n    this.dirty = true;\n  }\n  add(batchableObject) {\n    this._elements[this.elementSize++] = batchableObject;\n    batchableObject._indexStart = this.indexSize;\n    batchableObject._attributeStart = this.attributeSize;\n    batchableObject._batcher = this;\n    this.indexSize += batchableObject.indexSize;\n    this.attributeSize += batchableObject.attributeSize * this.vertexSize;\n  }\n  checkAndUpdateTexture(batchableObject, texture) {\n    const textureId = batchableObject._batch.textures.ids[texture._source.uid];\n    if (!textureId && textureId !== 0)\n      return false;\n    batchableObject._textureId = textureId;\n    batchableObject.texture = texture;\n    return true;\n  }\n  updateElement(batchableObject) {\n    this.dirty = true;\n    const attributeBuffer = this.attributeBuffer;\n    if (batchableObject.packAsQuad) {\n      this.packQuadAttributes(\n        batchableObject,\n        attributeBuffer.float32View,\n        attributeBuffer.uint32View,\n        batchableObject._attributeStart,\n        batchableObject._textureId\n      );\n    } else {\n      this.packAttributes(\n        batchableObject,\n        attributeBuffer.float32View,\n        attributeBuffer.uint32View,\n        batchableObject._attributeStart,\n        batchableObject._textureId\n      );\n    }\n  }\n  /**\n   * breaks the batcher. This happens when a batch gets too big,\n   * or we need to switch to a different type of rendering (a filter for example)\n   * @param instructionSet\n   */\n  break(instructionSet) {\n    const elements = this._elements;\n    if (!elements[this.elementStart])\n      return;\n    let batch = getBatchFromPool();\n    let textureBatch = batch.textures;\n    textureBatch.clear();\n    const firstElement = elements[this.elementStart];\n    let blendMode = getAdjustedBlendModeBlend(firstElement.blendMode, firstElement.texture._source);\n    let topology = firstElement.topology;\n    if (this.attributeSize * 4 > this.attributeBuffer.size) {\n      this._resizeAttributeBuffer(this.attributeSize * 4);\n    }\n    if (this.indexSize > this.indexBuffer.length) {\n      this._resizeIndexBuffer(this.indexSize);\n    }\n    const f32 = this.attributeBuffer.float32View;\n    const u32 = this.attributeBuffer.uint32View;\n    const indexBuffer = this.indexBuffer;\n    let size = this._batchIndexSize;\n    let start = this._batchIndexStart;\n    let action = \"startBatch\";\n    const maxTextures = this.maxTextures;\n    for (let i = this.elementStart; i < this.elementSize; ++i) {\n      const element = elements[i];\n      elements[i] = null;\n      const texture = element.texture;\n      const source = texture._source;\n      const adjustedBlendMode = getAdjustedBlendModeBlend(element.blendMode, source);\n      const breakRequired = blendMode !== adjustedBlendMode || topology !== element.topology;\n      if (source._batchTick === BATCH_TICK && !breakRequired) {\n        element._textureId = source._textureBindLocation;\n        size += element.indexSize;\n        if (element.packAsQuad) {\n          this.packQuadAttributes(\n            element,\n            f32,\n            u32,\n            element._attributeStart,\n            element._textureId\n          );\n          this.packQuadIndex(\n            indexBuffer,\n            element._indexStart,\n            element._attributeStart / this.vertexSize\n          );\n        } else {\n          this.packAttributes(\n            element,\n            f32,\n            u32,\n            element._attributeStart,\n            element._textureId\n          );\n          this.packIndex(\n            element,\n            indexBuffer,\n            element._indexStart,\n            element._attributeStart / this.vertexSize\n          );\n        }\n        element._batch = batch;\n        continue;\n      }\n      source._batchTick = BATCH_TICK;\n      if (textureBatch.count >= maxTextures || breakRequired) {\n        this._finishBatch(\n          batch,\n          start,\n          size - start,\n          textureBatch,\n          blendMode,\n          topology,\n          instructionSet,\n          action\n        );\n        action = \"renderBatch\";\n        start = size;\n        blendMode = adjustedBlendMode;\n        topology = element.topology;\n        batch = getBatchFromPool();\n        textureBatch = batch.textures;\n        textureBatch.clear();\n        ++BATCH_TICK;\n      }\n      element._textureId = source._textureBindLocation = textureBatch.count;\n      textureBatch.ids[source.uid] = textureBatch.count;\n      textureBatch.textures[textureBatch.count++] = source;\n      element._batch = batch;\n      size += element.indexSize;\n      if (element.packAsQuad) {\n        this.packQuadAttributes(\n          element,\n          f32,\n          u32,\n          element._attributeStart,\n          element._textureId\n        );\n        this.packQuadIndex(\n          indexBuffer,\n          element._indexStart,\n          element._attributeStart / this.vertexSize\n        );\n      } else {\n        this.packAttributes(\n          element,\n          f32,\n          u32,\n          element._attributeStart,\n          element._textureId\n        );\n        this.packIndex(\n          element,\n          indexBuffer,\n          element._indexStart,\n          element._attributeStart / this.vertexSize\n        );\n      }\n    }\n    if (textureBatch.count > 0) {\n      this._finishBatch(\n        batch,\n        start,\n        size - start,\n        textureBatch,\n        blendMode,\n        topology,\n        instructionSet,\n        action\n      );\n      start = size;\n      ++BATCH_TICK;\n    }\n    this.elementStart = this.elementSize;\n    this._batchIndexStart = start;\n    this._batchIndexSize = size;\n  }\n  _finishBatch(batch, indexStart, indexSize, textureBatch, blendMode, topology, instructionSet, action) {\n    batch.gpuBindGroup = null;\n    batch.bindGroup = null;\n    batch.action = action;\n    batch.batcher = this;\n    batch.textures = textureBatch;\n    batch.blendMode = blendMode;\n    batch.topology = topology;\n    batch.start = indexStart;\n    batch.size = indexSize;\n    ++BATCH_TICK;\n    this.batches[this.batchIndex++] = batch;\n    instructionSet.add(batch);\n  }\n  finish(instructionSet) {\n    this.break(instructionSet);\n  }\n  /**\n   * Resizes the attribute buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureAttributeBuffer(size) {\n    if (size * 4 <= this.attributeBuffer.size)\n      return;\n    this._resizeAttributeBuffer(size * 4);\n  }\n  /**\n   * Resizes the index buffer to the given size (1 = 1 float32)\n   * @param size - the size in vertices to ensure (not bytes!)\n   */\n  ensureIndexBuffer(size) {\n    if (size <= this.indexBuffer.length)\n      return;\n    this._resizeIndexBuffer(size);\n  }\n  _resizeAttributeBuffer(size) {\n    const newSize = Math.max(size, this.attributeBuffer.size * 2);\n    const newArrayBuffer = new ViewableBuffer(newSize);\n    fastCopy(this.attributeBuffer.rawBinaryData, newArrayBuffer.rawBinaryData);\n    this.attributeBuffer = newArrayBuffer;\n  }\n  _resizeIndexBuffer(size) {\n    const indexBuffer = this.indexBuffer;\n    let newSize = Math.max(size, indexBuffer.length * 1.5);\n    newSize += newSize % 2;\n    const newIndexBuffer = newSize > 65535 ? new Uint32Array(newSize) : new Uint16Array(newSize);\n    if (newIndexBuffer.BYTES_PER_ELEMENT !== indexBuffer.BYTES_PER_ELEMENT) {\n      for (let i = 0; i < indexBuffer.length; i++) {\n        newIndexBuffer[i] = indexBuffer[i];\n      }\n    } else {\n      fastCopy(indexBuffer.buffer, newIndexBuffer.buffer);\n    }\n    this.indexBuffer = newIndexBuffer;\n  }\n  packQuadIndex(indexBuffer, index, indicesOffset) {\n    indexBuffer[index] = indicesOffset + 0;\n    indexBuffer[index + 1] = indicesOffset + 1;\n    indexBuffer[index + 2] = indicesOffset + 2;\n    indexBuffer[index + 3] = indicesOffset + 0;\n    indexBuffer[index + 4] = indicesOffset + 2;\n    indexBuffer[index + 5] = indicesOffset + 3;\n  }\n  packIndex(element, indexBuffer, index, indicesOffset) {\n    const indices = element.indices;\n    const size = element.indexSize;\n    const indexOffset = element.indexOffset;\n    const attributeOffset = element.attributeOffset;\n    for (let i = 0; i < size; i++) {\n      indexBuffer[index++] = indicesOffset + indices[i + indexOffset] - attributeOffset;\n    }\n  }\n  /**\n   * Destroys the batch and its resources.\n   * @param options - destruction options\n   * @param options.shader - whether to destroy the associated shader\n   */\n  destroy(options = {}) {\n    if (this.batches === null)\n      return;\n    for (let i = 0; i < this.batches.length; i++) {\n      returnBatchToPool(this.batches[i]);\n    }\n    this.batches = null;\n    this.geometry.destroy(true);\n    this.geometry = null;\n    if (options.shader) {\n      this.shader?.destroy();\n      this.shader = null;\n    }\n    for (let i = 0; i < this._elements.length; i++) {\n      if (this._elements[i])\n        this._elements[i]._batch = null;\n    }\n    this._elements = null;\n    this.indexBuffer = null;\n    this.attributeBuffer.destroy();\n    this.attributeBuffer = null;\n  }\n};\n_Batcher.defaultOptions = {\n  maxTextures: null,\n  attributesInitialSize: 4,\n  indicesInitialSize: 6\n};\nlet Batcher = _Batcher;\n\nexport { Batch, Batcher };\n//# sourceMappingURL=Batcher.mjs.map\n","import { Buffer } from '../../renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../renderers/shared/geometry/Geometry.mjs';\n\n\"use strict\";\nconst placeHolderBufferData = new Float32Array(1);\nconst placeHolderIndexData = new Uint32Array(1);\nclass BatchGeometry extends Geometry {\n  constructor() {\n    const vertexSize = 6;\n    const attributeBuffer = new Buffer({\n      data: placeHolderBufferData,\n      label: \"attribute-batch-buffer\",\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST,\n      shrinkToFit: false\n    });\n    const indexBuffer = new Buffer({\n      data: placeHolderIndexData,\n      label: \"index-batch-buffer\",\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST,\n      // | BufferUsage.STATIC,\n      shrinkToFit: false\n    });\n    const stride = vertexSize * 4;\n    super({\n      attributes: {\n        aPosition: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 0\n        },\n        aUV: {\n          buffer: attributeBuffer,\n          format: \"float32x2\",\n          stride,\n          offset: 2 * 4\n        },\n        aColor: {\n          buffer: attributeBuffer,\n          format: \"unorm8x4\",\n          stride,\n          offset: 4 * 4\n        },\n        aTextureIdAndRound: {\n          buffer: attributeBuffer,\n          format: \"uint16x2\",\n          stride,\n          offset: 5 * 4\n        }\n      },\n      indexBuffer\n    });\n  }\n}\n\nexport { BatchGeometry };\n//# sourceMappingURL=BatchGeometry.mjs.map\n","import { compileHighShaderGlProgram, compileHighShaderGpuProgram } from '../../high-shader/compileHighShaderToProgram.mjs';\nimport { colorBitGl, colorBit } from '../../high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBitGl, generateTextureBatchBit } from '../../high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { roundPixelsBitGl, roundPixelsBit } from '../../high-shader/shader-bits/roundPixelsBit.mjs';\nimport { getBatchSamplersUniformGroup } from '../../renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nimport { Shader } from '../../renderers/shared/shader/Shader.mjs';\n\n\"use strict\";\nclass DefaultShader extends Shader {\n  constructor(maxTextures) {\n    const glProgram = compileHighShaderGlProgram({\n      name: \"batch\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(maxTextures),\n        roundPixelsBitGl\n      ]\n    });\n    const gpuProgram = compileHighShaderGpuProgram({\n      name: \"batch\",\n      bits: [\n        colorBit,\n        generateTextureBatchBit(maxTextures),\n        roundPixelsBit\n      ]\n    });\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        batchSamplers: getBatchSamplersUniformGroup(maxTextures)\n      }\n    });\n    this.maxTextures = maxTextures;\n  }\n}\n\nexport { DefaultShader };\n//# sourceMappingURL=DefaultShader.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Batcher } from './Batcher.mjs';\nimport { BatchGeometry } from './BatchGeometry.mjs';\nimport { DefaultShader } from './DefaultShader.mjs';\n\n\"use strict\";\nlet defaultShader = null;\nconst _DefaultBatcher = class _DefaultBatcher extends Batcher {\n  constructor(options) {\n    super(options);\n    this.geometry = new BatchGeometry();\n    this.name = _DefaultBatcher.extension.name;\n    /** The size of one attribute. 1 = 32 bit. x, y, u, v, color, textureIdAndRound -> total = 6 */\n    this.vertexSize = 6;\n    defaultShader ?? (defaultShader = new DefaultShader(options.maxTextures));\n    this.shader = defaultShader;\n  }\n  /**\n   * Packs the attributes of a DefaultBatchableMeshElement into the provided views.\n   * @param element - The DefaultBatchableMeshElement to pack.\n   * @param float32View - The Float32Array view to pack into.\n   * @param uint32View - The Uint32Array view to pack into.\n   * @param index - The starting index in the views.\n   * @param textureId - The texture ID to use.\n   */\n  packAttributes(element, float32View, uint32View, index, textureId) {\n    const textureIdAndRound = textureId << 16 | element.roundPixels & 65535;\n    const wt = element.transform;\n    const a = wt.a;\n    const b = wt.b;\n    const c = wt.c;\n    const d = wt.d;\n    const tx = wt.tx;\n    const ty = wt.ty;\n    const { positions, uvs } = element;\n    const argb = element.color;\n    const offset = element.attributeOffset;\n    const end = offset + element.attributeSize;\n    for (let i = offset; i < end; i++) {\n      const i2 = i * 2;\n      const x = positions[i2];\n      const y = positions[i2 + 1];\n      float32View[index++] = a * x + c * y + tx;\n      float32View[index++] = d * y + b * x + ty;\n      float32View[index++] = uvs[i2];\n      float32View[index++] = uvs[i2 + 1];\n      uint32View[index++] = argb;\n      uint32View[index++] = textureIdAndRound;\n    }\n  }\n  /**\n   * Packs the attributes of a DefaultBatchableQuadElement into the provided views.\n   * @param element - The DefaultBatchableQuadElement to pack.\n   * @param float32View - The Float32Array view to pack into.\n   * @param uint32View - The Uint32Array view to pack into.\n   * @param index - The starting index in the views.\n   * @param textureId - The texture ID to use.\n   */\n  packQuadAttributes(element, float32View, uint32View, index, textureId) {\n    const texture = element.texture;\n    const wt = element.transform;\n    const a = wt.a;\n    const b = wt.b;\n    const c = wt.c;\n    const d = wt.d;\n    const tx = wt.tx;\n    const ty = wt.ty;\n    const bounds = element.bounds;\n    const w0 = bounds.maxX;\n    const w1 = bounds.minX;\n    const h0 = bounds.maxY;\n    const h1 = bounds.minY;\n    const uvs = texture.uvs;\n    const argb = element.color;\n    const textureIdAndRound = textureId << 16 | element.roundPixels & 65535;\n    float32View[index + 0] = a * w1 + c * h1 + tx;\n    float32View[index + 1] = d * h1 + b * w1 + ty;\n    float32View[index + 2] = uvs.x0;\n    float32View[index + 3] = uvs.y0;\n    uint32View[index + 4] = argb;\n    uint32View[index + 5] = textureIdAndRound;\n    float32View[index + 6] = a * w0 + c * h1 + tx;\n    float32View[index + 7] = d * h1 + b * w0 + ty;\n    float32View[index + 8] = uvs.x1;\n    float32View[index + 9] = uvs.y1;\n    uint32View[index + 10] = argb;\n    uint32View[index + 11] = textureIdAndRound;\n    float32View[index + 12] = a * w0 + c * h0 + tx;\n    float32View[index + 13] = d * h0 + b * w0 + ty;\n    float32View[index + 14] = uvs.x2;\n    float32View[index + 15] = uvs.y2;\n    uint32View[index + 16] = argb;\n    uint32View[index + 17] = textureIdAndRound;\n    float32View[index + 18] = a * w1 + c * h0 + tx;\n    float32View[index + 19] = d * h0 + b * w1 + ty;\n    float32View[index + 20] = uvs.x3;\n    float32View[index + 21] = uvs.y3;\n    uint32View[index + 22] = argb;\n    uint32View[index + 23] = textureIdAndRound;\n  }\n  /**\n   * Updates the maximum number of textures that can be used in the shader.\n   * @param maxTextures - The maximum number of textures that can be used in the shader.\n   * @internal\n   */\n  _updateMaxTextures(maxTextures) {\n    if (this.shader.maxTextures === maxTextures)\n      return;\n    defaultShader = new DefaultShader(maxTextures);\n    this.shader = defaultShader;\n  }\n  destroy() {\n    this.shader = null;\n    super.destroy();\n  }\n};\n/** @ignore */\n_DefaultBatcher.extension = {\n  type: [\n    ExtensionType.Batcher\n  ],\n  name: \"default\"\n};\nlet DefaultBatcher = _DefaultBatcher;\n\nexport { DefaultBatcher };\n//# sourceMappingURL=DefaultBatcher.mjs.map\n","function _typeof(o) {\n  \"@babel/helpers - typeof\";\n\n  return module.exports = _typeof = \"function\" == typeof Symbol && \"symbol\" == typeof Symbol.iterator ? function (o) {\n    return typeof o;\n  } : function (o) {\n    return o && \"function\" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? \"symbol\" : typeof o;\n  }, module.exports.__esModule = true, module.exports[\"default\"] = module.exports, _typeof(o);\n}\nmodule.exports = _typeof, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nvar __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments || [])).next());\n    });\n};\nvar __generator = (this && this.__generator) || function (thisArg, body) {\n    var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g;\n    return g = { next: verb(0), \"throw\": verb(1), \"return\": verb(2) }, typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n    function verb(n) { return function (v) { return step([n, v]); }; }\n    function step(op) {\n        if (f) throw new TypeError(\"Generator is already executing.\");\n        while (_) try {\n            if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n            if (y = 0, t) op = [op[0] & 2, t.value];\n            switch (op[0]) {\n                case 0: case 1: t = op; break;\n                case 4: _.label++; return { value: op[1], done: false };\n                case 5: _.label++; y = op[1]; op = [0]; continue;\n                case 7: op = _.ops.pop(); _.trys.pop(); continue;\n                default:\n                    if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                    if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                    if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                    if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                    if (t[2]) _.ops.pop();\n                    _.trys.pop(); continue;\n            }\n            op = body.call(thisArg, _);\n        } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n        if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n    }\n};\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Header = exports.Track = exports.Midi = void 0;\nvar midi_file_1 = require(\"midi-file\");\nvar Header_1 = require(\"./Header\");\nvar Track_1 = require(\"./Track\");\nvar Encode_1 = require(\"./Encode\");\n/**\n * The main midi parsing class.\n */\nvar Midi = /** @class */ (function () {\n    /**\n     * Parse the midi data\n     */\n    function Midi(midiArray) {\n        var _this = this;\n        // Parse the MIDI data if there is any.\n        var midiData = null;\n        if (midiArray) {\n            // Transform midiArray to ArrayLike<number>\n            // only if it's an ArrayBuffer.\n            var midiArrayLike = midiArray instanceof ArrayBuffer\n                ? new Uint8Array(midiArray)\n                : midiArray;\n            // Parse MIDI data.\n            midiData = (0, midi_file_1.parseMidi)(midiArrayLike);\n            // Add the absolute times to each of the tracks.\n            midiData.tracks.forEach(function (track) {\n                var currentTicks = 0;\n                track.forEach(function (event) {\n                    currentTicks += event.deltaTime;\n                    event.absoluteTime = currentTicks;\n                });\n            });\n            // Ensure at most one instrument per track.\n            midiData.tracks = splitTracks(midiData.tracks);\n        }\n        this.header = new Header_1.Header(midiData);\n        this.tracks = [];\n        // Parse MIDI data.\n        if (midiArray) {\n            // Format 0, everything is on the same track.\n            this.tracks = midiData.tracks.map(function (trackData) { return new Track_1.Track(trackData, _this.header); });\n            // If it's format 1 and there are no notes on the first track, remove it.\n            if (midiData.header.format === 1 && this.tracks[0].duration === 0) {\n                this.tracks.shift();\n            }\n        }\n    }\n    /**\n     * Download and parse the MIDI file. Returns a promise\n     * which resolves to the generated MIDI file.\n     * @param url The URL to fetch.\n     */\n    Midi.fromUrl = function (url) {\n        return __awaiter(this, void 0, void 0, function () {\n            var response, arrayBuffer;\n            return __generator(this, function (_a) {\n                switch (_a.label) {\n                    case 0: return [4 /*yield*/, fetch(url)];\n                    case 1:\n                        response = _a.sent();\n                        if (!response.ok) return [3 /*break*/, 3];\n                        return [4 /*yield*/, response.arrayBuffer()];\n                    case 2:\n                        arrayBuffer = _a.sent();\n                        return [2 /*return*/, new Midi(arrayBuffer)];\n                    case 3: throw new Error(\"Could not load '\".concat(url, \"'\"));\n                }\n            });\n        });\n    };\n    Object.defineProperty(Midi.prototype, \"name\", {\n        /**\n         * The name of the midi file, taken from the first track.\n         */\n        get: function () {\n            return this.header.name;\n        },\n        set: function (n) {\n            this.header.name = n;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Midi.prototype, \"duration\", {\n        /**\n         * The total length of the file in seconds.\n         */\n        get: function () {\n            // Get the max of the last note of all the tracks.\n            var durations = this.tracks.map(function (t) { return t.duration; });\n            return Math.max.apply(Math, durations);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Midi.prototype, \"durationTicks\", {\n        /**\n         * The total length of the file in ticks.\n         */\n        get: function () {\n            // Get the max of the last note of all the tracks.\n            var durationTicks = this.tracks.map(function (t) { return t.durationTicks; });\n            return Math.max.apply(Math, durationTicks);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Add a track to the MIDI file.\n     */\n    Midi.prototype.addTrack = function () {\n        var track = new Track_1.Track(undefined, this.header);\n        this.tracks.push(track);\n        return track;\n    };\n    /**\n     * Encode the MIDI as a Uint8Array.\n     */\n    Midi.prototype.toArray = function () {\n        return (0, Encode_1.encode)(this);\n    };\n    /**\n     * Convert the MIDI object to JSON.\n     */\n    Midi.prototype.toJSON = function () {\n        return {\n            header: this.header.toJSON(),\n            tracks: this.tracks.map(function (track) { return track.toJSON(); }),\n        };\n    };\n    /**\n     * Parse a JSON representation of the object. Will overwrite the current\n     * tracks and header.\n     */\n    Midi.prototype.fromJSON = function (json) {\n        var _this = this;\n        this.header = new Header_1.Header();\n        this.header.fromJSON(json.header);\n        this.tracks = json.tracks.map(function (trackJSON) {\n            var track = new Track_1.Track(undefined, _this.header);\n            track.fromJSON(trackJSON);\n            return track;\n        });\n    };\n    /**\n     * Clone the entire object MIDI object.\n     */\n    Midi.prototype.clone = function () {\n        var midi = new Midi();\n        midi.fromJSON(this.toJSON());\n        return midi;\n    };\n    return Midi;\n}());\nexports.Midi = Midi;\nvar Track_2 = require(\"./Track\");\nObject.defineProperty(exports, \"Track\", { enumerable: true, get: function () { return Track_2.Track; } });\nvar Header_2 = require(\"./Header\");\nObject.defineProperty(exports, \"Header\", { enumerable: true, get: function () { return Header_2.Header; } });\n/**\n * Given a list of MIDI tracks, make sure that each channel corresponds to at\n * most one channel and at most one instrument. This means splitting up tracks\n * that contain more than one channel or instrument.\n */\nfunction splitTracks(tracks) {\n    var newTracks = [];\n    for (var i = 0; i < tracks.length; i++) {\n        var defaultTrack = newTracks.length;\n        // a map from [program, channel] tuples to new track numbers\n        var trackMap = new Map();\n        // a map from channel numbers to current program numbers\n        var currentProgram = Array(16).fill(0);\n        for (var _i = 0, _a = tracks[i]; _i < _a.length; _i++) {\n            var event_1 = _a[_i];\n            var targetTrack = defaultTrack;\n            // If the event has a channel, we need to find that channel's current\n            // program number and the appropriate track for this [program, channel]\n            // pair.\n            var channel = event_1.channel;\n            if (channel !== undefined) {\n                if (event_1.type === \"programChange\") {\n                    currentProgram[channel] = event_1.programNumber;\n                }\n                var program = currentProgram[channel];\n                var trackKey = \"\".concat(program, \" \").concat(channel);\n                if (trackMap.has(trackKey)) {\n                    targetTrack = trackMap.get(trackKey);\n                }\n                else {\n                    targetTrack = defaultTrack + trackMap.size;\n                    trackMap.set(trackKey, targetTrack);\n                }\n            }\n            if (!newTracks[targetTrack]) {\n                newTracks.push([]);\n            }\n            newTracks[targetTrack].push(event_1);\n        }\n    }\n    return newTracks;\n}\n//# sourceMappingURL=Midi.js.map","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.ControlChange = exports.controlChangeIds = exports.controlChangeNames = void 0;\n/**\n * A map of values to control change names\n * @hidden\n */\nexports.controlChangeNames = {\n    1: \"modulationWheel\",\n    2: \"breath\",\n    4: \"footController\",\n    5: \"portamentoTime\",\n    7: \"volume\",\n    8: \"balance\",\n    10: \"pan\",\n    64: \"sustain\",\n    65: \"portamentoTime\",\n    66: \"sostenuto\",\n    67: \"softPedal\",\n    68: \"legatoFootswitch\",\n    84: \"portamentoControl\",\n};\n/**\n * swap the keys and values\n * @hidden\n */\nexports.controlChangeIds = Object.keys(exports.controlChangeNames).reduce(function (obj, key) {\n    obj[exports.controlChangeNames[key]] = key;\n    return obj;\n}, {});\nvar privateHeaderMap = new WeakMap();\nvar privateCCNumberMap = new WeakMap();\n/**\n * Represents a control change event\n */\nvar ControlChange = /** @class */ (function () {\n    /**\n     * @param event\n     * @param header\n     */\n    function ControlChange(event, header) {\n        privateHeaderMap.set(this, header);\n        privateCCNumberMap.set(this, event.controllerType);\n        this.ticks = event.absoluteTime;\n        this.value = event.value;\n    }\n    Object.defineProperty(ControlChange.prototype, \"number\", {\n        /**\n         * The controller number\n         */\n        get: function () {\n            return privateCCNumberMap.get(this);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ControlChange.prototype, \"name\", {\n        /**\n         * return the common name of the control number if it exists\n         */\n        get: function () {\n            if (exports.controlChangeNames[this.number]) {\n                return exports.controlChangeNames[this.number];\n            }\n            else {\n                return null;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(ControlChange.prototype, \"time\", {\n        /**\n         * The time of the event in seconds\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToSeconds(this.ticks);\n        },\n        set: function (t) {\n            var header = privateHeaderMap.get(this);\n            this.ticks = header.secondsToTicks(t);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    ControlChange.prototype.toJSON = function () {\n        return {\n            number: this.number,\n            ticks: this.ticks,\n            time: this.time,\n            value: this.value,\n        };\n    };\n    return ControlChange;\n}());\nexports.ControlChange = ControlChange;\n//# sourceMappingURL=ControlChange.js.map","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\n\n\"use strict\";\nlet context;\nfunction getTestContext() {\n  if (!context || context?.isContextLost()) {\n    const canvas = DOMAdapter.get().createCanvas();\n    context = canvas.getContext(\"webgl\", {});\n  }\n  return context;\n}\n\nexport { getTestContext };\n//# sourceMappingURL=getTestContext.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nclass FilterPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  push(filterEffect, container, instructionSet) {\n    const renderPipes = this._renderer.renderPipes;\n    renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"filter\",\n      canBundle: false,\n      action: \"pushFilter\",\n      container,\n      filterEffect\n    });\n  }\n  pop(_filterEffect, _container, instructionSet) {\n    this._renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add({\n      renderPipeId: \"filter\",\n      action: \"popFilter\",\n      canBundle: false\n    });\n  }\n  execute(instruction) {\n    if (instruction.action === \"pushFilter\") {\n      this._renderer.filter.push(instruction);\n    } else if (instruction.action === \"popFilter\") {\n      this._renderer.filter.pop();\n    }\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\nFilterPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"filter\"\n};\n\nexport { FilterPipe };\n//# sourceMappingURL=FilterPipe.mjs.map\n","var source = \"struct GlobalFilterUniforms {\\n  uInputSize: vec4<f32>,\\n  uInputPixel: vec4<f32>,\\n  uInputClamp: vec4<f32>,\\n  uOutputFrame: vec4<f32>,\\n  uGlobalFrame: vec4<f32>,\\n  uOutputTexture: vec4<f32>,\\n};\\n\\n@group(0) @binding(0) var <uniform> gfu: GlobalFilterUniforms;\\n@group(0) @binding(1) var uTexture: texture_2d<f32>;\\n@group(0) @binding(2) var uSampler: sampler;\\n\\nstruct VSOutput {\\n  @builtin(position) position: vec4<f32>,\\n  @location(0) uv: vec2<f32>\\n};\\n\\nfn filterVertexPosition(aPosition: vec2<f32>) -> vec4<f32>\\n{\\n    var position = aPosition * gfu.uOutputFrame.zw + gfu.uOutputFrame.xy;\\n\\n    position.x = position.x * (2.0 / gfu.uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0 * gfu.uOutputTexture.z / gfu.uOutputTexture.y) - gfu.uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nfn filterTextureCoord(aPosition: vec2<f32>) -> vec2<f32>\\n{\\n    return aPosition * (gfu.uOutputFrame.zw * gfu.uInputSize.zw);\\n}\\n\\n@vertex\\nfn mainVertex(\\n  @location(0) aPosition: vec2<f32>,\\n) -> VSOutput {\\n  return VSOutput(\\n   filterVertexPosition(aPosition),\\n   filterTextureCoord(aPosition)\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n) -> @location(0) vec4<f32> {\\n    return textureSample(uTexture, uSampler, uv);\\n}\\n\";\n\nexport { source as default };\n//# sourceMappingURL=passthrough.wgsl.mjs.map\n","import { GlProgram } from '../../../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../../../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Filter } from '../../Filter.mjs';\nimport vertex from '../defaultFilter.vert.mjs';\nimport fragment from './passthrough.frag.mjs';\nimport source from './passthrough.wgsl.mjs';\n\n\"use strict\";\nclass PassthroughFilter extends Filter {\n  constructor() {\n    const gpuProgram = GpuProgram.from({\n      vertex: { source, entryPoint: \"mainVertex\" },\n      fragment: { source, entryPoint: \"mainFragment\" },\n      name: \"passthrough-filter\"\n    });\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment,\n      name: \"passthrough-filter\"\n    });\n    super({\n      gpuProgram,\n      glProgram\n    });\n  }\n}\n\nexport { PassthroughFilter };\n//# sourceMappingURL=PassthroughFilter.mjs.map\n","var vertex = \"in vec2 aPosition;\\nout vec2 vTextureCoord;\\n\\nuniform vec4 uInputSize;\\nuniform vec4 uOutputFrame;\\nuniform vec4 uOutputTexture;\\n\\nvec4 filterVertexPosition( void )\\n{\\n    vec2 position = aPosition * uOutputFrame.zw + uOutputFrame.xy;\\n    \\n    position.x = position.x * (2.0 / uOutputTexture.x) - 1.0;\\n    position.y = position.y * (2.0*uOutputTexture.z / uOutputTexture.y) - uOutputTexture.z;\\n\\n    return vec4(position, 0.0, 1.0);\\n}\\n\\nvec2 filterTextureCoord( void )\\n{\\n    return aPosition * (uOutputFrame.zw * uInputSize.zw);\\n}\\n\\nvoid main(void)\\n{\\n    gl_Position = filterVertexPosition();\\n    vTextureCoord = filterTextureCoord();\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=defaultFilter.vert.mjs.map\n","var fragment = \"in vec2 vTextureCoord;\\nout vec4 finalColor;\\nuniform sampler2D uTexture;\\nvoid main() {\\n    finalColor = texture(uTexture, vTextureCoord);\\n}\\n\";\n\nexport { fragment as default };\n//# sourceMappingURL=passthrough.frag.mjs.map\n","import '../../../maths/index.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\n\n\"use strict\";\nconst tempProjectionMatrix = new Matrix();\nfunction getGlobalRenderableBounds(renderables, bounds) {\n  bounds.clear();\n  const actualMatrix = bounds.matrix;\n  for (let i = 0; i < renderables.length; i++) {\n    const renderable = renderables[i];\n    if (renderable.globalDisplayStatus < 7) {\n      continue;\n    }\n    const renderGroup = renderable.renderGroup ?? renderable.parentRenderGroup;\n    if (renderGroup?.isCachedAsTexture) {\n      bounds.matrix = tempProjectionMatrix.copyFrom(renderGroup.textureOffsetInverseTransform).append(renderable.worldTransform);\n    } else if (renderGroup?._parentCacheAsTextureRenderGroup) {\n      bounds.matrix = tempProjectionMatrix.copyFrom(renderGroup._parentCacheAsTextureRenderGroup.inverseWorldTransform).append(renderable.groupTransform);\n    } else {\n      bounds.matrix = renderable.worldTransform;\n    }\n    bounds.addBounds(renderable.bounds);\n  }\n  bounds.matrix = actualMatrix;\n  return bounds;\n}\n\nexport { getGlobalRenderableBounds };\n//# sourceMappingURL=getRenderableBounds.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\nimport { PassthroughFilter } from './defaults/passthrough/PassthroughFilter.mjs';\nimport { Matrix } from '../maths/matrix/Matrix.mjs';\nimport { BindGroup } from '../rendering/renderers/gpu/shader/BindGroup.mjs';\nimport { Geometry } from '../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { UniformGroup } from '../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\nimport { TexturePool } from '../rendering/renderers/shared/texture/TexturePool.mjs';\nimport { RendererType } from '../rendering/renderers/types.mjs';\nimport { Bounds } from '../scene/container/bounds/Bounds.mjs';\nimport { getGlobalRenderableBounds } from '../scene/container/bounds/getRenderableBounds.mjs';\nimport { warn } from '../utils/logging/warn.mjs';\n\n\"use strict\";\nconst quadGeometry = new Geometry({\n  attributes: {\n    aPosition: {\n      buffer: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n      format: \"float32x2\",\n      stride: 2 * 4,\n      offset: 0\n    }\n  },\n  indexBuffer: new Uint32Array([0, 1, 2, 0, 2, 3])\n});\nclass FilterData {\n  constructor() {\n    /**\n     * Indicates whether the filter should be skipped.\n     * @type {boolean}\n     */\n    this.skip = false;\n    /**\n     * The texture to which the filter is applied.\n     * @type {Texture}\n     */\n    this.inputTexture = null;\n    /**\n     * The back texture used for blending, if required.\n     * @type {Texture | null}\n     */\n    this.backTexture = null;\n    /**\n     * The list of filters to be applied.\n     * @type {Filter[]}\n     */\n    this.filters = null;\n    /**\n     * The bounds of the filter area.\n     * @type {Bounds}\n     */\n    this.bounds = new Bounds();\n    /**\n     * The container to which the filter is applied.\n     * @type {Container}\n     */\n    this.container = null;\n    /**\n     * Indicates whether blending is required for the filter.\n     * @type {boolean}\n     */\n    this.blendRequired = false;\n    /**\n     * The render surface where the output of the filter is rendered.\n     * @type {RenderSurface}\n     */\n    this.outputRenderSurface = null;\n    /**\n     * The global frame of the filter area.\n     * @type {{ x: number, y: number, width: number, height: number }}\n     */\n    this.globalFrame = { x: 0, y: 0, width: 0, height: 0 };\n    /** The first enabled filter index in the current filter list. */\n    this.firstEnabledIndex = -1;\n    /** The last enabled filter index in the current filter list. */\n    this.lastEnabledIndex = -1;\n  }\n}\nclass FilterSystem {\n  constructor(renderer) {\n    this._filterStackIndex = 0;\n    this._filterStack = [];\n    this._filterGlobalUniforms = new UniformGroup({\n      uInputSize: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uInputPixel: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uInputClamp: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uOutputFrame: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uGlobalFrame: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uOutputTexture: { value: new Float32Array(4), type: \"vec4<f32>\" }\n    });\n    this._globalFilterBindGroup = new BindGroup({});\n    this.renderer = renderer;\n  }\n  /**\n   * The back texture of the currently active filter. Requires the filter to have `blendRequired` set to true.\n   * @readonly\n   */\n  get activeBackTexture() {\n    return this._activeFilterData?.backTexture;\n  }\n  /**\n   * Pushes a filter instruction onto the filter stack.\n   * @param instruction - The instruction containing the filter effect and container.\n   * @internal\n   */\n  push(instruction) {\n    const renderer = this.renderer;\n    const filters = instruction.filterEffect.filters;\n    const filterData = this._pushFilterData();\n    filterData.skip = false;\n    filterData.filters = filters;\n    filterData.container = instruction.container;\n    filterData.outputRenderSurface = renderer.renderTarget.renderSurface;\n    const colorTextureSource = renderer.renderTarget.renderTarget.colorTexture.source;\n    const rootResolution = colorTextureSource.resolution;\n    const rootAntialias = colorTextureSource.antialias;\n    if (filters.every((filter) => !filter.enabled)) {\n      filterData.skip = true;\n      return;\n    }\n    const bounds = filterData.bounds;\n    this._calculateFilterArea(instruction, bounds);\n    this._calculateFilterBounds(filterData, renderer.renderTarget.rootViewPort, rootAntialias, rootResolution, 1);\n    if (filterData.skip) {\n      return;\n    }\n    const previousFilterData = this._getPreviousFilterData();\n    const globalResolution = this._findFilterResolution(rootResolution);\n    let offsetX = 0;\n    let offsetY = 0;\n    if (previousFilterData) {\n      offsetX = previousFilterData.bounds.minX;\n      offsetY = previousFilterData.bounds.minY;\n    }\n    this._calculateGlobalFrame(\n      filterData,\n      offsetX,\n      offsetY,\n      globalResolution,\n      colorTextureSource.width,\n      colorTextureSource.height\n    );\n    this._setupFilterTextures(filterData, bounds, renderer, previousFilterData);\n  }\n  /**\n   * Applies filters to a texture.\n   *\n   * This method takes a texture and a list of filters, applies the filters to the texture,\n   * and returns the resulting texture.\n   * @param {object} params - The parameters for applying filters.\n   * @param {Texture} params.texture - The texture to apply filters to.\n   * @param {Filter[]} params.filters - The filters to apply.\n   * @returns {Texture} The resulting texture after all filters have been applied.\n   * @example\n   *\n   * ```ts\n   * // Create a texture and a list of filters\n   * const texture = new Texture(...);\n   * const filters = [new BlurFilter(), new ColorMatrixFilter()];\n   *\n   * // Apply the filters to the texture\n   * const resultTexture = filterSystem.applyToTexture({ texture, filters });\n   *\n   * // Use the resulting texture\n   * sprite.texture = resultTexture;\n   * ```\n   *\n   * Key Points:\n   * 1. padding is not currently supported here - so clipping may occur with filters that use padding.\n   * 2. If all filters are disabled or skipped, the original texture is returned.\n   */\n  generateFilteredTexture({ texture, filters }) {\n    const filterData = this._pushFilterData();\n    this._activeFilterData = filterData;\n    filterData.skip = false;\n    filterData.filters = filters;\n    const colorTextureSource = texture.source;\n    const rootResolution = colorTextureSource.resolution;\n    const rootAntialias = colorTextureSource.antialias;\n    if (filters.every((filter) => !filter.enabled)) {\n      filterData.skip = true;\n      return texture;\n    }\n    const bounds = filterData.bounds;\n    bounds.addRect(texture.frame);\n    this._calculateFilterBounds(filterData, bounds.rectangle, rootAntialias, rootResolution, 0);\n    if (filterData.skip) {\n      return texture;\n    }\n    const globalResolution = rootResolution;\n    const offsetX = 0;\n    const offsetY = 0;\n    this._calculateGlobalFrame(\n      filterData,\n      offsetX,\n      offsetY,\n      globalResolution,\n      colorTextureSource.width,\n      colorTextureSource.height\n    );\n    filterData.outputRenderSurface = TexturePool.getOptimalTexture(\n      bounds.width,\n      bounds.height,\n      filterData.resolution,\n      filterData.antialias\n    );\n    filterData.backTexture = Texture.EMPTY;\n    filterData.inputTexture = texture;\n    const renderer = this.renderer;\n    renderer.renderTarget.finishRenderPass();\n    this._applyFiltersToTexture(filterData, true);\n    const outputTexture = filterData.outputRenderSurface;\n    outputTexture.source.alphaMode = \"premultiplied-alpha\";\n    return outputTexture;\n  }\n  /** @internal */\n  pop() {\n    const renderer = this.renderer;\n    const filterData = this._popFilterData();\n    if (filterData.skip) {\n      return;\n    }\n    renderer.globalUniforms.pop();\n    renderer.renderTarget.finishRenderPass();\n    this._activeFilterData = filterData;\n    this._applyFiltersToTexture(filterData, false);\n    if (filterData.blendRequired) {\n      TexturePool.returnTexture(filterData.backTexture);\n    }\n    TexturePool.returnTexture(filterData.inputTexture);\n  }\n  /**\n   * Copies the last render surface to a texture.\n   * @param lastRenderSurface - The last render surface to copy from.\n   * @param bounds - The bounds of the area to copy.\n   * @param previousBounds - The previous bounds to use for offsetting the copy.\n   */\n  getBackTexture(lastRenderSurface, bounds, previousBounds) {\n    const backgroundResolution = lastRenderSurface.colorTexture.source._resolution;\n    const backTexture = TexturePool.getOptimalTexture(\n      bounds.width,\n      bounds.height,\n      backgroundResolution,\n      false\n    );\n    let x = bounds.minX;\n    let y = bounds.minY;\n    if (previousBounds) {\n      x -= previousBounds.minX;\n      y -= previousBounds.minY;\n    }\n    x = Math.floor(x * backgroundResolution);\n    y = Math.floor(y * backgroundResolution);\n    const width = Math.ceil(bounds.width * backgroundResolution);\n    const height = Math.ceil(bounds.height * backgroundResolution);\n    this.renderer.renderTarget.copyToTexture(\n      lastRenderSurface,\n      backTexture,\n      { x, y },\n      { width, height },\n      { x: 0, y: 0 }\n    );\n    return backTexture;\n  }\n  /**\n   * Applies a filter to a texture.\n   * @param filter - The filter to apply.\n   * @param input - The input texture.\n   * @param output - The output render surface.\n   * @param clear - Whether to clear the output surface before applying the filter.\n   */\n  applyFilter(filter, input, output, clear) {\n    const renderer = this.renderer;\n    const filterData = this._activeFilterData;\n    const outputRenderSurface = filterData.outputRenderSurface;\n    const isFinalTarget = outputRenderSurface === output;\n    const rootResolution = renderer.renderTarget.rootRenderTarget.colorTexture.source._resolution;\n    const resolution = this._findFilterResolution(rootResolution);\n    let offsetX = 0;\n    let offsetY = 0;\n    if (isFinalTarget) {\n      const offset = this._findPreviousFilterOffset();\n      offsetX = offset.x;\n      offsetY = offset.y;\n    }\n    this._updateFilterUniforms(input, output, filterData, offsetX, offsetY, resolution, isFinalTarget, clear);\n    const filterToApply = filter.enabled ? filter : this._getPassthroughFilter();\n    this._setupBindGroupsAndRender(filterToApply, input, renderer);\n  }\n  /**\n   * Multiply _input normalized coordinates_ to this matrix to get _sprite texture normalized coordinates_.\n   *\n   * Use `outputMatrix * vTextureCoord` in the shader.\n   * @param outputMatrix - The matrix to output to.\n   * @param {Sprite} sprite - The sprite to map to.\n   * @returns The mapped matrix.\n   */\n  calculateSpriteMatrix(outputMatrix, sprite) {\n    const data = this._activeFilterData;\n    const mappedMatrix = outputMatrix.set(\n      data.inputTexture._source.width,\n      0,\n      0,\n      data.inputTexture._source.height,\n      data.bounds.minX,\n      data.bounds.minY\n    );\n    const worldTransform = sprite.worldTransform.copyTo(Matrix.shared);\n    const renderGroup = sprite.renderGroup || sprite.parentRenderGroup;\n    if (renderGroup && renderGroup.cacheToLocalTransform) {\n      worldTransform.prepend(renderGroup.cacheToLocalTransform);\n    }\n    worldTransform.invert();\n    mappedMatrix.prepend(worldTransform);\n    mappedMatrix.scale(\n      1 / sprite.texture.orig.width,\n      1 / sprite.texture.orig.height\n    );\n    mappedMatrix.translate(sprite.anchor.x, sprite.anchor.y);\n    return mappedMatrix;\n  }\n  destroy() {\n    this._passthroughFilter?.destroy(true);\n    this._passthroughFilter = null;\n  }\n  _getPassthroughFilter() {\n    this._passthroughFilter ?? (this._passthroughFilter = new PassthroughFilter());\n    return this._passthroughFilter;\n  }\n  /**\n   * Sets up the bind groups and renders the filter.\n   * @param filter - The filter to apply\n   * @param input - The input texture\n   * @param renderer - The renderer instance\n   */\n  _setupBindGroupsAndRender(filter, input, renderer) {\n    if (renderer.renderPipes.uniformBatch) {\n      const batchUniforms = renderer.renderPipes.uniformBatch.getUboResource(this._filterGlobalUniforms);\n      this._globalFilterBindGroup.setResource(batchUniforms, 0);\n    } else {\n      this._globalFilterBindGroup.setResource(this._filterGlobalUniforms, 0);\n    }\n    this._globalFilterBindGroup.setResource(input.source, 1);\n    this._globalFilterBindGroup.setResource(input.source.style, 2);\n    filter.groups[0] = this._globalFilterBindGroup;\n    renderer.encoder.draw({\n      geometry: quadGeometry,\n      shader: filter,\n      state: filter._state,\n      topology: \"triangle-list\"\n    });\n    if (renderer.type === RendererType.WEBGL) {\n      renderer.renderTarget.finishRenderPass();\n    }\n  }\n  /**\n   * Sets up the filter textures including input texture and back texture if needed.\n   * @param filterData - The filter data to update\n   * @param bounds - The bounds for the texture\n   * @param renderer - The renderer instance\n   * @param previousFilterData - The previous filter data for back texture calculation\n   */\n  _setupFilterTextures(filterData, bounds, renderer, previousFilterData) {\n    filterData.backTexture = Texture.EMPTY;\n    filterData.inputTexture = TexturePool.getOptimalTexture(\n      bounds.width,\n      bounds.height,\n      filterData.resolution,\n      filterData.antialias\n    );\n    if (filterData.blendRequired) {\n      renderer.renderTarget.finishRenderPass();\n      const renderTarget = renderer.renderTarget.getRenderTarget(filterData.outputRenderSurface);\n      filterData.backTexture = this.getBackTexture(renderTarget, bounds, previousFilterData?.bounds);\n    }\n    renderer.renderTarget.bind(filterData.inputTexture, true);\n    renderer.globalUniforms.push({\n      offset: bounds\n    });\n  }\n  /**\n   * Calculates and sets the global frame for the filter.\n   * @param filterData - The filter data to update\n   * @param offsetX - The X offset\n   * @param offsetY - The Y offset\n   * @param globalResolution - The global resolution\n   * @param sourceWidth - The source texture width\n   * @param sourceHeight - The source texture height\n   */\n  _calculateGlobalFrame(filterData, offsetX, offsetY, globalResolution, sourceWidth, sourceHeight) {\n    const globalFrame = filterData.globalFrame;\n    globalFrame.x = offsetX * globalResolution;\n    globalFrame.y = offsetY * globalResolution;\n    globalFrame.width = sourceWidth * globalResolution;\n    globalFrame.height = sourceHeight * globalResolution;\n  }\n  /**\n   * Updates the filter uniforms with the current filter state.\n   * @param input - The input texture\n   * @param output - The output render surface\n   * @param filterData - The current filter data\n   * @param offsetX - The X offset for positioning\n   * @param offsetY - The Y offset for positioning\n   * @param resolution - The current resolution\n   * @param isFinalTarget - Whether this is the final render target\n   * @param clear - Whether to clear the output surface\n   */\n  _updateFilterUniforms(input, output, filterData, offsetX, offsetY, resolution, isFinalTarget, clear) {\n    const uniforms = this._filterGlobalUniforms.uniforms;\n    const outputFrame = uniforms.uOutputFrame;\n    const inputSize = uniforms.uInputSize;\n    const inputPixel = uniforms.uInputPixel;\n    const inputClamp = uniforms.uInputClamp;\n    const globalFrame = uniforms.uGlobalFrame;\n    const outputTexture = uniforms.uOutputTexture;\n    if (isFinalTarget) {\n      outputFrame[0] = filterData.bounds.minX - offsetX;\n      outputFrame[1] = filterData.bounds.minY - offsetY;\n    } else {\n      outputFrame[0] = 0;\n      outputFrame[1] = 0;\n    }\n    outputFrame[2] = input.frame.width;\n    outputFrame[3] = input.frame.height;\n    inputSize[0] = input.source.width;\n    inputSize[1] = input.source.height;\n    inputSize[2] = 1 / inputSize[0];\n    inputSize[3] = 1 / inputSize[1];\n    inputPixel[0] = input.source.pixelWidth;\n    inputPixel[1] = input.source.pixelHeight;\n    inputPixel[2] = 1 / inputPixel[0];\n    inputPixel[3] = 1 / inputPixel[1];\n    inputClamp[0] = 0.5 * inputPixel[2];\n    inputClamp[1] = 0.5 * inputPixel[3];\n    inputClamp[2] = input.frame.width * inputSize[2] - 0.5 * inputPixel[2];\n    inputClamp[3] = input.frame.height * inputSize[3] - 0.5 * inputPixel[3];\n    const rootTexture = this.renderer.renderTarget.rootRenderTarget.colorTexture;\n    globalFrame[0] = offsetX * resolution;\n    globalFrame[1] = offsetY * resolution;\n    globalFrame[2] = rootTexture.source.width * resolution;\n    globalFrame[3] = rootTexture.source.height * resolution;\n    if (output instanceof Texture)\n      output.source.resource = null;\n    const renderTarget = this.renderer.renderTarget.getRenderTarget(output);\n    this.renderer.renderTarget.bind(output, !!clear);\n    if (output instanceof Texture) {\n      outputTexture[0] = output.frame.width;\n      outputTexture[1] = output.frame.height;\n    } else {\n      outputTexture[0] = renderTarget.width;\n      outputTexture[1] = renderTarget.height;\n    }\n    outputTexture[2] = renderTarget.isRoot ? -1 : 1;\n    this._filterGlobalUniforms.update();\n  }\n  /**\n   * Finds the correct resolution by looking back through the filter stack.\n   * @param rootResolution - The fallback root resolution to use\n   * @returns The resolution from the previous filter or root resolution\n   */\n  _findFilterResolution(rootResolution) {\n    let currentIndex = this._filterStackIndex - 1;\n    while (currentIndex > 0 && this._filterStack[currentIndex].skip) {\n      --currentIndex;\n    }\n    return currentIndex > 0 && this._filterStack[currentIndex].inputTexture ? this._filterStack[currentIndex].inputTexture.source._resolution : rootResolution;\n  }\n  /**\n   * Finds the offset from the previous non-skipped filter in the stack.\n   * @returns The offset coordinates from the previous filter\n   */\n  _findPreviousFilterOffset() {\n    let offsetX = 0;\n    let offsetY = 0;\n    let lastIndex = this._filterStackIndex;\n    while (lastIndex > 0) {\n      lastIndex--;\n      const prevFilterData = this._filterStack[lastIndex];\n      if (!prevFilterData.skip) {\n        offsetX = prevFilterData.bounds.minX;\n        offsetY = prevFilterData.bounds.minY;\n        break;\n      }\n    }\n    return { x: offsetX, y: offsetY };\n  }\n  /**\n   * Calculates the filter area bounds based on the instruction type.\n   * @param instruction - The filter instruction\n   * @param bounds - The bounds object to populate\n   */\n  _calculateFilterArea(instruction, bounds) {\n    if (instruction.renderables) {\n      getGlobalRenderableBounds(instruction.renderables, bounds);\n    } else if (instruction.filterEffect.filterArea) {\n      bounds.clear();\n      bounds.addRect(instruction.filterEffect.filterArea);\n      bounds.applyMatrix(instruction.container.worldTransform);\n    } else {\n      instruction.container.getFastGlobalBounds(true, bounds);\n    }\n    if (instruction.container) {\n      const renderGroup = instruction.container.renderGroup || instruction.container.parentRenderGroup;\n      const filterFrameTransform = renderGroup.cacheToLocalTransform;\n      if (filterFrameTransform) {\n        bounds.applyMatrix(filterFrameTransform);\n      }\n    }\n  }\n  _applyFiltersToTexture(filterData, clear) {\n    const inputTexture = filterData.inputTexture;\n    const bounds = filterData.bounds;\n    const filters = filterData.filters;\n    const firstEnabled = filterData.firstEnabledIndex;\n    const lastEnabled = filterData.lastEnabledIndex;\n    this._globalFilterBindGroup.setResource(inputTexture.source.style, 2);\n    this._globalFilterBindGroup.setResource(filterData.backTexture.source, 3);\n    if (firstEnabled === lastEnabled) {\n      filters[firstEnabled].apply(this, inputTexture, filterData.outputRenderSurface, clear);\n    } else {\n      let flip = filterData.inputTexture;\n      const tempTexture = TexturePool.getOptimalTexture(\n        bounds.width,\n        bounds.height,\n        flip.source._resolution,\n        false\n      );\n      let flop = tempTexture;\n      for (let i = firstEnabled; i < lastEnabled; i++) {\n        const filter = filters[i];\n        if (!filter.enabled)\n          continue;\n        filter.apply(this, flip, flop, true);\n        const t = flip;\n        flip = flop;\n        flop = t;\n      }\n      filters[lastEnabled].apply(this, flip, filterData.outputRenderSurface, clear);\n      TexturePool.returnTexture(tempTexture);\n    }\n  }\n  _calculateFilterBounds(filterData, viewPort, rootAntialias, rootResolution, paddingMultiplier) {\n    const renderer = this.renderer;\n    const bounds = filterData.bounds;\n    const filters = filterData.filters;\n    let resolution = Infinity;\n    let padding = 0;\n    let antialias = true;\n    let blendRequired = false;\n    let enabled = false;\n    let clipToViewport = true;\n    let firstEnabledIndex = -1;\n    let lastEnabledIndex = -1;\n    for (let i = 0; i < filters.length; i++) {\n      const filter = filters[i];\n      if (!filter.enabled)\n        continue;\n      if (firstEnabledIndex === -1)\n        firstEnabledIndex = i;\n      lastEnabledIndex = i;\n      resolution = Math.min(resolution, filter.resolution === \"inherit\" ? rootResolution : filter.resolution);\n      padding += filter.padding;\n      if (filter.antialias === \"off\") {\n        antialias = false;\n      } else if (filter.antialias === \"inherit\") {\n        antialias && (antialias = rootAntialias);\n      }\n      if (!filter.clipToViewport) {\n        clipToViewport = false;\n      }\n      const isCompatible = !!(filter.compatibleRenderers & renderer.type);\n      if (!isCompatible) {\n        enabled = false;\n        break;\n      }\n      if (filter.blendRequired && !(renderer.backBuffer?.useBackBuffer ?? true)) {\n        warn(\"Blend filter requires backBuffer on WebGL renderer to be enabled. Set `useBackBuffer: true` in the renderer options.\");\n        enabled = false;\n        break;\n      }\n      enabled = true;\n      blendRequired || (blendRequired = filter.blendRequired);\n    }\n    if (!enabled) {\n      filterData.skip = true;\n      return;\n    }\n    if (clipToViewport) {\n      bounds.fitBounds(0, viewPort.width / rootResolution, 0, viewPort.height / rootResolution);\n    }\n    bounds.scale(resolution).ceil().scale(1 / resolution).pad((padding | 0) * paddingMultiplier);\n    if (!bounds.isPositive) {\n      filterData.skip = true;\n      return;\n    }\n    filterData.antialias = antialias;\n    filterData.resolution = resolution;\n    filterData.blendRequired = blendRequired;\n    filterData.firstEnabledIndex = firstEnabledIndex;\n    filterData.lastEnabledIndex = lastEnabledIndex;\n  }\n  _popFilterData() {\n    this._filterStackIndex--;\n    return this._filterStack[this._filterStackIndex];\n  }\n  _getPreviousFilterData() {\n    let previousFilterData;\n    let index = this._filterStackIndex - 1;\n    while (index > 0) {\n      index--;\n      previousFilterData = this._filterStack[index];\n      if (!previousFilterData.skip) {\n        break;\n      }\n    }\n    return previousFilterData;\n  }\n  _pushFilterData() {\n    let filterData = this._filterStack[this._filterStackIndex];\n    if (!filterData) {\n      filterData = this._filterStack[this._filterStackIndex] = new FilterData();\n    }\n    this._filterStackIndex++;\n    return filterData;\n  }\n}\n/** @ignore */\nFilterSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"filter\"\n};\n\nexport { FilterSystem };\n//# sourceMappingURL=FilterSystem.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { FilterPipe } from './FilterPipe.mjs';\nimport { FilterSystem } from './FilterSystem.mjs';\n\n\"use strict\";\nextensions.add(FilterSystem);\nextensions.add(FilterPipe);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nconst textureBatchBitGpuCache = {};\nfunction generateBindingSrc(maxTextures) {\n  const src = [];\n  if (maxTextures === 1) {\n    src.push(\"@group(1) @binding(0) var textureSource1: texture_2d<f32>;\");\n    src.push(\"@group(1) @binding(1) var textureSampler1: sampler;\");\n  } else {\n    let bindingIndex = 0;\n    for (let i = 0; i < maxTextures; i++) {\n      src.push(`@group(1) @binding(${bindingIndex++}) var textureSource${i + 1}: texture_2d<f32>;`);\n      src.push(`@group(1) @binding(${bindingIndex++}) var textureSampler${i + 1}: sampler;`);\n    }\n  }\n  return src.join(\"\\n\");\n}\nfunction generateSampleSrc(maxTextures) {\n  const src = [];\n  if (maxTextures === 1) {\n    src.push(\"outColor = textureSampleGrad(textureSource1, textureSampler1, vUV, uvDx, uvDy);\");\n  } else {\n    src.push(\"switch vTextureId {\");\n    for (let i = 0; i < maxTextures; i++) {\n      if (i === maxTextures - 1) {\n        src.push(`  default:{`);\n      } else {\n        src.push(`  case ${i}:{`);\n      }\n      src.push(`      outColor = textureSampleGrad(textureSource${i + 1}, textureSampler${i + 1}, vUV, uvDx, uvDy);`);\n      src.push(`      break;}`);\n    }\n    src.push(`}`);\n  }\n  return src.join(\"\\n\");\n}\nfunction generateTextureBatchBit(maxTextures) {\n  if (!textureBatchBitGpuCache[maxTextures]) {\n    textureBatchBitGpuCache[maxTextures] = {\n      name: \"texture-batch-bit\",\n      vertex: {\n        header: `\n                @in aTextureIdAndRound: vec2<u32>;\n                @out @interpolate(flat) vTextureId : u32;\n            `,\n        main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n        end: `\n                if(aTextureIdAndRound.x == 1)\n                {\n                    vPosition = vec4<f32>(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n                }\n            `\n      },\n      fragment: {\n        header: `\n                @in @interpolate(flat) vTextureId: u32;\n\n                ${generateBindingSrc(maxTextures)}\n            `,\n        main: `\n                var uvDx = dpdx(vUV);\n                var uvDy = dpdy(vUV);\n\n                ${generateSampleSrc(maxTextures)}\n            `\n      }\n    };\n  }\n  return textureBatchBitGpuCache[maxTextures];\n}\nconst textureBatchBitGlCache = {};\nfunction generateSampleGlSrc(maxTextures) {\n  const src = [];\n  for (let i = 0; i < maxTextures; i++) {\n    if (i > 0) {\n      src.push(\"else\");\n    }\n    if (i < maxTextures - 1) {\n      src.push(`if(vTextureId < ${i}.5)`);\n    }\n    src.push(\"{\");\n    src.push(`\toutColor = texture(uTextures[${i}], vUV);`);\n    src.push(\"}\");\n  }\n  return src.join(\"\\n\");\n}\nfunction generateTextureBatchBitGl(maxTextures) {\n  if (!textureBatchBitGlCache[maxTextures]) {\n    textureBatchBitGlCache[maxTextures] = {\n      name: \"texture-batch-bit\",\n      vertex: {\n        header: `\n                in vec2 aTextureIdAndRound;\n                out float vTextureId;\n\n            `,\n        main: `\n                vTextureId = aTextureIdAndRound.y;\n            `,\n        end: `\n                if(aTextureIdAndRound.x == 1.)\n                {\n                    gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n                }\n            `\n      },\n      fragment: {\n        header: `\n                in float vTextureId;\n\n                uniform sampler2D uTextures[${maxTextures}];\n\n            `,\n        main: `\n\n                ${generateSampleGlSrc(maxTextures)}\n            `\n      }\n    };\n  }\n  return textureBatchBitGlCache[maxTextures];\n}\n\nexport { generateTextureBatchBit, generateTextureBatchBitGl };\n//# sourceMappingURL=generateTextureBatchBit.mjs.map\n","import { lru } from 'tiny-lru';\nimport { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\n\n\"use strict\";\nconst contextSettings = {\n  // TextMetrics requires getImageData readback for measuring fonts.\n  willReadFrequently: true\n};\nconst _CanvasTextMetrics = class _CanvasTextMetrics {\n  /**\n   * Checking that we can use modern canvas 2D API.\n   *\n   * Note: This is an unstable API, Chrome < 94 use `textLetterSpacing`, later versions use `letterSpacing`.\n   * @see TextMetrics.experimentalLetterSpacing\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/ICanvasRenderingContext2D/letterSpacing\n   * @see https://developer.chrome.com/origintrials/#/view_trial/3585991203293757441\n   */\n  static get experimentalLetterSpacingSupported() {\n    let result = _CanvasTextMetrics._experimentalLetterSpacingSupported;\n    if (result === void 0) {\n      const proto = DOMAdapter.get().getCanvasRenderingContext2D().prototype;\n      result = _CanvasTextMetrics._experimentalLetterSpacingSupported = \"letterSpacing\" in proto || \"textLetterSpacing\" in proto;\n    }\n    return result;\n  }\n  /**\n   * @param text - the text that was measured\n   * @param style - the style that was measured\n   * @param width - the measured width of the text\n   * @param height - the measured height of the text\n   * @param lines - an array of the lines of text broken by new lines and wrapping if specified in style\n   * @param lineWidths - an array of the line widths for each line matched to `lines`\n   * @param lineHeight - the measured line height for this style\n   * @param maxLineWidth - the maximum line width for all measured lines\n   * @param {FontMetrics} fontProperties - the font properties object from TextMetrics.measureFont\n   */\n  constructor(text, style, width, height, lines, lineWidths, lineHeight, maxLineWidth, fontProperties) {\n    this.text = text;\n    this.style = style;\n    this.width = width;\n    this.height = height;\n    this.lines = lines;\n    this.lineWidths = lineWidths;\n    this.lineHeight = lineHeight;\n    this.maxLineWidth = maxLineWidth;\n    this.fontProperties = fontProperties;\n  }\n  /**\n   * Measures the supplied string of text and returns a Rectangle.\n   * @param text - The text to measure.\n   * @param style - The text style to use for measuring\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @param wordWrap\n   * @returns Measured width and height of the text.\n   */\n  static measureText(text = \" \", style, canvas = _CanvasTextMetrics._canvas, wordWrap = style.wordWrap) {\n    const textKey = `${text}-${style.styleKey}-wordWrap-${wordWrap}`;\n    if (_CanvasTextMetrics._measurementCache.has(textKey)) {\n      return _CanvasTextMetrics._measurementCache.get(textKey);\n    }\n    const font = fontStringFromTextStyle(style);\n    const fontProperties = _CanvasTextMetrics.measureFont(font);\n    if (fontProperties.fontSize === 0) {\n      fontProperties.fontSize = style.fontSize;\n      fontProperties.ascent = style.fontSize;\n    }\n    const context = _CanvasTextMetrics.__context;\n    context.font = font;\n    const outputText = wordWrap ? _CanvasTextMetrics._wordWrap(text, style, canvas) : text;\n    const lines = outputText.split(/(?:\\r\\n|\\r|\\n)/);\n    const lineWidths = new Array(lines.length);\n    let maxLineWidth = 0;\n    for (let i = 0; i < lines.length; i++) {\n      const lineWidth = _CanvasTextMetrics._measureText(lines[i], style.letterSpacing, context);\n      lineWidths[i] = lineWidth;\n      maxLineWidth = Math.max(maxLineWidth, lineWidth);\n    }\n    const strokeWidth = style._stroke?.width || 0;\n    let width = maxLineWidth + strokeWidth;\n    if (style.dropShadow) {\n      width += style.dropShadow.distance;\n    }\n    const lineHeight = style.lineHeight || fontProperties.fontSize;\n    let height = Math.max(lineHeight, fontProperties.fontSize + strokeWidth) + (lines.length - 1) * (lineHeight + style.leading);\n    if (style.dropShadow) {\n      height += style.dropShadow.distance;\n    }\n    const measurements = new _CanvasTextMetrics(\n      text,\n      style,\n      width,\n      height,\n      lines,\n      lineWidths,\n      lineHeight + style.leading,\n      maxLineWidth,\n      fontProperties\n    );\n    _CanvasTextMetrics._measurementCache.set(textKey, measurements);\n    return measurements;\n  }\n  static _measureText(text, letterSpacing, context) {\n    let useExperimentalLetterSpacing = false;\n    if (_CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (_CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    const metrics = context.measureText(text);\n    let metricWidth = metrics.width;\n    const actualBoundingBoxLeft = -metrics.actualBoundingBoxLeft;\n    const actualBoundingBoxRight = metrics.actualBoundingBoxRight;\n    let boundsWidth = actualBoundingBoxRight - actualBoundingBoxLeft;\n    if (metricWidth > 0) {\n      if (useExperimentalLetterSpacing) {\n        metricWidth -= letterSpacing;\n        boundsWidth -= letterSpacing;\n      } else {\n        const val = (_CanvasTextMetrics.graphemeSegmenter(text).length - 1) * letterSpacing;\n        metricWidth += val;\n        boundsWidth += val;\n      }\n    }\n    return Math.max(metricWidth, boundsWidth);\n  }\n  /**\n   * Applies newlines to a string to have it optimally fit into the horizontal\n   * bounds set by the Text object's wordWrapWidth property.\n   * @param text - String to apply word wrapping to\n   * @param style - the style to use when wrapping\n   * @param canvas - optional specification of the canvas to use for measuring.\n   * @returns New string with new lines applied where required\n   */\n  static _wordWrap(text, style, canvas = _CanvasTextMetrics._canvas) {\n    const context = canvas.getContext(\"2d\", contextSettings);\n    let width = 0;\n    let line = \"\";\n    let lines = \"\";\n    const cache = /* @__PURE__ */ Object.create(null);\n    const { letterSpacing, whiteSpace } = style;\n    const collapseSpaces = _CanvasTextMetrics._collapseSpaces(whiteSpace);\n    const collapseNewlines = _CanvasTextMetrics._collapseNewlines(whiteSpace);\n    let canPrependSpaces = !collapseSpaces;\n    const wordWrapWidth = style.wordWrapWidth + letterSpacing;\n    const tokens = _CanvasTextMetrics._tokenize(text);\n    for (let i = 0; i < tokens.length; i++) {\n      let token = tokens[i];\n      if (_CanvasTextMetrics._isNewline(token)) {\n        if (!collapseNewlines) {\n          lines += _CanvasTextMetrics._addLine(line);\n          canPrependSpaces = !collapseSpaces;\n          line = \"\";\n          width = 0;\n          continue;\n        }\n        token = \" \";\n      }\n      if (collapseSpaces) {\n        const currIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(token);\n        const lastIsBreakingSpace = _CanvasTextMetrics.isBreakingSpace(line[line.length - 1]);\n        if (currIsBreakingSpace && lastIsBreakingSpace) {\n          continue;\n        }\n      }\n      const tokenWidth = _CanvasTextMetrics._getFromCache(token, letterSpacing, cache, context);\n      if (tokenWidth > wordWrapWidth) {\n        if (line !== \"\") {\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (_CanvasTextMetrics.canBreakWords(token, style.breakWords)) {\n          const characters = _CanvasTextMetrics.wordWrapSplit(token);\n          for (let j = 0; j < characters.length; j++) {\n            let char = characters[j];\n            let lastChar = char;\n            let k = 1;\n            while (characters[j + k]) {\n              const nextChar = characters[j + k];\n              if (!_CanvasTextMetrics.canBreakChars(lastChar, nextChar, token, j, style.breakWords)) {\n                char += nextChar;\n              } else {\n                break;\n              }\n              lastChar = nextChar;\n              k++;\n            }\n            j += k - 1;\n            const characterWidth = _CanvasTextMetrics._getFromCache(char, letterSpacing, cache, context);\n            if (characterWidth + width > wordWrapWidth) {\n              lines += _CanvasTextMetrics._addLine(line);\n              canPrependSpaces = false;\n              line = \"\";\n              width = 0;\n            }\n            line += char;\n            width += characterWidth;\n          }\n        } else {\n          if (line.length > 0) {\n            lines += _CanvasTextMetrics._addLine(line);\n            line = \"\";\n            width = 0;\n          }\n          const isLastToken = i === tokens.length - 1;\n          lines += _CanvasTextMetrics._addLine(token, !isLastToken);\n          canPrependSpaces = false;\n          line = \"\";\n          width = 0;\n        }\n      } else {\n        if (tokenWidth + width > wordWrapWidth) {\n          canPrependSpaces = false;\n          lines += _CanvasTextMetrics._addLine(line);\n          line = \"\";\n          width = 0;\n        }\n        if (line.length > 0 || !_CanvasTextMetrics.isBreakingSpace(token) || canPrependSpaces) {\n          line += token;\n          width += tokenWidth;\n        }\n      }\n    }\n    lines += _CanvasTextMetrics._addLine(line, false);\n    return lines;\n  }\n  /**\n   * Convenience function for logging each line added during the wordWrap method.\n   * @param line    - The line of text to add\n   * @param newLine - Add new line character to end\n   * @returns A formatted line\n   */\n  static _addLine(line, newLine = true) {\n    line = _CanvasTextMetrics._trimRight(line);\n    line = newLine ? `${line}\n` : line;\n    return line;\n  }\n  /**\n   * Gets & sets the widths of calculated characters in a cache object\n   * @param key            - The key\n   * @param letterSpacing  - The letter spacing\n   * @param cache          - The cache\n   * @param context        - The canvas context\n   * @returns The from cache.\n   */\n  static _getFromCache(key, letterSpacing, cache, context) {\n    let width = cache[key];\n    if (typeof width !== \"number\") {\n      width = _CanvasTextMetrics._measureText(key, letterSpacing, context) + letterSpacing;\n      cache[key] = width;\n    }\n    return width;\n  }\n  /**\n   * Determines whether we should collapse breaking spaces.\n   * @param whiteSpace - The TextStyle property whiteSpace\n   * @returns Should collapse\n   */\n  static _collapseSpaces(whiteSpace) {\n    return whiteSpace === \"normal\" || whiteSpace === \"pre-line\";\n  }\n  /**\n   * Determines whether we should collapse newLine chars.\n   * @param whiteSpace - The white space\n   * @returns should collapse\n   */\n  static _collapseNewlines(whiteSpace) {\n    return whiteSpace === \"normal\";\n  }\n  /**\n   * Trims breaking whitespaces from string.\n   * @param text - The text\n   * @returns Trimmed string\n   */\n  static _trimRight(text) {\n    if (typeof text !== \"string\") {\n      return \"\";\n    }\n    for (let i = text.length - 1; i >= 0; i--) {\n      const char = text[i];\n      if (!_CanvasTextMetrics.isBreakingSpace(char)) {\n        break;\n      }\n      text = text.slice(0, -1);\n    }\n    return text;\n  }\n  /**\n   * Determines if char is a newline.\n   * @param char - The character\n   * @returns True if newline, False otherwise.\n   */\n  static _isNewline(char) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._newlines.includes(char.charCodeAt(0));\n  }\n  /**\n   * Determines if char is a breaking whitespace.\n   *\n   * It allows one to determine whether char should be a breaking whitespace\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param char - The character\n   * @param [_nextChar] - The next character\n   * @returns True if whitespace, False otherwise.\n   */\n  static isBreakingSpace(char, _nextChar) {\n    if (typeof char !== \"string\") {\n      return false;\n    }\n    return _CanvasTextMetrics._breakingSpaces.includes(char.charCodeAt(0));\n  }\n  /**\n   * Splits a string into words, breaking-spaces and newLine characters\n   * @param text - The text\n   * @returns A tokenized array\n   */\n  static _tokenize(text) {\n    const tokens = [];\n    let token = \"\";\n    if (typeof text !== \"string\") {\n      return tokens;\n    }\n    for (let i = 0; i < text.length; i++) {\n      const char = text[i];\n      const nextChar = text[i + 1];\n      if (_CanvasTextMetrics.isBreakingSpace(char, nextChar) || _CanvasTextMetrics._isNewline(char)) {\n        if (token !== \"\") {\n          tokens.push(token);\n          token = \"\";\n        }\n        if (char === \"\\r\" && nextChar === \"\\n\") {\n          tokens.push(\"\\r\\n\");\n          i++;\n        } else {\n          tokens.push(char);\n        }\n        continue;\n      }\n      token += char;\n    }\n    if (token !== \"\") {\n      tokens.push(token);\n    }\n    return tokens;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to customise which words should break\n   * Examples are if the token is CJK or numbers.\n   * It must return a boolean.\n   * @param _token - The token\n   * @param breakWords - The style attr break words\n   * @returns Whether to break word or not\n   */\n  static canBreakWords(_token, breakWords) {\n    return breakWords;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It allows one to determine whether a pair of characters\n   * should be broken by newlines\n   * For example certain characters in CJK langs or numbers.\n   * It must return a boolean.\n   * @param _char - The character\n   * @param _nextChar - The next character\n   * @param _token - The token/word the characters are from\n   * @param _index - The index in the token of the char\n   * @param _breakWords - The style attr break words\n   * @returns whether to break word or not\n   */\n  static canBreakChars(_char, _nextChar, _token, _index, _breakWords) {\n    return true;\n  }\n  /**\n   * Overridable helper method used internally by TextMetrics, exposed to allow customizing the class's behavior.\n   *\n   * It is called when a token (usually a word) has to be split into separate pieces\n   * in order to determine the point to break a word.\n   * It must return an array of characters.\n   * @param token - The token to split\n   * @returns The characters of the token\n   * @see CanvasTextMetrics.graphemeSegmenter\n   */\n  static wordWrapSplit(token) {\n    return _CanvasTextMetrics.graphemeSegmenter(token);\n  }\n  /**\n   * Calculates the ascent, descent and fontSize of a given font-style\n   * @param font - String representing the style of the font\n   * @returns Font properties object\n   */\n  static measureFont(font) {\n    if (_CanvasTextMetrics._fonts[font]) {\n      return _CanvasTextMetrics._fonts[font];\n    }\n    const context = _CanvasTextMetrics._context;\n    context.font = font;\n    const metrics = context.measureText(_CanvasTextMetrics.METRICS_STRING + _CanvasTextMetrics.BASELINE_SYMBOL);\n    const properties = {\n      ascent: metrics.actualBoundingBoxAscent,\n      descent: metrics.actualBoundingBoxDescent,\n      fontSize: metrics.actualBoundingBoxAscent + metrics.actualBoundingBoxDescent\n    };\n    _CanvasTextMetrics._fonts[font] = properties;\n    return properties;\n  }\n  /**\n   * Clear font metrics in metrics cache.\n   * @param {string} [font] - font name. If font name not set then clear cache for all fonts.\n   */\n  static clearMetrics(font = \"\") {\n    if (font) {\n      delete _CanvasTextMetrics._fonts[font];\n    } else {\n      _CanvasTextMetrics._fonts = {};\n    }\n  }\n  /**\n   * Cached canvas element for measuring text\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _canvas() {\n    if (!_CanvasTextMetrics.__canvas) {\n      let canvas;\n      try {\n        const c = new OffscreenCanvas(0, 0);\n        const context = c.getContext(\"2d\", contextSettings);\n        if (context?.measureText) {\n          _CanvasTextMetrics.__canvas = c;\n          return c;\n        }\n        canvas = DOMAdapter.get().createCanvas();\n      } catch (_cx) {\n        canvas = DOMAdapter.get().createCanvas();\n      }\n      canvas.width = canvas.height = 10;\n      _CanvasTextMetrics.__canvas = canvas;\n    }\n    return _CanvasTextMetrics.__canvas;\n  }\n  /**\n   * TODO: this should be private, but isn't because of backward compat, will fix later.\n   * @ignore\n   */\n  static get _context() {\n    if (!_CanvasTextMetrics.__context) {\n      _CanvasTextMetrics.__context = _CanvasTextMetrics._canvas.getContext(\"2d\", contextSettings);\n    }\n    return _CanvasTextMetrics.__context;\n  }\n};\n/**\n * String used for calculate font metrics.\n * These characters are all tall to help calculate the height required for text.\n */\n_CanvasTextMetrics.METRICS_STRING = \"|\\xC9q\\xC5\";\n/** Baseline symbol for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_SYMBOL = \"M\";\n/** Baseline multiplier for calculate font metrics. */\n_CanvasTextMetrics.BASELINE_MULTIPLIER = 1.4;\n/** Height multiplier for setting height of canvas to calculate font metrics. */\n_CanvasTextMetrics.HEIGHT_MULTIPLIER = 2;\n/**\n * A Unicode \"character\", or \"grapheme cluster\", can be composed of multiple Unicode code points,\n * such as letters with diacritical marks (e.g. `'\\u0065\\u0301'`, letter e with acute)\n * or emojis with modifiers (e.g. `'\\uD83E\\uDDD1\\u200D\\uD83D\\uDCBB'`, technologist).\n * The new `Intl.Segmenter` API in ES2022 can split the string into grapheme clusters correctly. If it is not available,\n * PixiJS will fallback to use the iterator of String, which can only spilt the string into code points.\n * If you want to get full functionality in environments that don't support `Intl.Segmenter` (such as Firefox),\n * you can use other libraries such as [grapheme-splitter]{@link https://www.npmjs.com/package/grapheme-splitter}\n * or [graphemer]{@link https://www.npmjs.com/package/graphemer} to create a polyfill. Since these libraries can be\n * relatively large in size to handle various Unicode grapheme clusters properly, PixiJS won't use them directly.\n */\n_CanvasTextMetrics.graphemeSegmenter = (() => {\n  if (typeof Intl?.Segmenter === \"function\") {\n    const segmenter = new Intl.Segmenter();\n    return (s) => {\n      const segments = segmenter.segment(s);\n      const result = [];\n      let i = 0;\n      for (const segment of segments) {\n        result[i++] = segment.segment;\n      }\n      return result;\n    };\n  }\n  return (s) => [...s];\n})();\n/**\n * New rendering behavior for letter-spacing which uses Chrome's new native API. This will\n * lead to more accurate letter-spacing results because it does not try to manually draw\n * each character. However, this Chrome API is experimental and may not serve all cases yet.\n * @see TextMetrics.experimentalLetterSpacingSupported\n */\n_CanvasTextMetrics.experimentalLetterSpacing = false;\n/** Cache of {@link TextMetrics.FontMetrics} objects. */\n_CanvasTextMetrics._fonts = {};\n/** Cache of new line chars. */\n_CanvasTextMetrics._newlines = [\n  10,\n  // line feed\n  13\n  // carriage return\n];\n/** Cache of breaking spaces. */\n_CanvasTextMetrics._breakingSpaces = [\n  9,\n  // character tabulation\n  32,\n  // space\n  8192,\n  // en quad\n  8193,\n  // em quad\n  8194,\n  // en space\n  8195,\n  // em space\n  8196,\n  // three-per-em space\n  8197,\n  // four-per-em space\n  8198,\n  // six-per-em space\n  8200,\n  // punctuation space\n  8201,\n  // thin space\n  8202,\n  // hair space\n  8287,\n  // medium mathematical space\n  12288\n  // ideographic space\n];\n/** Cache for measured text metrics */\n_CanvasTextMetrics._measurementCache = lru(1e3);\nlet CanvasTextMetrics = _CanvasTextMetrics;\n\nexport { CanvasTextMetrics };\n//# sourceMappingURL=CanvasTextMetrics.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass BufferImageSource extends TextureSource {\n  constructor(options) {\n    const buffer = options.resource || new Float32Array(options.width * options.height * 4);\n    let format = options.format;\n    if (!format) {\n      if (buffer instanceof Float32Array) {\n        format = \"rgba32float\";\n      } else if (buffer instanceof Int32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Uint32Array) {\n        format = \"rgba32uint\";\n      } else if (buffer instanceof Int16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Uint16Array) {\n        format = \"rgba16uint\";\n      } else if (buffer instanceof Int8Array) {\n        format = \"bgra8unorm\";\n      } else {\n        format = \"bgra8unorm\";\n      }\n    }\n    super({\n      ...options,\n      resource: buffer,\n      format\n    });\n    this.uploadMethodId = \"buffer\";\n  }\n  static test(resource) {\n    return resource instanceof Int8Array || resource instanceof Uint8Array || resource instanceof Uint8ClampedArray || resource instanceof Int16Array || resource instanceof Uint16Array || resource instanceof Int32Array || resource instanceof Uint32Array || resource instanceof Float32Array;\n  }\n}\nBufferImageSource.extension = ExtensionType.TextureSource;\n\nexport { BufferImageSource };\n//# sourceMappingURL=BufferImageSource.mjs.map\n","\"use strict\";\nvar UPDATE_PRIORITY = /* @__PURE__ */ ((UPDATE_PRIORITY2) => {\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"INTERACTION\"] = 50] = \"INTERACTION\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"HIGH\"] = 25] = \"HIGH\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"NORMAL\"] = 0] = \"NORMAL\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"LOW\"] = -25] = \"LOW\";\n  UPDATE_PRIORITY2[UPDATE_PRIORITY2[\"UTILITY\"] = -50] = \"UTILITY\";\n  return UPDATE_PRIORITY2;\n})(UPDATE_PRIORITY || {});\n\nexport { UPDATE_PRIORITY };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nconst colorBit = {\n  name: \"color-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            @in aColor: vec4<f32>;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= vec4<f32>(aColor.rgb * aColor.a, aColor.a);\n        `\n    )\n  }\n};\nconst colorBitGl = {\n  name: \"color-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            in vec4 aColor;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= vec4(aColor.rgb * aColor.a, aColor.a);\n        `\n    )\n  }\n};\n\nexport { colorBit, colorBitGl };\n//# sourceMappingURL=colorBit.mjs.map\n","// data should be the same type of format returned by parseMidi\n// for maximum compatibililty, returns an array of byte values, suitable for conversion to Buffer, Uint8Array, etc.\n\n// opts:\n// - running              reuse previous eventTypeByte when possible, to compress file\n// - useByte9ForNoteOff   use 0x09 for noteOff when velocity is zero\n\nfunction writeMidi(data, opts) {\n  if (typeof data !== 'object')\n    throw 'Invalid MIDI data'\n\n  opts = opts || {}\n\n  var header = data.header || {}\n  var tracks = data.tracks || []\n  var i, len = tracks.length\n\n  var w = new Writer()\n  writeHeader(w, header, len)\n\n  for (i=0; i < len; i++) {\n    writeTrack(w, tracks[i], opts)\n  }\n\n  return w.buffer\n}\n\nfunction writeHeader(w, header, numTracks) {\n  var format = header.format == null ? 1 : header.format\n\n  var timeDivision = 128\n  if (header.timeDivision) {\n    timeDivision = header.timeDivision\n  } else if (header.ticksPerFrame && header.framesPerSecond) {\n    timeDivision = (-(header.framesPerSecond & 0xFF) << 8) | (header.ticksPerFrame & 0xFF)\n  } else if (header.ticksPerBeat) {\n    timeDivision = header.ticksPerBeat & 0x7FFF\n  }\n\n  var h = new Writer()\n  h.writeUInt16(format)\n  h.writeUInt16(numTracks)\n  h.writeUInt16(timeDivision)\n\n  w.writeChunk('MThd', h.buffer)\n}\n\nfunction writeTrack(w, track, opts) {\n  var t = new Writer()\n  var i, len = track.length\n  var eventTypeByte = null\n  for (i=0; i < len; i++) {\n    // Reuse last eventTypeByte when opts.running is set, or event.running is explicitly set on it.\n    // parseMidi will set event.running for each event, so that we can get an exact copy by default.\n    // Explicitly set opts.running to false, to override event.running and never reuse last eventTypeByte.\n    if (opts.running === false || !opts.running && !track[i].running) eventTypeByte = null\n\n    eventTypeByte = writeEvent(t, track[i], eventTypeByte, opts.useByte9ForNoteOff)\n  }\n  w.writeChunk('MTrk', t.buffer)\n}\n\nfunction writeEvent(w, event, lastEventTypeByte, useByte9ForNoteOff) {\n  var type = event.type\n  var deltaTime = event.deltaTime\n  var text = event.text || ''\n  var data = event.data || []\n  var eventTypeByte = null\n  w.writeVarInt(deltaTime)\n\n  switch (type) {\n    // meta events\n    case 'sequenceNumber':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x00)\n      w.writeVarInt(2)\n      w.writeUInt16(event.number)\n      break;\n\n    case 'text':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x01)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'copyrightNotice':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x02)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'trackName':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x03)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'instrumentName':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x04)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'lyrics':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x05)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'marker':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x06)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'cuePoint':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x07)\n      w.writeVarInt(text.length)\n      w.writeString(text)\n      break;\n\n    case 'channelPrefix':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x20)\n      w.writeVarInt(1)\n      w.writeUInt8(event.channel)\n      break;\n\n    case 'portPrefix':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x21)\n      w.writeVarInt(1)\n      w.writeUInt8(event.port)\n      break;\n\n    case 'endOfTrack':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x2F)\n      w.writeVarInt(0)\n      break;\n\n    case 'setTempo':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x51)\n      w.writeVarInt(3)\n      w.writeUInt24(event.microsecondsPerBeat)\n      break;\n\n    case 'smpteOffset':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x54)\n      w.writeVarInt(5)\n      var FRAME_RATES = { 24: 0x00, 25: 0x20, 29: 0x40, 30: 0x60 }\n      var hourByte = (event.hour & 0x1F) | FRAME_RATES[event.frameRate]\n      w.writeUInt8(hourByte)\n      w.writeUInt8(event.min)\n      w.writeUInt8(event.sec)\n      w.writeUInt8(event.frame)\n      w.writeUInt8(event.subFrame)\n      break;\n\n    case 'timeSignature':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x58)\n      w.writeVarInt(4)\n      w.writeUInt8(event.numerator)\n      var denominator = Math.floor((Math.log(event.denominator) / Math.LN2)) & 0xFF\n      w.writeUInt8(denominator)\n      w.writeUInt8(event.metronome)\n      w.writeUInt8(event.thirtyseconds || 8)\n      break;\n\n    case 'keySignature':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x59)\n      w.writeVarInt(2)\n      w.writeInt8(event.key)\n      w.writeUInt8(event.scale)\n      break;\n\n    case 'sequencerSpecific':\n      w.writeUInt8(0xFF)\n      w.writeUInt8(0x7F)\n      w.writeVarInt(data.length)\n      w.writeBytes(data)\n      break;\n\n    case 'unknownMeta':\n      if (event.metatypeByte != null) {\n        w.writeUInt8(0xFF)\n        w.writeUInt8(event.metatypeByte)\n        w.writeVarInt(data.length)\n        w.writeBytes(data)\n      }\n      break;\n\n    // system-exclusive\n    case 'sysEx':\n      w.writeUInt8(0xF0)\n      w.writeVarInt(data.length)\n      w.writeBytes(data)\n      break;\n\n    case 'endSysEx':\n      w.writeUInt8(0xF7)\n      w.writeVarInt(data.length)\n      w.writeBytes(data)\n      break;\n\n    // channel events\n    case 'noteOff':\n      // Use 0x90 when opts.useByte9ForNoteOff is set and velocity is zero, or when event.byte9 is explicitly set on it.\n      // parseMidi will set event.byte9 for each event, so that we can get an exact copy by default.\n      // Explicitly set opts.useByte9ForNoteOff to false, to override event.byte9 and always use 0x80 for noteOff events.\n      var noteByte = ((useByte9ForNoteOff !== false && event.byte9) || (useByte9ForNoteOff && event.velocity == 0)) ? 0x90 : 0x80\n\n      eventTypeByte = noteByte | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.noteNumber)\n      w.writeUInt8(event.velocity)\n      break;\n\n    case 'noteOn':\n      eventTypeByte = 0x90 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.noteNumber)\n      w.writeUInt8(event.velocity)\n      break;\n\n    case 'noteAftertouch':\n      eventTypeByte = 0xA0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.noteNumber)\n      w.writeUInt8(event.amount)\n      break;\n\n    case 'controller':\n      eventTypeByte = 0xB0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.controllerType)\n      w.writeUInt8(event.value)\n      break;\n\n    case 'programChange':\n      eventTypeByte = 0xC0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.programNumber)\n      break;\n\n    case 'channelAftertouch':\n      eventTypeByte = 0xD0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      w.writeUInt8(event.amount)\n      break;\n\n    case 'pitchBend':\n      eventTypeByte = 0xE0 | event.channel\n      if (eventTypeByte !== lastEventTypeByte) w.writeUInt8(eventTypeByte)\n      var value14 = 0x2000 + event.value\n      var lsb14 = (value14 & 0x7F)\n      var msb14 = (value14 >> 7) & 0x7F\n      w.writeUInt8(lsb14)\n      w.writeUInt8(msb14)\n    break;\n\n    default:\n      throw 'Unrecognized event type: ' + type\n  }\n  return eventTypeByte\n}\n\n\nfunction Writer() {\n  this.buffer = []\n}\n\nWriter.prototype.writeUInt8 = function(v) {\n  this.buffer.push(v & 0xFF)\n}\nWriter.prototype.writeInt8 = Writer.prototype.writeUInt8\n\nWriter.prototype.writeUInt16 = function(v) {\n  var b0 = (v >> 8) & 0xFF,\n      b1 = v & 0xFF\n\n  this.writeUInt8(b0)\n  this.writeUInt8(b1)\n}\nWriter.prototype.writeInt16 = Writer.prototype.writeUInt16\n\nWriter.prototype.writeUInt24 = function(v) {\n  var b0 = (v >> 16) & 0xFF,\n      b1 = (v >> 8) & 0xFF,\n      b2 = v & 0xFF\n\n  this.writeUInt8(b0)\n  this.writeUInt8(b1)\n  this.writeUInt8(b2)\n}\nWriter.prototype.writeInt24 = Writer.prototype.writeUInt24\n\nWriter.prototype.writeUInt32 = function(v) {\n  var b0 = (v >> 24) & 0xFF,\n      b1 = (v >> 16) & 0xFF,\n      b2 = (v >> 8) & 0xFF,\n      b3 = v & 0xFF\n\n  this.writeUInt8(b0)\n  this.writeUInt8(b1)\n  this.writeUInt8(b2)\n  this.writeUInt8(b3)\n}\nWriter.prototype.writeInt32 = Writer.prototype.writeUInt32\n\n\nWriter.prototype.writeBytes = function(arr) {\n  this.buffer = this.buffer.concat(Array.prototype.slice.call(arr, 0))\n}\n\nWriter.prototype.writeString = function(str) {\n  var i, len = str.length, arr = []\n  for (i=0; i < len; i++) {\n    arr.push(str.codePointAt(i))\n  }\n  this.writeBytes(arr)\n}\n\nWriter.prototype.writeVarInt = function(v) {\n  if (v < 0) throw \"Cannot write negative variable-length integer\"\n\n  if (v <= 0x7F) {\n    this.writeUInt8(v)\n  } else {\n    var i = v\n    var bytes = []\n    bytes.push(i & 0x7F)\n    i >>= 7\n    while (i) {\n      var b = i & 0x7F | 0x80\n      bytes.push(b)\n      i >>= 7\n    }\n    this.writeBytes(bytes.reverse())\n  }\n}\n\nWriter.prototype.writeChunk = function(id, data) {\n  this.writeString(id)\n  this.writeUInt32(data.length)\n  this.writeBytes(data)\n}\n\nmodule.exports = writeMidi\n","\"use strict\";\nlet unsafeEval;\nfunction unsafeEvalSupported() {\n  if (typeof unsafeEval === \"boolean\") {\n    return unsafeEval;\n  }\n  try {\n    const func = new Function(\"param1\", \"param2\", \"param3\", \"return param1[param2] === param3;\");\n    unsafeEval = func({ a: \"b\" }, \"a\", \"b\") === true;\n  } catch (_e) {\n    unsafeEval = false;\n  }\n  return unsafeEval;\n}\n\nexport { unsafeEvalSupported };\n//# sourceMappingURL=unsafeEvalSupported.mjs.map\n","var toPropertyKey = require(\"./toPropertyKey.js\");\nfunction _defineProperties(e, r) {\n  for (var t = 0; t < r.length; t++) {\n    var o = r[t];\n    o.enumerable = o.enumerable || !1, o.configurable = !0, \"value\" in o && (o.writable = !0), Object.defineProperty(e, toPropertyKey(o.key), o);\n  }\n}\nfunction _createClass(e, r, t) {\n  return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, \"prototype\", {\n    writable: !1\n  }), e;\n}\nmodule.exports = _createClass, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nvar LoaderParserPriority = /* @__PURE__ */ ((LoaderParserPriority2) => {\n  LoaderParserPriority2[LoaderParserPriority2[\"Low\"] = 0] = \"Low\";\n  LoaderParserPriority2[LoaderParserPriority2[\"Normal\"] = 1] = \"Normal\";\n  LoaderParserPriority2[LoaderParserPriority2[\"High\"] = 2] = \"High\";\n  return LoaderParserPriority2;\n})(LoaderParserPriority || {});\n\nexport { LoaderParserPriority };\n//# sourceMappingURL=LoaderParser.mjs.map\n","\"use strict\";\nconst warnings = /* @__PURE__ */ new Set();\nconst v8_0_0 = \"8.0.0\";\nconst v8_3_4 = \"8.3.4\";\nconst deprecationState = {\n  quiet: false,\n  noColor: false\n};\nconst deprecation = (version, message, ignoreDepth = 3) => {\n  if (deprecationState.quiet || warnings.has(message))\n    return;\n  let stack = new Error().stack;\n  const deprecationMessage = `${message}\nDeprecated since v${version}`;\n  const useGroup = typeof console.groupCollapsed === \"function\" && !deprecationState.noColor;\n  if (typeof stack === \"undefined\") {\n    console.warn(\"PixiJS Deprecation Warning: \", deprecationMessage);\n  } else {\n    stack = stack.split(\"\\n\").splice(ignoreDepth).join(\"\\n\");\n    if (useGroup) {\n      console.groupCollapsed(\n        \"%cPixiJS Deprecation Warning: %c%s\",\n        \"color:#614108;background:#fffbe6\",\n        \"font-weight:normal;color:#614108;background:#fffbe6\",\n        deprecationMessage\n      );\n      console.warn(stack);\n      console.groupEnd();\n    } else {\n      console.warn(\"PixiJS Deprecation Warning: \", deprecationMessage);\n      console.warn(stack);\n    }\n  }\n  warnings.add(message);\n};\nObject.defineProperties(deprecation, {\n  quiet: {\n    get: () => deprecationState.quiet,\n    set: (value) => {\n      deprecationState.quiet = value;\n    },\n    enumerable: true,\n    configurable: false\n  },\n  noColor: {\n    get: () => deprecationState.noColor,\n    set: (value) => {\n      deprecationState.noColor = value;\n    },\n    enumerable: true,\n    configurable: false\n  }\n});\n\nexport { deprecation, v8_0_0, v8_3_4 };\n//# sourceMappingURL=deprecation.mjs.map\n","\"use strict\";\nfunction multiplyHexColors(color1, color2) {\n  if (color1 === 16777215 || !color2)\n    return color2;\n  if (color2 === 16777215 || !color1)\n    return color1;\n  const r1 = color1 >> 16 & 255;\n  const g1 = color1 >> 8 & 255;\n  const b1 = color1 & 255;\n  const r2 = color2 >> 16 & 255;\n  const g2 = color2 >> 8 & 255;\n  const b2 = color2 & 255;\n  const r = r1 * r2 / 255 | 0;\n  const g = g1 * g2 / 255 | 0;\n  const b = b1 * b2 / 255 | 0;\n  return (r << 16) + (g << 8) + b;\n}\n\nexport { multiplyHexColors };\n//# sourceMappingURL=multiplyHexColors.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ResizePlugin {\n  /**\n   * Initialize the plugin with scope of application instance\n   * @private\n   * @param {object} [options] - See application options\n   */\n  static init(options) {\n    Object.defineProperty(\n      this,\n      \"resizeTo\",\n      {\n        configurable: true,\n        set(dom) {\n          globalThis.removeEventListener(\"resize\", this.queueResize);\n          this._resizeTo = dom;\n          if (dom) {\n            globalThis.addEventListener(\"resize\", this.queueResize);\n            this.resize();\n          }\n        },\n        get() {\n          return this._resizeTo;\n        }\n      }\n    );\n    this.queueResize = () => {\n      if (!this._resizeTo) {\n        return;\n      }\n      this._cancelResize();\n      this._resizeId = requestAnimationFrame(() => this.resize());\n    };\n    this._cancelResize = () => {\n      if (this._resizeId) {\n        cancelAnimationFrame(this._resizeId);\n        this._resizeId = null;\n      }\n    };\n    this.resize = () => {\n      if (!this._resizeTo) {\n        return;\n      }\n      this._cancelResize();\n      let width;\n      let height;\n      if (this._resizeTo === globalThis.window) {\n        width = globalThis.innerWidth;\n        height = globalThis.innerHeight;\n      } else {\n        const { clientWidth, clientHeight } = this._resizeTo;\n        width = clientWidth;\n        height = clientHeight;\n      }\n      this.renderer.resize(width, height);\n      this.render();\n    };\n    this._resizeId = null;\n    this._resizeTo = null;\n    this.resizeTo = options.resizeTo || null;\n  }\n  /**\n   * Clean up the ticker, scoped to application\n   * @private\n   */\n  static destroy() {\n    globalThis.removeEventListener(\"resize\", this.queueResize);\n    this._cancelResize();\n    this._cancelResize = null;\n    this.queueResize = null;\n    this.resizeTo = null;\n    this.resize = null;\n  }\n}\n/** @ignore */\nResizePlugin.extension = ExtensionType.Application;\n\nexport { ResizePlugin };\n//# sourceMappingURL=ResizePlugin.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\nimport { UPDATE_PRIORITY } from '../ticker/const.mjs';\nimport { Ticker } from '../ticker/Ticker.mjs';\n\n\"use strict\";\nclass TickerPlugin {\n  /**\n   * Initialize the plugin with scope of application instance\n   * @private\n   * @param {object} [options] - See application options\n   */\n  static init(options) {\n    options = Object.assign({\n      autoStart: true,\n      sharedTicker: false\n    }, options);\n    Object.defineProperty(\n      this,\n      \"ticker\",\n      {\n        configurable: true,\n        set(ticker) {\n          if (this._ticker) {\n            this._ticker.remove(this.render, this);\n          }\n          this._ticker = ticker;\n          if (ticker) {\n            ticker.add(this.render, this, UPDATE_PRIORITY.LOW);\n          }\n        },\n        get() {\n          return this._ticker;\n        }\n      }\n    );\n    this.stop = () => {\n      this._ticker.stop();\n    };\n    this.start = () => {\n      this._ticker.start();\n    };\n    this._ticker = null;\n    this.ticker = options.sharedTicker ? Ticker.shared : new Ticker();\n    if (options.autoStart) {\n      this.start();\n    }\n  }\n  /**\n   * Clean up the ticker, scoped to application.\n   * @private\n   */\n  static destroy() {\n    if (this._ticker) {\n      const oldTicker = this._ticker;\n      this.ticker = null;\n      oldTicker.destroy();\n    }\n  }\n}\n/** @ignore */\nTickerPlugin.extension = ExtensionType.Application;\n\nexport { TickerPlugin };\n//# sourceMappingURL=TickerPlugin.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { ResizePlugin } from './ResizePlugin.mjs';\nimport { TickerPlugin } from './TickerPlugin.mjs';\n\n\"use strict\";\nextensions.add(ResizePlugin);\nextensions.add(TickerPlugin);\n//# sourceMappingURL=init.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass CanvasSource extends TextureSource {\n  constructor(options) {\n    if (!options.resource) {\n      options.resource = DOMAdapter.get().createCanvas();\n    }\n    if (!options.width) {\n      options.width = options.resource.width;\n      if (!options.autoDensity) {\n        options.width /= options.resolution;\n      }\n    }\n    if (!options.height) {\n      options.height = options.resource.height;\n      if (!options.autoDensity) {\n        options.height /= options.resolution;\n      }\n    }\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoDensity = options.autoDensity;\n    this.resizeCanvas();\n    this.transparent = !!options.transparent;\n  }\n  resizeCanvas() {\n    if (this.autoDensity && \"style\" in this.resource) {\n      this.resource.style.width = `${this.width}px`;\n      this.resource.style.height = `${this.height}px`;\n    }\n    if (this.resource.width !== this.pixelWidth || this.resource.height !== this.pixelHeight) {\n      this.resource.width = this.pixelWidth;\n      this.resource.height = this.pixelHeight;\n    }\n  }\n  resize(width = this.width, height = this.height, resolution = this._resolution) {\n    const didResize = super.resize(width, height, resolution);\n    if (didResize) {\n      this.resizeCanvas();\n    }\n    return didResize;\n  }\n  static test(resource) {\n    return globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement || globalThis.OffscreenCanvas && resource instanceof OffscreenCanvas;\n  }\n  /**\n   * Returns the 2D rendering context for the canvas.\n   * Caches the context after creating it.\n   * @returns The 2D rendering context of the canvas.\n   */\n  get context2D() {\n    return this._context2D || (this._context2D = this.resource.getContext(\"2d\"));\n  }\n}\nCanvasSource.extension = ExtensionType.TextureSource;\n\nexport { CanvasSource };\n//# sourceMappingURL=CanvasSource.mjs.map\n","import { Bounds } from '../container/bounds/Bounds.mjs';\nimport { Container } from '../container/Container.mjs';\n\n\"use strict\";\nclass ViewContainer extends Container {\n  // eslint-disable-next-line @typescript-eslint/no-useless-constructor\n  constructor(options) {\n    super(options);\n    /** @internal */\n    this.canBundle = true;\n    /** @internal */\n    this.allowChildren = false;\n    /** @internal */\n    this._roundPixels = 0;\n    /** @internal */\n    this._lastUsed = -1;\n    /** @internal */\n    this._gpuData = /* @__PURE__ */ Object.create(null);\n    this._bounds = new Bounds(0, 1, 0, 0);\n    this._boundsDirty = true;\n  }\n  /**\n   * The local bounds of the view in its own coordinate space.\n   * Bounds are automatically updated when the view's content changes.\n   * @example\n   * ```ts\n   * // Get bounds dimensions\n   * const bounds = view.bounds;\n   * console.log(`Width: ${bounds.maxX - bounds.minX}`);\n   * console.log(`Height: ${bounds.maxY - bounds.minY}`);\n   * ```\n   * @returns The rectangular bounds of the view\n   * @see {@link Bounds} For bounds operations\n   */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this.updateBounds();\n    this._boundsDirty = false;\n    return this._bounds;\n  }\n  /**\n   * Whether or not to round the x/y position of the sprite.\n   * @example\n   * ```ts\n   * // Enable pixel rounding for crisp rendering\n   * view.roundPixels = true;\n   * ```\n   * @default false\n   */\n  get roundPixels() {\n    return !!this._roundPixels;\n  }\n  set roundPixels(value) {\n    this._roundPixels = value ? 1 : 0;\n  }\n  /**\n   * Checks if the object contains the given point in local coordinates.\n   * Uses the view's bounds for hit testing.\n   * @example\n   * ```ts\n   * // Basic point check\n   * const localPoint = { x: 50, y: 25 };\n   * const contains = view.containsPoint(localPoint);\n   * console.log('Point is inside:', contains);\n   * ```\n   * @param point - The point to check in local coordinates\n   * @returns True if the point is within the view's bounds\n   * @see {@link ViewContainer#bounds} For the bounds used in hit testing\n   * @see {@link Container#toLocal} For converting global coordinates to local\n   */\n  containsPoint(point) {\n    const bounds = this.bounds;\n    const { x, y } = point;\n    return x >= bounds.minX && x <= bounds.maxX && y >= bounds.minY && y <= bounds.maxY;\n  }\n  /** @private */\n  onViewUpdate() {\n    this._didViewChangeTick++;\n    this._boundsDirty = true;\n    if (this.didViewUpdate)\n      return;\n    this.didViewUpdate = true;\n    const renderGroup = this.renderGroup || this.parentRenderGroup;\n    if (renderGroup) {\n      renderGroup.onChildViewUpdate(this);\n    }\n  }\n  destroy(options) {\n    super.destroy(options);\n    this._bounds = null;\n    for (const key in this._gpuData) {\n      this._gpuData[key].destroy?.();\n    }\n    this._gpuData = null;\n  }\n  /**\n   * Collects renderables for the view container.\n   * @param instructionSet - The instruction set to collect renderables for.\n   * @param renderer - The renderer to collect renderables for.\n   * @param currentLayer - The current render layer.\n   * @internal\n   */\n  collectRenderablesSimple(instructionSet, renderer, currentLayer) {\n    const { renderPipes } = renderer;\n    renderPipes.blendMode.pushBlendMode(this, this.groupBlendMode, instructionSet);\n    const rp = renderPipes;\n    rp[this.renderPipeId].addRenderable(this, instructionSet);\n    this.didViewUpdate = false;\n    const children = this.children;\n    const length = children.length;\n    for (let i = 0; i < length; i++) {\n      children[i].collectRenderables(instructionSet, renderer, currentLayer);\n    }\n    renderPipes.blendMode.popBlendMode(instructionSet);\n  }\n}\n\nexport { ViewContainer };\n//# sourceMappingURL=ViewContainer.mjs.map\n","import { Buffer } from '../../../rendering/renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../../rendering/renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst _MeshGeometry = class _MeshGeometry extends Geometry {\n  constructor(...args) {\n    let options = args[0] ?? {};\n    if (options instanceof Float32Array) {\n      deprecation(v8_0_0, \"use new MeshGeometry({ positions, uvs, indices }) instead\");\n      options = {\n        positions: options,\n        uvs: args[1],\n        indices: args[2]\n      };\n    }\n    options = { ..._MeshGeometry.defaultOptions, ...options };\n    const positions = options.positions || new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n    let uvs = options.uvs;\n    if (!uvs) {\n      if (options.positions) {\n        uvs = new Float32Array(positions.length);\n      } else {\n        uvs = new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]);\n      }\n    }\n    const indices = options.indices || new Uint32Array([0, 1, 2, 0, 2, 3]);\n    const shrinkToFit = options.shrinkBuffersToFit;\n    const positionBuffer = new Buffer({\n      data: positions,\n      label: \"attribute-mesh-positions\",\n      shrinkToFit,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    const uvBuffer = new Buffer({\n      data: uvs,\n      label: \"attribute-mesh-uvs\",\n      shrinkToFit,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    const indexBuffer = new Buffer({\n      data: indices,\n      label: \"index-mesh-buffer\",\n      shrinkToFit,\n      usage: BufferUsage.INDEX | BufferUsage.COPY_DST\n    });\n    super({\n      attributes: {\n        aPosition: {\n          buffer: positionBuffer,\n          format: \"float32x2\",\n          stride: 2 * 4,\n          offset: 0\n        },\n        aUV: {\n          buffer: uvBuffer,\n          format: \"float32x2\",\n          stride: 2 * 4,\n          offset: 0\n        }\n      },\n      indexBuffer,\n      topology: options.topology\n    });\n    this.batchMode = \"auto\";\n  }\n  /** The positions of the mesh. */\n  get positions() {\n    return this.attributes.aPosition.buffer.data;\n  }\n  /**\n   * Set the positions of the mesh.\n   * When setting the positions, its important that the uvs array is at least as long as the positions array.\n   * otherwise the geometry will not be valid.\n   * @param {Float32Array} value - The positions of the mesh.\n   */\n  set positions(value) {\n    this.attributes.aPosition.buffer.data = value;\n  }\n  /** The UVs of the mesh. */\n  get uvs() {\n    return this.attributes.aUV.buffer.data;\n  }\n  /**\n   * Set the UVs of the mesh.\n   * Its important that the uvs array you set is at least as long as the positions array.\n   * otherwise the geometry will not be valid.\n   * @param {Float32Array} value - The UVs of the mesh.\n   */\n  set uvs(value) {\n    this.attributes.aUV.buffer.data = value;\n  }\n  /** The indices of the mesh. */\n  get indices() {\n    return this.indexBuffer.data;\n  }\n  set indices(value) {\n    this.indexBuffer.data = value;\n  }\n};\n_MeshGeometry.defaultOptions = {\n  topology: \"triangle-list\",\n  shrinkBuffersToFit: false\n};\nlet MeshGeometry = _MeshGeometry;\n\nexport { MeshGeometry };\n//# sourceMappingURL=MeshGeometry.mjs.map\n","\"use strict\";\nvar RendererType = /* @__PURE__ */ ((RendererType2) => {\n  RendererType2[RendererType2[\"WEBGL\"] = 1] = \"WEBGL\";\n  RendererType2[RendererType2[\"WEBGPU\"] = 2] = \"WEBGPU\";\n  RendererType2[RendererType2[\"BOTH\"] = 3] = \"BOTH\";\n  return RendererType2;\n})(RendererType || {});\n\nexport { RendererType };\n//# sourceMappingURL=types.mjs.map\n","\"use strict\";\nclass Point {\n  /**\n   * Creates a new `Point`\n   * @param {number} [x=0] - position of the point on the x axis\n   * @param {number} [y=0] - position of the point on the y axis\n   */\n  constructor(x = 0, y = 0) {\n    /**\n     * Position of the point on the x axis\n     * @example\n     * ```ts\n     * // Set x position\n     * const point = new Point();\n     * point.x = 100;\n     *\n     * // Use in calculations\n     * const width = rightPoint.x - leftPoint.x;\n     * ```\n     */\n    this.x = 0;\n    /**\n     * Position of the point on the y axis\n     * @example\n     * ```ts\n     * // Set y position\n     * const point = new Point();\n     * point.y = 200;\n     *\n     * // Use in calculations\n     * const height = bottomPoint.y - topPoint.y;\n     * ```\n     */\n    this.y = 0;\n    this.x = x;\n    this.y = y;\n  }\n  /**\n   * Creates a clone of this point, which is a new instance with the same `x` and `y` values.\n   * @example\n   * ```ts\n   * // Basic point cloning\n   * const original = new Point(100, 200);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.set(300, 400);\n   *\n   * // Verify independence\n   * console.log(original); // Point(100, 200)\n   * console.log(modified); // Point(300, 400)\n   * ```\n   * @remarks\n   * - Creates new Point instance\n   * - Deep copies x and y values\n   * - Independent from original\n   * - Useful for preserving values\n   * @returns A clone of this point\n   * @see {@link Point.copyFrom} For copying into existing point\n   * @see {@link Point.copyTo} For copying to existing point\n   */\n  clone() {\n    return new Point(this.x, this.y);\n  }\n  /**\n   * Copies x and y from the given point into this point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Point(100, 200);\n   * const target = new Point();\n   * target.copyFrom(source);\n   *\n   * // Copy and chain operations\n   * const point = new Point()\n   *     .copyFrom(source)\n   *     .set(x + 50, y + 50);\n   *\n   * // Copy from any PointData\n   * const data = { x: 10, y: 20 };\n   * point.copyFrom(data);\n   * ```\n   * @param p - The point to copy from\n   * @returns The point instance itself\n   * @see {@link Point.copyTo} For copying to another point\n   * @see {@link Point.clone} For creating new point copy\n   */\n  copyFrom(p) {\n    this.set(p.x, p.y);\n    return this;\n  }\n  /**\n   * Copies this point's x and y into the given point.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Point(100, 200);\n   * const target = new Point();\n   * source.copyTo(target);\n   * ```\n   * @param p - The point to copy to. Can be any type that is or extends `PointLike`\n   * @returns The point (`p`) with values updated\n   * @see {@link Point.copyFrom} For copying from another point\n   * @see {@link Point.clone} For creating new point copy\n   */\n  copyTo(p) {\n    p.set(this.x, this.y);\n    return p;\n  }\n  /**\n   * Checks if another point is equal to this point.\n   *\n   * Compares x and y values using strict equality.\n   * @example\n   * ```ts\n   * // Basic equality check\n   * const p1 = new Point(100, 200);\n   * const p2 = new Point(100, 200);\n   * console.log(p1.equals(p2)); // true\n   *\n   * // Compare with PointData\n   * const data = { x: 100, y: 200 };\n   * console.log(p1.equals(data)); // true\n   *\n   * // Check different points\n   * const p3 = new Point(200, 300);\n   * console.log(p1.equals(p3)); // false\n   * ```\n   * @param p - The point to check\n   * @returns `true` if both `x` and `y` are equal\n   * @see {@link Point.copyFrom} For making points equal\n   * @see {@link PointData} For point data interface\n   */\n  equals(p) {\n    return p.x === this.x && p.y === this.y;\n  }\n  /**\n   * Sets the point to a new x and y position.\n   *\n   * If y is omitted, both x and y will be set to x.\n   * @example\n   * ```ts\n   * // Basic position setting\n   * const point = new Point();\n   * point.set(100, 200);\n   *\n   * // Set both x and y to same value\n   * point.set(50); // x=50, y=50\n   *\n   * // Chain with other operations\n   * point\n   *     .set(10, 20)\n   *     .copyTo(otherPoint);\n   * ```\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis, defaults to x\n   * @returns The point instance itself\n   * @see {@link Point.copyFrom} For copying from another point\n   * @see {@link Point.equals} For comparing positions\n   */\n  set(x = 0, y = x) {\n    this.x = x;\n    this.y = y;\n    return this;\n  }\n  toString() {\n    return `[pixi.js/math:Point x=${this.x} y=${this.y}]`;\n  }\n  /**\n   * A static Point object with `x` and `y` values of `0`.\n   *\n   * This shared instance is reset to zero values when accessed.\n   *\n   * > [!IMPORTANT] This point is shared and temporary. Do not store references to it.\n   * @example\n   * ```ts\n   * // Use for temporary calculations\n   * const tempPoint = Point.shared;\n   * tempPoint.set(100, 200);\n   * matrix.apply(tempPoint);\n   *\n   * // Will be reset to (0,0) on next access\n   * const fresh = Point.shared; // x=0, y=0\n   * ```\n   * @readonly\n   * @returns A fresh zeroed point for temporary use\n   * @see {@link Point.constructor} For creating new points\n   * @see {@link PointData} For basic point interface\n   */\n  static get shared() {\n    tempPoint.x = 0;\n    tempPoint.y = 0;\n    return tempPoint;\n  }\n}\nconst tempPoint = new Point();\n\nexport { Point };\n//# sourceMappingURL=Point.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { BindGroup } from '../../../rendering/renderers/gpu/shader/BindGroup.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { getAdjustedBlendModeBlend } from '../../../rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { color32BitToUniform } from '../../graphics/gpu/colorToUniform.mjs';\nimport { BatchableMesh } from './BatchableMesh.mjs';\n\n\"use strict\";\nclass MeshGpuData {\n  destroy() {\n  }\n}\nclass MeshPipe {\n  constructor(renderer, adaptor) {\n    this.localUniforms = new UniformGroup({\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    this.localUniformsBindGroup = new BindGroup({\n      0: this.localUniforms\n    });\n    this.renderer = renderer;\n    this._adaptor = adaptor;\n    this._adaptor.init();\n  }\n  validateRenderable(mesh) {\n    const meshData = this._getMeshData(mesh);\n    const wasBatched = meshData.batched;\n    const isBatched = mesh.batched;\n    meshData.batched = isBatched;\n    if (wasBatched !== isBatched) {\n      return true;\n    } else if (isBatched) {\n      const geometry = mesh._geometry;\n      if (geometry.indices.length !== meshData.indexSize || geometry.positions.length !== meshData.vertexSize) {\n        meshData.indexSize = geometry.indices.length;\n        meshData.vertexSize = geometry.positions.length;\n        return true;\n      }\n      const batchableMesh = this._getBatchableMesh(mesh);\n      if (batchableMesh.texture.uid !== mesh._texture.uid) {\n        batchableMesh._textureMatrixUpdateId = -1;\n      }\n      return !batchableMesh._batcher.checkAndUpdateTexture(\n        batchableMesh,\n        mesh._texture\n      );\n    }\n    return false;\n  }\n  addRenderable(mesh, instructionSet) {\n    const batcher = this.renderer.renderPipes.batch;\n    const meshData = this._getMeshData(mesh);\n    if (mesh.didViewUpdate) {\n      meshData.indexSize = mesh._geometry.indices?.length;\n      meshData.vertexSize = mesh._geometry.positions?.length;\n    }\n    if (meshData.batched) {\n      const gpuBatchableMesh = this._getBatchableMesh(mesh);\n      gpuBatchableMesh.setTexture(mesh._texture);\n      gpuBatchableMesh.geometry = mesh._geometry;\n      batcher.addToBatch(gpuBatchableMesh, instructionSet);\n    } else {\n      batcher.break(instructionSet);\n      instructionSet.add(mesh);\n    }\n  }\n  updateRenderable(mesh) {\n    if (mesh.batched) {\n      const gpuBatchableMesh = this._getBatchableMesh(mesh);\n      gpuBatchableMesh.setTexture(mesh._texture);\n      gpuBatchableMesh.geometry = mesh._geometry;\n      gpuBatchableMesh._batcher.updateElement(gpuBatchableMesh);\n    }\n  }\n  execute(mesh) {\n    if (!mesh.isRenderable)\n      return;\n    mesh.state.blendMode = getAdjustedBlendModeBlend(mesh.groupBlendMode, mesh.texture._source);\n    const localUniforms = this.localUniforms;\n    localUniforms.uniforms.uTransformMatrix = mesh.groupTransform;\n    localUniforms.uniforms.uRound = this.renderer._roundPixels | mesh._roundPixels;\n    localUniforms.update();\n    color32BitToUniform(\n      mesh.groupColorAlpha,\n      localUniforms.uniforms.uColor,\n      0\n    );\n    this._adaptor.execute(this, mesh);\n  }\n  _getMeshData(mesh) {\n    var _a, _b;\n    (_a = mesh._gpuData)[_b = this.renderer.uid] || (_a[_b] = new MeshGpuData());\n    return mesh._gpuData[this.renderer.uid].meshData || this._initMeshData(mesh);\n  }\n  _initMeshData(mesh) {\n    mesh._gpuData[this.renderer.uid].meshData = {\n      batched: mesh.batched,\n      indexSize: 0,\n      vertexSize: 0\n    };\n    return mesh._gpuData[this.renderer.uid].meshData;\n  }\n  _getBatchableMesh(mesh) {\n    var _a, _b;\n    (_a = mesh._gpuData)[_b = this.renderer.uid] || (_a[_b] = new MeshGpuData());\n    return mesh._gpuData[this.renderer.uid].batchableMesh || this._initBatchableMesh(mesh);\n  }\n  _initBatchableMesh(mesh) {\n    const gpuMesh = new BatchableMesh();\n    gpuMesh.renderable = mesh;\n    gpuMesh.setTexture(mesh._texture);\n    gpuMesh.transform = mesh.groupTransform;\n    gpuMesh.roundPixels = this.renderer._roundPixels | mesh._roundPixels;\n    mesh._gpuData[this.renderer.uid].batchableMesh = gpuMesh;\n    return gpuMesh;\n  }\n  destroy() {\n    this.localUniforms = null;\n    this.localUniformsBindGroup = null;\n    this._adaptor.destroy();\n    this._adaptor = null;\n    this.renderer = null;\n  }\n}\n/** @ignore */\nMeshPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"mesh\"\n};\n\nexport { MeshGpuData, MeshPipe };\n//# sourceMappingURL=MeshPipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { MeshPipe } from './shared/MeshPipe.mjs';\n\n\"use strict\";\nextensions.add(MeshPipe);\n//# sourceMappingURL=init.mjs.map\n","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","\"use strict\";\nconst NOOP = () => {\n};\n\nexport { NOOP };\n//# sourceMappingURL=NOOP.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { groupD8 } from '../../../../maths/matrix/groupD8.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../../utils/logging/deprecation.mjs';\nimport { NOOP } from '../../../../utils/misc/NOOP.mjs';\nimport { BufferImageSource } from './sources/BufferImageSource.mjs';\nimport { TextureSource } from './sources/TextureSource.mjs';\nimport { TextureMatrix } from './TextureMatrix.mjs';\n\n\"use strict\";\nclass Texture extends EventEmitter {\n  /**\n   * @param {TextureOptions} options - Options for the texture\n   */\n  constructor({\n    source,\n    label,\n    frame,\n    orig,\n    trim,\n    defaultAnchor,\n    defaultBorders,\n    rotate,\n    dynamic\n  } = {}) {\n    super();\n    /** unique id for this texture */\n    this.uid = uid(\"texture\");\n    /** A uvs object based on the given frame and the texture source */\n    this.uvs = { x0: 0, y0: 0, x1: 0, y1: 0, x2: 0, y2: 0, x3: 0, y3: 0 };\n    /**\n     * This is the area of the BaseTexture image to actually copy to the Canvas / WebGL when rendering,\n     * irrespective of the actual frame size or placement (which can be influenced by trimmed texture atlases)\n     */\n    this.frame = new Rectangle();\n    /**\n     * Does this Texture have any frame data assigned to it?\n     *\n     * This mode is enabled automatically if no frame was passed inside constructor.\n     *\n     * In this mode texture is subscribed to baseTexture events, and fires `update` on any change.\n     *\n     * Beware, after loading or resize of baseTexture event can fired two times!\n     * If you want more control, subscribe on baseTexture itself.\n     * @example\n     * texture.on('update', () => {});\n     */\n    this.noFrame = false;\n    /**\n     * Set to true if you plan on modifying the uvs of this texture.\n     * When this is the case, sprites and other objects using the texture will\n     * make sure to listen for changes to the uvs and update their vertices accordingly.\n     */\n    this.dynamic = false;\n    /** is it a texture? yes! used for type checking */\n    this.isTexture = true;\n    this.label = label;\n    this.source = source?.source ?? new TextureSource();\n    this.noFrame = !frame;\n    if (frame) {\n      this.frame.copyFrom(frame);\n    } else {\n      const { width, height } = this._source;\n      this.frame.width = width;\n      this.frame.height = height;\n    }\n    this.orig = orig || this.frame;\n    this.trim = trim;\n    this.rotate = rotate ?? 0;\n    this.defaultAnchor = defaultAnchor;\n    this.defaultBorders = defaultBorders;\n    this.destroyed = false;\n    this.dynamic = dynamic || false;\n    this.updateUvs();\n  }\n  set source(value) {\n    if (this._source) {\n      this._source.off(\"resize\", this.update, this);\n    }\n    this._source = value;\n    value.on(\"resize\", this.update, this);\n    this.emit(\"update\", this);\n  }\n  /** the underlying source of the texture (equivalent of baseTexture in v7) */\n  get source() {\n    return this._source;\n  }\n  /** returns a TextureMatrix instance for this texture. By default, that object is not created because its heavy. */\n  get textureMatrix() {\n    if (!this._textureMatrix) {\n      this._textureMatrix = new TextureMatrix(this);\n    }\n    return this._textureMatrix;\n  }\n  /** The width of the Texture in pixels. */\n  get width() {\n    return this.orig.width;\n  }\n  /** The height of the Texture in pixels. */\n  get height() {\n    return this.orig.height;\n  }\n  /** Call this function when you have modified the frame of this texture. */\n  updateUvs() {\n    const { uvs, frame } = this;\n    const { width, height } = this._source;\n    const nX = frame.x / width;\n    const nY = frame.y / height;\n    const nW = frame.width / width;\n    const nH = frame.height / height;\n    let rotate = this.rotate;\n    if (rotate) {\n      const w2 = nW / 2;\n      const h2 = nH / 2;\n      const cX = nX + w2;\n      const cY = nY + h2;\n      rotate = groupD8.add(rotate, groupD8.NW);\n      uvs.x0 = cX + w2 * groupD8.uX(rotate);\n      uvs.y0 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x1 = cX + w2 * groupD8.uX(rotate);\n      uvs.y1 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x2 = cX + w2 * groupD8.uX(rotate);\n      uvs.y2 = cY + h2 * groupD8.uY(rotate);\n      rotate = groupD8.add(rotate, 2);\n      uvs.x3 = cX + w2 * groupD8.uX(rotate);\n      uvs.y3 = cY + h2 * groupD8.uY(rotate);\n    } else {\n      uvs.x0 = nX;\n      uvs.y0 = nY;\n      uvs.x1 = nX + nW;\n      uvs.y1 = nY;\n      uvs.x2 = nX + nW;\n      uvs.y2 = nY + nH;\n      uvs.x3 = nX;\n      uvs.y3 = nY + nH;\n    }\n  }\n  /**\n   * Destroys this texture\n   * @param destroySource - Destroy the source when the texture is destroyed.\n   */\n  destroy(destroySource = false) {\n    if (this._source) {\n      this._source.off(\"resize\", this.update, this);\n      if (destroySource) {\n        this._source.destroy();\n        this._source = null;\n      }\n    }\n    this._textureMatrix = null;\n    this.destroyed = true;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n  }\n  /**\n   * Call this if you have modified the `texture outside` of the constructor.\n   *\n   * If you have modified this texture's source, you must separately call `texture.source.update()` to see those changes.\n   */\n  update() {\n    if (this.noFrame) {\n      this.frame.width = this._source.width;\n      this.frame.height = this._source.height;\n    }\n    this.updateUvs();\n    this.emit(\"update\", this);\n  }\n  /** @deprecated since 8.0.0 */\n  get baseTexture() {\n    deprecation(v8_0_0, \"Texture.baseTexture is now Texture.source\");\n    return this._source;\n  }\n}\nTexture.EMPTY = new Texture({\n  label: \"EMPTY\",\n  source: new TextureSource({\n    label: \"EMPTY\"\n  })\n});\nTexture.EMPTY.destroy = NOOP;\nTexture.WHITE = new Texture({\n  source: new BufferImageSource({\n    resource: new Uint8Array([255, 255, 255, 255]),\n    width: 1,\n    height: 1,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    label: \"WHITE\"\n  }),\n  label: \"WHITE\"\n});\nTexture.WHITE.destroy = NOOP;\n\nexport { Texture };\n//# sourceMappingURL=Texture.mjs.map\n","import { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addBits(srcParts, parts, name) {\n  if (srcParts) {\n    for (const i in srcParts) {\n      const id = i.toLocaleLowerCase();\n      const part = parts[id];\n      if (part) {\n        let sanitisedPart = srcParts[i];\n        if (i === \"header\") {\n          sanitisedPart = sanitisedPart.replace(/@in\\s+[^;]+;\\s*/g, \"\").replace(/@out\\s+[^;]+;\\s*/g, \"\");\n        }\n        if (name) {\n          part.push(`//----${name}----//`);\n        }\n        part.push(sanitisedPart);\n      } else {\n        warn(`${i} placement hook does not exist in shader`);\n      }\n    }\n  }\n}\n\nexport { addBits };\n//# sourceMappingURL=addBits.mjs.map\n","\"use strict\";\nconst findHooksRx = /\\{\\{(.*?)\\}\\}/g;\nfunction compileHooks(programSrc) {\n  const parts = {};\n  const partMatches = programSrc.match(findHooksRx)?.map((hook) => hook.replace(/[{()}]/g, \"\")) ?? [];\n  partMatches.forEach((hook) => {\n    parts[hook] = [];\n  });\n  return parts;\n}\n\nexport { compileHooks };\n//# sourceMappingURL=compileHooks.mjs.map\n","\"use strict\";\nfunction extractInputs(fragmentSource, out) {\n  let match;\n  const regex = /@in\\s+([^;]+);/g;\n  while ((match = regex.exec(fragmentSource)) !== null) {\n    out.push(match[1]);\n  }\n}\nfunction compileInputs(fragments, template, sort = false) {\n  const results = [];\n  extractInputs(template, results);\n  fragments.forEach((fragment) => {\n    if (fragment.header) {\n      extractInputs(fragment.header, results);\n    }\n  });\n  const mainInput = results;\n  if (sort) {\n    mainInput.sort();\n  }\n  const finalString = mainInput.map((inValue, i) => `       @location(${i}) ${inValue},`).join(\"\\n\");\n  let cleanedString = template.replace(/@in\\s+[^;]+;\\s*/g, \"\");\n  cleanedString = cleanedString.replace(\"{{in}}\", `\n${finalString}\n`);\n  return cleanedString;\n}\n\nexport { compileInputs };\n//# sourceMappingURL=compileInputs.mjs.map\n","\"use strict\";\nfunction extractOutputs(fragmentSource, out) {\n  let match;\n  const regex = /@out\\s+([^;]+);/g;\n  while ((match = regex.exec(fragmentSource)) !== null) {\n    out.push(match[1]);\n  }\n}\nfunction extractVariableName(value) {\n  const regex = /\\b(\\w+)\\s*:/g;\n  const match = regex.exec(value);\n  return match ? match[1] : \"\";\n}\nfunction stripVariable(value) {\n  const regex = /@.*?\\s+/g;\n  return value.replace(regex, \"\");\n}\nfunction compileOutputs(fragments, template) {\n  const results = [];\n  extractOutputs(template, results);\n  fragments.forEach((fragment) => {\n    if (fragment.header) {\n      extractOutputs(fragment.header, results);\n    }\n  });\n  let index = 0;\n  const mainStruct = results.sort().map((inValue) => {\n    if (inValue.indexOf(\"builtin\") > -1) {\n      return inValue;\n    }\n    return `@location(${index++}) ${inValue}`;\n  }).join(\",\\n\");\n  const mainStart = results.sort().map((inValue) => `       var ${stripVariable(inValue)};`).join(\"\\n\");\n  const mainEnd = `return VSOutput(\n            ${results.sort().map((inValue) => ` ${extractVariableName(inValue)}`).join(\",\\n\")});`;\n  let compiledCode = template.replace(/@out\\s+[^;]+;\\s*/g, \"\");\n  compiledCode = compiledCode.replace(\"{{struct}}\", `\n${mainStruct}\n`);\n  compiledCode = compiledCode.replace(\"{{start}}\", `\n${mainStart}\n`);\n  compiledCode = compiledCode.replace(\"{{return}}\", `\n${mainEnd}\n`);\n  return compiledCode;\n}\n\nexport { compileOutputs };\n//# sourceMappingURL=compileOutputs.mjs.map\n","\"use strict\";\nfunction injectBits(templateSrc, fragmentParts) {\n  let out = templateSrc;\n  for (const i in fragmentParts) {\n    const parts = fragmentParts[i];\n    const toInject = parts.join(\"\\n\");\n    if (toInject.length) {\n      out = out.replace(`{{${i}}}`, `//-----${i} START-----//\n${parts.join(\"\\n\")}\n//----${i} FINISH----//`);\n    } else {\n      out = out.replace(`{{${i}}}`, \"\");\n    }\n  }\n  return out;\n}\n\nexport { injectBits };\n//# sourceMappingURL=injectBits.mjs.map\n","import { addBits } from './utils/addBits.mjs';\nimport { compileHooks } from './utils/compileHooks.mjs';\nimport { compileInputs } from './utils/compileInputs.mjs';\nimport { compileOutputs } from './utils/compileOutputs.mjs';\nimport { injectBits } from './utils/injectBits.mjs';\n\n\"use strict\";\nconst cacheMap = /* @__PURE__ */ Object.create(null);\nconst bitCacheMap = /* @__PURE__ */ new Map();\nlet CACHE_UID = 0;\nfunction compileHighShader({\n  template,\n  bits\n}) {\n  const cacheId = generateCacheId(template, bits);\n  if (cacheMap[cacheId])\n    return cacheMap[cacheId];\n  const { vertex, fragment } = compileInputsAndOutputs(template, bits);\n  cacheMap[cacheId] = compileBits(vertex, fragment, bits);\n  return cacheMap[cacheId];\n}\nfunction compileHighShaderGl({\n  template,\n  bits\n}) {\n  const cacheId = generateCacheId(template, bits);\n  if (cacheMap[cacheId])\n    return cacheMap[cacheId];\n  cacheMap[cacheId] = compileBits(template.vertex, template.fragment, bits);\n  return cacheMap[cacheId];\n}\nfunction compileInputsAndOutputs(template, bits) {\n  const vertexFragments = bits.map((shaderBit) => shaderBit.vertex).filter((v) => !!v);\n  const fragmentFragments = bits.map((shaderBit) => shaderBit.fragment).filter((v) => !!v);\n  let compiledVertex = compileInputs(vertexFragments, template.vertex, true);\n  compiledVertex = compileOutputs(vertexFragments, compiledVertex);\n  const compiledFragment = compileInputs(fragmentFragments, template.fragment, true);\n  return {\n    vertex: compiledVertex,\n    fragment: compiledFragment\n  };\n}\nfunction generateCacheId(template, bits) {\n  return bits.map((highFragment) => {\n    if (!bitCacheMap.has(highFragment)) {\n      bitCacheMap.set(highFragment, CACHE_UID++);\n    }\n    return bitCacheMap.get(highFragment);\n  }).sort((a, b) => a - b).join(\"-\") + template.vertex + template.fragment;\n}\nfunction compileBits(vertex, fragment, bits) {\n  const vertexParts = compileHooks(vertex);\n  const fragmentParts = compileHooks(fragment);\n  bits.forEach((shaderBit) => {\n    addBits(shaderBit.vertex, vertexParts, shaderBit.name);\n    addBits(shaderBit.fragment, fragmentParts, shaderBit.name);\n  });\n  return {\n    vertex: injectBits(vertex, vertexParts),\n    fragment: injectBits(fragment, fragmentParts)\n  };\n}\n\nexport { compileHighShader, compileHighShaderGl };\n//# sourceMappingURL=compileHighShader.mjs.map\n","\"use strict\";\nconst vertexGPUTemplate = (\n  /* wgsl */\n  `\n    @in aPosition: vec2<f32>;\n    @in aUV: vec2<f32>;\n\n    @out @builtin(position) vPosition: vec4<f32>;\n    @out vUV : vec2<f32>;\n    @out vColor : vec4<f32>;\n\n    {{header}}\n\n    struct VSOutput {\n        {{struct}}\n    };\n\n    @vertex\n    fn main( {{in}} ) -> VSOutput {\n\n        var worldTransformMatrix = globalUniforms.uWorldTransformMatrix;\n        var modelMatrix = mat3x3<f32>(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        var position = aPosition;\n        var uv = aUV;\n\n        {{start}}\n\n        vColor = vec4<f32>(1., 1., 1., 1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        var modelViewProjectionMatrix = globalUniforms.uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        vPosition =  vec4<f32>((modelViewProjectionMatrix *  vec3<f32>(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= globalUniforms.uWorldColorAlpha;\n\n        {{end}}\n\n        {{return}}\n    };\n`\n);\nconst fragmentGPUTemplate = (\n  /* wgsl */\n  `\n    @in vUV : vec2<f32>;\n    @in vColor : vec4<f32>;\n\n    {{header}}\n\n    @fragment\n    fn main(\n        {{in}}\n      ) -> @location(0) vec4<f32> {\n\n        {{start}}\n\n        var outColor:vec4<f32>;\n\n        {{main}}\n\n        var finalColor:vec4<f32> = outColor * vColor;\n\n        {{end}}\n\n        return finalColor;\n      };\n`\n);\nconst vertexGlTemplate = (\n  /* glsl */\n  `\n    in vec2 aPosition;\n    in vec2 aUV;\n\n    out vec4 vColor;\n    out vec2 vUV;\n\n    {{header}}\n\n    void main(void){\n\n        mat3 worldTransformMatrix = uWorldTransformMatrix;\n        mat3 modelMatrix = mat3(\n            1.0, 0.0, 0.0,\n            0.0, 1.0, 0.0,\n            0.0, 0.0, 1.0\n          );\n        vec2 position = aPosition;\n        vec2 uv = aUV;\n\n        {{start}}\n\n        vColor = vec4(1.);\n\n        {{main}}\n\n        vUV = uv;\n\n        mat3 modelViewProjectionMatrix = uProjectionMatrix * worldTransformMatrix * modelMatrix;\n\n        gl_Position = vec4((modelViewProjectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);\n\n        vColor *= uWorldColorAlpha;\n\n        {{end}}\n    }\n`\n);\nconst fragmentGlTemplate = (\n  /* glsl */\n  `\n\n    in vec4 vColor;\n    in vec2 vUV;\n\n    out vec4 finalColor;\n\n    {{header}}\n\n    void main(void) {\n\n        {{start}}\n\n        vec4 outColor;\n\n        {{main}}\n\n        finalColor = outColor * vColor;\n\n        {{end}}\n    }\n`\n);\n\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate };\n//# sourceMappingURL=defaultProgramTemplate.mjs.map\n","\"use strict\";\nconst globalUniformsBit = {\n  name: \"global-uniforms-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n        struct GlobalUniforms {\n            uProjectionMatrix:mat3x3<f32>,\n            uWorldTransformMatrix:mat3x3<f32>,\n            uWorldColorAlpha: vec4<f32>,\n            uResolution: vec2<f32>,\n        }\n\n        @group(0) @binding(0) var<uniform> globalUniforms : GlobalUniforms;\n        `\n    )\n  }\n};\nconst globalUniformsUBOBitGl = {\n  name: \"global-uniforms-ubo-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n          uniform globalUniforms {\n            mat3 uProjectionMatrix;\n            mat3 uWorldTransformMatrix;\n            vec4 uWorldColorAlpha;\n            vec2 uResolution;\n          };\n        `\n    )\n  }\n};\nconst globalUniformsBitGl = {\n  name: \"global-uniforms-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n          uniform mat3 uProjectionMatrix;\n          uniform mat3 uWorldTransformMatrix;\n          uniform vec4 uWorldColorAlpha;\n          uniform vec2 uResolution;\n        `\n    )\n  }\n};\n\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl };\n//# sourceMappingURL=globalUniformsBit.mjs.map\n","import { GlProgram } from '../renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../renderers/gpu/shader/GpuProgram.mjs';\nimport { compileHighShader, compileHighShaderGl } from './compiler/compileHighShader.mjs';\nimport { fragmentGPUTemplate, vertexGPUTemplate, vertexGlTemplate, fragmentGlTemplate } from './defaultProgramTemplate.mjs';\nimport { globalUniformsBit, globalUniformsBitGl } from './shader-bits/globalUniformsBit.mjs';\n\n\"use strict\";\nfunction compileHighShaderGpuProgram({ bits, name }) {\n  const source = compileHighShader({\n    template: {\n      fragment: fragmentGPUTemplate,\n      vertex: vertexGPUTemplate\n    },\n    bits: [\n      globalUniformsBit,\n      ...bits\n    ]\n  });\n  return GpuProgram.from({\n    name,\n    vertex: {\n      source: source.vertex,\n      entryPoint: \"main\"\n    },\n    fragment: {\n      source: source.fragment,\n      entryPoint: \"main\"\n    }\n  });\n}\nfunction compileHighShaderGlProgram({ bits, name }) {\n  return new GlProgram({\n    name,\n    ...compileHighShaderGl({\n      template: {\n        vertex: vertexGlTemplate,\n        fragment: fragmentGlTemplate\n      },\n      bits: [\n        globalUniformsBitGl,\n        ...bits\n      ]\n    })\n  });\n}\n\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram };\n//# sourceMappingURL=compileHighShaderToProgram.mjs.map\n","var arrayWithHoles = require(\"./arrayWithHoles.js\");\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit.js\");\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray.js\");\nvar nonIterableRest = require(\"./nonIterableRest.js\");\nfunction _slicedToArray(r, e) {\n  return arrayWithHoles(r) || iterableToArrayLimit(r, e) || unsupportedIterableToArray(r, e) || nonIterableRest();\n}\nmodule.exports = _slicedToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nconst UNIFORM_TYPES_VALUES = [\n  \"f32\",\n  \"i32\",\n  \"vec2<f32>\",\n  \"vec3<f32>\",\n  \"vec4<f32>\",\n  \"mat2x2<f32>\",\n  \"mat3x3<f32>\",\n  \"mat4x4<f32>\",\n  \"mat3x2<f32>\",\n  \"mat4x2<f32>\",\n  \"mat2x3<f32>\",\n  \"mat4x3<f32>\",\n  \"mat2x4<f32>\",\n  \"mat3x4<f32>\",\n  \"vec2<i32>\",\n  \"vec3<i32>\",\n  \"vec4<i32>\"\n];\nconst UNIFORM_TYPES_MAP = UNIFORM_TYPES_VALUES.reduce((acc, type) => {\n  acc[type] = true;\n  return acc;\n}, {});\n\nexport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES };\n//# sourceMappingURL=types.mjs.map\n","\"use strict\";\nfunction getDefaultUniformValue(type, size) {\n  switch (type) {\n    case \"f32\":\n      return 0;\n    case \"vec2<f32>\":\n      return new Float32Array(2 * size);\n    case \"vec3<f32>\":\n      return new Float32Array(3 * size);\n    case \"vec4<f32>\":\n      return new Float32Array(4 * size);\n    case \"mat2x2<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        1\n      ]);\n    case \"mat3x3<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ]);\n    case \"mat4x4<f32>\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n  }\n  return null;\n}\n\nexport { getDefaultUniformValue };\n//# sourceMappingURL=getDefaultUniformValue.mjs.map\n","import { uid } from '../../../../utils/data/uid.mjs';\nimport { createIdFromString } from '../utils/createIdFromString.mjs';\nimport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES } from './types.mjs';\nimport { getDefaultUniformValue } from './utils/getDefaultUniformValue.mjs';\n\n\"use strict\";\nconst _UniformGroup = class _UniformGroup {\n  /**\n   * Create a new Uniform group\n   * @param uniformStructures - The structures of the uniform group\n   * @param options - The optional parameters of this uniform group\n   */\n  constructor(uniformStructures, options) {\n    /**\n     * used internally to know if a uniform group was used in the last render pass\n     * @internal\n     */\n    this._touched = 0;\n    /** a unique id for this uniform group used through the renderer */\n    this.uid = uid(\"uniform\");\n    /**\n     * a resource type, used to identify how to handle it when its in a bind group / shader resource\n     * @internal\n     */\n    this._resourceType = \"uniformGroup\";\n    /**\n     * the resource id used internally by the renderer to build bind group keys\n     * @internal\n     */\n    this._resourceId = uid(\"resource\");\n    /** used ito identify if this is a uniform group */\n    this.isUniformGroup = true;\n    /**\n     * used to flag if this Uniform groups data is different from what it has stored in its buffer / on the GPU\n     * @internal\n     */\n    this._dirtyId = 0;\n    // implementing the interface - UniformGroup are not destroyed\n    this.destroyed = false;\n    options = { ..._UniformGroup.defaultOptions, ...options };\n    this.uniformStructures = uniformStructures;\n    const uniforms = {};\n    for (const i in uniformStructures) {\n      const uniformData = uniformStructures[i];\n      uniformData.name = i;\n      uniformData.size = uniformData.size ?? 1;\n      if (!UNIFORM_TYPES_MAP[uniformData.type]) {\n        const arrayMatch = uniformData.type.match(/^array<(\\w+(?:<\\w+>)?),\\s*(\\d+)>$/);\n        if (arrayMatch) {\n          const [, innerType, size] = arrayMatch;\n          throw new Error(\n            `Uniform type ${uniformData.type} is not supported. Use type: '${innerType}', size: ${size} instead.`\n          );\n        }\n        throw new Error(`Uniform type ${uniformData.type} is not supported. Supported uniform types are: ${UNIFORM_TYPES_VALUES.join(\", \")}`);\n      }\n      uniformData.value ?? (uniformData.value = getDefaultUniformValue(uniformData.type, uniformData.size));\n      uniforms[i] = uniformData.value;\n    }\n    this.uniforms = uniforms;\n    this._dirtyId = 1;\n    this.ubo = options.ubo;\n    this.isStatic = options.isStatic;\n    this._signature = createIdFromString(Object.keys(uniforms).map(\n      (i) => `${i}-${uniformStructures[i].type}`\n    ).join(\"-\"), \"uniform-group\");\n  }\n  /** Call this if you want the uniform groups data to be uploaded to the GPU only useful if `isStatic` is true. */\n  update() {\n    this._dirtyId++;\n  }\n};\n/** The default options used by the uniform group. */\n_UniformGroup.defaultOptions = {\n  /** if true the UniformGroup is handled as an Uniform buffer object. */\n  ubo: false,\n  /** if true, then you are responsible for when the data is uploaded to the GPU by calling `update()` */\n  isStatic: false\n};\nlet UniformGroup = _UniformGroup;\n\nexport { UniformGroup };\n//# sourceMappingURL=UniformGroup.mjs.map\n","/**\n * tiny-lru\n *\n * @copyright 2025 Jason Mulligan <jason.mulligan@avoidwork.com>\n * @license BSD-3-Clause\n * @version 11.4.5\n */\n/**\n * A high-performance Least Recently Used (LRU) cache implementation with optional TTL support.\n * Items are automatically evicted when the cache reaches its maximum size,\n * removing the least recently used items first. All core operations (get, set, delete) are O(1).\n *\n * @class LRU\n * @example\n * // Create a cache with max 100 items\n * const cache = new LRU(100);\n * cache.set('key1', 'value1');\n * console.log(cache.get('key1')); // 'value1'\n *\n * @example\n * // Create a cache with TTL\n * const cache = new LRU(100, 5000); // 5 second TTL\n * cache.set('key1', 'value1');\n * // After 5 seconds, key1 will be expired\n */\nclass LRU {\n\t/**\n\t * Creates a new LRU cache instance.\n\t * Note: Constructor does not validate parameters. Use lru() factory function for parameter validation.\n\t *\n\t * @constructor\n\t * @param {number} [max=0] - Maximum number of items to store. 0 means unlimited.\n\t * @param {number} [ttl=0] - Time to live in milliseconds. 0 means no expiration.\n\t * @param {boolean} [resetTtl=false] - Whether to reset TTL when accessing existing items via get().\n\t * @example\n\t * const cache = new LRU(1000, 60000, true); // 1000 items, 1 minute TTL, reset on access\n\t * @see {@link lru} For parameter validation\n\t * @since 1.0.0\n\t */\n\tconstructor (max = 0, ttl = 0, resetTtl = false) {\n\t\tthis.first = null;\n\t\tthis.items = Object.create(null);\n\t\tthis.last = null;\n\t\tthis.max = max;\n\t\tthis.resetTtl = resetTtl;\n\t\tthis.size = 0;\n\t\tthis.ttl = ttl;\n\t}\n\n\t/**\n\t * Removes all items from the cache.\n\t *\n\t * @method clear\n\t * @memberof LRU\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.clear();\n\t * console.log(cache.size); // 0\n\t * @since 1.0.0\n\t */\n\tclear () {\n\t\tthis.first = null;\n\t\tthis.items = Object.create(null);\n\t\tthis.last = null;\n\t\tthis.size = 0;\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Removes an item from the cache by key.\n\t *\n\t * @method delete\n\t * @memberof LRU\n\t * @param {string} key - The key of the item to delete.\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.set('key1', 'value1');\n\t * cache.delete('key1');\n\t * console.log(cache.has('key1')); // false\n\t * @see {@link LRU#has}\n\t * @see {@link LRU#clear}\n\t * @since 1.0.0\n\t */\n\tdelete (key) {\n\t\tif (this.has(key)) {\n\t\t\tconst item = this.items[key];\n\n\t\t\tdelete this.items[key];\n\t\t\tthis.size--;\n\n\t\t\tif (item.prev !== null) {\n\t\t\t\titem.prev.next = item.next;\n\t\t\t}\n\n\t\t\tif (item.next !== null) {\n\t\t\t\titem.next.prev = item.prev;\n\t\t\t}\n\n\t\t\tif (this.first === item) {\n\t\t\t\tthis.first = item.next;\n\t\t\t}\n\n\t\t\tif (this.last === item) {\n\t\t\t\tthis.last = item.prev;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of [key, value] pairs for the specified keys.\n\t * Order follows LRU order (least to most recently used).\n\t *\n\t * @method entries\n\t * @memberof LRU\n\t * @param {string[]} [keys=this.keys()] - Array of keys to get entries for. Defaults to all keys.\n\t * @returns {Array<Array<*>>} Array of [key, value] pairs in LRU order.\n\t * @example\n\t * cache.set('a', 1).set('b', 2);\n\t * console.log(cache.entries()); // [['a', 1], ['b', 2]]\n\t * console.log(cache.entries(['a'])); // [['a', 1]]\n\t * @see {@link LRU#keys}\n\t * @see {@link LRU#values}\n\t * @since 11.1.0\n\t */\n\tentries (keys = this.keys()) {\n\t\treturn keys.map(key => [key, this.get(key)]);\n\t}\n\n\t/**\n\t * Removes the least recently used item from the cache.\n\t *\n\t * @method evict\n\t * @memberof LRU\n\t * @param {boolean} [bypass=false] - Whether to force eviction even when cache is empty.\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.set('old', 'value').set('new', 'value');\n\t * cache.evict(); // Removes 'old' item\n\t * @see {@link LRU#setWithEvicted}\n\t * @since 1.0.0\n\t */\n\tevict (bypass = false) {\n\t\tif (bypass || this.size > 0) {\n\t\t\tconst item = this.first;\n\n\t\t\tdelete this.items[item.key];\n\n\t\t\tif (--this.size === 0) {\n\t\t\t\tthis.first = null;\n\t\t\t\tthis.last = null;\n\t\t\t} else {\n\t\t\t\tthis.first = item.next;\n\t\t\t\tthis.first.prev = null;\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns the expiration timestamp for a given key.\n\t *\n\t * @method expiresAt\n\t * @memberof LRU\n\t * @param {string} key - The key to check expiration for.\n\t * @returns {number|undefined} The expiration timestamp in milliseconds, or undefined if key doesn't exist.\n\t * @example\n\t * const cache = new LRU(100, 5000); // 5 second TTL\n\t * cache.set('key1', 'value1');\n\t * console.log(cache.expiresAt('key1')); // timestamp 5 seconds from now\n\t * @see {@link LRU#get}\n\t * @see {@link LRU#has}\n\t * @since 1.0.0\n\t */\n\texpiresAt (key) {\n\t\tlet result;\n\n\t\tif (this.has(key)) {\n\t\t\tresult = this.items[key].expiry;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Retrieves a value from the cache by key. Updates the item's position to most recently used.\n\t *\n\t * @method get\n\t * @memberof LRU\n\t * @param {string} key - The key to retrieve.\n\t * @returns {*} The value associated with the key, or undefined if not found or expired.\n\t * @example\n\t * cache.set('key1', 'value1');\n\t * console.log(cache.get('key1')); // 'value1'\n\t * console.log(cache.get('nonexistent')); // undefined\n\t * @see {@link LRU#set}\n\t * @see {@link LRU#has}\n\t * @since 1.0.0\n\t */\n\tget (key) {\n\t\tconst item = this.items[key];\n\n\t\tif (item !== undefined) {\n\t\t\t// Check TTL only if enabled to avoid unnecessary Date.now() calls\n\t\t\tif (this.ttl > 0) {\n\t\t\t\tif (item.expiry <= Date.now()) {\n\t\t\t\t\tthis.delete(key);\n\n\t\t\t\t\treturn undefined;\n\t\t\t\t}\n\t\t\t}\n\n\t\t\t// Fast LRU update without full set() overhead\n\t\t\tthis.moveToEnd(item);\n\n\t\t\treturn item.value;\n\t\t}\n\n\t\treturn undefined;\n\t}\n\n\t/**\n\t * Checks if a key exists in the cache.\n\t *\n\t * @method has\n\t * @memberof LRU\n\t * @param {string} key - The key to check for.\n\t * @returns {boolean} True if the key exists, false otherwise.\n\t * @example\n\t * cache.set('key1', 'value1');\n\t * console.log(cache.has('key1')); // true\n\t * console.log(cache.has('nonexistent')); // false\n\t * @see {@link LRU#get}\n\t * @see {@link LRU#delete}\n\t * @since 9.0.0\n\t */\n\thas (key) {\n\t\treturn key in this.items;\n\t}\n\n\t/**\n\t * Efficiently moves an item to the end of the LRU list (most recently used position).\n\t * This is an internal optimization method that avoids the overhead of the full set() operation\n\t * when only LRU position needs to be updated.\n\t *\n\t * @method moveToEnd\n\t * @memberof LRU\n\t * @param {Object} item - The cache item with prev/next pointers to reposition.\n\t * @private\n\t * @since 11.3.5\n\t */\n\tmoveToEnd (item) {\n\t\t// If already at the end, nothing to do\n\t\tif (this.last === item) {\n\t\t\treturn;\n\t\t}\n\n\t\t// Remove item from current position in the list\n\t\tif (item.prev !== null) {\n\t\t\titem.prev.next = item.next;\n\t\t}\n\n\t\tif (item.next !== null) {\n\t\t\titem.next.prev = item.prev;\n\t\t}\n\n\t\t// Update first pointer if this was the first item\n\t\tif (this.first === item) {\n\t\t\tthis.first = item.next;\n\t\t}\n\n\t\t// Add item to the end\n\t\titem.prev = this.last;\n\t\titem.next = null;\n\n\t\tif (this.last !== null) {\n\t\t\tthis.last.next = item;\n\t\t}\n\n\t\tthis.last = item;\n\n\t\t// Handle edge case: if this was the only item, it's also first\n\t\tif (this.first === null) {\n\t\t\tthis.first = item;\n\t\t}\n\t}\n\n\t/**\n\t * Returns an array of all keys in the cache, ordered from least to most recently used.\n\t *\n\t * @method keys\n\t * @memberof LRU\n\t * @returns {string[]} Array of keys in LRU order.\n\t * @example\n\t * cache.set('a', 1).set('b', 2);\n\t * cache.get('a'); // Move 'a' to most recent\n\t * console.log(cache.keys()); // ['b', 'a']\n\t * @see {@link LRU#values}\n\t * @see {@link LRU#entries}\n\t * @since 9.0.0\n\t */\n\tkeys () {\n\t\tconst result = [];\n\t\tlet x = this.first;\n\n\t\twhile (x !== null) {\n\t\t\tresult.push(x.key);\n\t\t\tx = x.next;\n\t\t}\n\n\t\treturn result;\n\t}\n\n\t/**\n\t * Sets a value in the cache and returns any evicted item.\n\t *\n\t * @method setWithEvicted\n\t * @memberof LRU\n\t * @param {string} key - The key to set.\n\t * @param {*} value - The value to store.\n\t * @param {boolean} [resetTtl=this.resetTtl] - Whether to reset the TTL for this operation.\n\t * @returns {Object|null} The evicted item (if any) with shape {key, value, expiry, prev, next}, or null.\n\t * @example\n\t * const cache = new LRU(2);\n\t * cache.set('a', 1).set('b', 2);\n\t * const evicted = cache.setWithEvicted('c', 3); // evicted = {key: 'a', value: 1, ...}\n\t * @see {@link LRU#set}\n\t * @see {@link LRU#evict}\n\t * @since 11.3.0\n\t */\n\tsetWithEvicted (key, value, resetTtl = this.resetTtl) {\n\t\tlet evicted = null;\n\n\t\tif (this.has(key)) {\n\t\t\tthis.set(key, value, true, resetTtl);\n\t\t} else {\n\t\t\tif (this.max > 0 && this.size === this.max) {\n\t\t\t\tevicted = {...this.first};\n\t\t\t\tthis.evict(true);\n\t\t\t}\n\n\t\t\tlet item = this.items[key] = {\n\t\t\t\texpiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n\t\t\t\tkey: key,\n\t\t\t\tprev: this.last,\n\t\t\t\tnext: null,\n\t\t\t\tvalue\n\t\t\t};\n\n\t\t\tif (++this.size === 1) {\n\t\t\t\tthis.first = item;\n\t\t\t} else {\n\t\t\t\tthis.last.next = item;\n\t\t\t}\n\n\t\t\tthis.last = item;\n\t\t}\n\n\t\treturn evicted;\n\t}\n\n\t/**\n\t * Sets a value in the cache. Updates the item's position to most recently used.\n\t *\n\t * @method set\n\t * @memberof LRU\n\t * @param {string} key - The key to set.\n\t * @param {*} value - The value to store.\n\t * @param {boolean} [bypass=false] - Internal parameter for setWithEvicted method.\n\t * @param {boolean} [resetTtl=this.resetTtl] - Whether to reset the TTL for this operation.\n\t * @returns {LRU} The LRU instance for method chaining.\n\t * @example\n\t * cache.set('key1', 'value1')\n\t *      .set('key2', 'value2')\n\t *      .set('key3', 'value3');\n\t * @see {@link LRU#get}\n\t * @see {@link LRU#setWithEvicted}\n\t * @since 1.0.0\n\t */\n\tset (key, value, bypass = false, resetTtl = this.resetTtl) {\n\t\tlet item = this.items[key];\n\n\t\tif (bypass || item !== undefined) {\n\t\t\t// Existing item: update value and position\n\t\t\titem.value = value;\n\n\t\t\tif (bypass === false && resetTtl) {\n\t\t\t\titem.expiry = this.ttl > 0 ? Date.now() + this.ttl : this.ttl;\n\t\t\t}\n\n\t\t\t// Always move to end, but the bypass parameter affects TTL reset behavior\n\t\t\tthis.moveToEnd(item);\n\t\t} else {\n\t\t\t// New item: check for eviction and create\n\t\t\tif (this.max > 0 && this.size === this.max) {\n\t\t\t\tthis.evict(true);\n\t\t\t}\n\n\t\t\titem = this.items[key] = {\n\t\t\t\texpiry: this.ttl > 0 ? Date.now() + this.ttl : this.ttl,\n\t\t\t\tkey: key,\n\t\t\t\tprev: this.last,\n\t\t\t\tnext: null,\n\t\t\t\tvalue\n\t\t\t};\n\n\t\t\tif (++this.size === 1) {\n\t\t\t\tthis.first = item;\n\t\t\t} else {\n\t\t\t\tthis.last.next = item;\n\t\t\t}\n\n\t\t\tthis.last = item;\n\t\t}\n\n\t\treturn this;\n\t}\n\n\t/**\n\t * Returns an array of all values in the cache for the specified keys.\n\t * Order follows LRU order (least to most recently used).\n\t *\n\t * @method values\n\t * @memberof LRU\n\t * @param {string[]} [keys=this.keys()] - Array of keys to get values for. Defaults to all keys.\n\t * @returns {Array<*>} Array of values corresponding to the keys in LRU order.\n\t * @example\n\t * cache.set('a', 1).set('b', 2);\n\t * console.log(cache.values()); // [1, 2]\n\t * console.log(cache.values(['a'])); // [1]\n\t * @see {@link LRU#keys}\n\t * @see {@link LRU#entries}\n\t * @since 11.1.0\n\t */\n\tvalues (keys = this.keys()) {\n\t\treturn keys.map(key => this.get(key));\n\t}\n}\n\n/**\n * Factory function to create a new LRU cache instance with parameter validation.\n *\n * @function lru\n * @param {number} [max=1000] - Maximum number of items to store. Must be >= 0. Use 0 for unlimited size.\n * @param {number} [ttl=0] - Time to live in milliseconds. Must be >= 0. Use 0 for no expiration.\n * @param {boolean} [resetTtl=false] - Whether to reset TTL when accessing existing items via get().\n * @returns {LRU} A new LRU cache instance.\n * @throws {TypeError} When parameters are invalid (negative numbers or wrong types).\n * @example\n * // Create cache with factory function\n * const cache = lru(100, 5000, true);\n * cache.set('key', 'value');\n *\n * @example\n * // Error handling\n * try {\n *   const cache = lru(-1); // Invalid max\n * } catch (error) {\n *   console.error(error.message); // \"Invalid max value\"\n * }\n * @see {@link LRU}\n * @since 1.0.0\n */\nfunction lru (max = 1000, ttl = 0, resetTtl = false) {\n\tif (isNaN(max) || max < 0) {\n\t\tthrow new TypeError(\"Invalid max value\");\n\t}\n\n\tif (isNaN(ttl) || ttl < 0) {\n\t\tthrow new TypeError(\"Invalid ttl value\");\n\t}\n\n\tif (typeof resetTtl !== \"boolean\") {\n\t\tthrow new TypeError(\"Invalid resetTtl value\");\n\t}\n\n\treturn new LRU(max, ttl, resetTtl);\n}export{LRU,lru};","import { Buffer } from '../../buffer/Buffer.mjs';\nimport { BufferUsage } from '../../buffer/const.mjs';\n\n\"use strict\";\nfunction ensureIsBuffer(buffer, index) {\n  if (!(buffer instanceof Buffer)) {\n    let usage = index ? BufferUsage.INDEX : BufferUsage.VERTEX;\n    if (buffer instanceof Array) {\n      if (index) {\n        buffer = new Uint32Array(buffer);\n        usage = BufferUsage.INDEX | BufferUsage.COPY_DST;\n      } else {\n        buffer = new Float32Array(buffer);\n        usage = BufferUsage.VERTEX | BufferUsage.COPY_DST;\n      }\n    }\n    buffer = new Buffer({\n      data: buffer,\n      label: index ? \"index-mesh-buffer\" : \"vertex-mesh-buffer\",\n      usage\n    });\n  }\n  return buffer;\n}\n\nexport { ensureIsBuffer };\n//# sourceMappingURL=ensureIsBuffer.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Bounds } from '../../../../scene/container/bounds/Bounds.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { Buffer } from '../buffer/Buffer.mjs';\nimport { ensureIsBuffer } from './utils/ensureIsBuffer.mjs';\nimport { getGeometryBounds } from './utils/getGeometryBounds.mjs';\n\n\"use strict\";\nfunction ensureIsAttribute(attribute) {\n  if (attribute instanceof Buffer || Array.isArray(attribute) || attribute.BYTES_PER_ELEMENT) {\n    attribute = {\n      buffer: attribute\n    };\n  }\n  attribute.buffer = ensureIsBuffer(attribute.buffer, false);\n  return attribute;\n}\nclass Geometry extends EventEmitter {\n  /**\n   * Create a new instance of a geometry\n   * @param options - The options for the geometry.\n   */\n  constructor(options = {}) {\n    super();\n    /** The unique id of the geometry. */\n    this.uid = uid(\"geometry\");\n    /**\n     * the layout key will be generated by WebGPU all geometries that have the same structure\n     * will have the same layout key. This is used to cache the pipeline layout\n     * @internal\n     */\n    this._layoutKey = 0;\n    /** the instance count of the geometry to draw */\n    this.instanceCount = 1;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n    const { attributes, indexBuffer, topology } = options;\n    this.buffers = [];\n    this.attributes = {};\n    if (attributes) {\n      for (const i in attributes) {\n        this.addAttribute(i, attributes[i]);\n      }\n    }\n    this.instanceCount = options.instanceCount ?? 1;\n    if (indexBuffer) {\n      this.addIndex(indexBuffer);\n    }\n    this.topology = topology || \"triangle-list\";\n  }\n  onBufferUpdate() {\n    this._boundsDirty = true;\n    this.emit(\"update\", this);\n  }\n  /**\n   * Returns the requested attribute.\n   * @param id - The name of the attribute required\n   * @returns - The attribute requested.\n   */\n  getAttribute(id) {\n    return this.attributes[id];\n  }\n  /**\n   * Returns the index buffer\n   * @returns - The index buffer.\n   */\n  getIndex() {\n    return this.indexBuffer;\n  }\n  /**\n   * Returns the requested buffer.\n   * @param id - The name of the buffer required.\n   * @returns - The buffer requested.\n   */\n  getBuffer(id) {\n    return this.getAttribute(id).buffer;\n  }\n  /**\n   * Used to figure out how many vertices there are in this geometry\n   * @returns the number of vertices in the geometry\n   */\n  getSize() {\n    for (const i in this.attributes) {\n      const attribute = this.attributes[i];\n      const buffer = attribute.buffer;\n      return buffer.data.length / (attribute.stride / 4 || attribute.size);\n    }\n    return 0;\n  }\n  /**\n   * Adds an attribute to the geometry.\n   * @param name - The name of the attribute to add.\n   * @param attributeOption - The attribute option to add.\n   */\n  addAttribute(name, attributeOption) {\n    const attribute = ensureIsAttribute(attributeOption);\n    const bufferIndex = this.buffers.indexOf(attribute.buffer);\n    if (bufferIndex === -1) {\n      this.buffers.push(attribute.buffer);\n      attribute.buffer.on(\"update\", this.onBufferUpdate, this);\n      attribute.buffer.on(\"change\", this.onBufferUpdate, this);\n    }\n    this.attributes[name] = attribute;\n  }\n  /**\n   * Adds an index buffer to the geometry.\n   * @param indexBuffer - The index buffer to add. Can be a Buffer, TypedArray, or an array of numbers.\n   */\n  addIndex(indexBuffer) {\n    this.indexBuffer = ensureIsBuffer(indexBuffer, true);\n    this.buffers.push(this.indexBuffer);\n  }\n  /** Returns the bounds of the geometry. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this._boundsDirty = false;\n    return getGeometryBounds(this, \"aPosition\", this._bounds);\n  }\n  /**\n   * destroys the geometry.\n   * @param destroyBuffers - destroy the buffers associated with this geometry\n   */\n  destroy(destroyBuffers = false) {\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    if (destroyBuffers) {\n      this.buffers.forEach((buffer) => buffer.destroy());\n    }\n    this.indexBuffer?.destroy();\n    this.attributes = null;\n    this.buffers = null;\n    this.indexBuffer = null;\n    this._bounds = null;\n  }\n}\n\nexport { Geometry };\n//# sourceMappingURL=Geometry.mjs.map\n","\"use strict\";\nfunction getGeometryBounds(geometry, attributeId, bounds) {\n  const attribute = geometry.getAttribute(attributeId);\n  if (!attribute) {\n    bounds.minX = 0;\n    bounds.minY = 0;\n    bounds.maxX = 0;\n    bounds.maxY = 0;\n    return bounds;\n  }\n  const data = attribute.buffer.data;\n  let minX = Infinity;\n  let minY = Infinity;\n  let maxX = -Infinity;\n  let maxY = -Infinity;\n  const byteSize = data.BYTES_PER_ELEMENT;\n  const offset = (attribute.offset || 0) / byteSize;\n  const stride = (attribute.stride || 2 * 4) / byteSize;\n  for (let i = offset; i < data.length; i += stride) {\n    const x = data[i];\n    const y = data[i + 1];\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n  }\n  bounds.minX = minX;\n  bounds.minY = minY;\n  bounds.maxX = maxX;\n  bounds.maxY = maxY;\n  return bounds;\n}\n\nexport { getGeometryBounds };\n//# sourceMappingURL=getGeometryBounds.mjs.map\n","import { UniformGroup } from '../../shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nconst batchSamplersUniformGroupHash = {};\nfunction getBatchSamplersUniformGroup(maxTextures) {\n  let batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures];\n  if (batchSamplersUniformGroup)\n    return batchSamplersUniformGroup;\n  const sampleValues = new Int32Array(maxTextures);\n  for (let i = 0; i < maxTextures; i++) {\n    sampleValues[i] = i;\n  }\n  batchSamplersUniformGroup = batchSamplersUniformGroupHash[maxTextures] = new UniformGroup({\n    uTextures: { value: sampleValues, type: `i32`, size: maxTextures }\n  }, { isStatic: true });\n  return batchSamplersUniformGroup;\n}\n\nexport { getBatchSamplersUniformGroup };\n//# sourceMappingURL=getBatchSamplersUniformGroup.mjs.map\n","\"use strict\";\nconst GlobalResourceRegistry = {\n  /**\n   * Set of registered pools and cleanable objects.\n   * @private\n   */\n  _registeredResources: /* @__PURE__ */ new Set(),\n  /**\n   * Registers a pool or cleanable object for cleanup.\n   * @param {Cleanable} pool - The pool or object to register.\n   */\n  register(pool) {\n    this._registeredResources.add(pool);\n  },\n  /**\n   * Unregisters a pool or cleanable object from cleanup.\n   * @param {Cleanable} pool - The pool or object to unregister.\n   */\n  unregister(pool) {\n    this._registeredResources.delete(pool);\n  },\n  /** Clears all registered pools and cleanable objects. This will call clear() on each registered item. */\n  release() {\n    this._registeredResources.forEach((pool) => pool.clear());\n  },\n  /**\n   * Gets the number of registered pools and cleanable objects.\n   * @returns {number} The count of registered items.\n   */\n  get registeredCount() {\n    return this._registeredResources.size;\n  },\n  /**\n   * Checks if a specific pool or cleanable object is registered.\n   * @param {Cleanable} pool - The pool or object to check.\n   * @returns {boolean} True if the item is registered, false otherwise.\n   */\n  isRegistered(pool) {\n    return this._registeredResources.has(pool);\n  },\n  /**\n   * Removes all registrations without clearing the pools.\n   * Useful if you want to reset the collector without affecting the pools.\n   */\n  reset() {\n    this._registeredResources.clear();\n  }\n};\n\nexport { GlobalResourceRegistry };\n//# sourceMappingURL=GlobalResourceRegistry.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { Ticker } from '../../../../../ticker/Ticker.mjs';\nimport { detectVideoAlphaMode } from '../../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nconst _VideoSource = class _VideoSource extends TextureSource {\n  constructor(options) {\n    super(options);\n    // Public\n    /** Whether or not the video is ready to play. */\n    this.isReady = false;\n    /** The upload method for this texture. */\n    this.uploadMethodId = \"video\";\n    options = {\n      ..._VideoSource.defaultOptions,\n      ...options\n    };\n    this._autoUpdate = true;\n    this._isConnectedToTicker = false;\n    this._updateFPS = options.updateFPS || 0;\n    this._msToNextUpdate = 0;\n    this.autoPlay = options.autoPlay !== false;\n    this.alphaMode = options.alphaMode ?? \"premultiply-alpha-on-upload\";\n    this._videoFrameRequestCallback = this._videoFrameRequestCallback.bind(this);\n    this._videoFrameRequestCallbackHandle = null;\n    this._load = null;\n    this._resolve = null;\n    this._reject = null;\n    this._onCanPlay = this._onCanPlay.bind(this);\n    this._onCanPlayThrough = this._onCanPlayThrough.bind(this);\n    this._onError = this._onError.bind(this);\n    this._onPlayStart = this._onPlayStart.bind(this);\n    this._onPlayStop = this._onPlayStop.bind(this);\n    this._onSeeked = this._onSeeked.bind(this);\n    if (options.autoLoad !== false) {\n      void this.load();\n    }\n  }\n  /** Update the video frame if the source is not destroyed and meets certain conditions. */\n  updateFrame() {\n    if (this.destroyed) {\n      return;\n    }\n    if (this._updateFPS) {\n      const elapsedMS = Ticker.shared.elapsedMS * this.resource.playbackRate;\n      this._msToNextUpdate = Math.floor(this._msToNextUpdate - elapsedMS);\n    }\n    if (!this._updateFPS || this._msToNextUpdate <= 0) {\n      this._msToNextUpdate = this._updateFPS ? Math.floor(1e3 / this._updateFPS) : 0;\n    }\n    if (this.isValid) {\n      this.update();\n    }\n  }\n  /** Callback to update the video frame and potentially request the next frame update. */\n  _videoFrameRequestCallback() {\n    this.updateFrame();\n    if (this.destroyed) {\n      this._videoFrameRequestCallbackHandle = null;\n    } else {\n      this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n        this._videoFrameRequestCallback\n      );\n    }\n  }\n  /**\n   * Checks if the resource has valid dimensions.\n   * @returns {boolean} True if width and height are set, otherwise false.\n   */\n  get isValid() {\n    return !!this.resource.videoWidth && !!this.resource.videoHeight;\n  }\n  /**\n   * Start preloading the video resource.\n   * @returns {Promise<this>} Handle the validate event\n   */\n  async load() {\n    if (this._load) {\n      return this._load;\n    }\n    const source = this.resource;\n    const options = this.options;\n    if ((source.readyState === source.HAVE_ENOUGH_DATA || source.readyState === source.HAVE_FUTURE_DATA) && source.width && source.height) {\n      source.complete = true;\n    }\n    source.addEventListener(\"play\", this._onPlayStart);\n    source.addEventListener(\"pause\", this._onPlayStop);\n    source.addEventListener(\"seeked\", this._onSeeked);\n    if (!this._isSourceReady()) {\n      if (!options.preload) {\n        source.addEventListener(\"canplay\", this._onCanPlay);\n      }\n      source.addEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.addEventListener(\"error\", this._onError, true);\n    } else {\n      this._mediaReady();\n    }\n    this.alphaMode = await detectVideoAlphaMode();\n    this._load = new Promise((resolve, reject) => {\n      if (this.isValid) {\n        resolve(this);\n      } else {\n        this._resolve = resolve;\n        this._reject = reject;\n        if (options.preloadTimeoutMs !== void 0) {\n          this._preloadTimeout = setTimeout(() => {\n            this._onError(new ErrorEvent(`Preload exceeded timeout of ${options.preloadTimeoutMs}ms`));\n          });\n        }\n        source.load();\n      }\n    });\n    return this._load;\n  }\n  /**\n   * Handle video error events.\n   * @param event - The error event\n   */\n  _onError(event) {\n    this.resource.removeEventListener(\"error\", this._onError, true);\n    this.emit(\"error\", event);\n    if (this._reject) {\n      this._reject(event);\n      this._reject = null;\n      this._resolve = null;\n    }\n  }\n  /**\n   * Checks if the underlying source is playing.\n   * @returns True if playing.\n   */\n  _isSourcePlaying() {\n    const source = this.resource;\n    return !source.paused && !source.ended;\n  }\n  /**\n   * Checks if the underlying source is ready for playing.\n   * @returns True if ready.\n   */\n  _isSourceReady() {\n    const source = this.resource;\n    return source.readyState > 2;\n  }\n  /** Runs the update loop when the video is ready to play. */\n  _onPlayStart() {\n    if (!this.isValid) {\n      this._mediaReady();\n    }\n    this._configureAutoUpdate();\n  }\n  /** Stops the update loop when a pause event is triggered. */\n  _onPlayStop() {\n    this._configureAutoUpdate();\n  }\n  /** Handles behavior when the video completes seeking to the current playback position. */\n  _onSeeked() {\n    if (this._autoUpdate && !this._isSourcePlaying()) {\n      this._msToNextUpdate = 0;\n      this.updateFrame();\n      this._msToNextUpdate = 0;\n    }\n  }\n  _onCanPlay() {\n    const source = this.resource;\n    source.removeEventListener(\"canplay\", this._onCanPlay);\n    this._mediaReady();\n  }\n  _onCanPlayThrough() {\n    const source = this.resource;\n    source.removeEventListener(\"canplaythrough\", this._onCanPlay);\n    if (this._preloadTimeout) {\n      clearTimeout(this._preloadTimeout);\n      this._preloadTimeout = void 0;\n    }\n    this._mediaReady();\n  }\n  /** Fired when the video is loaded and ready to play. */\n  _mediaReady() {\n    const source = this.resource;\n    if (this.isValid) {\n      this.isReady = true;\n      this.resize(source.videoWidth, source.videoHeight);\n    }\n    this._msToNextUpdate = 0;\n    this.updateFrame();\n    this._msToNextUpdate = 0;\n    if (this._resolve) {\n      this._resolve(this);\n      this._resolve = null;\n      this._reject = null;\n    }\n    if (this._isSourcePlaying()) {\n      this._onPlayStart();\n    } else if (this.autoPlay) {\n      void this.resource.play();\n    }\n  }\n  /** Cleans up resources and event listeners associated with this texture. */\n  destroy() {\n    this._configureAutoUpdate();\n    const source = this.resource;\n    if (source) {\n      source.removeEventListener(\"play\", this._onPlayStart);\n      source.removeEventListener(\"pause\", this._onPlayStop);\n      source.removeEventListener(\"seeked\", this._onSeeked);\n      source.removeEventListener(\"canplay\", this._onCanPlay);\n      source.removeEventListener(\"canplaythrough\", this._onCanPlayThrough);\n      source.removeEventListener(\"error\", this._onError, true);\n      source.pause();\n      source.src = \"\";\n      source.load();\n    }\n    super.destroy();\n  }\n  /** Should the base texture automatically update itself, set to true by default. */\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(value) {\n    if (value !== this._autoUpdate) {\n      this._autoUpdate = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * How many times a second to update the texture from the video.\n   * Leave at 0 to update at every render.\n   * A lower fps can help performance, as updating the texture at 60fps on a 30ps video may not be efficient.\n   */\n  get updateFPS() {\n    return this._updateFPS;\n  }\n  set updateFPS(value) {\n    if (value !== this._updateFPS) {\n      this._updateFPS = value;\n      this._configureAutoUpdate();\n    }\n  }\n  /**\n   * Configures the updating mechanism based on the current state and settings.\n   *\n   * This method decides between using the browser's native video frame callback or a custom ticker\n   * for updating the video frame. It ensures optimal performance and responsiveness\n   * based on the video's state, playback status, and the desired frames-per-second setting.\n   *\n   * - If `_autoUpdate` is enabled and the video source is playing:\n   *   - It will prefer the native video frame callback if available and no specific FPS is set.\n   *   - Otherwise, it will use a custom ticker for manual updates.\n   * - If `_autoUpdate` is disabled or the video isn't playing, any active update mechanisms are halted.\n   */\n  _configureAutoUpdate() {\n    if (this._autoUpdate && this._isSourcePlaying()) {\n      if (!this._updateFPS && this.resource.requestVideoFrameCallback) {\n        if (this._isConnectedToTicker) {\n          Ticker.shared.remove(this.updateFrame, this);\n          this._isConnectedToTicker = false;\n          this._msToNextUpdate = 0;\n        }\n        if (this._videoFrameRequestCallbackHandle === null) {\n          this._videoFrameRequestCallbackHandle = this.resource.requestVideoFrameCallback(\n            this._videoFrameRequestCallback\n          );\n        }\n      } else {\n        if (this._videoFrameRequestCallbackHandle !== null) {\n          this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n          this._videoFrameRequestCallbackHandle = null;\n        }\n        if (!this._isConnectedToTicker) {\n          Ticker.shared.add(this.updateFrame, this);\n          this._isConnectedToTicker = true;\n          this._msToNextUpdate = 0;\n        }\n      }\n    } else {\n      if (this._videoFrameRequestCallbackHandle !== null) {\n        this.resource.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle);\n        this._videoFrameRequestCallbackHandle = null;\n      }\n      if (this._isConnectedToTicker) {\n        Ticker.shared.remove(this.updateFrame, this);\n        this._isConnectedToTicker = false;\n        this._msToNextUpdate = 0;\n      }\n    }\n  }\n  static test(resource) {\n    return globalThis.HTMLVideoElement && resource instanceof HTMLVideoElement;\n  }\n};\n_VideoSource.extension = ExtensionType.TextureSource;\n/** The default options for video sources. */\n_VideoSource.defaultOptions = {\n  ...TextureSource.defaultOptions,\n  /** If true, the video will start loading immediately. */\n  autoLoad: true,\n  /** If true, the video will start playing as soon as it is loaded. */\n  autoPlay: true,\n  /** The number of times a second to update the texture from the video. Leave at 0 to update at every render. */\n  updateFPS: 0,\n  /** If true, the video will be loaded with the `crossorigin` attribute. */\n  crossorigin: true,\n  /** If true, the video will loop when it ends. */\n  loop: false,\n  /** If true, the video will be muted. */\n  muted: true,\n  /** If true, the video will play inline. */\n  playsinline: true,\n  /** If true, the video will be preloaded. */\n  preload: false\n};\n/**\n * Map of video MIME types that can't be directly derived from file extensions.\n * @readonly\n */\n_VideoSource.MIME_TYPES = {\n  ogv: \"video/ogg\",\n  mov: \"video/quicktime\",\n  m4v: \"video/mp4\"\n};\nlet VideoSource = _VideoSource;\n\nexport { VideoSource };\n//# sourceMappingURL=VideoSource.mjs.map\n","\"use strict\";\nfunction assignWithIgnore(target, options, ignore = {}) {\n  for (const key in options) {\n    if (!ignore[key] && options[key] !== void 0) {\n      target[key] = options[key];\n    }\n  }\n}\n\nexport { assignWithIgnore };\n//# sourceMappingURL=assignWithIgnore.mjs.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.insert = exports.search = void 0;\n/**\n * Return the index of the element at or before the given property\n * @hidden\n */\nfunction search(array, value, prop) {\n    if (prop === void 0) { prop = \"ticks\"; }\n    var beginning = 0;\n    var len = array.length;\n    var end = len;\n    if (len > 0 && array[len - 1][prop] <= value) {\n        return len - 1;\n    }\n    while (beginning < end) {\n        // calculate the midpoint for roughly equal partition\n        var midPoint = Math.floor(beginning + (end - beginning) / 2);\n        var event_1 = array[midPoint];\n        var nextEvent = array[midPoint + 1];\n        if (event_1[prop] === value) {\n            // choose the last one that has the same value\n            for (var i = midPoint; i < array.length; i++) {\n                var testEvent = array[i];\n                if (testEvent[prop] === value) {\n                    midPoint = i;\n                }\n            }\n            return midPoint;\n        }\n        else if (event_1[prop] < value && nextEvent[prop] > value) {\n            return midPoint;\n        }\n        else if (event_1[prop] > value) {\n            // search lower\n            end = midPoint;\n        }\n        else if (event_1[prop] < value) {\n            // search upper\n            beginning = midPoint + 1;\n        }\n    }\n    return -1;\n}\nexports.search = search;\n/**\n * Does a binary search to insert the note\n * in the correct spot in the array\n * @hidden\n */\nfunction insert(array, event, prop) {\n    if (prop === void 0) { prop = \"ticks\"; }\n    if (array.length) {\n        var index = search(array, event[prop], prop);\n        array.splice(index + 1, 0, event);\n    }\n    else {\n        array.push(event);\n    }\n}\nexports.insert = insert;\n//# sourceMappingURL=BinarySearch.js.map","import { uniformParsers } from './uniformParsers.mjs';\n\n\"use strict\";\nfunction createUboSyncFunction(uboElements, parserCode, arrayGenerationFunction, singleSettersMap) {\n  const funcFragments = [`\n        var v = null;\n        var v2 = null;\n        var t = 0;\n        var index = 0;\n        var name = null;\n        var arrayOffset = null;\n    `];\n  let prev = 0;\n  for (let i = 0; i < uboElements.length; i++) {\n    const uboElement = uboElements[i];\n    const name = uboElement.data.name;\n    let parsed = false;\n    let offset = 0;\n    for (let j = 0; j < uniformParsers.length; j++) {\n      const uniformParser = uniformParsers[j];\n      if (uniformParser.test(uboElement.data)) {\n        offset = uboElement.offset / 4;\n        funcFragments.push(\n          `name = \"${name}\";`,\n          `offset += ${offset - prev};`,\n          uniformParsers[j][parserCode] || uniformParsers[j].ubo\n        );\n        parsed = true;\n        break;\n      }\n    }\n    if (!parsed) {\n      if (uboElement.data.size > 1) {\n        offset = uboElement.offset / 4;\n        funcFragments.push(arrayGenerationFunction(uboElement, offset - prev));\n      } else {\n        const template = singleSettersMap[uboElement.data.type];\n        offset = uboElement.offset / 4;\n        funcFragments.push(\n          /* wgsl */\n          `\n                    v = uv.${name};\n                    offset += ${offset - prev};\n                    ${template};\n                `\n        );\n      }\n    }\n    prev = offset;\n  }\n  const fragmentSrc = funcFragments.join(\"\\n\");\n  return new Function(\n    \"uv\",\n    \"data\",\n    \"dataInt32\",\n    \"offset\",\n    fragmentSrc\n  );\n}\n\nexport { createUboSyncFunction };\n//# sourceMappingURL=createUboSyncFunction.mjs.map\n","\"use strict\";\nconst localUniformMSDFBit = {\n  name: \"local-uniform-msdf-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32,\n                uRound:f32,\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            vColor *= localUniforms.uColor;\n            modelMatrix *= localUniforms.uTransformMatrix;\n        `\n    ),\n    end: (\n      /* wgsl */\n      `\n            if(localUniforms.uRound == 1)\n            {\n                vPosition = vec4(roundPixels(vPosition.xy, globalUniforms.uResolution), vPosition.zw);\n            }\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            struct LocalUniforms {\n                uColor:vec4<f32>,\n                uTransformMatrix:mat3x3<f32>,\n                uDistance: f32\n            }\n\n            @group(2) @binding(0) var<uniform> localUniforms : LocalUniforms;\n         `\n    ),\n    main: (\n      /* wgsl */\n      `\n            outColor = vec4<f32>(calculateMSDFAlpha(outColor, localUniforms.uColor, localUniforms.uDistance));\n        `\n    )\n  }\n};\nconst localUniformMSDFBitGl = {\n  name: \"local-uniform-msdf-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            uniform mat3 uTransformMatrix;\n            uniform vec4 uColor;\n            uniform float uRound;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            vColor *= uColor;\n            modelMatrix *= uTransformMatrix;\n        `\n    ),\n    end: (\n      /* glsl */\n      `\n            if(uRound == 1.)\n            {\n                gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\n            }\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* glsl */\n      `\n            uniform float uDistance;\n         `\n    ),\n    main: (\n      /* glsl */\n      `\n            outColor = vec4(calculateMSDFAlpha(outColor, vColor, uDistance));\n        `\n    )\n  }\n};\n\nexport { localUniformMSDFBit, localUniformMSDFBitGl };\n//# sourceMappingURL=localUniformMSDFBit.mjs.map\n","\"use strict\";\nconst mSDFBit = {\n  name: \"msdf-bit\",\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            fn calculateMSDFAlpha(msdfColor:vec4<f32>, shapeColor:vec4<f32>, distance:f32) -> f32 {\n\n                // MSDF\n                var median = msdfColor.r + msdfColor.g + msdfColor.b -\n                    min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                    max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n\n                // SDF\n                median = min(median, msdfColor.a);\n\n                var screenPxDistance = distance * (median - 0.5);\n                var alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                var luma: f32 = dot(shapeColor.rgb, vec3<f32>(0.299, 0.587, 0.114));\n                var gamma: f32 = mix(1.0, 1.0 / 2.2, luma);\n                var coverage: f32 = pow(shapeColor.a * alpha, gamma);\n\n                return coverage;\n\n            }\n        `\n    )\n  }\n};\nconst mSDFBitGl = {\n  name: \"msdf-bit\",\n  fragment: {\n    header: (\n      /* glsl */\n      `\n            float calculateMSDFAlpha(vec4 msdfColor, vec4 shapeColor, float distance) {\n\n                // MSDF\n                float median = msdfColor.r + msdfColor.g + msdfColor.b -\n                                min(msdfColor.r, min(msdfColor.g, msdfColor.b)) -\n                                max(msdfColor.r, max(msdfColor.g, msdfColor.b));\n\n                // SDF\n                median = min(median, msdfColor.a);\n\n                float screenPxDistance = distance * (median - 0.5);\n                float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\n\n                if (median < 0.01) {\n                    alpha = 0.0;\n                } else if (median > 0.99) {\n                    alpha = 1.0;\n                }\n\n                // Gamma correction for coverage-like alpha\n                float luma = dot(shapeColor.rgb, vec3(0.299, 0.587, 0.114));\n                float gamma = mix(1.0, 1.0 / 2.2, luma);\n                float coverage = pow(shapeColor.a * alpha, gamma);\n\n                return coverage;\n            }\n        `\n    )\n  }\n};\n\nexport { mSDFBit, mSDFBitGl };\n//# sourceMappingURL=mSDFBit.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGpuProgram, compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { colorBit, colorBitGl } from '../../../rendering/high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBit, generateTextureBatchBitGl } from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { roundPixelsBit, roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { getBatchSamplersUniformGroup } from '../../../rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { localUniformMSDFBit, localUniformMSDFBitGl } from './shader-bits/localUniformMSDFBit.mjs';\nimport { mSDFBit, mSDFBitGl } from './shader-bits/mSDFBit.mjs';\n\n\"use strict\";\nlet gpuProgram;\nlet glProgram;\nclass SdfShader extends Shader {\n  constructor(maxTextures) {\n    const uniforms = new UniformGroup({\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uDistance: { value: 4, type: \"f32\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    gpuProgram ?? (gpuProgram = compileHighShaderGpuProgram({\n      name: \"sdf-shader\",\n      bits: [\n        colorBit,\n        generateTextureBatchBit(maxTextures),\n        localUniformMSDFBit,\n        mSDFBit,\n        roundPixelsBit\n      ]\n    }));\n    glProgram ?? (glProgram = compileHighShaderGlProgram({\n      name: \"sdf-shader\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(maxTextures),\n        localUniformMSDFBitGl,\n        mSDFBitGl,\n        roundPixelsBitGl\n      ]\n    }));\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        localUniforms: uniforms,\n        batchSamplers: getBatchSamplersUniformGroup(maxTextures)\n      }\n    });\n  }\n}\n\nexport { SdfShader };\n//# sourceMappingURL=SdfShader.mjs.map\n","import { Cache } from '../../assets/cache/Cache.mjs';\nimport { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { Graphics } from '../graphics/shared/Graphics.mjs';\nimport { CanvasTextMetrics } from '../text/canvas/CanvasTextMetrics.mjs';\nimport { SdfShader } from '../text/sdfShader/SdfShader.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\nimport { getBitmapTextLayout } from './utils/getBitmapTextLayout.mjs';\n\n\"use strict\";\nclass BitmapTextGraphics extends Graphics {\n  destroy() {\n    if (this.context.customShader) {\n      this.context.customShader.destroy();\n    }\n    super.destroy();\n  }\n}\nclass BitmapTextPipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  validateRenderable(bitmapText) {\n    const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n    return this._renderer.renderPipes.graphics.validateRenderable(graphicsRenderable);\n  }\n  addRenderable(bitmapText, instructionSet) {\n    const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n    syncWithProxy(bitmapText, graphicsRenderable);\n    if (bitmapText._didTextUpdate) {\n      bitmapText._didTextUpdate = false;\n      this._updateContext(bitmapText, graphicsRenderable);\n    }\n    this._renderer.renderPipes.graphics.addRenderable(graphicsRenderable, instructionSet);\n    if (graphicsRenderable.context.customShader) {\n      this._updateDistanceField(bitmapText);\n    }\n  }\n  updateRenderable(bitmapText) {\n    const graphicsRenderable = this._getGpuBitmapText(bitmapText);\n    syncWithProxy(bitmapText, graphicsRenderable);\n    this._renderer.renderPipes.graphics.updateRenderable(graphicsRenderable);\n    if (graphicsRenderable.context.customShader) {\n      this._updateDistanceField(bitmapText);\n    }\n  }\n  _updateContext(bitmapText, proxyGraphics) {\n    const { context } = proxyGraphics;\n    const bitmapFont = BitmapFontManager.getFont(bitmapText.text, bitmapText._style);\n    context.clear();\n    if (bitmapFont.distanceField.type !== \"none\") {\n      if (!context.customShader) {\n        context.customShader = new SdfShader(this._renderer.limits.maxBatchableTextures);\n      }\n    }\n    const chars = CanvasTextMetrics.graphemeSegmenter(bitmapText.text);\n    const style = bitmapText._style;\n    let currentY = bitmapFont.baseLineOffset;\n    const bitmapTextLayout = getBitmapTextLayout(chars, style, bitmapFont, true);\n    const padding = style.padding;\n    const scale = bitmapTextLayout.scale;\n    let tx = bitmapTextLayout.width;\n    let ty = bitmapTextLayout.height + bitmapTextLayout.offsetY;\n    if (style._stroke) {\n      tx += style._stroke.width / scale;\n      ty += style._stroke.width / scale;\n    }\n    context.translate(-bitmapText._anchor._x * tx - padding, -bitmapText._anchor._y * ty - padding).scale(scale, scale);\n    const tint = bitmapFont.applyFillAsTint ? style._fill.color : 16777215;\n    let fontSize = bitmapFont.fontMetrics.fontSize;\n    let lineHeight = bitmapFont.lineHeight;\n    if (style.lineHeight) {\n      fontSize = style.fontSize / scale;\n      lineHeight = style.lineHeight / scale;\n    }\n    let linePositionYShift = (lineHeight - fontSize) / 2;\n    if (linePositionYShift - bitmapFont.baseLineOffset < 0) {\n      linePositionYShift = 0;\n    }\n    for (let i = 0; i < bitmapTextLayout.lines.length; i++) {\n      const line = bitmapTextLayout.lines[i];\n      for (let j = 0; j < line.charPositions.length; j++) {\n        const char = line.chars[j];\n        const charData = bitmapFont.chars[char];\n        if (charData?.texture) {\n          const texture = charData.texture;\n          context.texture(\n            texture,\n            tint ? tint : \"black\",\n            Math.round(line.charPositions[j] + charData.xOffset),\n            Math.round(currentY + charData.yOffset + linePositionYShift),\n            texture.orig.width,\n            texture.orig.height\n          );\n        }\n      }\n      currentY += lineHeight;\n    }\n  }\n  _getGpuBitmapText(bitmapText) {\n    return bitmapText._gpuData[this._renderer.uid] || this.initGpuText(bitmapText);\n  }\n  initGpuText(bitmapText) {\n    const proxyRenderable = new BitmapTextGraphics();\n    bitmapText._gpuData[this._renderer.uid] = proxyRenderable;\n    this._updateContext(bitmapText, proxyRenderable);\n    return proxyRenderable;\n  }\n  _updateDistanceField(bitmapText) {\n    const context = this._getGpuBitmapText(bitmapText).context;\n    const fontFamily = bitmapText._style.fontFamily;\n    const dynamicFont = Cache.get(`${fontFamily}-bitmap`);\n    const { a, b, c, d } = bitmapText.groupTransform;\n    const dx = Math.sqrt(a * a + b * b);\n    const dy = Math.sqrt(c * c + d * d);\n    const worldScale = (Math.abs(dx) + Math.abs(dy)) / 2;\n    const fontScale = dynamicFont.baseRenderedFontSize / bitmapText._style.fontSize;\n    const distance = worldScale * dynamicFont.distanceField.range * (1 / fontScale);\n    context.customShader.resources.localUniforms.uniforms.uDistance = distance;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nBitmapTextPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"bitmapText\"\n};\nfunction syncWithProxy(container, proxy) {\n  proxy.groupTransform = container.groupTransform;\n  proxy.groupColorAlpha = container.groupColorAlpha;\n  proxy.groupColor = container.groupColor;\n  proxy.groupBlendMode = container.groupBlendMode;\n  proxy.globalDisplayStatus = container.globalDisplayStatus;\n  proxy.groupTransform = container.groupTransform;\n  proxy.localDisplayStatus = container.localDisplayStatus;\n  proxy.groupAlpha = container.groupAlpha;\n  proxy._roundPixels = container._roundPixels;\n}\n\nexport { BitmapTextGraphics, BitmapTextPipe };\n//# sourceMappingURL=BitmapTextPipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { BitmapTextPipe } from './BitmapTextPipe.mjs';\n\n\"use strict\";\nextensions.add(BitmapTextPipe);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nconst fragTemplate = [\n  \"precision mediump float;\",\n  \"void main(void){\",\n  \"float test = 0.1;\",\n  \"%forloop%\",\n  \"gl_FragColor = vec4(0.0);\",\n  \"}\"\n].join(\"\\n\");\nfunction generateIfTestSrc(maxIfs) {\n  let src = \"\";\n  for (let i = 0; i < maxIfs; ++i) {\n    if (i > 0) {\n      src += \"\\nelse \";\n    }\n    if (i < maxIfs - 1) {\n      src += `if(test == ${i}.0){}`;\n    }\n  }\n  return src;\n}\nfunction checkMaxIfStatementsInShader(maxIfs, gl) {\n  if (maxIfs === 0) {\n    throw new Error(\"Invalid value of `0` passed to `checkMaxIfStatementsInShader`\");\n  }\n  const shader = gl.createShader(gl.FRAGMENT_SHADER);\n  try {\n    while (true) {\n      const fragmentSrc = fragTemplate.replace(/%forloop%/gi, generateIfTestSrc(maxIfs));\n      gl.shaderSource(shader, fragmentSrc);\n      gl.compileShader(shader);\n      if (!gl.getShaderParameter(shader, gl.COMPILE_STATUS)) {\n        maxIfs = maxIfs / 2 | 0;\n      } else {\n        break;\n      }\n    }\n  } finally {\n    gl.deleteShader(shader);\n  }\n  return maxIfs;\n}\n\nexport { checkMaxIfStatementsInShader };\n//# sourceMappingURL=checkMaxIfStatementsInShader.mjs.map\n","\"use strict\";\nfunction transformVertices(vertices, m, offset, stride, size) {\n  const a = m.a;\n  const b = m.b;\n  const c = m.c;\n  const d = m.d;\n  const tx = m.tx;\n  const ty = m.ty;\n  offset || (offset = 0);\n  stride || (stride = 2);\n  size || (size = vertices.length / stride - offset);\n  let index = offset * stride;\n  for (let i = 0; i < size; i++) {\n    const x = vertices[index];\n    const y = vertices[index + 1];\n    vertices[index] = a * x + c * y + tx;\n    vertices[index + 1] = b * x + d * y + ty;\n    index += stride;\n  }\n}\n\nexport { transformVertices };\n//# sourceMappingURL=transformVertices.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildCircle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"circle\"\n  },\n  build(shape, points) {\n    let x;\n    let y;\n    let dx;\n    let dy;\n    let rx;\n    let ry;\n    if (shape.type === \"circle\") {\n      const circle = shape;\n      rx = ry = circle.radius;\n      if (rx <= 0) {\n        return false;\n      }\n      x = circle.x;\n      y = circle.y;\n      dx = dy = 0;\n    } else if (shape.type === \"ellipse\") {\n      const ellipse = shape;\n      rx = ellipse.halfWidth;\n      ry = ellipse.halfHeight;\n      if (rx <= 0 || ry <= 0) {\n        return false;\n      }\n      x = ellipse.x;\n      y = ellipse.y;\n      dx = dy = 0;\n    } else {\n      const roundedRect = shape;\n      const halfWidth = roundedRect.width / 2;\n      const halfHeight = roundedRect.height / 2;\n      x = roundedRect.x + halfWidth;\n      y = roundedRect.y + halfHeight;\n      rx = ry = Math.max(0, Math.min(roundedRect.radius, Math.min(halfWidth, halfHeight)));\n      dx = halfWidth - rx;\n      dy = halfHeight - ry;\n    }\n    if (dx < 0 || dy < 0) {\n      return false;\n    }\n    const n = Math.ceil(2.3 * Math.sqrt(rx + ry));\n    const m = n * 8 + (dx ? 4 : 0) + (dy ? 4 : 0);\n    if (m === 0) {\n      return false;\n    }\n    if (n === 0) {\n      points[0] = points[6] = x + dx;\n      points[1] = points[3] = y + dy;\n      points[2] = points[4] = x - dx;\n      points[5] = points[7] = y - dy;\n      return true;\n    }\n    let j1 = 0;\n    let j2 = n * 4 + (dx ? 2 : 0) + 2;\n    let j3 = j2;\n    let j4 = m;\n    let x0 = dx + rx;\n    let y0 = dy;\n    let x1 = x + x0;\n    let x2 = x - x0;\n    let y1 = y + y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j2] = y1;\n    points[--j2] = x2;\n    if (dy) {\n      const y22 = y - y0;\n      points[j3++] = x2;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x1;\n    }\n    for (let i = 1; i < n; i++) {\n      const a = Math.PI / 2 * (i / n);\n      const x02 = dx + Math.cos(a) * rx;\n      const y02 = dy + Math.sin(a) * ry;\n      const x12 = x + x02;\n      const x22 = x - x02;\n      const y12 = y + y02;\n      const y22 = y - y02;\n      points[j1++] = x12;\n      points[j1++] = y12;\n      points[--j2] = y12;\n      points[--j2] = x22;\n      points[j3++] = x22;\n      points[j3++] = y22;\n      points[--j4] = y22;\n      points[--j4] = x12;\n    }\n    x0 = dx;\n    y0 = dy + ry;\n    x1 = x + x0;\n    x2 = x - x0;\n    y1 = y + y0;\n    const y2 = y - y0;\n    points[j1++] = x1;\n    points[j1++] = y1;\n    points[--j4] = y2;\n    points[--j4] = x1;\n    if (dx) {\n      points[j1++] = x2;\n      points[j1++] = y1;\n      points[--j4] = y2;\n      points[--j4] = x2;\n    }\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    if (points.length === 0) {\n      return;\n    }\n    let centerX = 0;\n    let centerY = 0;\n    for (let i = 0; i < points.length; i += 2) {\n      centerX += points[i];\n      centerY += points[i + 1];\n    }\n    centerX /= points.length / 2;\n    centerY /= points.length / 2;\n    let count = verticesOffset;\n    vertices[count * verticesStride] = centerX;\n    vertices[count * verticesStride + 1] = centerY;\n    const centerIndex = count++;\n    for (let i = 0; i < points.length; i += 2) {\n      vertices[count * verticesStride] = points[i];\n      vertices[count * verticesStride + 1] = points[i + 1];\n      if (i > 0) {\n        indices[indicesOffset++] = count;\n        indices[indicesOffset++] = centerIndex;\n        indices[indicesOffset++] = count - 1;\n      }\n      count++;\n    }\n    indices[indicesOffset++] = centerIndex + 1;\n    indices[indicesOffset++] = centerIndex;\n    indices[indicesOffset++] = count - 1;\n  }\n};\nconst buildEllipse = { ...buildCircle, extension: { ...buildCircle.extension, name: \"ellipse\" } };\nconst buildRoundedRectangle = { ...buildCircle, extension: { ...buildCircle.extension, name: \"roundedRectangle\" } };\n\nexport { buildCircle, buildEllipse, buildRoundedRectangle };\n//# sourceMappingURL=buildCircle.mjs.map\n","\"use strict\";\nconst closePointEps = 1e-4;\nconst curveEps = 1e-4;\n\nexport { closePointEps, curveEps };\n//# sourceMappingURL=const.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { closePointEps, curveEps } from '../const.mjs';\nimport { getOrientationOfPoints } from '../utils/getOrientationOfPoints.mjs';\n\n\"use strict\";\nfunction square(x, y, nx, ny, innerWeight, outerWeight, clockwise, verts) {\n  const ix = x - nx * innerWeight;\n  const iy = y - ny * innerWeight;\n  const ox = x + nx * outerWeight;\n  const oy = y + ny * outerWeight;\n  let exx;\n  let eyy;\n  if (clockwise) {\n    exx = ny;\n    eyy = -nx;\n  } else {\n    exx = -ny;\n    eyy = nx;\n  }\n  const eix = ix + exx;\n  const eiy = iy + eyy;\n  const eox = ox + exx;\n  const eoy = oy + eyy;\n  verts.push(eix, eiy);\n  verts.push(eox, eoy);\n  return 2;\n}\nfunction round(cx, cy, sx, sy, ex, ey, verts, clockwise) {\n  const cx2p0x = sx - cx;\n  const cy2p0y = sy - cy;\n  let angle0 = Math.atan2(cx2p0x, cy2p0y);\n  let angle1 = Math.atan2(ex - cx, ey - cy);\n  if (clockwise && angle0 < angle1) {\n    angle0 += Math.PI * 2;\n  } else if (!clockwise && angle0 > angle1) {\n    angle1 += Math.PI * 2;\n  }\n  let startAngle = angle0;\n  const angleDiff = angle1 - angle0;\n  const absAngleDiff = Math.abs(angleDiff);\n  const radius = Math.sqrt(cx2p0x * cx2p0x + cy2p0y * cy2p0y);\n  const segCount = (15 * absAngleDiff * Math.sqrt(radius) / Math.PI >> 0) + 1;\n  const angleInc = angleDiff / segCount;\n  startAngle += angleInc;\n  if (clockwise) {\n    verts.push(cx, cy);\n    verts.push(sx, sy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(cx, cy);\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n    }\n    verts.push(cx, cy);\n    verts.push(ex, ey);\n  } else {\n    verts.push(sx, sy);\n    verts.push(cx, cy);\n    for (let i = 1, angle = startAngle; i < segCount; i++, angle += angleInc) {\n      verts.push(\n        cx + Math.sin(angle) * radius,\n        cy + Math.cos(angle) * radius\n      );\n      verts.push(cx, cy);\n    }\n    verts.push(ex, ey);\n    verts.push(cx, cy);\n  }\n  return segCount * 2;\n}\nfunction buildLine(points, lineStyle, flipAlignment, closed, vertices, indices) {\n  const eps = closePointEps;\n  if (points.length === 0) {\n    return;\n  }\n  const style = lineStyle;\n  let alignment = style.alignment;\n  if (lineStyle.alignment !== 0.5) {\n    let orientation = getOrientationOfPoints(points);\n    if (flipAlignment)\n      orientation *= -1;\n    alignment = (alignment - 0.5) * orientation + 0.5;\n  }\n  const firstPoint = new Point(points[0], points[1]);\n  const lastPoint = new Point(points[points.length - 2], points[points.length - 1]);\n  const closedShape = closed;\n  const closedPath = Math.abs(firstPoint.x - lastPoint.x) < eps && Math.abs(firstPoint.y - lastPoint.y) < eps;\n  if (closedShape) {\n    points = points.slice();\n    if (closedPath) {\n      points.pop();\n      points.pop();\n      lastPoint.set(points[points.length - 2], points[points.length - 1]);\n    }\n    const midPointX = (firstPoint.x + lastPoint.x) * 0.5;\n    const midPointY = (lastPoint.y + firstPoint.y) * 0.5;\n    points.unshift(midPointX, midPointY);\n    points.push(midPointX, midPointY);\n  }\n  const verts = vertices;\n  const length = points.length / 2;\n  let indexCount = points.length;\n  const indexStart = verts.length / 2;\n  const width = style.width / 2;\n  const widthSquared = width * width;\n  const miterLimitSquared = style.miterLimit * style.miterLimit;\n  let x0 = points[0];\n  let y0 = points[1];\n  let x1 = points[2];\n  let y1 = points[3];\n  let x2 = 0;\n  let y2 = 0;\n  let perpX = -(y0 - y1);\n  let perpY = x0 - x1;\n  let perp1x = 0;\n  let perp1y = 0;\n  let dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  const ratio = alignment;\n  const innerWeight = (1 - ratio) * 2;\n  const outerWeight = ratio * 2;\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x0 - perpX * (innerWeight - outerWeight) * 0.5,\n        y0 - perpY * (innerWeight - outerWeight) * 0.5,\n        x0 - perpX * innerWeight,\n        y0 - perpY * innerWeight,\n        x0 + perpX * outerWeight,\n        y0 + perpY * outerWeight,\n        verts,\n        true\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x0, y0, perpX, perpY, innerWeight, outerWeight, true, verts);\n    }\n  }\n  verts.push(\n    x0 - perpX * innerWeight,\n    y0 - perpY * innerWeight\n  );\n  verts.push(\n    x0 + perpX * outerWeight,\n    y0 + perpY * outerWeight\n  );\n  for (let i = 1; i < length - 1; ++i) {\n    x0 = points[(i - 1) * 2];\n    y0 = points[(i - 1) * 2 + 1];\n    x1 = points[i * 2];\n    y1 = points[i * 2 + 1];\n    x2 = points[(i + 1) * 2];\n    y2 = points[(i + 1) * 2 + 1];\n    perpX = -(y0 - y1);\n    perpY = x0 - x1;\n    dist = Math.sqrt(perpX * perpX + perpY * perpY);\n    perpX /= dist;\n    perpY /= dist;\n    perpX *= width;\n    perpY *= width;\n    perp1x = -(y1 - y2);\n    perp1y = x1 - x2;\n    dist = Math.sqrt(perp1x * perp1x + perp1y * perp1y);\n    perp1x /= dist;\n    perp1y /= dist;\n    perp1x *= width;\n    perp1y *= width;\n    const dx0 = x1 - x0;\n    const dy0 = y0 - y1;\n    const dx1 = x1 - x2;\n    const dy1 = y2 - y1;\n    const dot = dx0 * dx1 + dy0 * dy1;\n    const cross = dy0 * dx1 - dy1 * dx0;\n    const clockwise = cross < 0;\n    if (Math.abs(cross) < 1e-3 * Math.abs(dot)) {\n      verts.push(\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight\n      );\n      verts.push(\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight\n      );\n      if (dot >= 0) {\n        if (style.join === \"round\") {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n        } else {\n          indexCount += 2;\n        }\n        verts.push(\n          x1 - perp1x * outerWeight,\n          y1 - perp1y * outerWeight\n        );\n        verts.push(\n          x1 + perp1x * innerWeight,\n          y1 + perp1y * innerWeight\n        );\n      }\n      continue;\n    }\n    const c1 = (-perpX + x0) * (-perpY + y1) - (-perpX + x1) * (-perpY + y0);\n    const c2 = (-perp1x + x2) * (-perp1y + y1) - (-perp1x + x1) * (-perp1y + y2);\n    const px = (dx0 * c2 - dx1 * c1) / cross;\n    const py = (dy1 * c1 - dy0 * c2) / cross;\n    const pDist = (px - x1) * (px - x1) + (py - y1) * (py - y1);\n    const imx = x1 + (px - x1) * innerWeight;\n    const imy = y1 + (py - y1) * innerWeight;\n    const omx = x1 - (px - x1) * outerWeight;\n    const omy = y1 - (py - y1) * outerWeight;\n    const smallerInsideSegmentSq = Math.min(dx0 * dx0 + dy0 * dy0, dx1 * dx1 + dy1 * dy1);\n    const insideWeight = clockwise ? innerWeight : outerWeight;\n    const smallerInsideDiagonalSq = smallerInsideSegmentSq + insideWeight * insideWeight * widthSquared;\n    const insideMiterOk = pDist <= smallerInsideDiagonalSq;\n    if (insideMiterOk) {\n      if (style.join === \"bevel\" || pDist / widthSquared > miterLimitSquared) {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n        indexCount += 2;\n      } else if (style.join === \"round\") {\n        if (clockwise) {\n          verts.push(imx, imy);\n          verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 4;\n          verts.push(imx, imy);\n          verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n        } else {\n          verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n          verts.push(omx, omy);\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 4;\n          verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n          verts.push(omx, omy);\n        }\n      } else {\n        verts.push(imx, imy);\n        verts.push(omx, omy);\n      }\n    } else {\n      verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n      verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n      if (style.join === \"round\") {\n        if (clockwise) {\n          indexCount += round(\n            x1,\n            y1,\n            x1 + perpX * outerWeight,\n            y1 + perpY * outerWeight,\n            x1 + perp1x * outerWeight,\n            y1 + perp1y * outerWeight,\n            verts,\n            true\n          ) + 2;\n        } else {\n          indexCount += round(\n            x1,\n            y1,\n            x1 - perpX * innerWeight,\n            y1 - perpY * innerWeight,\n            x1 - perp1x * innerWeight,\n            y1 - perp1y * innerWeight,\n            verts,\n            false\n          ) + 2;\n        }\n      } else if (style.join === \"miter\" && pDist / widthSquared <= miterLimitSquared) {\n        if (clockwise) {\n          verts.push(omx, omy);\n          verts.push(omx, omy);\n        } else {\n          verts.push(imx, imy);\n          verts.push(imx, imy);\n        }\n        indexCount += 2;\n      }\n      verts.push(x1 - perp1x * innerWeight, y1 - perp1y * innerWeight);\n      verts.push(x1 + perp1x * outerWeight, y1 + perp1y * outerWeight);\n      indexCount += 2;\n    }\n  }\n  x0 = points[(length - 2) * 2];\n  y0 = points[(length - 2) * 2 + 1];\n  x1 = points[(length - 1) * 2];\n  y1 = points[(length - 1) * 2 + 1];\n  perpX = -(y0 - y1);\n  perpY = x0 - x1;\n  dist = Math.sqrt(perpX * perpX + perpY * perpY);\n  perpX /= dist;\n  perpY /= dist;\n  perpX *= width;\n  perpY *= width;\n  verts.push(x1 - perpX * innerWeight, y1 - perpY * innerWeight);\n  verts.push(x1 + perpX * outerWeight, y1 + perpY * outerWeight);\n  if (!closedShape) {\n    if (style.cap === \"round\") {\n      indexCount += round(\n        x1 - perpX * (innerWeight - outerWeight) * 0.5,\n        y1 - perpY * (innerWeight - outerWeight) * 0.5,\n        x1 - perpX * innerWeight,\n        y1 - perpY * innerWeight,\n        x1 + perpX * outerWeight,\n        y1 + perpY * outerWeight,\n        verts,\n        false\n      ) + 2;\n    } else if (style.cap === \"square\") {\n      indexCount += square(x1, y1, perpX, perpY, innerWeight, outerWeight, false, verts);\n    }\n  }\n  const eps2 = curveEps * curveEps;\n  for (let i = indexStart; i < indexCount + indexStart - 2; ++i) {\n    x0 = verts[i * 2];\n    y0 = verts[i * 2 + 1];\n    x1 = verts[(i + 1) * 2];\n    y1 = verts[(i + 1) * 2 + 1];\n    x2 = verts[(i + 2) * 2];\n    y2 = verts[(i + 2) * 2 + 1];\n    if (Math.abs(x0 * (y1 - y2) + x1 * (y2 - y0) + x2 * (y0 - y1)) < eps2) {\n      continue;\n    }\n    indices.push(i, i + 1, i + 2);\n  }\n}\n\nexport { buildLine };\n//# sourceMappingURL=buildLine.mjs.map\n","\nexport default function earcut(data, holeIndices, dim = 2) {\n\n    const hasHoles = holeIndices && holeIndices.length;\n    const outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n    let outerNode = linkedList(data, 0, outerLen, dim, true);\n    const triangles = [];\n\n    if (!outerNode || outerNode.next === outerNode.prev) return triangles;\n\n    let minX, minY, invSize;\n\n    if (hasHoles) outerNode = eliminateHoles(data, holeIndices, outerNode, dim);\n\n    // if the shape is not too simple, we'll use z-order curve hash later; calculate polygon bbox\n    if (data.length > 80 * dim) {\n        minX = data[0];\n        minY = data[1];\n        let maxX = minX;\n        let maxY = minY;\n\n        for (let i = dim; i < outerLen; i += dim) {\n            const x = data[i];\n            const y = data[i + 1];\n            if (x < minX) minX = x;\n            if (y < minY) minY = y;\n            if (x > maxX) maxX = x;\n            if (y > maxY) maxY = y;\n        }\n\n        // minX, minY and invSize are later used to transform coords into integers for z-order calculation\n        invSize = Math.max(maxX - minX, maxY - minY);\n        invSize = invSize !== 0 ? 32767 / invSize : 0;\n    }\n\n    earcutLinked(outerNode, triangles, dim, minX, minY, invSize, 0);\n\n    return triangles;\n}\n\n// create a circular doubly linked list from polygon points in the specified winding order\nfunction linkedList(data, start, end, dim, clockwise) {\n    let last;\n\n    if (clockwise === (signedArea(data, start, end, dim) > 0)) {\n        for (let i = start; i < end; i += dim) last = insertNode(i / dim | 0, data[i], data[i + 1], last);\n    } else {\n        for (let i = end - dim; i >= start; i -= dim) last = insertNode(i / dim | 0, data[i], data[i + 1], last);\n    }\n\n    if (last && equals(last, last.next)) {\n        removeNode(last);\n        last = last.next;\n    }\n\n    return last;\n}\n\n// eliminate colinear or duplicate points\nfunction filterPoints(start, end) {\n    if (!start) return start;\n    if (!end) end = start;\n\n    let p = start,\n        again;\n    do {\n        again = false;\n\n        if (!p.steiner && (equals(p, p.next) || area(p.prev, p, p.next) === 0)) {\n            removeNode(p);\n            p = end = p.prev;\n            if (p === p.next) break;\n            again = true;\n\n        } else {\n            p = p.next;\n        }\n    } while (again || p !== end);\n\n    return end;\n}\n\n// main ear slicing loop which triangulates a polygon (given as a linked list)\nfunction earcutLinked(ear, triangles, dim, minX, minY, invSize, pass) {\n    if (!ear) return;\n\n    // interlink polygon nodes in z-order\n    if (!pass && invSize) indexCurve(ear, minX, minY, invSize);\n\n    let stop = ear;\n\n    // iterate through ears, slicing them one by one\n    while (ear.prev !== ear.next) {\n        const prev = ear.prev;\n        const next = ear.next;\n\n        if (invSize ? isEarHashed(ear, minX, minY, invSize) : isEar(ear)) {\n            triangles.push(prev.i, ear.i, next.i); // cut off the triangle\n\n            removeNode(ear);\n\n            // skipping the next vertex leads to less sliver triangles\n            ear = next.next;\n            stop = next.next;\n\n            continue;\n        }\n\n        ear = next;\n\n        // if we looped through the whole remaining polygon and can't find any more ears\n        if (ear === stop) {\n            // try filtering points and slicing again\n            if (!pass) {\n                earcutLinked(filterPoints(ear), triangles, dim, minX, minY, invSize, 1);\n\n            // if this didn't work, try curing all small self-intersections locally\n            } else if (pass === 1) {\n                ear = cureLocalIntersections(filterPoints(ear), triangles);\n                earcutLinked(ear, triangles, dim, minX, minY, invSize, 2);\n\n            // as a last resort, try splitting the remaining polygon into two\n            } else if (pass === 2) {\n                splitEarcut(ear, triangles, dim, minX, minY, invSize);\n            }\n\n            break;\n        }\n    }\n}\n\n// check whether a polygon node forms a valid ear with adjacent nodes\nfunction isEar(ear) {\n    const a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    // now make sure we don't have other points inside the potential ear\n    const ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox\n    const x0 = Math.min(ax, bx, cx),\n        y0 = Math.min(ay, by, cy),\n        x1 = Math.max(ax, bx, cx),\n        y1 = Math.max(ay, by, cy);\n\n    let p = c.next;\n    while (p !== a) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, p.x, p.y) &&\n            area(p.prev, p, p.next) >= 0) return false;\n        p = p.next;\n    }\n\n    return true;\n}\n\nfunction isEarHashed(ear, minX, minY, invSize) {\n    const a = ear.prev,\n        b = ear,\n        c = ear.next;\n\n    if (area(a, b, c) >= 0) return false; // reflex, can't be an ear\n\n    const ax = a.x, bx = b.x, cx = c.x, ay = a.y, by = b.y, cy = c.y;\n\n    // triangle bbox\n    const x0 = Math.min(ax, bx, cx),\n        y0 = Math.min(ay, by, cy),\n        x1 = Math.max(ax, bx, cx),\n        y1 = Math.max(ay, by, cy);\n\n    // z-order range for the current triangle bbox;\n    const minZ = zOrder(x0, y0, minX, minY, invSize),\n        maxZ = zOrder(x1, y1, minX, minY, invSize);\n\n    let p = ear.prevZ,\n        n = ear.nextZ;\n\n    // look for points inside the triangle in both directions\n    while (p && p.z >= minZ && n && n.z <= maxZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    // look for remaining points in decreasing z-order\n    while (p && p.z >= minZ) {\n        if (p.x >= x0 && p.x <= x1 && p.y >= y0 && p.y <= y1 && p !== a && p !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, p.x, p.y) && area(p.prev, p, p.next) >= 0) return false;\n        p = p.prevZ;\n    }\n\n    // look for remaining points in increasing z-order\n    while (n && n.z <= maxZ) {\n        if (n.x >= x0 && n.x <= x1 && n.y >= y0 && n.y <= y1 && n !== a && n !== c &&\n            pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, n.x, n.y) && area(n.prev, n, n.next) >= 0) return false;\n        n = n.nextZ;\n    }\n\n    return true;\n}\n\n// go through all polygon nodes and cure small local self-intersections\nfunction cureLocalIntersections(start, triangles) {\n    let p = start;\n    do {\n        const a = p.prev,\n            b = p.next.next;\n\n        if (!equals(a, b) && intersects(a, p, p.next, b) && locallyInside(a, b) && locallyInside(b, a)) {\n\n            triangles.push(a.i, p.i, b.i);\n\n            // remove two nodes involved\n            removeNode(p);\n            removeNode(p.next);\n\n            p = start = b;\n        }\n        p = p.next;\n    } while (p !== start);\n\n    return filterPoints(p);\n}\n\n// try splitting polygon into two and triangulate them independently\nfunction splitEarcut(start, triangles, dim, minX, minY, invSize) {\n    // look for a valid diagonal that divides the polygon into two\n    let a = start;\n    do {\n        let b = a.next.next;\n        while (b !== a.prev) {\n            if (a.i !== b.i && isValidDiagonal(a, b)) {\n                // split the polygon in two by the diagonal\n                let c = splitPolygon(a, b);\n\n                // filter colinear points around the cuts\n                a = filterPoints(a, a.next);\n                c = filterPoints(c, c.next);\n\n                // run earcut on each half\n                earcutLinked(a, triangles, dim, minX, minY, invSize, 0);\n                earcutLinked(c, triangles, dim, minX, minY, invSize, 0);\n                return;\n            }\n            b = b.next;\n        }\n        a = a.next;\n    } while (a !== start);\n}\n\n// link every hole into the outer loop, producing a single-ring polygon without holes\nfunction eliminateHoles(data, holeIndices, outerNode, dim) {\n    const queue = [];\n\n    for (let i = 0, len = holeIndices.length; i < len; i++) {\n        const start = holeIndices[i] * dim;\n        const end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n        const list = linkedList(data, start, end, dim, false);\n        if (list === list.next) list.steiner = true;\n        queue.push(getLeftmost(list));\n    }\n\n    queue.sort(compareXYSlope);\n\n    // process holes from left to right\n    for (let i = 0; i < queue.length; i++) {\n        outerNode = eliminateHole(queue[i], outerNode);\n    }\n\n    return outerNode;\n}\n\nfunction compareXYSlope(a, b) {\n    let result = a.x - b.x;\n    // when the left-most point of 2 holes meet at a vertex, sort the holes counterclockwise so that when we find\n    // the bridge to the outer shell is always the point that they meet at.\n    if (result === 0) {\n        result = a.y - b.y;\n        if (result === 0) {\n            const aSlope = (a.next.y - a.y) / (a.next.x - a.x);\n            const bSlope = (b.next.y - b.y) / (b.next.x - b.x);\n            result = aSlope - bSlope;\n        }\n    }\n    return result;\n}\n\n// find a bridge between vertices that connects hole with an outer ring and link it\nfunction eliminateHole(hole, outerNode) {\n    const bridge = findHoleBridge(hole, outerNode);\n    if (!bridge) {\n        return outerNode;\n    }\n\n    const bridgeReverse = splitPolygon(bridge, hole);\n\n    // filter collinear points around the cuts\n    filterPoints(bridgeReverse, bridgeReverse.next);\n    return filterPoints(bridge, bridge.next);\n}\n\n// David Eberly's algorithm for finding a bridge between hole and outer polygon\nfunction findHoleBridge(hole, outerNode) {\n    let p = outerNode;\n    const hx = hole.x;\n    const hy = hole.y;\n    let qx = -Infinity;\n    let m;\n\n    // find a segment intersected by a ray from the hole's leftmost point to the left;\n    // segment's endpoint with lesser x will be potential connection point\n    // unless they intersect at a vertex, then choose the vertex\n    if (equals(hole, p)) return p;\n    do {\n        if (equals(hole, p.next)) return p.next;\n        else if (hy <= p.y && hy >= p.next.y && p.next.y !== p.y) {\n            const x = p.x + (hy - p.y) * (p.next.x - p.x) / (p.next.y - p.y);\n            if (x <= hx && x > qx) {\n                qx = x;\n                m = p.x < p.next.x ? p : p.next;\n                if (x === hx) return m; // hole touches outer segment; pick leftmost endpoint\n            }\n        }\n        p = p.next;\n    } while (p !== outerNode);\n\n    if (!m) return null;\n\n    // look for points inside the triangle of hole point, segment intersection and endpoint;\n    // if there are no points found, we have a valid connection;\n    // otherwise choose the point of the minimum angle with the ray as connection point\n\n    const stop = m;\n    const mx = m.x;\n    const my = m.y;\n    let tanMin = Infinity;\n\n    p = m;\n\n    do {\n        if (hx >= p.x && p.x >= mx && hx !== p.x &&\n                pointInTriangle(hy < my ? hx : qx, hy, mx, my, hy < my ? qx : hx, hy, p.x, p.y)) {\n\n            const tan = Math.abs(hy - p.y) / (hx - p.x); // tangential\n\n            if (locallyInside(p, hole) &&\n                (tan < tanMin || (tan === tanMin && (p.x > m.x || (p.x === m.x && sectorContainsSector(m, p)))))) {\n                m = p;\n                tanMin = tan;\n            }\n        }\n\n        p = p.next;\n    } while (p !== stop);\n\n    return m;\n}\n\n// whether sector in vertex m contains sector in vertex p in the same coordinates\nfunction sectorContainsSector(m, p) {\n    return area(m.prev, m, p.prev) < 0 && area(p.next, m, m.next) < 0;\n}\n\n// interlink polygon nodes in z-order\nfunction indexCurve(start, minX, minY, invSize) {\n    let p = start;\n    do {\n        if (p.z === 0) p.z = zOrder(p.x, p.y, minX, minY, invSize);\n        p.prevZ = p.prev;\n        p.nextZ = p.next;\n        p = p.next;\n    } while (p !== start);\n\n    p.prevZ.nextZ = null;\n    p.prevZ = null;\n\n    sortLinked(p);\n}\n\n// Simon Tatham's linked list merge sort algorithm\n// http://www.chiark.greenend.org.uk/~sgtatham/algorithms/listsort.html\nfunction sortLinked(list) {\n    let numMerges;\n    let inSize = 1;\n\n    do {\n        let p = list;\n        let e;\n        list = null;\n        let tail = null;\n        numMerges = 0;\n\n        while (p) {\n            numMerges++;\n            let q = p;\n            let pSize = 0;\n            for (let i = 0; i < inSize; i++) {\n                pSize++;\n                q = q.nextZ;\n                if (!q) break;\n            }\n            let qSize = inSize;\n\n            while (pSize > 0 || (qSize > 0 && q)) {\n\n                if (pSize !== 0 && (qSize === 0 || !q || p.z <= q.z)) {\n                    e = p;\n                    p = p.nextZ;\n                    pSize--;\n                } else {\n                    e = q;\n                    q = q.nextZ;\n                    qSize--;\n                }\n\n                if (tail) tail.nextZ = e;\n                else list = e;\n\n                e.prevZ = tail;\n                tail = e;\n            }\n\n            p = q;\n        }\n\n        tail.nextZ = null;\n        inSize *= 2;\n\n    } while (numMerges > 1);\n\n    return list;\n}\n\n// z-order of a point given coords and inverse of the longer side of data bbox\nfunction zOrder(x, y, minX, minY, invSize) {\n    // coords are transformed into non-negative 15-bit integer range\n    x = (x - minX) * invSize | 0;\n    y = (y - minY) * invSize | 0;\n\n    x = (x | (x << 8)) & 0x00FF00FF;\n    x = (x | (x << 4)) & 0x0F0F0F0F;\n    x = (x | (x << 2)) & 0x33333333;\n    x = (x | (x << 1)) & 0x55555555;\n\n    y = (y | (y << 8)) & 0x00FF00FF;\n    y = (y | (y << 4)) & 0x0F0F0F0F;\n    y = (y | (y << 2)) & 0x33333333;\n    y = (y | (y << 1)) & 0x55555555;\n\n    return x | (y << 1);\n}\n\n// find the leftmost node of a polygon ring\nfunction getLeftmost(start) {\n    let p = start,\n        leftmost = start;\n    do {\n        if (p.x < leftmost.x || (p.x === leftmost.x && p.y < leftmost.y)) leftmost = p;\n        p = p.next;\n    } while (p !== start);\n\n    return leftmost;\n}\n\n// check if a point lies within a convex triangle\nfunction pointInTriangle(ax, ay, bx, by, cx, cy, px, py) {\n    return (cx - px) * (ay - py) >= (ax - px) * (cy - py) &&\n           (ax - px) * (by - py) >= (bx - px) * (ay - py) &&\n           (bx - px) * (cy - py) >= (cx - px) * (by - py);\n}\n\n// check if a point lies within a convex triangle but false if its equal to the first point of the triangle\nfunction pointInTriangleExceptFirst(ax, ay, bx, by, cx, cy, px, py) {\n    return !(ax === px && ay === py) && pointInTriangle(ax, ay, bx, by, cx, cy, px, py);\n}\n\n// check if a diagonal between two polygon nodes is valid (lies in polygon interior)\nfunction isValidDiagonal(a, b) {\n    return a.next.i !== b.i && a.prev.i !== b.i && !intersectsPolygon(a, b) && // doesn't intersect other edges\n           (locallyInside(a, b) && locallyInside(b, a) && middleInside(a, b) && // locally visible\n            (area(a.prev, a, b.prev) || area(a, b.prev, b)) || // does not create opposite-facing sectors\n            equals(a, b) && area(a.prev, a, a.next) > 0 && area(b.prev, b, b.next) > 0); // special zero-length case\n}\n\n// signed area of a triangle\nfunction area(p, q, r) {\n    return (q.y - p.y) * (r.x - q.x) - (q.x - p.x) * (r.y - q.y);\n}\n\n// check if two points are equal\nfunction equals(p1, p2) {\n    return p1.x === p2.x && p1.y === p2.y;\n}\n\n// check if two segments intersect\nfunction intersects(p1, q1, p2, q2) {\n    const o1 = sign(area(p1, q1, p2));\n    const o2 = sign(area(p1, q1, q2));\n    const o3 = sign(area(p2, q2, p1));\n    const o4 = sign(area(p2, q2, q1));\n\n    if (o1 !== o2 && o3 !== o4) return true; // general case\n\n    if (o1 === 0 && onSegment(p1, p2, q1)) return true; // p1, q1 and p2 are collinear and p2 lies on p1q1\n    if (o2 === 0 && onSegment(p1, q2, q1)) return true; // p1, q1 and q2 are collinear and q2 lies on p1q1\n    if (o3 === 0 && onSegment(p2, p1, q2)) return true; // p2, q2 and p1 are collinear and p1 lies on p2q2\n    if (o4 === 0 && onSegment(p2, q1, q2)) return true; // p2, q2 and q1 are collinear and q1 lies on p2q2\n\n    return false;\n}\n\n// for collinear points p, q, r, check if point q lies on segment pr\nfunction onSegment(p, q, r) {\n    return q.x <= Math.max(p.x, r.x) && q.x >= Math.min(p.x, r.x) && q.y <= Math.max(p.y, r.y) && q.y >= Math.min(p.y, r.y);\n}\n\nfunction sign(num) {\n    return num > 0 ? 1 : num < 0 ? -1 : 0;\n}\n\n// check if a polygon diagonal intersects any polygon segments\nfunction intersectsPolygon(a, b) {\n    let p = a;\n    do {\n        if (p.i !== a.i && p.next.i !== a.i && p.i !== b.i && p.next.i !== b.i &&\n                intersects(p, p.next, a, b)) return true;\n        p = p.next;\n    } while (p !== a);\n\n    return false;\n}\n\n// check if a polygon diagonal is locally inside the polygon\nfunction locallyInside(a, b) {\n    return area(a.prev, a, a.next) < 0 ?\n        area(a, b, a.next) >= 0 && area(a, a.prev, b) >= 0 :\n        area(a, b, a.prev) < 0 || area(a, a.next, b) < 0;\n}\n\n// check if the middle point of a polygon diagonal is inside the polygon\nfunction middleInside(a, b) {\n    let p = a;\n    let inside = false;\n    const px = (a.x + b.x) / 2;\n    const py = (a.y + b.y) / 2;\n    do {\n        if (((p.y > py) !== (p.next.y > py)) && p.next.y !== p.y &&\n                (px < (p.next.x - p.x) * (py - p.y) / (p.next.y - p.y) + p.x))\n            inside = !inside;\n        p = p.next;\n    } while (p !== a);\n\n    return inside;\n}\n\n// link two polygon vertices with a bridge; if the vertices belong to the same ring, it splits polygon into two;\n// if one belongs to the outer ring and another to a hole, it merges it into a single ring\nfunction splitPolygon(a, b) {\n    const a2 = createNode(a.i, a.x, a.y),\n        b2 = createNode(b.i, b.x, b.y),\n        an = a.next,\n        bp = b.prev;\n\n    a.next = b;\n    b.prev = a;\n\n    a2.next = an;\n    an.prev = a2;\n\n    b2.next = a2;\n    a2.prev = b2;\n\n    bp.next = b2;\n    b2.prev = bp;\n\n    return b2;\n}\n\n// create a node and optionally link it with previous one (in a circular doubly linked list)\nfunction insertNode(i, x, y, last) {\n    const p = createNode(i, x, y);\n\n    if (!last) {\n        p.prev = p;\n        p.next = p;\n\n    } else {\n        p.next = last.next;\n        p.prev = last;\n        last.next.prev = p;\n        last.next = p;\n    }\n    return p;\n}\n\nfunction removeNode(p) {\n    p.next.prev = p.prev;\n    p.prev.next = p.next;\n\n    if (p.prevZ) p.prevZ.nextZ = p.nextZ;\n    if (p.nextZ) p.nextZ.prevZ = p.prevZ;\n}\n\nfunction createNode(i, x, y) {\n    return {\n        i, // vertex index in coordinates array\n        x, y, // vertex coordinates\n        prev: null, // previous and next vertex nodes in a polygon ring\n        next: null,\n        z: 0, // z-order curve value\n        prevZ: null, // previous and next nodes in z-order\n        nextZ: null,\n        steiner: false // indicates whether this is a steiner point\n    };\n}\n\n// return a percentage difference between the polygon area and its triangulation area;\n// used to verify correctness of triangulation\nexport function deviation(data, holeIndices, dim, triangles) {\n    const hasHoles = holeIndices && holeIndices.length;\n    const outerLen = hasHoles ? holeIndices[0] * dim : data.length;\n\n    let polygonArea = Math.abs(signedArea(data, 0, outerLen, dim));\n    if (hasHoles) {\n        for (let i = 0, len = holeIndices.length; i < len; i++) {\n            const start = holeIndices[i] * dim;\n            const end = i < len - 1 ? holeIndices[i + 1] * dim : data.length;\n            polygonArea -= Math.abs(signedArea(data, start, end, dim));\n        }\n    }\n\n    let trianglesArea = 0;\n    for (let i = 0; i < triangles.length; i += 3) {\n        const a = triangles[i] * dim;\n        const b = triangles[i + 1] * dim;\n        const c = triangles[i + 2] * dim;\n        trianglesArea += Math.abs(\n            (data[a] - data[c]) * (data[b + 1] - data[a + 1]) -\n            (data[a] - data[b]) * (data[c + 1] - data[a + 1]));\n    }\n\n    return polygonArea === 0 && trianglesArea === 0 ? 0 :\n        Math.abs((trianglesArea - polygonArea) / polygonArea);\n}\n\nfunction signedArea(data, start, end, dim) {\n    let sum = 0;\n    for (let i = start, j = end - dim; i < end; i += dim) {\n        sum += (data[j] - data[i]) * (data[i + 1] + data[j + 1]);\n        j = i;\n    }\n    return sum;\n}\n\n// turn a polygon in a multi-dimensional array form (e.g. as in GeoJSON) into a form Earcut accepts\nexport function flatten(data) {\n    const vertices = [];\n    const holes = [];\n    const dimensions = data[0][0].length;\n    let holeIndex = 0;\n    let prevLen = 0;\n\n    for (const ring of data) {\n        for (const p of ring) {\n            for (let d = 0; d < dimensions; d++) vertices.push(p[d]);\n        }\n        if (prevLen) {\n            holeIndex += prevLen;\n            holes.push(holeIndex);\n        }\n        prevLen = ring.length;\n    }\n    return {vertices, holes, dimensions};\n}\n","import earcutModule from 'earcut';\nexport { default as EventEmitter } from 'eventemitter3';\n\n\"use strict\";\nconst earcut = earcutModule.default || earcutModule;\n\nexport { earcut };\n//# sourceMappingURL=utils.mjs.map\n","import { earcut } from '../../../../utils/utils.mjs';\n\n\"use strict\";\nfunction triangulateWithHoles(points, holes, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n  const triangles = earcut(points, holes, 2);\n  if (!triangles) {\n    return;\n  }\n  for (let i = 0; i < triangles.length; i += 3) {\n    indices[indicesOffset++] = triangles[i] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 1] + verticesOffset;\n    indices[indicesOffset++] = triangles[i + 2] + verticesOffset;\n  }\n  let index = verticesOffset * verticesStride;\n  for (let i = 0; i < points.length; i += 2) {\n    vertices[index] = points[i];\n    vertices[index + 1] = points[i + 1];\n    index += verticesStride;\n  }\n}\n\nexport { triangulateWithHoles };\n//# sourceMappingURL=triangulateWithHoles.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { triangulateWithHoles } from '../utils/triangulateWithHoles.mjs';\n\n\"use strict\";\nconst emptyArray = [];\nconst buildPolygon = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"polygon\"\n  },\n  build(shape, points) {\n    for (let i = 0; i < shape.points.length; i++) {\n      points[i] = shape.points[i];\n    }\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    triangulateWithHoles(points, emptyArray, vertices, verticesStride, verticesOffset, indices, indicesOffset);\n  }\n};\n\nexport { buildPolygon };\n//# sourceMappingURL=buildPolygon.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildRectangle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"rectangle\"\n  },\n  build(shape, points) {\n    const rectData = shape;\n    const x = rectData.x;\n    const y = rectData.y;\n    const width = rectData.width;\n    const height = rectData.height;\n    if (!(width > 0 && height > 0)) {\n      return false;\n    }\n    points[0] = x;\n    points[1] = y;\n    points[2] = x + width;\n    points[3] = y;\n    points[4] = x + width;\n    points[5] = y + height;\n    points[6] = x;\n    points[7] = y + height;\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[6];\n    vertices[verticesOffset + count + 1] = points[7];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    count += verticesStride;\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 3;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildRectangle };\n//# sourceMappingURL=buildRectangle.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst buildTriangle = {\n  extension: {\n    type: ExtensionType.ShapeBuilder,\n    name: \"triangle\"\n  },\n  build(shape, points) {\n    points[0] = shape.x;\n    points[1] = shape.y;\n    points[2] = shape.x2;\n    points[3] = shape.y2;\n    points[4] = shape.x3;\n    points[5] = shape.y3;\n    return true;\n  },\n  triangulate(points, vertices, verticesStride, verticesOffset, indices, indicesOffset) {\n    let count = 0;\n    verticesOffset *= verticesStride;\n    vertices[verticesOffset + count] = points[0];\n    vertices[verticesOffset + count + 1] = points[1];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[2];\n    vertices[verticesOffset + count + 1] = points[3];\n    count += verticesStride;\n    vertices[verticesOffset + count] = points[4];\n    vertices[verticesOffset + count + 1] = points[5];\n    const verticesIndex = verticesOffset / verticesStride;\n    indices[indicesOffset++] = verticesIndex;\n    indices[indicesOffset++] = verticesIndex + 1;\n    indices[indicesOffset++] = verticesIndex + 2;\n  }\n};\n\nexport { buildTriangle };\n//# sourceMappingURL=buildTriangle.mjs.map\n","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\n\n\"use strict\";\nconst tempTextureMatrix = new Matrix();\nconst tempRect = new Rectangle();\nfunction generateTextureMatrix(out, style, shape, matrix) {\n  const textureMatrix = style.matrix ? out.copyFrom(style.matrix).invert() : out.identity();\n  if (style.textureSpace === \"local\") {\n    const bounds = shape.getBounds(tempRect);\n    if (style.width) {\n      bounds.pad(style.width);\n    }\n    const { x: tx, y: ty } = bounds;\n    const sx = 1 / bounds.width;\n    const sy = 1 / bounds.height;\n    const mTx = -tx * sx;\n    const mTy = -ty * sy;\n    const a1 = textureMatrix.a;\n    const b1 = textureMatrix.b;\n    const c1 = textureMatrix.c;\n    const d1 = textureMatrix.d;\n    textureMatrix.a *= sx;\n    textureMatrix.b *= sx;\n    textureMatrix.c *= sy;\n    textureMatrix.d *= sy;\n    textureMatrix.tx = mTx * a1 + mTy * c1 + textureMatrix.tx;\n    textureMatrix.ty = mTx * b1 + mTy * d1 + textureMatrix.ty;\n  } else {\n    textureMatrix.translate(style.texture.frame.x, style.texture.frame.y);\n    textureMatrix.scale(1 / style.texture.source.width, 1 / style.texture.source.height);\n  }\n  const sourceStyle = style.texture.source.style;\n  if (!(style.fill instanceof FillGradient) && sourceStyle.addressMode === \"clamp-to-edge\") {\n    sourceStyle.addressMode = \"repeat\";\n    sourceStyle.update();\n  }\n  if (matrix) {\n    textureMatrix.append(tempTextureMatrix.copyFrom(matrix).invert());\n  }\n  return textureMatrix;\n}\n\nexport { generateTextureMatrix };\n//# sourceMappingURL=generateTextureFillMatrix.mjs.map\n","import { extensions, ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { buildUvs, buildSimpleUvs } from '../../../../rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nimport { transformVertices } from '../../../../rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { BigPool } from '../../../../utils/pool/PoolGroup.mjs';\nimport { BatchableGraphics } from '../BatchableGraphics.mjs';\nimport { buildCircle, buildEllipse, buildRoundedRectangle } from '../buildCommands/buildCircle.mjs';\nimport { buildLine } from '../buildCommands/buildLine.mjs';\nimport { buildPixelLine } from '../buildCommands/buildPixelLine.mjs';\nimport { buildPolygon } from '../buildCommands/buildPolygon.mjs';\nimport { buildRectangle } from '../buildCommands/buildRectangle.mjs';\nimport { buildTriangle } from '../buildCommands/buildTriangle.mjs';\nimport { generateTextureMatrix } from './generateTextureFillMatrix.mjs';\nimport { triangulateWithHoles } from './triangulateWithHoles.mjs';\n\n\"use strict\";\nconst shapeBuilders = {};\nextensions.handleByMap(ExtensionType.ShapeBuilder, shapeBuilders);\nextensions.add(buildRectangle, buildPolygon, buildTriangle, buildCircle, buildEllipse, buildRoundedRectangle);\nconst tempRect = new Rectangle();\nconst tempTextureMatrix = new Matrix();\nfunction buildContextBatches(context, gpuContext) {\n  const { geometryData, batches } = gpuContext;\n  batches.length = 0;\n  geometryData.indices.length = 0;\n  geometryData.vertices.length = 0;\n  geometryData.uvs.length = 0;\n  for (let i = 0; i < context.instructions.length; i++) {\n    const instruction = context.instructions[i];\n    if (instruction.action === \"texture\") {\n      addTextureToGeometryData(instruction.data, batches, geometryData);\n    } else if (instruction.action === \"fill\" || instruction.action === \"stroke\") {\n      const isStroke = instruction.action === \"stroke\";\n      const shapePath = instruction.data.path.shapePath;\n      const style = instruction.data.style;\n      const hole = instruction.data.hole;\n      if (isStroke && hole) {\n        addShapePathToGeometryData(hole.shapePath, style, true, batches, geometryData);\n      }\n      if (hole) {\n        shapePath.shapePrimitives[shapePath.shapePrimitives.length - 1].holes = hole.shapePath.shapePrimitives;\n      }\n      addShapePathToGeometryData(shapePath, style, isStroke, batches, geometryData);\n    }\n  }\n}\nfunction addTextureToGeometryData(data, batches, geometryData) {\n  const points = [];\n  const build = shapeBuilders.rectangle;\n  const rect = tempRect;\n  rect.x = data.dx;\n  rect.y = data.dy;\n  rect.width = data.dw;\n  rect.height = data.dh;\n  const matrix = data.transform;\n  if (!build.build(rect, points)) {\n    return;\n  }\n  const { vertices, uvs, indices } = geometryData;\n  const indexOffset = indices.length;\n  const vertOffset = vertices.length / 2;\n  if (matrix) {\n    transformVertices(points, matrix);\n  }\n  build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n  const texture = data.image;\n  const textureUvs = texture.uvs;\n  uvs.push(\n    textureUvs.x0,\n    textureUvs.y0,\n    textureUvs.x1,\n    textureUvs.y1,\n    textureUvs.x3,\n    textureUvs.y3,\n    textureUvs.x2,\n    textureUvs.y2\n  );\n  const graphicsBatch = BigPool.get(BatchableGraphics);\n  graphicsBatch.indexOffset = indexOffset;\n  graphicsBatch.indexSize = indices.length - indexOffset;\n  graphicsBatch.attributeOffset = vertOffset;\n  graphicsBatch.attributeSize = vertices.length / 2 - vertOffset;\n  graphicsBatch.baseColor = data.style;\n  graphicsBatch.alpha = data.alpha;\n  graphicsBatch.texture = texture;\n  graphicsBatch.geometryData = geometryData;\n  batches.push(graphicsBatch);\n}\nfunction addShapePathToGeometryData(shapePath, style, isStroke, batches, geometryData) {\n  const { vertices, uvs, indices } = geometryData;\n  shapePath.shapePrimitives.forEach(({ shape, transform: matrix, holes }) => {\n    const points = [];\n    const build = shapeBuilders[shape.type];\n    if (!build.build(shape, points)) {\n      return;\n    }\n    const indexOffset = indices.length;\n    const vertOffset = vertices.length / 2;\n    let topology = \"triangle-list\";\n    if (matrix) {\n      transformVertices(points, matrix);\n    }\n    if (!isStroke) {\n      if (holes) {\n        const holeIndices = [];\n        const otherPoints = points.slice();\n        const holeArrays = getHoleArrays(holes);\n        holeArrays.forEach((holePoints) => {\n          holeIndices.push(otherPoints.length / 2);\n          otherPoints.push(...holePoints);\n        });\n        triangulateWithHoles(otherPoints, holeIndices, vertices, 2, vertOffset, indices, indexOffset);\n      } else {\n        build.triangulate(points, vertices, 2, vertOffset, indices, indexOffset);\n      }\n    } else {\n      const close = shape.closePath ?? true;\n      const lineStyle = style;\n      if (!lineStyle.pixelLine) {\n        buildLine(points, lineStyle, false, close, vertices, indices);\n      } else {\n        buildPixelLine(points, close, vertices, indices);\n        topology = \"line-list\";\n      }\n    }\n    const uvsOffset = uvs.length / 2;\n    const texture = style.texture;\n    if (texture !== Texture.WHITE) {\n      const textureMatrix = generateTextureMatrix(tempTextureMatrix, style, shape, matrix);\n      buildUvs(vertices, 2, vertOffset, uvs, uvsOffset, 2, vertices.length / 2 - vertOffset, textureMatrix);\n    } else {\n      buildSimpleUvs(uvs, uvsOffset, 2, vertices.length / 2 - vertOffset);\n    }\n    const graphicsBatch = BigPool.get(BatchableGraphics);\n    graphicsBatch.indexOffset = indexOffset;\n    graphicsBatch.indexSize = indices.length - indexOffset;\n    graphicsBatch.attributeOffset = vertOffset;\n    graphicsBatch.attributeSize = vertices.length / 2 - vertOffset;\n    graphicsBatch.baseColor = style.color;\n    graphicsBatch.alpha = style.alpha;\n    graphicsBatch.texture = texture;\n    graphicsBatch.geometryData = geometryData;\n    graphicsBatch.topology = topology;\n    batches.push(graphicsBatch);\n  });\n}\nfunction getHoleArrays(holePrimitives) {\n  const holeArrays = [];\n  for (let k = 0; k < holePrimitives.length; k++) {\n    const holePrimitive = holePrimitives[k].shape;\n    const holePoints = [];\n    const holeBuilder = shapeBuilders[holePrimitive.type];\n    if (holeBuilder.build(holePrimitive, holePoints)) {\n      holeArrays.push(holePoints);\n    }\n  }\n  return holeArrays;\n}\n\nexport { buildContextBatches, shapeBuilders };\n//# sourceMappingURL=buildContextBatches.mjs.map\n","import { closePointEps } from '../const.mjs';\n\n\"use strict\";\nfunction buildPixelLine(points, closed, vertices, indices) {\n  const eps = closePointEps;\n  if (points.length === 0) {\n    return;\n  }\n  const fx = points[0];\n  const fy = points[1];\n  const lx = points[points.length - 2];\n  const ly = points[points.length - 1];\n  const closePath = closed || Math.abs(fx - lx) < eps && Math.abs(fy - ly) < eps;\n  const verts = vertices;\n  const length = points.length / 2;\n  const indexStart = verts.length / 2;\n  for (let i = 0; i < length; i++) {\n    verts.push(points[i * 2]);\n    verts.push(points[i * 2 + 1]);\n  }\n  for (let i = 0; i < length - 1; i++) {\n    indices.push(indexStart + i, indexStart + i + 1);\n  }\n  if (closePath) {\n    indices.push(indexStart + length - 1, indexStart);\n  }\n}\n\nexport { buildPixelLine };\n//# sourceMappingURL=buildPixelLine.mjs.map\n","\"use strict\";\nfunction getOrientationOfPoints(points) {\n  const m = points.length;\n  if (m < 6) {\n    return 1;\n  }\n  let area = 0;\n  for (let i = 0, x1 = points[m - 2], y1 = points[m - 1]; i < m; i += 2) {\n    const x2 = points[i];\n    const y2 = points[i + 1];\n    area += (x2 - x1) * (y2 + y1);\n    x1 = x2;\n    y1 = y2;\n  }\n  if (area < 0) {\n    return -1;\n  }\n  return 1;\n}\n\nexport { getOrientationOfPoints };\n//# sourceMappingURL=getOrientationOfPoints.mjs.map\n","\"use strict\";\nfunction buildUvs(vertices, verticesStride, verticesOffset, uvs, uvsOffset, uvsStride, size, matrix = null) {\n  let index = 0;\n  verticesOffset *= verticesStride;\n  uvsOffset *= uvsStride;\n  const a = matrix.a;\n  const b = matrix.b;\n  const c = matrix.c;\n  const d = matrix.d;\n  const tx = matrix.tx;\n  const ty = matrix.ty;\n  while (index < size) {\n    const x = vertices[verticesOffset];\n    const y = vertices[verticesOffset + 1];\n    uvs[uvsOffset] = a * x + c * y + tx;\n    uvs[uvsOffset + 1] = b * x + d * y + ty;\n    uvsOffset += uvsStride;\n    verticesOffset += verticesStride;\n    index++;\n  }\n}\nfunction buildSimpleUvs(uvs, uvsOffset, uvsStride, size) {\n  let index = 0;\n  uvsOffset *= uvsStride;\n  while (index < size) {\n    uvs[uvsOffset] = 0;\n    uvs[uvsOffset + 1] = 0;\n    uvsOffset += uvsStride;\n    index++;\n  }\n}\n\nexport { buildSimpleUvs, buildUvs };\n//# sourceMappingURL=buildUvs.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { getTextureBatchBindGroup } from '../../../rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nimport { DefaultBatcher } from '../../../rendering/batcher/shared/DefaultBatcher.mjs';\nimport { InstructionSet } from '../../../rendering/renderers/shared/instructions/InstructionSet.mjs';\nimport { deprecation, v8_3_4 } from '../../../utils/logging/deprecation.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { buildContextBatches } from './utils/buildContextBatches.mjs';\n\n\"use strict\";\nclass GpuGraphicsContext {\n  constructor() {\n    this.batches = [];\n    this.geometryData = {\n      vertices: [],\n      uvs: [],\n      indices: []\n    };\n  }\n}\nclass GraphicsContextRenderData {\n  constructor() {\n    this.instructions = new InstructionSet();\n  }\n  init(options) {\n    const maxTextures = options.maxTextures;\n    this.batcher ? this.batcher._updateMaxTextures(maxTextures) : this.batcher = new DefaultBatcher({ maxTextures });\n    this.instructions.reset();\n  }\n  /**\n   * @deprecated since version 8.0.0\n   * Use `batcher.geometry` instead.\n   * @see {Batcher#geometry}\n   */\n  get geometry() {\n    deprecation(v8_3_4, \"GraphicsContextRenderData#geometry is deprecated, please use batcher.geometry instead.\");\n    return this.batcher.geometry;\n  }\n  destroy() {\n    this.batcher.destroy();\n    this.instructions.destroy();\n    this.batcher = null;\n    this.instructions = null;\n  }\n}\nconst _GraphicsContextSystem = class _GraphicsContextSystem {\n  constructor(renderer) {\n    // the root context batches, used to either make a batch or geometry\n    // all graphics use this as a base\n    this._gpuContextHash = {};\n    // used for non-batchable graphics\n    this._graphicsDataContextHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    renderer.renderableGC.addManagedHash(this, \"_gpuContextHash\");\n    renderer.renderableGC.addManagedHash(this, \"_graphicsDataContextHash\");\n  }\n  /**\n   * Runner init called, update the default options\n   * @ignore\n   */\n  init(options) {\n    _GraphicsContextSystem.defaultOptions.bezierSmoothness = options?.bezierSmoothness ?? _GraphicsContextSystem.defaultOptions.bezierSmoothness;\n  }\n  /**\n   * Returns the render data for a given GraphicsContext.\n   * @param context - The GraphicsContext to get the render data for.\n   * @internal\n   */\n  getContextRenderData(context) {\n    return this._graphicsDataContextHash[context.uid] || this._initContextRenderData(context);\n  }\n  /**\n   * Updates the GPU context for a given GraphicsContext.\n   * If the context is dirty, it will rebuild the batches and geometry data.\n   * @param context - The GraphicsContext to update.\n   * @returns The updated GpuGraphicsContext.\n   * @internal\n   */\n  updateGpuContext(context) {\n    let gpuContext = this._gpuContextHash[context.uid] || this._initContext(context);\n    if (context.dirty) {\n      if (gpuContext) {\n        this._cleanGraphicsContextData(context);\n      } else {\n        gpuContext = this._initContext(context);\n      }\n      buildContextBatches(context, gpuContext);\n      const batchMode = context.batchMode;\n      if (context.customShader || batchMode === \"no-batch\") {\n        gpuContext.isBatchable = false;\n      } else if (batchMode === \"auto\") {\n        gpuContext.isBatchable = gpuContext.geometryData.vertices.length < 400;\n      } else {\n        gpuContext.isBatchable = true;\n      }\n      context.dirty = false;\n    }\n    return gpuContext;\n  }\n  /**\n   * Returns the GpuGraphicsContext for a given GraphicsContext.\n   * If it does not exist, it will initialize a new one.\n   * @param context - The GraphicsContext to get the GpuGraphicsContext for.\n   * @returns The GpuGraphicsContext for the given GraphicsContext.\n   * @internal\n   */\n  getGpuContext(context) {\n    return this._gpuContextHash[context.uid] || this._initContext(context);\n  }\n  _initContextRenderData(context) {\n    const graphicsData = BigPool.get(GraphicsContextRenderData, {\n      maxTextures: this._renderer.limits.maxBatchableTextures\n    });\n    const { batches, geometryData } = this._gpuContextHash[context.uid];\n    const vertexSize = geometryData.vertices.length;\n    const indexSize = geometryData.indices.length;\n    for (let i = 0; i < batches.length; i++) {\n      batches[i].applyTransform = false;\n    }\n    const batcher = graphicsData.batcher;\n    batcher.ensureAttributeBuffer(vertexSize);\n    batcher.ensureIndexBuffer(indexSize);\n    batcher.begin();\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batcher.add(batch);\n    }\n    batcher.finish(graphicsData.instructions);\n    const geometry = batcher.geometry;\n    geometry.indexBuffer.setDataWithSize(batcher.indexBuffer, batcher.indexSize, true);\n    geometry.buffers[0].setDataWithSize(batcher.attributeBuffer.float32View, batcher.attributeSize, true);\n    const drawBatches = batcher.batches;\n    for (let i = 0; i < drawBatches.length; i++) {\n      const batch = drawBatches[i];\n      batch.bindGroup = getTextureBatchBindGroup(\n        batch.textures.textures,\n        batch.textures.count,\n        this._renderer.limits.maxBatchableTextures\n      );\n    }\n    this._graphicsDataContextHash[context.uid] = graphicsData;\n    return graphicsData;\n  }\n  _initContext(context) {\n    const gpuContext = new GpuGraphicsContext();\n    gpuContext.context = context;\n    this._gpuContextHash[context.uid] = gpuContext;\n    context.on(\"destroy\", this.onGraphicsContextDestroy, this);\n    return this._gpuContextHash[context.uid];\n  }\n  onGraphicsContextDestroy(context) {\n    this._cleanGraphicsContextData(context);\n    context.off(\"destroy\", this.onGraphicsContextDestroy, this);\n    this._gpuContextHash[context.uid] = null;\n  }\n  _cleanGraphicsContextData(context) {\n    const gpuContext = this._gpuContextHash[context.uid];\n    if (!gpuContext.isBatchable) {\n      if (this._graphicsDataContextHash[context.uid]) {\n        BigPool.return(this.getContextRenderData(context));\n        this._graphicsDataContextHash[context.uid] = null;\n      }\n    }\n    if (gpuContext.batches) {\n      gpuContext.batches.forEach((batch) => {\n        BigPool.return(batch);\n      });\n    }\n  }\n  destroy() {\n    for (const i in this._gpuContextHash) {\n      if (this._gpuContextHash[i]) {\n        this.onGraphicsContextDestroy(this._gpuContextHash[i].context);\n      }\n    }\n    this._gpuContextHash = {};\n    this._graphicsDataContextHash = {};\n    this._renderer = null;\n  }\n};\n/** @ignore */\n_GraphicsContextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem,\n    ExtensionType.CanvasSystem\n  ],\n  name: \"graphicsContext\"\n};\n/** The default options for the GraphicsContextSystem. */\n_GraphicsContextSystem.defaultOptions = {\n  /**\n   * A value from 0 to 1 that controls the smoothness of bezier curves (the higher the smoother)\n   * @default 0.5\n   */\n  bezierSmoothness: 0.5\n};\nlet GraphicsContextSystem = _GraphicsContextSystem;\n\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem };\n//# sourceMappingURL=GraphicsContextSystem.mjs.map\n","import { GlProgram } from '../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Shader } from '../rendering/renderers/shared/shader/Shader.mjs';\nimport { State } from '../rendering/renderers/shared/state/State.mjs';\n\n\"use strict\";\nconst _Filter = class _Filter extends Shader {\n  /**\n   * @param options - The optional parameters of this filter.\n   */\n  constructor(options) {\n    options = { ..._Filter.defaultOptions, ...options };\n    super(options);\n    /** If enabled is true the filter is applied, if false it will not. */\n    this.enabled = true;\n    /**\n     * The gpu state the filter requires to render.\n     * @internal\n     */\n    this._state = State.for2d();\n    this.blendMode = options.blendMode;\n    this.padding = options.padding;\n    if (typeof options.antialias === \"boolean\") {\n      this.antialias = options.antialias ? \"on\" : \"off\";\n    } else {\n      this.antialias = options.antialias;\n    }\n    this.resolution = options.resolution;\n    this.blendRequired = options.blendRequired;\n    this.clipToViewport = options.clipToViewport;\n    this.addResource(\"uTexture\", 0, 1);\n    if (options.blendRequired) {\n      this.addResource(\"uBackTexture\", 0, 3);\n    }\n  }\n  /**\n   * Applies the filter\n   * @param filterManager - The renderer to retrieve the filter from\n   * @param input - The input render target.\n   * @param output - The target to output to.\n   * @param clearMode - Should the output be cleared before rendering to it\n   */\n  apply(filterManager, input, output, clearMode) {\n    filterManager.applyFilter(this, input, output, clearMode);\n  }\n  /**\n   * Get the blend mode of the filter.\n   * @default \"normal\"\n   */\n  get blendMode() {\n    return this._state.blendMode;\n  }\n  /** Sets the blend mode of the filter. */\n  set blendMode(value) {\n    this._state.blendMode = value;\n  }\n  /**\n   * A short hand function to create a filter based of a vertex and fragment shader src.\n   * @param options\n   * @returns A shiny new PixiJS filter!\n   */\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new _Filter({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n};\n/** The default filter settings */\n_Filter.defaultOptions = {\n  blendMode: \"normal\",\n  resolution: 1,\n  padding: 0,\n  antialias: \"off\",\n  blendRequired: false,\n  clipToViewport: true\n};\nlet Filter = _Filter;\n\nexport { Filter };\n//# sourceMappingURL=Filter.mjs.map\n","import { Cache } from '../../../../../assets/cache/Cache.mjs';\nimport { extensions, ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from '../sources/TextureSource.mjs';\nimport { Texture } from '../Texture.mjs';\n\n\"use strict\";\nconst sources = [];\nextensions.handleByList(ExtensionType.TextureSource, sources);\nfunction autoDetectSource(options = {}) {\n  return textureSourceFrom(options);\n}\nfunction textureSourceFrom(options = {}) {\n  const hasResource = options && options.resource;\n  const res = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  for (let i = 0; i < sources.length; i++) {\n    const Source = sources[i];\n    if (Source.test(res)) {\n      return new Source(opts);\n    }\n  }\n  throw new Error(`Could not find a source type for resource: ${opts.resource}`);\n}\nfunction resourceToTexture(options = {}, skipCache = false) {\n  const hasResource = options && options.resource;\n  const resource = hasResource ? options.resource : options;\n  const opts = hasResource ? options : { resource: options };\n  if (!skipCache && Cache.has(resource)) {\n    return Cache.get(resource);\n  }\n  const texture = new Texture({ source: textureSourceFrom(opts) });\n  texture.on(\"destroy\", () => {\n    if (Cache.has(resource)) {\n      Cache.remove(resource);\n    }\n  });\n  if (!skipCache) {\n    Cache.set(resource, texture);\n  }\n  return texture;\n}\nfunction textureFrom(id, skipCache = false) {\n  if (typeof id === \"string\") {\n    return Cache.get(id);\n  } else if (id instanceof TextureSource) {\n    return new Texture({ source: id });\n  }\n  return resourceToTexture(id, skipCache);\n}\nTexture.from = textureFrom;\nTextureSource.from = textureSourceFrom;\n\nexport { autoDetectSource, resourceToTexture, textureFrom };\n//# sourceMappingURL=textureFrom.mjs.map\n","\"use strict\";\nconst roundPixelsBit = {\n  name: \"round-pixels-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            fn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>\n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    )\n  }\n};\nconst roundPixelsBitGl = {\n  name: \"round-pixels-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            vec2 roundPixels(vec2 position, vec2 targetSize)\n            {\n                return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\n            }\n        `\n    )\n  }\n};\n\nexport { roundPixelsBit, roundPixelsBitGl };\n//# sourceMappingURL=roundPixelsBit.mjs.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Track = void 0;\nvar BinarySearch_1 = require(\"./BinarySearch\");\nvar ControlChange_1 = require(\"./ControlChange\");\nvar ControlChanges_1 = require(\"./ControlChanges\");\nvar PitchBend_1 = require(\"./PitchBend\");\nvar Instrument_1 = require(\"./Instrument\");\nvar Note_1 = require(\"./Note\");\nvar privateHeaderMap = new WeakMap();\n/**\n * A Track is a collection of 'notes' and 'controlChanges'.\n */\nvar Track = /** @class */ (function () {\n    function Track(trackData, header) {\n        var _this = this;\n        /**\n         * The name of the track.\n         */\n        this.name = \"\";\n        /**\n         * The track's note events.\n         */\n        this.notes = [];\n        /**\n         * The control change events.\n         */\n        this.controlChanges = (0, ControlChanges_1.createControlChanges)();\n        /**\n         * The pitch bend events.\n         */\n        this.pitchBends = [];\n        privateHeaderMap.set(this, header);\n        if (trackData) {\n            // Get the name of the track.\n            var nameEvent = trackData.find(function (e) { return e.type === \"trackName\"; });\n            // Set empty name if 'trackName' event isn't found.\n            this.name = nameEvent ? nameEvent.text : \"\";\n        }\n        this.instrument = new Instrument_1.Instrument(trackData, this);\n        // Defaults to 0.\n        this.channel = 0;\n        if (trackData) {\n            var noteOns = trackData.filter(function (event) { return event.type === \"noteOn\"; });\n            var noteOffs = trackData.filter(function (event) { return event.type === \"noteOff\"; });\n            var _loop_1 = function () {\n                var currentNote = noteOns.shift();\n                // Set the channel based on the note.\n                this_1.channel = currentNote.channel;\n                // Find the corresponding note off.\n                var offIndex = noteOffs.findIndex(function (note) {\n                    return note.noteNumber === currentNote.noteNumber &&\n                        note.absoluteTime >= currentNote.absoluteTime;\n                });\n                if (offIndex !== -1) {\n                    // Once it's got the note off, add it.\n                    var noteOff = noteOffs.splice(offIndex, 1)[0];\n                    this_1.addNote({\n                        durationTicks: noteOff.absoluteTime - currentNote.absoluteTime,\n                        midi: currentNote.noteNumber,\n                        noteOffVelocity: noteOff.velocity / 127,\n                        ticks: currentNote.absoluteTime,\n                        velocity: currentNote.velocity / 127,\n                    });\n                }\n            };\n            var this_1 = this;\n            while (noteOns.length) {\n                _loop_1();\n            }\n            var controlChanges = trackData.filter(function (event) { return event.type === \"controller\"; });\n            controlChanges.forEach(function (event) {\n                _this.addCC({\n                    number: event.controllerType,\n                    ticks: event.absoluteTime,\n                    value: event.value / 127,\n                });\n            });\n            var pitchBends = trackData.filter(function (event) { return event.type === \"pitchBend\"; });\n            pitchBends.forEach(function (event) {\n                _this.addPitchBend({\n                    ticks: event.absoluteTime,\n                    // Scale the value between -2^13 to 2^13 to -2 to 2.\n                    value: event.value / Math.pow(2, 13),\n                });\n            });\n            var endOfTrackEvent = trackData.find(function (event) {\n                return event.type === \"endOfTrack\";\n            });\n            this.endOfTrackTicks =\n                endOfTrackEvent !== undefined\n                    ? endOfTrackEvent.absoluteTime\n                    : undefined;\n        }\n    }\n    /**\n     * Add a note to the notes array.\n     * @param props The note properties to add.\n     */\n    Track.prototype.addNote = function (props) {\n        var header = privateHeaderMap.get(this);\n        var note = new Note_1.Note({\n            midi: 0,\n            ticks: 0,\n            velocity: 1,\n        }, {\n            ticks: 0,\n            velocity: 0,\n        }, header);\n        Object.assign(note, props);\n        (0, BinarySearch_1.insert)(this.notes, note, \"ticks\");\n        return this;\n    };\n    /**\n     * Add a control change to the track.\n     * @param props\n     */\n    Track.prototype.addCC = function (props) {\n        var header = privateHeaderMap.get(this);\n        var cc = new ControlChange_1.ControlChange({\n            controllerType: props.number,\n        }, header);\n        delete props.number;\n        Object.assign(cc, props);\n        if (!Array.isArray(this.controlChanges[cc.number])) {\n            this.controlChanges[cc.number] = [];\n        }\n        (0, BinarySearch_1.insert)(this.controlChanges[cc.number], cc, \"ticks\");\n        return this;\n    };\n    /**\n     * Add a control change to the track.\n     */\n    Track.prototype.addPitchBend = function (props) {\n        var header = privateHeaderMap.get(this);\n        var pb = new PitchBend_1.PitchBend({}, header);\n        Object.assign(pb, props);\n        (0, BinarySearch_1.insert)(this.pitchBends, pb, \"ticks\");\n        return this;\n    };\n    Object.defineProperty(Track.prototype, \"duration\", {\n        /**\n         * The end time of the last event in the track.\n         */\n        get: function () {\n            if (!this.notes.length) {\n                return 0;\n            }\n            var maxDuration = this.notes[this.notes.length - 1].time +\n                this.notes[this.notes.length - 1].duration;\n            for (var i = 0; i < this.notes.length - 1; i++) {\n                var duration = this.notes[i].time + this.notes[i].duration;\n                if (maxDuration < duration) {\n                    maxDuration = duration;\n                }\n            }\n            return maxDuration;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Track.prototype, \"durationTicks\", {\n        /**\n         * The end time of the last event in the track in ticks.\n         */\n        get: function () {\n            if (!this.notes.length) {\n                return 0;\n            }\n            var maxDuration = this.notes[this.notes.length - 1].ticks +\n                this.notes[this.notes.length - 1].durationTicks;\n            for (var i = 0; i < this.notes.length - 1; i++) {\n                var duration = this.notes[i].ticks + this.notes[i].durationTicks;\n                if (maxDuration < duration) {\n                    maxDuration = duration;\n                }\n            }\n            return maxDuration;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Assign the JSON values to this track.\n     */\n    Track.prototype.fromJSON = function (json) {\n        var _this = this;\n        this.name = json.name;\n        this.channel = json.channel;\n        this.instrument = new Instrument_1.Instrument(undefined, this);\n        this.instrument.fromJSON(json.instrument);\n        if (json.endOfTrackTicks !== undefined) {\n            this.endOfTrackTicks = json.endOfTrackTicks;\n        }\n        for (var number in json.controlChanges) {\n            if (json.controlChanges[number]) {\n                json.controlChanges[number].forEach(function (cc) {\n                    _this.addCC({\n                        number: cc.number,\n                        ticks: cc.ticks,\n                        value: cc.value,\n                    });\n                });\n            }\n        }\n        json.notes.forEach(function (n) {\n            _this.addNote({\n                durationTicks: n.durationTicks,\n                midi: n.midi,\n                ticks: n.ticks,\n                velocity: n.velocity,\n            });\n        });\n    };\n    /**\n     * Convert the track into a JSON format.\n     */\n    Track.prototype.toJSON = function () {\n        // Convert all the CCs to JSON.\n        var controlChanges = {};\n        for (var i = 0; i < 127; i++) {\n            if (this.controlChanges.hasOwnProperty(i)) {\n                controlChanges[i] = this.controlChanges[i].map(function (c) {\n                    return c.toJSON();\n                });\n            }\n        }\n        var json = {\n            channel: this.channel,\n            controlChanges: controlChanges,\n            pitchBends: this.pitchBends.map(function (pb) { return pb.toJSON(); }),\n            instrument: this.instrument.toJSON(),\n            name: this.name,\n            notes: this.notes.map(function (n) { return n.toJSON(); }),\n        };\n        if (this.endOfTrackTicks !== undefined) {\n            json.endOfTrackTicks = this.endOfTrackTicks;\n        }\n        return json;\n    };\n    return Track;\n}());\nexports.Track = Track;\n//# sourceMappingURL=Track.js.map","\"use strict\";\nfunction fastCopy(sourceBuffer, destinationBuffer) {\n  const lengthDouble = sourceBuffer.byteLength / 8 | 0;\n  const sourceFloat64View = new Float64Array(sourceBuffer, 0, lengthDouble);\n  const destinationFloat64View = new Float64Array(destinationBuffer, 0, lengthDouble);\n  destinationFloat64View.set(sourceFloat64View);\n  const remainingBytes = sourceBuffer.byteLength - lengthDouble * 8;\n  if (remainingBytes > 0) {\n    const sourceUint8View = new Uint8Array(sourceBuffer, lengthDouble * 8, remainingBytes);\n    const destinationUint8View = new Uint8Array(destinationBuffer, lengthDouble * 8, remainingBytes);\n    destinationUint8View.set(sourceUint8View);\n  }\n}\n\nexport { fastCopy };\n//# sourceMappingURL=fastCopy.mjs.map\n","import { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { updateQuadBounds } from '../../utils/data/updateQuadBounds.mjs';\nimport { deprecation } from '../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../view/ViewContainer.mjs';\n\n\"use strict\";\nclass Sprite extends ViewContainer {\n  /**\n   * @param options - The options for creating the sprite.\n   */\n  constructor(options = Texture.EMPTY) {\n    if (options instanceof Texture) {\n      options = { texture: options };\n    }\n    const { texture = Texture.EMPTY, anchor, roundPixels, width, height, ...rest } = options;\n    super({\n      label: \"Sprite\",\n      ...rest\n    });\n    /** @internal */\n    this.renderPipeId = \"sprite\";\n    /** @internal */\n    this.batched = true;\n    this._visualBounds = { minX: 0, maxX: 1, minY: 0, maxY: 0 };\n    this._anchor = new ObservablePoint(\n      {\n        _onUpdate: () => {\n          this.onViewUpdate();\n        }\n      }\n    );\n    if (anchor) {\n      this.anchor = anchor;\n    } else if (texture.defaultAnchor) {\n      this.anchor = texture.defaultAnchor;\n    }\n    this.texture = texture;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n    if (width !== void 0)\n      this.width = width;\n    if (height !== void 0)\n      this.height = height;\n  }\n  /**\n   * Creates a new sprite based on a source texture, image, video, or canvas element.\n   * This is a convenience method that automatically creates and manages textures.\n   * @example\n   * ```ts\n   * // Create from path or URL\n   * const sprite = Sprite.from('assets/image.png');\n   *\n   * // Create from existing texture\n   * const sprite = Sprite.from(texture);\n   *\n   * // Create from canvas\n   * const canvas = document.createElement('canvas');\n   * const sprite = Sprite.from(canvas, true); // Skip caching new texture\n   * ```\n   * @param source - The source to create the sprite from. Can be a path to an image, a texture,\n   * or any valid texture source (canvas, video, etc.)\n   * @param skipCache - Whether to skip adding to the texture cache when creating a new texture\n   * @returns A new sprite based on the source\n   * @see {@link Texture.from} For texture creation details\n   * @see {@link Assets} For asset loading and management\n   */\n  static from(source, skipCache = false) {\n    if (source instanceof Texture) {\n      return new Sprite(source);\n    }\n    return new Sprite(Texture.from(source, skipCache));\n  }\n  set texture(value) {\n    value || (value = Texture.EMPTY);\n    const currentTexture = this._texture;\n    if (currentTexture === value)\n      return;\n    if (currentTexture && currentTexture.dynamic)\n      currentTexture.off(\"update\", this.onViewUpdate, this);\n    if (value.dynamic)\n      value.on(\"update\", this.onViewUpdate, this);\n    this._texture = value;\n    if (this._width) {\n      this._setWidth(this._width, this._texture.orig.width);\n    }\n    if (this._height) {\n      this._setHeight(this._height, this._texture.orig.height);\n    }\n    this.onViewUpdate();\n  }\n  /**\n   * The texture that is displayed by the sprite. When changed, automatically updates\n   * the sprite dimensions and manages texture event listeners.\n   * @example\n   * ```ts\n   * // Create sprite with texture\n   * const sprite = new Sprite({\n   *     texture: Texture.from('sprite.png')\n   * });\n   *\n   * // Update texture\n   * sprite.texture = Texture.from('newSprite.png');\n   *\n   * // Use texture from spritesheet\n   * const sheet = await Assets.load('spritesheet.json');\n   * sprite.texture = sheet.textures['frame1.png'];\n   *\n   * // Reset to empty texture\n   * sprite.texture = Texture.EMPTY;\n   * ```\n   * @see {@link Texture} For texture creation and management\n   * @see {@link Assets} For asset loading\n   */\n  get texture() {\n    return this._texture;\n  }\n  /**\n   * The bounds of the sprite, taking into account the texture's trim area.\n   * @example\n   * ```ts\n   * const texture = new Texture({\n   *     source: new TextureSource({ width: 300, height: 300 }),\n   *     frame: new Rectangle(196, 66, 58, 56),\n   *     trim: new Rectangle(4, 4, 58, 56),\n   *     orig: new Rectangle(0, 0, 64, 64),\n   *     rotate: 2,\n   * });\n   * const sprite = new Sprite(texture);\n   * const visualBounds = sprite.visualBounds;\n   * // console.log(visualBounds); // { minX: -4, maxX: 62, minY: -4, maxY: 60 }\n   */\n  get visualBounds() {\n    updateQuadBounds(this._visualBounds, this._anchor, this._texture);\n    return this._visualBounds;\n  }\n  /**\n   * @deprecated\n   * @ignore\n   */\n  get sourceBounds() {\n    deprecation(\"8.6.1\", \"Sprite.sourceBounds is deprecated, use visualBounds instead.\");\n    return this.visualBounds;\n  }\n  /** @private */\n  updateBounds() {\n    const anchor = this._anchor;\n    const texture = this._texture;\n    const bounds = this._bounds;\n    const { width, height } = texture.orig;\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height;\n    bounds.maxY = bounds.minY + height;\n  }\n  /**\n   * Destroys this sprite renderable and optionally its texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * sprite.destroy();\n   * sprite.destroy(true);\n   * sprite.destroy({ texture: true, textureSource: true });\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      this._texture.destroy(destroyTextureSource);\n    }\n    this._texture = null;\n    this._visualBounds = null;\n    this._bounds = null;\n    this._anchor = null;\n    this._gpuData = null;\n  }\n  /**\n   * The anchor sets the origin point of the sprite. The default value is taken from the {@link Texture}\n   * and passed to the constructor.\n   *\n   * - The default is `(0,0)`, this means the sprite's origin is the top left.\n   * - Setting the anchor to `(0.5,0.5)` means the sprite's origin is centered.\n   * - Setting the anchor to `(1,1)` would mean the sprite's origin point will be the bottom right corner.\n   *\n   * If you pass only single parameter, it will set both x and y to the same value as shown in the example below.\n   * @example\n   * ```ts\n   * // Center the anchor point\n   * sprite.anchor = 0.5; // Sets both x and y to 0.5\n   * sprite.position.set(400, 300); // Sprite will be centered at this position\n   *\n   * // Set specific x/y anchor points\n   * sprite.anchor = {\n   *     x: 1, // Right edge\n   *     y: 0  // Top edge\n   * };\n   *\n   * // Using individual coordinates\n   * sprite.anchor.set(0.5, 1); // Center-bottom\n   *\n   * // For rotation around center\n   * sprite.anchor.set(0.5);\n   * sprite.rotation = Math.PI / 4; // 45 degrees around center\n   *\n   * // For scaling from center\n   * sprite.anchor.set(0.5);\n   * sprite.scale.set(2); // Scales from center point\n   * ```\n   */\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    typeof value === \"number\" ? this._anchor.set(value) : this._anchor.copyFrom(value);\n  }\n  /**\n   * The width of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set width directly\n   * sprite.width = 200;\n   * console.log(sprite.scale.x); // Scale adjusted to match width\n   *\n   * // Set width while preserving aspect ratio\n   * const ratio = sprite.height / sprite.width;\n   * sprite.width = 300;\n   * sprite.height = 300 * ratio;\n   *\n   * // For better performance when setting both width and height\n   * sprite.setSize(300, 400); // Avoids recalculating bounds twice\n   *\n   * // Reset to original texture size\n   * sprite.width = sprite.texture.orig.width;\n   * ```\n   */\n  get width() {\n    return Math.abs(this.scale.x) * this._texture.orig.width;\n  }\n  set width(value) {\n    this._setWidth(value, this._texture.orig.width);\n    this._width = value;\n  }\n  /**\n   * The height of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set height directly\n   * sprite.height = 150;\n   * console.log(sprite.scale.y); // Scale adjusted to match height\n   *\n   * // Set height while preserving aspect ratio\n   * const ratio = sprite.width / sprite.height;\n   * sprite.height = 200;\n   * sprite.width = 200 * ratio;\n   *\n   * // For better performance when setting both width and height\n   * sprite.setSize(300, 400); // Avoids recalculating bounds twice\n   *\n   * // Reset to original texture size\n   * sprite.height = sprite.texture.orig.height;\n   * ```\n   */\n  get height() {\n    return Math.abs(this.scale.y) * this._texture.orig.height;\n  }\n  set height(value) {\n    this._setHeight(value, this._texture.orig.height);\n    this._height = value;\n  }\n  /**\n   * Retrieves the size of the Sprite as a [Size]{@link Size} object based on the texture dimensions and scale.\n   * This is faster than getting width and height separately as it only calculates the bounds once.\n   * @example\n   * ```ts\n   * // Basic size retrieval\n   * const sprite = new Sprite(Texture.from('sprite.png'));\n   * const size = sprite.getSize();\n   * console.log(`Size: ${size.width}x${size.height}`);\n   *\n   * // Reuse existing size object\n   * const reuseSize = { width: 0, height: 0 };\n   * sprite.getSize(reuseSize);\n   * ```\n   * @param out - Optional object to store the size in, to avoid allocating a new object\n   * @returns The size of the Sprite\n   * @see {@link Sprite#width} For getting just the width\n   * @see {@link Sprite#height} For getting just the height\n   * @see {@link Sprite#setSize} For setting both width and height\n   */\n  getSize(out) {\n    out || (out = {});\n    out.width = Math.abs(this.scale.x) * this._texture.orig.width;\n    out.height = Math.abs(this.scale.y) * this._texture.orig.height;\n    return out;\n  }\n  /**\n   * Sets the size of the Sprite to the specified width and height.\n   * This is faster than setting width and height separately as it only recalculates bounds once.\n   * @example\n   * ```ts\n   * // Basic size setting\n   * const sprite = new Sprite(Texture.from('sprite.png'));\n   * sprite.setSize(100, 200); // Width: 100, Height: 200\n   *\n   * // Set uniform size\n   * sprite.setSize(100); // Sets both width and height to 100\n   *\n   * // Set size with object\n   * sprite.setSize({\n   *     width: 200,\n   *     height: 300\n   * });\n   *\n   * // Reset to texture size\n   * sprite.setSize(\n   *     sprite.texture.orig.width,\n   *     sprite.texture.orig.height\n   * );\n   * ```\n   * @param value - This can be either a number or a {@link Size} object\n   * @param height - The height to set. Defaults to the value of `width` if not provided\n   * @see {@link Sprite#width} For setting width only\n   * @see {@link Sprite#height} For setting height only\n   * @see {@link Sprite#texture} For the source dimensions\n   */\n  setSize(value, height) {\n    if (typeof value === \"object\") {\n      height = value.height ?? value.width;\n      value = value.width;\n    } else {\n      height ?? (height = value);\n    }\n    value !== void 0 && this._setWidth(value, this._texture.orig.width);\n    height !== void 0 && this._setHeight(height, this._texture.orig.height);\n  }\n}\n\nexport { Sprite };\n//# sourceMappingURL=Sprite.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nlet promise;\nasync function detectVideoAlphaMode() {\n  promise ?? (promise = (async () => {\n    const canvas = DOMAdapter.get().createCanvas(1, 1);\n    const gl = canvas.getContext(\"webgl\");\n    if (!gl) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const video = await new Promise((resolve) => {\n      const video2 = document.createElement(\"video\");\n      video2.onloadeddata = () => resolve(video2);\n      video2.onerror = () => resolve(null);\n      video2.autoplay = false;\n      video2.crossOrigin = \"anonymous\";\n      video2.preload = \"auto\";\n      video2.src = \"data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=\";\n      video2.load();\n    });\n    if (!video) {\n      return \"premultiply-alpha-on-upload\";\n    }\n    const texture = gl.createTexture();\n    gl.bindTexture(gl.TEXTURE_2D, texture);\n    const framebuffer = gl.createFramebuffer();\n    gl.bindFramebuffer(gl.FRAMEBUFFER, framebuffer);\n    gl.framebufferTexture2D(\n      gl.FRAMEBUFFER,\n      gl.COLOR_ATTACHMENT0,\n      gl.TEXTURE_2D,\n      texture,\n      0\n    );\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, false);\n    gl.pixelStorei(gl.UNPACK_COLORSPACE_CONVERSION_WEBGL, gl.NONE);\n    gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, gl.RGBA, gl.UNSIGNED_BYTE, video);\n    const pixel = new Uint8Array(4);\n    gl.readPixels(0, 0, 1, 1, gl.RGBA, gl.UNSIGNED_BYTE, pixel);\n    gl.deleteFramebuffer(framebuffer);\n    gl.deleteTexture(texture);\n    gl.getExtension(\"WEBGL_lose_context\")?.loseContext();\n    return pixel[0] <= pixel[3] ? \"premultiplied-alpha\" : \"premultiply-alpha-on-upload\";\n  })());\n  return promise;\n}\n\nexport { detectVideoAlphaMode };\n//# sourceMappingURL=detectVideoAlphaMode.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { multiplyHexColors } from '../../container/utils/multiplyHexColors.mjs';\n\n\"use strict\";\nconst identityMatrix = new Matrix();\nclass BatchableGraphics {\n  constructor() {\n    this.packAsQuad = false;\n    this.batcherName = \"default\";\n    this.topology = \"triangle-list\";\n    this.applyTransform = true;\n    this.roundPixels = 0;\n    this._batcher = null;\n    this._batch = null;\n  }\n  get uvs() {\n    return this.geometryData.uvs;\n  }\n  get positions() {\n    return this.geometryData.vertices;\n  }\n  get indices() {\n    return this.geometryData.indices;\n  }\n  get blendMode() {\n    if (this.renderable && this.applyTransform) {\n      return this.renderable.groupBlendMode;\n    }\n    return \"normal\";\n  }\n  get color() {\n    const rgb = this.baseColor;\n    const bgr = rgb >> 16 | rgb & 65280 | (rgb & 255) << 16;\n    const renderable = this.renderable;\n    if (renderable) {\n      return multiplyHexColors(bgr, renderable.groupColor) + (this.alpha * renderable.groupAlpha * 255 << 24);\n    }\n    return bgr + (this.alpha * 255 << 24);\n  }\n  get transform() {\n    return this.renderable?.groupTransform || identityMatrix;\n  }\n  copyTo(gpuBuffer) {\n    gpuBuffer.indexOffset = this.indexOffset;\n    gpuBuffer.indexSize = this.indexSize;\n    gpuBuffer.attributeOffset = this.attributeOffset;\n    gpuBuffer.attributeSize = this.attributeSize;\n    gpuBuffer.baseColor = this.baseColor;\n    gpuBuffer.alpha = this.alpha;\n    gpuBuffer.texture = this.texture;\n    gpuBuffer.geometryData = this.geometryData;\n    gpuBuffer.topology = this.topology;\n  }\n  reset() {\n    this.applyTransform = true;\n    this.renderable = null;\n    this.topology = \"triangle-list\";\n  }\n  destroy() {\n    this.renderable = null;\n    this.texture = null;\n    this.geometryData = null;\n    this._batcher = null;\n    this._batch = null;\n  }\n}\n\nexport { BatchableGraphics };\n//# sourceMappingURL=BatchableGraphics.mjs.map\n","exports.parseMidi = require('./lib/midi-parser')\nexports.writeMidi = require('./lib/midi-writer')\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.PitchBend = void 0;\nvar privateHeaderMap = new WeakMap();\n/**\n * Represents a pitch bend event.\n */\nvar PitchBend = /** @class */ (function () {\n    /**\n     * @param event\n     * @param header\n     */\n    function PitchBend(event, header) {\n        privateHeaderMap.set(this, header);\n        this.ticks = event.absoluteTime;\n        this.value = event.value;\n    }\n    Object.defineProperty(PitchBend.prototype, \"time\", {\n        /**\n         * The time of the event in seconds\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToSeconds(this.ticks);\n        },\n        set: function (t) {\n            var header = privateHeaderMap.get(this);\n            this.ticks = header.secondsToTicks(t);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    PitchBend.prototype.toJSON = function () {\n        return {\n            ticks: this.ticks,\n            time: this.time,\n            value: this.value,\n        };\n    };\n    return PitchBend;\n}());\nexports.PitchBend = PitchBend;\n//# sourceMappingURL=PitchBend.js.map","import { unsafeEvalSupported } from '../../../../utils/browser/unsafeEvalSupported.mjs';\nimport { Buffer } from '../buffer/Buffer.mjs';\nimport { BufferUsage } from '../buffer/const.mjs';\n\n\"use strict\";\nclass UboSystem {\n  constructor(adaptor) {\n    /** Cache of uniform buffer layouts and sync functions, so we don't have to re-create them */\n    this._syncFunctionHash = /* @__PURE__ */ Object.create(null);\n    this._adaptor = adaptor;\n    this._systemCheck();\n  }\n  /**\n   * Overridable function by `pixi.js/unsafe-eval` to silence\n   * throwing an error if platform doesn't support unsafe-evals.\n   * @private\n   */\n  _systemCheck() {\n    if (!unsafeEvalSupported()) {\n      throw new Error(\"Current environment does not allow unsafe-eval, please use pixi.js/unsafe-eval module to enable support.\");\n    }\n  }\n  ensureUniformGroup(uniformGroup) {\n    const uniformData = this.getUniformGroupData(uniformGroup);\n    uniformGroup.buffer || (uniformGroup.buffer = new Buffer({\n      data: new Float32Array(uniformData.layout.size / 4),\n      usage: BufferUsage.UNIFORM | BufferUsage.COPY_DST\n    }));\n  }\n  getUniformGroupData(uniformGroup) {\n    return this._syncFunctionHash[uniformGroup._signature] || this._initUniformGroup(uniformGroup);\n  }\n  _initUniformGroup(uniformGroup) {\n    const uniformGroupSignature = uniformGroup._signature;\n    let uniformData = this._syncFunctionHash[uniformGroupSignature];\n    if (!uniformData) {\n      const elements = Object.keys(uniformGroup.uniformStructures).map((i) => uniformGroup.uniformStructures[i]);\n      const layout = this._adaptor.createUboElements(elements);\n      const syncFunction = this._generateUboSync(layout.uboElements);\n      uniformData = this._syncFunctionHash[uniformGroupSignature] = {\n        layout,\n        syncFunction\n      };\n    }\n    return this._syncFunctionHash[uniformGroupSignature];\n  }\n  _generateUboSync(uboElements) {\n    return this._adaptor.generateUboSync(uboElements);\n  }\n  syncUniformGroup(uniformGroup, data, offset) {\n    const uniformGroupData = this.getUniformGroupData(uniformGroup);\n    uniformGroup.buffer || (uniformGroup.buffer = new Buffer({\n      data: new Float32Array(uniformGroupData.layout.size / 4),\n      usage: BufferUsage.UNIFORM | BufferUsage.COPY_DST\n    }));\n    let dataInt32 = null;\n    if (!data) {\n      data = uniformGroup.buffer.data;\n      dataInt32 = uniformGroup.buffer.dataInt32;\n    }\n    offset || (offset = 0);\n    uniformGroupData.syncFunction(uniformGroup.uniforms, data, dataInt32, offset);\n    return true;\n  }\n  updateUniformGroup(uniformGroup) {\n    if (uniformGroup.isStatic && !uniformGroup._dirtyId)\n      return false;\n    uniformGroup._dirtyId = 0;\n    const synced = this.syncUniformGroup(uniformGroup);\n    uniformGroup.buffer.update();\n    return synced;\n  }\n  destroy() {\n    this._syncFunctionHash = null;\n  }\n}\n\nexport { UboSystem };\n//# sourceMappingURL=UboSystem.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { VERSION } from '../const.mjs';\n\n\"use strict\";\nclass ApplicationInitHook {\n  static init() {\n    globalThis.__PIXI_APP_INIT__?.(this, VERSION);\n  }\n  static destroy() {\n  }\n}\n/** @ignore */\nApplicationInitHook.extension = ExtensionType.Application;\nclass RendererInitHook {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  init() {\n    globalThis.__PIXI_RENDERER_INIT__?.(this._renderer, VERSION);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nRendererInitHook.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"initHook\",\n  priority: -10\n};\n\nexport { ApplicationInitHook, RendererInitHook };\n//# sourceMappingURL=globalHooks.mjs.map\n","import { warn } from '../../../../../utils/logging/warn.mjs';\nimport { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nfunction ensureAttributes(geometry, extractedData) {\n  for (const i in geometry.attributes) {\n    const attribute = geometry.attributes[i];\n    const attributeData = extractedData[i];\n    if (attributeData) {\n      attribute.format ?? (attribute.format = attributeData.format);\n      attribute.offset ?? (attribute.offset = attributeData.offset);\n      attribute.instance ?? (attribute.instance = attributeData.instance);\n    } else {\n      warn(`Attribute ${i} is not present in the shader, but is present in the geometry. Unable to infer attribute details.`);\n    }\n  }\n  ensureStartAndStride(geometry);\n}\nfunction ensureStartAndStride(geometry) {\n  const { buffers, attributes } = geometry;\n  const tempStride = {};\n  const tempStart = {};\n  for (const j in buffers) {\n    const buffer = buffers[j];\n    tempStride[buffer.uid] = 0;\n    tempStart[buffer.uid] = 0;\n  }\n  for (const j in attributes) {\n    const attribute = attributes[j];\n    tempStride[attribute.buffer.uid] += getAttributeInfoFromFormat(attribute.format).stride;\n  }\n  for (const j in attributes) {\n    const attribute = attributes[j];\n    attribute.stride ?? (attribute.stride = tempStride[attribute.buffer.uid]);\n    attribute.start ?? (attribute.start = tempStart[attribute.buffer.uid]);\n    tempStart[attribute.buffer.uid] += getAttributeInfoFromFormat(attribute.format).stride;\n  }\n}\n\nexport { ensureAttributes };\n//# sourceMappingURL=ensureAttributes.mjs.map\n","var arrayLikeToArray = require(\"./arrayLikeToArray.js\");\nfunction _unsupportedIterableToArray(r, a) {\n  if (r) {\n    if (\"string\" == typeof r) return arrayLikeToArray(r, a);\n    var t = {}.toString.call(r).slice(8, -1);\n    return \"Object\" === t && r.constructor && (t = r.constructor.name), \"Map\" === t || \"Set\" === t ? Array.from(r) : \"Arguments\" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? arrayLikeToArray(r, a) : void 0;\n  }\n}\nmodule.exports = _unsupportedIterableToArray, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","import { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { CLEAR } from '../../gl/const.mjs';\nimport { calculateProjection } from '../../gpu/renderTarget/calculateProjection.mjs';\nimport { SystemRunner } from '../system/SystemRunner.mjs';\nimport { CanvasSource } from '../texture/sources/CanvasSource.mjs';\nimport { TextureSource } from '../texture/sources/TextureSource.mjs';\nimport { Texture } from '../texture/Texture.mjs';\nimport { getCanvasTexture } from '../texture/utils/getCanvasTexture.mjs';\nimport { isRenderingToScreen } from './isRenderingToScreen.mjs';\nimport { RenderTarget } from './RenderTarget.mjs';\n\n\"use strict\";\nclass RenderTargetSystem {\n  constructor(renderer) {\n    /** This is the root viewport for the render pass*/\n    this.rootViewPort = new Rectangle();\n    /** the current viewport that the gpu is using */\n    this.viewport = new Rectangle();\n    /**\n     * a runner that lets systems know if the active render target has changed.\n     * Eg the Stencil System needs to know so it can manage the stencil buffer\n     */\n    this.onRenderTargetChange = new SystemRunner(\"onRenderTargetChange\");\n    /** the projection matrix that is used by the shaders based on the active render target and the viewport */\n    this.projectionMatrix = new Matrix();\n    /** the default clear color for render targets */\n    this.defaultClearColor = [0, 0, 0, 0];\n    /**\n     * a hash that stores the render target for a given render surface. When you pass in a texture source,\n     * a render target is created for it. This map stores and makes it easy to retrieve the render target\n     */\n    this._renderSurfaceToRenderTargetHash = /* @__PURE__ */ new Map();\n    /** A hash that stores a gpu render target for a given render target. */\n    this._gpuRenderTargetHash = /* @__PURE__ */ Object.create(null);\n    /**\n     * A stack that stores the render target and frame that is currently being rendered to.\n     * When push is called, the current render target is stored in this stack.\n     * When pop is called, the previous render target is restored.\n     */\n    this._renderTargetStack = [];\n    this._renderer = renderer;\n    renderer.renderableGC.addManagedHash(this, \"_gpuRenderTargetHash\");\n  }\n  /** called when dev wants to finish a render pass */\n  finishRenderPass() {\n    this.adaptor.finishRenderPass(this.renderTarget);\n  }\n  /**\n   * called when the renderer starts to render a scene.\n   * @param options\n   * @param options.target - the render target to render to\n   * @param options.clear - the clear mode to use. Can be true or a CLEAR number 'COLOR | DEPTH | STENCIL' 0b111\n   * @param options.clearColor - the color to clear to\n   * @param options.frame - the frame to render to\n   */\n  renderStart({\n    target,\n    clear,\n    clearColor,\n    frame\n  }) {\n    this._renderTargetStack.length = 0;\n    this.push(\n      target,\n      clear,\n      clearColor,\n      frame\n    );\n    this.rootViewPort.copyFrom(this.viewport);\n    this.rootRenderTarget = this.renderTarget;\n    this.renderingToScreen = isRenderingToScreen(this.rootRenderTarget);\n    this.adaptor.prerender?.(this.rootRenderTarget);\n  }\n  postrender() {\n    this.adaptor.postrender?.(this.rootRenderTarget);\n  }\n  /**\n   * Binding a render surface! This is the main function of the render target system.\n   * It will take the RenderSurface (which can be a texture, canvas, or render target) and bind it to the renderer.\n   * Once bound all draw calls will be rendered to the render surface.\n   *\n   * If a frame is not provide and the render surface is a texture, the frame of the texture will be used.\n   * @param renderSurface - the render surface to bind\n   * @param clear - the clear mode to use. Can be true or a CLEAR number 'COLOR | DEPTH | STENCIL' 0b111\n   * @param clearColor - the color to clear to\n   * @param frame - the frame to render to\n   * @returns the render target that was bound\n   */\n  bind(renderSurface, clear = true, clearColor, frame) {\n    const renderTarget = this.getRenderTarget(renderSurface);\n    const didChange = this.renderTarget !== renderTarget;\n    this.renderTarget = renderTarget;\n    this.renderSurface = renderSurface;\n    const gpuRenderTarget = this.getGpuRenderTarget(renderTarget);\n    if (renderTarget.pixelWidth !== gpuRenderTarget.width || renderTarget.pixelHeight !== gpuRenderTarget.height) {\n      this.adaptor.resizeGpuRenderTarget(renderTarget);\n      gpuRenderTarget.width = renderTarget.pixelWidth;\n      gpuRenderTarget.height = renderTarget.pixelHeight;\n    }\n    const source = renderTarget.colorTexture;\n    const viewport = this.viewport;\n    const pixelWidth = source.pixelWidth;\n    const pixelHeight = source.pixelHeight;\n    if (!frame && renderSurface instanceof Texture) {\n      frame = renderSurface.frame;\n    }\n    if (frame) {\n      const resolution = source._resolution;\n      viewport.x = frame.x * resolution + 0.5 | 0;\n      viewport.y = frame.y * resolution + 0.5 | 0;\n      viewport.width = frame.width * resolution + 0.5 | 0;\n      viewport.height = frame.height * resolution + 0.5 | 0;\n    } else {\n      viewport.x = 0;\n      viewport.y = 0;\n      viewport.width = pixelWidth;\n      viewport.height = pixelHeight;\n    }\n    calculateProjection(\n      this.projectionMatrix,\n      0,\n      0,\n      viewport.width / source.resolution,\n      viewport.height / source.resolution,\n      !renderTarget.isRoot\n    );\n    this.adaptor.startRenderPass(renderTarget, clear, clearColor, viewport);\n    if (didChange) {\n      this.onRenderTargetChange.emit(renderTarget);\n    }\n    return renderTarget;\n  }\n  clear(target, clear = CLEAR.ALL, clearColor) {\n    if (!clear)\n      return;\n    if (target) {\n      target = this.getRenderTarget(target);\n    }\n    this.adaptor.clear(\n      target || this.renderTarget,\n      clear,\n      clearColor,\n      this.viewport\n    );\n  }\n  contextChange() {\n    this._gpuRenderTargetHash = /* @__PURE__ */ Object.create(null);\n  }\n  /**\n   * Push a render surface to the renderer. This will bind the render surface to the renderer,\n   * @param renderSurface - the render surface to push\n   * @param clear - the clear mode to use. Can be true or a CLEAR number 'COLOR | DEPTH | STENCIL' 0b111\n   * @param clearColor - the color to clear to\n   * @param frame - the frame to use when rendering to the render surface\n   */\n  push(renderSurface, clear = CLEAR.ALL, clearColor, frame) {\n    const renderTarget = this.bind(renderSurface, clear, clearColor, frame);\n    this._renderTargetStack.push({\n      renderTarget,\n      frame\n    });\n    return renderTarget;\n  }\n  /** Pops the current render target from the renderer and restores the previous render target. */\n  pop() {\n    this._renderTargetStack.pop();\n    const currentRenderTargetData = this._renderTargetStack[this._renderTargetStack.length - 1];\n    this.bind(currentRenderTargetData.renderTarget, false, null, currentRenderTargetData.frame);\n  }\n  /**\n   * Gets the render target from the provide render surface. Eg if its a texture,\n   * it will return the render target for the texture.\n   * If its a render target, it will return the same render target.\n   * @param renderSurface - the render surface to get the render target for\n   * @returns the render target for the render surface\n   */\n  getRenderTarget(renderSurface) {\n    if (renderSurface.isTexture) {\n      renderSurface = renderSurface.source;\n    }\n    return this._renderSurfaceToRenderTargetHash.get(renderSurface) ?? this._initRenderTarget(renderSurface);\n  }\n  /**\n   * Copies a render surface to another texture.\n   *\n   * NOTE:\n   * for sourceRenderSurfaceTexture, The render target must be something that is written too by the renderer\n   *\n   * The following is not valid:\n   * @example\n   * const canvas = document.createElement('canvas')\n   * canvas.width = 200;\n   * canvas.height = 200;\n   *\n   * const ctx = canvas2.getContext('2d')!\n   * ctx.fillStyle = 'red'\n   * ctx.fillRect(0, 0, 200, 200);\n   *\n   * const texture = RenderTexture.create({\n   *   width: 200,\n   *   height: 200,\n   * })\n   * const renderTarget = renderer.renderTarget.getRenderTarget(canvas2);\n   *\n   * renderer.renderTarget.copyToTexture(renderTarget,texture, {x:0,y:0},{width:200,height:200},{x:0,y:0});\n   *\n   * The best way to copy a canvas is to create a texture from it. Then render with that.\n   *\n   * Parsing in a RenderTarget canvas context (with a 2d context)\n   * @param sourceRenderSurfaceTexture - the render surface to copy from\n   * @param destinationTexture - the texture to copy to\n   * @param originSrc - the origin of the copy\n   * @param originSrc.x - the x origin of the copy\n   * @param originSrc.y - the y origin of the copy\n   * @param size - the size of the copy\n   * @param size.width - the width of the copy\n   * @param size.height - the height of the copy\n   * @param originDest - the destination origin (top left to paste from!)\n   * @param originDest.x - the x origin of the paste\n   * @param originDest.y - the y origin of the paste\n   */\n  copyToTexture(sourceRenderSurfaceTexture, destinationTexture, originSrc, size, originDest) {\n    if (originSrc.x < 0) {\n      size.width += originSrc.x;\n      originDest.x -= originSrc.x;\n      originSrc.x = 0;\n    }\n    if (originSrc.y < 0) {\n      size.height += originSrc.y;\n      originDest.y -= originSrc.y;\n      originSrc.y = 0;\n    }\n    const { pixelWidth, pixelHeight } = sourceRenderSurfaceTexture;\n    size.width = Math.min(size.width, pixelWidth - originSrc.x);\n    size.height = Math.min(size.height, pixelHeight - originSrc.y);\n    return this.adaptor.copyToTexture(\n      sourceRenderSurfaceTexture,\n      destinationTexture,\n      originSrc,\n      size,\n      originDest\n    );\n  }\n  /**\n   * ensures that we have a depth stencil buffer available to render to\n   * This is used by the mask system to make sure we have a stencil buffer.\n   */\n  ensureDepthStencil() {\n    if (!this.renderTarget.stencil) {\n      this.renderTarget.stencil = true;\n      this.adaptor.startRenderPass(this.renderTarget, false, null, this.viewport);\n    }\n  }\n  /** nukes the render target system */\n  destroy() {\n    this._renderer = null;\n    this._renderSurfaceToRenderTargetHash.forEach((renderTarget, key) => {\n      if (renderTarget !== key) {\n        renderTarget.destroy();\n      }\n    });\n    this._renderSurfaceToRenderTargetHash.clear();\n    this._gpuRenderTargetHash = /* @__PURE__ */ Object.create(null);\n  }\n  _initRenderTarget(renderSurface) {\n    let renderTarget = null;\n    if (CanvasSource.test(renderSurface)) {\n      renderSurface = getCanvasTexture(renderSurface).source;\n    }\n    if (renderSurface instanceof RenderTarget) {\n      renderTarget = renderSurface;\n    } else if (renderSurface instanceof TextureSource) {\n      renderTarget = new RenderTarget({\n        colorTextures: [renderSurface]\n      });\n      if (renderSurface.source instanceof CanvasSource) {\n        renderTarget.isRoot = true;\n      }\n      renderSurface.once(\"destroy\", () => {\n        renderTarget.destroy();\n        this._renderSurfaceToRenderTargetHash.delete(renderSurface);\n        const gpuRenderTarget = this._gpuRenderTargetHash[renderTarget.uid];\n        if (gpuRenderTarget) {\n          this._gpuRenderTargetHash[renderTarget.uid] = null;\n          this.adaptor.destroyGpuRenderTarget(gpuRenderTarget);\n        }\n      });\n    }\n    this._renderSurfaceToRenderTargetHash.set(renderSurface, renderTarget);\n    return renderTarget;\n  }\n  getGpuRenderTarget(renderTarget) {\n    return this._gpuRenderTargetHash[renderTarget.uid] || (this._gpuRenderTargetHash[renderTarget.uid] = this.adaptor.initGpuRenderTarget(renderTarget));\n  }\n  resetState() {\n    this.renderTarget = null;\n    this.renderSurface = null;\n  }\n}\n\nexport { RenderTargetSystem };\n//# sourceMappingURL=RenderTargetSystem.mjs.map\n","\"use strict\";\nfunction isRenderingToScreen(renderTarget) {\n  const resource = renderTarget.colorTexture.source.resource;\n  return globalThis.HTMLCanvasElement && resource instanceof HTMLCanvasElement && document.body.contains(resource);\n}\n\nexport { isRenderingToScreen };\n//# sourceMappingURL=isRenderingToScreen.mjs.map\n","\"use strict\";\nfunction calculateProjection(pm, x, y, width, height, flipY) {\n  const sign = flipY ? 1 : -1;\n  pm.identity();\n  pm.a = 1 / width * 2;\n  pm.d = sign * (1 / height * 2);\n  pm.tx = -1 - x * pm.a;\n  pm.ty = -sign - y * pm.d;\n  return pm;\n}\n\nexport { calculateProjection };\n//# sourceMappingURL=calculateProjection.mjs.map\n","import { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { MeshGeometry } from '../mesh/shared/MeshGeometry.mjs';\n\n\"use strict\";\nconst _PlaneGeometry = class _PlaneGeometry extends MeshGeometry {\n  constructor(...args) {\n    super({});\n    let options = args[0] ?? {};\n    if (typeof options === \"number\") {\n      deprecation(v8_0_0, \"PlaneGeometry constructor changed please use { width, height, verticesX, verticesY } instead\");\n      options = {\n        width: options,\n        height: args[1],\n        verticesX: args[2],\n        verticesY: args[3]\n      };\n    }\n    this.build(options);\n  }\n  /**\n   * Refreshes plane coordinates\n   * @param options - Options to be applied to plane geometry\n   */\n  build(options) {\n    options = { ..._PlaneGeometry.defaultOptions, ...options };\n    this.verticesX = this.verticesX ?? options.verticesX;\n    this.verticesY = this.verticesY ?? options.verticesY;\n    this.width = this.width ?? options.width;\n    this.height = this.height ?? options.height;\n    const total = this.verticesX * this.verticesY;\n    const verts = [];\n    const uvs = [];\n    const indices = [];\n    const verticesX = this.verticesX - 1;\n    const verticesY = this.verticesY - 1;\n    const sizeX = this.width / verticesX;\n    const sizeY = this.height / verticesY;\n    for (let i = 0; i < total; i++) {\n      const x = i % this.verticesX;\n      const y = i / this.verticesX | 0;\n      verts.push(x * sizeX, y * sizeY);\n      uvs.push(x / verticesX, y / verticesY);\n    }\n    const totalSub = verticesX * verticesY;\n    for (let i = 0; i < totalSub; i++) {\n      const xpos = i % verticesX;\n      const ypos = i / verticesX | 0;\n      const value = ypos * this.verticesX + xpos;\n      const value2 = ypos * this.verticesX + xpos + 1;\n      const value3 = (ypos + 1) * this.verticesX + xpos;\n      const value4 = (ypos + 1) * this.verticesX + xpos + 1;\n      indices.push(\n        value,\n        value2,\n        value3,\n        value2,\n        value4,\n        value3\n      );\n    }\n    this.buffers[0].data = new Float32Array(verts);\n    this.buffers[1].data = new Float32Array(uvs);\n    this.indexBuffer.data = new Uint32Array(indices);\n    this.buffers[0].update();\n    this.buffers[1].update();\n    this.indexBuffer.update();\n  }\n};\n_PlaneGeometry.defaultOptions = {\n  width: 100,\n  height: 100,\n  verticesX: 10,\n  verticesY: 10\n};\nlet PlaneGeometry = _PlaneGeometry;\n\nexport { PlaneGeometry };\n//# sourceMappingURL=PlaneGeometry.mjs.map\n","import { PlaneGeometry } from '../mesh-plane/PlaneGeometry.mjs';\n\n\"use strict\";\nconst _NineSliceGeometry = class _NineSliceGeometry extends PlaneGeometry {\n  constructor(options = {}) {\n    options = { ..._NineSliceGeometry.defaultOptions, ...options };\n    super({\n      width: options.width,\n      height: options.height,\n      verticesX: 4,\n      verticesY: 4\n    });\n    this.update(options);\n  }\n  /**\n   * Updates the NineSliceGeometry with the options.\n   * @param options - The options of the NineSliceGeometry.\n   */\n  update(options) {\n    this.width = options.width ?? this.width;\n    this.height = options.height ?? this.height;\n    this._originalWidth = options.originalWidth ?? this._originalWidth;\n    this._originalHeight = options.originalHeight ?? this._originalHeight;\n    this._leftWidth = options.leftWidth ?? this._leftWidth;\n    this._rightWidth = options.rightWidth ?? this._rightWidth;\n    this._topHeight = options.topHeight ?? this._topHeight;\n    this._bottomHeight = options.bottomHeight ?? this._bottomHeight;\n    this._anchorX = options.anchor?.x;\n    this._anchorY = options.anchor?.y;\n    this.updateUvs();\n    this.updatePositions();\n  }\n  /** Updates the positions of the vertices. */\n  updatePositions() {\n    const p = this.positions;\n    const {\n      width,\n      height,\n      _leftWidth,\n      _rightWidth,\n      _topHeight,\n      _bottomHeight,\n      _anchorX,\n      _anchorY\n    } = this;\n    const w = _leftWidth + _rightWidth;\n    const scaleW = width > w ? 1 : width / w;\n    const h = _topHeight + _bottomHeight;\n    const scaleH = height > h ? 1 : height / h;\n    const scale = Math.min(scaleW, scaleH);\n    const anchorOffsetX = _anchorX * width;\n    const anchorOffsetY = _anchorY * height;\n    p[0] = p[8] = p[16] = p[24] = -anchorOffsetX;\n    p[2] = p[10] = p[18] = p[26] = _leftWidth * scale - anchorOffsetX;\n    p[4] = p[12] = p[20] = p[28] = width - _rightWidth * scale - anchorOffsetX;\n    p[6] = p[14] = p[22] = p[30] = width - anchorOffsetX;\n    p[1] = p[3] = p[5] = p[7] = -anchorOffsetY;\n    p[9] = p[11] = p[13] = p[15] = _topHeight * scale - anchorOffsetY;\n    p[17] = p[19] = p[21] = p[23] = height - _bottomHeight * scale - anchorOffsetY;\n    p[25] = p[27] = p[29] = p[31] = height - anchorOffsetY;\n    this.getBuffer(\"aPosition\").update();\n  }\n  /** Updates the UVs of the vertices. */\n  updateUvs() {\n    const uvs = this.uvs;\n    uvs[0] = uvs[8] = uvs[16] = uvs[24] = 0;\n    uvs[1] = uvs[3] = uvs[5] = uvs[7] = 0;\n    uvs[6] = uvs[14] = uvs[22] = uvs[30] = 1;\n    uvs[25] = uvs[27] = uvs[29] = uvs[31] = 1;\n    const _uvw = 1 / this._originalWidth;\n    const _uvh = 1 / this._originalHeight;\n    uvs[2] = uvs[10] = uvs[18] = uvs[26] = _uvw * this._leftWidth;\n    uvs[9] = uvs[11] = uvs[13] = uvs[15] = _uvh * this._topHeight;\n    uvs[4] = uvs[12] = uvs[20] = uvs[28] = 1 - _uvw * this._rightWidth;\n    uvs[17] = uvs[19] = uvs[21] = uvs[23] = 1 - _uvh * this._bottomHeight;\n    this.getBuffer(\"aUV\").update();\n  }\n};\n/** The default options for the NineSliceGeometry. */\n_NineSliceGeometry.defaultOptions = {\n  /** The width of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n  width: 100,\n  /** The height of the NineSlicePlane, setting this will actually modify the vertices and UV's of this plane. */\n  height: 100,\n  /** The width of the left column. */\n  leftWidth: 10,\n  /** The height of the top row. */\n  topHeight: 10,\n  /** The width of the right column. */\n  rightWidth: 10,\n  /** The height of the bottom row. */\n  bottomHeight: 10,\n  /** The original width of the texture */\n  originalWidth: 100,\n  /** The original height of the texture */\n  originalHeight: 100\n};\nlet NineSliceGeometry = _NineSliceGeometry;\n\nexport { NineSliceGeometry };\n//# sourceMappingURL=NineSliceGeometry.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { BatchableMesh } from '../mesh/shared/BatchableMesh.mjs';\nimport { NineSliceGeometry } from './NineSliceGeometry.mjs';\n\n\"use strict\";\nclass NineSliceSpriteGpuData extends BatchableMesh {\n  constructor() {\n    super();\n    this.geometry = new NineSliceGeometry();\n  }\n  destroy() {\n    this.geometry.destroy();\n  }\n}\nclass NineSliceSpritePipe {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  addRenderable(sprite, instructionSet) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    this._renderer.renderPipes.batch.addToBatch(gpuSprite, instructionSet);\n  }\n  updateRenderable(sprite) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    if (sprite.didViewUpdate)\n      this._updateBatchableSprite(sprite, gpuSprite);\n    gpuSprite._batcher.updateElement(gpuSprite);\n  }\n  validateRenderable(sprite) {\n    const gpuSprite = this._getGpuSprite(sprite);\n    return !gpuSprite._batcher.checkAndUpdateTexture(\n      gpuSprite,\n      sprite._texture\n    );\n  }\n  _updateBatchableSprite(sprite, batchableSprite) {\n    batchableSprite.geometry.update(sprite);\n    batchableSprite.setTexture(sprite._texture);\n  }\n  _getGpuSprite(sprite) {\n    return sprite._gpuData[this._renderer.uid] || this._initGPUSprite(sprite);\n  }\n  _initGPUSprite(sprite) {\n    const gpuData = sprite._gpuData[this._renderer.uid] = new NineSliceSpriteGpuData();\n    const batchableMesh = gpuData;\n    batchableMesh.renderable = sprite;\n    batchableMesh.transform = sprite.groupTransform;\n    batchableMesh.texture = sprite._texture;\n    batchableMesh.roundPixels = this._renderer._roundPixels | sprite._roundPixels;\n    if (!sprite.didViewUpdate) {\n      this._updateBatchableSprite(sprite, batchableMesh);\n    }\n    return gpuData;\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nNineSliceSpritePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"nineSliceSprite\"\n};\n\nexport { NineSliceSpriteGpuData, NineSliceSpritePipe };\n//# sourceMappingURL=NineSliceSpritePipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { NineSliceSpritePipe } from './NineSliceSpritePipe.mjs';\n\n\"use strict\";\nextensions.add(NineSliceSpritePipe);\n//# sourceMappingURL=init.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getLocalBounds(target, bounds, relativeMatrix) {\n  bounds.clear();\n  relativeMatrix || (relativeMatrix = Matrix.IDENTITY);\n  _getLocalBounds(target, bounds, relativeMatrix, target, true);\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getLocalBounds(target, bounds, parentTransform, rootContainer, isRoot) {\n  let relativeTransform;\n  if (!isRoot) {\n    if (!target.visible || !target.measurable)\n      return;\n    target.updateLocalTransform();\n    const localTransform = target.localTransform;\n    relativeTransform = matrixPool.get();\n    relativeTransform.appendFrom(localTransform, parentTransform);\n  } else {\n    relativeTransform = matrixPool.get();\n    relativeTransform = parentTransform.copyTo(relativeTransform);\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, relativeTransform);\n  } else {\n    if (target.renderPipeId) {\n      bounds.matrix = relativeTransform;\n      bounds.addBounds(target.bounds);\n    }\n    const children = target.children;\n    for (let i = 0; i < children.length; i++) {\n      _getLocalBounds(children[i], bounds, relativeTransform, rootContainer, false);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addLocalBounds?.(bounds, rootContainer);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  matrixPool.return(relativeTransform);\n}\n\nexport { getLocalBounds };\n//# sourceMappingURL=getLocalBounds.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { deprecation } from '../../../../utils/logging/deprecation.mjs';\nimport { definedProps } from '../../../container/utils/definedProps.mjs';\n\n\"use strict\";\nconst emptyColorStops = [{ offset: 0, color: \"white\" }, { offset: 1, color: \"black\" }];\nconst _FillGradient = class _FillGradient {\n  constructor(...args) {\n    /**\n     * Unique identifier for this gradient instance\n     * @internal\n     */\n    this.uid = uid(\"fillGradient\");\n    /**\n     * Internal tick counter to track changes in the gradient.\n     * This is used to invalidate the gradient when the texture changes.\n     * @internal\n     */\n    this._tick = 0;\n    /** Type of gradient - currently only supports 'linear' */\n    this.type = \"linear\";\n    /** Array of color stops defining the gradient */\n    this.colorStops = [];\n    let options = ensureGradientOptions(args);\n    const defaults = options.type === \"radial\" ? _FillGradient.defaultRadialOptions : _FillGradient.defaultLinearOptions;\n    options = { ...defaults, ...definedProps(options) };\n    this._textureSize = options.textureSize;\n    this._wrapMode = options.wrapMode;\n    if (options.type === \"radial\") {\n      this.center = options.center;\n      this.outerCenter = options.outerCenter ?? this.center;\n      this.innerRadius = options.innerRadius;\n      this.outerRadius = options.outerRadius;\n      this.scale = options.scale;\n      this.rotation = options.rotation;\n    } else {\n      this.start = options.start;\n      this.end = options.end;\n    }\n    this.textureSpace = options.textureSpace;\n    this.type = options.type;\n    options.colorStops.forEach((stop) => {\n      this.addColorStop(stop.offset, stop.color);\n    });\n  }\n  /**\n   * Adds a color stop to the gradient\n   * @param offset - Position of the stop (0-1)\n   * @param color - Color of the stop\n   * @returns This gradient instance for chaining\n   */\n  addColorStop(offset, color) {\n    this.colorStops.push({ offset, color: Color.shared.setValue(color).toHexa() });\n    return this;\n  }\n  /**\n   * Builds the internal texture and transform for the gradient.\n   * Called automatically when the gradient is first used.\n   * @internal\n   */\n  buildLinearGradient() {\n    if (this.texture)\n      return;\n    let { x: x0, y: y0 } = this.start;\n    let { x: x1, y: y1 } = this.end;\n    let dx = x1 - x0;\n    let dy = y1 - y0;\n    const flip = dx < 0 || dy < 0;\n    if (this._wrapMode === \"clamp-to-edge\") {\n      if (dx < 0) {\n        const temp = x0;\n        x0 = x1;\n        x1 = temp;\n        dx *= -1;\n      }\n      if (dy < 0) {\n        const temp = y0;\n        y0 = y1;\n        y1 = temp;\n        dy *= -1;\n      }\n    }\n    const colorStops = this.colorStops.length ? this.colorStops : emptyColorStops;\n    const defaultSize = this._textureSize;\n    const { canvas, context } = getCanvas(defaultSize, 1);\n    const gradient = !flip ? context.createLinearGradient(0, 0, this._textureSize, 0) : context.createLinearGradient(this._textureSize, 0, 0, 0);\n    addColorStops(gradient, colorStops);\n    context.fillStyle = gradient;\n    context.fillRect(0, 0, defaultSize, 1);\n    this.texture = new Texture({\n      source: new ImageSource({\n        resource: canvas,\n        addressMode: this._wrapMode\n      })\n    });\n    const dist = Math.sqrt(dx * dx + dy * dy);\n    const angle = Math.atan2(dy, dx);\n    const m = new Matrix();\n    m.scale(dist / defaultSize, 1);\n    m.rotate(angle);\n    m.translate(x0, y0);\n    if (this.textureSpace === \"local\") {\n      m.scale(defaultSize, defaultSize);\n    }\n    this.transform = m;\n  }\n  /**\n   * Builds the internal texture and transform for the gradient.\n   * Called automatically when the gradient is first used.\n   * @internal\n   */\n  buildGradient() {\n    if (!this.texture)\n      this._tick++;\n    if (this.type === \"linear\") {\n      this.buildLinearGradient();\n    } else {\n      this.buildRadialGradient();\n    }\n  }\n  /**\n   * Builds the internal texture and transform for the radial gradient.\n   * Called automatically when the gradient is first used.\n   * @internal\n   */\n  buildRadialGradient() {\n    if (this.texture)\n      return;\n    const colorStops = this.colorStops.length ? this.colorStops : emptyColorStops;\n    const defaultSize = this._textureSize;\n    const { canvas, context } = getCanvas(defaultSize, defaultSize);\n    const { x: x0, y: y0 } = this.center;\n    const { x: x1, y: y1 } = this.outerCenter;\n    const r0 = this.innerRadius;\n    const r1 = this.outerRadius;\n    const ox = x1 - r1;\n    const oy = y1 - r1;\n    const scale = defaultSize / (r1 * 2);\n    const cx = (x0 - ox) * scale;\n    const cy = (y0 - oy) * scale;\n    const gradient = context.createRadialGradient(\n      cx,\n      cy,\n      r0 * scale,\n      (x1 - ox) * scale,\n      (y1 - oy) * scale,\n      r1 * scale\n    );\n    addColorStops(gradient, colorStops);\n    context.fillStyle = colorStops[colorStops.length - 1].color;\n    context.fillRect(0, 0, defaultSize, defaultSize);\n    context.fillStyle = gradient;\n    context.translate(cx, cy);\n    context.rotate(this.rotation);\n    context.scale(1, this.scale);\n    context.translate(-cx, -cy);\n    context.fillRect(0, 0, defaultSize, defaultSize);\n    this.texture = new Texture({\n      source: new ImageSource({\n        resource: canvas,\n        addressMode: this._wrapMode\n      })\n    });\n    const m = new Matrix();\n    m.scale(1 / scale, 1 / scale);\n    m.translate(ox, oy);\n    if (this.textureSpace === \"local\") {\n      m.scale(defaultSize, defaultSize);\n    }\n    this.transform = m;\n  }\n  /** Destroys the gradient, releasing resources. This will also destroy the internal texture. */\n  destroy() {\n    this.texture?.destroy(true);\n    this.texture = null;\n    this.transform = null;\n    this.colorStops = [];\n    this.start = null;\n    this.end = null;\n    this.center = null;\n    this.outerCenter = null;\n  }\n  /**\n   * Returns a unique key for this gradient instance.\n   * This key is used for caching and texture management.\n   * @returns {string} Unique key for the gradient\n   */\n  get styleKey() {\n    return `fill-gradient-${this.uid}-${this._tick}`;\n  }\n};\n/** Default options for creating a gradient fill */\n_FillGradient.defaultLinearOptions = {\n  start: { x: 0, y: 0 },\n  end: { x: 0, y: 1 },\n  colorStops: [],\n  textureSpace: \"local\",\n  type: \"linear\",\n  textureSize: 256,\n  wrapMode: \"clamp-to-edge\"\n};\n/** Default options for creating a radial gradient fill */\n_FillGradient.defaultRadialOptions = {\n  center: { x: 0.5, y: 0.5 },\n  innerRadius: 0,\n  outerRadius: 0.5,\n  colorStops: [],\n  scale: 1,\n  textureSpace: \"local\",\n  type: \"radial\",\n  textureSize: 256,\n  wrapMode: \"clamp-to-edge\"\n};\nlet FillGradient = _FillGradient;\nfunction addColorStops(gradient, colorStops) {\n  for (let i = 0; i < colorStops.length; i++) {\n    const stop = colorStops[i];\n    gradient.addColorStop(stop.offset, stop.color);\n  }\n}\nfunction getCanvas(width, height) {\n  const canvas = DOMAdapter.get().createCanvas(width, height);\n  const context = canvas.getContext(\"2d\");\n  return { canvas, context };\n}\nfunction ensureGradientOptions(args) {\n  let options = args[0] ?? {};\n  if (typeof options === \"number\" || args[1]) {\n    deprecation(\"8.5.2\", `use options object instead`);\n    options = {\n      type: \"linear\",\n      start: { x: args[0], y: args[1] },\n      end: { x: args[2], y: args[3] },\n      textureSpace: args[4],\n      textureSize: args[5] ?? FillGradient.defaultLinearOptions.textureSize\n    };\n  }\n  return options;\n}\n\nexport { FillGradient };\n//# sourceMappingURL=FillGradient.mjs.map\n","\"use strict\";\nclass TickerListener {\n  /**\n   * Constructor\n   * @private\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param priority - The priority for emitting\n   * @param once - If the handler should fire once\n   */\n  constructor(fn, context = null, priority = 0, once = false) {\n    /** The next item in chain. */\n    this.next = null;\n    /** The previous item in chain. */\n    this.previous = null;\n    /** `true` if this listener has been destroyed already. */\n    this._destroyed = false;\n    this._fn = fn;\n    this._context = context;\n    this.priority = priority;\n    this._once = once;\n  }\n  /**\n   * Simple compare function to figure out if a function and context match.\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @returns `true` if the listener match the arguments\n   */\n  match(fn, context = null) {\n    return this._fn === fn && this._context === context;\n  }\n  /**\n   * Emit by calling the current function.\n   * @param ticker - The ticker emitting.\n   * @returns Next ticker\n   */\n  emit(ticker) {\n    if (this._fn) {\n      if (this._context) {\n        this._fn.call(this._context, ticker);\n      } else {\n        this._fn(ticker);\n      }\n    }\n    const redirect = this.next;\n    if (this._once) {\n      this.destroy(true);\n    }\n    if (this._destroyed) {\n      this.next = null;\n    }\n    return redirect;\n  }\n  /**\n   * Connect to the list.\n   * @param previous - Input node, previous listener\n   */\n  connect(previous) {\n    this.previous = previous;\n    if (previous.next) {\n      previous.next.previous = this;\n    }\n    this.next = previous.next;\n    previous.next = this;\n  }\n  /**\n   * Destroy and don't use after this.\n   * @param hard - `true` to remove the `next` reference, this\n   *        is considered a hard destroy. Soft destroy maintains the next reference.\n   * @returns The listener to redirect while emitting or removing.\n   */\n  destroy(hard = false) {\n    this._destroyed = true;\n    this._fn = null;\n    this._context = null;\n    if (this.previous) {\n      this.previous.next = this.next;\n    }\n    if (this.next) {\n      this.next.previous = this.previous;\n    }\n    const redirect = this.next;\n    this.next = hard ? null : redirect;\n    this.previous = null;\n    return redirect;\n  }\n}\n\nexport { TickerListener };\n//# sourceMappingURL=TickerListener.mjs.map\n","import { UPDATE_PRIORITY } from './const.mjs';\nimport { TickerListener } from './TickerListener.mjs';\n\n\"use strict\";\nconst _Ticker = class _Ticker {\n  constructor() {\n    /**\n     * Whether or not this ticker should invoke the method {@link Ticker#start|start}\n     * automatically when a listener is added.\n     * @example\n     * ```ts\n     * // Default behavior (manual start)\n     * const ticker = new Ticker();\n     * ticker.autoStart = false;\n     * ticker.add(() => {\n     *     // Won't run until ticker.start() is called\n     * });\n     *\n     * // Auto-start behavior\n     * const autoTicker = new Ticker();\n     * autoTicker.autoStart = true;\n     * autoTicker.add(() => {\n     *     // Runs immediately when added\n     * });\n     * ```\n     * @default false\n     * @see {@link Ticker#start} For manually starting the ticker\n     * @see {@link Ticker#stop} For manually stopping the ticker\n     */\n    this.autoStart = false;\n    /**\n     * Scalar representing the delta time factor.\n     * This is a dimensionless value representing the fraction of a frame at the target framerate.\n     * At 60 FPS, this value is typically around 1.0.\n     *\n     * This is NOT in milliseconds - it's a scalar multiplier for frame-independent animations.\n     * For actual milliseconds, use {@link Ticker#deltaMS}.\n     * @member {number}\n     * @example\n     * ```ts\n     * // Frame-independent animation using deltaTime scalar\n     * ticker.add((ticker) => {\n     *     // Rotate sprite by 0.1 radians per frame, scaled by deltaTime\n     *     sprite.rotation += 0.1 * ticker.deltaTime;\n     * });\n     * ```\n     */\n    this.deltaTime = 1;\n    /**\n     * The last time update was invoked, in milliseconds since epoch.\n     * Similar to performance.now() timestamp format.\n     *\n     * Used internally for calculating time deltas between frames.\n     * @member {number}\n     * @example\n     * ```ts\n     * ticker.add((ticker) => {\n     *     const currentTime = performance.now();\n     *     const timeSinceLastFrame = currentTime - ticker.lastTime;\n     *     console.log(`Time since last frame: ${timeSinceLastFrame}ms`);\n     * });\n     * ```\n     */\n    this.lastTime = -1;\n    /**\n     * Factor of current {@link Ticker#deltaTime|deltaTime}.\n     * Used to scale time for slow motion or fast-forward effects.\n     * @example\n     * ```ts\n     * // Basic speed adjustment\n     * ticker.speed = 0.5; // Half speed (slow motion)\n     * ticker.speed = 2.0; // Double speed (fast forward)\n     *\n     * // Temporary speed changes\n     * function slowMotion() {\n     *     const normalSpeed = ticker.speed;\n     *     ticker.speed = 0.2;\n     *     setTimeout(() => {\n     *         ticker.speed = normalSpeed;\n     *     }, 1000);\n     * }\n     * ```\n     */\n    this.speed = 1;\n    /**\n     * Whether or not this ticker has been started.\n     *\n     * `true` if {@link Ticker#start|start} has been called.\n     * `false` if {@link Ticker#stop|Stop} has been called.\n     *\n     * While `false`, this value may change to `true` in the\n     * event of {@link Ticker#autoStart|autoStart} being `true`\n     * and a listener is added.\n     * @example\n     * ```ts\n     * // Check ticker state\n     * const ticker = new Ticker();\n     * console.log(ticker.started); // false\n     *\n     * // Start and verify\n     * ticker.start();\n     * console.log(ticker.started); // true\n     * ```\n     */\n    this.started = false;\n    /** Internal current frame request ID */\n    this._requestId = null;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the maximum allowed milliseconds between updates.\n     */\n    this._maxElapsedMS = 100;\n    /**\n     * Internal value managed by minFPS property setter and getter.\n     * This is the minimum allowed milliseconds between updates.\n     */\n    this._minElapsedMS = 0;\n    /** If enabled, deleting is disabled.*/\n    this._protected = false;\n    /** The last time keyframe was executed. Maintains a relatively fixed interval with the previous value. */\n    this._lastFrame = -1;\n    this._head = new TickerListener(null, null, Infinity);\n    this.deltaMS = 1 / _Ticker.targetFPMS;\n    this.elapsedMS = 1 / _Ticker.targetFPMS;\n    this._tick = (time) => {\n      this._requestId = null;\n      if (this.started) {\n        this.update(time);\n        if (this.started && this._requestId === null && this._head.next) {\n          this._requestId = requestAnimationFrame(this._tick);\n        }\n      }\n    };\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If a frame has not already been requested, and if the internal\n   * emitter has listeners, a new frame is requested.\n   */\n  _requestIfNeeded() {\n    if (this._requestId === null && this._head.next) {\n      this.lastTime = performance.now();\n      this._lastFrame = this.lastTime;\n      this._requestId = requestAnimationFrame(this._tick);\n    }\n  }\n  /** Conditionally cancels a pending animation frame. */\n  _cancelIfNeeded() {\n    if (this._requestId !== null) {\n      cancelAnimationFrame(this._requestId);\n      this._requestId = null;\n    }\n  }\n  /**\n   * Conditionally requests a new animation frame.\n   * If the ticker has been started it checks if a frame has not already\n   * been requested, and if the internal emitter has listeners. If these\n   * conditions are met, a new frame is requested. If the ticker has not\n   * been started, but autoStart is `true`, then the ticker starts now,\n   * and continues with the previous conditions to request a new frame.\n   */\n  _startIfPossible() {\n    if (this.started) {\n      this._requestIfNeeded();\n    } else if (this.autoStart) {\n      this.start();\n    }\n  }\n  /**\n   * Register a handler for tick events.\n   * @param fn - The listener function to add. Receives the Ticker instance as parameter\n   * @param context - The context for the listener\n   * @param priority - The priority of the listener\n   * @example\n   * ```ts\n   * // Access time properties through the ticker parameter\n   * ticker.add((ticker) => {\n   *     // Use deltaTime (dimensionless scalar) for frame-independent animations\n   *     sprite.rotation += 0.1 * ticker.deltaTime;\n   *\n   *     // Use deltaMS (milliseconds) for time-based calculations\n   *     const progress = ticker.deltaMS / animationDuration;\n   *\n   *     // Use elapsedMS for raw timing measurements\n   *     console.log(`Raw frame time: ${ticker.elapsedMS}ms`);\n   * });\n   * ```\n   */\n  add(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority));\n  }\n  /**\n   * Add a handler for the tick event which is only executed once on the next frame.\n   * @example\n   * ```ts\n   * // Basic one-time update\n   * ticker.addOnce(() => {\n   *     console.log('Runs next frame only');\n   * });\n   *\n   * // With specific context\n   * const game = {\n   *     init(ticker) {\n   *         this.loadResources();\n   *         console.log('Game initialized');\n   *     }\n   * };\n   * ticker.addOnce(game.init, game);\n   *\n   * // With priority\n   * ticker.addOnce(\n   *     () => {\n   *         // High priority one-time setup\n   *         physics.init();\n   *     },\n   *     undefined,\n   *     UPDATE_PRIORITY.HIGH\n   * );\n   * ```\n   * @param fn - The listener function to be added for one update\n   * @param context - The listener context\n   * @param priority - The priority for emitting (default: UPDATE_PRIORITY.NORMAL)\n   * @returns This instance of a ticker\n   * @see {@link Ticker#add} For continuous updates\n   * @see {@link Ticker#remove} For removing handlers\n   */\n  addOnce(fn, context, priority = UPDATE_PRIORITY.NORMAL) {\n    return this._addListener(new TickerListener(fn, context, priority, true));\n  }\n  /**\n   * Internally adds the event handler so that it can be sorted by priority.\n   * Priority allows certain handler (user, AnimatedSprite, Interaction) to be run\n   * before the rendering.\n   * @private\n   * @param listener - Current listener being added.\n   * @returns This instance of a ticker\n   */\n  _addListener(listener) {\n    let current = this._head.next;\n    let previous = this._head;\n    if (!current) {\n      listener.connect(previous);\n    } else {\n      while (current) {\n        if (listener.priority > current.priority) {\n          listener.connect(previous);\n          break;\n        }\n        previous = current;\n        current = current.next;\n      }\n      if (!listener.previous) {\n        listener.connect(previous);\n      }\n    }\n    this._startIfPossible();\n    return this;\n  }\n  /**\n   * Removes any handlers matching the function and context parameters.\n   * If no handlers are left after removing, then it cancels the animation frame.\n   * @example\n   * ```ts\n   * // Basic removal\n   * const onTick = () => {\n   *     sprite.rotation += 0.1;\n   * };\n   * ticker.add(onTick);\n   * ticker.remove(onTick);\n   *\n   * // Remove with context\n   * const game = {\n   *     update(ticker) {\n   *         this.physics.update(ticker.deltaTime);\n   *     }\n   * };\n   * ticker.add(game.update, game);\n   * ticker.remove(game.update, game);\n   *\n   * // Remove all matching handlers\n   * // (if same function was added multiple times)\n   * ticker.add(onTick);\n   * ticker.add(onTick);\n   * ticker.remove(onTick); // Removes all instances\n   * ```\n   * @param fn - The listener function to be removed\n   * @param context - The listener context to be removed\n   * @returns This instance of a ticker\n   * @see {@link Ticker#add} For adding handlers\n   * @see {@link Ticker#addOnce} For one-time handlers\n   */\n  remove(fn, context) {\n    let listener = this._head.next;\n    while (listener) {\n      if (listener.match(fn, context)) {\n        listener = listener.destroy();\n      } else {\n        listener = listener.next;\n      }\n    }\n    if (!this._head.next) {\n      this._cancelIfNeeded();\n    }\n    return this;\n  }\n  /**\n   * The number of listeners on this ticker, calculated by walking through linked list.\n   * @example\n   * ```ts\n   * // Check number of active listeners\n   * const ticker = new Ticker();\n   * console.log(ticker.count); // 0\n   *\n   * // Add some listeners\n   * ticker.add(() => {});\n   * ticker.add(() => {});\n   * console.log(ticker.count); // 2\n   *\n   * // Check after cleanup\n   * ticker.destroy();\n   * console.log(ticker.count); // 0\n   * ```\n   * @readonly\n   * @see {@link Ticker#add} For adding listeners\n   * @see {@link Ticker#remove} For removing listeners\n   */\n  get count() {\n    if (!this._head) {\n      return 0;\n    }\n    let count = 0;\n    let current = this._head;\n    while (current = current.next) {\n      count++;\n    }\n    return count;\n  }\n  /**\n   * Starts the ticker. If the ticker has listeners a new animation frame is requested at this point.\n   * @example\n   * ```ts\n   * // Basic manual start\n   * const ticker = new Ticker();\n   * ticker.add(() => {\n   *     // Animation code here\n   * });\n   * ticker.start();\n   * ```\n   * @see {@link Ticker#stop} For stopping the ticker\n   * @see {@link Ticker#autoStart} For automatic starting\n   * @see {@link Ticker#started} For checking ticker state\n   */\n  start() {\n    if (!this.started) {\n      this.started = true;\n      this._requestIfNeeded();\n    }\n  }\n  /**\n   * Stops the ticker. If the ticker has requested an animation frame it is canceled at this point.\n   * @example\n   * ```ts\n   * // Basic stop\n   * const ticker = new Ticker();\n   * ticker.stop();\n   * ```\n   * @see {@link Ticker#start} For starting the ticker\n   * @see {@link Ticker#started} For checking ticker state\n   * @see {@link Ticker#destroy} For cleaning up the ticker\n   */\n  stop() {\n    if (this.started) {\n      this.started = false;\n      this._cancelIfNeeded();\n    }\n  }\n  /**\n   * Destroy the ticker and don't use after this. Calling this method removes all references to internal events.\n   * @example\n   * ```ts\n   * // Clean up with active listeners\n   * const ticker = new Ticker();\n   * ticker.add(() => {});\n   * ticker.destroy(); // Removes all listeners\n   * ```\n   * @see {@link Ticker#stop} For stopping without destroying\n   * @see {@link Ticker#remove} For removing specific listeners\n   */\n  destroy() {\n    if (!this._protected) {\n      this.stop();\n      let listener = this._head.next;\n      while (listener) {\n        listener = listener.destroy(true);\n      }\n      this._head.destroy();\n      this._head = null;\n    }\n  }\n  /**\n   * Triggers an update.\n   *\n   * An update entails setting the\n   * current {@link Ticker#elapsedMS|elapsedMS},\n   * the current {@link Ticker#deltaTime|deltaTime},\n   * invoking all listeners with current deltaTime,\n   * and then finally setting {@link Ticker#lastTime|lastTime}\n   * with the value of currentTime that was provided.\n   *\n   * This method will be called automatically by animation\n   * frame callbacks if the ticker instance has been started\n   * and listeners are added.\n   * @example\n   * ```ts\n   * // Basic manual update\n   * const ticker = new Ticker();\n   * ticker.update(performance.now());\n   * ```\n   * @param currentTime - The current time of execution (defaults to performance.now())\n   * @see {@link Ticker#deltaTime} For frame delta value\n   * @see {@link Ticker#elapsedMS} For raw elapsed time\n   */\n  update(currentTime = performance.now()) {\n    let elapsedMS;\n    if (currentTime > this.lastTime) {\n      elapsedMS = this.elapsedMS = currentTime - this.lastTime;\n      if (elapsedMS > this._maxElapsedMS) {\n        elapsedMS = this._maxElapsedMS;\n      }\n      elapsedMS *= this.speed;\n      if (this._minElapsedMS) {\n        const delta = currentTime - this._lastFrame | 0;\n        if (delta < this._minElapsedMS) {\n          return;\n        }\n        this._lastFrame = currentTime - delta % this._minElapsedMS;\n      }\n      this.deltaMS = elapsedMS;\n      this.deltaTime = this.deltaMS * _Ticker.targetFPMS;\n      const head = this._head;\n      let listener = head.next;\n      while (listener) {\n        listener = listener.emit(this);\n      }\n      if (!head.next) {\n        this._cancelIfNeeded();\n      }\n    } else {\n      this.deltaTime = this.deltaMS = this.elapsedMS = 0;\n    }\n    this.lastTime = currentTime;\n  }\n  /**\n   * The frames per second at which this ticker is running.\n   * The default is approximately 60 in most modern browsers.\n   * > [!NOTE] This does not factor in the value of\n   * > {@link Ticker#speed|speed}, which is specific\n   * > to scaling {@link Ticker#deltaTime|deltaTime}.\n   * @example\n   * ```ts\n   * // Basic FPS monitoring\n   * ticker.add(() => {\n   *     console.log(`Current FPS: ${Math.round(ticker.FPS)}`);\n   * });\n   * ```\n   * @readonly\n   */\n  get FPS() {\n    return 1e3 / this.elapsedMS;\n  }\n  /**\n   * Manages the maximum amount of milliseconds allowed to\n   * elapse between invoking {@link Ticker#update|update}.\n   *\n   * This value is used to cap {@link Ticker#deltaTime|deltaTime},\n   * but does not effect the measured value of {@link Ticker#FPS|FPS}.\n   *\n   * When setting this property it is clamped to a value between\n   * `0` and `Ticker.targetFPMS * 1000`.\n   * @example\n   * ```ts\n   * // Set minimum acceptable frame rate\n   * const ticker = new Ticker();\n   * ticker.minFPS = 30; // Never go below 30 FPS\n   *\n   * // Use with maxFPS for frame rate clamping\n   * ticker.minFPS = 30;\n   * ticker.maxFPS = 60;\n   *\n   * // Monitor delta capping\n   * ticker.add(() => {\n   *     // Delta time will be capped based on minFPS\n   *     console.log(`Delta time: ${ticker.deltaTime}`);\n   * });\n   * ```\n   * @default 10\n   */\n  get minFPS() {\n    return 1e3 / this._maxElapsedMS;\n  }\n  set minFPS(fps) {\n    const minFPS = Math.min(this.maxFPS, fps);\n    const minFPMS = Math.min(Math.max(0, minFPS) / 1e3, _Ticker.targetFPMS);\n    this._maxElapsedMS = 1 / minFPMS;\n  }\n  /**\n   * Manages the minimum amount of milliseconds required to\n   * elapse between invoking {@link Ticker#update|update}.\n   *\n   * This will effect the measured value of {@link Ticker#FPS|FPS}.\n   *\n   * If it is set to `0`, then there is no limit; PixiJS will render as many frames as it can.\n   * Otherwise it will be at least `minFPS`\n   * @example\n   * ```ts\n   * // Set minimum acceptable frame rate\n   * const ticker = new Ticker();\n   * ticker.maxFPS = 60; // Never go above 60 FPS\n   *\n   * // Use with maxFPS for frame rate clamping\n   * ticker.minFPS = 30;\n   * ticker.maxFPS = 60;\n   *\n   * // Monitor delta capping\n   * ticker.add(() => {\n   *     // Delta time will be capped based on maxFPS\n   *     console.log(`Delta time: ${ticker.deltaTime}`);\n   * });\n   * ```\n   * @default 0\n   */\n  get maxFPS() {\n    if (this._minElapsedMS) {\n      return Math.round(1e3 / this._minElapsedMS);\n    }\n    return 0;\n  }\n  set maxFPS(fps) {\n    if (fps === 0) {\n      this._minElapsedMS = 0;\n    } else {\n      const maxFPS = Math.max(this.minFPS, fps);\n      this._minElapsedMS = 1 / (maxFPS / 1e3);\n    }\n  }\n  /**\n   * The shared ticker instance used by {@link AnimatedSprite} and by\n   * {@link VideoSource} to update animation frames / video textures.\n   *\n   * It may also be used by {@link Application} if created with the `sharedTicker` option property set to true.\n   *\n   * The property {@link Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * Please follow the examples for usage, including how to opt-out of auto-starting the shared ticker.\n   * @example\n   * import { Ticker } from 'pixi.js';\n   *\n   * const ticker = Ticker.shared;\n   * // Set this to prevent starting this ticker when listeners are added.\n   * // By default this is true only for the Ticker.shared instance.\n   * ticker.autoStart = false;\n   *\n   * // FYI, call this to ensure the ticker is stopped. It should be stopped\n   * // if you have not attempted to render anything yet.\n   * ticker.stop();\n   *\n   * // Call this when you are ready for a running shared ticker.\n   * ticker.start();\n   * @example\n   * import { autoDetectRenderer, Container } from 'pixi.js';\n   *\n   * // You may use the shared ticker to render...\n   * const renderer = autoDetectRenderer();\n   * const stage = new Container();\n   * document.body.appendChild(renderer.view);\n   * ticker.add((time) => renderer.render(stage));\n   *\n   * // Or you can just update it manually.\n   * ticker.autoStart = false;\n   * ticker.stop();\n   * const animate = (time) => {\n   *     ticker.update(time);\n   *     renderer.render(stage);\n   *     requestAnimationFrame(animate);\n   * };\n   * animate(performance.now());\n   * @type {Ticker}\n   * @readonly\n   */\n  static get shared() {\n    if (!_Ticker._shared) {\n      const shared = _Ticker._shared = new _Ticker();\n      shared.autoStart = true;\n      shared._protected = true;\n    }\n    return _Ticker._shared;\n  }\n  /**\n   * The system ticker instance used by {@link PrepareBase} for core timing\n   * functionality that shouldn't usually need to be paused, unlike the `shared`\n   * ticker which drives visual animations and rendering which may want to be paused.\n   *\n   * The property {@link Ticker#autoStart|autoStart} is set to `true` for this instance.\n   * @type {Ticker}\n   * @readonly\n   * @advanced\n   */\n  static get system() {\n    if (!_Ticker._system) {\n      const system = _Ticker._system = new _Ticker();\n      system.autoStart = true;\n      system._protected = true;\n    }\n    return _Ticker._system;\n  }\n};\n/**\n * Target frame rate in frames per millisecond.\n * Used for converting deltaTime to a scalar time delta.\n * @example\n * ```ts\n * // Default is 0.06 (60 FPS)\n * console.log(Ticker.targetFPMS); // 0.06\n *\n * // Calculate target frame duration\n * const frameDuration = 1 / Ticker.targetFPMS; //  16.67ms\n *\n * // Use in custom timing calculations\n * const deltaTime = elapsedMS * Ticker.targetFPMS;\n * ```\n * @remarks\n * - Default is 0.06 (equivalent to 60 FPS)\n * - Used in deltaTime calculations\n * - Affects all ticker instances\n * @default 0.06\n * @see {@link Ticker#deltaTime} For time scaling\n * @see {@link Ticker#FPS} For actual frame rate\n */\n_Ticker.targetFPMS = 0.06;\nlet Ticker = _Ticker;\n\nexport { Ticker };\n//# sourceMappingURL=Ticker.mjs.map\n","function _classCallCheck(a, n) {\n  if (!(a instanceof n)) throw new TypeError(\"Cannot call a class as a function\");\n}\nmodule.exports = _classCallCheck, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nconst blendModeIds = {\n  normal: 0,\n  add: 1,\n  multiply: 2,\n  screen: 3,\n  overlay: 4,\n  erase: 5,\n  \"normal-npm\": 6,\n  \"add-npm\": 7,\n  \"screen-npm\": 8,\n  min: 9,\n  max: 10\n};\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\nconst _State = class _State {\n  constructor() {\n    this.data = 0;\n    this.blendMode = \"normal\";\n    this.polygonOffset = 0;\n    this.blend = true;\n    this.depthMask = true;\n  }\n  /**\n   * Activates blending of the computed fragment color values.\n   * @default true\n   */\n  get blend() {\n    return !!(this.data & 1 << BLEND);\n  }\n  set blend(value) {\n    if (!!(this.data & 1 << BLEND) !== value) {\n      this.data ^= 1 << BLEND;\n    }\n  }\n  /**\n   * Activates adding an offset to depth values of polygon's fragments\n   * @default false\n   */\n  get offsets() {\n    return !!(this.data & 1 << OFFSET);\n  }\n  set offsets(value) {\n    if (!!(this.data & 1 << OFFSET) !== value) {\n      this.data ^= 1 << OFFSET;\n    }\n  }\n  /** The culling settings for this state none - No culling back - Back face culling front - Front face culling */\n  set cullMode(value) {\n    if (value === \"none\") {\n      this.culling = false;\n      return;\n    }\n    this.culling = true;\n    this.clockwiseFrontFace = value === \"front\";\n  }\n  get cullMode() {\n    if (!this.culling) {\n      return \"none\";\n    }\n    return this.clockwiseFrontFace ? \"front\" : \"back\";\n  }\n  /**\n   * Activates culling of polygons.\n   * @default false\n   */\n  get culling() {\n    return !!(this.data & 1 << CULLING);\n  }\n  set culling(value) {\n    if (!!(this.data & 1 << CULLING) !== value) {\n      this.data ^= 1 << CULLING;\n    }\n  }\n  /**\n   * Activates depth comparisons and updates to the depth buffer.\n   * @default false\n   */\n  get depthTest() {\n    return !!(this.data & 1 << DEPTH_TEST);\n  }\n  set depthTest(value) {\n    if (!!(this.data & 1 << DEPTH_TEST) !== value) {\n      this.data ^= 1 << DEPTH_TEST;\n    }\n  }\n  /**\n   * Enables or disables writing to the depth buffer.\n   * @default true\n   */\n  get depthMask() {\n    return !!(this.data & 1 << DEPTH_MASK);\n  }\n  set depthMask(value) {\n    if (!!(this.data & 1 << DEPTH_MASK) !== value) {\n      this.data ^= 1 << DEPTH_MASK;\n    }\n  }\n  /**\n   * Specifies whether or not front or back-facing polygons can be culled.\n   * @default false\n   */\n  get clockwiseFrontFace() {\n    return !!(this.data & 1 << WINDING);\n  }\n  set clockwiseFrontFace(value) {\n    if (!!(this.data & 1 << WINDING) !== value) {\n      this.data ^= 1 << WINDING;\n    }\n  }\n  /**\n   * The blend mode to be applied when this state is set. Apply a value of `normal` to reset the blend mode.\n   * Setting this mode to anything other than NO_BLEND will automatically switch blending on.\n   * @default 'normal'\n   */\n  get blendMode() {\n    return this._blendMode;\n  }\n  set blendMode(value) {\n    this.blend = value !== \"none\";\n    this._blendMode = value;\n    this._blendModeId = blendModeIds[value] || 0;\n  }\n  /**\n   * The polygon offset. Setting this property to anything other than 0 will automatically enable polygon offset fill.\n   * @default 0\n   */\n  get polygonOffset() {\n    return this._polygonOffset;\n  }\n  set polygonOffset(value) {\n    this.offsets = !!value;\n    this._polygonOffset = value;\n  }\n  toString() {\n    return `[pixi.js/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`;\n  }\n  /**\n   * A quickly getting an instance of a State that is configured for 2d rendering.\n   * @returns a new State with values set for 2d rendering\n   */\n  static for2d() {\n    const state = new _State();\n    state.depthTest = false;\n    state.blend = true;\n    return state;\n  }\n};\n_State.default2d = _State.for2d();\nlet State = _State;\n\nexport { State };\n//# sourceMappingURL=State.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { colorBitGl } from '../../../rendering/high-shader/shader-bits/colorBit.mjs';\nimport { generateTextureBatchBitGl } from '../../../rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nimport { localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { getBatchSamplersUniformGroup } from '../../../rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\n\n\"use strict\";\nclass GlGraphicsAdaptor {\n  contextChange(renderer) {\n    const uniforms = new UniformGroup({\n      uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n      uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uRound: { value: 0, type: \"f32\" }\n    });\n    const maxTextures = renderer.limits.maxBatchableTextures;\n    const glProgram = compileHighShaderGlProgram({\n      name: \"graphics\",\n      bits: [\n        colorBitGl,\n        generateTextureBatchBitGl(maxTextures),\n        localUniformBitGl,\n        roundPixelsBitGl\n      ]\n    });\n    this.shader = new Shader({\n      glProgram,\n      resources: {\n        localUniforms: uniforms,\n        batchSamplers: getBatchSamplersUniformGroup(maxTextures)\n      }\n    });\n  }\n  execute(graphicsPipe, renderable) {\n    const context = renderable.context;\n    const shader = context.customShader || this.shader;\n    const renderer = graphicsPipe.renderer;\n    const contextSystem = renderer.graphicsContext;\n    const {\n      batcher,\n      instructions\n    } = contextSystem.getContextRenderData(context);\n    shader.groups[0] = renderer.globalUniforms.bindGroup;\n    renderer.state.set(graphicsPipe.state);\n    renderer.shader.bind(shader);\n    renderer.geometry.bind(batcher.geometry, shader.glProgram);\n    const batches = instructions.instructions;\n    for (let i = 0; i < instructions.instructionSize; i++) {\n      const batch = batches[i];\n      if (batch.size) {\n        for (let j = 0; j < batch.textures.count; j++) {\n          renderer.texture.bind(batch.textures.textures[j], j);\n        }\n        renderer.geometry.draw(batch.topology, batch.size, batch.start);\n      }\n    }\n  }\n  destroy() {\n    this.shader.destroy(true);\n    this.shader = null;\n  }\n}\n/** @ignore */\nGlGraphicsAdaptor.extension = {\n  type: [\n    ExtensionType.WebGLPipesAdaptor\n  ],\n  name: \"graphics\"\n};\n\nexport { GlGraphicsAdaptor };\n//# sourceMappingURL=GlGraphicsAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { textureBitGl } from '../../../rendering/high-shader/shader-bits/textureBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nclass GlMeshAdaptor {\n  init() {\n    const glProgram = compileHighShaderGlProgram({\n      name: \"mesh\",\n      bits: [\n        localUniformBitGl,\n        textureBitGl,\n        roundPixelsBitGl\n      ]\n    });\n    this._shader = new Shader({\n      glProgram,\n      resources: {\n        uTexture: Texture.EMPTY.source,\n        textureUniforms: {\n          uTextureMatrix: { type: \"mat3x3<f32>\", value: new Matrix() }\n        }\n      }\n    });\n  }\n  execute(meshPipe, mesh) {\n    const renderer = meshPipe.renderer;\n    let shader = mesh._shader;\n    if (!shader) {\n      shader = this._shader;\n      const texture = mesh.texture;\n      const source = texture.source;\n      shader.resources.uTexture = source;\n      shader.resources.uSampler = source.style;\n      shader.resources.textureUniforms.uniforms.uTextureMatrix = texture.textureMatrix.mapCoord;\n    } else if (!shader.glProgram) {\n      warn(\"Mesh shader has no glProgram\", mesh.shader);\n      return;\n    }\n    shader.groups[100] = renderer.globalUniforms.bindGroup;\n    shader.groups[101] = meshPipe.localUniformsBindGroup;\n    renderer.encoder.draw({\n      geometry: mesh._geometry,\n      shader,\n      state: mesh.state\n    });\n  }\n  destroy() {\n    this._shader.destroy(true);\n    this._shader = null;\n  }\n}\nGlMeshAdaptor.extension = {\n  type: [\n    ExtensionType.WebGLPipesAdaptor\n  ],\n  name: \"mesh\"\n};\n\nexport { GlMeshAdaptor };\n//# sourceMappingURL=GlMeshAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { State } from '../../renderers/shared/state/State.mjs';\n\n\"use strict\";\nclass GlBatchAdaptor {\n  constructor() {\n    this._tempState = State.for2d();\n    /**\n     * We only want to sync the a batched shaders uniforms once on first use\n     * this is a hash of shader uids to a boolean value.  When the shader is first bound\n     * we set the value to true.  When the shader is bound again we check the value and\n     * if it is true we know that the uniforms have already been synced and we skip it.\n     */\n    this._didUploadHash = {};\n  }\n  init(batcherPipe) {\n    batcherPipe.renderer.runners.contextChange.add(this);\n  }\n  contextChange() {\n    this._didUploadHash = {};\n  }\n  start(batchPipe, geometry, shader) {\n    const renderer = batchPipe.renderer;\n    const didUpload = this._didUploadHash[shader.uid];\n    renderer.shader.bind(shader, didUpload);\n    if (!didUpload) {\n      this._didUploadHash[shader.uid] = true;\n    }\n    renderer.shader.updateUniformGroup(renderer.globalUniforms.uniformGroup);\n    renderer.geometry.bind(geometry, shader.glProgram);\n  }\n  execute(batchPipe, batch) {\n    const renderer = batchPipe.renderer;\n    this._tempState.blendMode = batch.blendMode;\n    renderer.state.set(this._tempState);\n    const textures = batch.textures.textures;\n    for (let i = 0; i < batch.textures.count; i++) {\n      renderer.texture.bind(textures[i], i);\n    }\n    renderer.geometry.draw(batch.topology, batch.size, batch.start);\n  }\n}\n/** @ignore */\nGlBatchAdaptor.extension = {\n  type: [\n    ExtensionType.WebGLPipesAdaptor\n  ],\n  name: \"batch\"\n};\n\nexport { GlBatchAdaptor };\n//# sourceMappingURL=GlBatchAdaptor.mjs.map\n","\"use strict\";\nvar BUFFER_TYPE = /* @__PURE__ */ ((BUFFER_TYPE2) => {\n  BUFFER_TYPE2[BUFFER_TYPE2[\"ELEMENT_ARRAY_BUFFER\"] = 34963] = \"ELEMENT_ARRAY_BUFFER\";\n  BUFFER_TYPE2[BUFFER_TYPE2[\"ARRAY_BUFFER\"] = 34962] = \"ARRAY_BUFFER\";\n  BUFFER_TYPE2[BUFFER_TYPE2[\"UNIFORM_BUFFER\"] = 35345] = \"UNIFORM_BUFFER\";\n  return BUFFER_TYPE2;\n})(BUFFER_TYPE || {});\n\nexport { BUFFER_TYPE };\n//# sourceMappingURL=const.mjs.map\n","\"use strict\";\nclass GlBuffer {\n  constructor(buffer, type) {\n    this._lastBindBaseLocation = -1;\n    this._lastBindCallId = -1;\n    this.buffer = buffer || null;\n    this.updateID = -1;\n    this.byteLength = -1;\n    this.type = type;\n  }\n}\n\nexport { GlBuffer };\n//# sourceMappingURL=GlBuffer.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { BufferUsage } from '../../shared/buffer/const.mjs';\nimport { BUFFER_TYPE } from './const.mjs';\nimport { GlBuffer } from './GlBuffer.mjs';\n\n\"use strict\";\nclass GlBufferSystem {\n  /**\n   * @param {Renderer} renderer - The renderer this System works for.\n   */\n  constructor(renderer) {\n    this._gpuBuffers = /* @__PURE__ */ Object.create(null);\n    /** Cache keeping track of the base bound buffer bases */\n    this._boundBufferBases = /* @__PURE__ */ Object.create(null);\n    this._minBaseLocation = 0;\n    this._nextBindBaseIndex = this._minBaseLocation;\n    this._bindCallId = 0;\n    this._renderer = renderer;\n    this._renderer.renderableGC.addManagedHash(this, \"_gpuBuffers\");\n  }\n  /** @ignore */\n  destroy() {\n    this.destroyAll();\n    this._renderer = null;\n    this._gl = null;\n    this._gpuBuffers = {};\n    this._boundBufferBases = {};\n  }\n  /** Sets up the renderer context and necessary buffers. */\n  contextChange() {\n    this._gl = this._renderer.gl;\n    this._gpuBuffers = /* @__PURE__ */ Object.create(null);\n    this._maxBindings = this._renderer.limits.maxUniformBindings;\n  }\n  getGlBuffer(buffer) {\n    return this._gpuBuffers[buffer.uid] || this.createGLBuffer(buffer);\n  }\n  /**\n   * This binds specified buffer. On first run, it will create the webGL buffers for the context too\n   * @param buffer - the buffer to bind to the renderer\n   */\n  bind(buffer) {\n    const { _gl: gl } = this;\n    const glBuffer = this.getGlBuffer(buffer);\n    gl.bindBuffer(glBuffer.type, glBuffer.buffer);\n  }\n  /**\n   * Binds an uniform buffer to at the given index.\n   *\n   * A cache is used so a buffer will not be bound again if already bound.\n   * @param glBuffer - the buffer to bind\n   * @param index - the base index to bind it to.\n   */\n  bindBufferBase(glBuffer, index) {\n    const { _gl: gl } = this;\n    if (this._boundBufferBases[index] !== glBuffer) {\n      this._boundBufferBases[index] = glBuffer;\n      glBuffer._lastBindBaseLocation = index;\n      gl.bindBufferBase(gl.UNIFORM_BUFFER, index, glBuffer.buffer);\n    }\n  }\n  nextBindBase(hasTransformFeedback) {\n    this._bindCallId++;\n    this._minBaseLocation = 0;\n    if (hasTransformFeedback) {\n      this._boundBufferBases[0] = null;\n      this._minBaseLocation = 1;\n      if (this._nextBindBaseIndex < 1) {\n        this._nextBindBaseIndex = 1;\n      }\n    }\n  }\n  freeLocationForBufferBase(glBuffer) {\n    let freeIndex = this.getLastBindBaseLocation(glBuffer);\n    if (freeIndex >= this._minBaseLocation) {\n      glBuffer._lastBindCallId = this._bindCallId;\n      return freeIndex;\n    }\n    let loop = 0;\n    let nextIndex = this._nextBindBaseIndex;\n    while (loop < 2) {\n      if (nextIndex >= this._maxBindings) {\n        nextIndex = this._minBaseLocation;\n        loop++;\n      }\n      const curBuf = this._boundBufferBases[nextIndex];\n      if (curBuf && curBuf._lastBindCallId === this._bindCallId) {\n        nextIndex++;\n        continue;\n      }\n      break;\n    }\n    freeIndex = nextIndex;\n    this._nextBindBaseIndex = nextIndex + 1;\n    if (loop >= 2) {\n      return -1;\n    }\n    glBuffer._lastBindCallId = this._bindCallId;\n    this._boundBufferBases[freeIndex] = null;\n    return freeIndex;\n  }\n  getLastBindBaseLocation(glBuffer) {\n    const index = glBuffer._lastBindBaseLocation;\n    if (this._boundBufferBases[index] === glBuffer) {\n      return index;\n    }\n    return -1;\n  }\n  /**\n   * Binds a buffer whilst also binding its range.\n   * This will make the buffer start from the offset supplied rather than 0 when it is read.\n   * @param glBuffer - the buffer to bind\n   * @param index - the base index to bind at, defaults to 0\n   * @param offset - the offset to bind at (this is blocks of 256). 0 = 0, 1 = 256, 2 = 512 etc\n   * @param size - the size to bind at (this is blocks of 256).\n   */\n  bindBufferRange(glBuffer, index, offset, size) {\n    const { _gl: gl } = this;\n    offset || (offset = 0);\n    index || (index = 0);\n    this._boundBufferBases[index] = null;\n    gl.bindBufferRange(gl.UNIFORM_BUFFER, index || 0, glBuffer.buffer, offset * 256, size || 256);\n  }\n  /**\n   * Will ensure the data in the buffer is uploaded to the GPU.\n   * @param {Buffer} buffer - the buffer to update\n   */\n  updateBuffer(buffer) {\n    const { _gl: gl } = this;\n    const glBuffer = this.getGlBuffer(buffer);\n    if (buffer._updateID === glBuffer.updateID) {\n      return glBuffer;\n    }\n    glBuffer.updateID = buffer._updateID;\n    gl.bindBuffer(glBuffer.type, glBuffer.buffer);\n    const data = buffer.data;\n    const drawType = buffer.descriptor.usage & BufferUsage.STATIC ? gl.STATIC_DRAW : gl.DYNAMIC_DRAW;\n    if (data) {\n      if (glBuffer.byteLength >= data.byteLength) {\n        gl.bufferSubData(glBuffer.type, 0, data, 0, buffer._updateSize / data.BYTES_PER_ELEMENT);\n      } else {\n        glBuffer.byteLength = data.byteLength;\n        gl.bufferData(glBuffer.type, data, drawType);\n      }\n    } else {\n      glBuffer.byteLength = buffer.descriptor.size;\n      gl.bufferData(glBuffer.type, glBuffer.byteLength, drawType);\n    }\n    return glBuffer;\n  }\n  /** dispose all WebGL resources of all managed buffers */\n  destroyAll() {\n    const gl = this._gl;\n    for (const id in this._gpuBuffers) {\n      if (this._gpuBuffers[id])\n        gl.deleteBuffer(this._gpuBuffers[id].buffer);\n    }\n    this._gpuBuffers = /* @__PURE__ */ Object.create(null);\n  }\n  /**\n   * Disposes buffer\n   * @param {Buffer} buffer - buffer with data\n   * @param {boolean} [contextLost=false] - If context was lost, we suppress deleteVertexArray\n   */\n  onBufferDestroy(buffer, contextLost) {\n    if (!this._gpuBuffers[buffer.uid])\n      return;\n    const glBuffer = this._gpuBuffers[buffer.uid];\n    const gl = this._gl;\n    if (!contextLost) {\n      gl.deleteBuffer(glBuffer.buffer);\n    }\n    buffer.off(\"destroy\", this.onBufferDestroy, this);\n    this._gpuBuffers[buffer.uid] = null;\n  }\n  /**\n   * creates and attaches a GLBuffer object tied to the current context.\n   * @param buffer\n   * @protected\n   */\n  createGLBuffer(buffer) {\n    const { _gl: gl } = this;\n    let type = BUFFER_TYPE.ARRAY_BUFFER;\n    if (buffer.descriptor.usage & BufferUsage.INDEX) {\n      type = BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;\n    } else if (buffer.descriptor.usage & BufferUsage.UNIFORM) {\n      type = BUFFER_TYPE.UNIFORM_BUFFER;\n    }\n    const glBuffer = new GlBuffer(gl.createBuffer(), type);\n    this._gpuBuffers[buffer.uid] = glBuffer;\n    buffer.on(\"destroy\", this.onBufferDestroy, this);\n    return glBuffer;\n  }\n  resetState() {\n    this._boundBufferBases = /* @__PURE__ */ Object.create(null);\n  }\n}\n/** @ignore */\nGlBufferSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"buffer\"\n};\n\nexport { GlBufferSystem };\n//# sourceMappingURL=GlBufferSystem.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nconst _GlContextSystem = class _GlContextSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    /**\n     * Features supported by current renderer.\n     * @type {object}\n     * @readonly\n     */\n    this.supports = {\n      /** Support for 32-bit indices buffer. */\n      uint32Indices: true,\n      /** Support for UniformBufferObjects */\n      uniformBufferObject: true,\n      /** Support for VertexArrayObjects */\n      vertexArrayObject: true,\n      /** Support for SRGB texture format */\n      srgbTextures: true,\n      /** Support for wrapping modes if a texture is non-power of two */\n      nonPowOf2wrapping: true,\n      /** Support for MSAA (antialiasing of dynamic textures) */\n      msaa: true,\n      /** Support for mipmaps if a texture is non-power of two */\n      nonPowOf2mipmaps: true\n    };\n    this._renderer = renderer;\n    this.extensions = /* @__PURE__ */ Object.create(null);\n    this.handleContextLost = this.handleContextLost.bind(this);\n    this.handleContextRestored = this.handleContextRestored.bind(this);\n  }\n  /**\n   * `true` if the context is lost\n   * @readonly\n   */\n  get isLost() {\n    return !this.gl || this.gl.isContextLost();\n  }\n  /**\n   * Handles the context change event.\n   * @param {WebGLRenderingContext} gl - New WebGL context.\n   */\n  contextChange(gl) {\n    this.gl = gl;\n    this._renderer.gl = gl;\n  }\n  init(options) {\n    options = { ..._GlContextSystem.defaultOptions, ...options };\n    let multiView = this.multiView = options.multiView;\n    if (options.context && multiView) {\n      warn(\"Renderer created with both a context and multiview enabled. Disabling multiView as both cannot work together.\");\n      multiView = false;\n    }\n    if (multiView) {\n      this.canvas = DOMAdapter.get().createCanvas(this._renderer.canvas.width, this._renderer.canvas.height);\n    } else {\n      this.canvas = this._renderer.view.canvas;\n    }\n    if (options.context) {\n      this.initFromContext(options.context);\n    } else {\n      const alpha = this._renderer.background.alpha < 1;\n      const premultipliedAlpha = options.premultipliedAlpha ?? true;\n      const antialias = options.antialias && !this._renderer.backBuffer.useBackBuffer;\n      this.createContext(options.preferWebGLVersion, {\n        alpha,\n        premultipliedAlpha,\n        antialias,\n        stencil: true,\n        preserveDrawingBuffer: options.preserveDrawingBuffer,\n        powerPreference: options.powerPreference ?? \"default\"\n      });\n    }\n  }\n  ensureCanvasSize(targetCanvas) {\n    if (!this.multiView) {\n      if (targetCanvas !== this.canvas) {\n        warn(\"multiView is disabled, but targetCanvas is not the main canvas\");\n      }\n      return;\n    }\n    const { canvas } = this;\n    if (canvas.width < targetCanvas.width || canvas.height < targetCanvas.height) {\n      canvas.width = Math.max(targetCanvas.width, targetCanvas.width);\n      canvas.height = Math.max(targetCanvas.height, targetCanvas.height);\n    }\n  }\n  /**\n   * Initializes the context.\n   * @protected\n   * @param {WebGLRenderingContext} gl - WebGL context\n   */\n  initFromContext(gl) {\n    this.gl = gl;\n    this.webGLVersion = gl instanceof DOMAdapter.get().getWebGLRenderingContext() ? 1 : 2;\n    this.getExtensions();\n    this.validateContext(gl);\n    this._renderer.runners.contextChange.emit(gl);\n    const element = this._renderer.view.canvas;\n    element.addEventListener(\"webglcontextlost\", this.handleContextLost, false);\n    element.addEventListener(\"webglcontextrestored\", this.handleContextRestored, false);\n  }\n  /**\n   * Initialize from context options\n   * @protected\n   * @see https://developer.mozilla.org/en-US/docs/Web/API/HTMLCanvasElement/getContext\n   * @param preferWebGLVersion\n   * @param {object} options - context attributes\n   */\n  createContext(preferWebGLVersion, options) {\n    let gl;\n    const canvas = this.canvas;\n    if (preferWebGLVersion === 2) {\n      gl = canvas.getContext(\"webgl2\", options);\n    }\n    if (!gl) {\n      gl = canvas.getContext(\"webgl\", options);\n      if (!gl) {\n        throw new Error(\"This browser does not support WebGL. Try using the canvas renderer\");\n      }\n    }\n    this.gl = gl;\n    this.initFromContext(this.gl);\n  }\n  /** Auto-populate the {@link GlContextSystem.extensions extensions}. */\n  getExtensions() {\n    const { gl } = this;\n    const common = {\n      anisotropicFiltering: gl.getExtension(\"EXT_texture_filter_anisotropic\"),\n      floatTextureLinear: gl.getExtension(\"OES_texture_float_linear\"),\n      s3tc: gl.getExtension(\"WEBGL_compressed_texture_s3tc\"),\n      s3tc_sRGB: gl.getExtension(\"WEBGL_compressed_texture_s3tc_srgb\"),\n      // eslint-disable-line camelcase\n      etc: gl.getExtension(\"WEBGL_compressed_texture_etc\"),\n      etc1: gl.getExtension(\"WEBGL_compressed_texture_etc1\"),\n      pvrtc: gl.getExtension(\"WEBGL_compressed_texture_pvrtc\") || gl.getExtension(\"WEBKIT_WEBGL_compressed_texture_pvrtc\"),\n      atc: gl.getExtension(\"WEBGL_compressed_texture_atc\"),\n      astc: gl.getExtension(\"WEBGL_compressed_texture_astc\"),\n      bptc: gl.getExtension(\"EXT_texture_compression_bptc\"),\n      rgtc: gl.getExtension(\"EXT_texture_compression_rgtc\"),\n      loseContext: gl.getExtension(\"WEBGL_lose_context\")\n    };\n    if (this.webGLVersion === 1) {\n      this.extensions = {\n        ...common,\n        drawBuffers: gl.getExtension(\"WEBGL_draw_buffers\"),\n        depthTexture: gl.getExtension(\"WEBGL_depth_texture\"),\n        vertexArrayObject: gl.getExtension(\"OES_vertex_array_object\") || gl.getExtension(\"MOZ_OES_vertex_array_object\") || gl.getExtension(\"WEBKIT_OES_vertex_array_object\"),\n        uint32ElementIndex: gl.getExtension(\"OES_element_index_uint\"),\n        // Floats and half-floats\n        floatTexture: gl.getExtension(\"OES_texture_float\"),\n        floatTextureLinear: gl.getExtension(\"OES_texture_float_linear\"),\n        textureHalfFloat: gl.getExtension(\"OES_texture_half_float\"),\n        textureHalfFloatLinear: gl.getExtension(\"OES_texture_half_float_linear\"),\n        vertexAttribDivisorANGLE: gl.getExtension(\"ANGLE_instanced_arrays\"),\n        srgb: gl.getExtension(\"EXT_sRGB\")\n      };\n    } else {\n      this.extensions = {\n        ...common,\n        colorBufferFloat: gl.getExtension(\"EXT_color_buffer_float\")\n      };\n      const provokeExt = gl.getExtension(\"WEBGL_provoking_vertex\");\n      if (provokeExt) {\n        provokeExt.provokingVertexWEBGL(provokeExt.FIRST_VERTEX_CONVENTION_WEBGL);\n      }\n    }\n  }\n  /**\n   * Handles a lost webgl context\n   * @param {WebGLContextEvent} event - The context lost event.\n   */\n  handleContextLost(event) {\n    event.preventDefault();\n    if (this._contextLossForced) {\n      this._contextLossForced = false;\n      setTimeout(() => {\n        if (this.gl.isContextLost()) {\n          this.extensions.loseContext?.restoreContext();\n        }\n      }, 0);\n    }\n  }\n  /** Handles a restored webgl context. */\n  handleContextRestored() {\n    this.getExtensions();\n    this._renderer.runners.contextChange.emit(this.gl);\n  }\n  destroy() {\n    const element = this._renderer.view.canvas;\n    this._renderer = null;\n    element.removeEventListener(\"webglcontextlost\", this.handleContextLost);\n    element.removeEventListener(\"webglcontextrestored\", this.handleContextRestored);\n    this.gl.useProgram(null);\n    this.extensions.loseContext?.loseContext();\n  }\n  /**\n   * this function can be called to force a webGL context loss\n   * this will release all resources on the GPU.\n   * Useful if you need to put Pixi to sleep, and save some GPU memory\n   *\n   * As soon as render is called - all resources will be created again.\n   */\n  forceContextLoss() {\n    this.extensions.loseContext?.loseContext();\n    this._contextLossForced = true;\n  }\n  /**\n   * Validate context.\n   * @param {WebGLRenderingContext} gl - Render context.\n   */\n  validateContext(gl) {\n    const attributes = gl.getContextAttributes();\n    if (attributes && !attributes.stencil) {\n      warn(\"Provided WebGL context does not have a stencil buffer, masks may not render correctly\");\n    }\n    const supports = this.supports;\n    const isWebGl2 = this.webGLVersion === 2;\n    const extensions = this.extensions;\n    supports.uint32Indices = isWebGl2 || !!extensions.uint32ElementIndex;\n    supports.uniformBufferObject = isWebGl2;\n    supports.vertexArrayObject = isWebGl2 || !!extensions.vertexArrayObject;\n    supports.srgbTextures = isWebGl2 || !!extensions.srgb;\n    supports.nonPowOf2wrapping = isWebGl2;\n    supports.nonPowOf2mipmaps = isWebGl2;\n    supports.msaa = isWebGl2;\n    if (!supports.uint32Indices) {\n      warn(\"Provided WebGL context does not support 32 index buffer, large scenes may not render correctly\");\n    }\n  }\n};\n/** @ignore */\n_GlContextSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"context\"\n};\n/** The default options for the system. */\n_GlContextSystem.defaultOptions = {\n  /**\n   * {@link WebGLOptions.context}\n   * @default null\n   */\n  context: null,\n  /**\n   * {@link WebGLOptions.premultipliedAlpha}\n   * @default true\n   */\n  premultipliedAlpha: true,\n  /**\n   * {@link WebGLOptions.preserveDrawingBuffer}\n   * @default false\n   */\n  preserveDrawingBuffer: false,\n  /**\n   * {@link WebGLOptions.powerPreference}\n   * @default default\n   */\n  powerPreference: void 0,\n  /**\n   * {@link WebGLOptions.webGLVersion}\n   * @default 2\n   */\n  preferWebGLVersion: 2,\n  /**\n   * {@link WebGLOptions.multiView}\n   * @default false\n   */\n  multiView: false\n};\nlet GlContextSystem = _GlContextSystem;\n\nexport { GlContextSystem };\n//# sourceMappingURL=GlContextSystem.mjs.map\n","\"use strict\";\nvar GL_FORMATS = /* @__PURE__ */ ((GL_FORMATS2) => {\n  GL_FORMATS2[GL_FORMATS2[\"RGBA\"] = 6408] = \"RGBA\";\n  GL_FORMATS2[GL_FORMATS2[\"RGB\"] = 6407] = \"RGB\";\n  GL_FORMATS2[GL_FORMATS2[\"RG\"] = 33319] = \"RG\";\n  GL_FORMATS2[GL_FORMATS2[\"RED\"] = 6403] = \"RED\";\n  GL_FORMATS2[GL_FORMATS2[\"RGBA_INTEGER\"] = 36249] = \"RGBA_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"RGB_INTEGER\"] = 36248] = \"RGB_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"RG_INTEGER\"] = 33320] = \"RG_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"RED_INTEGER\"] = 36244] = \"RED_INTEGER\";\n  GL_FORMATS2[GL_FORMATS2[\"ALPHA\"] = 6406] = \"ALPHA\";\n  GL_FORMATS2[GL_FORMATS2[\"LUMINANCE\"] = 6409] = \"LUMINANCE\";\n  GL_FORMATS2[GL_FORMATS2[\"LUMINANCE_ALPHA\"] = 6410] = \"LUMINANCE_ALPHA\";\n  GL_FORMATS2[GL_FORMATS2[\"DEPTH_COMPONENT\"] = 6402] = \"DEPTH_COMPONENT\";\n  GL_FORMATS2[GL_FORMATS2[\"DEPTH_STENCIL\"] = 34041] = \"DEPTH_STENCIL\";\n  return GL_FORMATS2;\n})(GL_FORMATS || {});\nvar GL_TARGETS = /* @__PURE__ */ ((GL_TARGETS2) => {\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_2D\"] = 3553] = \"TEXTURE_2D\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP\"] = 34067] = \"TEXTURE_CUBE_MAP\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_2D_ARRAY\"] = 35866] = \"TEXTURE_2D_ARRAY\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_POSITIVE_X\"] = 34069] = \"TEXTURE_CUBE_MAP_POSITIVE_X\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_NEGATIVE_X\"] = 34070] = \"TEXTURE_CUBE_MAP_NEGATIVE_X\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_POSITIVE_Y\"] = 34071] = \"TEXTURE_CUBE_MAP_POSITIVE_Y\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_NEGATIVE_Y\"] = 34072] = \"TEXTURE_CUBE_MAP_NEGATIVE_Y\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_POSITIVE_Z\"] = 34073] = \"TEXTURE_CUBE_MAP_POSITIVE_Z\";\n  GL_TARGETS2[GL_TARGETS2[\"TEXTURE_CUBE_MAP_NEGATIVE_Z\"] = 34074] = \"TEXTURE_CUBE_MAP_NEGATIVE_Z\";\n  return GL_TARGETS2;\n})(GL_TARGETS || {});\nvar GL_WRAP_MODES = /* @__PURE__ */ ((GL_WRAP_MODES2) => {\n  GL_WRAP_MODES2[GL_WRAP_MODES2[\"CLAMP\"] = 33071] = \"CLAMP\";\n  GL_WRAP_MODES2[GL_WRAP_MODES2[\"REPEAT\"] = 10497] = \"REPEAT\";\n  GL_WRAP_MODES2[GL_WRAP_MODES2[\"MIRRORED_REPEAT\"] = 33648] = \"MIRRORED_REPEAT\";\n  return GL_WRAP_MODES2;\n})(GL_WRAP_MODES || {});\nvar GL_TYPES = /* @__PURE__ */ ((GL_TYPES2) => {\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_BYTE\"] = 5121] = \"UNSIGNED_BYTE\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT\"] = 5123] = \"UNSIGNED_SHORT\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT_5_6_5\"] = 33635] = \"UNSIGNED_SHORT_5_6_5\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT_4_4_4_4\"] = 32819] = \"UNSIGNED_SHORT_4_4_4_4\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_SHORT_5_5_5_1\"] = 32820] = \"UNSIGNED_SHORT_5_5_5_1\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT\"] = 5125] = \"UNSIGNED_INT\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_10F_11F_11F_REV\"] = 35899] = \"UNSIGNED_INT_10F_11F_11F_REV\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_2_10_10_10_REV\"] = 33640] = \"UNSIGNED_INT_2_10_10_10_REV\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_24_8\"] = 34042] = \"UNSIGNED_INT_24_8\";\n  GL_TYPES2[GL_TYPES2[\"UNSIGNED_INT_5_9_9_9_REV\"] = 35902] = \"UNSIGNED_INT_5_9_9_9_REV\";\n  GL_TYPES2[GL_TYPES2[\"BYTE\"] = 5120] = \"BYTE\";\n  GL_TYPES2[GL_TYPES2[\"SHORT\"] = 5122] = \"SHORT\";\n  GL_TYPES2[GL_TYPES2[\"INT\"] = 5124] = \"INT\";\n  GL_TYPES2[GL_TYPES2[\"FLOAT\"] = 5126] = \"FLOAT\";\n  GL_TYPES2[GL_TYPES2[\"FLOAT_32_UNSIGNED_INT_24_8_REV\"] = 36269] = \"FLOAT_32_UNSIGNED_INT_24_8_REV\";\n  GL_TYPES2[GL_TYPES2[\"HALF_FLOAT\"] = 36193] = \"HALF_FLOAT\";\n  return GL_TYPES2;\n})(GL_TYPES || {});\n\nexport { GL_FORMATS, GL_TARGETS, GL_TYPES, GL_WRAP_MODES };\n//# sourceMappingURL=const.mjs.map\n","import { GL_TYPES } from '../../texture/const.mjs';\n\n\"use strict\";\nconst infoMap = {\n  uint8x2: GL_TYPES.UNSIGNED_BYTE,\n  uint8x4: GL_TYPES.UNSIGNED_BYTE,\n  sint8x2: GL_TYPES.BYTE,\n  sint8x4: GL_TYPES.BYTE,\n  unorm8x2: GL_TYPES.UNSIGNED_BYTE,\n  unorm8x4: GL_TYPES.UNSIGNED_BYTE,\n  snorm8x2: GL_TYPES.BYTE,\n  snorm8x4: GL_TYPES.BYTE,\n  uint16x2: GL_TYPES.UNSIGNED_SHORT,\n  uint16x4: GL_TYPES.UNSIGNED_SHORT,\n  sint16x2: GL_TYPES.SHORT,\n  sint16x4: GL_TYPES.SHORT,\n  unorm16x2: GL_TYPES.UNSIGNED_SHORT,\n  unorm16x4: GL_TYPES.UNSIGNED_SHORT,\n  snorm16x2: GL_TYPES.SHORT,\n  snorm16x4: GL_TYPES.SHORT,\n  float16x2: GL_TYPES.HALF_FLOAT,\n  float16x4: GL_TYPES.HALF_FLOAT,\n  float32: GL_TYPES.FLOAT,\n  float32x2: GL_TYPES.FLOAT,\n  float32x3: GL_TYPES.FLOAT,\n  float32x4: GL_TYPES.FLOAT,\n  uint32: GL_TYPES.UNSIGNED_INT,\n  uint32x2: GL_TYPES.UNSIGNED_INT,\n  uint32x3: GL_TYPES.UNSIGNED_INT,\n  uint32x4: GL_TYPES.UNSIGNED_INT,\n  sint32: GL_TYPES.INT,\n  sint32x2: GL_TYPES.INT,\n  sint32x3: GL_TYPES.INT,\n  sint32x4: GL_TYPES.INT\n};\nfunction getGlTypeFromFormat(format) {\n  return infoMap[format] ?? infoMap.float32;\n}\n\nexport { getGlTypeFromFormat };\n//# sourceMappingURL=getGlTypeFromFormat.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { getAttributeInfoFromFormat } from '../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nimport { ensureAttributes } from '../shader/program/ensureAttributes.mjs';\nimport { getGlTypeFromFormat } from './utils/getGlTypeFromFormat.mjs';\n\n\"use strict\";\nconst topologyToGlMap = {\n  \"point-list\": 0,\n  \"line-list\": 1,\n  \"line-strip\": 3,\n  \"triangle-list\": 4,\n  \"triangle-strip\": 5\n};\nclass GlGeometrySystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    this._geometryVaoHash = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    this._activeGeometry = null;\n    this._activeVao = null;\n    this.hasVao = true;\n    this.hasInstance = true;\n    this._renderer.renderableGC.addManagedHash(this, \"_geometryVaoHash\");\n  }\n  /** Sets up the renderer context and necessary buffers. */\n  contextChange() {\n    const gl = this.gl = this._renderer.gl;\n    if (!this._renderer.context.supports.vertexArrayObject) {\n      throw new Error(\"[PixiJS] Vertex Array Objects are not supported on this device\");\n    }\n    const nativeVaoExtension = this._renderer.context.extensions.vertexArrayObject;\n    if (nativeVaoExtension) {\n      gl.createVertexArray = () => nativeVaoExtension.createVertexArrayOES();\n      gl.bindVertexArray = (vao) => nativeVaoExtension.bindVertexArrayOES(vao);\n      gl.deleteVertexArray = (vao) => nativeVaoExtension.deleteVertexArrayOES(vao);\n    }\n    const nativeInstancedExtension = this._renderer.context.extensions.vertexAttribDivisorANGLE;\n    if (nativeInstancedExtension) {\n      gl.drawArraysInstanced = (a, b, c, d) => {\n        nativeInstancedExtension.drawArraysInstancedANGLE(a, b, c, d);\n      };\n      gl.drawElementsInstanced = (a, b, c, d, e) => {\n        nativeInstancedExtension.drawElementsInstancedANGLE(a, b, c, d, e);\n      };\n      gl.vertexAttribDivisor = (a, b) => nativeInstancedExtension.vertexAttribDivisorANGLE(a, b);\n    }\n    this._activeGeometry = null;\n    this._activeVao = null;\n    this._geometryVaoHash = /* @__PURE__ */ Object.create(null);\n  }\n  /**\n   * Binds geometry so that is can be drawn. Creating a Vao if required\n   * @param geometry - Instance of geometry to bind.\n   * @param program - Instance of program to use vao for.\n   */\n  bind(geometry, program) {\n    const gl = this.gl;\n    this._activeGeometry = geometry;\n    const vao = this.getVao(geometry, program);\n    if (this._activeVao !== vao) {\n      this._activeVao = vao;\n      gl.bindVertexArray(vao);\n    }\n    this.updateBuffers();\n  }\n  /** Reset and unbind any active VAO and geometry. */\n  resetState() {\n    this.unbind();\n  }\n  /** Update buffers of the currently bound geometry. */\n  updateBuffers() {\n    const geometry = this._activeGeometry;\n    const bufferSystem = this._renderer.buffer;\n    for (let i = 0; i < geometry.buffers.length; i++) {\n      const buffer = geometry.buffers[i];\n      bufferSystem.updateBuffer(buffer);\n    }\n  }\n  /**\n   * Check compatibility between a geometry and a program\n   * @param geometry - Geometry instance.\n   * @param program - Program instance.\n   */\n  checkCompatibility(geometry, program) {\n    const geometryAttributes = geometry.attributes;\n    const shaderAttributes = program._attributeData;\n    for (const j in shaderAttributes) {\n      if (!geometryAttributes[j]) {\n        throw new Error(`shader and geometry incompatible, geometry missing the \"${j}\" attribute`);\n      }\n    }\n  }\n  /**\n   * Takes a geometry and program and generates a unique signature for them.\n   * @param geometry - To get signature from.\n   * @param program - To test geometry against.\n   * @returns - Unique signature of the geometry and program\n   */\n  getSignature(geometry, program) {\n    const attribs = geometry.attributes;\n    const shaderAttributes = program._attributeData;\n    const strings = [\"g\", geometry.uid];\n    for (const i in attribs) {\n      if (shaderAttributes[i]) {\n        strings.push(i, shaderAttributes[i].location);\n      }\n    }\n    return strings.join(\"-\");\n  }\n  getVao(geometry, program) {\n    return this._geometryVaoHash[geometry.uid]?.[program._key] || this.initGeometryVao(geometry, program);\n  }\n  /**\n   * Creates or gets Vao with the same structure as the geometry and stores it on the geometry.\n   * If vao is created, it is bound automatically. We use a shader to infer what and how to set up the\n   * attribute locations.\n   * @param geometry - Instance of geometry to to generate Vao for.\n   * @param program\n   * @param _incRefCount - Increment refCount of all geometry buffers.\n   */\n  initGeometryVao(geometry, program, _incRefCount = true) {\n    const gl = this._renderer.gl;\n    const bufferSystem = this._renderer.buffer;\n    this._renderer.shader._getProgramData(program);\n    this.checkCompatibility(geometry, program);\n    const signature = this.getSignature(geometry, program);\n    if (!this._geometryVaoHash[geometry.uid]) {\n      this._geometryVaoHash[geometry.uid] = /* @__PURE__ */ Object.create(null);\n      geometry.on(\"destroy\", this.onGeometryDestroy, this);\n    }\n    const vaoObjectHash = this._geometryVaoHash[geometry.uid];\n    let vao = vaoObjectHash[signature];\n    if (vao) {\n      vaoObjectHash[program._key] = vao;\n      return vao;\n    }\n    ensureAttributes(geometry, program._attributeData);\n    const buffers = geometry.buffers;\n    vao = gl.createVertexArray();\n    gl.bindVertexArray(vao);\n    for (let i = 0; i < buffers.length; i++) {\n      const buffer = buffers[i];\n      bufferSystem.bind(buffer);\n    }\n    this.activateVao(geometry, program);\n    vaoObjectHash[program._key] = vao;\n    vaoObjectHash[signature] = vao;\n    gl.bindVertexArray(null);\n    return vao;\n  }\n  /**\n   * Disposes geometry.\n   * @param geometry - Geometry with buffers. Only VAO will be disposed\n   * @param [contextLost=false] - If context was lost, we suppress deleteVertexArray\n   */\n  onGeometryDestroy(geometry, contextLost) {\n    const vaoObjectHash = this._geometryVaoHash[geometry.uid];\n    const gl = this.gl;\n    if (vaoObjectHash) {\n      if (contextLost) {\n        for (const i in vaoObjectHash) {\n          if (this._activeVao !== vaoObjectHash[i]) {\n            this.unbind();\n          }\n          gl.deleteVertexArray(vaoObjectHash[i]);\n        }\n      }\n      this._geometryVaoHash[geometry.uid] = null;\n    }\n  }\n  /**\n   * Dispose all WebGL resources of all managed geometries.\n   * @param [contextLost=false] - If context was lost, we suppress `gl.delete` calls\n   */\n  destroyAll(contextLost = false) {\n    const gl = this.gl;\n    for (const i in this._geometryVaoHash) {\n      if (contextLost) {\n        for (const j in this._geometryVaoHash[i]) {\n          const vaoObjectHash = this._geometryVaoHash[i];\n          if (this._activeVao !== vaoObjectHash) {\n            this.unbind();\n          }\n          gl.deleteVertexArray(vaoObjectHash[j]);\n        }\n      }\n      this._geometryVaoHash[i] = null;\n    }\n  }\n  /**\n   * Activate vertex array object.\n   * @param geometry - Geometry instance.\n   * @param program - Shader program instance.\n   */\n  activateVao(geometry, program) {\n    const gl = this._renderer.gl;\n    const bufferSystem = this._renderer.buffer;\n    const attributes = geometry.attributes;\n    if (geometry.indexBuffer) {\n      bufferSystem.bind(geometry.indexBuffer);\n    }\n    let lastBuffer = null;\n    for (const j in attributes) {\n      const attribute = attributes[j];\n      const buffer = attribute.buffer;\n      const glBuffer = bufferSystem.getGlBuffer(buffer);\n      const programAttrib = program._attributeData[j];\n      if (programAttrib) {\n        if (lastBuffer !== glBuffer) {\n          bufferSystem.bind(buffer);\n          lastBuffer = glBuffer;\n        }\n        const location = programAttrib.location;\n        gl.enableVertexAttribArray(location);\n        const attributeInfo = getAttributeInfoFromFormat(attribute.format);\n        const type = getGlTypeFromFormat(attribute.format);\n        if (programAttrib.format?.substring(1, 4) === \"int\") {\n          gl.vertexAttribIPointer(\n            location,\n            attributeInfo.size,\n            type,\n            attribute.stride,\n            attribute.offset\n          );\n        } else {\n          gl.vertexAttribPointer(\n            location,\n            attributeInfo.size,\n            type,\n            attributeInfo.normalised,\n            attribute.stride,\n            attribute.offset\n          );\n        }\n        if (attribute.instance) {\n          if (this.hasInstance) {\n            const divisor = attribute.divisor ?? 1;\n            gl.vertexAttribDivisor(location, divisor);\n          } else {\n            throw new Error(\"geometry error, GPU Instancing is not supported on this device\");\n          }\n        }\n      }\n    }\n  }\n  /**\n   * Draws the currently bound geometry.\n   * @param topology - The type primitive to render.\n   * @param size - The number of elements to be rendered. If not specified, all vertices after the\n   *  starting vertex will be drawn.\n   * @param start - The starting vertex in the geometry to start drawing from. If not specified,\n   *  drawing will start from the first vertex.\n   * @param instanceCount - The number of instances of the set of elements to execute. If not specified,\n   *  all instances will be drawn.\n   * @returns This instance of the geometry system.\n   */\n  draw(topology, size, start, instanceCount) {\n    const { gl } = this._renderer;\n    const geometry = this._activeGeometry;\n    const glTopology = topologyToGlMap[topology || geometry.topology];\n    instanceCount ?? (instanceCount = geometry.instanceCount);\n    if (geometry.indexBuffer) {\n      const byteSize = geometry.indexBuffer.data.BYTES_PER_ELEMENT;\n      const glType = byteSize === 2 ? gl.UNSIGNED_SHORT : gl.UNSIGNED_INT;\n      if (instanceCount !== 1) {\n        gl.drawElementsInstanced(glTopology, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize, instanceCount);\n      } else {\n        gl.drawElements(glTopology, size || geometry.indexBuffer.data.length, glType, (start || 0) * byteSize);\n      }\n    } else if (instanceCount !== 1) {\n      gl.drawArraysInstanced(glTopology, start || 0, size || geometry.getSize(), instanceCount);\n    } else {\n      gl.drawArrays(glTopology, start || 0, size || geometry.getSize());\n    }\n    return this;\n  }\n  /** Unbind/reset everything. */\n  unbind() {\n    this.gl.bindVertexArray(null);\n    this._activeVao = null;\n    this._activeGeometry = null;\n  }\n  destroy() {\n    this._renderer = null;\n    this.gl = null;\n    this._activeVao = null;\n    this._activeGeometry = null;\n    this._geometryVaoHash = {};\n  }\n}\n/** @ignore */\nGlGeometrySystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"geometry\"\n};\n\nexport { GlGeometrySystem };\n//# sourceMappingURL=GlGeometrySystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { Geometry } from '../shared/geometry/Geometry.mjs';\nimport { Shader } from '../shared/shader/Shader.mjs';\nimport { State } from '../shared/state/State.mjs';\nimport { TextureSource } from '../shared/texture/sources/TextureSource.mjs';\nimport { Texture } from '../shared/texture/Texture.mjs';\nimport { GlProgram } from './shader/GlProgram.mjs';\n\n\"use strict\";\nconst bigTriangleGeometry = new Geometry({\n  attributes: {\n    aPosition: [\n      -1,\n      -1,\n      // Bottom left corner\n      3,\n      -1,\n      // Bottom right corner, extending beyond right edge\n      -1,\n      3\n      // Top left corner, extending beyond top edge\n    ]\n  }\n});\nconst _GlBackBufferSystem = class _GlBackBufferSystem {\n  constructor(renderer) {\n    /** if true, the back buffer is used */\n    this.useBackBuffer = false;\n    this._useBackBufferThisRender = false;\n    this._renderer = renderer;\n  }\n  init(options = {}) {\n    const { useBackBuffer, antialias } = { ..._GlBackBufferSystem.defaultOptions, ...options };\n    this.useBackBuffer = useBackBuffer;\n    this._antialias = antialias;\n    if (!this._renderer.context.supports.msaa) {\n      warn(\"antialiasing, is not supported on when using the back buffer\");\n      this._antialias = false;\n    }\n    this._state = State.for2d();\n    const bigTriangleProgram = new GlProgram({\n      vertex: `\n                attribute vec2 aPosition;\n                out vec2 vUv;\n\n                void main() {\n                    gl_Position = vec4(aPosition, 0.0, 1.0);\n\n                    vUv = (aPosition + 1.0) / 2.0;\n\n                    // flip dem UVs\n                    vUv.y = 1.0 - vUv.y;\n                }`,\n      fragment: `\n                in vec2 vUv;\n                out vec4 finalColor;\n\n                uniform sampler2D uTexture;\n\n                void main() {\n                    finalColor = texture(uTexture, vUv);\n                }`,\n      name: \"big-triangle\"\n    });\n    this._bigTriangleShader = new Shader({\n      glProgram: bigTriangleProgram,\n      resources: {\n        uTexture: Texture.WHITE.source\n      }\n    });\n  }\n  /**\n   * This is called before the RenderTargetSystem is started. This is where\n   * we replace the target with the back buffer if required.\n   * @param options - The options for this render.\n   */\n  renderStart(options) {\n    const renderTarget = this._renderer.renderTarget.getRenderTarget(options.target);\n    this._useBackBufferThisRender = this.useBackBuffer && !!renderTarget.isRoot;\n    if (this._useBackBufferThisRender) {\n      const renderTarget2 = this._renderer.renderTarget.getRenderTarget(options.target);\n      this._targetTexture = renderTarget2.colorTexture;\n      options.target = this._getBackBufferTexture(renderTarget2.colorTexture);\n    }\n  }\n  renderEnd() {\n    this._presentBackBuffer();\n  }\n  _presentBackBuffer() {\n    const renderer = this._renderer;\n    renderer.renderTarget.finishRenderPass();\n    if (!this._useBackBufferThisRender)\n      return;\n    renderer.renderTarget.bind(this._targetTexture, false);\n    this._bigTriangleShader.resources.uTexture = this._backBufferTexture.source;\n    renderer.encoder.draw({\n      geometry: bigTriangleGeometry,\n      shader: this._bigTriangleShader,\n      state: this._state\n    });\n  }\n  _getBackBufferTexture(targetSourceTexture) {\n    this._backBufferTexture = this._backBufferTexture || new Texture({\n      source: new TextureSource({\n        width: targetSourceTexture.width,\n        height: targetSourceTexture.height,\n        resolution: targetSourceTexture._resolution,\n        antialias: this._antialias\n      })\n    });\n    this._backBufferTexture.source.resize(\n      targetSourceTexture.width,\n      targetSourceTexture.height,\n      targetSourceTexture._resolution\n    );\n    return this._backBufferTexture;\n  }\n  /** destroys the back buffer */\n  destroy() {\n    if (this._backBufferTexture) {\n      this._backBufferTexture.destroy();\n      this._backBufferTexture = null;\n    }\n  }\n};\n/** @ignore */\n_GlBackBufferSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"backBuffer\",\n  priority: 1\n};\n/** default options for the back buffer system */\n_GlBackBufferSystem.defaultOptions = {\n  /** if true will use the back buffer where required */\n  useBackBuffer: false\n};\nlet GlBackBufferSystem = _GlBackBufferSystem;\n\nexport { GlBackBufferSystem };\n//# sourceMappingURL=GlBackBufferSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GlColorMaskSystem {\n  constructor(renderer) {\n    this._colorMaskCache = 15;\n    this._renderer = renderer;\n  }\n  setMask(colorMask) {\n    if (this._colorMaskCache === colorMask)\n      return;\n    this._colorMaskCache = colorMask;\n    this._renderer.gl.colorMask(\n      !!(colorMask & 8),\n      !!(colorMask & 4),\n      !!(colorMask & 2),\n      !!(colorMask & 1)\n    );\n  }\n}\n/** @ignore */\nGlColorMaskSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"colorMask\"\n};\n\nexport { GlColorMaskSystem };\n//# sourceMappingURL=GlColorMaskSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass GlEncoderSystem {\n  constructor(renderer) {\n    this.commandFinished = Promise.resolve();\n    this._renderer = renderer;\n  }\n  setGeometry(geometry, shader) {\n    this._renderer.geometry.bind(geometry, shader.glProgram);\n  }\n  finishRenderPass() {\n  }\n  draw(options) {\n    const renderer = this._renderer;\n    const { geometry, shader, state, skipSync, topology: type, size, start, instanceCount } = options;\n    renderer.shader.bind(shader, skipSync);\n    renderer.geometry.bind(geometry, renderer.shader._activeProgram);\n    if (state) {\n      renderer.state.set(state);\n    }\n    renderer.geometry.draw(type, size, start, instanceCount ?? geometry.instanceCount);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n}\n/** @ignore */\nGlEncoderSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"encoder\"\n};\n\nexport { GlEncoderSystem };\n//# sourceMappingURL=GlEncoderSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkMaxIfStatementsInShader } from '../../batcher/gl/utils/checkMaxIfStatementsInShader.mjs';\n\n\"use strict\";\nclass GlLimitsSystem {\n  constructor(renderer) {\n    this._renderer = renderer;\n  }\n  contextChange() {\n    const gl = this._renderer.gl;\n    this.maxTextures = gl.getParameter(gl.MAX_TEXTURE_IMAGE_UNITS);\n    this.maxBatchableTextures = checkMaxIfStatementsInShader(this.maxTextures, gl);\n    const isWebGl2 = this._renderer.context.webGLVersion === 2;\n    this.maxUniformBindings = isWebGl2 ? gl.getParameter(gl.MAX_UNIFORM_BUFFER_BINDINGS) : 0;\n  }\n  destroy() {\n  }\n}\n/** @ignore */\nGlLimitsSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"limits\"\n};\n\nexport { GlLimitsSystem };\n//# sourceMappingURL=GlLimitsSystem.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GpuStencilModesToPixi } from '../gpu/state/GpuStencilModesToPixi.mjs';\nimport { STENCIL_MODES } from '../shared/state/const.mjs';\n\n\"use strict\";\nclass GlStencilSystem {\n  constructor(renderer) {\n    this._stencilCache = {\n      enabled: false,\n      stencilReference: 0,\n      stencilMode: STENCIL_MODES.NONE\n    };\n    this._renderTargetStencilState = /* @__PURE__ */ Object.create(null);\n    renderer.renderTarget.onRenderTargetChange.add(this);\n  }\n  contextChange(gl) {\n    this._gl = gl;\n    this._comparisonFuncMapping = {\n      always: gl.ALWAYS,\n      never: gl.NEVER,\n      equal: gl.EQUAL,\n      \"not-equal\": gl.NOTEQUAL,\n      less: gl.LESS,\n      \"less-equal\": gl.LEQUAL,\n      greater: gl.GREATER,\n      \"greater-equal\": gl.GEQUAL\n    };\n    this._stencilOpsMapping = {\n      keep: gl.KEEP,\n      zero: gl.ZERO,\n      replace: gl.REPLACE,\n      invert: gl.INVERT,\n      \"increment-clamp\": gl.INCR,\n      \"decrement-clamp\": gl.DECR,\n      \"increment-wrap\": gl.INCR_WRAP,\n      \"decrement-wrap\": gl.DECR_WRAP\n    };\n    this.resetState();\n  }\n  onRenderTargetChange(renderTarget) {\n    if (this._activeRenderTarget === renderTarget)\n      return;\n    this._activeRenderTarget = renderTarget;\n    let stencilState = this._renderTargetStencilState[renderTarget.uid];\n    if (!stencilState) {\n      stencilState = this._renderTargetStencilState[renderTarget.uid] = {\n        stencilMode: STENCIL_MODES.DISABLED,\n        stencilReference: 0\n      };\n    }\n    this.setStencilMode(stencilState.stencilMode, stencilState.stencilReference);\n  }\n  resetState() {\n    this._stencilCache.enabled = false;\n    this._stencilCache.stencilMode = STENCIL_MODES.NONE;\n    this._stencilCache.stencilReference = 0;\n  }\n  setStencilMode(stencilMode, stencilReference) {\n    const stencilState = this._renderTargetStencilState[this._activeRenderTarget.uid];\n    const gl = this._gl;\n    const mode = GpuStencilModesToPixi[stencilMode];\n    const _stencilCache = this._stencilCache;\n    stencilState.stencilMode = stencilMode;\n    stencilState.stencilReference = stencilReference;\n    if (stencilMode === STENCIL_MODES.DISABLED) {\n      if (this._stencilCache.enabled) {\n        this._stencilCache.enabled = false;\n        gl.disable(gl.STENCIL_TEST);\n      }\n      return;\n    }\n    if (!this._stencilCache.enabled) {\n      this._stencilCache.enabled = true;\n      gl.enable(gl.STENCIL_TEST);\n    }\n    if (stencilMode !== _stencilCache.stencilMode || _stencilCache.stencilReference !== stencilReference) {\n      _stencilCache.stencilMode = stencilMode;\n      _stencilCache.stencilReference = stencilReference;\n      gl.stencilFunc(this._comparisonFuncMapping[mode.stencilBack.compare], stencilReference, 255);\n      gl.stencilOp(gl.KEEP, gl.KEEP, this._stencilOpsMapping[mode.stencilBack.passOp]);\n    }\n  }\n}\n/** @ignore */\nGlStencilSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"stencil\"\n};\n\nexport { GlStencilSystem };\n//# sourceMappingURL=GlStencilSystem.mjs.map\n","\"use strict\";\nconst WGSL_TO_STD40_SIZE = {\n  f32: 4,\n  i32: 4,\n  \"vec2<f32>\": 8,\n  \"vec3<f32>\": 12,\n  \"vec4<f32>\": 16,\n  \"vec2<i32>\": 8,\n  \"vec3<i32>\": 12,\n  \"vec4<i32>\": 16,\n  \"mat2x2<f32>\": 16 * 2,\n  \"mat3x3<f32>\": 16 * 3,\n  \"mat4x4<f32>\": 16 * 4\n  // TODO - not essential for now but support these in the future\n  // int:      4,\n  // ivec2:    8,\n  // ivec3:    12,\n  // ivec4:    16,\n  // uint:     4,\n  // uvec2:    8,\n  // uvec3:    12,\n  // uvec4:    16,\n  // bool:     4,\n  // bvec2:    8,\n  // bvec3:    12,\n  // bvec4:    16,\n  // mat2:     16 * 2,\n  // mat3:     16 * 3,\n  // mat4:     16 * 4,\n};\nfunction createUboElementsSTD40(uniformData) {\n  const uboElements = uniformData.map((data) => ({\n    data,\n    offset: 0,\n    size: 0\n  }));\n  const chunkSize = 16;\n  let size = 0;\n  let offset = 0;\n  for (let i = 0; i < uboElements.length; i++) {\n    const uboElement = uboElements[i];\n    size = WGSL_TO_STD40_SIZE[uboElement.data.type];\n    if (!size) {\n      throw new Error(`Unknown type ${uboElement.data.type}`);\n    }\n    if (uboElement.data.size > 1) {\n      size = Math.max(size, chunkSize) * uboElement.data.size;\n    }\n    const boundary = size === 12 ? 16 : size;\n    uboElement.size = size;\n    const curOffset = offset % chunkSize;\n    if (curOffset > 0 && chunkSize - curOffset < boundary) {\n      offset += (chunkSize - curOffset) % 16;\n    } else {\n      offset += (size - curOffset % size) % size;\n    }\n    uboElement.offset = offset;\n    offset += size;\n  }\n  offset = Math.ceil(offset / 16) * 16;\n  return { uboElements, size: offset };\n}\n\nexport { WGSL_TO_STD40_SIZE, createUboElementsSTD40 };\n//# sourceMappingURL=createUboElementsSTD40.mjs.map\n","import { WGSL_TO_STD40_SIZE } from './createUboElementsSTD40.mjs';\n\n\"use strict\";\nfunction generateArraySyncSTD40(uboElement, offsetToAdd) {\n  const rowSize = Math.max(WGSL_TO_STD40_SIZE[uboElement.data.type] / 16, 1);\n  const elementSize = uboElement.data.value.length / uboElement.data.size;\n  const remainder = (4 - elementSize % 4) % 4;\n  const data = uboElement.data.type.indexOf(\"i32\") >= 0 ? \"dataInt32\" : \"data\";\n  return `\n        v = uv.${uboElement.data.name};\n        offset += ${offsetToAdd};\n\n        arrayOffset = offset;\n\n        t = 0;\n\n        for(var i=0; i < ${uboElement.data.size * rowSize}; i++)\n        {\n            for(var j = 0; j < ${elementSize}; j++)\n            {\n                ${data}[arrayOffset++] = v[t++];\n            }\n            ${remainder !== 0 ? `arrayOffset += ${remainder};` : \"\"}\n        }\n    `;\n}\n\nexport { generateArraySyncSTD40 };\n//# sourceMappingURL=generateArraySyncSTD40.mjs.map\n","import { createUboSyncFunction } from '../../../shared/shader/utils/createUboSyncFunction.mjs';\nimport { uboSyncFunctionsSTD40 } from '../../../shared/shader/utils/uboSyncFunctions.mjs';\nimport { generateArraySyncSTD40 } from './generateArraySyncSTD40.mjs';\n\n\"use strict\";\nfunction createUboSyncFunctionSTD40(uboElements) {\n  return createUboSyncFunction(\n    uboElements,\n    \"uboStd40\",\n    generateArraySyncSTD40,\n    uboSyncFunctionsSTD40\n  );\n}\n\nexport { createUboSyncFunctionSTD40 };\n//# sourceMappingURL=createUboSyncSTD40.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { UboSystem } from '../shared/shader/UboSystem.mjs';\nimport { createUboElementsSTD40 } from './shader/utils/createUboElementsSTD40.mjs';\nimport { createUboSyncFunctionSTD40 } from './shader/utils/createUboSyncSTD40.mjs';\n\n\"use strict\";\nclass GlUboSystem extends UboSystem {\n  constructor() {\n    super({\n      createUboElements: createUboElementsSTD40,\n      generateUboSync: createUboSyncFunctionSTD40\n    });\n  }\n}\n/** @ignore */\nGlUboSystem.extension = {\n  type: [ExtensionType.WebGLSystem],\n  name: \"ubo\"\n};\n\nexport { GlUboSystem };\n//# sourceMappingURL=GlUboSystem.mjs.map\n","\"use strict\";\nclass GlRenderTarget {\n  constructor() {\n    this.width = -1;\n    this.height = -1;\n    this.msaa = false;\n    this.msaaRenderBuffer = [];\n  }\n}\n\nexport { GlRenderTarget };\n//# sourceMappingURL=GlRenderTarget.mjs.map\n","import { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { CanvasSource } from '../../shared/texture/sources/CanvasSource.mjs';\nimport { CLEAR } from '../const.mjs';\nimport { GlRenderTarget } from '../GlRenderTarget.mjs';\n\n\"use strict\";\nclass GlRenderTargetAdaptor {\n  constructor() {\n    this._clearColorCache = [0, 0, 0, 0];\n    this._viewPortCache = new Rectangle();\n  }\n  init(renderer, renderTargetSystem) {\n    this._renderer = renderer;\n    this._renderTargetSystem = renderTargetSystem;\n    renderer.runners.contextChange.add(this);\n  }\n  contextChange() {\n    this._clearColorCache = [0, 0, 0, 0];\n    this._viewPortCache = new Rectangle();\n  }\n  copyToTexture(sourceRenderSurfaceTexture, destinationTexture, originSrc, size, originDest) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const renderer = this._renderer;\n    const glRenderTarget = renderTargetSystem.getGpuRenderTarget(sourceRenderSurfaceTexture);\n    const gl = renderer.gl;\n    this.finishRenderPass(sourceRenderSurfaceTexture);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.resolveTargetFramebuffer);\n    renderer.texture.bind(destinationTexture, 0);\n    gl.copyTexSubImage2D(\n      gl.TEXTURE_2D,\n      0,\n      originDest.x,\n      originDest.y,\n      originSrc.x,\n      originSrc.y,\n      size.width,\n      size.height\n    );\n    return destinationTexture;\n  }\n  startRenderPass(renderTarget, clear = true, clearColor, viewport) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const source = renderTarget.colorTexture;\n    const gpuRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    let viewPortY = viewport.y;\n    if (renderTarget.isRoot) {\n      viewPortY = source.pixelHeight - viewport.height;\n    }\n    renderTarget.colorTextures.forEach((texture) => {\n      this._renderer.texture.unbind(texture);\n    });\n    const gl = this._renderer.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, gpuRenderTarget.framebuffer);\n    const viewPortCache = this._viewPortCache;\n    if (viewPortCache.x !== viewport.x || viewPortCache.y !== viewPortY || viewPortCache.width !== viewport.width || viewPortCache.height !== viewport.height) {\n      viewPortCache.x = viewport.x;\n      viewPortCache.y = viewPortY;\n      viewPortCache.width = viewport.width;\n      viewPortCache.height = viewport.height;\n      gl.viewport(\n        viewport.x,\n        viewPortY,\n        viewport.width,\n        viewport.height\n      );\n    }\n    if (!gpuRenderTarget.depthStencilRenderBuffer && (renderTarget.stencil || renderTarget.depth)) {\n      this._initStencil(gpuRenderTarget);\n    }\n    this.clear(renderTarget, clear, clearColor);\n  }\n  finishRenderPass(renderTarget) {\n    const renderTargetSystem = this._renderTargetSystem;\n    const glRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    if (!glRenderTarget.msaa)\n      return;\n    const gl = this._renderer.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.resolveTargetFramebuffer);\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, glRenderTarget.framebuffer);\n    gl.blitFramebuffer(\n      0,\n      0,\n      glRenderTarget.width,\n      glRenderTarget.height,\n      0,\n      0,\n      glRenderTarget.width,\n      glRenderTarget.height,\n      gl.COLOR_BUFFER_BIT,\n      gl.NEAREST\n    );\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenderTarget.framebuffer);\n  }\n  initGpuRenderTarget(renderTarget) {\n    const renderer = this._renderer;\n    const gl = renderer.gl;\n    const glRenderTarget = new GlRenderTarget();\n    const colorTexture = renderTarget.colorTexture;\n    if (colorTexture instanceof CanvasSource) {\n      this._renderer.context.ensureCanvasSize(renderTarget.colorTexture.resource);\n      glRenderTarget.framebuffer = null;\n      return glRenderTarget;\n    }\n    this._initColor(renderTarget, glRenderTarget);\n    gl.bindFramebuffer(gl.FRAMEBUFFER, null);\n    return glRenderTarget;\n  }\n  destroyGpuRenderTarget(gpuRenderTarget) {\n    const gl = this._renderer.gl;\n    if (gpuRenderTarget.framebuffer) {\n      gl.deleteFramebuffer(gpuRenderTarget.framebuffer);\n      gpuRenderTarget.framebuffer = null;\n    }\n    if (gpuRenderTarget.resolveTargetFramebuffer) {\n      gl.deleteFramebuffer(gpuRenderTarget.resolveTargetFramebuffer);\n      gpuRenderTarget.resolveTargetFramebuffer = null;\n    }\n    if (gpuRenderTarget.depthStencilRenderBuffer) {\n      gl.deleteRenderbuffer(gpuRenderTarget.depthStencilRenderBuffer);\n      gpuRenderTarget.depthStencilRenderBuffer = null;\n    }\n    gpuRenderTarget.msaaRenderBuffer.forEach((renderBuffer) => {\n      gl.deleteRenderbuffer(renderBuffer);\n    });\n    gpuRenderTarget.msaaRenderBuffer = null;\n  }\n  clear(_renderTarget, clear, clearColor) {\n    if (!clear)\n      return;\n    const renderTargetSystem = this._renderTargetSystem;\n    if (typeof clear === \"boolean\") {\n      clear = clear ? CLEAR.ALL : CLEAR.NONE;\n    }\n    const gl = this._renderer.gl;\n    if (clear & CLEAR.COLOR) {\n      clearColor ?? (clearColor = renderTargetSystem.defaultClearColor);\n      const clearColorCache = this._clearColorCache;\n      const clearColorArray = clearColor;\n      if (clearColorCache[0] !== clearColorArray[0] || clearColorCache[1] !== clearColorArray[1] || clearColorCache[2] !== clearColorArray[2] || clearColorCache[3] !== clearColorArray[3]) {\n        clearColorCache[0] = clearColorArray[0];\n        clearColorCache[1] = clearColorArray[1];\n        clearColorCache[2] = clearColorArray[2];\n        clearColorCache[3] = clearColorArray[3];\n        gl.clearColor(clearColorArray[0], clearColorArray[1], clearColorArray[2], clearColorArray[3]);\n      }\n    }\n    gl.clear(clear);\n  }\n  resizeGpuRenderTarget(renderTarget) {\n    if (renderTarget.isRoot)\n      return;\n    const renderTargetSystem = this._renderTargetSystem;\n    const glRenderTarget = renderTargetSystem.getGpuRenderTarget(renderTarget);\n    this._resizeColor(renderTarget, glRenderTarget);\n    if (renderTarget.stencil || renderTarget.depth) {\n      this._resizeStencil(glRenderTarget);\n    }\n  }\n  _initColor(renderTarget, glRenderTarget) {\n    const renderer = this._renderer;\n    const gl = renderer.gl;\n    const resolveTargetFramebuffer = gl.createFramebuffer();\n    glRenderTarget.resolveTargetFramebuffer = resolveTargetFramebuffer;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, resolveTargetFramebuffer);\n    glRenderTarget.width = renderTarget.colorTexture.source.pixelWidth;\n    glRenderTarget.height = renderTarget.colorTexture.source.pixelHeight;\n    renderTarget.colorTextures.forEach((colorTexture, i) => {\n      const source = colorTexture.source;\n      if (source.antialias) {\n        if (renderer.context.supports.msaa) {\n          glRenderTarget.msaa = true;\n        } else {\n          warn(\"[RenderTexture] Antialiasing on textures is not supported in WebGL1\");\n        }\n      }\n      renderer.texture.bindSource(source, 0);\n      const glSource = renderer.texture.getGlSource(source);\n      const glTexture = glSource.texture;\n      gl.framebufferTexture2D(\n        gl.FRAMEBUFFER,\n        gl.COLOR_ATTACHMENT0 + i,\n        3553,\n        // texture.target,\n        glTexture,\n        0\n      );\n    });\n    if (glRenderTarget.msaa) {\n      const viewFramebuffer = gl.createFramebuffer();\n      glRenderTarget.framebuffer = viewFramebuffer;\n      gl.bindFramebuffer(gl.FRAMEBUFFER, viewFramebuffer);\n      renderTarget.colorTextures.forEach((_, i) => {\n        const msaaRenderBuffer = gl.createRenderbuffer();\n        glRenderTarget.msaaRenderBuffer[i] = msaaRenderBuffer;\n      });\n    } else {\n      glRenderTarget.framebuffer = resolveTargetFramebuffer;\n    }\n    this._resizeColor(renderTarget, glRenderTarget);\n  }\n  _resizeColor(renderTarget, glRenderTarget) {\n    const source = renderTarget.colorTexture.source;\n    glRenderTarget.width = source.pixelWidth;\n    glRenderTarget.height = source.pixelHeight;\n    renderTarget.colorTextures.forEach((colorTexture, i) => {\n      if (i === 0)\n        return;\n      colorTexture.source.resize(source.width, source.height, source._resolution);\n    });\n    if (glRenderTarget.msaa) {\n      const renderer = this._renderer;\n      const gl = renderer.gl;\n      const viewFramebuffer = glRenderTarget.framebuffer;\n      gl.bindFramebuffer(gl.FRAMEBUFFER, viewFramebuffer);\n      renderTarget.colorTextures.forEach((colorTexture, i) => {\n        const source2 = colorTexture.source;\n        renderer.texture.bindSource(source2, 0);\n        const glSource = renderer.texture.getGlSource(source2);\n        const glInternalFormat = glSource.internalFormat;\n        const msaaRenderBuffer = glRenderTarget.msaaRenderBuffer[i];\n        gl.bindRenderbuffer(\n          gl.RENDERBUFFER,\n          msaaRenderBuffer\n        );\n        gl.renderbufferStorageMultisample(\n          gl.RENDERBUFFER,\n          4,\n          glInternalFormat,\n          source2.pixelWidth,\n          source2.pixelHeight\n        );\n        gl.framebufferRenderbuffer(\n          gl.FRAMEBUFFER,\n          gl.COLOR_ATTACHMENT0 + i,\n          gl.RENDERBUFFER,\n          msaaRenderBuffer\n        );\n      });\n    }\n  }\n  _initStencil(glRenderTarget) {\n    if (glRenderTarget.framebuffer === null)\n      return;\n    const gl = this._renderer.gl;\n    const depthStencilRenderBuffer = gl.createRenderbuffer();\n    glRenderTarget.depthStencilRenderBuffer = depthStencilRenderBuffer;\n    gl.bindRenderbuffer(\n      gl.RENDERBUFFER,\n      depthStencilRenderBuffer\n    );\n    gl.framebufferRenderbuffer(\n      gl.FRAMEBUFFER,\n      gl.DEPTH_STENCIL_ATTACHMENT,\n      gl.RENDERBUFFER,\n      depthStencilRenderBuffer\n    );\n    this._resizeStencil(glRenderTarget);\n  }\n  _resizeStencil(glRenderTarget) {\n    const gl = this._renderer.gl;\n    gl.bindRenderbuffer(\n      gl.RENDERBUFFER,\n      glRenderTarget.depthStencilRenderBuffer\n    );\n    if (glRenderTarget.msaa) {\n      gl.renderbufferStorageMultisample(\n        gl.RENDERBUFFER,\n        4,\n        gl.DEPTH24_STENCIL8,\n        glRenderTarget.width,\n        glRenderTarget.height\n      );\n    } else {\n      gl.renderbufferStorage(\n        gl.RENDERBUFFER,\n        this._renderer.context.webGLVersion === 2 ? gl.DEPTH24_STENCIL8 : gl.DEPTH_STENCIL,\n        glRenderTarget.width,\n        glRenderTarget.height\n      );\n    }\n  }\n  prerender(renderTarget) {\n    const resource = renderTarget.colorTexture.resource;\n    if (this._renderer.context.multiView && CanvasSource.test(resource)) {\n      this._renderer.context.ensureCanvasSize(resource);\n    }\n  }\n  postrender(renderTarget) {\n    if (!this._renderer.context.multiView)\n      return;\n    if (CanvasSource.test(renderTarget.colorTexture.resource)) {\n      const contextCanvas = this._renderer.context.canvas;\n      const canvasSource = renderTarget.colorTexture;\n      canvasSource.context2D.drawImage(\n        contextCanvas,\n        0,\n        canvasSource.pixelHeight - contextCanvas.height\n      );\n    }\n  }\n}\n\nexport { GlRenderTargetAdaptor };\n//# sourceMappingURL=GlRenderTargetAdaptor.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { RenderTargetSystem } from '../../shared/renderTarget/RenderTargetSystem.mjs';\nimport { GlRenderTargetAdaptor } from './GlRenderTargetAdaptor.mjs';\n\n\"use strict\";\nclass GlRenderTargetSystem extends RenderTargetSystem {\n  constructor(renderer) {\n    super(renderer);\n    this.adaptor = new GlRenderTargetAdaptor();\n    this.adaptor.init(renderer, this);\n  }\n}\n/** @ignore */\nGlRenderTargetSystem.extension = {\n  type: [ExtensionType.WebGLSystem],\n  name: \"renderTarget\"\n};\n\nexport { GlRenderTargetSystem };\n//# sourceMappingURL=GlRenderTargetSystem.mjs.map\n","\"use strict\";\nclass IGLUniformData {\n}\nclass GlProgramData {\n  /**\n   * Makes a new Pixi program.\n   * @param program - webgl program\n   * @param uniformData - uniforms\n   */\n  constructor(program, uniformData) {\n    this.program = program;\n    this.uniformData = uniformData;\n    this.uniformGroups = {};\n    this.uniformDirtyGroups = {};\n    this.uniformBlockBindings = {};\n  }\n  /** Destroys this program. */\n  destroy() {\n    this.uniformData = null;\n    this.uniformGroups = null;\n    this.uniformDirtyGroups = null;\n    this.uniformBlockBindings = null;\n    this.program = null;\n  }\n}\n\nexport { GlProgramData, IGLUniformData };\n//# sourceMappingURL=GlProgramData.mjs.map\n","\"use strict\";\nfunction compileShader(gl, type, src) {\n  const shader = gl.createShader(type);\n  gl.shaderSource(shader, src);\n  gl.compileShader(shader);\n  return shader;\n}\n\nexport { compileShader };\n//# sourceMappingURL=compileShader.mjs.map\n","\"use strict\";\nfunction booleanArray(size) {\n  const array = new Array(size);\n  for (let i = 0; i < array.length; i++) {\n    array[i] = false;\n  }\n  return array;\n}\nfunction defaultValue(type, size) {\n  switch (type) {\n    case \"float\":\n      return 0;\n    case \"vec2\":\n      return new Float32Array(2 * size);\n    case \"vec3\":\n      return new Float32Array(3 * size);\n    case \"vec4\":\n      return new Float32Array(4 * size);\n    case \"int\":\n    case \"uint\":\n    case \"sampler2D\":\n    case \"sampler2DArray\":\n      return 0;\n    case \"ivec2\":\n      return new Int32Array(2 * size);\n    case \"ivec3\":\n      return new Int32Array(3 * size);\n    case \"ivec4\":\n      return new Int32Array(4 * size);\n    case \"uvec2\":\n      return new Uint32Array(2 * size);\n    case \"uvec3\":\n      return new Uint32Array(3 * size);\n    case \"uvec4\":\n      return new Uint32Array(4 * size);\n    case \"bool\":\n      return false;\n    case \"bvec2\":\n      return booleanArray(2 * size);\n    case \"bvec3\":\n      return booleanArray(3 * size);\n    case \"bvec4\":\n      return booleanArray(4 * size);\n    case \"mat2\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        1\n      ]);\n    case \"mat3\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        1\n      ]);\n    case \"mat4\":\n      return new Float32Array([\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1,\n        0,\n        0,\n        0,\n        0,\n        1\n      ]);\n  }\n  return null;\n}\n\nexport { defaultValue };\n//# sourceMappingURL=defaultValue.mjs.map\n","\"use strict\";\nlet GL_TABLE = null;\nconst GL_TO_GLSL_TYPES = {\n  FLOAT: \"float\",\n  FLOAT_VEC2: \"vec2\",\n  FLOAT_VEC3: \"vec3\",\n  FLOAT_VEC4: \"vec4\",\n  INT: \"int\",\n  INT_VEC2: \"ivec2\",\n  INT_VEC3: \"ivec3\",\n  INT_VEC4: \"ivec4\",\n  UNSIGNED_INT: \"uint\",\n  UNSIGNED_INT_VEC2: \"uvec2\",\n  UNSIGNED_INT_VEC3: \"uvec3\",\n  UNSIGNED_INT_VEC4: \"uvec4\",\n  BOOL: \"bool\",\n  BOOL_VEC2: \"bvec2\",\n  BOOL_VEC3: \"bvec3\",\n  BOOL_VEC4: \"bvec4\",\n  FLOAT_MAT2: \"mat2\",\n  FLOAT_MAT3: \"mat3\",\n  FLOAT_MAT4: \"mat4\",\n  SAMPLER_2D: \"sampler2D\",\n  INT_SAMPLER_2D: \"sampler2D\",\n  UNSIGNED_INT_SAMPLER_2D: \"sampler2D\",\n  SAMPLER_CUBE: \"samplerCube\",\n  INT_SAMPLER_CUBE: \"samplerCube\",\n  UNSIGNED_INT_SAMPLER_CUBE: \"samplerCube\",\n  SAMPLER_2D_ARRAY: \"sampler2DArray\",\n  INT_SAMPLER_2D_ARRAY: \"sampler2DArray\",\n  UNSIGNED_INT_SAMPLER_2D_ARRAY: \"sampler2DArray\"\n};\nconst GLSL_TO_VERTEX_TYPES = {\n  float: \"float32\",\n  vec2: \"float32x2\",\n  vec3: \"float32x3\",\n  vec4: \"float32x4\",\n  int: \"sint32\",\n  ivec2: \"sint32x2\",\n  ivec3: \"sint32x3\",\n  ivec4: \"sint32x4\",\n  uint: \"uint32\",\n  uvec2: \"uint32x2\",\n  uvec3: \"uint32x3\",\n  uvec4: \"uint32x4\",\n  bool: \"uint32\",\n  bvec2: \"uint32x2\",\n  bvec3: \"uint32x3\",\n  bvec4: \"uint32x4\"\n};\nfunction mapType(gl, type) {\n  if (!GL_TABLE) {\n    const typeNames = Object.keys(GL_TO_GLSL_TYPES);\n    GL_TABLE = {};\n    for (let i = 0; i < typeNames.length; ++i) {\n      const tn = typeNames[i];\n      GL_TABLE[gl[tn]] = GL_TO_GLSL_TYPES[tn];\n    }\n  }\n  return GL_TABLE[type];\n}\nfunction mapGlToVertexFormat(gl, type) {\n  const typeValue = mapType(gl, type);\n  return GLSL_TO_VERTEX_TYPES[typeValue] || \"float32\";\n}\n\nexport { mapGlToVertexFormat, mapType };\n//# sourceMappingURL=mapType.mjs.map\n","\"use strict\";\nfunction logPrettyShaderError(gl, shader) {\n  const shaderSrc = gl.getShaderSource(shader).split(\"\\n\").map((line, index) => `${index}: ${line}`);\n  const shaderLog = gl.getShaderInfoLog(shader);\n  const splitShader = shaderLog.split(\"\\n\");\n  const dedupe = {};\n  const lineNumbers = splitShader.map((line) => parseFloat(line.replace(/^ERROR\\: 0\\:([\\d]+)\\:.*$/, \"$1\"))).filter((n) => {\n    if (n && !dedupe[n]) {\n      dedupe[n] = true;\n      return true;\n    }\n    return false;\n  });\n  const logArgs = [\"\"];\n  lineNumbers.forEach((number) => {\n    shaderSrc[number - 1] = `%c${shaderSrc[number - 1]}%c`;\n    logArgs.push(\"background: #FF0000; color:#FFFFFF; font-size: 10px\", \"font-size: 10px\");\n  });\n  const fragmentSourceToLog = shaderSrc.join(\"\\n\");\n  logArgs[0] = fragmentSourceToLog;\n  console.error(shaderLog);\n  console.groupCollapsed(\"click to view full shader code\");\n  console.warn(...logArgs);\n  console.groupEnd();\n}\nfunction logProgramError(gl, program, vertexShader, fragmentShader) {\n  if (!gl.getProgramParameter(program, gl.LINK_STATUS)) {\n    if (!gl.getShaderParameter(vertexShader, gl.COMPILE_STATUS)) {\n      logPrettyShaderError(gl, vertexShader);\n    }\n    if (!gl.getShaderParameter(fragmentShader, gl.COMPILE_STATUS)) {\n      logPrettyShaderError(gl, fragmentShader);\n    }\n    console.error(\"PixiJS Error: Could not initialize shader.\");\n    if (gl.getProgramInfoLog(program) !== \"\") {\n      console.warn(\"PixiJS Warning: gl.getProgramInfoLog()\", gl.getProgramInfoLog(program));\n    }\n  }\n}\n\nexport { logProgramError };\n//# sourceMappingURL=logProgramError.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { generateShaderSyncCode } from './GenerateShaderSyncCode.mjs';\nimport { generateProgram } from './program/generateProgram.mjs';\n\n\"use strict\";\nconst defaultSyncData = {\n  textureCount: 0,\n  blockIndex: 0\n};\nclass GlShaderSystem {\n  constructor(renderer) {\n    /** @internal */\n    this._activeProgram = null;\n    this._programDataHash = /* @__PURE__ */ Object.create(null);\n    this._shaderSyncFunctions = /* @__PURE__ */ Object.create(null);\n    this._renderer = renderer;\n    this._renderer.renderableGC.addManagedHash(this, \"_programDataHash\");\n  }\n  contextChange(gl) {\n    this._gl = gl;\n    this._programDataHash = /* @__PURE__ */ Object.create(null);\n    this._shaderSyncFunctions = /* @__PURE__ */ Object.create(null);\n    this._activeProgram = null;\n  }\n  /**\n   * Changes the current shader to the one given in parameter.\n   * @param shader - the new shader\n   * @param skipSync - false if the shader should automatically sync its uniforms.\n   * @returns the glProgram that belongs to the shader.\n   */\n  bind(shader, skipSync) {\n    this._setProgram(shader.glProgram);\n    if (skipSync)\n      return;\n    defaultSyncData.textureCount = 0;\n    defaultSyncData.blockIndex = 0;\n    let syncFunction = this._shaderSyncFunctions[shader.glProgram._key];\n    if (!syncFunction) {\n      syncFunction = this._shaderSyncFunctions[shader.glProgram._key] = this._generateShaderSync(shader, this);\n    }\n    this._renderer.buffer.nextBindBase(!!shader.glProgram.transformFeedbackVaryings);\n    syncFunction(this._renderer, shader, defaultSyncData);\n  }\n  /**\n   * Updates the uniform group.\n   * @param uniformGroup - the uniform group to update\n   */\n  updateUniformGroup(uniformGroup) {\n    this._renderer.uniformGroup.updateUniformGroup(uniformGroup, this._activeProgram, defaultSyncData);\n  }\n  /**\n   * Binds a uniform block to the shader.\n   * @param uniformGroup - the uniform group to bind\n   * @param name - the name of the uniform block\n   * @param index - the index of the uniform block\n   */\n  bindUniformBlock(uniformGroup, name, index = 0) {\n    const bufferSystem = this._renderer.buffer;\n    const programData = this._getProgramData(this._activeProgram);\n    const isBufferResource = uniformGroup._bufferResource;\n    if (!isBufferResource) {\n      this._renderer.ubo.updateUniformGroup(uniformGroup);\n    }\n    const buffer = uniformGroup.buffer;\n    const glBuffer = bufferSystem.updateBuffer(buffer);\n    const boundLocation = bufferSystem.freeLocationForBufferBase(glBuffer);\n    if (isBufferResource) {\n      const { offset, size } = uniformGroup;\n      if (offset === 0 && size === buffer.data.byteLength) {\n        bufferSystem.bindBufferBase(glBuffer, boundLocation);\n      } else {\n        bufferSystem.bindBufferRange(glBuffer, boundLocation, offset);\n      }\n    } else if (bufferSystem.getLastBindBaseLocation(glBuffer) !== boundLocation) {\n      bufferSystem.bindBufferBase(glBuffer, boundLocation);\n    }\n    const uniformBlockIndex = this._activeProgram._uniformBlockData[name].index;\n    if (programData.uniformBlockBindings[index] === boundLocation)\n      return;\n    programData.uniformBlockBindings[index] = boundLocation;\n    this._renderer.gl.uniformBlockBinding(programData.program, uniformBlockIndex, boundLocation);\n  }\n  _setProgram(program) {\n    if (this._activeProgram === program)\n      return;\n    this._activeProgram = program;\n    const programData = this._getProgramData(program);\n    this._gl.useProgram(programData.program);\n  }\n  /**\n   * @param program - the program to get the data for\n   * @internal\n   */\n  _getProgramData(program) {\n    return this._programDataHash[program._key] || this._createProgramData(program);\n  }\n  _createProgramData(program) {\n    const key = program._key;\n    this._programDataHash[key] = generateProgram(this._gl, program);\n    return this._programDataHash[key];\n  }\n  destroy() {\n    for (const key of Object.keys(this._programDataHash)) {\n      const programData = this._programDataHash[key];\n      programData.destroy();\n      this._programDataHash[key] = null;\n    }\n    this._programDataHash = null;\n    this._shaderSyncFunctions = null;\n    this._activeProgram = null;\n    this._renderer = null;\n    this._gl = null;\n  }\n  /**\n   * Creates a function that can be executed that will sync the shader as efficiently as possible.\n   * Overridden by the unsafe eval package if you don't want eval used in your project.\n   * @param shader - the shader to generate the sync function for\n   * @param shaderSystem - the shader system to use\n   * @returns - the generated sync function\n   * @ignore\n   */\n  _generateShaderSync(shader, shaderSystem) {\n    return generateShaderSyncCode(shader, shaderSystem);\n  }\n  resetState() {\n    this._activeProgram = null;\n  }\n}\n/** @ignore */\nGlShaderSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"shader\"\n};\n\nexport { GlShaderSystem };\n//# sourceMappingURL=GlShaderSystem.mjs.map\n","import { warn } from '../../../../../utils/logging/warn.mjs';\nimport { GlProgramData } from '../GlProgramData.mjs';\nimport { compileShader } from './compileShader.mjs';\nimport { defaultValue } from './defaultValue.mjs';\nimport { extractAttributesFromGlProgram } from './extractAttributesFromGlProgram.mjs';\nimport { getUboData } from './getUboData.mjs';\nimport { getUniformData } from './getUniformData.mjs';\nimport { logProgramError } from './logProgramError.mjs';\n\n\"use strict\";\nfunction generateProgram(gl, program) {\n  const glVertShader = compileShader(gl, gl.VERTEX_SHADER, program.vertex);\n  const glFragShader = compileShader(gl, gl.FRAGMENT_SHADER, program.fragment);\n  const webGLProgram = gl.createProgram();\n  gl.attachShader(webGLProgram, glVertShader);\n  gl.attachShader(webGLProgram, glFragShader);\n  const transformFeedbackVaryings = program.transformFeedbackVaryings;\n  if (transformFeedbackVaryings) {\n    if (typeof gl.transformFeedbackVaryings !== \"function\") {\n      warn(`TransformFeedback is not supported but TransformFeedbackVaryings are given.`);\n    } else {\n      gl.transformFeedbackVaryings(\n        webGLProgram,\n        transformFeedbackVaryings.names,\n        transformFeedbackVaryings.bufferMode === \"separate\" ? gl.SEPARATE_ATTRIBS : gl.INTERLEAVED_ATTRIBS\n      );\n    }\n  }\n  gl.linkProgram(webGLProgram);\n  if (!gl.getProgramParameter(webGLProgram, gl.LINK_STATUS)) {\n    logProgramError(gl, webGLProgram, glVertShader, glFragShader);\n  }\n  program._attributeData = extractAttributesFromGlProgram(\n    webGLProgram,\n    gl,\n    !/^[ \\t]*#[ \\t]*version[ \\t]+300[ \\t]+es[ \\t]*$/m.test(program.vertex)\n  );\n  program._uniformData = getUniformData(webGLProgram, gl);\n  program._uniformBlockData = getUboData(webGLProgram, gl);\n  gl.deleteShader(glVertShader);\n  gl.deleteShader(glFragShader);\n  const uniformData = {};\n  for (const i in program._uniformData) {\n    const data = program._uniformData[i];\n    uniformData[i] = {\n      location: gl.getUniformLocation(webGLProgram, i),\n      value: defaultValue(data.type, data.size)\n    };\n  }\n  const glProgram = new GlProgramData(webGLProgram, uniformData);\n  return glProgram;\n}\n\nexport { generateProgram };\n//# sourceMappingURL=generateProgram.mjs.map\n","import { getAttributeInfoFromFormat } from '../../../shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nimport { mapGlToVertexFormat } from './mapType.mjs';\n\n\"use strict\";\nfunction extractAttributesFromGlProgram(program, gl, sortAttributes = false) {\n  const attributes = {};\n  const totalAttributes = gl.getProgramParameter(program, gl.ACTIVE_ATTRIBUTES);\n  for (let i = 0; i < totalAttributes; i++) {\n    const attribData = gl.getActiveAttrib(program, i);\n    if (attribData.name.startsWith(\"gl_\")) {\n      continue;\n    }\n    const format = mapGlToVertexFormat(gl, attribData.type);\n    attributes[attribData.name] = {\n      location: 0,\n      // set further down..\n      format,\n      stride: getAttributeInfoFromFormat(format).stride,\n      offset: 0,\n      instance: false,\n      start: 0\n    };\n  }\n  const keys = Object.keys(attributes);\n  if (sortAttributes) {\n    keys.sort((a, b) => a > b ? 1 : -1);\n    for (let i = 0; i < keys.length; i++) {\n      attributes[keys[i]].location = i;\n      gl.bindAttribLocation(program, i, keys[i]);\n    }\n    gl.linkProgram(program);\n  } else {\n    for (let i = 0; i < keys.length; i++) {\n      attributes[keys[i]].location = gl.getAttribLocation(program, keys[i]);\n    }\n  }\n  return attributes;\n}\n\nexport { extractAttributesFromGlProgram };\n//# sourceMappingURL=extractAttributesFromGlProgram.mjs.map\n","import { defaultValue } from './defaultValue.mjs';\nimport { mapType } from './mapType.mjs';\n\n\"use strict\";\nfunction getUniformData(program, gl) {\n  const uniforms = {};\n  const totalUniforms = gl.getProgramParameter(program, gl.ACTIVE_UNIFORMS);\n  for (let i = 0; i < totalUniforms; i++) {\n    const uniformData = gl.getActiveUniform(program, i);\n    const name = uniformData.name.replace(/\\[.*?\\]$/, \"\");\n    const isArray = !!uniformData.name.match(/\\[.*?\\]$/);\n    const type = mapType(gl, uniformData.type);\n    uniforms[name] = {\n      name,\n      index: i,\n      type,\n      size: uniformData.size,\n      isArray,\n      value: defaultValue(type, uniformData.size)\n    };\n  }\n  return uniforms;\n}\n\nexport { getUniformData };\n//# sourceMappingURL=getUniformData.mjs.map\n","\"use strict\";\nfunction getUboData(program, gl) {\n  if (!gl.ACTIVE_UNIFORM_BLOCKS)\n    return {};\n  const uniformBlocks = {};\n  const totalUniformsBlocks = gl.getProgramParameter(program, gl.ACTIVE_UNIFORM_BLOCKS);\n  for (let i = 0; i < totalUniformsBlocks; i++) {\n    const name = gl.getActiveUniformBlockName(program, i);\n    const uniformBlockIndex = gl.getUniformBlockIndex(program, name);\n    const size = gl.getActiveUniformBlockParameter(program, i, gl.UNIFORM_BLOCK_DATA_SIZE);\n    uniformBlocks[name] = {\n      name,\n      index: uniformBlockIndex,\n      size\n    };\n  }\n  return uniformBlocks;\n}\n\nexport { getUboData };\n//# sourceMappingURL=getUboData.mjs.map\n","import { BufferResource } from '../../shared/buffer/BufferResource.mjs';\nimport { UniformGroup } from '../../shared/shader/UniformGroup.mjs';\nimport { TextureSource } from '../../shared/texture/sources/TextureSource.mjs';\n\n\"use strict\";\nfunction generateShaderSyncCode(shader, shaderSystem) {\n  const funcFragments = [];\n  const headerFragments = [`\n        var g = s.groups;\n        var sS = r.shader;\n        var p = s.glProgram;\n        var ugS = r.uniformGroup;\n        var resources;\n    `];\n  let addedTextreSystem = false;\n  let textureCount = 0;\n  const programData = shaderSystem._getProgramData(shader.glProgram);\n  for (const i in shader.groups) {\n    const group = shader.groups[i];\n    funcFragments.push(`\n            resources = g[${i}].resources;\n        `);\n    for (const j in group.resources) {\n      const resource = group.resources[j];\n      if (resource instanceof UniformGroup) {\n        if (resource.ubo) {\n          const resName = shader._uniformBindMap[i][Number(j)];\n          funcFragments.push(`\n                        sS.bindUniformBlock(\n                            resources[${j}],\n                            '${resName}',\n                            ${shader.glProgram._uniformBlockData[resName].index}\n                        );\n                    `);\n        } else {\n          funcFragments.push(`\n                        ugS.updateUniformGroup(resources[${j}], p, sD);\n                    `);\n        }\n      } else if (resource instanceof BufferResource) {\n        const resName = shader._uniformBindMap[i][Number(j)];\n        funcFragments.push(`\n                    sS.bindUniformBlock(\n                        resources[${j}],\n                        '${resName}',\n                        ${shader.glProgram._uniformBlockData[resName].index}\n                    );\n                `);\n      } else if (resource instanceof TextureSource) {\n        const uniformName = shader._uniformBindMap[i][j];\n        const uniformData = programData.uniformData[uniformName];\n        if (uniformData) {\n          if (!addedTextreSystem) {\n            addedTextreSystem = true;\n            headerFragments.push(`\n                        var tS = r.texture;\n                        `);\n          }\n          shaderSystem._gl.uniform1i(uniformData.location, textureCount);\n          funcFragments.push(`\n                        tS.bind(resources[${j}], ${textureCount});\n                    `);\n          textureCount++;\n        }\n      }\n    }\n  }\n  const functionSource = [...headerFragments, ...funcFragments].join(\"\\n\");\n  return new Function(\"r\", \"s\", \"sD\", functionSource);\n}\n\nexport { generateShaderSyncCode };\n//# sourceMappingURL=GenerateShaderSyncCode.mjs.map\n","\"use strict\";\nconst UNIFORM_TO_SINGLE_SETTERS = {\n  f32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1f(location, v);\n        }`,\n  \"vec2<f32>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2f(location, v[0], v[1]);\n        }`,\n  \"vec3<f32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3f(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<f32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4f(location, v[0], v[1], v[2], v[3]);\n        }`,\n  i32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }`,\n  \"vec2<i32>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }`,\n  \"vec3<i32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<i32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }`,\n  u32: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1ui(location, v);\n        }`,\n  \"vec2<u32>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2ui(location, v[0], v[1]);\n        }`,\n  \"vec3<u32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3ui(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<u32>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4ui(location, v[0], v[1], v[2], v[3]);\n        }`,\n  bool: `if (cv !== v) {\n            cu.value = v;\n            gl.uniform1i(location, v);\n        }`,\n  \"vec2<bool>\": `if (cv[0] !== v[0] || cv[1] !== v[1]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            gl.uniform2i(location, v[0], v[1]);\n        }`,\n  \"vec3<bool>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            gl.uniform3i(location, v[0], v[1], v[2]);\n        }`,\n  \"vec4<bool>\": `if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3]) {\n            cv[0] = v[0];\n            cv[1] = v[1];\n            cv[2] = v[2];\n            cv[3] = v[3];\n            gl.uniform4i(location, v[0], v[1], v[2], v[3]);\n        }`,\n  \"mat2x2<f32>\": `gl.uniformMatrix2fv(location, false, v);`,\n  \"mat3x3<f32>\": `gl.uniformMatrix3fv(location, false, v);`,\n  \"mat4x4<f32>\": `gl.uniformMatrix4fv(location, false, v);`\n};\nconst UNIFORM_TO_ARRAY_SETTERS = {\n  f32: `gl.uniform1fv(location, v);`,\n  \"vec2<f32>\": `gl.uniform2fv(location, v);`,\n  \"vec3<f32>\": `gl.uniform3fv(location, v);`,\n  \"vec4<f32>\": `gl.uniform4fv(location, v);`,\n  \"mat2x2<f32>\": `gl.uniformMatrix2fv(location, false, v);`,\n  \"mat3x3<f32>\": `gl.uniformMatrix3fv(location, false, v);`,\n  \"mat4x4<f32>\": `gl.uniformMatrix4fv(location, false, v);`,\n  i32: `gl.uniform1iv(location, v);`,\n  \"vec2<i32>\": `gl.uniform2iv(location, v);`,\n  \"vec3<i32>\": `gl.uniform3iv(location, v);`,\n  \"vec4<i32>\": `gl.uniform4iv(location, v);`,\n  u32: `gl.uniform1iv(location, v);`,\n  \"vec2<u32>\": `gl.uniform2iv(location, v);`,\n  \"vec3<u32>\": `gl.uniform3iv(location, v);`,\n  \"vec4<u32>\": `gl.uniform4iv(location, v);`,\n  bool: `gl.uniform1iv(location, v);`,\n  \"vec2<bool>\": `gl.uniform2iv(location, v);`,\n  \"vec3<bool>\": `gl.uniform3iv(location, v);`,\n  \"vec4<bool>\": `gl.uniform4iv(location, v);`\n};\n\nexport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS };\n//# sourceMappingURL=generateUniformsSyncTypes.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { generateUniformsSync } from './utils/generateUniformsSync.mjs';\n\n\"use strict\";\nclass GlUniformGroupSystem {\n  /** @param renderer - The renderer this System works for. */\n  constructor(renderer) {\n    /** Cache to holds the generated functions. Stored against UniformObjects unique signature. */\n    this._cache = {};\n    this._uniformGroupSyncHash = {};\n    this._renderer = renderer;\n    this.gl = null;\n    this._cache = {};\n  }\n  contextChange(gl) {\n    this.gl = gl;\n  }\n  /**\n   * Uploads the uniforms values to the currently bound shader.\n   * @param group - the uniforms values that be applied to the current shader\n   * @param program\n   * @param syncData\n   * @param syncData.textureCount\n   */\n  updateUniformGroup(group, program, syncData) {\n    const programData = this._renderer.shader._getProgramData(program);\n    if (!group.isStatic || group._dirtyId !== programData.uniformDirtyGroups[group.uid]) {\n      programData.uniformDirtyGroups[group.uid] = group._dirtyId;\n      const syncFunc = this._getUniformSyncFunction(group, program);\n      syncFunc(programData.uniformData, group.uniforms, this._renderer, syncData);\n    }\n  }\n  /**\n   * Overridable by the pixi.js/unsafe-eval package to use static syncUniforms instead.\n   * @param group\n   * @param program\n   */\n  _getUniformSyncFunction(group, program) {\n    return this._uniformGroupSyncHash[group._signature]?.[program._key] || this._createUniformSyncFunction(group, program);\n  }\n  _createUniformSyncFunction(group, program) {\n    const uniformGroupSyncHash = this._uniformGroupSyncHash[group._signature] || (this._uniformGroupSyncHash[group._signature] = {});\n    const id = this._getSignature(group, program._uniformData, \"u\");\n    if (!this._cache[id]) {\n      this._cache[id] = this._generateUniformsSync(group, program._uniformData);\n    }\n    uniformGroupSyncHash[program._key] = this._cache[id];\n    return uniformGroupSyncHash[program._key];\n  }\n  _generateUniformsSync(group, uniformData) {\n    return generateUniformsSync(group, uniformData);\n  }\n  /**\n   * Takes a uniform group and data and generates a unique signature for them.\n   * @param group - The uniform group to get signature of\n   * @param group.uniforms\n   * @param uniformData - Uniform information generated by the shader\n   * @param preFix\n   * @returns Unique signature of the uniform group\n   */\n  _getSignature(group, uniformData, preFix) {\n    const uniforms = group.uniforms;\n    const strings = [`${preFix}-`];\n    for (const i in uniforms) {\n      strings.push(i);\n      if (uniformData[i]) {\n        strings.push(uniformData[i].type);\n      }\n    }\n    return strings.join(\"-\");\n  }\n  /** Destroys this System and removes all its textures. */\n  destroy() {\n    this._renderer = null;\n    this._cache = null;\n  }\n}\n/** @ignore */\nGlUniformGroupSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"uniformGroup\"\n};\n\nexport { GlUniformGroupSystem };\n//# sourceMappingURL=GlUniformGroupSystem.mjs.map\n","import { BufferResource } from '../../../shared/buffer/BufferResource.mjs';\nimport { UniformGroup } from '../../../shared/shader/UniformGroup.mjs';\nimport { uniformParsers } from '../../../shared/shader/utils/uniformParsers.mjs';\nimport { UNIFORM_TO_SINGLE_SETTERS, UNIFORM_TO_ARRAY_SETTERS } from './generateUniformsSyncTypes.mjs';\n\n\"use strict\";\nfunction generateUniformsSync(group, uniformData) {\n  const funcFragments = [`\n        var v = null;\n        var cv = null;\n        var cu = null;\n        var t = 0;\n        var gl = renderer.gl;\n        var name = null;\n    `];\n  for (const i in group.uniforms) {\n    if (!uniformData[i]) {\n      if (group.uniforms[i] instanceof UniformGroup) {\n        if (group.uniforms[i].ubo) {\n          funcFragments.push(`\n                        renderer.shader.bindUniformBlock(uv.${i}, \"${i}\");\n                    `);\n        } else {\n          funcFragments.push(`\n                        renderer.shader.updateUniformGroup(uv.${i});\n                    `);\n        }\n      } else if (group.uniforms[i] instanceof BufferResource) {\n        funcFragments.push(`\n                        renderer.shader.bindBufferResource(uv.${i}, \"${i}\");\n                    `);\n      }\n      continue;\n    }\n    const uniform = group.uniformStructures[i];\n    let parsed = false;\n    for (let j = 0; j < uniformParsers.length; j++) {\n      const parser = uniformParsers[j];\n      if (uniform.type === parser.type && parser.test(uniform)) {\n        funcFragments.push(`name = \"${i}\";`, uniformParsers[j].uniform);\n        parsed = true;\n        break;\n      }\n    }\n    if (!parsed) {\n      const templateType = uniform.size === 1 ? UNIFORM_TO_SINGLE_SETTERS : UNIFORM_TO_ARRAY_SETTERS;\n      const template = templateType[uniform.type].replace(\"location\", `ud[\"${i}\"].location`);\n      funcFragments.push(`\n            cu = ud[\"${i}\"];\n            cv = cu.value;\n            v = uv[\"${i}\"];\n            ${template};`);\n    }\n  }\n  return new Function(\"ud\", \"uv\", \"renderer\", \"syncData\", funcFragments.join(\"\\n\"));\n}\n\nexport { generateUniformsSync };\n//# sourceMappingURL=generateUniformsSync.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { State } from '../../shared/state/State.mjs';\nimport { mapWebGLBlendModesToPixi } from './mapWebGLBlendModesToPixi.mjs';\n\n\"use strict\";\nconst BLEND = 0;\nconst OFFSET = 1;\nconst CULLING = 2;\nconst DEPTH_TEST = 3;\nconst WINDING = 4;\nconst DEPTH_MASK = 5;\nconst _GlStateSystem = class _GlStateSystem {\n  constructor(renderer) {\n    /**\n     * Whether to invert the front face when rendering\n     * This is used for render textures where the Y-coordinate is flipped\n     * @default false\n     */\n    this._invertFrontFace = false;\n    this.gl = null;\n    this.stateId = 0;\n    this.polygonOffset = 0;\n    this.blendMode = \"none\";\n    this._blendEq = false;\n    this.map = [];\n    this.map[BLEND] = this.setBlend;\n    this.map[OFFSET] = this.setOffset;\n    this.map[CULLING] = this.setCullFace;\n    this.map[DEPTH_TEST] = this.setDepthTest;\n    this.map[WINDING] = this.setFrontFace;\n    this.map[DEPTH_MASK] = this.setDepthMask;\n    this.checks = [];\n    this.defaultState = State.for2d();\n    renderer.renderTarget.onRenderTargetChange.add(this);\n  }\n  onRenderTargetChange(renderTarget) {\n    this._invertFrontFace = !renderTarget.isRoot;\n    if (this._cullFace) {\n      this.setFrontFace(this._frontFace);\n    } else {\n      this._frontFaceDirty = true;\n    }\n  }\n  contextChange(gl) {\n    this.gl = gl;\n    this.blendModesMap = mapWebGLBlendModesToPixi(gl);\n    this.resetState();\n  }\n  /**\n   * Sets the current state\n   * @param {*} state - The state to set.\n   */\n  set(state) {\n    state || (state = this.defaultState);\n    if (this.stateId !== state.data) {\n      let diff = this.stateId ^ state.data;\n      let i = 0;\n      while (diff) {\n        if (diff & 1) {\n          this.map[i].call(this, !!(state.data & 1 << i));\n        }\n        diff >>= 1;\n        i++;\n      }\n      this.stateId = state.data;\n    }\n    for (let i = 0; i < this.checks.length; i++) {\n      this.checks[i](this, state);\n    }\n  }\n  /**\n   * Sets the state, when previous state is unknown.\n   * @param {*} state - The state to set\n   */\n  forceState(state) {\n    state || (state = this.defaultState);\n    for (let i = 0; i < this.map.length; i++) {\n      this.map[i].call(this, !!(state.data & 1 << i));\n    }\n    for (let i = 0; i < this.checks.length; i++) {\n      this.checks[i](this, state);\n    }\n    this.stateId = state.data;\n  }\n  /**\n   * Sets whether to enable or disable blending.\n   * @param value - Turn on or off WebGl blending.\n   */\n  setBlend(value) {\n    this._updateCheck(_GlStateSystem._checkBlendMode, value);\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.BLEND);\n  }\n  /**\n   * Sets whether to enable or disable polygon offset fill.\n   * @param value - Turn on or off webgl polygon offset testing.\n   */\n  setOffset(value) {\n    this._updateCheck(_GlStateSystem._checkPolygonOffset, value);\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.POLYGON_OFFSET_FILL);\n  }\n  /**\n   * Sets whether to enable or disable depth test.\n   * @param value - Turn on or off webgl depth testing.\n   */\n  setDepthTest(value) {\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.DEPTH_TEST);\n  }\n  /**\n   * Sets whether to enable or disable depth mask.\n   * @param value - Turn on or off webgl depth mask.\n   */\n  setDepthMask(value) {\n    this.gl.depthMask(value);\n  }\n  /**\n   * Sets whether to enable or disable cull face.\n   * @param {boolean} value - Turn on or off webgl cull face.\n   */\n  setCullFace(value) {\n    this._cullFace = value;\n    this.gl[value ? \"enable\" : \"disable\"](this.gl.CULL_FACE);\n    if (this._cullFace && this._frontFaceDirty) {\n      this.setFrontFace(this._frontFace);\n    }\n  }\n  /**\n   * Sets the gl front face.\n   * @param {boolean} value - true is clockwise and false is counter-clockwise\n   */\n  setFrontFace(value) {\n    this._frontFace = value;\n    this._frontFaceDirty = false;\n    const faceMode = this._invertFrontFace ? !value : value;\n    if (this._glFrontFace !== faceMode) {\n      this._glFrontFace = faceMode;\n      this.gl.frontFace(this.gl[faceMode ? \"CW\" : \"CCW\"]);\n    }\n  }\n  /**\n   * Sets the blend mode.\n   * @param {number} value - The blend mode to set to.\n   */\n  setBlendMode(value) {\n    if (!this.blendModesMap[value]) {\n      value = \"normal\";\n    }\n    if (value === this.blendMode) {\n      return;\n    }\n    this.blendMode = value;\n    const mode = this.blendModesMap[value];\n    const gl = this.gl;\n    if (mode.length === 2) {\n      gl.blendFunc(mode[0], mode[1]);\n    } else {\n      gl.blendFuncSeparate(mode[0], mode[1], mode[2], mode[3]);\n    }\n    if (mode.length === 6) {\n      this._blendEq = true;\n      gl.blendEquationSeparate(mode[4], mode[5]);\n    } else if (this._blendEq) {\n      this._blendEq = false;\n      gl.blendEquationSeparate(gl.FUNC_ADD, gl.FUNC_ADD);\n    }\n  }\n  /**\n   * Sets the polygon offset.\n   * @param {number} value - the polygon offset\n   * @param {number} scale - the polygon offset scale\n   */\n  setPolygonOffset(value, scale) {\n    this.gl.polygonOffset(value, scale);\n  }\n  /** Resets all the logic and disables the VAOs. */\n  resetState() {\n    this._glFrontFace = false;\n    this._frontFace = false;\n    this._cullFace = false;\n    this._frontFaceDirty = false;\n    this._invertFrontFace = false;\n    this.gl.frontFace(this.gl.CCW);\n    this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL, false);\n    this.forceState(this.defaultState);\n    this._blendEq = true;\n    this.blendMode = \"\";\n    this.setBlendMode(\"normal\");\n  }\n  /**\n   * Checks to see which updates should be checked based on which settings have been activated.\n   *\n   * For example, if blend is enabled then we should check the blend modes each time the state is changed\n   * or if polygon fill is activated then we need to check if the polygon offset changes.\n   * The idea is that we only check what we have too.\n   * @param func - the checking function to add or remove\n   * @param value - should the check function be added or removed.\n   */\n  _updateCheck(func, value) {\n    const index = this.checks.indexOf(func);\n    if (value && index === -1) {\n      this.checks.push(func);\n    } else if (!value && index !== -1) {\n      this.checks.splice(index, 1);\n    }\n  }\n  /**\n   * A private little wrapper function that we call to check the blend mode.\n   * @param system - the System to perform the state check on\n   * @param state - the state that the blendMode will pulled from\n   */\n  static _checkBlendMode(system, state) {\n    system.setBlendMode(state.blendMode);\n  }\n  /**\n   * A private little wrapper function that we call to check the polygon offset.\n   * @param system - the System to perform the state check on\n   * @param state - the state that the blendMode will pulled from\n   */\n  static _checkPolygonOffset(system, state) {\n    system.setPolygonOffset(1, state.polygonOffset);\n  }\n  /** @ignore */\n  destroy() {\n    this.gl = null;\n    this.checks.length = 0;\n  }\n};\n/** @ignore */\n_GlStateSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"state\"\n};\nlet GlStateSystem = _GlStateSystem;\n\nexport { GlStateSystem };\n//# sourceMappingURL=GlStateSystem.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\n\n\"use strict\";\nfunction mapWebGLBlendModesToPixi(gl) {\n  const blendMap = {};\n  blendMap.normal = [gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.add = [gl.ONE, gl.ONE];\n  blendMap.multiply = [gl.DST_COLOR, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.screen = [gl.ONE, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.none = [0, 0];\n  blendMap[\"normal-npm\"] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_ALPHA, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap[\"add-npm\"] = [gl.SRC_ALPHA, gl.ONE, gl.ONE, gl.ONE];\n  blendMap[\"screen-npm\"] = [gl.SRC_ALPHA, gl.ONE_MINUS_SRC_COLOR, gl.ONE, gl.ONE_MINUS_SRC_ALPHA];\n  blendMap.erase = [gl.ZERO, gl.ONE_MINUS_SRC_ALPHA];\n  const isWebGl2 = !(gl instanceof DOMAdapter.get().getWebGLRenderingContext());\n  if (isWebGl2) {\n    blendMap.min = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.MIN, gl.MIN];\n    blendMap.max = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, gl.MAX, gl.MAX];\n  } else {\n    const ext = gl.getExtension(\"EXT_blend_minmax\");\n    if (ext) {\n      blendMap.min = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, ext.MIN_EXT, ext.MIN_EXT];\n      blendMap.max = [gl.ONE, gl.ONE, gl.ONE, gl.ONE, ext.MAX_EXT, ext.MAX_EXT];\n    }\n  }\n  return blendMap;\n}\n\nexport { mapWebGLBlendModesToPixi };\n//# sourceMappingURL=mapWebGLBlendModesToPixi.mjs.map\n","import { GL_TARGETS, GL_TYPES, GL_FORMATS } from './const.mjs';\n\n\"use strict\";\nclass GlTexture {\n  constructor(texture) {\n    this.target = GL_TARGETS.TEXTURE_2D;\n    this.texture = texture;\n    this.width = -1;\n    this.height = -1;\n    this.type = GL_TYPES.UNSIGNED_BYTE;\n    this.internalFormat = GL_FORMATS.RGBA;\n    this.format = GL_FORMATS.RGBA;\n    this.samplerType = 0;\n  }\n}\n\nexport { GlTexture };\n//# sourceMappingURL=GlTexture.mjs.map\n","\"use strict\";\nconst glUploadBufferImageResource = {\n  id: \"buffer\",\n  upload(source, glTexture, gl) {\n    if (glTexture.width === source.width || glTexture.height === source.height) {\n      gl.texSubImage2D(\n        gl.TEXTURE_2D,\n        0,\n        0,\n        0,\n        source.width,\n        source.height,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    } else {\n      gl.texImage2D(\n        glTexture.target,\n        0,\n        glTexture.internalFormat,\n        source.width,\n        source.height,\n        0,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    }\n    glTexture.width = source.width;\n    glTexture.height = source.height;\n  }\n};\n\nexport { glUploadBufferImageResource };\n//# sourceMappingURL=glUploadBufferImageResource.mjs.map\n","\"use strict\";\nconst compressedFormatMap = {\n  \"bc1-rgba-unorm\": true,\n  \"bc1-rgba-unorm-srgb\": true,\n  \"bc2-rgba-unorm\": true,\n  \"bc2-rgba-unorm-srgb\": true,\n  \"bc3-rgba-unorm\": true,\n  \"bc3-rgba-unorm-srgb\": true,\n  \"bc4-r-unorm\": true,\n  \"bc4-r-snorm\": true,\n  \"bc5-rg-unorm\": true,\n  \"bc5-rg-snorm\": true,\n  \"bc6h-rgb-ufloat\": true,\n  \"bc6h-rgb-float\": true,\n  \"bc7-rgba-unorm\": true,\n  \"bc7-rgba-unorm-srgb\": true,\n  // ETC2 compressed formats usable if \"texture-compression-etc2\" is both\n  // supported by the device/user agent and enabled in requestDevice.\n  \"etc2-rgb8unorm\": true,\n  \"etc2-rgb8unorm-srgb\": true,\n  \"etc2-rgb8a1unorm\": true,\n  \"etc2-rgb8a1unorm-srgb\": true,\n  \"etc2-rgba8unorm\": true,\n  \"etc2-rgba8unorm-srgb\": true,\n  \"eac-r11unorm\": true,\n  \"eac-r11snorm\": true,\n  \"eac-rg11unorm\": true,\n  \"eac-rg11snorm\": true,\n  // ASTC compressed formats usable if \"texture-compression-astc\" is both\n  // supported by the device/user agent and enabled in requestDevice.\n  \"astc-4x4-unorm\": true,\n  \"astc-4x4-unorm-srgb\": true,\n  \"astc-5x4-unorm\": true,\n  \"astc-5x4-unorm-srgb\": true,\n  \"astc-5x5-unorm\": true,\n  \"astc-5x5-unorm-srgb\": true,\n  \"astc-6x5-unorm\": true,\n  \"astc-6x5-unorm-srgb\": true,\n  \"astc-6x6-unorm\": true,\n  \"astc-6x6-unorm-srgb\": true,\n  \"astc-8x5-unorm\": true,\n  \"astc-8x5-unorm-srgb\": true,\n  \"astc-8x6-unorm\": true,\n  \"astc-8x6-unorm-srgb\": true,\n  \"astc-8x8-unorm\": true,\n  \"astc-8x8-unorm-srgb\": true,\n  \"astc-10x5-unorm\": true,\n  \"astc-10x5-unorm-srgb\": true,\n  \"astc-10x6-unorm\": true,\n  \"astc-10x6-unorm-srgb\": true,\n  \"astc-10x8-unorm\": true,\n  \"astc-10x8-unorm-srgb\": true,\n  \"astc-10x10-unorm\": true,\n  \"astc-10x10-unorm-srgb\": true,\n  \"astc-12x10-unorm\": true,\n  \"astc-12x10-unorm-srgb\": true,\n  \"astc-12x12-unorm\": true,\n  \"astc-12x12-unorm-srgb\": true\n};\nconst glUploadCompressedTextureResource = {\n  id: \"compressed\",\n  upload(source, glTexture, gl) {\n    gl.pixelStorei(gl.UNPACK_ALIGNMENT, 4);\n    let mipWidth = source.pixelWidth;\n    let mipHeight = source.pixelHeight;\n    const compressed = !!compressedFormatMap[source.format];\n    for (let i = 0; i < source.resource.length; i++) {\n      const levelBuffer = source.resource[i];\n      if (compressed) {\n        gl.compressedTexImage2D(\n          gl.TEXTURE_2D,\n          i,\n          glTexture.internalFormat,\n          mipWidth,\n          mipHeight,\n          0,\n          levelBuffer\n        );\n      } else {\n        gl.texImage2D(\n          gl.TEXTURE_2D,\n          i,\n          glTexture.internalFormat,\n          mipWidth,\n          mipHeight,\n          0,\n          glTexture.format,\n          glTexture.type,\n          levelBuffer\n        );\n      }\n      mipWidth = Math.max(mipWidth >> 1, 1);\n      mipHeight = Math.max(mipHeight >> 1, 1);\n    }\n  }\n};\n\nexport { glUploadCompressedTextureResource };\n//# sourceMappingURL=glUploadCompressedTextureResource.mjs.map\n","\"use strict\";\nconst glUploadImageResource = {\n  id: \"image\",\n  upload(source, glTexture, gl, webGLVersion) {\n    const glWidth = glTexture.width;\n    const glHeight = glTexture.height;\n    const textureWidth = source.pixelWidth;\n    const textureHeight = source.pixelHeight;\n    const resourceWidth = source.resourceWidth;\n    const resourceHeight = source.resourceHeight;\n    if (resourceWidth < textureWidth || resourceHeight < textureHeight) {\n      if (glWidth !== textureWidth || glHeight !== textureHeight) {\n        gl.texImage2D(\n          glTexture.target,\n          0,\n          glTexture.internalFormat,\n          textureWidth,\n          textureHeight,\n          0,\n          glTexture.format,\n          glTexture.type,\n          null\n        );\n      }\n      if (webGLVersion === 2) {\n        gl.texSubImage2D(\n          gl.TEXTURE_2D,\n          0,\n          0,\n          0,\n          resourceWidth,\n          resourceHeight,\n          glTexture.format,\n          glTexture.type,\n          source.resource\n        );\n      } else {\n        gl.texSubImage2D(\n          gl.TEXTURE_2D,\n          0,\n          0,\n          0,\n          glTexture.format,\n          glTexture.type,\n          source.resource\n        );\n      }\n    } else if (glWidth === textureWidth && glHeight === textureHeight) {\n      gl.texSubImage2D(\n        gl.TEXTURE_2D,\n        0,\n        0,\n        0,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    } else if (webGLVersion === 2) {\n      gl.texImage2D(\n        glTexture.target,\n        0,\n        glTexture.internalFormat,\n        textureWidth,\n        textureHeight,\n        0,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    } else {\n      gl.texImage2D(\n        glTexture.target,\n        0,\n        glTexture.internalFormat,\n        glTexture.format,\n        glTexture.type,\n        source.resource\n      );\n    }\n    glTexture.width = textureWidth;\n    glTexture.height = textureHeight;\n  }\n};\n\nexport { glUploadImageResource };\n//# sourceMappingURL=glUploadImageResource.mjs.map\n","import { glUploadImageResource } from './glUploadImageResource.mjs';\n\n\"use strict\";\nconst glUploadVideoResource = {\n  id: \"video\",\n  upload(source, glTexture, gl, webGLVersion) {\n    if (!source.isValid) {\n      gl.texImage2D(\n        glTexture.target,\n        0,\n        glTexture.internalFormat,\n        1,\n        1,\n        0,\n        glTexture.format,\n        glTexture.type,\n        null\n      );\n      return;\n    }\n    glUploadImageResource.upload(source, glTexture, gl, webGLVersion);\n  }\n};\n\nexport { glUploadVideoResource };\n//# sourceMappingURL=glUploadVideoResource.mjs.map\n","\"use strict\";\nconst scaleModeToGlFilter = {\n  linear: 9729,\n  nearest: 9728\n};\nconst mipmapScaleModeToGlFilter = {\n  linear: {\n    linear: 9987,\n    nearest: 9985\n  },\n  nearest: {\n    linear: 9986,\n    nearest: 9984\n  }\n};\nconst wrapModeToGlAddress = {\n  \"clamp-to-edge\": 33071,\n  repeat: 10497,\n  \"mirror-repeat\": 33648\n};\nconst compareModeToGlCompare = {\n  never: 512,\n  less: 513,\n  equal: 514,\n  \"less-equal\": 515,\n  greater: 516,\n  \"not-equal\": 517,\n  \"greater-equal\": 518,\n  always: 519\n};\n\nexport { compareModeToGlCompare, mipmapScaleModeToGlFilter, scaleModeToGlFilter, wrapModeToGlAddress };\n//# sourceMappingURL=pixiToGlMaps.mjs.map\n","import { wrapModeToGlAddress, scaleModeToGlFilter, mipmapScaleModeToGlFilter, compareModeToGlCompare } from './pixiToGlMaps.mjs';\n\n\"use strict\";\nfunction applyStyleParams(style, gl, mipmaps, anisotropicExt, glFunctionName, firstParam, forceClamp, firstCreation) {\n  const castParam = firstParam;\n  if (!firstCreation || style.addressModeU !== \"repeat\" || style.addressModeV !== \"repeat\" || style.addressModeW !== \"repeat\") {\n    const wrapModeS = wrapModeToGlAddress[forceClamp ? \"clamp-to-edge\" : style.addressModeU];\n    const wrapModeT = wrapModeToGlAddress[forceClamp ? \"clamp-to-edge\" : style.addressModeV];\n    const wrapModeR = wrapModeToGlAddress[forceClamp ? \"clamp-to-edge\" : style.addressModeW];\n    gl[glFunctionName](castParam, gl.TEXTURE_WRAP_S, wrapModeS);\n    gl[glFunctionName](castParam, gl.TEXTURE_WRAP_T, wrapModeT);\n    if (gl.TEXTURE_WRAP_R)\n      gl[glFunctionName](castParam, gl.TEXTURE_WRAP_R, wrapModeR);\n  }\n  if (!firstCreation || style.magFilter !== \"linear\") {\n    gl[glFunctionName](castParam, gl.TEXTURE_MAG_FILTER, scaleModeToGlFilter[style.magFilter]);\n  }\n  if (mipmaps) {\n    if (!firstCreation || style.mipmapFilter !== \"linear\") {\n      const glFilterMode = mipmapScaleModeToGlFilter[style.minFilter][style.mipmapFilter];\n      gl[glFunctionName](castParam, gl.TEXTURE_MIN_FILTER, glFilterMode);\n    }\n  } else {\n    gl[glFunctionName](castParam, gl.TEXTURE_MIN_FILTER, scaleModeToGlFilter[style.minFilter]);\n  }\n  if (anisotropicExt && style.maxAnisotropy > 1) {\n    const level = Math.min(style.maxAnisotropy, gl.getParameter(anisotropicExt.MAX_TEXTURE_MAX_ANISOTROPY_EXT));\n    gl[glFunctionName](castParam, anisotropicExt.TEXTURE_MAX_ANISOTROPY_EXT, level);\n  }\n  if (style.compare) {\n    gl[glFunctionName](castParam, gl.TEXTURE_COMPARE_FUNC, compareModeToGlCompare[style.compare]);\n  }\n}\n\nexport { applyStyleParams };\n//# sourceMappingURL=applyStyleParams.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { Texture } from '../../shared/texture/Texture.mjs';\nimport { GlTexture } from './GlTexture.mjs';\nimport { glUploadBufferImageResource } from './uploaders/glUploadBufferImageResource.mjs';\nimport { glUploadCompressedTextureResource } from './uploaders/glUploadCompressedTextureResource.mjs';\nimport { glUploadImageResource } from './uploaders/glUploadImageResource.mjs';\nimport { glUploadVideoResource } from './uploaders/glUploadVideoResource.mjs';\nimport { applyStyleParams } from './utils/applyStyleParams.mjs';\nimport { mapFormatToGlFormat } from './utils/mapFormatToGlFormat.mjs';\nimport { mapFormatToGlInternalFormat } from './utils/mapFormatToGlInternalFormat.mjs';\nimport { mapFormatToGlType } from './utils/mapFormatToGlType.mjs';\nimport './utils/unpremultiplyAlpha.mjs';\n\n\"use strict\";\nconst BYTES_PER_PIXEL = 4;\nclass GlTextureSystem {\n  constructor(renderer) {\n    this.managedTextures = [];\n    this._glTextures = /* @__PURE__ */ Object.create(null);\n    this._glSamplers = /* @__PURE__ */ Object.create(null);\n    this._boundTextures = [];\n    this._activeTextureLocation = -1;\n    this._boundSamplers = /* @__PURE__ */ Object.create(null);\n    this._uploads = {\n      image: glUploadImageResource,\n      buffer: glUploadBufferImageResource,\n      video: glUploadVideoResource,\n      compressed: glUploadCompressedTextureResource\n    };\n    this._premultiplyAlpha = false;\n    // TODO - separate samplers will be a cool thing to add, but not right now!\n    this._useSeparateSamplers = false;\n    this._renderer = renderer;\n    this._renderer.renderableGC.addManagedHash(this, \"_glTextures\");\n    this._renderer.renderableGC.addManagedHash(this, \"_glSamplers\");\n  }\n  contextChange(gl) {\n    this._gl = gl;\n    if (!this._mapFormatToInternalFormat) {\n      this._mapFormatToInternalFormat = mapFormatToGlInternalFormat(gl, this._renderer.context.extensions);\n      this._mapFormatToType = mapFormatToGlType(gl);\n      this._mapFormatToFormat = mapFormatToGlFormat(gl);\n    }\n    this._glTextures = /* @__PURE__ */ Object.create(null);\n    this._glSamplers = /* @__PURE__ */ Object.create(null);\n    this._boundSamplers = /* @__PURE__ */ Object.create(null);\n    this._premultiplyAlpha = false;\n    for (let i = 0; i < 16; i++) {\n      this.bind(Texture.EMPTY, i);\n    }\n  }\n  /**\n   * Initializes a texture source, if it has already been initialized nothing will happen.\n   * @param source - The texture source to initialize.\n   * @returns The initialized texture source.\n   */\n  initSource(source) {\n    this.bind(source);\n  }\n  bind(texture, location = 0) {\n    const source = texture.source;\n    if (texture) {\n      this.bindSource(source, location);\n      if (this._useSeparateSamplers) {\n        this._bindSampler(source.style, location);\n      }\n    } else {\n      this.bindSource(null, location);\n      if (this._useSeparateSamplers) {\n        this._bindSampler(null, location);\n      }\n    }\n  }\n  bindSource(source, location = 0) {\n    const gl = this._gl;\n    source._touched = this._renderer.textureGC.count;\n    if (this._boundTextures[location] !== source) {\n      this._boundTextures[location] = source;\n      this._activateLocation(location);\n      source || (source = Texture.EMPTY.source);\n      const glTexture = this.getGlSource(source);\n      gl.bindTexture(glTexture.target, glTexture.texture);\n    }\n  }\n  _bindSampler(style, location = 0) {\n    const gl = this._gl;\n    if (!style) {\n      this._boundSamplers[location] = null;\n      gl.bindSampler(location, null);\n      return;\n    }\n    const sampler = this._getGlSampler(style);\n    if (this._boundSamplers[location] !== sampler) {\n      this._boundSamplers[location] = sampler;\n      gl.bindSampler(location, sampler);\n    }\n  }\n  unbind(texture) {\n    const source = texture.source;\n    const boundTextures = this._boundTextures;\n    const gl = this._gl;\n    for (let i = 0; i < boundTextures.length; i++) {\n      if (boundTextures[i] === source) {\n        this._activateLocation(i);\n        const glTexture = this.getGlSource(source);\n        gl.bindTexture(glTexture.target, null);\n        boundTextures[i] = null;\n      }\n    }\n  }\n  _activateLocation(location) {\n    if (this._activeTextureLocation !== location) {\n      this._activeTextureLocation = location;\n      this._gl.activeTexture(this._gl.TEXTURE0 + location);\n    }\n  }\n  _initSource(source) {\n    const gl = this._gl;\n    const glTexture = new GlTexture(gl.createTexture());\n    glTexture.type = this._mapFormatToType[source.format];\n    glTexture.internalFormat = this._mapFormatToInternalFormat[source.format];\n    glTexture.format = this._mapFormatToFormat[source.format];\n    if (source.autoGenerateMipmaps && (this._renderer.context.supports.nonPowOf2mipmaps || source.isPowerOfTwo)) {\n      const biggestDimension = Math.max(source.width, source.height);\n      source.mipLevelCount = Math.floor(Math.log2(biggestDimension)) + 1;\n    }\n    this._glTextures[source.uid] = glTexture;\n    if (!this.managedTextures.includes(source)) {\n      source.on(\"update\", this.onSourceUpdate, this);\n      source.on(\"resize\", this.onSourceUpdate, this);\n      source.on(\"styleChange\", this.onStyleChange, this);\n      source.on(\"destroy\", this.onSourceDestroy, this);\n      source.on(\"unload\", this.onSourceUnload, this);\n      source.on(\"updateMipmaps\", this.onUpdateMipmaps, this);\n      this.managedTextures.push(source);\n    }\n    this.onSourceUpdate(source);\n    this.updateStyle(source, false);\n    return glTexture;\n  }\n  onStyleChange(source) {\n    this.updateStyle(source, false);\n  }\n  updateStyle(source, firstCreation) {\n    const gl = this._gl;\n    const glTexture = this.getGlSource(source);\n    gl.bindTexture(gl.TEXTURE_2D, glTexture.texture);\n    this._boundTextures[this._activeTextureLocation] = source;\n    applyStyleParams(\n      source.style,\n      gl,\n      source.mipLevelCount > 1,\n      this._renderer.context.extensions.anisotropicFiltering,\n      \"texParameteri\",\n      gl.TEXTURE_2D,\n      // will force a clamp to edge if the texture is not a power of two\n      !this._renderer.context.supports.nonPowOf2wrapping && !source.isPowerOfTwo,\n      firstCreation\n    );\n  }\n  onSourceUnload(source) {\n    const glTexture = this._glTextures[source.uid];\n    if (!glTexture)\n      return;\n    this.unbind(source);\n    this._glTextures[source.uid] = null;\n    this._gl.deleteTexture(glTexture.texture);\n  }\n  onSourceUpdate(source) {\n    const gl = this._gl;\n    const glTexture = this.getGlSource(source);\n    gl.bindTexture(gl.TEXTURE_2D, glTexture.texture);\n    this._boundTextures[this._activeTextureLocation] = source;\n    const premultipliedAlpha = source.alphaMode === \"premultiply-alpha-on-upload\";\n    if (this._premultiplyAlpha !== premultipliedAlpha) {\n      this._premultiplyAlpha = premultipliedAlpha;\n      gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, premultipliedAlpha);\n    }\n    if (this._uploads[source.uploadMethodId]) {\n      this._uploads[source.uploadMethodId].upload(source, glTexture, gl, this._renderer.context.webGLVersion);\n    } else {\n      gl.texImage2D(gl.TEXTURE_2D, 0, gl.RGBA, source.pixelWidth, source.pixelHeight, 0, gl.RGBA, gl.UNSIGNED_BYTE, null);\n    }\n    if (source.autoGenerateMipmaps && source.mipLevelCount > 1) {\n      this.onUpdateMipmaps(source, false);\n    }\n  }\n  onUpdateMipmaps(source, bind = true) {\n    if (bind)\n      this.bindSource(source, 0);\n    const glTexture = this.getGlSource(source);\n    this._gl.generateMipmap(glTexture.target);\n  }\n  onSourceDestroy(source) {\n    source.off(\"destroy\", this.onSourceDestroy, this);\n    source.off(\"update\", this.onSourceUpdate, this);\n    source.off(\"resize\", this.onSourceUpdate, this);\n    source.off(\"unload\", this.onSourceUnload, this);\n    source.off(\"styleChange\", this.onStyleChange, this);\n    source.off(\"updateMipmaps\", this.onUpdateMipmaps, this);\n    this.managedTextures.splice(this.managedTextures.indexOf(source), 1);\n    this.onSourceUnload(source);\n  }\n  _initSampler(style) {\n    const gl = this._gl;\n    const glSampler = this._gl.createSampler();\n    this._glSamplers[style._resourceId] = glSampler;\n    applyStyleParams(\n      style,\n      gl,\n      this._boundTextures[this._activeTextureLocation].mipLevelCount > 1,\n      this._renderer.context.extensions.anisotropicFiltering,\n      \"samplerParameteri\",\n      glSampler,\n      false,\n      true\n    );\n    return this._glSamplers[style._resourceId];\n  }\n  _getGlSampler(sampler) {\n    return this._glSamplers[sampler._resourceId] || this._initSampler(sampler);\n  }\n  getGlSource(source) {\n    return this._glTextures[source.uid] || this._initSource(source);\n  }\n  generateCanvas(texture) {\n    const { pixels, width, height } = this.getPixels(texture);\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = width;\n    canvas.height = height;\n    const ctx = canvas.getContext(\"2d\");\n    if (ctx) {\n      const imageData = ctx.createImageData(width, height);\n      imageData.data.set(pixels);\n      ctx.putImageData(imageData, 0, 0);\n    }\n    return canvas;\n  }\n  getPixels(texture) {\n    const resolution = texture.source.resolution;\n    const frame = texture.frame;\n    const width = Math.max(Math.round(frame.width * resolution), 1);\n    const height = Math.max(Math.round(frame.height * resolution), 1);\n    const pixels = new Uint8Array(BYTES_PER_PIXEL * width * height);\n    const renderer = this._renderer;\n    const renderTarget = renderer.renderTarget.getRenderTarget(texture);\n    const glRenterTarget = renderer.renderTarget.getGpuRenderTarget(renderTarget);\n    const gl = renderer.gl;\n    gl.bindFramebuffer(gl.FRAMEBUFFER, glRenterTarget.resolveTargetFramebuffer);\n    gl.readPixels(\n      Math.round(frame.x * resolution),\n      Math.round(frame.y * resolution),\n      width,\n      height,\n      gl.RGBA,\n      gl.UNSIGNED_BYTE,\n      pixels\n    );\n    if (false) {\n      unpremultiplyAlpha(pixels);\n    }\n    return { pixels: new Uint8ClampedArray(pixels.buffer), width, height };\n  }\n  destroy() {\n    this.managedTextures.slice().forEach((source) => this.onSourceDestroy(source));\n    this.managedTextures = null;\n    this._glTextures = null;\n    this._glSamplers = null;\n    this._boundTextures = null;\n    this._boundSamplers = null;\n    this._mapFormatToInternalFormat = null;\n    this._mapFormatToType = null;\n    this._mapFormatToFormat = null;\n    this._uploads = null;\n    this._renderer = null;\n  }\n  resetState() {\n    this._activeTextureLocation = -1;\n    this._boundTextures.fill(Texture.EMPTY.source);\n    this._boundSamplers = /* @__PURE__ */ Object.create(null);\n    const gl = this._gl;\n    this._premultiplyAlpha = false;\n    gl.pixelStorei(gl.UNPACK_PREMULTIPLY_ALPHA_WEBGL, this._premultiplyAlpha);\n  }\n}\n/** @ignore */\nGlTextureSystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem\n  ],\n  name: \"texture\"\n};\n\nexport { GlTextureSystem };\n//# sourceMappingURL=GlTextureSystem.mjs.map\n","import { DOMAdapter } from '../../../../../environment/adapter.mjs';\n\n\"use strict\";\nfunction mapFormatToGlInternalFormat(gl, extensions) {\n  let srgb = {};\n  let bgra8unorm = gl.RGBA;\n  if (!(gl instanceof DOMAdapter.get().getWebGLRenderingContext())) {\n    srgb = {\n      \"rgba8unorm-srgb\": gl.SRGB8_ALPHA8,\n      \"bgra8unorm-srgb\": gl.SRGB8_ALPHA8\n    };\n    bgra8unorm = gl.RGBA8;\n  } else if (extensions.srgb) {\n    srgb = {\n      \"rgba8unorm-srgb\": extensions.srgb.SRGB8_ALPHA8_EXT,\n      \"bgra8unorm-srgb\": extensions.srgb.SRGB8_ALPHA8_EXT\n    };\n  }\n  return {\n    // 8-bit formats\n    r8unorm: gl.R8,\n    r8snorm: gl.R8_SNORM,\n    r8uint: gl.R8UI,\n    r8sint: gl.R8I,\n    // 16-bit formats\n    r16uint: gl.R16UI,\n    r16sint: gl.R16I,\n    r16float: gl.R16F,\n    rg8unorm: gl.RG8,\n    rg8snorm: gl.RG8_SNORM,\n    rg8uint: gl.RG8UI,\n    rg8sint: gl.RG8I,\n    // 32-bit formats\n    r32uint: gl.R32UI,\n    r32sint: gl.R32I,\n    r32float: gl.R32F,\n    rg16uint: gl.RG16UI,\n    rg16sint: gl.RG16I,\n    rg16float: gl.RG16F,\n    rgba8unorm: gl.RGBA,\n    ...srgb,\n    // Packed 32-bit formats\n    rgba8snorm: gl.RGBA8_SNORM,\n    rgba8uint: gl.RGBA8UI,\n    rgba8sint: gl.RGBA8I,\n    bgra8unorm,\n    rgb9e5ufloat: gl.RGB9_E5,\n    rgb10a2unorm: gl.RGB10_A2,\n    rg11b10ufloat: gl.R11F_G11F_B10F,\n    // 64-bit formats\n    rg32uint: gl.RG32UI,\n    rg32sint: gl.RG32I,\n    rg32float: gl.RG32F,\n    rgba16uint: gl.RGBA16UI,\n    rgba16sint: gl.RGBA16I,\n    rgba16float: gl.RGBA16F,\n    // 128-bit formats\n    rgba32uint: gl.RGBA32UI,\n    rgba32sint: gl.RGBA32I,\n    rgba32float: gl.RGBA32F,\n    // Depth/stencil formats\n    stencil8: gl.STENCIL_INDEX8,\n    depth16unorm: gl.DEPTH_COMPONENT16,\n    depth24plus: gl.DEPTH_COMPONENT24,\n    \"depth24plus-stencil8\": gl.DEPTH24_STENCIL8,\n    depth32float: gl.DEPTH_COMPONENT32F,\n    \"depth32float-stencil8\": gl.DEPTH32F_STENCIL8,\n    // Compressed formats\n    ...extensions.s3tc ? {\n      \"bc1-rgba-unorm\": extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT1_EXT,\n      \"bc2-rgba-unorm\": extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT3_EXT,\n      \"bc3-rgba-unorm\": extensions.s3tc.COMPRESSED_RGBA_S3TC_DXT5_EXT\n    } : {},\n    ...extensions.s3tc_sRGB ? {\n      \"bc1-rgba-unorm-srgb\": extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,\n      \"bc2-rgba-unorm-srgb\": extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,\n      \"bc3-rgba-unorm-srgb\": extensions.s3tc_sRGB.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT\n    } : {},\n    ...extensions.rgtc ? {\n      \"bc4-r-unorm\": extensions.rgtc.COMPRESSED_RED_RGTC1_EXT,\n      \"bc4-r-snorm\": extensions.rgtc.COMPRESSED_SIGNED_RED_RGTC1_EXT,\n      \"bc5-rg-unorm\": extensions.rgtc.COMPRESSED_RED_GREEN_RGTC2_EXT,\n      \"bc5-rg-snorm\": extensions.rgtc.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT\n    } : {},\n    ...extensions.bptc ? {\n      \"bc6h-rgb-float\": extensions.bptc.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT,\n      \"bc6h-rgb-ufloat\": extensions.bptc.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT,\n      \"bc7-rgba-unorm\": extensions.bptc.COMPRESSED_RGBA_BPTC_UNORM_EXT,\n      \"bc7-rgba-unorm-srgb\": extensions.bptc.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT\n    } : {},\n    ...extensions.etc ? {\n      \"etc2-rgb8unorm\": extensions.etc.COMPRESSED_RGB8_ETC2,\n      \"etc2-rgb8unorm-srgb\": extensions.etc.COMPRESSED_SRGB8_ETC2,\n      \"etc2-rgb8a1unorm\": extensions.etc.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n      \"etc2-rgb8a1unorm-srgb\": extensions.etc.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2,\n      \"etc2-rgba8unorm\": extensions.etc.COMPRESSED_RGBA8_ETC2_EAC,\n      \"etc2-rgba8unorm-srgb\": extensions.etc.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC,\n      \"eac-r11unorm\": extensions.etc.COMPRESSED_R11_EAC,\n      // 'eac-r11snorm'\n      \"eac-rg11unorm\": extensions.etc.COMPRESSED_SIGNED_RG11_EAC\n      // 'eac-rg11snorm'\n    } : {},\n    ...extensions.astc ? {\n      \"astc-4x4-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_4x4_KHR,\n      \"astc-4x4-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR,\n      \"astc-5x4-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_5x4_KHR,\n      \"astc-5x4-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR,\n      \"astc-5x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_5x5_KHR,\n      \"astc-5x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR,\n      \"astc-6x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_6x5_KHR,\n      \"astc-6x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR,\n      \"astc-6x6-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_6x6_KHR,\n      \"astc-6x6-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR,\n      \"astc-8x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_8x5_KHR,\n      \"astc-8x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR,\n      \"astc-8x6-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_8x6_KHR,\n      \"astc-8x6-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR,\n      \"astc-8x8-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_8x8_KHR,\n      \"astc-8x8-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR,\n      \"astc-10x5-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x5_KHR,\n      \"astc-10x5-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR,\n      \"astc-10x6-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x6_KHR,\n      \"astc-10x6-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR,\n      \"astc-10x8-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x8_KHR,\n      \"astc-10x8-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR,\n      \"astc-10x10-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_10x10_KHR,\n      \"astc-10x10-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR,\n      \"astc-12x10-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_12x10_KHR,\n      \"astc-12x10-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR,\n      \"astc-12x12-unorm\": extensions.astc.COMPRESSED_RGBA_ASTC_12x12_KHR,\n      \"astc-12x12-unorm-srgb\": extensions.astc.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR\n    } : {}\n  };\n}\n\nexport { mapFormatToGlInternalFormat };\n//# sourceMappingURL=mapFormatToGlInternalFormat.mjs.map\n","\"use strict\";\nfunction mapFormatToGlType(gl) {\n  return {\n    // 8-bit formats\n    r8unorm: gl.UNSIGNED_BYTE,\n    r8snorm: gl.BYTE,\n    r8uint: gl.UNSIGNED_BYTE,\n    r8sint: gl.BYTE,\n    // 16-bit formats\n    r16uint: gl.UNSIGNED_SHORT,\n    r16sint: gl.SHORT,\n    r16float: gl.HALF_FLOAT,\n    rg8unorm: gl.UNSIGNED_BYTE,\n    rg8snorm: gl.BYTE,\n    rg8uint: gl.UNSIGNED_BYTE,\n    rg8sint: gl.BYTE,\n    // 32-bit formats\n    r32uint: gl.UNSIGNED_INT,\n    r32sint: gl.INT,\n    r32float: gl.FLOAT,\n    rg16uint: gl.UNSIGNED_SHORT,\n    rg16sint: gl.SHORT,\n    rg16float: gl.HALF_FLOAT,\n    rgba8unorm: gl.UNSIGNED_BYTE,\n    \"rgba8unorm-srgb\": gl.UNSIGNED_BYTE,\n    // Packed 32-bit formats\n    rgba8snorm: gl.BYTE,\n    rgba8uint: gl.UNSIGNED_BYTE,\n    rgba8sint: gl.BYTE,\n    bgra8unorm: gl.UNSIGNED_BYTE,\n    \"bgra8unorm-srgb\": gl.UNSIGNED_BYTE,\n    rgb9e5ufloat: gl.UNSIGNED_INT_5_9_9_9_REV,\n    rgb10a2unorm: gl.UNSIGNED_INT_2_10_10_10_REV,\n    rg11b10ufloat: gl.UNSIGNED_INT_10F_11F_11F_REV,\n    // 64-bit formats\n    rg32uint: gl.UNSIGNED_INT,\n    rg32sint: gl.INT,\n    rg32float: gl.FLOAT,\n    rgba16uint: gl.UNSIGNED_SHORT,\n    rgba16sint: gl.SHORT,\n    rgba16float: gl.HALF_FLOAT,\n    // 128-bit formats\n    rgba32uint: gl.UNSIGNED_INT,\n    rgba32sint: gl.INT,\n    rgba32float: gl.FLOAT,\n    // Depth/stencil formats\n    stencil8: gl.UNSIGNED_BYTE,\n    depth16unorm: gl.UNSIGNED_SHORT,\n    depth24plus: gl.UNSIGNED_INT,\n    \"depth24plus-stencil8\": gl.UNSIGNED_INT_24_8,\n    depth32float: gl.FLOAT,\n    \"depth32float-stencil8\": gl.FLOAT_32_UNSIGNED_INT_24_8_REV\n  };\n}\n\nexport { mapFormatToGlType };\n//# sourceMappingURL=mapFormatToGlType.mjs.map\n","\"use strict\";\nfunction mapFormatToGlFormat(gl) {\n  return {\n    // 8-bit formats\n    r8unorm: gl.RED,\n    r8snorm: gl.RED,\n    r8uint: gl.RED,\n    r8sint: gl.RED,\n    // 16-bit formats\n    r16uint: gl.RED,\n    r16sint: gl.RED,\n    r16float: gl.RED,\n    rg8unorm: gl.RG,\n    rg8snorm: gl.RG,\n    rg8uint: gl.RG,\n    rg8sint: gl.RG,\n    // 32-bit formats\n    r32uint: gl.RED,\n    r32sint: gl.RED,\n    r32float: gl.RED,\n    rg16uint: gl.RG,\n    rg16sint: gl.RG,\n    rg16float: gl.RG,\n    rgba8unorm: gl.RGBA,\n    \"rgba8unorm-srgb\": gl.RGBA,\n    // Packed 32-bit formats\n    rgba8snorm: gl.RGBA,\n    rgba8uint: gl.RGBA,\n    rgba8sint: gl.RGBA,\n    bgra8unorm: gl.RGBA,\n    \"bgra8unorm-srgb\": gl.RGBA,\n    rgb9e5ufloat: gl.RGB,\n    rgb10a2unorm: gl.RGBA,\n    rg11b10ufloat: gl.RGB,\n    // 64-bit formats\n    rg32uint: gl.RG,\n    rg32sint: gl.RG,\n    rg32float: gl.RG,\n    rgba16uint: gl.RGBA,\n    rgba16sint: gl.RGBA,\n    rgba16float: gl.RGBA,\n    // 128-bit formats\n    rgba32uint: gl.RGBA,\n    rgba32sint: gl.RGBA,\n    rgba32float: gl.RGBA,\n    // Depth/stencil formats\n    stencil8: gl.STENCIL_INDEX8,\n    depth16unorm: gl.DEPTH_COMPONENT,\n    depth24plus: gl.DEPTH_COMPONENT,\n    \"depth24plus-stencil8\": gl.DEPTH_STENCIL,\n    depth32float: gl.DEPTH_COMPONENT,\n    \"depth32float-stencil8\": gl.DEPTH_STENCIL\n  };\n}\n\nexport { mapFormatToGlFormat };\n//# sourceMappingURL=mapFormatToGlFormat.mjs.map\n","import { extensions, ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GlGraphicsAdaptor } from '../../../scene/graphics/gl/GlGraphicsAdaptor.mjs';\nimport { GlMeshAdaptor } from '../../../scene/mesh/gl/GlMeshAdaptor.mjs';\nimport { GlBatchAdaptor } from '../../batcher/gl/GlBatchAdaptor.mjs';\nimport { AbstractRenderer } from '../shared/system/AbstractRenderer.mjs';\nimport { SharedSystems, SharedRenderPipes } from '../shared/system/SharedSystems.mjs';\nimport { RendererType } from '../types.mjs';\nimport { GlBufferSystem } from './buffer/GlBufferSystem.mjs';\nimport { GlContextSystem } from './context/GlContextSystem.mjs';\nimport { GlGeometrySystem } from './geometry/GlGeometrySystem.mjs';\nimport { GlBackBufferSystem } from './GlBackBufferSystem.mjs';\nimport { GlColorMaskSystem } from './GlColorMaskSystem.mjs';\nimport { GlEncoderSystem } from './GlEncoderSystem.mjs';\nimport { GlLimitsSystem } from './GlLimitsSystem.mjs';\nimport { GlStencilSystem } from './GlStencilSystem.mjs';\nimport { GlUboSystem } from './GlUboSystem.mjs';\nimport { GlRenderTargetSystem } from './renderTarget/GlRenderTargetSystem.mjs';\nimport { GlShaderSystem } from './shader/GlShaderSystem.mjs';\nimport { GlUniformGroupSystem } from './shader/GlUniformGroupSystem.mjs';\nimport { GlStateSystem } from './state/GlStateSystem.mjs';\nimport { GlTextureSystem } from './texture/GlTextureSystem.mjs';\n\n\"use strict\";\nconst DefaultWebGLSystems = [\n  ...SharedSystems,\n  GlUboSystem,\n  GlBackBufferSystem,\n  GlContextSystem,\n  GlLimitsSystem,\n  GlBufferSystem,\n  GlTextureSystem,\n  GlRenderTargetSystem,\n  GlGeometrySystem,\n  GlUniformGroupSystem,\n  GlShaderSystem,\n  GlEncoderSystem,\n  GlStateSystem,\n  GlStencilSystem,\n  GlColorMaskSystem\n];\nconst DefaultWebGLPipes = [...SharedRenderPipes];\nconst DefaultWebGLAdapters = [GlBatchAdaptor, GlMeshAdaptor, GlGraphicsAdaptor];\nconst systems = [];\nconst renderPipes = [];\nconst renderPipeAdaptors = [];\nextensions.handleByNamedList(ExtensionType.WebGLSystem, systems);\nextensions.handleByNamedList(ExtensionType.WebGLPipes, renderPipes);\nextensions.handleByNamedList(ExtensionType.WebGLPipesAdaptor, renderPipeAdaptors);\nextensions.add(...DefaultWebGLSystems, ...DefaultWebGLPipes, ...DefaultWebGLAdapters);\nclass WebGLRenderer extends AbstractRenderer {\n  constructor() {\n    const systemConfig = {\n      name: \"webgl\",\n      type: RendererType.WEBGL,\n      systems,\n      renderPipes,\n      renderPipeAdaptors\n    };\n    super(systemConfig);\n  }\n}\n\nexport { WebGLRenderer };\n//# sourceMappingURL=WebGLRenderer.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { nextPow2 } from '../../../../maths/misc/pow2.mjs';\nimport { GlobalResourceRegistry } from '../../../../utils/pool/GlobalResourceRegistry.mjs';\n\n\"use strict\";\nclass CanvasPoolClass {\n  constructor(canvasOptions) {\n    this._canvasPool = /* @__PURE__ */ Object.create(null);\n    this.canvasOptions = canvasOptions || {};\n    this.enableFullScreen = false;\n  }\n  /**\n   * Creates texture with params that were specified in pool constructor.\n   * @param pixelWidth - Width of texture in pixels.\n   * @param pixelHeight - Height of texture in pixels.\n   */\n  _createCanvasAndContext(pixelWidth, pixelHeight) {\n    const canvas = DOMAdapter.get().createCanvas();\n    canvas.width = pixelWidth;\n    canvas.height = pixelHeight;\n    const context = canvas.getContext(\"2d\");\n    return { canvas, context };\n  }\n  /**\n   * Gets a Power-of-Two render texture or fullScreen texture\n   * @param minWidth - The minimum width of the render texture.\n   * @param minHeight - The minimum height of the render texture.\n   * @param resolution - The resolution of the render texture.\n   * @returns The new render texture.\n   */\n  getOptimalCanvasAndContext(minWidth, minHeight, resolution = 1) {\n    minWidth = Math.ceil(minWidth * resolution - 1e-6);\n    minHeight = Math.ceil(minHeight * resolution - 1e-6);\n    minWidth = nextPow2(minWidth);\n    minHeight = nextPow2(minHeight);\n    const key = (minWidth << 17) + (minHeight << 1);\n    if (!this._canvasPool[key]) {\n      this._canvasPool[key] = [];\n    }\n    let canvasAndContext = this._canvasPool[key].pop();\n    if (!canvasAndContext) {\n      canvasAndContext = this._createCanvasAndContext(minWidth, minHeight);\n    }\n    return canvasAndContext;\n  }\n  /**\n   * Place a render texture back into the pool.\n   * @param canvasAndContext\n   */\n  returnCanvasAndContext(canvasAndContext) {\n    const canvas = canvasAndContext.canvas;\n    const { width, height } = canvas;\n    const key = (width << 17) + (height << 1);\n    canvasAndContext.context.resetTransform();\n    canvasAndContext.context.clearRect(0, 0, width, height);\n    this._canvasPool[key].push(canvasAndContext);\n  }\n  clear() {\n    this._canvasPool = {};\n  }\n}\nconst CanvasPool = new CanvasPoolClass();\nGlobalResourceRegistry.register(CanvasPool);\n\nexport { CanvasPool, CanvasPoolClass };\n//# sourceMappingURL=CanvasPool.mjs.map\n","\"use strict\";\nclass SystemRunner {\n  /**\n   * @param name - The function name that will be executed on the listeners added to this Runner.\n   */\n  constructor(name) {\n    this.items = [];\n    this._name = name;\n  }\n  /* jsdoc/check-param-names */\n  /**\n   * Dispatch/Broadcast Runner to all listeners added to the queue.\n   * @param {...any} params - (optional) parameters to pass to each listener\n   */\n  /* jsdoc/check-param-names */\n  emit(a0, a1, a2, a3, a4, a5, a6, a7) {\n    const { name, items } = this;\n    for (let i = 0, len = items.length; i < len; i++) {\n      items[i][name](a0, a1, a2, a3, a4, a5, a6, a7);\n    }\n    return this;\n  }\n  /**\n   * Add a listener to the Runner\n   *\n   * Runners do not need to have scope or functions passed to them.\n   * All that is required is to pass the listening object and ensure that it has contains a function that has the same name\n   * as the name provided to the Runner when it was created.\n   *\n   * Eg A listener passed to this Runner will require a 'complete' function.\n   *\n   * ```ts\n   * import { Runner } from 'pixi.js';\n   *\n   * const complete = new Runner('complete');\n   * ```\n   *\n   * The scope used will be the object itself.\n   * @param {any} item - The object that will be listening.\n   */\n  add(item) {\n    if (item[this._name]) {\n      this.remove(item);\n      this.items.push(item);\n    }\n    return this;\n  }\n  /**\n   * Remove a single listener from the dispatch queue.\n   * @param {any} item - The listener that you would like to remove.\n   */\n  remove(item) {\n    const index = this.items.indexOf(item);\n    if (index !== -1) {\n      this.items.splice(index, 1);\n    }\n    return this;\n  }\n  /**\n   * Check to see if the listener is already in the Runner\n   * @param {any} item - The listener that you would like to check.\n   */\n  contains(item) {\n    return this.items.indexOf(item) !== -1;\n  }\n  /** Remove all listeners from the Runner */\n  removeAll() {\n    this.items.length = 0;\n    return this;\n  }\n  /** Remove all references, don't use after this. */\n  destroy() {\n    this.removeAll();\n    this.items = null;\n    this._name = null;\n  }\n  /**\n   * `true` if there are no this Runner contains no listeners\n   * @readonly\n   */\n  get empty() {\n    return this.items.length === 0;\n  }\n  /**\n   * The name of the runner.\n   * @readonly\n   */\n  get name() {\n    return this._name;\n  }\n}\n\nexport { SystemRunner };\n//# sourceMappingURL=SystemRunner.mjs.map\n","var _typeof = require(\"./typeof.js\")[\"default\"];\nvar toPrimitive = require(\"./toPrimitive.js\");\nfunction toPropertyKey(t) {\n  var i = toPrimitive(t, \"string\");\n  return \"symbol\" == _typeof(i) ? i : i + \"\";\n}\nmodule.exports = toPropertyKey, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\nmodule.exports = _nonIterableRest, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","// data can be any array-like object.  It just needs to support .length, .slice, and an element getter []\n\nfunction parseMidi(data) {\n  var p = new Parser(data)\n\n  var headerChunk = p.readChunk()\n  if (headerChunk.id != 'MThd')\n    throw \"Bad MIDI file.  Expected 'MHdr', got: '\" + headerChunk.id + \"'\"\n  var header = parseHeader(headerChunk.data)\n\n  var tracks = []\n  for (var i=0; !p.eof() && i < header.numTracks; i++) {\n    var trackChunk = p.readChunk()\n    if (trackChunk.id != 'MTrk')\n      throw \"Bad MIDI file.  Expected 'MTrk', got: '\" + trackChunk.id + \"'\"\n    var track = parseTrack(trackChunk.data)\n    tracks.push(track)\n  }\n\n  return {\n    header: header,\n    tracks: tracks\n  }\n}\n\n\nfunction parseHeader(data) {\n  var p = new Parser(data)\n\n  var format = p.readUInt16()\n  var numTracks = p.readUInt16()\n\n  var result = {\n    format: format,\n    numTracks: numTracks\n  }\n\n  var timeDivision = p.readUInt16()\n  if (timeDivision & 0x8000) {\n    result.framesPerSecond = 0x100 - (timeDivision >> 8)\n    result.ticksPerFrame = timeDivision & 0xFF\n  } else {\n    result.ticksPerBeat = timeDivision\n  }\n\n  return result\n}\n\nfunction parseTrack(data) {\n  var p = new Parser(data)\n\n  var events = []\n  while (!p.eof()) {\n    var event = readEvent()\n    events.push(event)\n  }\n\n  return events\n\n  var lastEventTypeByte = null\n\n  function readEvent() {\n    var event = {}\n    event.deltaTime = p.readVarInt()\n\n    var eventTypeByte = p.readUInt8()\n\n    if ((eventTypeByte & 0xf0) === 0xf0) {\n      // system / meta event\n      if (eventTypeByte === 0xff) {\n        // meta event\n        event.meta = true\n        var metatypeByte = p.readUInt8()\n        var length = p.readVarInt()\n        switch (metatypeByte) {\n          case 0x00:\n            event.type = 'sequenceNumber'\n            if (length !== 2) throw \"Expected length for sequenceNumber event is 2, got \" + length\n            event.number = p.readUInt16()\n            return event\n          case 0x01:\n            event.type = 'text'\n            event.text = p.readString(length)\n            return event\n          case 0x02:\n            event.type = 'copyrightNotice'\n            event.text = p.readString(length)\n            return event\n          case 0x03:\n            event.type = 'trackName'\n            event.text = p.readString(length)\n            return event\n          case 0x04:\n            event.type = 'instrumentName'\n            event.text = p.readString(length)\n            return event\n          case 0x05:\n            event.type = 'lyrics'\n            event.text = p.readString(length)\n            return event\n          case 0x06:\n            event.type = 'marker'\n            event.text = p.readString(length)\n            return event\n          case 0x07:\n            event.type = 'cuePoint'\n            event.text = p.readString(length)\n            return event\n          case 0x20:\n            event.type = 'channelPrefix'\n            if (length != 1) throw \"Expected length for channelPrefix event is 1, got \" + length\n            event.channel = p.readUInt8()\n            return event\n          case 0x21:\n            event.type = 'portPrefix'\n            if (length != 1) throw \"Expected length for portPrefix event is 1, got \" + length\n            event.port = p.readUInt8()\n            return event\n          case 0x2f:\n            event.type = 'endOfTrack'\n            if (length != 0) throw \"Expected length for endOfTrack event is 0, got \" + length\n            return event\n          case 0x51:\n            event.type = 'setTempo';\n            if (length != 3) throw \"Expected length for setTempo event is 3, got \" + length\n            event.microsecondsPerBeat = p.readUInt24()\n            return event\n          case 0x54:\n            event.type = 'smpteOffset';\n            if (length != 5) throw \"Expected length for smpteOffset event is 5, got \" + length\n            var hourByte = p.readUInt8()\n            var FRAME_RATES = { 0x00: 24, 0x20: 25, 0x40: 29, 0x60: 30 }\n            event.frameRate = FRAME_RATES[hourByte & 0x60]\n            event.hour = hourByte & 0x1f\n            event.min = p.readUInt8()\n            event.sec = p.readUInt8()\n            event.frame = p.readUInt8()\n            event.subFrame = p.readUInt8()\n            return event\n          case 0x58:\n            event.type = 'timeSignature'\n            if (length != 2 && length != 4) throw \"Expected length for timeSignature event is 4 or 2, got \" + length\n            event.numerator = p.readUInt8()\n            event.denominator = (1 << p.readUInt8())\n            if (length === 4) {\n              event.metronome = p.readUInt8()\n              event.thirtyseconds = p.readUInt8()\n            } else {\n              event.metronome = 0x24\n              event.thirtyseconds = 0x08\n            }\n            return event\n          case 0x59:\n            event.type = 'keySignature'\n            if (length != 2) throw \"Expected length for keySignature event is 2, got \" + length\n            event.key = p.readInt8()\n            event.scale = p.readUInt8()\n            return event\n          case 0x7f:\n            event.type = 'sequencerSpecific'\n            event.data = p.readBytes(length)\n            return event\n          default:\n            event.type = 'unknownMeta'\n            event.data = p.readBytes(length)\n            event.metatypeByte = metatypeByte\n            return event\n        }\n      } else if (eventTypeByte == 0xf0) {\n        event.type = 'sysEx'\n        var length = p.readVarInt()\n        event.data = p.readBytes(length)\n        return event\n      } else if (eventTypeByte == 0xf7) {\n        event.type = 'endSysEx'\n        var length = p.readVarInt()\n        event.data = p.readBytes(length)\n        return event\n      } else {\n        throw \"Unrecognised MIDI event type byte: \" + eventTypeByte\n      }\n    } else {\n      // channel event\n      var param1\n      if ((eventTypeByte & 0x80) === 0) {\n        // running status - reuse lastEventTypeByte as the event type.\n        // eventTypeByte is actually the first parameter\n        if (lastEventTypeByte === null)\n          throw \"Running status byte encountered before status byte\"\n        param1 = eventTypeByte\n        eventTypeByte = lastEventTypeByte\n        event.running = true\n      } else {\n        param1 = p.readUInt8()\n        lastEventTypeByte = eventTypeByte\n      }\n      var eventType = eventTypeByte >> 4\n      event.channel = eventTypeByte & 0x0f\n      switch (eventType) {\n        case 0x08:\n          event.type = 'noteOff'\n          event.noteNumber = param1\n          event.velocity = p.readUInt8()\n          return event\n        case 0x09:\n          var velocity = p.readUInt8()\n          event.type = velocity === 0 ? 'noteOff' : 'noteOn'\n          event.noteNumber = param1\n          event.velocity = velocity\n          if (velocity === 0) event.byte9 = true\n          return event\n        case 0x0a:\n          event.type = 'noteAftertouch'\n          event.noteNumber = param1\n          event.amount = p.readUInt8()\n          return event\n        case 0x0b:\n          event.type = 'controller'\n          event.controllerType = param1\n          event.value = p.readUInt8()\n          return event\n        case 0x0c:\n          event.type = 'programChange'\n          event.programNumber = param1\n          return event\n        case 0x0d:\n          event.type = 'channelAftertouch'\n          event.amount = param1\n          return event\n        case 0x0e:\n          event.type = 'pitchBend'\n          event.value = (param1 + (p.readUInt8() << 7)) - 0x2000\n          return event\n        default:\n          throw \"Unrecognised MIDI event type: \" + eventType\n      }\n    }\n  }\n}\n\nfunction Parser(data) {\n  this.buffer = data\n  this.bufferLen = this.buffer.length\n  this.pos = 0\n}\n\nParser.prototype.eof = function() {\n  return this.pos >= this.bufferLen\n}\n\nParser.prototype.readUInt8 = function() {\n  var result = this.buffer[this.pos]\n  this.pos += 1\n  return result\n}\n\nParser.prototype.readInt8 = function() {\n  var u = this.readUInt8()\n  if (u & 0x80)\n    return u - 0x100\n  else\n    return u\n}\n\nParser.prototype.readUInt16 = function() {\n  var b0 = this.readUInt8(),\n      b1 = this.readUInt8()\n\n    return (b0 << 8) + b1\n}\n\nParser.prototype.readInt16 = function() {\n  var u = this.readUInt16()\n  if (u & 0x8000)\n    return u - 0x10000\n  else\n    return u\n}\n\nParser.prototype.readUInt24 = function() {\n  var b0 = this.readUInt8(),\n      b1 = this.readUInt8(),\n      b2 = this.readUInt8()\n\n    return (b0 << 16) + (b1 << 8) + b2\n}\n\nParser.prototype.readInt24 = function() {\n  var u = this.readUInt24()\n  if (u & 0x800000)\n    return u - 0x1000000\n  else\n    return u\n}\n\nParser.prototype.readUInt32 = function() {\n  var b0 = this.readUInt8(),\n      b1 = this.readUInt8(),\n      b2 = this.readUInt8(),\n      b3 = this.readUInt8()\n\n    return (b0 << 24) + (b1 << 16) + (b2 << 8) + b3\n}\n\nParser.prototype.readBytes = function(len) {\n  var bytes = this.buffer.slice(this.pos, this.pos + len)\n  this.pos += len\n  return bytes\n}\n\nParser.prototype.readString = function(len) {\n  var bytes = this.readBytes(len)\n  return String.fromCharCode.apply(null, bytes)\n}\n\nParser.prototype.readVarInt = function() {\n  var result = 0\n  while (!this.eof()) {\n    var b = this.readUInt8()\n    if (b & 0x80) {\n      result += (b & 0x7f)\n      result <<= 7\n    } else {\n      // b is last byte\n      return result + b\n    }\n  }\n  // premature eof\n  return result\n}\n\nParser.prototype.readChunk = function() {\n  var id = this.readString(4)\n  var length = this.readUInt32()\n  var data = this.readBytes(length)\n  return {\n    id: id,\n    length: length,\n    data: data\n  }\n}\n\nmodule.exports = parseMidi\n","\"use strict\";\nconst idCounts = /* @__PURE__ */ Object.create(null);\nconst idHash = /* @__PURE__ */ Object.create(null);\nfunction createIdFromString(value, groupId) {\n  let id = idHash[value];\n  if (id === void 0) {\n    if (idCounts[groupId] === void 0) {\n      idCounts[groupId] = 1;\n    }\n    idHash[value] = id = idCounts[groupId]++;\n  }\n  return id;\n}\n\nexport { createIdFromString };\n//# sourceMappingURL=createIdFromString.mjs.map\n","\nmodule.exports = parse\n\n/**\n * expected argument lengths\n * @type {Object}\n */\n\nvar length = {a: 7, c: 6, h: 1, l: 2, m: 2, q: 4, s: 4, t: 2, v: 1, z: 0}\n\n/**\n * segment pattern\n * @type {RegExp}\n */\n\nvar segment = /([astvzqmhlc])([^astvzqmhlc]*)/ig\n\n/**\n * parse an svg path data string. Generates an Array\n * of commands where each command is an Array of the\n * form `[command, arg1, arg2, ...]`\n *\n * @param {String} path\n * @return {Array}\n */\n\nfunction parse(path) {\n\tvar data = []\n\tpath.replace(segment, function(_, command, args){\n\t\tvar type = command.toLowerCase()\n\t\targs = parseValues(args)\n\n\t\t// overloaded moveTo\n\t\tif (type == 'm' && args.length > 2) {\n\t\t\tdata.push([command].concat(args.splice(0, 2)))\n\t\t\ttype = 'l'\n\t\t\tcommand = command == 'm' ? 'l' : 'L'\n\t\t}\n\n\t\twhile (true) {\n\t\t\tif (args.length == length[type]) {\n\t\t\t\targs.unshift(command)\n\t\t\t\treturn data.push(args)\n\t\t\t}\n\t\t\tif (args.length < length[type]) throw new Error('malformed path data')\n\t\t\tdata.push([command].concat(args.splice(0, length[type])))\n\t\t}\n\t})\n\treturn data\n}\n\nvar number = /-?[0-9]*\\.?[0-9]+(?:e[-+]?\\d+)?/ig\n\nfunction parseValues(args) {\n\tvar numbers = args.match(number)\n\treturn numbers ? numbers.map(Number) : []\n}\n","\"use strict\";\nconst uniformParsers = [\n  // uploading pixi matrix object to mat3\n  {\n    type: \"mat3x3<f32>\",\n    test: (data) => {\n      const value = data.value;\n      return value.a !== void 0;\n    },\n    ubo: `\n            var matrix = uv[name].toArray(true);\n            data[offset] = matrix[0];\n            data[offset + 1] = matrix[1];\n            data[offset + 2] = matrix[2];\n            data[offset + 4] = matrix[3];\n            data[offset + 5] = matrix[4];\n            data[offset + 6] = matrix[5];\n            data[offset + 8] = matrix[6];\n            data[offset + 9] = matrix[7];\n            data[offset + 10] = matrix[8];\n        `,\n    uniform: `\n            gl.uniformMatrix3fv(ud[name].location, false, uv[name].toArray(true));\n        `\n  },\n  // uploading a pixi rectangle as a vec4\n  {\n    type: \"vec4<f32>\",\n    test: (data) => data.type === \"vec4<f32>\" && data.size === 1 && data.value.width !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n            data[offset + 2] = v.width;\n            data[offset + 3] = v.height;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                cv[2] = v.width;\n                cv[3] = v.height;\n                gl.uniform4f(ud[name].location, v.x, v.y, v.width, v.height);\n            }\n        `\n  },\n  // uploading a pixi point as a vec2\n  {\n    type: \"vec2<f32>\",\n    test: (data) => data.type === \"vec2<f32>\" && data.size === 1 && data.value.x !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.x;\n            data[offset + 1] = v.y;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.x || cv[1] !== v.y) {\n                cv[0] = v.x;\n                cv[1] = v.y;\n                gl.uniform2f(ud[name].location, v.x, v.y);\n            }\n        `\n  },\n  // uploading a pixi color as a vec4\n  {\n    type: \"vec4<f32>\",\n    test: (data) => data.type === \"vec4<f32>\" && data.size === 1 && data.value.red !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n            data[offset + 3] = v.alpha;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                cv[3] = v.alpha;\n                gl.uniform4f(ud[name].location, v.red, v.green, v.blue, v.alpha);\n            }\n        `\n  },\n  // uploading a pixi color as a vec3\n  {\n    type: \"vec3<f32>\",\n    test: (data) => data.type === \"vec3<f32>\" && data.size === 1 && data.value.red !== void 0,\n    ubo: `\n            v = uv[name];\n            data[offset] = v.red;\n            data[offset + 1] = v.green;\n            data[offset + 2] = v.blue;\n        `,\n    uniform: `\n            cv = ud[name].value;\n            v = uv[name];\n            if (cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue) {\n                cv[0] = v.red;\n                cv[1] = v.green;\n                cv[2] = v.blue;\n                gl.uniform3f(ud[name].location, v.red, v.green, v.blue);\n            }\n        `\n  }\n];\n\nexport { uniformParsers };\n//# sourceMappingURL=uniformParsers.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Circle {\n  /**\n   * @param x - The X coordinate of the center of this circle\n   * @param y - The Y coordinate of the center of this circle\n   * @param radius - The radius of the circle\n   */\n  constructor(x = 0, y = 0, radius = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks.\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Circle(0, 0, 50);\n     * console.log(shape.type); // 'circle'\n     *\n     * // Use in type guards\n     * if (shape.type === 'circle') {\n     *     console.log(shape.radius);\n     * }\n     * ```\n     * @remarks\n     * - Used for shape type checking\n     * - More efficient than instanceof\n     * - Read-only property\n     * @readonly\n     * @default 'circle'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     * @see {@link ShapePrimitive} For shape interface\n     */\n    this.type = \"circle\";\n    this.x = x;\n    this.y = y;\n    this.radius = radius;\n  }\n  /**\n   * Creates a clone of this Circle instance.\n   * @example\n   * ```ts\n   * // Basic circle cloning\n   * const original = new Circle(100, 100, 50);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.radius = 75;\n   *\n   * // Verify independence\n   * console.log(original.radius); // 50\n   * console.log(modified.radius); // 75\n   * ```\n   * @returns A copy of the Circle\n   * @see {@link Circle.copyFrom} For copying into existing circle\n   * @see {@link Circle.copyTo} For copying to another circle\n   */\n  clone() {\n    return new Circle(this.x, this.y, this.radius);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle.\n   *\n   * Uses the distance formula to determine if a point is inside the circle's radius.\n   *\n   * Commonly used for hit testing in PixiJS events and graphics.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const circle = new Circle(100, 100, 50);\n   * const isInside = circle.contains(120, 120);\n   *\n   * // Check mouse position\n   * const circle = new Circle(0, 0, 100);\n   * container.hitArea = circle;\n   * container.on('pointermove', (e) => {\n   *     // only called if pointer is within circle\n   * });\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Circle\n   * @see {@link Circle.strokeContains} For checking stroke intersection\n   * @see {@link Circle.getBounds} For getting bounding box\n   */\n  contains(x, y) {\n    if (this.radius <= 0)\n      return false;\n    const r2 = this.radius * this.radius;\n    let dx = this.x - x;\n    let dy = this.y - y;\n    dx *= dx;\n    dy *= dy;\n    return dx + dy <= r2;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this circle including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const circle = new Circle(100, 100, 50);\n   * const isOnStroke = circle.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = circle.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = circle.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = circle.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param width - The width of the line to check\n   * @param alignment - The alignment of the stroke, 0.5 by default\n   * @returns Whether the x/y coordinates are within this Circle's stroke\n   * @see {@link Circle.contains} For checking fill containment\n   * @see {@link Circle.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, width, alignment = 0.5) {\n    if (this.radius === 0)\n      return false;\n    const dx = this.x - x;\n    const dy = this.y - y;\n    const radius = this.radius;\n    const outerWidth = (1 - alignment) * width;\n    const distance = Math.sqrt(dx * dx + dy * dy);\n    return distance <= radius + outerWidth && distance > radius - (width - outerWidth);\n  }\n  /**\n   * Returns the framing rectangle of the circle as a Rectangle object.\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const circle = new Circle(100, 100, 50);\n   * const bounds = circle.getBounds();\n   * // bounds: x=50, y=50, width=100, height=100\n   *\n   * // Reuse existing rectangle\n   * const rect = new Rectangle();\n   * circle.getBounds(rect);\n   * ```\n   * @param out - Optional Rectangle object to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link Circle.contains} For point containment\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.x = this.x - this.radius;\n    out.y = this.y - this.radius;\n    out.width = this.radius * 2;\n    out.height = this.radius * 2;\n    return out;\n  }\n  /**\n   * Copies another circle to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Circle(100, 100, 50);\n   * const target = new Circle();\n   * target.copyFrom(source);\n   * ```\n   * @param circle - The circle to copy from\n   * @returns Returns itself\n   * @see {@link Circle.copyTo} For copying to another circle\n   * @see {@link Circle.clone} For creating new circle copy\n   */\n  copyFrom(circle) {\n    this.x = circle.x;\n    this.y = circle.y;\n    this.radius = circle.radius;\n    return this;\n  }\n  /**\n   * Copies this circle to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Circle(100, 100, 50);\n   * const target = new Circle();\n   * source.copyTo(target);\n   * ```\n   * @param circle - The circle to copy to\n   * @returns Returns given parameter\n   * @see {@link Circle.copyFrom} For copying from another circle\n   * @see {@link Circle.clone} For creating new circle copy\n   */\n  copyTo(circle) {\n    circle.copyFrom(this);\n    return circle;\n  }\n  toString() {\n    return `[pixi.js/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`;\n  }\n}\n\nexport { Circle };\n//# sourceMappingURL=Circle.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nclass Ellipse {\n  /**\n   * @param x - The X coordinate of the center of this ellipse\n   * @param y - The Y coordinate of the center of this ellipse\n   * @param halfWidth - The half width of this ellipse\n   * @param halfHeight - The half height of this ellipse\n   */\n  constructor(x = 0, y = 0, halfWidth = 0, halfHeight = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Ellipse(0, 0, 50, 25);\n     * console.log(shape.type); // 'ellipse'\n     *\n     * // Use in type guards\n     * if (shape.type === 'ellipse') {\n     *     console.log(shape.halfWidth, shape.halfHeight);\n     * }\n     * ```\n     * @readonly\n     * @default 'ellipse'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"ellipse\";\n    this.x = x;\n    this.y = y;\n    this.halfWidth = halfWidth;\n    this.halfHeight = halfHeight;\n  }\n  /**\n   * Creates a clone of this Ellipse instance.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new Ellipse(100, 100, 50, 25);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.halfWidth *= 2;\n   * modified.halfHeight *= 2;\n   *\n   * // Verify independence\n   * console.log(original.halfWidth);  // 50\n   * console.log(modified.halfWidth);  // 100\n   * ```\n   * @returns A copy of the ellipse\n   * @see {@link Ellipse.copyFrom} For copying into existing ellipse\n   * @see {@link Ellipse.copyTo} For copying to another ellipse\n   */\n  clone() {\n    return new Ellipse(this.x, this.y, this.halfWidth, this.halfHeight);\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse.\n   * Uses normalized coordinates and the ellipse equation to determine containment.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const ellipse = new Ellipse(100, 100, 50, 25);\n   * const isInside = ellipse.contains(120, 110);\n   * ```\n   * @remarks\n   * - Uses ellipse equation (x/a + y/b  1)\n   * - Returns false if dimensions are 0 or negative\n   * - Normalized to center (0,0) for calculation\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coords are within this ellipse\n   * @see {@link Ellipse.strokeContains} For checking stroke intersection\n   * @see {@link Ellipse.getBounds} For getting containing rectangle\n   */\n  contains(x, y) {\n    if (this.halfWidth <= 0 || this.halfHeight <= 0) {\n      return false;\n    }\n    let normx = (x - this.x) / this.halfWidth;\n    let normy = (y - this.y) / this.halfHeight;\n    normx *= normx;\n    normy *= normy;\n    return normx + normy <= 1;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this ellipse including stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const ellipse = new Ellipse(100, 100, 50, 25);\n   * const isOnStroke = ellipse.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = ellipse.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = ellipse.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = ellipse.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @remarks\n   * - Uses normalized ellipse equations\n   * - Considers stroke alignment\n   * - Returns false if dimensions are 0\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coords are within this ellipse's stroke\n   * @see {@link Ellipse.contains} For checking fill containment\n   * @see {@link Ellipse.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, strokeWidth, alignment = 0.5) {\n    const { halfWidth, halfHeight } = this;\n    if (halfWidth <= 0 || halfHeight <= 0) {\n      return false;\n    }\n    const strokeOuterWidth = strokeWidth * (1 - alignment);\n    const strokeInnerWidth = strokeWidth - strokeOuterWidth;\n    const innerHorizontal = halfWidth - strokeInnerWidth;\n    const innerVertical = halfHeight - strokeInnerWidth;\n    const outerHorizontal = halfWidth + strokeOuterWidth;\n    const outerVertical = halfHeight + strokeOuterWidth;\n    const normalizedX = x - this.x;\n    const normalizedY = y - this.y;\n    const innerEllipse = normalizedX * normalizedX / (innerHorizontal * innerHorizontal) + normalizedY * normalizedY / (innerVertical * innerVertical);\n    const outerEllipse = normalizedX * normalizedX / (outerHorizontal * outerHorizontal) + normalizedY * normalizedY / (outerVertical * outerVertical);\n    return innerEllipse > 1 && outerEllipse <= 1;\n  }\n  /**\n   * Returns the framing rectangle of the ellipse as a Rectangle object.\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const ellipse = new Ellipse(100, 100, 50, 25);\n   * const bounds = ellipse.getBounds();\n   * // bounds: x=50, y=75, width=100, height=50\n   *\n   * // Reuse existing rectangle\n   * const rect = new Rectangle();\n   * ellipse.getBounds(rect);\n   * ```\n   * @remarks\n   * - Creates Rectangle if none provided\n   * - Top-left is (x-halfWidth, y-halfHeight)\n   * - Width is halfWidth * 2\n   * - Height is halfHeight * 2\n   * @param out - Optional Rectangle object to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link Ellipse.contains} For checking if a point is inside\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.x = this.x - this.halfWidth;\n    out.y = this.y - this.halfHeight;\n    out.width = this.halfWidth * 2;\n    out.height = this.halfHeight * 2;\n    return out;\n  }\n  /**\n   * Copies another ellipse to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Ellipse(100, 100, 50, 25);\n   * const target = new Ellipse();\n   * target.copyFrom(source);\n   * ```\n   * @param ellipse - The ellipse to copy from\n   * @returns Returns itself\n   * @see {@link Ellipse.copyTo} For copying to another ellipse\n   * @see {@link Ellipse.clone} For creating new ellipse copy\n   */\n  copyFrom(ellipse) {\n    this.x = ellipse.x;\n    this.y = ellipse.y;\n    this.halfWidth = ellipse.halfWidth;\n    this.halfHeight = ellipse.halfHeight;\n    return this;\n  }\n  /**\n   * Copies this ellipse to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Ellipse(100, 100, 50, 25);\n   * const target = new Ellipse();\n   * source.copyTo(target);\n   * ```\n   * @param ellipse - The ellipse to copy to\n   * @returns Returns given parameter\n   * @see {@link Ellipse.copyFrom} For copying from another ellipse\n   * @see {@link Ellipse.clone} For creating new ellipse copy\n   */\n  copyTo(ellipse) {\n    ellipse.copyFrom(this);\n    return ellipse;\n  }\n  toString() {\n    return `[pixi.js/math:Ellipse x=${this.x} y=${this.y} halfWidth=${this.halfWidth} halfHeight=${this.halfHeight}]`;\n  }\n}\n\nexport { Ellipse };\n//# sourceMappingURL=Ellipse.mjs.map\n","\"use strict\";\nfunction squaredDistanceToLineSegment(x, y, x1, y1, x2, y2) {\n  const a = x - x1;\n  const b = y - y1;\n  const c = x2 - x1;\n  const d = y2 - y1;\n  const dot = a * c + b * d;\n  const lenSq = c * c + d * d;\n  let param = -1;\n  if (lenSq !== 0) {\n    param = dot / lenSq;\n  }\n  let xx;\n  let yy;\n  if (param < 0) {\n    xx = x1;\n    yy = y1;\n  } else if (param > 1) {\n    xx = x2;\n    yy = y2;\n  } else {\n    xx = x1 + param * c;\n    yy = y1 + param * d;\n  }\n  const dx = x - xx;\n  const dy = y - yy;\n  return dx * dx + dy * dy;\n}\n\nexport { squaredDistanceToLineSegment };\n//# sourceMappingURL=squaredDistanceToLineSegment.mjs.map\n","import { deprecation } from '../../utils/logging/deprecation.mjs';\nimport { squaredDistanceToLineSegment } from '../misc/squaredDistanceToLineSegment.mjs';\nimport { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nlet tempRect;\nlet tempRect2;\nclass Polygon {\n  /**\n   * @param points - This can be an array of Points\n   *  that form the polygon, a flat array of numbers that will be interpreted as [x,y, x,y, ...], or\n   *  the arguments passed can be all the points of the polygon e.g.\n   *  `new Polygon(new Point(), new Point(), ...)`, or the arguments passed can be flat\n   *  x,y values e.g. `new Polygon(x,y, x,y, x,y, ...)` where `x` and `y` are Numbers.\n   */\n  constructor(...points) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Polygon([0, 0, 100, 0, 50, 100]);\n     * console.log(shape.type); // 'polygon'\n     *\n     * // Use in type guards\n     * if (shape.type === 'polygon') {\n     *     // TypeScript knows this is a Polygon\n     *     console.log(shape.points.length);\n     * }\n     * ```\n     * @readonly\n     * @default 'polygon'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"polygon\";\n    let flat = Array.isArray(points[0]) ? points[0] : points;\n    if (typeof flat[0] !== \"number\") {\n      const p = [];\n      for (let i = 0, il = flat.length; i < il; i++) {\n        p.push(flat[i].x, flat[i].y);\n      }\n      flat = p;\n    }\n    this.points = flat;\n    this.closePath = true;\n  }\n  /**\n   * Determines whether the polygon's points are arranged in a clockwise direction.\n   * Uses the shoelace formula (surveyor's formula) to calculate the signed area.\n   *\n   * A positive area indicates clockwise winding, while negative indicates counter-clockwise.\n   *\n   * The formula sums up the cross products of adjacent vertices:\n   * For each pair of adjacent points (x1,y1) and (x2,y2), we calculate (x1*y2 - x2*y1)\n   * The final sum divided by 2 gives the signed area - positive for clockwise.\n   * @example\n   * ```ts\n   * // Check polygon winding\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * console.log(polygon.isClockwise()); // Check direction\n   *\n   * // Use in path construction\n   * const hole = new Polygon([25, 25, 75, 25, 75, 75, 25, 75]);\n   * if (hole.isClockwise() === shape.isClockwise()) {\n   *     hole.points.reverse(); // Reverse for proper hole winding\n   * }\n   * ```\n   * @returns `true` if the polygon's points are arranged clockwise, `false` if counter-clockwise\n   */\n  isClockwise() {\n    let area = 0;\n    const points = this.points;\n    const length = points.length;\n    for (let i = 0; i < length; i += 2) {\n      const x1 = points[i];\n      const y1 = points[i + 1];\n      const x2 = points[(i + 2) % length];\n      const y2 = points[(i + 3) % length];\n      area += (x2 - x1) * (y2 + y1);\n    }\n    return area < 0;\n  }\n  /**\n   * Checks if this polygon completely contains another polygon.\n   * Used for detecting holes in shapes, like when parsing SVG paths.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const outerSquare = new Polygon([0,0, 100,0, 100,100, 0,100]); // A square\n   * const innerSquare = new Polygon([25,25, 75,25, 75,75, 25,75]); // A smaller square inside\n   *\n   * outerSquare.containsPolygon(innerSquare); // Returns true\n   * innerSquare.containsPolygon(outerSquare); // Returns false\n   * ```\n   * @remarks\n   * - Uses bounds check for quick rejection\n   * - Tests all points for containment\n   * @param polygon - The polygon to test for containment\n   * @returns True if this polygon completely contains the other polygon\n   * @see {@link Polygon.contains} For single point testing\n   * @see {@link Polygon.getBounds} For bounds calculation\n   */\n  containsPolygon(polygon) {\n    const thisBounds = this.getBounds(tempRect);\n    const otherBounds = polygon.getBounds(tempRect2);\n    if (!thisBounds.containsRect(otherBounds)) {\n      return false;\n    }\n    const points = polygon.points;\n    for (let i = 0; i < points.length; i += 2) {\n      const x = points[i];\n      const y = points[i + 1];\n      if (!this.contains(x, y)) {\n        return false;\n      }\n    }\n    return true;\n  }\n  /**\n   * Creates a clone of this polygon.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.points[0] = 10; // Modify first x coordinate\n   * ```\n   * @returns A copy of the polygon\n   * @see {@link Polygon.copyFrom} For copying into existing polygon\n   * @see {@link Polygon.copyTo} For copying to another polygon\n   */\n  clone() {\n    const points = this.points.slice();\n    const polygon = new Polygon(points);\n    polygon.closePath = this.closePath;\n    return polygon;\n  }\n  /**\n   * Checks whether the x and y coordinates passed to this function are contained within this polygon.\n   * Uses raycasting algorithm for point-in-polygon testing.\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const isInside = polygon.contains(25, 25); // true\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this polygon\n   * @see {@link Polygon.strokeContains} For checking stroke intersection\n   * @see {@link Polygon.containsPolygon} For polygon-in-polygon testing\n   */\n  contains(x, y) {\n    let inside = false;\n    const length = this.points.length / 2;\n    for (let i = 0, j = length - 1; i < length; j = i++) {\n      const xi = this.points[i * 2];\n      const yi = this.points[i * 2 + 1];\n      const xj = this.points[j * 2];\n      const yj = this.points[j * 2 + 1];\n      const intersect = yi > y !== yj > y && x < (xj - xi) * ((y - yi) / (yj - yi)) + xi;\n      if (intersect) {\n        inside = !inside;\n      }\n    }\n    return inside;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this polygon including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const isOnStroke = polygon.strokeContains(25, 25, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = polygon.strokeContains(25, 25, 4, 1);   // Inside\n   * const centerStroke = polygon.strokeContains(25, 25, 4, 0.5); // Centered\n   * const outerStroke = polygon.strokeContains(25, 25, 4, 0);   // Outside\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coordinates are within this polygon's stroke\n   * @see {@link Polygon.contains} For checking fill containment\n   * @see {@link Polygon.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, strokeWidth, alignment = 0.5) {\n    const strokeWidthSquared = strokeWidth * strokeWidth;\n    const rightWidthSquared = strokeWidthSquared * (1 - alignment);\n    const leftWidthSquared = strokeWidthSquared - rightWidthSquared;\n    const { points } = this;\n    const iterationLength = points.length - (this.closePath ? 0 : 2);\n    for (let i = 0; i < iterationLength; i += 2) {\n      const x1 = points[i];\n      const y1 = points[i + 1];\n      const x2 = points[(i + 2) % points.length];\n      const y2 = points[(i + 3) % points.length];\n      const distanceSquared = squaredDistanceToLineSegment(x, y, x1, y1, x2, y2);\n      const sign = Math.sign((x2 - x1) * (y - y1) - (y2 - y1) * (x - x1));\n      if (distanceSquared <= (sign < 0 ? leftWidthSquared : rightWidthSquared)) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Returns the framing rectangle of the polygon as a Rectangle object.\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const polygon = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const bounds = polygon.getBounds();\n   * // bounds: x=0, y=0, width=100, height=100\n   *\n   * // Reuse existing rectangle\n   * const rect = new Rectangle();\n   * polygon.getBounds(rect);\n   * ```\n   * @param out - Optional rectangle to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link Polygon.contains} For checking if a point is inside\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    const points = this.points;\n    let minX = Infinity;\n    let maxX = -Infinity;\n    let minY = Infinity;\n    let maxY = -Infinity;\n    for (let i = 0, n = points.length; i < n; i += 2) {\n      const x = points[i];\n      const y = points[i + 1];\n      minX = x < minX ? x : minX;\n      maxX = x > maxX ? x : maxX;\n      minY = y < minY ? y : minY;\n      maxY = y > maxY ? y : maxY;\n    }\n    out.x = minX;\n    out.width = maxX - minX;\n    out.y = minY;\n    out.height = maxY - minY;\n    return out;\n  }\n  /**\n   * Copies another polygon to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const target = new Polygon();\n   * target.copyFrom(source);\n   * ```\n   * @param polygon - The polygon to copy from\n   * @returns Returns itself\n   * @see {@link Polygon.copyTo} For copying to another polygon\n   * @see {@link Polygon.clone} For creating new polygon copy\n   */\n  copyFrom(polygon) {\n    this.points = polygon.points.slice();\n    this.closePath = polygon.closePath;\n    return this;\n  }\n  /**\n   * Copies this polygon to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Polygon([0, 0, 100, 0, 50, 100]);\n   * const target = new Polygon();\n   * source.copyTo(target);\n   * ```\n   * @param polygon - The polygon to copy to\n   * @returns Returns given parameter\n   * @see {@link Polygon.copyFrom} For copying from another polygon\n   * @see {@link Polygon.clone} For creating new polygon copy\n   */\n  copyTo(polygon) {\n    polygon.copyFrom(this);\n    return polygon;\n  }\n  toString() {\n    return `[pixi.js/math:PolygoncloseStroke=${this.closePath}points=${this.points.reduce((pointsDesc, currentPoint) => `${pointsDesc}, ${currentPoint}`, \"\")}]`;\n  }\n  /**\n   * Get the last X coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.lastX); // 300\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the last vertex\n   * @see {@link Polygon.lastY} For last Y coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get lastX() {\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the last Y coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.lastY); // 400\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the last vertex\n   * @see {@link Polygon.lastX} For last X coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get lastY() {\n    return this.points[this.points.length - 1];\n  }\n  /**\n   * Get the last X coordinate of the polygon.\n   * @readonly\n   * @deprecated since 8.11.0, use {@link Polygon.lastX} instead.\n   */\n  get x() {\n    deprecation(\"8.11.0\", \"Polygon.lastX is deprecated, please use Polygon.lastX instead.\");\n    return this.points[this.points.length - 2];\n  }\n  /**\n   * Get the last Y coordinate of the polygon.\n   * @readonly\n   * @deprecated since 8.11.0, use {@link Polygon.lastY} instead.\n   */\n  get y() {\n    deprecation(\"8.11.0\", \"Polygon.y is deprecated, please use Polygon.lastY instead.\");\n    return this.points[this.points.length - 1];\n  }\n  /**\n   * Get the first X coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.x); // 0\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the first vertex\n   * @see {@link Polygon.startY} For first Y coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get startX() {\n    return this.points[0];\n  }\n  /**\n   * Get the first Y coordinate of the polygon.\n   * @example\n   * ```ts\n   * // Basic coordinate access\n   * const polygon = new Polygon([0, 0, 100, 200, 300, 400]);\n   * console.log(polygon.y); // 0\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the first vertex\n   * @see {@link Polygon.startX} For first X coordinate\n   * @see {@link Polygon.points} For raw points array\n   */\n  get startY() {\n    return this.points[1];\n  }\n}\n\nexport { Polygon };\n//# sourceMappingURL=Polygon.mjs.map\n","import { Rectangle } from './Rectangle.mjs';\n\n\"use strict\";\nconst isCornerWithinStroke = (pX, pY, cornerX, cornerY, radius, strokeWidthInner, strokeWidthOuter) => {\n  const dx = pX - cornerX;\n  const dy = pY - cornerY;\n  const distance = Math.sqrt(dx * dx + dy * dy);\n  return distance >= radius - strokeWidthInner && distance <= radius + strokeWidthOuter;\n};\nclass RoundedRectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rounded rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rounded rectangle\n   * @param width - The overall width of this rounded rectangle\n   * @param height - The overall height of this rounded rectangle\n   * @param radius - Controls the radius of the rounded corners\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0, radius = 20) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new RoundedRectangle(0, 0, 100, 100, 20);\n     * console.log(shape.type); // 'roundedRectangle'\n     *\n     * // Use in type guards\n     * if (shape.type === 'roundedRectangle') {\n     *     console.log(shape.radius);\n     * }\n     * ```\n     * @readonly\n     * @default 'roundedRectangle'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"roundedRectangle\";\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    this.radius = radius;\n  }\n  /**\n   * Returns the framing rectangle of the rounded rectangle as a Rectangle object\n   * @example\n   * ```ts\n   * // Basic bounds calculation\n   * const rect = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const bounds = rect.getBounds();\n   * // bounds: x=100, y=100, width=200, height=150\n   *\n   * // Reuse existing rectangle\n   * const out = new Rectangle();\n   * rect.getBounds(out);\n   * ```\n   * @remarks\n   * - Rectangle matches outer dimensions\n   * - Ignores corner radius\n   * @param out - Optional rectangle to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle} For rectangle properties\n   * @see {@link RoundedRectangle.contains} For checking if a point is inside\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.x = this.x;\n    out.y = this.y;\n    out.width = this.width;\n    out.height = this.height;\n    return out;\n  }\n  /**\n   * Creates a clone of this Rounded Rectangle.\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.radius = 30;\n   * modified.width *= 2;\n   *\n   * // Verify independence\n   * console.log(original.radius);  // 20\n   * console.log(modified.radius);  // 30\n   * ```\n   * @returns A copy of the rounded rectangle\n   * @see {@link RoundedRectangle.copyFrom} For copying into existing rectangle\n   * @see {@link RoundedRectangle.copyTo} For copying to another rectangle\n   */\n  clone() {\n    return new RoundedRectangle(this.x, this.y, this.width, this.height, this.radius);\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const target = new RoundedRectangle();\n   * target.copyFrom(source);\n   *\n   * // Chain with other operations\n   * const rect = new RoundedRectangle()\n   *     .copyFrom(source)\n   *     .getBounds(rect);\n   * ```\n   * @param rectangle - The rectangle to copy from\n   * @returns Returns itself\n   * @see {@link RoundedRectangle.copyTo} For copying to another rectangle\n   * @see {@link RoundedRectangle.clone} For creating new rectangle copy\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const target = new RoundedRectangle();\n   * source.copyTo(target);\n   *\n   * // Chain with other operations\n   * const result = source\n   *     .copyTo(new RoundedRectangle())\n   *     .getBounds();\n   * ```\n   * @param rectangle - The rectangle to copy to\n   * @returns Returns given parameter\n   * @see {@link RoundedRectangle.copyFrom} For copying from another rectangle\n   * @see {@link RoundedRectangle.clone} For creating new rectangle copy\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rounded Rectangle\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const rect = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const isInside = rect.contains(150, 125); // true\n   * // Check corner radius\n   * const corner = rect.contains(100, 100); // false if within corner curve\n   * ```\n   * @remarks\n   * - Returns false if width/height is 0 or negative\n   * - Handles rounded corners with radius check\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Rounded Rectangle\n   * @see {@link RoundedRectangle.strokeContains} For checking stroke intersection\n   * @see {@link RoundedRectangle.getBounds} For getting containing rectangle\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x <= this.x + this.width) {\n      if (y >= this.y && y <= this.y + this.height) {\n        const radius = Math.max(0, Math.min(this.radius, Math.min(this.width, this.height) / 2));\n        if (y >= this.y + radius && y <= this.y + this.height - radius || x >= this.x + radius && x <= this.x + this.width - radius) {\n          return true;\n        }\n        let dx = x - (this.x + radius);\n        let dy = y - (this.y + radius);\n        const radius2 = radius * radius;\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + this.width - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dy = y - (this.y + this.height - radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n        dx = x - (this.x + radius);\n        if (dx * dx + dy * dy <= radius2) {\n          return true;\n        }\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const rect = new RoundedRectangle(100, 100, 200, 150, 20);\n   * const isOnStroke = rect.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = rect.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = rect.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = rect.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @param pX - The X coordinate of the point to test\n   * @param pY - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coordinates are within this rectangle's stroke\n   * @see {@link RoundedRectangle.contains} For checking fill containment\n   * @see {@link RoundedRectangle.getBounds} For getting stroke bounds\n   */\n  strokeContains(pX, pY, strokeWidth, alignment = 0.5) {\n    const { x, y, width, height, radius } = this;\n    const strokeWidthOuter = strokeWidth * (1 - alignment);\n    const strokeWidthInner = strokeWidth - strokeWidthOuter;\n    const innerX = x + radius;\n    const innerY = y + radius;\n    const innerWidth = width - radius * 2;\n    const innerHeight = height - radius * 2;\n    const rightBound = x + width;\n    const bottomBound = y + height;\n    if ((pX >= x - strokeWidthOuter && pX <= x + strokeWidthInner || pX >= rightBound - strokeWidthInner && pX <= rightBound + strokeWidthOuter) && pY >= innerY && pY <= innerY + innerHeight) {\n      return true;\n    }\n    if ((pY >= y - strokeWidthOuter && pY <= y + strokeWidthInner || pY >= bottomBound - strokeWidthInner && pY <= bottomBound + strokeWidthOuter) && pX >= innerX && pX <= innerX + innerWidth) {\n      return true;\n    }\n    return (\n      // Top-left\n      pX < innerX && pY < innerY && isCornerWithinStroke(\n        pX,\n        pY,\n        innerX,\n        innerY,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      ) || pX > rightBound - radius && pY < innerY && isCornerWithinStroke(\n        pX,\n        pY,\n        rightBound - radius,\n        innerY,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      ) || pX > rightBound - radius && pY > bottomBound - radius && isCornerWithinStroke(\n        pX,\n        pY,\n        rightBound - radius,\n        bottomBound - radius,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      ) || pX < innerX && pY > bottomBound - radius && isCornerWithinStroke(\n        pX,\n        pY,\n        innerX,\n        bottomBound - radius,\n        radius,\n        strokeWidthInner,\n        strokeWidthOuter\n      )\n    );\n  }\n  toString() {\n    return `[pixi.js/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`;\n  }\n}\n\nexport { RoundedRectangle };\n//# sourceMappingURL=RoundedRectangle.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nconst mCuspLimit = 0;\nfunction buildAdaptiveBezier(points, sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance) {\n  recursive(sX, sY, cp1x, cp1y, cp2x, cp2y, eX, eY, points, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(x1, y1, x2, y2, x3, y3, x4, y4, points, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x34 = (x3 + x4) / 2;\n  const y34 = (y3 + y4) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  const x234 = (x23 + x34) / 2;\n  const y234 = (y23 + y34) / 2;\n  const x1234 = (x123 + x234) / 2;\n  const y1234 = (y123 + y234) / 2;\n  if (level > 0) {\n    let dx = x4 - x1;\n    let dy = y4 - y1;\n    const d2 = Math.abs((x2 - x4) * dy - (y2 - y4) * dx);\n    const d3 = Math.abs((x3 - x4) * dy - (y3 - y4) * dx);\n    let da1;\n    let da2;\n    if (d2 > FLT_EPSILON && d3 > FLT_EPSILON) {\n      if ((d2 + d3) * (d2 + d3) <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        const a23 = Math.atan2(y3 - y2, x3 - x2);\n        da1 = Math.abs(a23 - Math.atan2(y2 - y1, x2 - x1));\n        da2 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - a23);\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da2 >= pi)\n          da2 = 2 * pi - da2;\n        if (da1 + da2 < mAngleTolerance) {\n          points.push(x1234, y1234);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n          if (da2 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else if (d2 > FLT_EPSILON) {\n      if (d2 * d2 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x2, y2);\n            return;\n          }\n        }\n      }\n    } else if (d3 > FLT_EPSILON) {\n      if (d3 * d3 <= distanceTolerance * (dx * dx + dy * dy)) {\n        if (mAngleTolerance < curveAngleToleranceEpsilon) {\n          points.push(x1234, y1234);\n          return;\n        }\n        da1 = Math.abs(Math.atan2(y4 - y3, x4 - x3) - Math.atan2(y3 - y2, x3 - x2));\n        if (da1 >= pi)\n          da1 = 2 * pi - da1;\n        if (da1 < mAngleTolerance) {\n          points.push(x2, y2);\n          points.push(x3, y3);\n          return;\n        }\n        if (mCuspLimit !== 0) {\n          if (da1 > mCuspLimit) {\n            points.push(x3, y3);\n            return;\n          }\n        }\n      }\n    } else {\n      dx = x1234 - (x1 + x4) / 2;\n      dy = y1234 - (y1 + y4) / 2;\n      if (dx * dx + dy * dy <= distanceTolerance) {\n        points.push(x1234, y1234);\n        return;\n      }\n    }\n  }\n  recursive(x1, y1, x12, y12, x123, y123, x1234, y1234, points, distanceTolerance, level + 1);\n  recursive(x1234, y1234, x234, y234, x34, y34, x4, y4, points, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveBezier };\n//# sourceMappingURL=buildAdaptiveBezier.mjs.map\n","import { GraphicsContextSystem } from '../GraphicsContextSystem.mjs';\n\n\"use strict\";\nconst RECURSION_LIMIT = 8;\nconst FLT_EPSILON = 11920929e-14;\nconst PATH_DISTANCE_EPSILON = 1;\nconst curveAngleToleranceEpsilon = 0.01;\nconst mAngleTolerance = 0;\nfunction buildAdaptiveQuadratic(points, sX, sY, cp1x, cp1y, eX, eY, smoothness) {\n  const scale = 1;\n  const smoothing = Math.min(\n    0.99,\n    // a value of 1.0 actually inverts smoothing, so we cap it at 0.99\n    Math.max(0, smoothness ?? GraphicsContextSystem.defaultOptions.bezierSmoothness)\n  );\n  let distanceTolerance = (PATH_DISTANCE_EPSILON - smoothing) / scale;\n  distanceTolerance *= distanceTolerance;\n  begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance);\n  return points;\n}\nfunction begin(sX, sY, cp1x, cp1y, eX, eY, points, distanceTolerance) {\n  recursive(points, sX, sY, cp1x, cp1y, eX, eY, distanceTolerance, 0);\n  points.push(eX, eY);\n}\nfunction recursive(points, x1, y1, x2, y2, x3, y3, distanceTolerance, level) {\n  if (level > RECURSION_LIMIT) {\n    return;\n  }\n  const pi = Math.PI;\n  const x12 = (x1 + x2) / 2;\n  const y12 = (y1 + y2) / 2;\n  const x23 = (x2 + x3) / 2;\n  const y23 = (y2 + y3) / 2;\n  const x123 = (x12 + x23) / 2;\n  const y123 = (y12 + y23) / 2;\n  let dx = x3 - x1;\n  let dy = y3 - y1;\n  const d = Math.abs((x2 - x3) * dy - (y2 - y3) * dx);\n  if (d > FLT_EPSILON) {\n    if (d * d <= distanceTolerance * (dx * dx + dy * dy)) {\n      if (mAngleTolerance < curveAngleToleranceEpsilon) {\n        points.push(x123, y123);\n        return;\n      }\n      let da = Math.abs(Math.atan2(y3 - y2, x3 - x2) - Math.atan2(y2 - y1, x2 - x1));\n      if (da >= pi)\n        da = 2 * pi - da;\n      if (da < mAngleTolerance) {\n        points.push(x123, y123);\n        return;\n      }\n    }\n  } else {\n    dx = x123 - (x1 + x3) / 2;\n    dy = y123 - (y1 + y3) / 2;\n    if (dx * dx + dy * dy <= distanceTolerance) {\n      points.push(x123, y123);\n      return;\n    }\n  }\n  recursive(points, x1, y1, x12, y12, x123, y123, distanceTolerance, level + 1);\n  recursive(points, x123, y123, x23, y23, x3, y3, distanceTolerance, level + 1);\n}\n\nexport { buildAdaptiveQuadratic };\n//# sourceMappingURL=buildAdaptiveQuadratic.mjs.map\n","\"use strict\";\nfunction buildArc(points, x, y, radius, start, end, clockwise, steps) {\n  let dist = Math.abs(start - end);\n  if (!clockwise && start > end) {\n    dist = 2 * Math.PI - dist;\n  } else if (clockwise && end > start) {\n    dist = 2 * Math.PI - dist;\n  }\n  steps || (steps = Math.max(6, Math.floor(6 * Math.pow(radius, 1 / 3) * (dist / Math.PI))));\n  steps = Math.max(steps, 3);\n  let f = dist / steps;\n  let t = start;\n  f *= clockwise ? -1 : 1;\n  for (let i = 0; i < steps + 1; i++) {\n    const cs = Math.cos(t);\n    const sn = Math.sin(t);\n    const nx = x + cs * radius;\n    const ny = y + sn * radius;\n    points.push(nx, ny);\n    t += f;\n  }\n}\n\nexport { buildArc };\n//# sourceMappingURL=buildArc.mjs.map\n","import { buildAdaptiveBezier } from './buildAdaptiveBezier.mjs';\n\n\"use strict\";\nconst TAU = Math.PI * 2;\nconst out = {\n  centerX: 0,\n  centerY: 0,\n  ang1: 0,\n  ang2: 0\n};\nconst mapToEllipse = ({ x, y }, rx, ry, cosPhi, sinPhi, centerX, centerY, out2) => {\n  x *= rx;\n  y *= ry;\n  const xp = cosPhi * x - sinPhi * y;\n  const yp = sinPhi * x + cosPhi * y;\n  out2.x = xp + centerX;\n  out2.y = yp + centerY;\n  return out2;\n};\nfunction approxUnitArc(ang1, ang2) {\n  const a1 = ang2 === -1.5707963267948966 ? -0.551915024494 : 4 / 3 * Math.tan(ang2 / 4);\n  const a = ang2 === 1.5707963267948966 ? 0.551915024494 : a1;\n  const x1 = Math.cos(ang1);\n  const y1 = Math.sin(ang1);\n  const x2 = Math.cos(ang1 + ang2);\n  const y2 = Math.sin(ang1 + ang2);\n  return [\n    {\n      x: x1 - y1 * a,\n      y: y1 + x1 * a\n    },\n    {\n      x: x2 + y2 * a,\n      y: y2 - x2 * a\n    },\n    {\n      x: x2,\n      y: y2\n    }\n  ];\n}\nconst vectorAngle = (ux, uy, vx, vy) => {\n  const sign = ux * vy - uy * vx < 0 ? -1 : 1;\n  let dot = ux * vx + uy * vy;\n  if (dot > 1) {\n    dot = 1;\n  }\n  if (dot < -1) {\n    dot = -1;\n  }\n  return sign * Math.acos(dot);\n};\nconst getArcCenter = (px, py, cx, cy, rx, ry, largeArcFlag, sweepFlag, sinPhi, cosPhi, pxp, pyp, out2) => {\n  const rxSq = Math.pow(rx, 2);\n  const rySq = Math.pow(ry, 2);\n  const pxpSq = Math.pow(pxp, 2);\n  const pypSq = Math.pow(pyp, 2);\n  let radicant = rxSq * rySq - rxSq * pypSq - rySq * pxpSq;\n  if (radicant < 0) {\n    radicant = 0;\n  }\n  radicant /= rxSq * pypSq + rySq * pxpSq;\n  radicant = Math.sqrt(radicant) * (largeArcFlag === sweepFlag ? -1 : 1);\n  const centerXp = radicant * rx / ry * pyp;\n  const centerYp = radicant * -ry / rx * pxp;\n  const centerX = cosPhi * centerXp - sinPhi * centerYp + (px + cx) / 2;\n  const centerY = sinPhi * centerXp + cosPhi * centerYp + (py + cy) / 2;\n  const vx1 = (pxp - centerXp) / rx;\n  const vy1 = (pyp - centerYp) / ry;\n  const vx2 = (-pxp - centerXp) / rx;\n  const vy2 = (-pyp - centerYp) / ry;\n  const ang1 = vectorAngle(1, 0, vx1, vy1);\n  let ang2 = vectorAngle(vx1, vy1, vx2, vy2);\n  if (sweepFlag === 0 && ang2 > 0) {\n    ang2 -= TAU;\n  }\n  if (sweepFlag === 1 && ang2 < 0) {\n    ang2 += TAU;\n  }\n  out2.centerX = centerX;\n  out2.centerY = centerY;\n  out2.ang1 = ang1;\n  out2.ang2 = ang2;\n};\nfunction buildArcToSvg(points, px, py, cx, cy, rx, ry, xAxisRotation = 0, largeArcFlag = 0, sweepFlag = 0) {\n  if (rx === 0 || ry === 0) {\n    return;\n  }\n  const sinPhi = Math.sin(xAxisRotation * TAU / 360);\n  const cosPhi = Math.cos(xAxisRotation * TAU / 360);\n  const pxp = cosPhi * (px - cx) / 2 + sinPhi * (py - cy) / 2;\n  const pyp = -sinPhi * (px - cx) / 2 + cosPhi * (py - cy) / 2;\n  if (pxp === 0 && pyp === 0) {\n    return;\n  }\n  rx = Math.abs(rx);\n  ry = Math.abs(ry);\n  const lambda = Math.pow(pxp, 2) / Math.pow(rx, 2) + Math.pow(pyp, 2) / Math.pow(ry, 2);\n  if (lambda > 1) {\n    rx *= Math.sqrt(lambda);\n    ry *= Math.sqrt(lambda);\n  }\n  getArcCenter(\n    px,\n    py,\n    cx,\n    cy,\n    rx,\n    ry,\n    largeArcFlag,\n    sweepFlag,\n    sinPhi,\n    cosPhi,\n    pxp,\n    pyp,\n    out\n  );\n  let { ang1, ang2 } = out;\n  const { centerX, centerY } = out;\n  let ratio = Math.abs(ang2) / (TAU / 4);\n  if (Math.abs(1 - ratio) < 1e-7) {\n    ratio = 1;\n  }\n  const segments = Math.max(Math.ceil(ratio), 1);\n  ang2 /= segments;\n  let lastX = points[points.length - 2];\n  let lastY = points[points.length - 1];\n  const outCurvePoint = { x: 0, y: 0 };\n  for (let i = 0; i < segments; i++) {\n    const curve = approxUnitArc(ang1, ang2);\n    const { x: x1, y: y1 } = mapToEllipse(curve[0], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x: x2, y: y2 } = mapToEllipse(curve[1], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    const { x, y } = mapToEllipse(curve[2], rx, ry, cosPhi, sinPhi, centerX, centerY, outCurvePoint);\n    buildAdaptiveBezier(\n      points,\n      lastX,\n      lastY,\n      x1,\n      y1,\n      x2,\n      y2,\n      x,\n      y\n    );\n    lastX = x;\n    lastY = y;\n    ang1 += ang2;\n  }\n}\n\nexport { buildArcToSvg };\n//# sourceMappingURL=buildArcToSvg.mjs.map\n","import { Circle } from '../../../../maths/shapes/Circle.mjs';\nimport { Ellipse } from '../../../../maths/shapes/Ellipse.mjs';\nimport { Polygon } from '../../../../maths/shapes/Polygon.mjs';\nimport { Rectangle } from '../../../../maths/shapes/Rectangle.mjs';\nimport { RoundedRectangle } from '../../../../maths/shapes/RoundedRectangle.mjs';\nimport { Bounds } from '../../../container/bounds/Bounds.mjs';\nimport { buildAdaptiveBezier } from '../buildCommands/buildAdaptiveBezier.mjs';\nimport { buildAdaptiveQuadratic } from '../buildCommands/buildAdaptiveQuadratic.mjs';\nimport { buildArc } from '../buildCommands/buildArc.mjs';\nimport { buildArcTo } from '../buildCommands/buildArcTo.mjs';\nimport { buildArcToSvg } from '../buildCommands/buildArcToSvg.mjs';\nimport { roundedShapeQuadraticCurve, roundedShapeArc } from './roundShape.mjs';\n\n\"use strict\";\nconst tempRectangle = new Rectangle();\nclass ShapePath {\n  constructor(graphicsPath2D) {\n    /** The list of shape primitives that make up the path. */\n    this.shapePrimitives = [];\n    this._currentPoly = null;\n    this._bounds = new Bounds();\n    this._graphicsPath2D = graphicsPath2D;\n    this.signed = graphicsPath2D.checkForHoles;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this.startPoly(x, y);\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    const fromX = points[points.length - 2];\n    const fromY = points[points.length - 1];\n    if (fromX !== x || fromY !== y) {\n      points.push(x, y);\n    }\n    return this;\n  }\n  /**\n   * Adds an arc to the path. The arc is centered at (x, y)\n   *  position with radius `radius` starting at `startAngle` and ending at `endAngle`.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The radius of the arc.\n   * @param startAngle - The starting angle of the arc, in radians.\n   * @param endAngle - The ending angle of the arc, in radians.\n   * @param counterclockwise - Specifies whether the arc should be drawn in the anticlockwise direction. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._ensurePoly(false);\n    const points = this._currentPoly.points;\n    buildArc(points, x, y, radius, startAngle, endAngle, counterclockwise);\n    return this;\n  }\n  /**\n   * Adds an arc to the path with the arc tangent to the line joining two specified points.\n   * The arc radius is specified by `radius`.\n   * @param x1 - The x-coordinate of the first point.\n   * @param y1 - The y-coordinate of the first point.\n   * @param x2 - The x-coordinate of the second point.\n   * @param y2 - The y-coordinate of the second point.\n   * @param radius - The radius of the arc.\n   * @returns The instance of the current object for chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._ensurePoly();\n    const points = this._currentPoly.points;\n    buildArcTo(points, x1, y1, x2, y2, radius);\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    const points = this._currentPoly.points;\n    buildArcToSvg(\n      points,\n      this._currentPoly.lastX,\n      this._currentPoly.lastY,\n      x,\n      y,\n      rx,\n      ry,\n      xAxisRotation,\n      largeArcFlag,\n      sweepFlag\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveBezier(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      cp2x,\n      cp2y,\n      x,\n      y,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the control point.\n   * @param cp1y - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothing - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cp1x, cp1y, x, y, smoothing) {\n    this._ensurePoly();\n    const currentPoly = this._currentPoly;\n    buildAdaptiveQuadratic(\n      this._currentPoly.points,\n      currentPoly.lastX,\n      currentPoly.lastY,\n      cp1x,\n      cp1y,\n      x,\n      y,\n      smoothing\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.endPoly(true);\n    return this;\n  }\n  /**\n   * Adds another path to the current path. This method allows for the combination of multiple paths into one.\n   * @param path - The `GraphicsPath` object representing the path to add.\n   * @param transform - An optional `Matrix` object to apply a transformation to the path before adding it.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    this.endPoly();\n    if (transform && !transform.isIdentity()) {\n      path = path.clone(true);\n      path.transform(transform);\n    }\n    const shapePrimitives = this.shapePrimitives;\n    const start = shapePrimitives.length;\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    if (path.checkForHoles && shapePrimitives.length - start > 1) {\n      let mainShape = null;\n      for (let i = start; i < shapePrimitives.length; i++) {\n        const shapePrimitive = shapePrimitives[i];\n        if (shapePrimitive.shape.type === \"polygon\") {\n          const polygon = shapePrimitive.shape;\n          const mainPolygon = mainShape?.shape;\n          if (mainPolygon && mainPolygon.containsPolygon(polygon)) {\n            mainShape.holes || (mainShape.holes = []);\n            mainShape.holes.push(shapePrimitive);\n            shapePrimitives.copyWithin(i, i + 1);\n            shapePrimitives.length--;\n            i--;\n          } else {\n            mainShape = shapePrimitive;\n          }\n        }\n      }\n    }\n    return this;\n  }\n  /**\n   * Finalizes the drawing of the current path. Optionally, it can close the path.\n   * @param closePath - A boolean indicating whether to close the path after finishing. False by default.\n   */\n  finish(closePath = false) {\n    this.endPoly(closePath);\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.drawShape(new Rectangle(x, y, w, h), transform);\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.drawShape(new Circle(x, y, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a polygon shape. This method allows for the creation of complex polygons by specifying a sequence of points.\n   * @param points - An array of numbers, or or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  poly(points, close, transform) {\n    const polygon = new Polygon(points);\n    polygon.closePath = close;\n    this.drawShape(polygon, transform);\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    sides = Math.max(sides | 0, 3);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const polygon = [];\n    for (let i = 0; i < sides; i++) {\n      const angle = startAngle - i * delta;\n      polygon.push(\n        x + radius * Math.cos(angle),\n        y + radius * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param smoothness - Optional parameter to adjust the smoothness of the rounding.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation = 0, smoothness) {\n    sides = Math.max(sides | 0, 3);\n    if (corner <= 0) {\n      return this.regularPoly(x, y, radius, sides, rotation);\n    }\n    const sideLength = radius * Math.sin(Math.PI / sides) - 1e-3;\n    corner = Math.min(corner, sideLength);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const delta = Math.PI * 2 / sides;\n    const internalAngle = (sides - 2) * Math.PI / sides / 2;\n    for (let i = 0; i < sides; i++) {\n      const angle = i * delta + startAngle;\n      const x0 = x + radius * Math.cos(angle);\n      const y0 = y + radius * Math.sin(angle);\n      const a1 = angle + Math.PI + internalAngle;\n      const a2 = angle - Math.PI - internalAngle;\n      const x1 = x0 + corner * Math.cos(a1);\n      const y1 = y0 + corner * Math.sin(a1);\n      const x3 = x0 + corner * Math.cos(a2);\n      const y3 = y0 + corner * Math.sin(a2);\n      if (i === 0) {\n        this.moveTo(x1, y1);\n      } else {\n        this.lineTo(x1, y1);\n      }\n      this.quadraticCurveTo(x0, y0, x3, y3, smoothness);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic = false, smoothness) {\n    if (points.length < 3) {\n      return this;\n    }\n    if (useQuadratic) {\n      roundedShapeQuadraticCurve(this, points, radius, smoothness);\n    } else {\n      roundedShapeArc(this, points, radius);\n    }\n    return this.closePath();\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    if (fillet === 0) {\n      return this.rect(x, y, width, height);\n    }\n    const maxFillet = Math.min(width, height) / 2;\n    const inset = Math.min(maxFillet, Math.max(-maxFillet, fillet));\n    const right = x + width;\n    const bottom = y + height;\n    const dir = inset < 0 ? -inset : 0;\n    const size = Math.abs(inset);\n    return this.moveTo(x, y + size).arcTo(x + dir, y + dir, x + size, y, size).lineTo(right - size, y).arcTo(right - dir, y + dir, right, y + size, size).lineTo(right, bottom - size).arcTo(right - dir, bottom - dir, x + width - size, bottom, size).lineTo(x + size, bottom).arcTo(x + dir, bottom - dir, x, bottom - size, size).closePath();\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    if (chamfer <= 0) {\n      return this.rect(x, y, width, height);\n    }\n    const inset = Math.min(chamfer, Math.min(width, height) / 2);\n    const right = x + width;\n    const bottom = y + height;\n    const points = [\n      x + inset,\n      y,\n      right - inset,\n      y,\n      right,\n      y + inset,\n      right,\n      bottom - inset,\n      right - inset,\n      bottom,\n      x + inset,\n      bottom,\n      x,\n      bottom - inset,\n      x,\n      y + inset\n    ];\n    for (let i = points.length - 1; i >= 2; i -= 2) {\n      if (points[i] === points[i - 2] && points[i - 1] === points[i - 3]) {\n        points.splice(i - 1, 2);\n      }\n    }\n    return this.poly(points, true, transform);\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @param transform - An optional `Matrix` object to apply a transformation to the ellipse. This can include rotations.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY, transform) {\n    this.drawShape(new Ellipse(x, y, radiusX, radiusY), transform);\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius, transform) {\n    this.drawShape(new RoundedRectangle(x, y, w, h, radius), transform);\n    return this;\n  }\n  /**\n   * Draws a given shape on the canvas.\n   * This is a generic method that can draw any type of shape specified by the `ShapePrimitive` parameter.\n   * An optional transformation matrix can be applied to the shape, allowing for complex transformations.\n   * @param shape - The shape to draw, defined as a `ShapePrimitive` object.\n   * @param matrix - An optional `Matrix` for transforming the shape. This can include rotations,\n   * scaling, and translations.\n   * @returns The instance of the current object for chaining.\n   */\n  drawShape(shape, matrix) {\n    this.endPoly();\n    this.shapePrimitives.push({ shape, transform: matrix });\n    return this;\n  }\n  /**\n   * Starts a new polygon path from the specified starting point.\n   * This method initializes a new polygon or ends the current one if it exists.\n   * @param x - The x-coordinate of the starting point of the new polygon.\n   * @param y - The y-coordinate of the starting point of the new polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  startPoly(x, y) {\n    let currentPoly = this._currentPoly;\n    if (currentPoly) {\n      this.endPoly();\n    }\n    currentPoly = new Polygon();\n    currentPoly.points.push(x, y);\n    this._currentPoly = currentPoly;\n    return this;\n  }\n  /**\n   * Ends the current polygon path. If `closePath` is set to true,\n   * the path is closed by connecting the last point to the first one.\n   * This method finalizes the current polygon and prepares it for drawing or adding to the shape primitives.\n   * @param closePath - A boolean indicating whether to close the polygon by connecting the last point\n   *  back to the starting point. False by default.\n   * @returns The instance of the current object for chaining.\n   */\n  endPoly(closePath = false) {\n    const shape = this._currentPoly;\n    if (shape && shape.points.length > 2) {\n      shape.closePath = closePath;\n      this.shapePrimitives.push({ shape });\n    }\n    this._currentPoly = null;\n    return this;\n  }\n  _ensurePoly(start = true) {\n    if (this._currentPoly)\n      return;\n    this._currentPoly = new Polygon();\n    if (start) {\n      const lastShape = this.shapePrimitives[this.shapePrimitives.length - 1];\n      if (lastShape) {\n        let lx = lastShape.shape.x;\n        let ly = lastShape.shape.y;\n        if (lastShape.transform && !lastShape.transform.isIdentity()) {\n          const t = lastShape.transform;\n          const tempX = lx;\n          lx = t.a * lx + t.c * ly + t.tx;\n          ly = t.b * tempX + t.d * ly + t.ty;\n        }\n        this._currentPoly.points.push(lx, ly);\n      } else {\n        this._currentPoly.points.push(0, 0);\n      }\n    }\n  }\n  /** Builds the path. */\n  buildPath() {\n    const path = this._graphicsPath2D;\n    this.shapePrimitives.length = 0;\n    this._currentPoly = null;\n    for (let i = 0; i < path.instructions.length; i++) {\n      const instruction = path.instructions[i];\n      this[instruction.action](...instruction.data);\n    }\n    this.finish();\n  }\n  /** Gets the bounds of the path. */\n  get bounds() {\n    const bounds = this._bounds;\n    bounds.clear();\n    const shapePrimitives = this.shapePrimitives;\n    for (let i = 0; i < shapePrimitives.length; i++) {\n      const shapePrimitive = shapePrimitives[i];\n      const boundsRect = shapePrimitive.shape.getBounds(tempRectangle);\n      if (shapePrimitive.transform) {\n        bounds.addRect(boundsRect, shapePrimitive.transform);\n      } else {\n        bounds.addRect(boundsRect);\n      }\n    }\n    return bounds;\n  }\n}\n\nexport { ShapePath };\n//# sourceMappingURL=ShapePath.mjs.map\n","import { buildArc } from './buildArc.mjs';\n\n\"use strict\";\nfunction buildArcTo(points, x1, y1, x2, y2, radius) {\n  const fromX = points[points.length - 2];\n  const fromY = points[points.length - 1];\n  const a1 = fromY - y1;\n  const b1 = fromX - x1;\n  const a2 = y2 - y1;\n  const b2 = x2 - x1;\n  const mm = Math.abs(a1 * b2 - b1 * a2);\n  if (mm < 1e-8 || radius === 0) {\n    if (points[points.length - 2] !== x1 || points[points.length - 1] !== y1) {\n      points.push(x1, y1);\n    }\n    return;\n  }\n  const dd = a1 * a1 + b1 * b1;\n  const cc = a2 * a2 + b2 * b2;\n  const tt = a1 * a2 + b1 * b2;\n  const k1 = radius * Math.sqrt(dd) / mm;\n  const k2 = radius * Math.sqrt(cc) / mm;\n  const j1 = k1 * tt / dd;\n  const j2 = k2 * tt / cc;\n  const cx = k1 * b2 + k2 * b1;\n  const cy = k1 * a2 + k2 * a1;\n  const px = b1 * (k2 + j1);\n  const py = a1 * (k2 + j1);\n  const qx = b2 * (k1 + j2);\n  const qy = a2 * (k1 + j2);\n  const startAngle = Math.atan2(py - cy, px - cx);\n  const endAngle = Math.atan2(qy - cy, qx - cx);\n  buildArc(\n    points,\n    cx + x1,\n    cy + y1,\n    radius,\n    startAngle,\n    endAngle,\n    b1 * a2 > b2 * a1\n  );\n}\n\nexport { buildArcTo };\n//# sourceMappingURL=buildArcTo.mjs.map\n","\"use strict\";\nfunction roundedShapeArc(g, points, radius) {\n  const vecFrom = (p, pp) => {\n    const x = pp.x - p.x;\n    const y = pp.y - p.y;\n    const len = Math.sqrt(x * x + y * y);\n    const nx = x / len;\n    const ny = y / len;\n    return { len, nx, ny };\n  };\n  const sharpCorner = (i, p) => {\n    if (i === 0) {\n      g.moveTo(p.x, p.y);\n    } else {\n      g.lineTo(p.x, p.y);\n    }\n  };\n  let p1 = points[points.length - 1];\n  for (let i = 0; i < points.length; i++) {\n    const p2 = points[i % points.length];\n    const pRadius = p2.radius ?? radius;\n    if (pRadius <= 0) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    const p3 = points[(i + 1) % points.length];\n    const v1 = vecFrom(p2, p1);\n    const v2 = vecFrom(p2, p3);\n    if (v1.len < 1e-4 || v2.len < 1e-4) {\n      sharpCorner(i, p2);\n      p1 = p2;\n      continue;\n    }\n    let angle = Math.asin(v1.nx * v2.ny - v1.ny * v2.nx);\n    let radDirection = 1;\n    let drawDirection = false;\n    if (v1.nx * v2.nx - v1.ny * -v2.ny < 0) {\n      if (angle < 0) {\n        angle = Math.PI + angle;\n      } else {\n        angle = Math.PI - angle;\n        radDirection = -1;\n        drawDirection = true;\n      }\n    } else if (angle > 0) {\n      radDirection = -1;\n      drawDirection = true;\n    }\n    const halfAngle = angle / 2;\n    let cRadius;\n    let lenOut = Math.abs(\n      Math.cos(halfAngle) * pRadius / Math.sin(halfAngle)\n    );\n    if (lenOut > Math.min(v1.len / 2, v2.len / 2)) {\n      lenOut = Math.min(v1.len / 2, v2.len / 2);\n      cRadius = Math.abs(lenOut * Math.sin(halfAngle) / Math.cos(halfAngle));\n    } else {\n      cRadius = pRadius;\n    }\n    const cX = p2.x + v2.nx * lenOut + -v2.ny * cRadius * radDirection;\n    const cY = p2.y + v2.ny * lenOut + v2.nx * cRadius * radDirection;\n    const startAngle = Math.atan2(v1.ny, v1.nx) + Math.PI / 2 * radDirection;\n    const endAngle = Math.atan2(v2.ny, v2.nx) - Math.PI / 2 * radDirection;\n    if (i === 0) {\n      g.moveTo(\n        cX + Math.cos(startAngle) * cRadius,\n        cY + Math.sin(startAngle) * cRadius\n      );\n    }\n    g.arc(cX, cY, cRadius, startAngle, endAngle, drawDirection);\n    p1 = p2;\n  }\n}\nfunction roundedShapeQuadraticCurve(g, points, radius, smoothness) {\n  const distance = (p1, p2) => Math.sqrt((p1.x - p2.x) ** 2 + (p1.y - p2.y) ** 2);\n  const pointLerp = (p1, p2, t) => ({\n    x: p1.x + (p2.x - p1.x) * t,\n    y: p1.y + (p2.y - p1.y) * t\n  });\n  const numPoints = points.length;\n  for (let i = 0; i < numPoints; i++) {\n    const thisPoint = points[(i + 1) % numPoints];\n    const pRadius = thisPoint.radius ?? radius;\n    if (pRadius <= 0) {\n      if (i === 0) {\n        g.moveTo(thisPoint.x, thisPoint.y);\n      } else {\n        g.lineTo(thisPoint.x, thisPoint.y);\n      }\n      continue;\n    }\n    const lastPoint = points[i];\n    const nextPoint = points[(i + 2) % numPoints];\n    const lastEdgeLength = distance(lastPoint, thisPoint);\n    let start;\n    if (lastEdgeLength < 1e-4) {\n      start = thisPoint;\n    } else {\n      const lastOffsetDistance = Math.min(lastEdgeLength / 2, pRadius);\n      start = pointLerp(\n        thisPoint,\n        lastPoint,\n        lastOffsetDistance / lastEdgeLength\n      );\n    }\n    const nextEdgeLength = distance(nextPoint, thisPoint);\n    let end;\n    if (nextEdgeLength < 1e-4) {\n      end = thisPoint;\n    } else {\n      const nextOffsetDistance = Math.min(nextEdgeLength / 2, pRadius);\n      end = pointLerp(\n        thisPoint,\n        nextPoint,\n        nextOffsetDistance / nextEdgeLength\n      );\n    }\n    if (i === 0) {\n      g.moveTo(start.x, start.y);\n    } else {\n      g.lineTo(start.x, start.y);\n    }\n    g.quadraticCurveTo(thisPoint.x, thisPoint.y, end.x, end.y, smoothness);\n  }\n}\n\nexport { roundedShapeArc, roundedShapeQuadraticCurve };\n//# sourceMappingURL=roundShape.mjs.map\n","import { Point } from '../../../../maths/point/Point.mjs';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { parseSVGPath } from '../svg/parseSVGPath.mjs';\nimport { ShapePath } from './ShapePath.mjs';\n\n\"use strict\";\nclass GraphicsPath {\n  /**\n   * Creates a `GraphicsPath` instance optionally from an SVG path string or an array of `PathInstruction`.\n   * @param instructions - An SVG path string or an array of `PathInstruction` objects.\n   * @param signed\n   */\n  constructor(instructions, signed = false) {\n    this.instructions = [];\n    /** unique id for this graphics path */\n    this.uid = uid(\"graphicsPath\");\n    this._dirty = true;\n    this.checkForHoles = signed;\n    if (typeof instructions === \"string\") {\n      parseSVGPath(instructions, this);\n    } else {\n      this.instructions = instructions?.slice() ?? [];\n    }\n  }\n  /**\n   * Provides access to the internal shape path, ensuring it is up-to-date with the current instructions.\n   * @returns The `ShapePath` instance associated with this `GraphicsPath`.\n   */\n  get shapePath() {\n    if (!this._shapePath) {\n      this._shapePath = new ShapePath(this);\n    }\n    if (this._dirty) {\n      this._dirty = false;\n      this._shapePath.buildPath();\n    }\n    return this._shapePath;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @param transform - An optional transformation to apply to the added path.\n   * @returns The instance of the current object for chaining.\n   */\n  addPath(path, transform) {\n    path = path.clone();\n    this.instructions.push({ action: \"addPath\", data: [path, transform] });\n    this._dirty = true;\n    return this;\n  }\n  arc(...args) {\n    this.instructions.push({ action: \"arc\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcTo(...args) {\n    this.instructions.push({ action: \"arcTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  arcToSvg(...args) {\n    this.instructions.push({ action: \"arcToSvg\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  bezierCurveTo(...args) {\n    this.instructions.push({ action: \"bezierCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires two points: the second control point and the end point. The first control point is assumed to be\n   * The starting point is the last point in the current path.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveToShort(cp2x, cp2y, x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cp1x = 0;\n    let cp1y = 0;\n    if (!last || last.action !== \"bezierCurveTo\") {\n      cp1x = lastPoint.x;\n      cp1y = lastPoint.y;\n    } else {\n      cp1x = last.data[2];\n      cp1y = last.data[3];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cp1x = currentX + (currentX - cp1x);\n      cp1y = currentY + (currentY - cp1y);\n    }\n    this.instructions.push({ action: \"bezierCurveTo\", data: [cp1x, cp1y, cp2x, cp2y, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this.instructions.push({ action: \"closePath\", data: [] });\n    this._dirty = true;\n    return this;\n  }\n  ellipse(...args) {\n    this.instructions.push({ action: \"ellipse\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  lineTo(...args) {\n    this.instructions.push({ action: \"lineTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  moveTo(...args) {\n    this.instructions.push({ action: \"moveTo\", data: args });\n    return this;\n  }\n  quadraticCurveTo(...args) {\n    this.instructions.push({ action: \"quadraticCurveTo\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It uses the previous point as the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveToShort(x, y, smoothness) {\n    const last = this.instructions[this.instructions.length - 1];\n    const lastPoint = this.getLastPoint(Point.shared);\n    let cpx1 = 0;\n    let cpy1 = 0;\n    if (!last || last.action !== \"quadraticCurveTo\") {\n      cpx1 = lastPoint.x;\n      cpy1 = lastPoint.y;\n    } else {\n      cpx1 = last.data[0];\n      cpy1 = last.data[1];\n      const currentX = lastPoint.x;\n      const currentY = lastPoint.y;\n      cpx1 = currentX + (currentX - cpx1);\n      cpy1 = currentY + (currentY - cpy1);\n    }\n    this.instructions.push({ action: \"quadraticCurveTo\", data: [cpx1, cpy1, x, y, smoothness] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h, transform) {\n    this.instructions.push({ action: \"rect\", data: [x, y, w, h, transform] });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @param transform - An optional `Matrix` object to apply a transformation to the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius, transform) {\n    this.instructions.push({ action: \"circle\", data: [x, y, radius, transform] });\n    this._dirty = true;\n    return this;\n  }\n  roundRect(...args) {\n    this.instructions.push({ action: \"roundRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  poly(...args) {\n    this.instructions.push({ action: \"poly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  regularPoly(...args) {\n    this.instructions.push({ action: \"regularPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundPoly(...args) {\n    this.instructions.push({ action: \"roundPoly\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  roundShape(...args) {\n    this.instructions.push({ action: \"roundShape\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  filletRect(...args) {\n    this.instructions.push({ action: \"filletRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  chamferRect(...args) {\n    this.instructions.push({ action: \"chamferRect\", data: args });\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @param transform - An optional `Matrix` object to apply a transformation to the star.\n   * This can include rotations, scaling, and translations.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  // eslint-disable-next-line max-len\n  star(x, y, points, radius, innerRadius, rotation, transform) {\n    innerRadius || (innerRadius = radius / 2);\n    const startAngle = -1 * Math.PI / 2 + rotation;\n    const len = points * 2;\n    const delta = Math.PI * 2 / len;\n    const polygon = [];\n    for (let i = 0; i < len; i++) {\n      const r = i % 2 ? innerRadius : radius;\n      const angle = i * delta + startAngle;\n      polygon.push(\n        x + r * Math.cos(angle),\n        y + r * Math.sin(angle)\n      );\n    }\n    this.poly(polygon, true, transform);\n    return this;\n  }\n  /**\n   * Creates a copy of the current `GraphicsPath` instance. This method supports both shallow and deep cloning.\n   * A shallow clone copies the reference of the instructions array, while a deep clone creates a new array and\n   * copies each instruction individually, ensuring that modifications to the instructions of the cloned `GraphicsPath`\n   * do not affect the original `GraphicsPath` and vice versa.\n   * @param deep - A boolean flag indicating whether the clone should be deep.\n   * @returns A new `GraphicsPath` instance that is a clone of the current instance.\n   */\n  clone(deep = false) {\n    const newGraphicsPath2D = new GraphicsPath();\n    newGraphicsPath2D.checkForHoles = this.checkForHoles;\n    if (!deep) {\n      newGraphicsPath2D.instructions = this.instructions.slice();\n    } else {\n      for (let i = 0; i < this.instructions.length; i++) {\n        const instruction = this.instructions[i];\n        newGraphicsPath2D.instructions.push({ action: instruction.action, data: instruction.data.slice() });\n      }\n    }\n    return newGraphicsPath2D;\n  }\n  clear() {\n    this.instructions.length = 0;\n    this._dirty = true;\n    return this;\n  }\n  /**\n   * Applies a transformation matrix to all drawing instructions within the `GraphicsPath`.\n   * This method enables the modification of the path's geometry according to the provided\n   * transformation matrix, which can include translations, rotations, scaling, and skewing.\n   *\n   * Each drawing instruction in the path is updated to reflect the transformation,\n   * ensuring the visual representation of the path is consistent with the applied matrix.\n   *\n   * Note: The transformation is applied directly to the coordinates and control points of the drawing instructions,\n   * not to the path as a whole. This means the transformation's effects are baked into the individual instructions,\n   * allowing for fine-grained control over the path's appearance.\n   * @param matrix - A `Matrix` object representing the transformation to apply.\n   * @returns The instance of the current object for chaining further operations.\n   */\n  transform(matrix) {\n    if (matrix.isIdentity())\n      return this;\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let x = 0;\n    let y = 0;\n    let cpx1 = 0;\n    let cpy1 = 0;\n    let cpx2 = 0;\n    let cpy2 = 0;\n    let rx = 0;\n    let ry = 0;\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const data = instruction.data;\n      switch (instruction.action) {\n        case \"moveTo\":\n        case \"lineTo\":\n          x = data[0];\n          y = data[1];\n          data[0] = a * x + c * y + tx;\n          data[1] = b * x + d * y + ty;\n          break;\n        case \"bezierCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          cpx2 = data[2];\n          cpy2 = data[3];\n          x = data[4];\n          y = data[5];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * cpx2 + c * cpy2 + tx;\n          data[3] = b * cpx2 + d * cpy2 + ty;\n          data[4] = a * x + c * y + tx;\n          data[5] = b * x + d * y + ty;\n          break;\n        case \"quadraticCurveTo\":\n          cpx1 = data[0];\n          cpy1 = data[1];\n          x = data[2];\n          y = data[3];\n          data[0] = a * cpx1 + c * cpy1 + tx;\n          data[1] = b * cpx1 + d * cpy1 + ty;\n          data[2] = a * x + c * y + tx;\n          data[3] = b * x + d * y + ty;\n          break;\n        case \"arcToSvg\":\n          x = data[5];\n          y = data[6];\n          rx = data[0];\n          ry = data[1];\n          data[0] = a * rx + c * ry;\n          data[1] = b * rx + d * ry;\n          data[5] = a * x + c * y + tx;\n          data[6] = b * x + d * y + ty;\n          break;\n        case \"circle\":\n          data[4] = adjustTransform(data[3], matrix);\n          break;\n        case \"rect\":\n          data[4] = adjustTransform(data[4], matrix);\n          break;\n        case \"ellipse\":\n          data[8] = adjustTransform(data[8], matrix);\n          break;\n        case \"roundRect\":\n          data[5] = adjustTransform(data[5], matrix);\n          break;\n        case \"addPath\":\n          data[0].transform(matrix);\n          break;\n        case \"poly\":\n          data[2] = adjustTransform(data[2], matrix);\n          break;\n        default:\n          warn(\"unknown transform action\", instruction.action);\n          break;\n      }\n    }\n    this._dirty = true;\n    return this;\n  }\n  get bounds() {\n    return this.shapePath.bounds;\n  }\n  /**\n   * Retrieves the last point from the current drawing instructions in the `GraphicsPath`.\n   * This method is useful for operations that depend on the path's current endpoint,\n   * such as connecting subsequent shapes or paths. It supports various drawing instructions,\n   * ensuring the last point's position is accurately determined regardless of the path's complexity.\n   *\n   * If the last instruction is a `closePath`, the method iterates backward through the instructions\n   *  until it finds an actionable instruction that defines a point (e.g., `moveTo`, `lineTo`,\n   * `quadraticCurveTo`, etc.). For compound paths added via `addPath`, it recursively retrieves\n   * the last point from the nested path.\n   * @param out - A `Point` object where the last point's coordinates will be stored.\n   * This object is modified directly to contain the result.\n   * @returns The `Point` object containing the last point's coordinates.\n   */\n  getLastPoint(out) {\n    let index = this.instructions.length - 1;\n    let lastInstruction = this.instructions[index];\n    if (!lastInstruction) {\n      out.x = 0;\n      out.y = 0;\n      return out;\n    }\n    while (lastInstruction.action === \"closePath\") {\n      index--;\n      if (index < 0) {\n        out.x = 0;\n        out.y = 0;\n        return out;\n      }\n      lastInstruction = this.instructions[index];\n    }\n    switch (lastInstruction.action) {\n      case \"moveTo\":\n      case \"lineTo\":\n        out.x = lastInstruction.data[0];\n        out.y = lastInstruction.data[1];\n        break;\n      case \"quadraticCurveTo\":\n        out.x = lastInstruction.data[2];\n        out.y = lastInstruction.data[3];\n        break;\n      case \"bezierCurveTo\":\n        out.x = lastInstruction.data[4];\n        out.y = lastInstruction.data[5];\n        break;\n      case \"arc\":\n      case \"arcToSvg\":\n        out.x = lastInstruction.data[5];\n        out.y = lastInstruction.data[6];\n        break;\n      case \"addPath\":\n        lastInstruction.data[0].getLastPoint(out);\n        break;\n    }\n    return out;\n  }\n}\nfunction adjustTransform(currentMatrix, transform) {\n  if (currentMatrix) {\n    return currentMatrix.prepend(transform);\n  }\n  return transform.clone();\n}\n\nexport { GraphicsPath };\n//# sourceMappingURL=GraphicsPath.mjs.map\n","import parse from 'parse-svg-path';\nimport { warn } from '../../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction parseSVGPath(svgPath, path) {\n  const commands = parse(svgPath);\n  const subpaths = [];\n  let currentSubPath = null;\n  let lastX = 0;\n  let lastY = 0;\n  for (let i = 0; i < commands.length; i++) {\n    const command = commands[i];\n    const type = command[0];\n    const data = command;\n    switch (type) {\n      case \"M\":\n        lastX = data[1];\n        lastY = data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"m\":\n        lastX += data[1];\n        lastY += data[2];\n        path.moveTo(lastX, lastY);\n        break;\n      case \"H\":\n        lastX = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"h\":\n        lastX += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"V\":\n        lastY = data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"v\":\n        lastY += data[1];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"L\":\n        lastX = data[1];\n        lastY = data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"l\":\n        lastX += data[1];\n        lastY += data[2];\n        path.lineTo(lastX, lastY);\n        break;\n      case \"C\":\n        lastX = data[5];\n        lastY = data[6];\n        path.bezierCurveTo(\n          data[1],\n          data[2],\n          // First control point\n          data[3],\n          data[4],\n          // Second control point\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"c\":\n        path.bezierCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          // First control point\n          lastX + data[3],\n          lastY + data[4],\n          // Second control point\n          lastX + data[5],\n          lastY + data[6]\n          // End point\n        );\n        lastX += data[5];\n        lastY += data[6];\n        break;\n      case \"S\":\n        lastX = data[3];\n        lastY = data[4];\n        path.bezierCurveToShort(\n          data[1],\n          data[2],\n          // Control point\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"s\":\n        path.bezierCurveToShort(\n          lastX + data[1],\n          lastY + data[2],\n          // Control point\n          lastX + data[3],\n          lastY + data[4]\n          // End point\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"Q\":\n        lastX = data[3];\n        lastY = data[4];\n        path.quadraticCurveTo(\n          data[1],\n          data[2],\n          // Control point\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"q\":\n        path.quadraticCurveTo(\n          lastX + data[1],\n          lastY + data[2],\n          // Control point\n          lastX + data[3],\n          lastY + data[4]\n          // End point\n        );\n        lastX += data[3];\n        lastY += data[4];\n        break;\n      case \"T\":\n        lastX = data[1];\n        lastY = data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"t\":\n        lastX += data[1];\n        lastY += data[2];\n        path.quadraticCurveToShort(\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"A\":\n        lastX = data[6];\n        lastY = data[7];\n        path.arcToSvg(\n          data[1],\n          // rx\n          data[2],\n          // ry\n          data[3],\n          // x-axis-rotation\n          data[4],\n          // large-arc-flag\n          data[5],\n          // sweep-flag\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"a\":\n        lastX += data[6];\n        lastY += data[7];\n        path.arcToSvg(\n          data[1],\n          // rx\n          data[2],\n          // ry\n          data[3],\n          // x-axis-rotation\n          data[4],\n          // large-arc-flag\n          data[5],\n          // sweep-flag\n          lastX,\n          lastY\n          // End point\n        );\n        break;\n      case \"Z\":\n      case \"z\":\n        path.closePath();\n        if (subpaths.length > 0) {\n          currentSubPath = subpaths.pop();\n          if (currentSubPath) {\n            lastX = currentSubPath.startX;\n            lastY = currentSubPath.startY;\n          } else {\n            lastX = 0;\n            lastY = 0;\n          }\n        }\n        currentSubPath = null;\n        break;\n      default:\n        warn(`Unknown SVG path command: ${type}`);\n    }\n    if (type !== \"Z\" && type !== \"z\") {\n      if (currentSubPath === null) {\n        currentSubPath = { startX: lastX, startY: lastY };\n        subpaths.push(currentSubPath);\n      }\n    }\n  }\n  return path;\n}\n\nexport { parseSVGPath };\n//# sourceMappingURL=parseSVGPath.mjs.map\n","\"use strict\";\nfunction parseSVGFloatAttribute(svg, id, defaultValue) {\n  const value = svg.getAttribute(id);\n  return value ? Number(value) : defaultValue;\n}\n\nexport { parseSVGFloatAttribute };\n//# sourceMappingURL=parseSVGFloatAttribute.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { warn } from '../../../../utils/logging/warn.mjs';\nimport { FillGradient } from '../fill/FillGradient.mjs';\nimport { parseSVGFloatAttribute } from './parseSVGFloatAttribute.mjs';\n\n\"use strict\";\nfunction parseSVGDefinitions(svg, session) {\n  const definitions = svg.querySelectorAll(\"defs\");\n  for (let i = 0; i < definitions.length; i++) {\n    const definition = definitions[i];\n    for (let j = 0; j < definition.children.length; j++) {\n      const child = definition.children[j];\n      switch (child.nodeName.toLowerCase()) {\n        case \"lineargradient\":\n          session.defs[child.id] = parseLinearGradient(child);\n          break;\n        case \"radialgradient\":\n          session.defs[child.id] = parseRadialGradient(child);\n          break;\n        default:\n          break;\n      }\n    }\n  }\n}\nfunction parseLinearGradient(child) {\n  const x0 = parseSVGFloatAttribute(child, \"x1\", 0);\n  const y0 = parseSVGFloatAttribute(child, \"y1\", 0);\n  const x1 = parseSVGFloatAttribute(child, \"x2\", 1);\n  const y1 = parseSVGFloatAttribute(child, \"y2\", 0);\n  const gradientUnit = child.getAttribute(\"gradientUnits\") || \"objectBoundingBox\";\n  const gradient = new FillGradient(\n    x0,\n    y0,\n    x1,\n    y1,\n    gradientUnit === \"objectBoundingBox\" ? \"local\" : \"global\"\n  );\n  for (let k = 0; k < child.children.length; k++) {\n    const stop = child.children[k];\n    const offset = parseSVGFloatAttribute(stop, \"offset\", 0);\n    const color = Color.shared.setValue(stop.getAttribute(\"stop-color\")).toNumber();\n    gradient.addColorStop(offset, color);\n  }\n  return gradient;\n}\nfunction parseRadialGradient(_child) {\n  warn(\"[SVG Parser] Radial gradients are not yet supported\");\n  return new FillGradient(0, 0, 1, 0);\n}\n\nexport { parseSVGDefinitions };\n//# sourceMappingURL=parseSVGDefinitions.mjs.map\n","\"use strict\";\nfunction extractSvgUrlId(url) {\n  const match = url.match(/url\\s*\\(\\s*['\"]?\\s*#([^'\"\\s)]+)\\s*['\"]?\\s*\\)/i);\n  return match ? match[1] : \"\";\n}\n\nexport { extractSvgUrlId };\n//# sourceMappingURL=extractSvgUrlId.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { extractSvgUrlId } from './utils/extractSvgUrlId.mjs';\n\n\"use strict\";\nconst styleAttributes = {\n  // Fill properties\n  fill: { type: \"paint\", default: 0 },\n  // Fill color/gradient\n  \"fill-opacity\": { type: \"number\", default: 1 },\n  // Fill transparency\n  // Stroke properties\n  stroke: { type: \"paint\", default: 0 },\n  // Stroke color/gradient\n  \"stroke-width\": { type: \"number\", default: 1 },\n  // Width of stroke\n  \"stroke-opacity\": { type: \"number\", default: 1 },\n  // Stroke transparency\n  \"stroke-linecap\": { type: \"string\", default: \"butt\" },\n  // End cap style: butt, round, square\n  \"stroke-linejoin\": { type: \"string\", default: \"miter\" },\n  // Join style: miter, round, bevel\n  \"stroke-miterlimit\": { type: \"number\", default: 10 },\n  // Limit on miter join sharpness\n  \"stroke-dasharray\": { type: \"string\", default: \"none\" },\n  // Dash pattern\n  \"stroke-dashoffset\": { type: \"number\", default: 0 },\n  // Offset for dash pattern\n  // Global properties\n  opacity: { type: \"number\", default: 1 }\n  // Overall opacity\n};\nfunction parseSVGStyle(svg, session) {\n  const style = svg.getAttribute(\"style\");\n  const strokeStyle = {};\n  const fillStyle = {};\n  const result = {\n    strokeStyle,\n    fillStyle,\n    useFill: false,\n    useStroke: false\n  };\n  for (const key in styleAttributes) {\n    const attribute = svg.getAttribute(key);\n    if (attribute) {\n      parseAttribute(session, result, key, attribute.trim());\n    }\n  }\n  if (style) {\n    const styleParts = style.split(\";\");\n    for (let i = 0; i < styleParts.length; i++) {\n      const stylePart = styleParts[i].trim();\n      const [key, value] = stylePart.split(\":\");\n      if (styleAttributes[key]) {\n        parseAttribute(session, result, key, value.trim());\n      }\n    }\n  }\n  return {\n    strokeStyle: result.useStroke ? strokeStyle : null,\n    fillStyle: result.useFill ? fillStyle : null,\n    useFill: result.useFill,\n    useStroke: result.useStroke\n  };\n}\nfunction parseAttribute(session, result, id, value) {\n  switch (id) {\n    case \"stroke\":\n      if (value !== \"none\") {\n        if (value.startsWith(\"url(\")) {\n          const id2 = extractSvgUrlId(value);\n          result.strokeStyle.fill = session.defs[id2];\n        } else {\n          result.strokeStyle.color = Color.shared.setValue(value).toNumber();\n        }\n        result.useStroke = true;\n      }\n      break;\n    case \"stroke-width\":\n      result.strokeStyle.width = Number(value);\n      break;\n    case \"fill\":\n      if (value !== \"none\") {\n        if (value.startsWith(\"url(\")) {\n          const id2 = extractSvgUrlId(value);\n          result.fillStyle.fill = session.defs[id2];\n        } else {\n          result.fillStyle.color = Color.shared.setValue(value).toNumber();\n        }\n        result.useFill = true;\n      }\n      break;\n    case \"fill-opacity\":\n      result.fillStyle.alpha = Number(value);\n      break;\n    case \"stroke-opacity\":\n      result.strokeStyle.alpha = Number(value);\n      break;\n    case \"opacity\":\n      result.fillStyle.alpha = Number(value);\n      result.strokeStyle.alpha = Number(value);\n      break;\n  }\n}\n\nexport { parseSVGStyle, styleAttributes };\n//# sourceMappingURL=parseSVGStyle.mjs.map\n","import { GraphicsPath } from '../../path/GraphicsPath.mjs';\n\n\"use strict\";\nfunction extractSubpaths(pathData) {\n  const parts = pathData.split(/(?=[Mm])/);\n  const subpaths = parts.filter((part) => part.trim().length > 0);\n  return subpaths;\n}\nfunction calculatePathArea(pathData) {\n  const coords = pathData.match(/[-+]?[0-9]*\\.?[0-9]+/g);\n  if (!coords || coords.length < 4)\n    return 0;\n  const numbers = coords.map(Number);\n  const xs = [];\n  const ys = [];\n  for (let i = 0; i < numbers.length; i += 2) {\n    if (i + 1 < numbers.length) {\n      xs.push(numbers[i]);\n      ys.push(numbers[i + 1]);\n    }\n  }\n  if (xs.length === 0 || ys.length === 0)\n    return 0;\n  const minX = Math.min(...xs);\n  const maxX = Math.max(...xs);\n  const minY = Math.min(...ys);\n  const maxY = Math.max(...ys);\n  const area = (maxX - minX) * (maxY - minY);\n  return area;\n}\nfunction appendSVGPath(pathData, graphicsPath) {\n  const tempPath = new GraphicsPath(pathData, false);\n  for (const instruction of tempPath.instructions) {\n    graphicsPath.instructions.push(instruction);\n  }\n}\n\nexport { appendSVGPath, calculatePathArea, extractSubpaths };\n//# sourceMappingURL=pathOperations.mjs.map\n","import { warn } from '../../../../utils/logging/warn.mjs';\nimport { GraphicsPath } from '../path/GraphicsPath.mjs';\nimport { parseSVGDefinitions } from './parseSVGDefinitions.mjs';\nimport { parseSVGFloatAttribute } from './parseSVGFloatAttribute.mjs';\nimport { parseSVGStyle } from './parseSVGStyle.mjs';\nimport { checkForNestedPattern } from './utils/fillOperations.mjs';\nimport { extractSubpaths, calculatePathArea, appendSVGPath } from './utils/pathOperations.mjs';\n\n\"use strict\";\nfunction SVGParser(svg, graphicsContext) {\n  if (typeof svg === \"string\") {\n    const div = document.createElement(\"div\");\n    div.innerHTML = svg.trim();\n    svg = div.querySelector(\"svg\");\n  }\n  const session = {\n    context: graphicsContext,\n    defs: {},\n    path: new GraphicsPath()\n  };\n  parseSVGDefinitions(svg, session);\n  const children = svg.children;\n  const { fillStyle, strokeStyle } = parseSVGStyle(svg, session);\n  for (let i = 0; i < children.length; i++) {\n    const child = children[i];\n    if (child.nodeName.toLowerCase() === \"defs\")\n      continue;\n    renderChildren(child, session, fillStyle, strokeStyle);\n  }\n  return graphicsContext;\n}\nfunction renderChildren(svg, session, fillStyle, strokeStyle) {\n  const children = svg.children;\n  const { fillStyle: f1, strokeStyle: s1 } = parseSVGStyle(svg, session);\n  if (f1 && fillStyle) {\n    fillStyle = { ...fillStyle, ...f1 };\n  } else if (f1) {\n    fillStyle = f1;\n  }\n  if (s1 && strokeStyle) {\n    strokeStyle = { ...strokeStyle, ...s1 };\n  } else if (s1) {\n    strokeStyle = s1;\n  }\n  const noStyle = !fillStyle && !strokeStyle;\n  if (noStyle) {\n    fillStyle = { color: 0 };\n  }\n  let x;\n  let y;\n  let x1;\n  let y1;\n  let x2;\n  let y2;\n  let cx;\n  let cy;\n  let r;\n  let rx;\n  let ry;\n  let points;\n  let pointsString;\n  let d;\n  let graphicsPath;\n  let width;\n  let height;\n  switch (svg.nodeName.toLowerCase()) {\n    case \"path\": {\n      d = svg.getAttribute(\"d\");\n      const fillRule = svg.getAttribute(\"fill-rule\");\n      const subpaths = extractSubpaths(d);\n      const hasExplicitEvenodd = fillRule === \"evenodd\";\n      const hasMultipleSubpaths = subpaths.length > 1;\n      const shouldProcessHoles = hasExplicitEvenodd && hasMultipleSubpaths;\n      if (shouldProcessHoles) {\n        const subpathsWithArea = subpaths.map((subpath) => ({\n          path: subpath,\n          area: calculatePathArea(subpath)\n        }));\n        subpathsWithArea.sort((a, b) => b.area - a.area);\n        const useMultipleHolesApproach = subpaths.length > 3 || !checkForNestedPattern(subpathsWithArea);\n        if (useMultipleHolesApproach) {\n          for (let i = 0; i < subpathsWithArea.length; i++) {\n            const subpath = subpathsWithArea[i];\n            const isMainShape = i === 0;\n            session.context.beginPath();\n            const newPath = new GraphicsPath(void 0, true);\n            appendSVGPath(subpath.path, newPath);\n            session.context.path(newPath);\n            if (isMainShape) {\n              if (fillStyle)\n                session.context.fill(fillStyle);\n              if (strokeStyle)\n                session.context.stroke(strokeStyle);\n            } else {\n              session.context.cut();\n            }\n          }\n        } else {\n          for (let i = 0; i < subpathsWithArea.length; i++) {\n            const subpath = subpathsWithArea[i];\n            const isHole = i % 2 === 1;\n            session.context.beginPath();\n            const newPath = new GraphicsPath(void 0, true);\n            appendSVGPath(subpath.path, newPath);\n            session.context.path(newPath);\n            if (isHole) {\n              session.context.cut();\n            } else {\n              if (fillStyle)\n                session.context.fill(fillStyle);\n              if (strokeStyle)\n                session.context.stroke(strokeStyle);\n            }\n          }\n        }\n      } else {\n        const useEvenoddForGraphicsPath = fillRule ? fillRule === \"evenodd\" : true;\n        graphicsPath = new GraphicsPath(d, useEvenoddForGraphicsPath);\n        session.context.path(graphicsPath);\n        if (fillStyle)\n          session.context.fill(fillStyle);\n        if (strokeStyle)\n          session.context.stroke(strokeStyle);\n      }\n      break;\n    }\n    case \"circle\":\n      cx = parseSVGFloatAttribute(svg, \"cx\", 0);\n      cy = parseSVGFloatAttribute(svg, \"cy\", 0);\n      r = parseSVGFloatAttribute(svg, \"r\", 0);\n      session.context.ellipse(cx, cy, r, r);\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"rect\":\n      x = parseSVGFloatAttribute(svg, \"x\", 0);\n      y = parseSVGFloatAttribute(svg, \"y\", 0);\n      width = parseSVGFloatAttribute(svg, \"width\", 0);\n      height = parseSVGFloatAttribute(svg, \"height\", 0);\n      rx = parseSVGFloatAttribute(svg, \"rx\", 0);\n      ry = parseSVGFloatAttribute(svg, \"ry\", 0);\n      if (rx || ry) {\n        session.context.roundRect(x, y, width, height, rx || ry);\n      } else {\n        session.context.rect(x, y, width, height);\n      }\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"ellipse\":\n      cx = parseSVGFloatAttribute(svg, \"cx\", 0);\n      cy = parseSVGFloatAttribute(svg, \"cy\", 0);\n      rx = parseSVGFloatAttribute(svg, \"rx\", 0);\n      ry = parseSVGFloatAttribute(svg, \"ry\", 0);\n      session.context.beginPath();\n      session.context.ellipse(cx, cy, rx, ry);\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"line\":\n      x1 = parseSVGFloatAttribute(svg, \"x1\", 0);\n      y1 = parseSVGFloatAttribute(svg, \"y1\", 0);\n      x2 = parseSVGFloatAttribute(svg, \"x2\", 0);\n      y2 = parseSVGFloatAttribute(svg, \"y2\", 0);\n      session.context.beginPath();\n      session.context.moveTo(x1, y1);\n      session.context.lineTo(x2, y2);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"polygon\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, true);\n      if (fillStyle)\n        session.context.fill(fillStyle);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"polyline\":\n      pointsString = svg.getAttribute(\"points\");\n      points = pointsString.match(/\\d+/g).map((n) => parseInt(n, 10));\n      session.context.poly(points, false);\n      if (strokeStyle)\n        session.context.stroke(strokeStyle);\n      break;\n    case \"g\":\n    case \"svg\":\n      break;\n    default: {\n      warn(`[SVG parser] <${svg.nodeName}> elements unsupported`);\n      break;\n    }\n  }\n  if (noStyle) {\n    fillStyle = null;\n  }\n  for (let i = 0; i < children.length; i++) {\n    renderChildren(children[i], session, fillStyle, strokeStyle);\n  }\n}\n\nexport { SVGParser };\n//# sourceMappingURL=SVGParser.mjs.map\n","\"use strict\";\nfunction checkForNestedPattern(subpathsWithArea) {\n  if (subpathsWithArea.length <= 2) {\n    return true;\n  }\n  const areas = subpathsWithArea.map((s) => s.area).sort((a, b) => b - a);\n  const [largestArea, secondArea] = areas;\n  const smallestArea = areas[areas.length - 1];\n  const largestToSecondRatio = largestArea / secondArea;\n  const secondToSmallestRatio = secondArea / smallestArea;\n  if (largestToSecondRatio > 3 && secondToSmallestRatio < 2) {\n    return false;\n  }\n  return true;\n}\nfunction getFillInstructionData(context, index = 0) {\n  const instruction = context.instructions[index];\n  if (!instruction || instruction.action !== \"fill\") {\n    throw new Error(`Expected fill instruction at index ${index}, got ${instruction?.action || \"undefined\"}`);\n  }\n  return instruction.data;\n}\n\nexport { checkForNestedPattern, getFillInstructionData };\n//# sourceMappingURL=fillOperations.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../../color/Color.mjs';\nimport { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Point } from '../../../maths/point/Point.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { uid } from '../../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { Bounds } from '../../container/bounds/Bounds.mjs';\nimport { GraphicsPath } from './path/GraphicsPath.mjs';\nimport { SVGParser } from './svg/SVGParser.mjs';\nimport { toFillStyle, toStrokeStyle } from './utils/convertFillInputToFillStyle.mjs';\n\n\"use strict\";\nconst tmpPoint = new Point();\nconst tempMatrix = new Matrix();\nconst _GraphicsContext = class _GraphicsContext extends EventEmitter {\n  constructor() {\n    super(...arguments);\n    /**\n     * unique id for this graphics context\n     * @internal\n     */\n    this.uid = uid(\"graphicsContext\");\n    /**\n     * Indicates whether content is updated and have to be re-rendered.\n     * @internal\n     */\n    this.dirty = true;\n    /** The batch mode for this graphics context. It can be 'auto', 'batch', or 'no-batch'. */\n    this.batchMode = \"auto\";\n    /** @internal */\n    this.instructions = [];\n    this._activePath = new GraphicsPath();\n    this._transform = new Matrix();\n    this._fillStyle = { ..._GraphicsContext.defaultFillStyle };\n    this._strokeStyle = { ..._GraphicsContext.defaultStrokeStyle };\n    this._stateStack = [];\n    this._tick = 0;\n    this._bounds = new Bounds();\n    this._boundsDirty = true;\n  }\n  /**\n   * Creates a new GraphicsContext object that is a clone of this instance, copying all properties,\n   * including the current drawing state, transformations, styles, and instructions.\n   * @returns A new GraphicsContext instance with the same properties and state as this one.\n   */\n  clone() {\n    const clone = new _GraphicsContext();\n    clone.batchMode = this.batchMode;\n    clone.instructions = this.instructions.slice();\n    clone._activePath = this._activePath.clone();\n    clone._transform = this._transform.clone();\n    clone._fillStyle = { ...this._fillStyle };\n    clone._strokeStyle = { ...this._strokeStyle };\n    clone._stateStack = this._stateStack.slice();\n    clone._bounds = this._bounds.clone();\n    clone._boundsDirty = true;\n    return clone;\n  }\n  /**\n   * The current fill style of the graphics context. This can be a color, gradient, pattern, or a more complex style defined by a FillStyle object.\n   */\n  get fillStyle() {\n    return this._fillStyle;\n  }\n  set fillStyle(value) {\n    this._fillStyle = toFillStyle(value, _GraphicsContext.defaultFillStyle);\n  }\n  /**\n   * The current stroke style of the graphics context. Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   */\n  get strokeStyle() {\n    return this._strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._strokeStyle = toStrokeStyle(value, _GraphicsContext.defaultStrokeStyle);\n  }\n  /**\n   * Sets the current fill style of the graphics context. The fill style can be a color, gradient,\n   * pattern, or a more complex style defined by a FillStyle object.\n   * @param style - The fill style to apply. This can be a simple color, a gradient or pattern object,\n   *                or a FillStyle or ConvertedFillStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setFillStyle(style) {\n    this._fillStyle = toFillStyle(style, _GraphicsContext.defaultFillStyle);\n    return this;\n  }\n  /**\n   * Sets the current stroke style of the graphics context. Similar to fill styles, stroke styles can\n   * encompass colors, gradients, patterns, or more detailed configurations via a StrokeStyle object.\n   * @param style - The stroke style to apply. Can be defined as a color, a gradient or pattern,\n   *                or a StrokeStyle or ConvertedStrokeStyle object.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  setStrokeStyle(style) {\n    this._strokeStyle = toFillStyle(style, _GraphicsContext.defaultStrokeStyle);\n    return this;\n  }\n  texture(texture, tint, dx, dy, dw, dh) {\n    this.instructions.push({\n      action: \"texture\",\n      data: {\n        image: texture,\n        dx: dx || 0,\n        dy: dy || 0,\n        dw: dw || texture.frame.width,\n        dh: dh || texture.frame.height,\n        transform: this._transform.clone(),\n        alpha: this._fillStyle.alpha,\n        style: tint ? Color.shared.setValue(tint).toNumber() : 16777215\n      }\n    });\n    this.onUpdate();\n    return this;\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  beginPath() {\n    this._activePath = new GraphicsPath();\n    return this;\n  }\n  fill(style, alpha) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction?.action === \"stroke\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      if (alpha !== void 0 && typeof style === \"number\") {\n        deprecation(v8_0_0, \"GraphicsContext.fill(color, alpha) is deprecated, use GraphicsContext.fill({ color, alpha }) instead\");\n        style = { color: style, alpha };\n      }\n      this._fillStyle = toFillStyle(style, _GraphicsContext.defaultFillStyle);\n    }\n    this.instructions.push({\n      action: \"fill\",\n      // TODO copy fill style!\n      data: { style: this.fillStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  _initNextPathLocation() {\n    const { x, y } = this._activePath.getLastPoint(Point.shared);\n    this._activePath.clear();\n    this._activePath.moveTo(x, y);\n  }\n  /**\n   * Strokes the current path with the current stroke style. This method can take an optional\n   * FillInput parameter to define the stroke's appearance, including its color, width, and other properties.\n   * @param style - (Optional) The stroke style to apply. Can be defined as a simple color or a more complex style object. If omitted, uses the current stroke style.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  stroke(style) {\n    let path;\n    const lastInstruction = this.instructions[this.instructions.length - 1];\n    if (this._tick === 0 && lastInstruction?.action === \"fill\") {\n      path = lastInstruction.data.path;\n    } else {\n      path = this._activePath.clone();\n    }\n    if (!path)\n      return this;\n    if (style != null) {\n      this._strokeStyle = toStrokeStyle(style, _GraphicsContext.defaultStrokeStyle);\n    }\n    this.instructions.push({\n      action: \"stroke\",\n      // TODO copy fill style!\n      data: { style: this.strokeStyle, path }\n    });\n    this.onUpdate();\n    this._initNextPathLocation();\n    this._tick = 0;\n    return this;\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path. If a hole is not completely in a shape, it will\n   * fail to cut correctly!\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  cut() {\n    for (let i = 0; i < 2; i++) {\n      const lastInstruction = this.instructions[this.instructions.length - 1 - i];\n      const holePath = this._activePath.clone();\n      if (lastInstruction) {\n        if (lastInstruction.action === \"stroke\" || lastInstruction.action === \"fill\") {\n          if (lastInstruction.data.hole) {\n            lastInstruction.data.hole.addPath(holePath);\n          } else {\n            lastInstruction.data.hole = holePath;\n            break;\n          }\n        }\n      }\n    }\n    this._initNextPathLocation();\n    return this;\n  }\n  /**\n   * Adds an arc to the current path, which is centered at (x, y) with the specified radius,\n   * starting and ending angles, and direction.\n   * @param x - The x-coordinate of the arc's center.\n   * @param y - The y-coordinate of the arc's center.\n   * @param radius - The arc's radius.\n   * @param startAngle - The starting angle, in radians.\n   * @param endAngle - The ending angle, in radians.\n   * @param counterclockwise - (Optional) Specifies whether the arc is drawn counterclockwise (true) or clockwise (false). Defaults to false.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arc(x, y, radius, startAngle, endAngle, counterclockwise) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arc(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      radius,\n      startAngle,\n      endAngle,\n      counterclockwise\n    );\n    return this;\n  }\n  /**\n   * Adds an arc to the current path with the given control points and radius, connected to the previous point\n   * by a straight line if necessary.\n   * @param x1 - The x-coordinate of the first control point.\n   * @param y1 - The y-coordinate of the first control point.\n   * @param x2 - The x-coordinate of the second control point.\n   * @param y2 - The y-coordinate of the second control point.\n   * @param radius - The arc's radius.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  arcTo(x1, y1, x2, y2, radius) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcTo(\n      t.a * x1 + t.c * y1 + t.tx,\n      t.b * x1 + t.d * y1 + t.ty,\n      t.a * x2 + t.c * y2 + t.tx,\n      t.b * x2 + t.d * y2 + t.ty,\n      radius\n    );\n    return this;\n  }\n  /**\n   * Adds an SVG-style arc to the path, allowing for elliptical arcs based on the SVG spec.\n   * @param rx - The x-radius of the ellipse.\n   * @param ry - The y-radius of the ellipse.\n   * @param xAxisRotation - The rotation of the ellipse's x-axis relative\n   * to the x-axis of the coordinate system, in degrees.\n   * @param largeArcFlag - Determines if the arc should be greater than or less than 180 degrees.\n   * @param sweepFlag - Determines if the arc should be swept in a positive angle direction.\n   * @param x - The x-coordinate of the arc's end point.\n   * @param y - The y-coordinate of the arc's end point.\n   * @returns The instance of the current object for chaining.\n   */\n  arcToSvg(rx, ry, xAxisRotation, largeArcFlag, sweepFlag, x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.arcToSvg(\n      rx,\n      ry,\n      xAxisRotation,\n      // should we rotate this with transform??\n      largeArcFlag,\n      sweepFlag,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Adds a cubic Bezier curve to the path.\n   * It requires three points: the first two are control points and the third one is the end point.\n   * The starting point is the last point in the current path.\n   * @param cp1x - The x-coordinate of the first control point.\n   * @param cp1y - The y-coordinate of the first control point.\n   * @param cp2x - The x-coordinate of the second control point.\n   * @param cp2y - The y-coordinate of the second control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  bezierCurveTo(cp1x, cp1y, cp2x, cp2y, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.bezierCurveTo(\n      t.a * cp1x + t.c * cp1y + t.tx,\n      t.b * cp1x + t.d * cp1y + t.ty,\n      t.a * cp2x + t.c * cp2y + t.tx,\n      t.b * cp2x + t.d * cp2y + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start.\n   * If the shape is already closed or there are no points in the path, this method does nothing.\n   * @returns The instance of the current object for chaining.\n   */\n  closePath() {\n    this._tick++;\n    this._activePath?.closePath();\n    return this;\n  }\n  /**\n   * Draws an ellipse at the specified location and with the given x and y radii.\n   * An optional transformation can be applied, allowing for rotation, scaling, and translation.\n   * @param x - The x-coordinate of the center of the ellipse.\n   * @param y - The y-coordinate of the center of the ellipse.\n   * @param radiusX - The horizontal radius of the ellipse.\n   * @param radiusY - The vertical radius of the ellipse.\n   * @returns The instance of the current object for chaining.\n   */\n  ellipse(x, y, radiusX, radiusY) {\n    this._tick++;\n    this._activePath.ellipse(x, y, radiusX, radiusY, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a circle shape. This method adds a new circle path to the current drawing.\n   * @param x - The x-coordinate of the center of the circle.\n   * @param y - The y-coordinate of the center of the circle.\n   * @param radius - The radius of the circle.\n   * @returns The instance of the current object for chaining.\n   */\n  circle(x, y, radius) {\n    this._tick++;\n    this._activePath.circle(x, y, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Adds another `GraphicsPath` to this path, optionally applying a transformation.\n   * @param path - The `GraphicsPath` to add.\n   * @returns The instance of the current object for chaining.\n   */\n  path(path) {\n    this._tick++;\n    this._activePath.addPath(path, this._transform.clone());\n    return this;\n  }\n  /**\n   * Connects the current point to a new point with a straight line. This method updates the current path.\n   * @param x - The x-coordinate of the new point to connect to.\n   * @param y - The y-coordinate of the new point to connect to.\n   * @returns The instance of the current object for chaining.\n   */\n  lineTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.lineTo(\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty\n    );\n    return this;\n  }\n  /**\n   * Sets the starting point for a new sub-path. Any subsequent drawing commands are considered part of this path.\n   * @param x - The x-coordinate for the starting point.\n   * @param y - The y-coordinate for the starting point.\n   * @returns The instance of the current object for chaining.\n   */\n  moveTo(x, y) {\n    this._tick++;\n    const t = this._transform;\n    const instructions = this._activePath.instructions;\n    const transformedX = t.a * x + t.c * y + t.tx;\n    const transformedY = t.b * x + t.d * y + t.ty;\n    if (instructions.length === 1 && instructions[0].action === \"moveTo\") {\n      instructions[0].data[0] = transformedX;\n      instructions[0].data[1] = transformedY;\n      return this;\n    }\n    this._activePath.moveTo(\n      transformedX,\n      transformedY\n    );\n    return this;\n  }\n  /**\n   * Adds a quadratic curve to the path. It requires two points: the control point and the end point.\n   * The starting point is the last point in the current path.\n   * @param cpx - The x-coordinate of the control point.\n   * @param cpy - The y-coordinate of the control point.\n   * @param x - The x-coordinate of the end point.\n   * @param y - The y-coordinate of the end point.\n   * @param smoothness - Optional parameter to adjust the smoothness of the curve.\n   * @returns The instance of the current object for chaining.\n   */\n  quadraticCurveTo(cpx, cpy, x, y, smoothness) {\n    this._tick++;\n    const t = this._transform;\n    this._activePath.quadraticCurveTo(\n      t.a * cpx + t.c * cpy + t.tx,\n      t.b * cpx + t.d * cpy + t.ty,\n      t.a * x + t.c * y + t.tx,\n      t.b * x + t.d * y + t.ty,\n      smoothness\n    );\n    return this;\n  }\n  /**\n   * Draws a rectangle shape. This method adds a new rectangle path to the current drawing.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @returns The instance of the current object for chaining.\n   */\n  rect(x, y, w, h) {\n    this._tick++;\n    this._activePath.rect(x, y, w, h, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a rectangle with rounded corners.\n   * The corner radius can be specified to determine how rounded the corners should be.\n   * An optional transformation can be applied, which allows for rotation, scaling, and translation of the rectangle.\n   * @param x - The x-coordinate of the top-left corner of the rectangle.\n   * @param y - The y-coordinate of the top-left corner of the rectangle.\n   * @param w - The width of the rectangle.\n   * @param h - The height of the rectangle.\n   * @param radius - The radius of the rectangle's corners. If not specified, corners will be sharp.\n   * @returns The instance of the current object for chaining.\n   */\n  roundRect(x, y, w, h, radius) {\n    this._tick++;\n    this._activePath.roundRect(x, y, w, h, radius, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a polygon shape by specifying a sequence of points. This method allows for the creation of complex polygons,\n   * which can be both open and closed. An optional transformation can be applied, enabling the polygon to be scaled,\n   * rotated, or translated as needed.\n   * @param points - An array of numbers, or an array of PointData objects eg [{x,y}, {x,y}, {x,y}]\n   * representing the x and y coordinates, of the polygon's vertices, in sequence.\n   * @param close - A boolean indicating whether to close the polygon path. True by default.\n   */\n  poly(points, close) {\n    this._tick++;\n    this._activePath.poly(points, close, this._transform.clone());\n    return this;\n  }\n  /**\n   * Draws a regular polygon with a specified number of sides. All sides and angles are equal.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @param transform - An optional `Matrix` object to apply a transformation to the polygon.\n   * @returns The instance of the current object for chaining.\n   */\n  regularPoly(x, y, radius, sides, rotation = 0, transform) {\n    this._tick++;\n    this._activePath.regularPoly(x, y, radius, sides, rotation, transform);\n    return this;\n  }\n  /**\n   * Draws a polygon with rounded corners.\n   * Similar to `regularPoly` but with the ability to round the corners of the polygon.\n   * @param x - The x-coordinate of the center of the polygon.\n   * @param y - The y-coordinate of the center of the polygon.\n   * @param radius - The radius of the circumscribed circle of the polygon.\n   * @param sides - The number of sides of the polygon. Must be 3 or more.\n   * @param corner - The radius of the rounding of the corners.\n   * @param rotation - The rotation angle of the polygon, in radians. Zero by default.\n   * @returns The instance of the current object for chaining.\n   */\n  roundPoly(x, y, radius, sides, corner, rotation) {\n    this._tick++;\n    this._activePath.roundPoly(x, y, radius, sides, corner, rotation);\n    return this;\n  }\n  /**\n   * Draws a shape with rounded corners. This function supports custom radius for each corner of the shape.\n   * Optionally, corners can be rounded using a quadratic curve instead of an arc, providing a different aesthetic.\n   * @param points - An array of `RoundedPoint` representing the corners of the shape to draw.\n   * A minimum of 3 points is required.\n   * @param radius - The default radius for the corners.\n   * This radius is applied to all corners unless overridden in `points`.\n   * @param useQuadratic - If set to true, rounded corners are drawn using a quadraticCurve\n   *  method instead of an arc method. Defaults to false.\n   * @param smoothness - Specifies the smoothness of the curve when `useQuadratic` is true.\n   * Higher values make the curve smoother.\n   * @returns The instance of the current object for chaining.\n   */\n  roundShape(points, radius, useQuadratic, smoothness) {\n    this._tick++;\n    this._activePath.roundShape(points, radius, useQuadratic, smoothness);\n    return this;\n  }\n  /**\n   * Draw Rectangle with fillet corners. This is much like rounded rectangle\n   * however it support negative numbers as well for the corner radius.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param fillet - accept negative or positive values\n   */\n  filletRect(x, y, width, height, fillet) {\n    this._tick++;\n    this._activePath.filletRect(x, y, width, height, fillet);\n    return this;\n  }\n  /**\n   * Draw Rectangle with chamfer corners. These are angled corners.\n   * @param x - Upper left corner of rect\n   * @param y - Upper right corner of rect\n   * @param width - Width of rect\n   * @param height - Height of rect\n   * @param chamfer - non-zero real number, size of corner cutout\n   * @param transform\n   */\n  chamferRect(x, y, width, height, chamfer, transform) {\n    this._tick++;\n    this._activePath.chamferRect(x, y, width, height, chamfer, transform);\n    return this;\n  }\n  /**\n   * Draws a star shape centered at a specified location. This method allows for the creation\n   *  of stars with a variable number of points, outer radius, optional inner radius, and rotation.\n   * The star is drawn as a closed polygon with alternating outer and inner vertices to create the star's points.\n   * An optional transformation can be applied to scale, rotate, or translate the star as needed.\n   * @param x - The x-coordinate of the center of the star.\n   * @param y - The y-coordinate of the center of the star.\n   * @param points - The number of points of the star.\n   * @param radius - The outer radius of the star (distance from the center to the outer points).\n   * @param innerRadius - Optional. The inner radius of the star\n   * (distance from the center to the inner points between the outer points).\n   * If not provided, defaults to half of the `radius`.\n   * @param rotation - Optional. The rotation of the star in radians, where 0 is aligned with the y-axis.\n   * Defaults to 0, meaning one point is directly upward.\n   * @returns The instance of the current object for chaining further drawing commands.\n   */\n  star(x, y, points, radius, innerRadius = 0, rotation = 0) {\n    this._tick++;\n    this._activePath.star(x, y, points, radius, innerRadius, rotation, this._transform.clone());\n    return this;\n  }\n  /**\n   * Parses and renders an SVG string into the graphics context. This allows for complex shapes and paths\n   * defined in SVG format to be drawn within the graphics context.\n   * @param svg - The SVG string to be parsed and rendered.\n   */\n  svg(svg) {\n    this._tick++;\n    SVGParser(svg, this);\n    return this;\n  }\n  /**\n   * Restores the most recently saved graphics state by popping the top of the graphics state stack.\n   * This includes transformations, fill styles, and stroke styles.\n   */\n  restore() {\n    const state = this._stateStack.pop();\n    if (state) {\n      this._transform = state.transform;\n      this._fillStyle = state.fillStyle;\n      this._strokeStyle = state.strokeStyle;\n    }\n    return this;\n  }\n  /** Saves the current graphics state, including transformations, fill styles, and stroke styles, onto a stack. */\n  save() {\n    this._stateStack.push({\n      transform: this._transform.clone(),\n      fillStyle: { ...this._fillStyle },\n      strokeStyle: { ...this._strokeStyle }\n    });\n    return this;\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * @returns The current transformation matrix.\n   */\n  getTransform() {\n    return this._transform;\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing any transformations (rotation, scaling, translation) previously applied.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  resetTransform() {\n    this._transform.identity();\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the graphics context around the current origin.\n   * @param angle - The angle of rotation in radians.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  rotate(angle) {\n    this._transform.rotate(angle);\n    return this;\n  }\n  /**\n   * Applies a scaling transformation to the graphics context, scaling drawings by x horizontally and by y vertically.\n   * @param x - The scale factor in the horizontal direction.\n   * @param y - (Optional) The scale factor in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  scale(x, y = x) {\n    this._transform.scale(x, y);\n    return this;\n  }\n  setTransform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.set(a.a, a.b, a.c, a.d, a.tx, a.ty);\n      return this;\n    }\n    this._transform.set(a, b, c, d, dx, dy);\n    return this;\n  }\n  transform(a, b, c, d, dx, dy) {\n    if (a instanceof Matrix) {\n      this._transform.append(a);\n      return this;\n    }\n    tempMatrix.set(a, b, c, d, dx, dy);\n    this._transform.append(tempMatrix);\n    return this;\n  }\n  /**\n   * Applies a translation transformation to the graphics context, moving the origin by the specified amounts.\n   * @param x - The amount to translate in the horizontal direction.\n   * @param y - (Optional) The amount to translate in the vertical direction. If not specified, the x value is used for both directions.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  translate(x, y = x) {\n    this._transform.translate(x, y);\n    return this;\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it. This includes clearing the path,\n   * and optionally resetting transformations to the identity matrix.\n   * @returns The instance of the current GraphicsContext for method chaining.\n   */\n  clear() {\n    this._activePath.clear();\n    this.instructions.length = 0;\n    this.resetTransform();\n    this.onUpdate();\n    return this;\n  }\n  onUpdate() {\n    this._boundsDirty = true;\n    if (this.dirty)\n      return;\n    this.emit(\"update\", this, 16);\n    this.dirty = true;\n  }\n  /** The bounds of the graphic shape. */\n  get bounds() {\n    if (!this._boundsDirty)\n      return this._bounds;\n    this._boundsDirty = false;\n    const bounds = this._bounds;\n    bounds.clear();\n    for (let i = 0; i < this.instructions.length; i++) {\n      const instruction = this.instructions[i];\n      const action = instruction.action;\n      if (action === \"fill\") {\n        const data = instruction.data;\n        bounds.addBounds(data.path.bounds);\n      } else if (action === \"texture\") {\n        const data = instruction.data;\n        bounds.addFrame(data.dx, data.dy, data.dx + data.dw, data.dy + data.dh, data.transform);\n      }\n      if (action === \"stroke\") {\n        const data = instruction.data;\n        const alignment = data.style.alignment;\n        const outerPadding = data.style.width * (1 - alignment);\n        const _bounds = data.path.bounds;\n        bounds.addFrame(\n          _bounds.minX - outerPadding,\n          _bounds.minY - outerPadding,\n          _bounds.maxX + outerPadding,\n          _bounds.maxY + outerPadding\n        );\n      }\n    }\n    return bounds;\n  }\n  /**\n   * Check to see if a point is contained within this geometry.\n   * @param point - Point to check if it's contained.\n   * @returns {boolean} `true` if the point is contained within geometry.\n   */\n  containsPoint(point) {\n    if (!this.bounds.containsPoint(point.x, point.y))\n      return false;\n    const instructions = this.instructions;\n    let hasHit = false;\n    for (let k = 0; k < instructions.length; k++) {\n      const instruction = instructions[k];\n      const data = instruction.data;\n      const path = data.path;\n      if (!instruction.action || !path)\n        continue;\n      const style = data.style;\n      const shapes = path.shapePath.shapePrimitives;\n      for (let i = 0; i < shapes.length; i++) {\n        const shape = shapes[i].shape;\n        if (!style || !shape)\n          continue;\n        const transform = shapes[i].transform;\n        const transformedPoint = transform ? transform.applyInverse(point, tmpPoint) : point;\n        if (instruction.action === \"fill\") {\n          hasHit = shape.contains(transformedPoint.x, transformedPoint.y);\n        } else {\n          const strokeStyle = style;\n          hasHit = shape.strokeContains(transformedPoint.x, transformedPoint.y, strokeStyle.width, strokeStyle.alignment);\n        }\n        const holes = data.hole;\n        if (holes) {\n          const holeShapes = holes.shapePath?.shapePrimitives;\n          if (holeShapes) {\n            for (let j = 0; j < holeShapes.length; j++) {\n              if (holeShapes[j].shape.contains(transformedPoint.x, transformedPoint.y)) {\n                hasHit = false;\n              }\n            }\n          }\n        }\n        if (hasHit) {\n          return true;\n        }\n      }\n    }\n    return hasHit;\n  }\n  /**\n   * Destroys the GraphicsData object.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * context.destroy();\n   * context.destroy(true);\n   * context.destroy({ texture: true, textureSource: true });\n   */\n  destroy(options = false) {\n    this._stateStack.length = 0;\n    this._transform = null;\n    this.emit(\"destroy\", this);\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fillStyle.texture) {\n        this._fillStyle.fill && \"uid\" in this._fillStyle.fill ? this._fillStyle.fill.destroy() : this._fillStyle.texture.destroy(destroyTextureSource);\n      }\n      if (this._strokeStyle.texture) {\n        this._strokeStyle.fill && \"uid\" in this._strokeStyle.fill ? this._strokeStyle.fill.destroy() : this._strokeStyle.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fillStyle = null;\n    this._strokeStyle = null;\n    this.instructions = null;\n    this._activePath = null;\n    this._bounds = null;\n    this._stateStack = null;\n    this.customShader = null;\n    this._transform = null;\n  }\n};\n/** The default fill style to use when none is provided. */\n_GraphicsContext.defaultFillStyle = {\n  /** The color to use for the fill. */\n  color: 16777215,\n  /** The alpha value to use for the fill. */\n  alpha: 1,\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null,\n  /** Whether coordinates are 'global' or 'local' */\n  textureSpace: \"local\"\n};\n/** The default stroke style to use when none is provided. */\n_GraphicsContext.defaultStrokeStyle = {\n  /** The width of the stroke. */\n  width: 1,\n  /** The color to use for the stroke. */\n  color: 16777215,\n  /** The alpha value to use for the stroke. */\n  alpha: 1,\n  /** The alignment of the stroke. */\n  alignment: 0.5,\n  /** The miter limit to use. */\n  miterLimit: 10,\n  /** The line cap style to use. */\n  cap: \"butt\",\n  /** The line join style to use. */\n  join: \"miter\",\n  /** The texture to use for the fill. */\n  texture: Texture.WHITE,\n  /** The matrix to apply. */\n  matrix: null,\n  /** The fill pattern to use. */\n  fill: null,\n  /** Whether coordinates are 'global' or 'local' */\n  textureSpace: \"local\",\n  /** If the stroke is a pixel line. */\n  pixelLine: false\n};\nlet GraphicsContext = _GraphicsContext;\n\nexport { GraphicsContext };\n//# sourceMappingURL=GraphicsContext.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Color } from '../../color/Color.mjs';\nimport { uid } from '../../utils/data/uid.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { warn } from '../../utils/logging/warn.mjs';\nimport { FillGradient } from '../graphics/shared/fill/FillGradient.mjs';\nimport { FillPattern } from '../graphics/shared/fill/FillPattern.mjs';\nimport { GraphicsContext } from '../graphics/shared/GraphicsContext.mjs';\nimport { toFillStyle, toStrokeStyle } from '../graphics/shared/utils/convertFillInputToFillStyle.mjs';\n\n\"use strict\";\nconst _TextStyle = class _TextStyle extends EventEmitter {\n  constructor(style = {}) {\n    super();\n    /**\n     * Unique identifier for the TextStyle class.\n     * This is used to track instances and ensure uniqueness.\n     * @internal\n     */\n    this.uid = uid(\"textStyle\");\n    /**\n     * Internal tick counter used to track updates and changes.\n     * This is incremented whenever the style is modified, allowing for efficient change detection.\n     * @internal\n     */\n    this._tick = 0;\n    convertV7Tov8Style(style);\n    const fullStyle = { ..._TextStyle.defaultTextStyle, ...style };\n    for (const key in fullStyle) {\n      const thisKey = key;\n      this[thisKey] = fullStyle[key];\n    }\n    this.update();\n    this._tick = 0;\n  }\n  /**\n   * Alignment for multiline text, does not affect single line text.\n   * @type {'left'|'center'|'right'|'justify'}\n   */\n  get align() {\n    return this._align;\n  }\n  set align(value) {\n    if (this._align === value)\n      return;\n    this._align = value;\n    this.update();\n  }\n  /** Indicates if lines can be wrapped within words, it needs wordWrap to be set to true. */\n  get breakWords() {\n    return this._breakWords;\n  }\n  set breakWords(value) {\n    if (this._breakWords === value)\n      return;\n    this._breakWords = value;\n    this.update();\n  }\n  /** Set a drop shadow for the text. */\n  get dropShadow() {\n    return this._dropShadow;\n  }\n  set dropShadow(value) {\n    if (this._dropShadow === value)\n      return;\n    if (value !== null && typeof value === \"object\") {\n      this._dropShadow = this._createProxy({ ..._TextStyle.defaultDropShadow, ...value });\n    } else {\n      this._dropShadow = value ? this._createProxy({ ..._TextStyle.defaultDropShadow }) : null;\n    }\n    this.update();\n  }\n  /** The font family, can be a single font name, or a list of names where the first is the preferred font. */\n  get fontFamily() {\n    return this._fontFamily;\n  }\n  set fontFamily(value) {\n    if (this._fontFamily === value)\n      return;\n    this._fontFamily = value;\n    this.update();\n  }\n  /** The font size (as a number it converts to px, but as a string, equivalents are '26px','20pt','160%' or '1.6em') */\n  get fontSize() {\n    return this._fontSize;\n  }\n  set fontSize(value) {\n    if (this._fontSize === value)\n      return;\n    if (typeof value === \"string\") {\n      this._fontSize = parseInt(value, 10);\n    } else {\n      this._fontSize = value;\n    }\n    this.update();\n  }\n  /**\n   * The font style.\n   * @type {'normal'|'italic'|'oblique'}\n   */\n  get fontStyle() {\n    return this._fontStyle;\n  }\n  set fontStyle(value) {\n    if (this._fontStyle === value)\n      return;\n    this._fontStyle = value.toLowerCase();\n    this.update();\n  }\n  /**\n   * The font variant.\n   * @type {'normal'|'small-caps'}\n   */\n  get fontVariant() {\n    return this._fontVariant;\n  }\n  set fontVariant(value) {\n    if (this._fontVariant === value)\n      return;\n    this._fontVariant = value;\n    this.update();\n  }\n  /**\n   * The font weight.\n   * @type {'normal'|'bold'|'bolder'|'lighter'|'100'|'200'|'300'|'400'|'500'|'600'|'700'|'800'|'900'}\n   */\n  get fontWeight() {\n    return this._fontWeight;\n  }\n  set fontWeight(value) {\n    if (this._fontWeight === value)\n      return;\n    this._fontWeight = value;\n    this.update();\n  }\n  /** The space between lines. */\n  get leading() {\n    return this._leading;\n  }\n  set leading(value) {\n    if (this._leading === value)\n      return;\n    this._leading = value;\n    this.update();\n  }\n  /** The amount of spacing between letters, default is 0. */\n  get letterSpacing() {\n    return this._letterSpacing;\n  }\n  set letterSpacing(value) {\n    if (this._letterSpacing === value)\n      return;\n    this._letterSpacing = value;\n    this.update();\n  }\n  /** The line height, a number that represents the vertical space that a letter uses. */\n  get lineHeight() {\n    return this._lineHeight;\n  }\n  set lineHeight(value) {\n    if (this._lineHeight === value)\n      return;\n    this._lineHeight = value;\n    this.update();\n  }\n  /**\n   * Occasionally some fonts are cropped. Adding some padding will prevent this from happening\n   * by adding padding to all sides of the text.\n   * > [!NOTE] This will NOT affect the positioning or bounds of the text.\n   */\n  get padding() {\n    return this._padding;\n  }\n  set padding(value) {\n    if (this._padding === value)\n      return;\n    this._padding = value;\n    this.update();\n  }\n  /**\n   * An optional filter or array of filters to apply to the text, allowing for advanced visual effects.\n   * These filters will be applied to the text as it is created, resulting in faster rendering for static text\n   * compared to applying the filter directly to the text object (which would be applied at run time).\n   * @default null\n   */\n  get filters() {\n    return this._filters;\n  }\n  set filters(value) {\n    if (this._filters === value)\n      return;\n    this._filters = Object.freeze(value);\n    this.update();\n  }\n  /**\n   * Trim transparent borders from the text texture.\n   * > [!IMPORTANT] PERFORMANCE WARNING:\n   * > This is a costly operation as it requires scanning pixel alpha values.\n   * > Avoid using `trim: true` for dynamic text, as it could significantly impact performance.\n   */\n  get trim() {\n    return this._trim;\n  }\n  set trim(value) {\n    if (this._trim === value)\n      return;\n    this._trim = value;\n    this.update();\n  }\n  /**\n   * The baseline of the text that is rendered.\n   * @type {'alphabetic'|'top'|'hanging'|'middle'|'ideographic'|'bottom'}\n   */\n  get textBaseline() {\n    return this._textBaseline;\n  }\n  set textBaseline(value) {\n    if (this._textBaseline === value)\n      return;\n    this._textBaseline = value;\n    this.update();\n  }\n  /**\n   * How newlines and spaces should be handled.\n   * Default is 'pre' (preserve, preserve).\n   *\n   *  value       | New lines     |   Spaces\n   *  ---         | ---           |   ---\n   * 'normal'     | Collapse      |   Collapse\n   * 'pre'        | Preserve      |   Preserve\n   * 'pre-line'   | Preserve      |   Collapse\n   * @type {'normal'|'pre'|'pre-line'}\n   */\n  get whiteSpace() {\n    return this._whiteSpace;\n  }\n  set whiteSpace(value) {\n    if (this._whiteSpace === value)\n      return;\n    this._whiteSpace = value;\n    this.update();\n  }\n  /** Indicates if word wrap should be used. */\n  get wordWrap() {\n    return this._wordWrap;\n  }\n  set wordWrap(value) {\n    if (this._wordWrap === value)\n      return;\n    this._wordWrap = value;\n    this.update();\n  }\n  /** The width at which text will wrap, it needs wordWrap to be set to true. */\n  get wordWrapWidth() {\n    return this._wordWrapWidth;\n  }\n  set wordWrapWidth(value) {\n    if (this._wordWrapWidth === value)\n      return;\n    this._wordWrapWidth = value;\n    this.update();\n  }\n  /**\n   * The fill style that will be used to color the text.\n   * This can be:\n   * - A color string like 'red', '#00FF00', or 'rgba(255,0,0,0.5)'\n   * - A hex number like 0xff0000 for red\n   * - A FillStyle object with properties like { color: 0xff0000, alpha: 0.5 }\n   * - A FillGradient for gradient fills\n   * - A FillPattern for pattern/texture fills\n   *\n   * When using a FillGradient, vertical gradients (angle of 90 degrees) are applied per line of text,\n   * while gradients at any other angle are spread across the entire text body as a whole.\n   * @example\n   * // Vertical gradient applied per line\n   * const verticalGradient = new FillGradient(0, 0, 0, 1)\n   *     .addColorStop(0, 0xff0000)\n   *     .addColorStop(1, 0x0000ff);\n   *\n   * const text = new Text({\n   *     text: 'Line 1\\nLine 2',\n   *     style: { fill: verticalGradient }\n   * });\n   *\n   * To manage the gradient in a global scope, set the textureSpace property of the FillGradient to 'global'.\n   * @type {string|number|FillStyle|FillGradient|FillPattern}\n   */\n  get fill() {\n    return this._originalFill;\n  }\n  set fill(value) {\n    if (value === this._originalFill)\n      return;\n    this._originalFill = value;\n    if (this._isFillStyle(value)) {\n      this._originalFill = this._createProxy({ ...GraphicsContext.defaultFillStyle, ...value }, () => {\n        this._fill = toFillStyle(\n          { ...this._originalFill },\n          GraphicsContext.defaultFillStyle\n        );\n      });\n    }\n    this._fill = toFillStyle(\n      value === 0 ? \"black\" : value,\n      GraphicsContext.defaultFillStyle\n    );\n    this.update();\n  }\n  /** A fillstyle that will be used on the text stroke, e.g., 'blue', '#FCFF00'. */\n  get stroke() {\n    return this._originalStroke;\n  }\n  set stroke(value) {\n    if (value === this._originalStroke)\n      return;\n    this._originalStroke = value;\n    if (this._isFillStyle(value)) {\n      this._originalStroke = this._createProxy({ ...GraphicsContext.defaultStrokeStyle, ...value }, () => {\n        this._stroke = toStrokeStyle(\n          { ...this._originalStroke },\n          GraphicsContext.defaultStrokeStyle\n        );\n      });\n    }\n    this._stroke = toStrokeStyle(value, GraphicsContext.defaultStrokeStyle);\n    this.update();\n  }\n  update() {\n    this._tick++;\n    this.emit(\"update\", this);\n  }\n  /** Resets all properties to the default values */\n  reset() {\n    const defaultStyle = _TextStyle.defaultTextStyle;\n    for (const key in defaultStyle) {\n      this[key] = defaultStyle[key];\n    }\n  }\n  /**\n   * Returns a unique key for this instance.\n   * This key is used for caching.\n   * @returns {string} Unique key for the instance\n   */\n  get styleKey() {\n    return `${this.uid}-${this._tick}`;\n  }\n  /**\n   * Creates a new TextStyle object with the same values as this one.\n   * @returns New cloned TextStyle object\n   */\n  clone() {\n    return new _TextStyle({\n      align: this.align,\n      breakWords: this.breakWords,\n      dropShadow: this._dropShadow ? { ...this._dropShadow } : null,\n      fill: this._fill,\n      fontFamily: this.fontFamily,\n      fontSize: this.fontSize,\n      fontStyle: this.fontStyle,\n      fontVariant: this.fontVariant,\n      fontWeight: this.fontWeight,\n      leading: this.leading,\n      letterSpacing: this.letterSpacing,\n      lineHeight: this.lineHeight,\n      padding: this.padding,\n      stroke: this._stroke,\n      textBaseline: this.textBaseline,\n      whiteSpace: this.whiteSpace,\n      wordWrap: this.wordWrap,\n      wordWrapWidth: this.wordWrapWidth,\n      filters: this._filters ? [...this._filters] : void 0\n    });\n  }\n  /**\n   * Returns the final padding for the text style, taking into account any filters applied.\n   * Used internally for correct measurements\n   * @internal\n   * @returns {number} The final padding for the text style.\n   */\n  _getFinalPadding() {\n    let filterPadding = 0;\n    if (this._filters) {\n      for (let i = 0; i < this._filters.length; i++) {\n        filterPadding += this._filters[i].padding;\n      }\n    }\n    return Math.max(this._padding, filterPadding);\n  }\n  /**\n   * Destroys this text style.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * // Destroy the text style and its textures\n   * textStyle.destroy({ texture: true, textureSource: true });\n   * textStyle.destroy(true);\n   */\n  destroy(options = false) {\n    this.removeAllListeners();\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      if (this._fill?.texture) {\n        this._fill.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalFill?.texture) {\n        this._originalFill.texture.destroy(destroyTextureSource);\n      }\n      if (this._stroke?.texture) {\n        this._stroke.texture.destroy(destroyTextureSource);\n      }\n      if (this._originalStroke?.texture) {\n        this._originalStroke.texture.destroy(destroyTextureSource);\n      }\n    }\n    this._fill = null;\n    this._stroke = null;\n    this.dropShadow = null;\n    this._originalStroke = null;\n    this._originalFill = null;\n  }\n  _createProxy(value, cb) {\n    return new Proxy(value, {\n      set: (target, property, newValue) => {\n        if (target[property] === newValue)\n          return true;\n        target[property] = newValue;\n        cb?.(property, newValue);\n        this.update();\n        return true;\n      }\n    });\n  }\n  _isFillStyle(value) {\n    return (value ?? null) !== null && !(Color.isColorLike(value) || value instanceof FillGradient || value instanceof FillPattern);\n  }\n};\n/**\n * Default drop shadow settings used when enabling drop shadows on text.\n * These values are used as the base configuration when drop shadows are enabled without specific settings.\n * @example\n * ```ts\n * // Customize default settings globally\n * TextStyle.defaultDropShadow.alpha = 0.5;    // 50% opacity for all shadows\n * TextStyle.defaultDropShadow.blur = 2;       // 2px blur for all shadows\n * TextStyle.defaultDropShadow.color = 'blue'; // Blue shadows by default\n * ```\n */\n_TextStyle.defaultDropShadow = {\n  alpha: 1,\n  angle: Math.PI / 6,\n  blur: 0,\n  color: \"black\",\n  distance: 5\n};\n/**\n * Default text style settings used when creating new text objects.\n * These values serve as the base configuration and can be customized globally.\n * @example\n * ```ts\n * // Customize default text style globally\n * TextStyle.defaultTextStyle.fontSize = 16;\n * TextStyle.defaultTextStyle.fill = 0x333333;\n * TextStyle.defaultTextStyle.fontFamily = ['Arial', 'Helvetica', 'sans-serif'];\n * ```\n */\n_TextStyle.defaultTextStyle = {\n  align: \"left\",\n  breakWords: false,\n  dropShadow: null,\n  fill: \"black\",\n  fontFamily: \"Arial\",\n  fontSize: 26,\n  fontStyle: \"normal\",\n  fontVariant: \"normal\",\n  fontWeight: \"normal\",\n  leading: 0,\n  letterSpacing: 0,\n  lineHeight: 0,\n  padding: 0,\n  stroke: null,\n  textBaseline: \"alphabetic\",\n  trim: false,\n  whiteSpace: \"pre\",\n  wordWrap: false,\n  wordWrapWidth: 100\n};\nlet TextStyle = _TextStyle;\nfunction convertV7Tov8Style(style) {\n  const oldStyle = style;\n  if (typeof oldStyle.dropShadow === \"boolean\" && oldStyle.dropShadow) {\n    const defaults = TextStyle.defaultDropShadow;\n    style.dropShadow = {\n      alpha: oldStyle.dropShadowAlpha ?? defaults.alpha,\n      angle: oldStyle.dropShadowAngle ?? defaults.angle,\n      blur: oldStyle.dropShadowBlur ?? defaults.blur,\n      color: oldStyle.dropShadowColor ?? defaults.color,\n      distance: oldStyle.dropShadowDistance ?? defaults.distance\n    };\n  }\n  if (oldStyle.strokeThickness !== void 0) {\n    deprecation(v8_0_0, \"strokeThickness is now a part of stroke\");\n    const color = oldStyle.stroke;\n    let obj = {};\n    if (Color.isColorLike(color)) {\n      obj.color = color;\n    } else if (color instanceof FillGradient || color instanceof FillPattern) {\n      obj.fill = color;\n    } else if (Object.hasOwnProperty.call(color, \"color\") || Object.hasOwnProperty.call(color, \"fill\")) {\n      obj = color;\n    } else {\n      throw new Error(\"Invalid stroke value.\");\n    }\n    style.stroke = {\n      ...obj,\n      width: oldStyle.strokeThickness\n    };\n  }\n  if (Array.isArray(oldStyle.fillGradientStops)) {\n    deprecation(v8_0_0, \"gradient fill is now a fill pattern: `new FillGradient(...)`\");\n    if (!Array.isArray(oldStyle.fill) || oldStyle.fill.length === 0) {\n      throw new Error(\"Invalid fill value. Expected an array of colors for gradient fill.\");\n    }\n    if (oldStyle.fill.length !== oldStyle.fillGradientStops.length) {\n      warn(\"The number of fill colors must match the number of fill gradient stops.\");\n    }\n    const gradientFill = new FillGradient({\n      start: { x: 0, y: 0 },\n      end: { x: 0, y: 1 },\n      textureSpace: \"local\"\n    });\n    const fillGradientStops = oldStyle.fillGradientStops.slice();\n    const fills = oldStyle.fill.map((color) => Color.shared.setValue(color).toNumber());\n    fillGradientStops.forEach((stop, index) => {\n      gradientFill.addColorStop(stop, fills[index]);\n    });\n    style.fill = {\n      fill: gradientFill\n    };\n  }\n}\n\nexport { TextStyle };\n//# sourceMappingURL=TextStyle.mjs.map\n","import { ExtensionType } from '../../../../../extensions/Extensions.mjs';\nimport { TextureSource } from './TextureSource.mjs';\n\n\"use strict\";\nclass ImageSource extends TextureSource {\n  constructor(options) {\n    super(options);\n    this.uploadMethodId = \"image\";\n    this.autoGarbageCollect = true;\n  }\n  static test(resource) {\n    return globalThis.HTMLImageElement && resource instanceof HTMLImageElement || typeof ImageBitmap !== \"undefined\" && resource instanceof ImageBitmap || globalThis.VideoFrame && resource instanceof VideoFrame;\n  }\n}\nImageSource.extension = ExtensionType.TextureSource;\n\nexport { ImageSource };\n//# sourceMappingURL=ImageSource.mjs.map\n","\"use strict\";\nconst attributeFormatData = {\n  uint8x2: { size: 2, stride: 2, normalised: false },\n  uint8x4: { size: 4, stride: 4, normalised: false },\n  sint8x2: { size: 2, stride: 2, normalised: false },\n  sint8x4: { size: 4, stride: 4, normalised: false },\n  unorm8x2: { size: 2, stride: 2, normalised: true },\n  unorm8x4: { size: 4, stride: 4, normalised: true },\n  snorm8x2: { size: 2, stride: 2, normalised: true },\n  snorm8x4: { size: 4, stride: 4, normalised: true },\n  uint16x2: { size: 2, stride: 4, normalised: false },\n  uint16x4: { size: 4, stride: 8, normalised: false },\n  sint16x2: { size: 2, stride: 4, normalised: false },\n  sint16x4: { size: 4, stride: 8, normalised: false },\n  unorm16x2: { size: 2, stride: 4, normalised: true },\n  unorm16x4: { size: 4, stride: 8, normalised: true },\n  snorm16x2: { size: 2, stride: 4, normalised: true },\n  snorm16x4: { size: 4, stride: 8, normalised: true },\n  float16x2: { size: 2, stride: 4, normalised: false },\n  float16x4: { size: 4, stride: 8, normalised: false },\n  float32: { size: 1, stride: 4, normalised: false },\n  float32x2: { size: 2, stride: 8, normalised: false },\n  float32x3: { size: 3, stride: 12, normalised: false },\n  float32x4: { size: 4, stride: 16, normalised: false },\n  uint32: { size: 1, stride: 4, normalised: false },\n  uint32x2: { size: 2, stride: 8, normalised: false },\n  uint32x3: { size: 3, stride: 12, normalised: false },\n  uint32x4: { size: 4, stride: 16, normalised: false },\n  sint32: { size: 1, stride: 4, normalised: false },\n  sint32x2: { size: 2, stride: 8, normalised: false },\n  sint32x3: { size: 3, stride: 12, normalised: false },\n  sint32x4: { size: 4, stride: 16, normalised: false }\n};\nfunction getAttributeInfoFromFormat(format) {\n  return attributeFormatData[format] ?? attributeFormatData.float32;\n}\n\nexport { getAttributeInfoFromFormat };\n//# sourceMappingURL=getAttributeInfoFromFormat.mjs.map\n","import { UPDATE_PRIORITY } from '../ticker/const.mjs';\nimport { Ticker } from '../ticker/Ticker.mjs';\n\n\"use strict\";\nclass CanvasObserver {\n  constructor(options) {\n    /** A cached value of the last transform applied to the DOM element. */\n    this._lastTransform = \"\";\n    /** A ResizeObserver instance to observe changes in the canvas size. */\n    this._observer = null;\n    /** A flag to indicate whether the observer is attached to the Ticker for continuous updates. */\n    this._tickerAttached = false;\n    /**\n     * Updates the transform of the DOM element based on the canvas size and position.\n     * This method calculates the scale and translation needed to keep the DOM element in sync with the canvas.\n     */\n    this.updateTranslation = () => {\n      if (!this._canvas)\n        return;\n      const rect = this._canvas.getBoundingClientRect();\n      const contentWidth = this._canvas.width;\n      const contentHeight = this._canvas.height;\n      const sx = rect.width / contentWidth * this._renderer.resolution;\n      const sy = rect.height / contentHeight * this._renderer.resolution;\n      const tx = rect.left;\n      const ty = rect.top;\n      const newTransform = `translate(${tx}px, ${ty}px) scale(${sx}, ${sy})`;\n      if (newTransform !== this._lastTransform) {\n        this._domElement.style.transform = newTransform;\n        this._lastTransform = newTransform;\n      }\n    };\n    this._domElement = options.domElement;\n    this._renderer = options.renderer;\n    if (globalThis.OffscreenCanvas && this._renderer.canvas instanceof OffscreenCanvas)\n      return;\n    this._canvas = this._renderer.canvas;\n    this._attachObserver();\n  }\n  /** The canvas element that this CanvasObserver is associated with. */\n  get canvas() {\n    return this._canvas;\n  }\n  /** Attaches the DOM element to the canvas parent if it is not already attached. */\n  ensureAttached() {\n    if (!this._domElement.parentNode && this._canvas.parentNode) {\n      this._canvas.parentNode.appendChild(this._domElement);\n      this.updateTranslation();\n    }\n  }\n  /** Sets up a ResizeObserver if available. This ensures that the DOM element is kept in sync with the canvas size . */\n  _attachObserver() {\n    if (\"ResizeObserver\" in globalThis) {\n      if (this._observer) {\n        this._observer.disconnect();\n        this._observer = null;\n      }\n      this._observer = new ResizeObserver((entries) => {\n        for (const entry of entries) {\n          if (entry.target !== this._canvas) {\n            continue;\n          }\n          const contentWidth = this.canvas.width;\n          const contentHeight = this.canvas.height;\n          const sx = entry.contentRect.width / contentWidth * this._renderer.resolution;\n          const sy = entry.contentRect.height / contentHeight * this._renderer.resolution;\n          const needsUpdate = this._lastScaleX !== sx || this._lastScaleY !== sy;\n          if (needsUpdate) {\n            this.updateTranslation();\n            this._lastScaleX = sx;\n            this._lastScaleY = sy;\n          }\n        }\n      });\n      this._observer.observe(this._canvas);\n    } else if (!this._tickerAttached) {\n      Ticker.shared.add(this.updateTranslation, this, UPDATE_PRIORITY.HIGH);\n    }\n  }\n  /** Destroys the CanvasObserver instance, cleaning up observers and Ticker. */\n  destroy() {\n    if (this._observer) {\n      this._observer.disconnect();\n      this._observer = null;\n    } else if (this._tickerAttached) {\n      Ticker.shared.remove(this.updateTranslation);\n    }\n    this._domElement = null;\n    this._renderer = null;\n    this._canvas = null;\n    this._tickerAttached = false;\n    this._lastTransform = \"\";\n    this._lastScaleX = null;\n    this._lastScaleY = null;\n  }\n}\n\nexport { CanvasObserver };\n//# sourceMappingURL=CanvasObserver.mjs.map\n","import { Point } from '../maths/point/Point.mjs';\n\n\"use strict\";\nclass FederatedEvent {\n  /**\n   * @param manager - The event boundary which manages this event. Propagation can only occur\n   *  within the boundary's jurisdiction.\n   */\n  constructor(manager) {\n    /** Flags whether this event bubbles. This will take effect only if it is set before propagation. */\n    this.bubbles = true;\n    /** @deprecated since 7.0.0 */\n    this.cancelBubble = true;\n    /**\n     * Flags whether this event can be canceled using {@link FederatedEvent.preventDefault}. This is always\n     * false (for now).\n     */\n    this.cancelable = false;\n    /**\n     * Flag added for compatibility with DOM `Event`. It is not used in the Federated Events\n     * API.\n     * @see https://dom.spec.whatwg.org/#dom-event-composed\n     * @ignore\n     */\n    this.composed = false;\n    /** Flags whether the default response of the user agent was prevent through this event. */\n    this.defaultPrevented = false;\n    /**\n     * The propagation phase.\n     * @default {@link FederatedEvent.NONE}\n     */\n    this.eventPhase = FederatedEvent.prototype.NONE;\n    /** Flags whether propagation was stopped. */\n    this.propagationStopped = false;\n    /** Flags whether propagation was immediately stopped. */\n    this.propagationImmediatelyStopped = false;\n    /** The coordinates of the event relative to the nearest DOM layer. This is a non-standard property. */\n    this.layer = new Point();\n    /** The coordinates of the event relative to the DOM document. This is a non-standard property. */\n    this.page = new Point();\n    /**\n     * The event propagation phase NONE that indicates that the event is not in any phase.\n     * @default 0\n     * @advanced\n     */\n    this.NONE = 0;\n    /**\n     * The event propagation phase CAPTURING_PHASE that indicates that the event is in the capturing phase.\n     * @default 1\n     * @advanced\n     */\n    this.CAPTURING_PHASE = 1;\n    /**\n     * The event propagation phase AT_TARGET that indicates that the event is at the target.\n     * @default 2\n     * @advanced\n     */\n    this.AT_TARGET = 2;\n    /**\n     * The event propagation phase BUBBLING_PHASE that indicates that the event is in the bubbling phase.\n     * @default 3\n     * @advanced\n     */\n    this.BUBBLING_PHASE = 3;\n    this.manager = manager;\n  }\n  /** @readonly */\n  get layerX() {\n    return this.layer.x;\n  }\n  /** @readonly */\n  get layerY() {\n    return this.layer.y;\n  }\n  /** @readonly */\n  get pageX() {\n    return this.page.x;\n  }\n  /** @readonly */\n  get pageY() {\n    return this.page.y;\n  }\n  /**\n   * Fallback for the deprecated `InteractionEvent.data`.\n   * @deprecated since 7.0.0\n   */\n  get data() {\n    return this;\n  }\n  /**\n   * The propagation path for this event. Alias for {@link EventBoundary.propagationPath}.\n   * @advanced\n   */\n  composedPath() {\n    if (this.manager && (!this.path || this.path[this.path.length - 1] !== this.target)) {\n      this.path = this.target ? this.manager.propagationPath(this.target) : [];\n    }\n    return this.path;\n  }\n  /**\n   * Unimplemented method included for implementing the DOM interface `Event`. It will throw an `Error`.\n   * @deprecated\n   * @ignore\n   * @param _type\n   * @param _bubbles\n   * @param _cancelable\n   */\n  initEvent(_type, _bubbles, _cancelable) {\n    throw new Error(\"initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.\");\n  }\n  /**\n   * Unimplemented method included for implementing the DOM interface `UIEvent`. It will throw an `Error`.\n   * @ignore\n   * @deprecated\n   * @param _typeArg\n   * @param _bubblesArg\n   * @param _cancelableArg\n   * @param _viewArg\n   * @param _detailArg\n   */\n  initUIEvent(_typeArg, _bubblesArg, _cancelableArg, _viewArg, _detailArg) {\n    throw new Error(\"initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.\");\n  }\n  /**\n   * Prevent default behavior of both PixiJS and the user agent.\n   * @example\n   * ```ts\n   * sprite.on('click', (event) => {\n   *     // Prevent both browser's default click behavior\n   *     // and PixiJS's default handling\n   *     event.preventDefault();\n   *\n   *     // Custom handling\n   *     customClickHandler();\n   * });\n   * ```\n   * @remarks\n   * - Only works if the native event is cancelable\n   * - Does not stop event propagation\n   */\n  preventDefault() {\n    if (this.nativeEvent instanceof Event && this.nativeEvent.cancelable) {\n      this.nativeEvent.preventDefault();\n    }\n    this.defaultPrevented = true;\n  }\n  /**\n   * Stop this event from propagating to any additional listeners, including those\n   * on the current target and any following targets in the propagation path.\n   * @example\n   * ```ts\n   * container.on('pointerdown', (event) => {\n   *     // Stop all further event handling\n   *     event.stopImmediatePropagation();\n   *\n   *     // These handlers won't be called:\n   *     // - Other pointerdown listeners on this container\n   *     // - Any pointerdown listeners on parent containers\n   * });\n   * ```\n   * @remarks\n   * - Immediately stops all event propagation\n   * - Prevents other listeners on same target from being called\n   * - More aggressive than stopPropagation()\n   */\n  stopImmediatePropagation() {\n    this.propagationImmediatelyStopped = true;\n  }\n  /**\n   * Stop this event from propagating to the next target in the propagation path.\n   * The rest of the listeners on the current target will still be notified.\n   * @example\n   * ```ts\n   * child.on('pointermove', (event) => {\n   *     // Handle event on child\n   *     updateChild();\n   *\n   *     // Prevent parent handlers from being called\n   *     event.stopPropagation();\n   * });\n   *\n   * // This won't be called if child handles the event\n   * parent.on('pointermove', (event) => {\n   *     updateParent();\n   * });\n   * ```\n   * @remarks\n   * - Stops event bubbling to parent containers\n   * - Does not prevent other listeners on same target\n   * - Less aggressive than stopImmediatePropagation()\n   */\n  stopPropagation() {\n    this.propagationStopped = true;\n  }\n}\n\nexport { FederatedEvent };\n//# sourceMappingURL=FederatedEvent.mjs.map\n","var appleIphone = /iPhone/i;\nvar appleIpod = /iPod/i;\nvar appleTablet = /iPad/i;\nvar appleUniversal = /\\biOS-universal(?:.+)Mac\\b/i;\nvar androidPhone = /\\bAndroid(?:.+)Mobile\\b/i;\nvar androidTablet = /Android/i;\nvar amazonPhone = /(?:SD4930UR|\\bSilk(?:.+)Mobile\\b)/i;\nvar amazonTablet = /Silk/i;\nvar windowsPhone = /Windows Phone/i;\nvar windowsTablet = /\\bWindows(?:.+)ARM\\b/i;\nvar otherBlackBerry = /BlackBerry/i;\nvar otherBlackBerry10 = /BB10/i;\nvar otherOpera = /Opera Mini/i;\nvar otherChrome = /\\b(CriOS|Chrome)(?:.+)Mobile/i;\nvar otherFirefox = /Mobile(?:.+)Firefox\\b/i;\nvar isAppleTabletOnIos13 = function (navigator) {\n    return (typeof navigator !== 'undefined' &&\n        navigator.platform === 'MacIntel' &&\n        typeof navigator.maxTouchPoints === 'number' &&\n        navigator.maxTouchPoints > 1 &&\n        typeof MSStream === 'undefined');\n};\nfunction createMatch(userAgent) {\n    return function (regex) { return regex.test(userAgent); };\n}\nexport default function isMobile(param) {\n    var nav = {\n        userAgent: '',\n        platform: '',\n        maxTouchPoints: 0\n    };\n    if (!param && typeof navigator !== 'undefined') {\n        nav = {\n            userAgent: navigator.userAgent,\n            platform: navigator.platform,\n            maxTouchPoints: navigator.maxTouchPoints || 0\n        };\n    }\n    else if (typeof param === 'string') {\n        nav.userAgent = param;\n    }\n    else if (param && param.userAgent) {\n        nav = {\n            userAgent: param.userAgent,\n            platform: param.platform,\n            maxTouchPoints: param.maxTouchPoints || 0\n        };\n    }\n    var userAgent = nav.userAgent;\n    var tmp = userAgent.split('[FBAN');\n    if (typeof tmp[1] !== 'undefined') {\n        userAgent = tmp[0];\n    }\n    tmp = userAgent.split('Twitter');\n    if (typeof tmp[1] !== 'undefined') {\n        userAgent = tmp[0];\n    }\n    var match = createMatch(userAgent);\n    var result = {\n        apple: {\n            phone: match(appleIphone) && !match(windowsPhone),\n            ipod: match(appleIpod),\n            tablet: !match(appleIphone) &&\n                (match(appleTablet) || isAppleTabletOnIos13(nav)) &&\n                !match(windowsPhone),\n            universal: match(appleUniversal),\n            device: (match(appleIphone) ||\n                match(appleIpod) ||\n                match(appleTablet) ||\n                match(appleUniversal) ||\n                isAppleTabletOnIos13(nav)) &&\n                !match(windowsPhone)\n        },\n        amazon: {\n            phone: match(amazonPhone),\n            tablet: !match(amazonPhone) && match(amazonTablet),\n            device: match(amazonPhone) || match(amazonTablet)\n        },\n        android: {\n            phone: (!match(windowsPhone) && match(amazonPhone)) ||\n                (!match(windowsPhone) && match(androidPhone)),\n            tablet: !match(windowsPhone) &&\n                !match(amazonPhone) &&\n                !match(androidPhone) &&\n                (match(amazonTablet) || match(androidTablet)),\n            device: (!match(windowsPhone) &&\n                (match(amazonPhone) ||\n                    match(amazonTablet) ||\n                    match(androidPhone) ||\n                    match(androidTablet))) ||\n                match(/\\bokhttp\\b/i)\n        },\n        windows: {\n            phone: match(windowsPhone),\n            tablet: match(windowsTablet),\n            device: match(windowsPhone) || match(windowsTablet)\n        },\n        other: {\n            blackberry: match(otherBlackBerry),\n            blackberry10: match(otherBlackBerry10),\n            opera: match(otherOpera),\n            firefox: match(otherFirefox),\n            chrome: match(otherChrome),\n            device: match(otherBlackBerry) ||\n                match(otherBlackBerry10) ||\n                match(otherOpera) ||\n                match(otherFirefox) ||\n                match(otherChrome)\n        },\n        any: false,\n        phone: false,\n        tablet: false\n    };\n    result.any =\n        result.apple.device ||\n            result.android.device ||\n            result.windows.device ||\n            result.other.device;\n    result.phone =\n        result.apple.phone || result.android.phone || result.windows.phone;\n    result.tablet =\n        result.apple.tablet || result.android.tablet || result.windows.tablet;\n    return result;\n}\n//# sourceMappingURL=isMobile.js.map","import isMobileJs from 'ismobilejs';\n\n\"use strict\";\nconst isMobileCall = isMobileJs.default ?? isMobileJs;\nconst isMobile = isMobileCall(globalThis.navigator);\n\nexport { isMobile };\n//# sourceMappingURL=isMobile.mjs.map\n","import { CanvasObserver } from '../dom/CanvasObserver.mjs';\nimport { FederatedEvent } from '../events/FederatedEvent.mjs';\nimport { ExtensionType } from '../extensions/Extensions.mjs';\nimport { isMobile } from '../utils/browser/isMobile.mjs';\nimport { removeItems } from '../utils/data/removeItems.mjs';\n\n\"use strict\";\nconst KEY_CODE_TAB = 9;\nconst DIV_TOUCH_SIZE = 100;\nconst DIV_TOUCH_POS_X = 0;\nconst DIV_TOUCH_POS_Y = 0;\nconst DIV_TOUCH_ZINDEX = 2;\nconst DIV_HOOK_SIZE = 1;\nconst DIV_HOOK_POS_X = -1e3;\nconst DIV_HOOK_POS_Y = -1e3;\nconst DIV_HOOK_ZINDEX = 2;\nconst _AccessibilitySystem = class _AccessibilitySystem {\n  // eslint-disable-next-line jsdoc/require-param\n  /**\n   * @param {WebGLRenderer|WebGPURenderer} renderer - A reference to the current renderer\n   */\n  constructor(renderer, _mobileInfo = isMobile) {\n    this._mobileInfo = _mobileInfo;\n    /** Whether accessibility divs are visible for debugging */\n    this.debug = false;\n    /** Whether to activate on tab key press */\n    this._activateOnTab = true;\n    /** Whether to deactivate accessibility when mouse moves */\n    this._deactivateOnMouseMove = true;\n    /** Internal variable, see isActive getter. */\n    this._isActive = false;\n    /** Internal variable, see isMobileAccessibility getter. */\n    this._isMobileAccessibility = false;\n    /** This is the dom element that will sit over the PixiJS element. This is where the div overlays will go. */\n    this._div = null;\n    /** A simple pool for storing divs. */\n    this._pools = {};\n    /** This is a tick used to check if an object is no longer being rendered. */\n    this._renderId = 0;\n    /** The array of currently active accessible items. */\n    this._children = [];\n    /** Count to throttle div updates on android devices. */\n    this._androidUpdateCount = 0;\n    /**  The frequency to update the div elements. */\n    this._androidUpdateFrequency = 500;\n    // eslint-disable-next-line @typescript-eslint/prefer-readonly\n    this._isRunningTests = false;\n    /** Bound function references for proper event listener removal */\n    this._boundOnKeyDown = this._onKeyDown.bind(this);\n    this._boundOnMouseMove = this._onMouseMove.bind(this);\n    this._hookDiv = null;\n    if (_mobileInfo.tablet || _mobileInfo.phone) {\n      this._createTouchHook();\n    }\n    this._renderer = renderer;\n  }\n  /**\n   * Value of `true` if accessibility is currently active and accessibility layers are showing.\n   * @type {boolean}\n   * @readonly\n   */\n  get isActive() {\n    return this._isActive;\n  }\n  /**\n   * Value of `true` if accessibility is enabled for touch devices.\n   * @type {boolean}\n   * @readonly\n   */\n  get isMobileAccessibility() {\n    return this._isMobileAccessibility;\n  }\n  /**\n   * Button element for handling touch hooks.\n   * @readonly\n   */\n  get hookDiv() {\n    return this._hookDiv;\n  }\n  /**\n   * The DOM element that will sit over the PixiJS element. This is where the div overlays will go.\n   * @readonly\n   */\n  get div() {\n    return this._div;\n  }\n  /**\n   * Creates the touch hooks.\n   * @private\n   */\n  _createTouchHook() {\n    const hookDiv = document.createElement(\"button\");\n    hookDiv.style.width = `${DIV_HOOK_SIZE}px`;\n    hookDiv.style.height = `${DIV_HOOK_SIZE}px`;\n    hookDiv.style.position = \"absolute\";\n    hookDiv.style.top = `${DIV_HOOK_POS_X}px`;\n    hookDiv.style.left = `${DIV_HOOK_POS_Y}px`;\n    hookDiv.style.zIndex = DIV_HOOK_ZINDEX.toString();\n    hookDiv.style.backgroundColor = \"#FF0000\";\n    hookDiv.title = \"select to enable accessibility for this content\";\n    hookDiv.addEventListener(\"focus\", () => {\n      this._isMobileAccessibility = true;\n      this._activate();\n      this._destroyTouchHook();\n    });\n    document.body.appendChild(hookDiv);\n    this._hookDiv = hookDiv;\n  }\n  /**\n   * Destroys the touch hooks.\n   * @private\n   */\n  _destroyTouchHook() {\n    if (!this._hookDiv) {\n      return;\n    }\n    document.body.removeChild(this._hookDiv);\n    this._hookDiv = null;\n  }\n  /**\n   * Activating will cause the Accessibility layer to be shown.\n   * This is called when a user presses the tab key.\n   * @private\n   */\n  _activate() {\n    if (this._isActive) {\n      return;\n    }\n    this._isActive = true;\n    if (!this._div) {\n      this._div = document.createElement(\"div\");\n      this._div.style.position = \"absolute\";\n      this._div.style.top = `${DIV_TOUCH_POS_X}px`;\n      this._div.style.left = `${DIV_TOUCH_POS_Y}px`;\n      this._div.style.pointerEvents = \"none\";\n      this._div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n      this._canvasObserver = new CanvasObserver({\n        domElement: this._div,\n        renderer: this._renderer\n      });\n    }\n    if (this._activateOnTab) {\n      globalThis.addEventListener(\"keydown\", this._boundOnKeyDown, false);\n    }\n    if (this._deactivateOnMouseMove) {\n      globalThis.document.addEventListener(\"mousemove\", this._boundOnMouseMove, true);\n    }\n    const canvas = this._renderer.view.canvas;\n    if (!canvas.parentNode) {\n      const observer = new MutationObserver(() => {\n        if (canvas.parentNode) {\n          observer.disconnect();\n          this._canvasObserver.ensureAttached();\n          this._initAccessibilitySetup();\n        }\n      });\n      observer.observe(document.body, { childList: true, subtree: true });\n    } else {\n      this._canvasObserver.ensureAttached();\n      this._initAccessibilitySetup();\n    }\n  }\n  // New method to handle initialization after div is ready\n  _initAccessibilitySetup() {\n    this._renderer.runners.postrender.add(this);\n    if (this._renderer.lastObjectRendered) {\n      this._updateAccessibleObjects(this._renderer.lastObjectRendered);\n    }\n  }\n  /**\n   * Deactivates the accessibility system. Removes listeners and accessibility elements.\n   * @private\n   */\n  _deactivate() {\n    if (!this._isActive || this._isMobileAccessibility) {\n      return;\n    }\n    this._isActive = false;\n    globalThis.document.removeEventListener(\"mousemove\", this._boundOnMouseMove, true);\n    if (this._activateOnTab) {\n      globalThis.addEventListener(\"keydown\", this._boundOnKeyDown, false);\n    }\n    this._renderer.runners.postrender.remove(this);\n    for (const child of this._children) {\n      if (child._accessibleDiv?.parentNode) {\n        child._accessibleDiv.parentNode.removeChild(child._accessibleDiv);\n        child._accessibleDiv = null;\n      }\n      child._accessibleActive = false;\n    }\n    for (const accessibleType in this._pools) {\n      const pool = this._pools[accessibleType];\n      pool.forEach((div) => {\n        if (div.parentNode) {\n          div.parentNode.removeChild(div);\n        }\n      });\n      delete this._pools[accessibleType];\n    }\n    if (this._div?.parentNode) {\n      this._div.parentNode.removeChild(this._div);\n    }\n    this._pools = {};\n    this._children = [];\n  }\n  /**\n   * This recursive function will run through the scene graph and add any new accessible objects to the DOM layer.\n   * @private\n   * @param {Container} container - The Container to check.\n   */\n  _updateAccessibleObjects(container) {\n    if (!container.visible || !container.accessibleChildren) {\n      return;\n    }\n    if (container.accessible) {\n      if (!container._accessibleActive) {\n        this._addChild(container);\n      }\n      container._renderId = this._renderId;\n    }\n    const children = container.children;\n    if (children) {\n      for (let i = 0; i < children.length; i++) {\n        this._updateAccessibleObjects(children[i]);\n      }\n    }\n  }\n  /**\n   * Runner init called, view is available at this point.\n   * @ignore\n   */\n  init(options) {\n    const defaultOpts = _AccessibilitySystem.defaultOptions;\n    const mergedOptions = {\n      accessibilityOptions: {\n        ...defaultOpts,\n        ...options?.accessibilityOptions || {}\n      }\n    };\n    this.debug = mergedOptions.accessibilityOptions.debug;\n    this._activateOnTab = mergedOptions.accessibilityOptions.activateOnTab;\n    this._deactivateOnMouseMove = mergedOptions.accessibilityOptions.deactivateOnMouseMove;\n    if (mergedOptions.accessibilityOptions.enabledByDefault) {\n      this._activate();\n    }\n    this._renderer.runners.postrender.remove(this);\n  }\n  /**\n   * Updates the accessibility layer during rendering.\n   * - Removes divs for containers no longer in the scene\n   * - Updates the position and dimensions of the root div\n   * - Updates positions of active accessibility divs\n   * Only fires while the accessibility system is active.\n   * @ignore\n   */\n  postrender() {\n    const now = performance.now();\n    if (this._mobileInfo.android.device && now < this._androidUpdateCount) {\n      return;\n    }\n    this._androidUpdateCount = now + this._androidUpdateFrequency;\n    if ((!this._renderer.renderingToScreen || !this._renderer.view.canvas) && !this._isRunningTests) {\n      return;\n    }\n    const activeIds = /* @__PURE__ */ new Set();\n    if (this._renderer.lastObjectRendered) {\n      this._updateAccessibleObjects(this._renderer.lastObjectRendered);\n      for (const child of this._children) {\n        if (child._renderId === this._renderId) {\n          activeIds.add(this._children.indexOf(child));\n        }\n      }\n    }\n    for (let i = this._children.length - 1; i >= 0; i--) {\n      const child = this._children[i];\n      if (!activeIds.has(i)) {\n        if (child._accessibleDiv && child._accessibleDiv.parentNode) {\n          child._accessibleDiv.parentNode.removeChild(child._accessibleDiv);\n          const pool = this._getPool(child.accessibleType);\n          pool.push(child._accessibleDiv);\n          child._accessibleDiv = null;\n        }\n        child._accessibleActive = false;\n        removeItems(this._children, i, 1);\n      }\n    }\n    if (this._renderer.renderingToScreen) {\n      this._canvasObserver.ensureAttached();\n    }\n    for (let i = 0; i < this._children.length; i++) {\n      const child = this._children[i];\n      if (!child._accessibleActive || !child._accessibleDiv) {\n        continue;\n      }\n      const div = child._accessibleDiv;\n      const hitArea = child.hitArea || child.getBounds().rectangle;\n      if (child.hitArea) {\n        const wt = child.worldTransform;\n        div.style.left = `${wt.tx + hitArea.x * wt.a}px`;\n        div.style.top = `${wt.ty + hitArea.y * wt.d}px`;\n        div.style.width = `${hitArea.width * wt.a}px`;\n        div.style.height = `${hitArea.height * wt.d}px`;\n      } else {\n        this._capHitArea(hitArea);\n        div.style.left = `${hitArea.x}px`;\n        div.style.top = `${hitArea.y}px`;\n        div.style.width = `${hitArea.width}px`;\n        div.style.height = `${hitArea.height}px`;\n      }\n    }\n    this._renderId++;\n  }\n  /**\n   * private function that will visually add the information to the\n   * accessibility div\n   * @param {HTMLElement} div -\n   */\n  _updateDebugHTML(div) {\n    div.innerHTML = `type: ${div.type}</br> title : ${div.title}</br> tabIndex: ${div.tabIndex}`;\n  }\n  /**\n   * Adjust the hit area based on the bounds of a display object\n   * @param {Rectangle} hitArea - Bounds of the child\n   */\n  _capHitArea(hitArea) {\n    if (hitArea.x < 0) {\n      hitArea.width += hitArea.x;\n      hitArea.x = 0;\n    }\n    if (hitArea.y < 0) {\n      hitArea.height += hitArea.y;\n      hitArea.y = 0;\n    }\n    const { width: viewWidth, height: viewHeight } = this._renderer;\n    if (hitArea.x + hitArea.width > viewWidth) {\n      hitArea.width = viewWidth - hitArea.x;\n    }\n    if (hitArea.y + hitArea.height > viewHeight) {\n      hitArea.height = viewHeight - hitArea.y;\n    }\n  }\n  /**\n   * Creates or reuses a div element for a Container and adds it to the accessibility layer.\n   * Sets up ARIA attributes, event listeners, and positioning based on the container's properties.\n   * @private\n   * @param {Container} container - The child to make accessible.\n   */\n  _addChild(container) {\n    const pool = this._getPool(container.accessibleType);\n    let div = pool.pop();\n    if (div) {\n      div.innerHTML = \"\";\n      div.removeAttribute(\"title\");\n      div.removeAttribute(\"aria-label\");\n      div.tabIndex = 0;\n    } else {\n      if (container.accessibleType === \"button\") {\n        div = document.createElement(\"button\");\n      } else {\n        div = document.createElement(container.accessibleType);\n        div.style.cssText = `\n                        color: transparent;\n                        pointer-events: none;\n                        padding: 0;\n                        margin: 0;\n                        border: 0;\n                        outline: 0;\n                        background: transparent;\n                        box-sizing: border-box;\n                        user-select: none;\n                        -webkit-user-select: none;\n                        -moz-user-select: none;\n                        -ms-user-select: none;\n                    `;\n        if (container.accessibleText) {\n          div.innerText = container.accessibleText;\n        }\n      }\n      div.style.width = `${DIV_TOUCH_SIZE}px`;\n      div.style.height = `${DIV_TOUCH_SIZE}px`;\n      div.style.backgroundColor = this.debug ? \"rgba(255,255,255,0.5)\" : \"transparent\";\n      div.style.position = \"absolute\";\n      div.style.zIndex = DIV_TOUCH_ZINDEX.toString();\n      div.style.borderStyle = \"none\";\n      if (navigator.userAgent.toLowerCase().includes(\"chrome\")) {\n        div.setAttribute(\"aria-live\", \"off\");\n      } else {\n        div.setAttribute(\"aria-live\", \"polite\");\n      }\n      if (navigator.userAgent.match(/rv:.*Gecko\\//)) {\n        div.setAttribute(\"aria-relevant\", \"additions\");\n      } else {\n        div.setAttribute(\"aria-relevant\", \"text\");\n      }\n      div.addEventListener(\"click\", this._onClick.bind(this));\n      div.addEventListener(\"focus\", this._onFocus.bind(this));\n      div.addEventListener(\"focusout\", this._onFocusOut.bind(this));\n    }\n    div.style.pointerEvents = container.accessiblePointerEvents;\n    div.type = container.accessibleType;\n    if (container.accessibleTitle && container.accessibleTitle !== null) {\n      div.title = container.accessibleTitle;\n    } else if (!container.accessibleHint || container.accessibleHint === null) {\n      div.title = `container ${container.tabIndex}`;\n    }\n    if (container.accessibleHint && container.accessibleHint !== null) {\n      div.setAttribute(\"aria-label\", container.accessibleHint);\n    }\n    if (container.interactive) {\n      div.tabIndex = container.tabIndex;\n    } else {\n      div.tabIndex = 0;\n    }\n    if (this.debug) {\n      this._updateDebugHTML(div);\n    }\n    container._accessibleActive = true;\n    container._accessibleDiv = div;\n    div.container = container;\n    this._children.push(container);\n    this._div.appendChild(container._accessibleDiv);\n  }\n  /**\n   * Dispatch events with the EventSystem.\n   * @param e\n   * @param type\n   * @private\n   */\n  _dispatchEvent(e, type) {\n    const { container: target } = e.target;\n    const boundary = this._renderer.events.rootBoundary;\n    const event = Object.assign(new FederatedEvent(boundary), { target });\n    boundary.rootTarget = this._renderer.lastObjectRendered;\n    type.forEach((type2) => boundary.dispatchEvent(event, type2));\n  }\n  /**\n   * Maps the div button press to pixi's EventSystem (click)\n   * @private\n   * @param {MouseEvent} e - The click event.\n   */\n  _onClick(e) {\n    this._dispatchEvent(e, [\"click\", \"pointertap\", \"tap\"]);\n  }\n  /**\n   * Maps the div focus events to pixi's EventSystem (mouseover)\n   * @private\n   * @param {FocusEvent} e - The focus event.\n   */\n  _onFocus(e) {\n    if (!e.target.getAttribute(\"aria-live\")) {\n      e.target.setAttribute(\"aria-live\", \"assertive\");\n    }\n    this._dispatchEvent(e, [\"mouseover\"]);\n  }\n  /**\n   * Maps the div focus events to pixi's EventSystem (mouseout)\n   * @private\n   * @param {FocusEvent} e - The focusout event.\n   */\n  _onFocusOut(e) {\n    if (!e.target.getAttribute(\"aria-live\")) {\n      e.target.setAttribute(\"aria-live\", \"polite\");\n    }\n    this._dispatchEvent(e, [\"mouseout\"]);\n  }\n  /**\n   * Is called when a key is pressed\n   * @private\n   * @param {KeyboardEvent} e - The keydown event.\n   */\n  _onKeyDown(e) {\n    if (e.keyCode !== KEY_CODE_TAB || !this._activateOnTab) {\n      return;\n    }\n    this._activate();\n  }\n  /**\n   * Is called when the mouse moves across the renderer element\n   * @private\n   * @param {MouseEvent} e - The mouse event.\n   */\n  _onMouseMove(e) {\n    if (e.movementX === 0 && e.movementY === 0) {\n      return;\n    }\n    this._deactivate();\n  }\n  /**\n   * Destroys the accessibility system. Removes all elements and listeners.\n   * > [!IMPORTANT] This is typically called automatically when the {@link Application} is destroyed.\n   * > A typically user should not need to call this method directly.\n   */\n  destroy() {\n    this._deactivate();\n    this._destroyTouchHook();\n    this._canvasObserver?.destroy();\n    this._canvasObserver = null;\n    this._div = null;\n    this._pools = null;\n    this._children = null;\n    this._renderer = null;\n    this._hookDiv = null;\n    globalThis.removeEventListener(\"keydown\", this._boundOnKeyDown);\n    this._boundOnKeyDown = null;\n    globalThis.document.removeEventListener(\"mousemove\", this._boundOnMouseMove, true);\n    this._boundOnMouseMove = null;\n  }\n  /**\n   * Enables or disables the accessibility system.\n   * @param enabled - Whether to enable or disable accessibility.\n   * @example\n   * ```js\n   * app.renderer.accessibility.setAccessibilityEnabled(true); // Enable accessibility\n   * app.renderer.accessibility.setAccessibilityEnabled(false); // Disable accessibility\n   * ```\n   */\n  setAccessibilityEnabled(enabled) {\n    if (enabled) {\n      this._activate();\n    } else {\n      this._deactivate();\n    }\n  }\n  _getPool(accessibleType) {\n    if (!this._pools[accessibleType]) {\n      this._pools[accessibleType] = [];\n    }\n    return this._pools[accessibleType];\n  }\n};\n/** @ignore */\n_AccessibilitySystem.extension = {\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  name: \"accessibility\"\n};\n/**\n * The default options used by the system.\n * You can set these before initializing the {@link Application} to change the default behavior.\n * @example\n * ```js\n * import { AccessibilitySystem } from 'pixi.js';\n *\n * AccessibilitySystem.defaultOptions.enabledByDefault = true;\n *\n * const app = new Application()\n * app.init()\n * ```\n */\n_AccessibilitySystem.defaultOptions = {\n  /**\n   * Whether to enable accessibility features on initialization\n   * @default false\n   */\n  enabledByDefault: false,\n  /**\n   * Whether to visually show the accessibility divs for debugging\n   * @default false\n   */\n  debug: false,\n  /**\n   * Whether to activate accessibility when tab key is pressed\n   * @default true\n   */\n  activateOnTab: true,\n  /**\n   * Whether to deactivate accessibility when mouse moves\n   * @default true\n   */\n  deactivateOnMouseMove: true\n};\nlet AccessibilitySystem = _AccessibilitySystem;\n\nexport { AccessibilitySystem };\n//# sourceMappingURL=AccessibilitySystem.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { Container } from '../scene/container/Container.mjs';\nimport { AccessibilitySystem } from './AccessibilitySystem.mjs';\nimport { accessibilityTarget } from './accessibilityTarget.mjs';\n\n\"use strict\";\nextensions.add(AccessibilitySystem);\nextensions.mixin(Container, accessibilityTarget);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nconst accessibilityTarget = {\n  accessible: false,\n  accessibleTitle: null,\n  accessibleHint: null,\n  tabIndex: 0,\n  accessibleType: \"button\",\n  accessibleText: null,\n  accessiblePointerEvents: \"auto\",\n  accessibleChildren: true,\n  _accessibleActive: false,\n  _accessibleDiv: null,\n  _renderId: -1\n};\n\nexport { accessibilityTarget };\n//# sourceMappingURL=accessibilityTarget.mjs.map\n","import { UPDATE_PRIORITY } from '../ticker/const.mjs';\nimport { Ticker } from '../ticker/Ticker.mjs';\n\n\"use strict\";\nclass EventsTickerClass {\n  constructor() {\n    /** The frequency that fake events will be fired. */\n    this.interactionFrequency = 10;\n    this._deltaTime = 0;\n    this._didMove = false;\n    this._tickerAdded = false;\n    this._pauseUpdate = true;\n  }\n  /**\n   * Initializes the event ticker.\n   * @param events - The event system.\n   */\n  init(events) {\n    this.removeTickerListener();\n    this.events = events;\n    this.interactionFrequency = 10;\n    this._deltaTime = 0;\n    this._didMove = false;\n    this._tickerAdded = false;\n    this._pauseUpdate = true;\n  }\n  /** Whether to pause the update checks or not. */\n  get pauseUpdate() {\n    return this._pauseUpdate;\n  }\n  set pauseUpdate(paused) {\n    this._pauseUpdate = paused;\n  }\n  /** Adds the ticker listener. */\n  addTickerListener() {\n    if (this._tickerAdded || !this.domElement) {\n      return;\n    }\n    Ticker.system.add(this._tickerUpdate, this, UPDATE_PRIORITY.INTERACTION);\n    this._tickerAdded = true;\n  }\n  /** Removes the ticker listener. */\n  removeTickerListener() {\n    if (!this._tickerAdded) {\n      return;\n    }\n    Ticker.system.remove(this._tickerUpdate, this);\n    this._tickerAdded = false;\n  }\n  /** Sets flag to not fire extra events when the user has already moved there mouse */\n  pointerMoved() {\n    this._didMove = true;\n  }\n  /** Updates the state of interactive objects. */\n  _update() {\n    if (!this.domElement || this._pauseUpdate) {\n      return;\n    }\n    if (this._didMove) {\n      this._didMove = false;\n      return;\n    }\n    const rootPointerEvent = this.events[\"_rootPointerEvent\"];\n    if (this.events.supportsTouchEvents && rootPointerEvent.pointerType === \"touch\") {\n      return;\n    }\n    globalThis.document.dispatchEvent(this.events.supportsPointerEvents ? new PointerEvent(\"pointermove\", {\n      clientX: rootPointerEvent.clientX,\n      clientY: rootPointerEvent.clientY,\n      pointerType: rootPointerEvent.pointerType,\n      pointerId: rootPointerEvent.pointerId\n    }) : new MouseEvent(\"mousemove\", {\n      clientX: rootPointerEvent.clientX,\n      clientY: rootPointerEvent.clientY\n    }));\n  }\n  /**\n   * Updates the state of interactive objects if at least {@link interactionFrequency}\n   * milliseconds have passed since the last invocation.\n   *\n   * Invoked by a throttled ticker update from {@link Ticker.system}.\n   * @param ticker - The throttled ticker.\n   */\n  _tickerUpdate(ticker) {\n    this._deltaTime += ticker.deltaTime;\n    if (this._deltaTime < this.interactionFrequency) {\n      return;\n    }\n    this._deltaTime = 0;\n    this._update();\n  }\n  /** Destroys the event ticker. */\n  destroy() {\n    this.removeTickerListener();\n    this.events = null;\n    this.domElement = null;\n    this._deltaTime = 0;\n    this._didMove = false;\n    this._tickerAdded = false;\n    this._pauseUpdate = true;\n  }\n}\nconst EventsTicker = new EventsTickerClass();\n\nexport { EventsTicker };\n//# sourceMappingURL=EventTicker.mjs.map\n","import { Point } from '../maths/point/Point.mjs';\nimport { FederatedEvent } from './FederatedEvent.mjs';\n\n\"use strict\";\nclass FederatedMouseEvent extends FederatedEvent {\n  constructor() {\n    super(...arguments);\n    /** The coordinates of the mouse event relative to the canvas. */\n    this.client = new Point();\n    /** The movement in this pointer relative to the last `mousemove` event. */\n    this.movement = new Point();\n    /** The offset of the pointer coordinates w.r.t. target Container in world space. This is not supported at the moment. */\n    this.offset = new Point();\n    /** The pointer coordinates in world space. */\n    this.global = new Point();\n    /**\n     * The pointer coordinates in the renderer's {@link AbstractRenderer.screen screen}. This has slightly\n     * different semantics than native PointerEvent screenX/screenY.\n     */\n    this.screen = new Point();\n  }\n  /** @readonly */\n  get clientX() {\n    return this.client.x;\n  }\n  /** @readonly */\n  get clientY() {\n    return this.client.y;\n  }\n  /**\n   * Alias for {@link FederatedMouseEvent.clientX this.clientX}.\n   * @readonly\n   */\n  get x() {\n    return this.clientX;\n  }\n  /**\n   * Alias for {@link FederatedMouseEvent.clientY this.clientY}.\n   * @readonly\n   */\n  get y() {\n    return this.clientY;\n  }\n  /** @readonly */\n  get movementX() {\n    return this.movement.x;\n  }\n  /** @readonly */\n  get movementY() {\n    return this.movement.y;\n  }\n  /** @readonly */\n  get offsetX() {\n    return this.offset.x;\n  }\n  /** @readonly */\n  get offsetY() {\n    return this.offset.y;\n  }\n  /** @readonly */\n  get globalX() {\n    return this.global.x;\n  }\n  /** @readonly */\n  get globalY() {\n    return this.global.y;\n  }\n  /**\n   * The pointer coordinates in the renderer's screen. Alias for `screen.x`.\n   * @readonly\n   */\n  get screenX() {\n    return this.screen.x;\n  }\n  /**\n   * The pointer coordinates in the renderer's screen. Alias for `screen.y`.\n   * @readonly\n   */\n  get screenY() {\n    return this.screen.y;\n  }\n  /**\n   * Converts global coordinates into container-local coordinates.\n   *\n   * This method transforms coordinates from world space to a container's local space,\n   * useful for precise positioning and hit testing.\n   * @param container - The Container to get local coordinates for\n   * @param point - Optional Point object to store the result. If not provided, a new Point will be created\n   * @param globalPos - Optional custom global coordinates. If not provided, the event's global position is used\n   * @returns The local coordinates as a Point object\n   * @example\n   * ```ts\n   * // Basic usage - get local coordinates relative to a container\n   * sprite.on('pointermove', (event: FederatedMouseEvent) => {\n   *     // Get position relative to the sprite\n   *     const localPos = event.getLocalPosition(sprite);\n   *     console.log('Local position:', localPos.x, localPos.y);\n   * });\n   * // Using custom global coordinates\n   * const customGlobal = new Point(100, 100);\n   * sprite.on('pointermove', (event: FederatedMouseEvent) => {\n   *     // Transform custom coordinates\n   *     const localPos = event.getLocalPosition(sprite, undefined, customGlobal);\n   *     console.log('Custom local position:', localPos.x, localPos.y);\n   * });\n   * ```\n   * @see {@link Container.worldTransform} For the transformation matrix\n   * @see {@link Point} For the point class used to store coordinates\n   */\n  getLocalPosition(container, point, globalPos) {\n    return container.worldTransform.applyInverse(globalPos || this.global, point);\n  }\n  /**\n   * Whether the modifier key was pressed when this event natively occurred.\n   * @param key - The modifier key.\n   */\n  getModifierState(key) {\n    return \"getModifierState\" in this.nativeEvent && this.nativeEvent.getModifierState(key);\n  }\n  /**\n   * Not supported.\n   * @param _typeArg\n   * @param _canBubbleArg\n   * @param _cancelableArg\n   * @param _viewArg\n   * @param _detailArg\n   * @param _screenXArg\n   * @param _screenYArg\n   * @param _clientXArg\n   * @param _clientYArg\n   * @param _ctrlKeyArg\n   * @param _altKeyArg\n   * @param _shiftKeyArg\n   * @param _metaKeyArg\n   * @param _buttonArg\n   * @param _relatedTargetArg\n   * @deprecated since 7.0.0\n   * @ignore\n   */\n  // eslint-disable-next-line max-params\n  initMouseEvent(_typeArg, _canBubbleArg, _cancelableArg, _viewArg, _detailArg, _screenXArg, _screenYArg, _clientXArg, _clientYArg, _ctrlKeyArg, _altKeyArg, _shiftKeyArg, _metaKeyArg, _buttonArg, _relatedTargetArg) {\n    throw new Error(\"Method not implemented.\");\n  }\n}\n\nexport { FederatedMouseEvent };\n//# sourceMappingURL=FederatedMouseEvent.mjs.map\n","import { FederatedMouseEvent } from './FederatedMouseEvent.mjs';\n\n\"use strict\";\nclass FederatedPointerEvent extends FederatedMouseEvent {\n  constructor() {\n    super(...arguments);\n    /**\n     * The width of the pointer's contact along the x-axis, measured in CSS pixels.\n     * radiusX of TouchEvents will be represented by this value.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/width\n     */\n    this.width = 0;\n    /**\n     * The height of the pointer's contact along the y-axis, measured in CSS pixels.\n     * radiusY of TouchEvents will be represented by this value.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/height\n     */\n    this.height = 0;\n    /**\n     * Indicates whether or not the pointer device that created the event is the primary pointer.\n     * @see https://developer.mozilla.org/en-US/docs/Web/API/PointerEvent/isPrimary\n     */\n    this.isPrimary = false;\n  }\n  /**\n   * Only included for completeness for now\n   * @ignore\n   */\n  getCoalescedEvents() {\n    if (this.type === \"pointermove\" || this.type === \"mousemove\" || this.type === \"touchmove\") {\n      return [this];\n    }\n    return [];\n  }\n  /**\n   * Only included for completeness for now\n   * @ignore\n   */\n  getPredictedEvents() {\n    throw new Error(\"getPredictedEvents is not supported!\");\n  }\n}\n\nexport { FederatedPointerEvent };\n//# sourceMappingURL=FederatedPointerEvent.mjs.map\n","import { FederatedMouseEvent } from './FederatedMouseEvent.mjs';\n\n\"use strict\";\nclass FederatedWheelEvent extends FederatedMouseEvent {\n  constructor() {\n    super(...arguments);\n    /**\n     * Units specified in pixels.\n     * @ignore\n     */\n    this.DOM_DELTA_PIXEL = 0;\n    /**\n     * Units specified in lines.\n     * @ignore\n     */\n    this.DOM_DELTA_LINE = 1;\n    /**\n     * Units specified in pages.\n     * @ignore\n     */\n    this.DOM_DELTA_PAGE = 2;\n  }\n}\n/**\n * Units specified in pixels.\n * @ignore\n */\nFederatedWheelEvent.DOM_DELTA_PIXEL = 0;\n/**\n * Units specified in lines.\n * @ignore\n */\nFederatedWheelEvent.DOM_DELTA_LINE = 1;\n/**\n * Units specified in pages.\n * @ignore\n */\nFederatedWheelEvent.DOM_DELTA_PAGE = 2;\n\nexport { FederatedWheelEvent };\n//# sourceMappingURL=FederatedWheelEvent.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { Point } from '../maths/point/Point.mjs';\nimport { warn } from '../utils/logging/warn.mjs';\nimport { EventsTicker } from './EventTicker.mjs';\nimport { FederatedMouseEvent } from './FederatedMouseEvent.mjs';\nimport { FederatedPointerEvent } from './FederatedPointerEvent.mjs';\nimport { FederatedWheelEvent } from './FederatedWheelEvent.mjs';\n\n\"use strict\";\nconst PROPAGATION_LIMIT = 2048;\nconst tempHitLocation = new Point();\nconst tempLocalMapping = new Point();\nclass EventBoundary {\n  /**\n   * @param rootTarget - The holder of the event boundary.\n   */\n  constructor(rootTarget) {\n    /**\n     * Emits events after they were dispatched into the scene graph.\n     *\n     * This can be used for global events listening, regardless of the scene graph being used. It should\n     * not be used by interactive libraries for normal use.\n     *\n     * Special events that do not bubble all the way to the root target are not emitted from here,\n     * e.g. pointerenter, pointerleave, click.\n     */\n    this.dispatch = new EventEmitter();\n    /**\n     * This flag would emit `pointermove`, `touchmove`, and `mousemove` events on all Containers.\n     *\n     * The `moveOnAll` semantics mirror those of earlier versions of PixiJS. This was disabled in favor of\n     * the Pointer Event API's approach.\n     */\n    this.moveOnAll = false;\n    /** Enables the global move events. `globalpointermove`, `globaltouchmove`, and `globalmousemove` */\n    this.enableGlobalMoveEvents = true;\n    /**\n     * State object for mapping methods.\n     * @see EventBoundary#trackingData\n     */\n    this.mappingState = {\n      trackingData: {}\n    };\n    /**\n     * The event pool maps event constructors to an free pool of instances of those specific events.\n     * @see EventBoundary#allocateEvent\n     * @see EventBoundary#freeEvent\n     */\n    this.eventPool = /* @__PURE__ */ new Map();\n    /** Every interactive element gathered from the scene. Only used in `pointermove` */\n    this._allInteractiveElements = [];\n    /** Every element that passed the hit test. Only used in `pointermove` */\n    this._hitElements = [];\n    /** Whether or not to collect all the interactive elements from the scene. Enabled in `pointermove` */\n    this._isPointerMoveEvent = false;\n    this.rootTarget = rootTarget;\n    this.hitPruneFn = this.hitPruneFn.bind(this);\n    this.hitTestFn = this.hitTestFn.bind(this);\n    this.mapPointerDown = this.mapPointerDown.bind(this);\n    this.mapPointerMove = this.mapPointerMove.bind(this);\n    this.mapPointerOut = this.mapPointerOut.bind(this);\n    this.mapPointerOver = this.mapPointerOver.bind(this);\n    this.mapPointerUp = this.mapPointerUp.bind(this);\n    this.mapPointerUpOutside = this.mapPointerUpOutside.bind(this);\n    this.mapWheel = this.mapWheel.bind(this);\n    this.mappingTable = {};\n    this.addEventMapping(\"pointerdown\", this.mapPointerDown);\n    this.addEventMapping(\"pointermove\", this.mapPointerMove);\n    this.addEventMapping(\"pointerout\", this.mapPointerOut);\n    this.addEventMapping(\"pointerleave\", this.mapPointerOut);\n    this.addEventMapping(\"pointerover\", this.mapPointerOver);\n    this.addEventMapping(\"pointerup\", this.mapPointerUp);\n    this.addEventMapping(\"pointerupoutside\", this.mapPointerUpOutside);\n    this.addEventMapping(\"wheel\", this.mapWheel);\n  }\n  /**\n   * Adds an event mapping for the event `type` handled by `fn`.\n   *\n   * Event mappings can be used to implement additional or custom events. They take an event\n   * coming from the upstream scene (or directly from the {@link EventSystem}) and dispatch new downstream events\n   * generally trickling down and bubbling up to {@link EventBoundary.rootTarget this.rootTarget}.\n   *\n   * To modify the semantics of existing events, the built-in mapping methods of EventBoundary should be overridden\n   * instead.\n   * @param type - The type of upstream event to map.\n   * @param fn - The mapping method. The context of this function must be bound manually, if desired.\n   */\n  addEventMapping(type, fn) {\n    if (!this.mappingTable[type]) {\n      this.mappingTable[type] = [];\n    }\n    this.mappingTable[type].push({\n      fn,\n      priority: 0\n    });\n    this.mappingTable[type].sort((a, b) => a.priority - b.priority);\n  }\n  /**\n   * Dispatches the given event\n   * @param e - The event to dispatch.\n   * @param type - The type of event to dispatch. Defaults to `e.type`.\n   */\n  dispatchEvent(e, type) {\n    e.propagationStopped = false;\n    e.propagationImmediatelyStopped = false;\n    this.propagate(e, type);\n    this.dispatch.emit(type || e.type, e);\n  }\n  /**\n   * Maps the given upstream event through the event boundary and propagates it downstream.\n   * @param e - The event to map.\n   */\n  mapEvent(e) {\n    if (!this.rootTarget) {\n      return;\n    }\n    const mappers = this.mappingTable[e.type];\n    if (mappers) {\n      for (let i = 0, j = mappers.length; i < j; i++) {\n        mappers[i].fn(e);\n      }\n    } else {\n      warn(`[EventBoundary]: Event mapping not defined for ${e.type}`);\n    }\n  }\n  /**\n   * Finds the Container that is the target of a event at the given coordinates.\n   *\n   * The passed (x,y) coordinates are in the world space above this event boundary.\n   * @param x - The x coordinate of the event.\n   * @param y - The y coordinate of the event.\n   */\n  hitTest(x, y) {\n    EventsTicker.pauseUpdate = true;\n    const useMove = this._isPointerMoveEvent && this.enableGlobalMoveEvents;\n    const fn = useMove ? \"hitTestMoveRecursive\" : \"hitTestRecursive\";\n    const invertedPath = this[fn](\n      this.rootTarget,\n      this.rootTarget.eventMode,\n      tempHitLocation.set(x, y),\n      this.hitTestFn,\n      this.hitPruneFn\n    );\n    return invertedPath && invertedPath[0];\n  }\n  /**\n   * Propagate the passed event from from {@link EventBoundary.rootTarget this.rootTarget} to its\n   * target `e.target`.\n   * @param e - The event to propagate.\n   * @param type - The type of event to propagate. Defaults to `e.type`.\n   */\n  propagate(e, type) {\n    if (!e.target) {\n      return;\n    }\n    const composedPath = e.composedPath();\n    e.eventPhase = e.CAPTURING_PHASE;\n    for (let i = 0, j = composedPath.length - 1; i < j; i++) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped)\n        return;\n    }\n    e.eventPhase = e.AT_TARGET;\n    e.currentTarget = e.target;\n    this.notifyTarget(e, type);\n    if (e.propagationStopped || e.propagationImmediatelyStopped)\n      return;\n    e.eventPhase = e.BUBBLING_PHASE;\n    for (let i = composedPath.length - 2; i >= 0; i--) {\n      e.currentTarget = composedPath[i];\n      this.notifyTarget(e, type);\n      if (e.propagationStopped || e.propagationImmediatelyStopped)\n        return;\n    }\n  }\n  /**\n   * Emits the event `e` to all interactive containers. The event is propagated in the bubbling phase always.\n   *\n   * This is used in the `globalpointermove` event.\n   * @param e - The emitted event.\n   * @param type - The listeners to notify.\n   * @param targets - The targets to notify.\n   */\n  all(e, type, targets = this._allInteractiveElements) {\n    if (targets.length === 0)\n      return;\n    e.eventPhase = e.BUBBLING_PHASE;\n    const events = Array.isArray(type) ? type : [type];\n    for (let i = targets.length - 1; i >= 0; i--) {\n      events.forEach((event) => {\n        e.currentTarget = targets[i];\n        this.notifyTarget(e, event);\n      });\n    }\n  }\n  /**\n   * Finds the propagation path from {@link EventBoundary.rootTarget rootTarget} to the passed\n   * `target`. The last element in the path is `target`.\n   * @param target - The target to find the propagation path to.\n   */\n  propagationPath(target) {\n    const propagationPath = [target];\n    for (let i = 0; i < PROPAGATION_LIMIT && (target !== this.rootTarget && target.parent); i++) {\n      if (!target.parent) {\n        throw new Error(\"Cannot find propagation path to disconnected target\");\n      }\n      propagationPath.push(target.parent);\n      target = target.parent;\n    }\n    propagationPath.reverse();\n    return propagationPath;\n  }\n  hitTestMoveRecursive(currentTarget, eventMode, location, testFn, pruneFn, ignore = false) {\n    let shouldReturn = false;\n    if (this._interactivePrune(currentTarget))\n      return null;\n    if (currentTarget.eventMode === \"dynamic\" || eventMode === \"dynamic\") {\n      EventsTicker.pauseUpdate = false;\n    }\n    if (currentTarget.interactiveChildren && currentTarget.children) {\n      const children = currentTarget.children;\n      for (let i = children.length - 1; i >= 0; i--) {\n        const child = children[i];\n        const nestedHit = this.hitTestMoveRecursive(\n          child,\n          this._isInteractive(eventMode) ? eventMode : child.eventMode,\n          location,\n          testFn,\n          pruneFn,\n          ignore || pruneFn(currentTarget, location)\n        );\n        if (nestedHit) {\n          if (nestedHit.length > 0 && !nestedHit[nestedHit.length - 1].parent) {\n            continue;\n          }\n          const isInteractive = currentTarget.isInteractive();\n          if (nestedHit.length > 0 || isInteractive) {\n            if (isInteractive)\n              this._allInteractiveElements.push(currentTarget);\n            nestedHit.push(currentTarget);\n          }\n          if (this._hitElements.length === 0)\n            this._hitElements = nestedHit;\n          shouldReturn = true;\n        }\n      }\n    }\n    const isInteractiveMode = this._isInteractive(eventMode);\n    const isInteractiveTarget = currentTarget.isInteractive();\n    if (isInteractiveTarget && isInteractiveTarget)\n      this._allInteractiveElements.push(currentTarget);\n    if (ignore || this._hitElements.length > 0)\n      return null;\n    if (shouldReturn)\n      return this._hitElements;\n    if (isInteractiveMode && (!pruneFn(currentTarget, location) && testFn(currentTarget, location))) {\n      return isInteractiveTarget ? [currentTarget] : [];\n    }\n    return null;\n  }\n  /**\n   * Recursive implementation for {@link EventBoundary.hitTest hitTest}.\n   * @param currentTarget - The Container that is to be hit tested.\n   * @param eventMode - The event mode for the `currentTarget` or one of its parents.\n   * @param location - The location that is being tested for overlap.\n   * @param testFn - Callback that determines whether the target passes hit testing. This callback\n   *  can assume that `pruneFn` failed to prune the container.\n   * @param pruneFn - Callback that determiness whether the target and all of its children\n   *  cannot pass the hit test. It is used as a preliminary optimization to prune entire subtrees\n   *  of the scene graph.\n   * @returns An array holding the hit testing target and all its ancestors in order. The first element\n   *  is the target itself and the last is {@link EventBoundary.rootTarget rootTarget}. This is the opposite\n   *  order w.r.t. the propagation path. If no hit testing target is found, null is returned.\n   */\n  hitTestRecursive(currentTarget, eventMode, location, testFn, pruneFn) {\n    if (this._interactivePrune(currentTarget) || pruneFn(currentTarget, location)) {\n      return null;\n    }\n    if (currentTarget.eventMode === \"dynamic\" || eventMode === \"dynamic\") {\n      EventsTicker.pauseUpdate = false;\n    }\n    if (currentTarget.interactiveChildren && currentTarget.children) {\n      const children = currentTarget.children;\n      const relativeLocation = location;\n      for (let i = children.length - 1; i >= 0; i--) {\n        const child = children[i];\n        const nestedHit = this.hitTestRecursive(\n          child,\n          this._isInteractive(eventMode) ? eventMode : child.eventMode,\n          relativeLocation,\n          testFn,\n          pruneFn\n        );\n        if (nestedHit) {\n          if (nestedHit.length > 0 && !nestedHit[nestedHit.length - 1].parent) {\n            continue;\n          }\n          const isInteractive = currentTarget.isInteractive();\n          if (nestedHit.length > 0 || isInteractive)\n            nestedHit.push(currentTarget);\n          return nestedHit;\n        }\n      }\n    }\n    const isInteractiveMode = this._isInteractive(eventMode);\n    const isInteractiveTarget = currentTarget.isInteractive();\n    if (isInteractiveMode && testFn(currentTarget, location)) {\n      return isInteractiveTarget ? [currentTarget] : [];\n    }\n    return null;\n  }\n  _isInteractive(int) {\n    return int === \"static\" || int === \"dynamic\";\n  }\n  _interactivePrune(container) {\n    if (!container || !container.visible || !container.renderable || !container.measurable) {\n      return true;\n    }\n    if (container.eventMode === \"none\") {\n      return true;\n    }\n    if (container.eventMode === \"passive\" && !container.interactiveChildren) {\n      return true;\n    }\n    return false;\n  }\n  /**\n   * Checks whether the container or any of its children cannot pass the hit test at all.\n   *\n   * {@link EventBoundary}'s implementation uses the {@link Container.hitArea hitArea}\n   * and {@link Container._maskEffect} for pruning.\n   * @param container - The container to prune.\n   * @param location - The location to test for overlap.\n   */\n  hitPruneFn(container, location) {\n    if (container.hitArea) {\n      container.worldTransform.applyInverse(location, tempLocalMapping);\n      if (!container.hitArea.contains(tempLocalMapping.x, tempLocalMapping.y)) {\n        return true;\n      }\n    }\n    if (container.effects && container.effects.length) {\n      for (let i = 0; i < container.effects.length; i++) {\n        const effect = container.effects[i];\n        if (effect.containsPoint) {\n          const effectContainsPoint = effect.containsPoint(location, this.hitTestFn);\n          if (!effectContainsPoint) {\n            return true;\n          }\n        }\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the container passes hit testing for the given location.\n   * @param container - The container to test.\n   * @param location - The location to test for overlap.\n   * @returns - Whether `container` passes hit testing for `location`.\n   */\n  hitTestFn(container, location) {\n    if (container.hitArea) {\n      return true;\n    }\n    if (container?.containsPoint) {\n      container.worldTransform.applyInverse(location, tempLocalMapping);\n      return container.containsPoint(tempLocalMapping);\n    }\n    return false;\n  }\n  /**\n   * Notify all the listeners to the event's `currentTarget`.\n   *\n   * If the `currentTarget` contains the property `on<type>`, then it is called here,\n   * simulating the behavior from version 6.x and prior.\n   * @param e - The event passed to the target.\n   * @param type - The type of event to notify. Defaults to `e.type`.\n   */\n  notifyTarget(e, type) {\n    if (!e.currentTarget.isInteractive()) {\n      return;\n    }\n    type ?? (type = e.type);\n    const handlerKey = `on${type}`;\n    e.currentTarget[handlerKey]?.(e);\n    const key = e.eventPhase === e.CAPTURING_PHASE || e.eventPhase === e.AT_TARGET ? `${type}capture` : type;\n    this._notifyListeners(e, key);\n    if (e.eventPhase === e.AT_TARGET) {\n      this._notifyListeners(e, type);\n    }\n  }\n  /**\n   * Maps the upstream `pointerdown` events to a downstream `pointerdown` event.\n   *\n   * `touchstart`, `rightdown`, `mousedown` events are also dispatched for specific pointer types.\n   * @param from - The upstream `pointerdown` event.\n   */\n  mapPointerDown(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const e = this.createPointerEvent(from);\n    this.dispatchEvent(e, \"pointerdown\");\n    if (e.pointerType === \"touch\") {\n      this.dispatchEvent(e, \"touchstart\");\n    } else if (e.pointerType === \"mouse\" || e.pointerType === \"pen\") {\n      const isRightButton = e.button === 2;\n      this.dispatchEvent(e, isRightButton ? \"rightdown\" : \"mousedown\");\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    trackingData.pressTargetsByButton[from.button] = e.composedPath();\n    this.freeEvent(e);\n  }\n  /**\n   * Maps the upstream `pointermove` to downstream `pointerout`, `pointerover`, and `pointermove` events, in that order.\n   *\n   * The tracking data for the specific pointer has an updated `overTarget`. `mouseout`, `mouseover`,\n   * `mousemove`, and `touchmove` events are fired as well for specific pointer types.\n   * @param from - The upstream `pointermove` event.\n   */\n  mapPointerMove(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    this._allInteractiveElements.length = 0;\n    this._hitElements.length = 0;\n    this._isPointerMoveEvent = true;\n    const e = this.createPointerEvent(from);\n    this._isPointerMoveEvent = false;\n    const isMouse = e.pointerType === \"mouse\" || e.pointerType === \"pen\";\n    const trackingData = this.trackingData(from.pointerId);\n    const outTarget = this.findMountedTarget(trackingData.overTargets);\n    if (trackingData.overTargets?.length > 0 && outTarget !== e.target) {\n      const outType = from.type === \"mousemove\" ? \"mouseout\" : \"pointerout\";\n      const outEvent = this.createPointerEvent(from, outType, outTarget);\n      this.dispatchEvent(outEvent, \"pointerout\");\n      if (isMouse)\n        this.dispatchEvent(outEvent, \"mouseout\");\n      if (!e.composedPath().includes(outTarget)) {\n        const leaveEvent = this.createPointerEvent(from, \"pointerleave\", outTarget);\n        leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n        while (leaveEvent.target && !e.composedPath().includes(leaveEvent.target)) {\n          leaveEvent.currentTarget = leaveEvent.target;\n          this.notifyTarget(leaveEvent);\n          if (isMouse)\n            this.notifyTarget(leaveEvent, \"mouseleave\");\n          leaveEvent.target = leaveEvent.target.parent;\n        }\n        this.freeEvent(leaveEvent);\n      }\n      this.freeEvent(outEvent);\n    }\n    if (outTarget !== e.target) {\n      const overType = from.type === \"mousemove\" ? \"mouseover\" : \"pointerover\";\n      const overEvent = this.clonePointerEvent(e, overType);\n      this.dispatchEvent(overEvent, \"pointerover\");\n      if (isMouse)\n        this.dispatchEvent(overEvent, \"mouseover\");\n      let overTargetAncestor = outTarget?.parent;\n      while (overTargetAncestor && overTargetAncestor !== this.rootTarget.parent) {\n        if (overTargetAncestor === e.target)\n          break;\n        overTargetAncestor = overTargetAncestor.parent;\n      }\n      const didPointerEnter = !overTargetAncestor || overTargetAncestor === this.rootTarget.parent;\n      if (didPointerEnter) {\n        const enterEvent = this.clonePointerEvent(e, \"pointerenter\");\n        enterEvent.eventPhase = enterEvent.AT_TARGET;\n        while (enterEvent.target && enterEvent.target !== outTarget && enterEvent.target !== this.rootTarget.parent) {\n          enterEvent.currentTarget = enterEvent.target;\n          this.notifyTarget(enterEvent);\n          if (isMouse)\n            this.notifyTarget(enterEvent, \"mouseenter\");\n          enterEvent.target = enterEvent.target.parent;\n        }\n        this.freeEvent(enterEvent);\n      }\n      this.freeEvent(overEvent);\n    }\n    const allMethods = [];\n    const allowGlobalPointerEvents = this.enableGlobalMoveEvents ?? true;\n    this.moveOnAll ? allMethods.push(\"pointermove\") : this.dispatchEvent(e, \"pointermove\");\n    allowGlobalPointerEvents && allMethods.push(\"globalpointermove\");\n    if (e.pointerType === \"touch\") {\n      this.moveOnAll ? allMethods.splice(1, 0, \"touchmove\") : this.dispatchEvent(e, \"touchmove\");\n      allowGlobalPointerEvents && allMethods.push(\"globaltouchmove\");\n    }\n    if (isMouse) {\n      this.moveOnAll ? allMethods.splice(1, 0, \"mousemove\") : this.dispatchEvent(e, \"mousemove\");\n      allowGlobalPointerEvents && allMethods.push(\"globalmousemove\");\n      this.cursor = e.target?.cursor;\n    }\n    if (allMethods.length > 0) {\n      this.all(e, allMethods);\n    }\n    this._allInteractiveElements.length = 0;\n    this._hitElements.length = 0;\n    trackingData.overTargets = e.composedPath();\n    this.freeEvent(e);\n  }\n  /**\n   * Maps the upstream `pointerover` to downstream `pointerover` and `pointerenter` events, in that order.\n   *\n   * The tracking data for the specific pointer gets a new `overTarget`.\n   * @param from - The upstream `pointerover` event.\n   */\n  mapPointerOver(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    const e = this.createPointerEvent(from);\n    const isMouse = e.pointerType === \"mouse\" || e.pointerType === \"pen\";\n    this.dispatchEvent(e, \"pointerover\");\n    if (isMouse)\n      this.dispatchEvent(e, \"mouseover\");\n    if (e.pointerType === \"mouse\")\n      this.cursor = e.target?.cursor;\n    const enterEvent = this.clonePointerEvent(e, \"pointerenter\");\n    enterEvent.eventPhase = enterEvent.AT_TARGET;\n    while (enterEvent.target && enterEvent.target !== this.rootTarget.parent) {\n      enterEvent.currentTarget = enterEvent.target;\n      this.notifyTarget(enterEvent);\n      if (isMouse)\n        this.notifyTarget(enterEvent, \"mouseenter\");\n      enterEvent.target = enterEvent.target.parent;\n    }\n    trackingData.overTargets = e.composedPath();\n    this.freeEvent(e);\n    this.freeEvent(enterEvent);\n  }\n  /**\n   * Maps the upstream `pointerout` to downstream `pointerout`, `pointerleave` events, in that order.\n   *\n   * The tracking data for the specific pointer is cleared of a `overTarget`.\n   * @param from - The upstream `pointerout` event.\n   */\n  mapPointerOut(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    if (trackingData.overTargets) {\n      const isMouse = from.pointerType === \"mouse\" || from.pointerType === \"pen\";\n      const outTarget = this.findMountedTarget(trackingData.overTargets);\n      const outEvent = this.createPointerEvent(from, \"pointerout\", outTarget);\n      this.dispatchEvent(outEvent);\n      if (isMouse)\n        this.dispatchEvent(outEvent, \"mouseout\");\n      const leaveEvent = this.createPointerEvent(from, \"pointerleave\", outTarget);\n      leaveEvent.eventPhase = leaveEvent.AT_TARGET;\n      while (leaveEvent.target && leaveEvent.target !== this.rootTarget.parent) {\n        leaveEvent.currentTarget = leaveEvent.target;\n        this.notifyTarget(leaveEvent);\n        if (isMouse)\n          this.notifyTarget(leaveEvent, \"mouseleave\");\n        leaveEvent.target = leaveEvent.target.parent;\n      }\n      trackingData.overTargets = null;\n      this.freeEvent(outEvent);\n      this.freeEvent(leaveEvent);\n    }\n    this.cursor = null;\n  }\n  /**\n   * Maps the upstream `pointerup` event to downstream `pointerup`, `pointerupoutside`,\n   * and `click`/`rightclick`/`pointertap` events, in that order.\n   *\n   * The `pointerupoutside` event bubbles from the original `pointerdown` target to the most specific\n   * ancestor of the `pointerdown` and `pointerup` targets, which is also the `click` event's target. `touchend`,\n   * `rightup`, `mouseup`, `touchendoutside`, `rightupoutside`, `mouseupoutside`, and `tap` are fired as well for\n   * specific pointer types.\n   * @param from - The upstream `pointerup` event.\n   */\n  mapPointerUp(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const now = performance.now();\n    const e = this.createPointerEvent(from);\n    this.dispatchEvent(e, \"pointerup\");\n    if (e.pointerType === \"touch\") {\n      this.dispatchEvent(e, \"touchend\");\n    } else if (e.pointerType === \"mouse\" || e.pointerType === \"pen\") {\n      const isRightButton = e.button === 2;\n      this.dispatchEvent(e, isRightButton ? \"rightup\" : \"mouseup\");\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    const pressTarget = this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n    let clickTarget = pressTarget;\n    if (pressTarget && !e.composedPath().includes(pressTarget)) {\n      let currentTarget = pressTarget;\n      while (currentTarget && !e.composedPath().includes(currentTarget)) {\n        e.currentTarget = currentTarget;\n        this.notifyTarget(e, \"pointerupoutside\");\n        if (e.pointerType === \"touch\") {\n          this.notifyTarget(e, \"touchendoutside\");\n        } else if (e.pointerType === \"mouse\" || e.pointerType === \"pen\") {\n          const isRightButton = e.button === 2;\n          this.notifyTarget(e, isRightButton ? \"rightupoutside\" : \"mouseupoutside\");\n        }\n        currentTarget = currentTarget.parent;\n      }\n      delete trackingData.pressTargetsByButton[from.button];\n      clickTarget = currentTarget;\n    }\n    if (clickTarget) {\n      const clickEvent = this.clonePointerEvent(e, \"click\");\n      clickEvent.target = clickTarget;\n      clickEvent.path = null;\n      if (!trackingData.clicksByButton[from.button]) {\n        trackingData.clicksByButton[from.button] = {\n          clickCount: 0,\n          target: clickEvent.target,\n          timeStamp: now\n        };\n      }\n      const clickHistory = trackingData.clicksByButton[from.button];\n      if (clickHistory.target === clickEvent.target && now - clickHistory.timeStamp < 200) {\n        ++clickHistory.clickCount;\n      } else {\n        clickHistory.clickCount = 1;\n      }\n      clickHistory.target = clickEvent.target;\n      clickHistory.timeStamp = now;\n      clickEvent.detail = clickHistory.clickCount;\n      if (clickEvent.pointerType === \"mouse\") {\n        const isRightButton = clickEvent.button === 2;\n        this.dispatchEvent(clickEvent, isRightButton ? \"rightclick\" : \"click\");\n      } else if (clickEvent.pointerType === \"touch\") {\n        this.dispatchEvent(clickEvent, \"tap\");\n      }\n      this.dispatchEvent(clickEvent, \"pointertap\");\n      this.freeEvent(clickEvent);\n    }\n    this.freeEvent(e);\n  }\n  /**\n   * Maps the upstream `pointerupoutside` event to a downstream `pointerupoutside` event, bubbling from the original\n   * `pointerdown` target to `rootTarget`.\n   *\n   * (The most specific ancestor of the `pointerdown` event and the `pointerup` event must the\n   * `{@link EventBoundary}'s root because the `pointerup` event occurred outside of the boundary.)\n   *\n   * `touchendoutside`, `mouseupoutside`, and `rightupoutside` events are fired as well for specific pointer\n   * types. The tracking data for the specific pointer is cleared of a `pressTarget`.\n   * @param from - The upstream `pointerupoutside` event.\n   */\n  mapPointerUpOutside(from) {\n    if (!(from instanceof FederatedPointerEvent)) {\n      warn(\"EventBoundary cannot map a non-pointer event as a pointer event\");\n      return;\n    }\n    const trackingData = this.trackingData(from.pointerId);\n    const pressTarget = this.findMountedTarget(trackingData.pressTargetsByButton[from.button]);\n    const e = this.createPointerEvent(from);\n    if (pressTarget) {\n      let currentTarget = pressTarget;\n      while (currentTarget) {\n        e.currentTarget = currentTarget;\n        this.notifyTarget(e, \"pointerupoutside\");\n        if (e.pointerType === \"touch\") {\n          this.notifyTarget(e, \"touchendoutside\");\n        } else if (e.pointerType === \"mouse\" || e.pointerType === \"pen\") {\n          this.notifyTarget(e, e.button === 2 ? \"rightupoutside\" : \"mouseupoutside\");\n        }\n        currentTarget = currentTarget.parent;\n      }\n      delete trackingData.pressTargetsByButton[from.button];\n    }\n    this.freeEvent(e);\n  }\n  /**\n   * Maps the upstream `wheel` event to a downstream `wheel` event.\n   * @param from - The upstream `wheel` event.\n   */\n  mapWheel(from) {\n    if (!(from instanceof FederatedWheelEvent)) {\n      warn(\"EventBoundary cannot map a non-wheel event as a wheel event\");\n      return;\n    }\n    const wheelEvent = this.createWheelEvent(from);\n    this.dispatchEvent(wheelEvent);\n    this.freeEvent(wheelEvent);\n  }\n  /**\n   * Finds the most specific event-target in the given propagation path that is still mounted in the scene graph.\n   *\n   * This is used to find the correct `pointerup` and `pointerout` target in the case that the original `pointerdown`\n   * or `pointerover` target was unmounted from the scene graph.\n   * @param propagationPath - The propagation path was valid in the past.\n   * @returns - The most specific event-target still mounted at the same location in the scene graph.\n   */\n  findMountedTarget(propagationPath) {\n    if (!propagationPath) {\n      return null;\n    }\n    let currentTarget = propagationPath[0];\n    for (let i = 1; i < propagationPath.length; i++) {\n      if (propagationPath[i].parent === currentTarget) {\n        currentTarget = propagationPath[i];\n      } else {\n        break;\n      }\n    }\n    return currentTarget;\n  }\n  /**\n   * Creates an event whose `originalEvent` is `from`, with an optional `type` and `target` override.\n   *\n   * The event is allocated using {@link EventBoundary#allocateEvent this.allocateEvent}.\n   * @param from - The `originalEvent` for the returned event.\n   * @param [type=from.type] - The type of the returned event.\n   * @param target - The target of the returned event.\n   */\n  createPointerEvent(from, type, target) {\n    const event = this.allocateEvent(FederatedPointerEvent);\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n    event.target = target ?? this.hitTest(event.global.x, event.global.y) ?? this._hitElements[0];\n    if (typeof type === \"string\") {\n      event.type = type;\n    }\n    return event;\n  }\n  /**\n   * Creates a wheel event whose `originalEvent` is `from`.\n   *\n   * The event is allocated using {@link EventBoundary#allocateEvent this.allocateEvent}.\n   * @param from - The upstream wheel event.\n   */\n  createWheelEvent(from) {\n    const event = this.allocateEvent(FederatedWheelEvent);\n    this.copyWheelData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from;\n    event.target = this.hitTest(event.global.x, event.global.y);\n    return event;\n  }\n  /**\n   * Clones the event `from`, with an optional `type` override.\n   *\n   * The event is allocated using {@link EventBoundary#allocateEvent this.allocateEvent}.\n   * @param from - The event to clone.\n   * @param [type=from.type] - The type of the returned event.\n   */\n  clonePointerEvent(from, type) {\n    const event = this.allocateEvent(FederatedPointerEvent);\n    event.nativeEvent = from.nativeEvent;\n    event.originalEvent = from.originalEvent;\n    this.copyPointerData(from, event);\n    this.copyMouseData(from, event);\n    this.copyData(from, event);\n    event.target = from.target;\n    event.path = from.composedPath().slice();\n    event.type = type ?? event.type;\n    return event;\n  }\n  /**\n   * Copies wheel {@link FederatedWheelEvent} data from `from` into `to`.\n   *\n   * The following properties are copied:\n   * + deltaMode\n   * + deltaX\n   * + deltaY\n   * + deltaZ\n   * @param from - The event to copy data from.\n   * @param to - The event to copy data into.\n   */\n  copyWheelData(from, to) {\n    to.deltaMode = from.deltaMode;\n    to.deltaX = from.deltaX;\n    to.deltaY = from.deltaY;\n    to.deltaZ = from.deltaZ;\n  }\n  /**\n   * Copies pointer {@link FederatedPointerEvent} data from `from` into `to`.\n   *\n   * The following properties are copied:\n   * + pointerId\n   * + width\n   * + height\n   * + isPrimary\n   * + pointerType\n   * + pressure\n   * + tangentialPressure\n   * + tiltX\n   * + tiltY\n   * @param from - The event to copy data from.\n   * @param to - The event to copy data into.\n   */\n  copyPointerData(from, to) {\n    if (!(from instanceof FederatedPointerEvent && to instanceof FederatedPointerEvent))\n      return;\n    to.pointerId = from.pointerId;\n    to.width = from.width;\n    to.height = from.height;\n    to.isPrimary = from.isPrimary;\n    to.pointerType = from.pointerType;\n    to.pressure = from.pressure;\n    to.tangentialPressure = from.tangentialPressure;\n    to.tiltX = from.tiltX;\n    to.tiltY = from.tiltY;\n    to.twist = from.twist;\n  }\n  /**\n   * Copies mouse {@link FederatedMouseEvent} data from `from` to `to`.\n   *\n   * The following properties are copied:\n   * + altKey\n   * + button\n   * + buttons\n   * + clientX\n   * + clientY\n   * + metaKey\n   * + movementX\n   * + movementY\n   * + pageX\n   * + pageY\n   * + x\n   * + y\n   * + screen\n   * + shiftKey\n   * + global\n   * @param from - The event to copy data from.\n   * @param to - The event to copy data into.\n   */\n  copyMouseData(from, to) {\n    if (!(from instanceof FederatedMouseEvent && to instanceof FederatedMouseEvent))\n      return;\n    to.altKey = from.altKey;\n    to.button = from.button;\n    to.buttons = from.buttons;\n    to.client.copyFrom(from.client);\n    to.ctrlKey = from.ctrlKey;\n    to.metaKey = from.metaKey;\n    to.movement.copyFrom(from.movement);\n    to.screen.copyFrom(from.screen);\n    to.shiftKey = from.shiftKey;\n    to.global.copyFrom(from.global);\n  }\n  /**\n   * Copies base {@link FederatedEvent} data from `from` into `to`.\n   *\n   * The following properties are copied:\n   * + isTrusted\n   * + srcElement\n   * + timeStamp\n   * + type\n   * @param from - The event to copy data from.\n   * @param to - The event to copy data into.\n   */\n  copyData(from, to) {\n    to.isTrusted = from.isTrusted;\n    to.srcElement = from.srcElement;\n    to.timeStamp = performance.now();\n    to.type = from.type;\n    to.detail = from.detail;\n    to.view = from.view;\n    to.which = from.which;\n    to.layer.copyFrom(from.layer);\n    to.page.copyFrom(from.page);\n  }\n  /**\n   * @param id - The pointer ID.\n   * @returns The tracking data stored for the given pointer. If no data exists, a blank\n   *  state will be created.\n   */\n  trackingData(id) {\n    if (!this.mappingState.trackingData[id]) {\n      this.mappingState.trackingData[id] = {\n        pressTargetsByButton: {},\n        clicksByButton: {},\n        overTarget: null\n      };\n    }\n    return this.mappingState.trackingData[id];\n  }\n  /**\n   * Allocate a specific type of event from {@link EventBoundary#eventPool this.eventPool}.\n   *\n   * This allocation is constructor-agnostic, as long as it only takes one argument - this event\n   * boundary.\n   * @param constructor - The event's constructor.\n   * @returns An event of the given type.\n   */\n  allocateEvent(constructor) {\n    if (!this.eventPool.has(constructor)) {\n      this.eventPool.set(constructor, []);\n    }\n    const event = this.eventPool.get(constructor).pop() || new constructor(this);\n    event.eventPhase = event.NONE;\n    event.currentTarget = null;\n    event.defaultPrevented = false;\n    event.path = null;\n    event.target = null;\n    return event;\n  }\n  /**\n   * Frees the event and puts it back into the event pool.\n   *\n   * It is illegal to reuse the event until it is allocated again, using `this.allocateEvent`.\n   *\n   * It is also advised that events not allocated from {@link EventBoundary#allocateEvent this.allocateEvent}\n   * not be freed. This is because of the possibility that the same event is freed twice, which can cause\n   * it to be allocated twice & result in overwriting.\n   * @param event - The event to be freed.\n   * @throws Error if the event is managed by another event boundary.\n   */\n  freeEvent(event) {\n    if (event.manager !== this)\n      throw new Error(\"It is illegal to free an event not managed by this EventBoundary!\");\n    const constructor = event.constructor;\n    if (!this.eventPool.has(constructor)) {\n      this.eventPool.set(constructor, []);\n    }\n    this.eventPool.get(constructor).push(event);\n  }\n  /**\n   * Similar to {@link EventEmitter.emit}, except it stops if the `propagationImmediatelyStopped` flag\n   * is set on the event.\n   * @param e - The event to call each listener with.\n   * @param type - The event key.\n   */\n  _notifyListeners(e, type) {\n    const listeners = e.currentTarget._events[type];\n    if (!listeners)\n      return;\n    if (\"fn\" in listeners) {\n      if (listeners.once)\n        e.currentTarget.removeListener(type, listeners.fn, void 0, true);\n      listeners.fn.call(listeners.context, e);\n    } else {\n      for (let i = 0, j = listeners.length; i < j && !e.propagationImmediatelyStopped; i++) {\n        if (listeners[i].once)\n          e.currentTarget.removeListener(type, listeners[i].fn, void 0, true);\n        listeners[i].fn.call(listeners[i].context, e);\n      }\n    }\n  }\n}\n\nexport { EventBoundary };\n//# sourceMappingURL=EventBoundary.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\nimport { EventBoundary } from './EventBoundary.mjs';\nimport { EventsTicker } from './EventTicker.mjs';\nimport { FederatedPointerEvent } from './FederatedPointerEvent.mjs';\nimport { FederatedWheelEvent } from './FederatedWheelEvent.mjs';\n\n\"use strict\";\nconst MOUSE_POINTER_ID = 1;\nconst TOUCH_TO_POINTER = {\n  touchstart: \"pointerdown\",\n  touchend: \"pointerup\",\n  touchendoutside: \"pointerupoutside\",\n  touchmove: \"pointermove\",\n  touchcancel: \"pointercancel\"\n};\nconst _EventSystem = class _EventSystem {\n  /**\n   * @param {Renderer} renderer\n   */\n  constructor(renderer) {\n    /**\n     * Indicates whether the current device supports touch events according to the W3C Touch Events spec.\n     * This is used to determine the appropriate event handling strategy.\n     * @see {@link https://www.w3.org/TR/touch-events/} W3C Touch Events Specification\n     * @readonly\n     * @default 'ontouchstart' in globalThis\n     */\n    this.supportsTouchEvents = \"ontouchstart\" in globalThis;\n    /**\n     * Indicates whether the current device supports pointer events according to the W3C Pointer Events spec.\n     * Used to optimize event handling and provide more consistent cross-device interaction.\n     * @see {@link https://www.w3.org/TR/pointerevents/} W3C Pointer Events Specification\n     * @readonly\n     * @default !!globalThis.PointerEvent\n     */\n    this.supportsPointerEvents = !!globalThis.PointerEvent;\n    /**\n     * The DOM element to which the root event listeners are bound. This is automatically set to\n     * the renderer's {@link Renderer#view view}.\n     */\n    this.domElement = null;\n    /** The resolution used to convert between the DOM client space into world space. */\n    this.resolution = 1;\n    this.renderer = renderer;\n    this.rootBoundary = new EventBoundary(null);\n    EventsTicker.init(this);\n    this.autoPreventDefault = true;\n    this._eventsAdded = false;\n    this._rootPointerEvent = new FederatedPointerEvent(null);\n    this._rootWheelEvent = new FederatedWheelEvent(null);\n    this.cursorStyles = {\n      default: \"inherit\",\n      pointer: \"pointer\"\n    };\n    this.features = new Proxy({ ..._EventSystem.defaultEventFeatures }, {\n      set: (target, key, value) => {\n        if (key === \"globalMove\") {\n          this.rootBoundary.enableGlobalMoveEvents = value;\n        }\n        target[key] = value;\n        return true;\n      }\n    });\n    this._onPointerDown = this._onPointerDown.bind(this);\n    this._onPointerMove = this._onPointerMove.bind(this);\n    this._onPointerUp = this._onPointerUp.bind(this);\n    this._onPointerOverOut = this._onPointerOverOut.bind(this);\n    this.onWheel = this.onWheel.bind(this);\n  }\n  /**\n   * The default interaction mode for all display objects.\n   * @see Container.eventMode\n   * @type {EventMode}\n   * @readonly\n   * @since 7.2.0\n   */\n  static get defaultEventMode() {\n    return this._defaultEventMode;\n  }\n  /**\n   * Runner init called, view is available at this point.\n   * @ignore\n   */\n  init(options) {\n    const { canvas, resolution } = this.renderer;\n    this.setTargetElement(canvas);\n    this.resolution = resolution;\n    _EventSystem._defaultEventMode = options.eventMode ?? \"passive\";\n    Object.assign(this.features, options.eventFeatures ?? {});\n    this.rootBoundary.enableGlobalMoveEvents = this.features.globalMove;\n  }\n  /**\n   * Handle changing resolution.\n   * @ignore\n   */\n  resolutionChange(resolution) {\n    this.resolution = resolution;\n  }\n  /** Destroys all event listeners and detaches the renderer. */\n  destroy() {\n    EventsTicker.destroy();\n    this.setTargetElement(null);\n    this.renderer = null;\n    this._currentCursor = null;\n  }\n  /**\n   * Sets the current cursor mode, handling any callbacks or CSS style changes.\n   * The cursor can be a CSS cursor string, a custom callback function, or a key from the cursorStyles dictionary.\n   * @param mode - Cursor mode to set. Can be:\n   * - A CSS cursor string (e.g., 'pointer', 'grab')\n   * - A key from the cursorStyles dictionary\n   * - null/undefined to reset to default\n   * @example\n   * ```ts\n   * // Using predefined cursor styles\n   * app.renderer.events.setCursor('pointer');    // Set standard pointer cursor\n   * app.renderer.events.setCursor('grab');       // Set grab cursor\n   * app.renderer.events.setCursor(null);         // Reset to default\n   *\n   * // Using custom cursor styles\n   * app.renderer.events.cursorStyles.custom = 'url(\"cursor.png\"), auto';\n   * app.renderer.events.setCursor('custom');     // Apply custom cursor\n   *\n   * // Using callback-based cursor\n   * app.renderer.events.cursorStyles.dynamic = (mode) => {\n   *     document.body.style.cursor = mode === 'hover' ? 'pointer' : 'default';\n   * };\n   * app.renderer.events.setCursor('dynamic');    // Trigger cursor callback\n   * ```\n   * @remarks\n   * - Has no effect on OffscreenCanvas except for callback-based cursors\n   * - Caches current cursor to avoid unnecessary DOM updates\n   * - Supports CSS cursor values, style objects, and callback functions\n   * @see {@link EventSystem.cursorStyles} For defining custom cursor styles\n   * @see {@link https://developer.mozilla.org/en-US/docs/Web/CSS/cursor} MDN Cursor Reference\n   */\n  setCursor(mode) {\n    mode || (mode = \"default\");\n    let applyStyles = true;\n    if (globalThis.OffscreenCanvas && this.domElement instanceof OffscreenCanvas) {\n      applyStyles = false;\n    }\n    if (this._currentCursor === mode) {\n      return;\n    }\n    this._currentCursor = mode;\n    const style = this.cursorStyles[mode];\n    if (style) {\n      switch (typeof style) {\n        case \"string\":\n          if (applyStyles) {\n            this.domElement.style.cursor = style;\n          }\n          break;\n        case \"function\":\n          style(mode);\n          break;\n        case \"object\":\n          if (applyStyles) {\n            Object.assign(this.domElement.style, style);\n          }\n          break;\n      }\n    } else if (applyStyles && typeof mode === \"string\" && !Object.prototype.hasOwnProperty.call(this.cursorStyles, mode)) {\n      this.domElement.style.cursor = mode;\n    }\n  }\n  /**\n   * The global pointer event instance containing the most recent pointer state.\n   * This is useful for accessing pointer information without listening to events.\n   * @example\n   * ```ts\n   * // Access current pointer position at any time\n   * const eventSystem = app.renderer.events;\n   * const pointer = eventSystem.pointer;\n   *\n   * // Get global coordinates\n   * console.log('Position:', pointer.global.x, pointer.global.y);\n   *\n   * // Check button state\n   * console.log('Buttons pressed:', pointer.buttons);\n   *\n   * // Get pointer type and pressure\n   * console.log('Type:', pointer.pointerType);\n   * console.log('Pressure:', pointer.pressure);\n   * ```\n   * @readonly\n   * @since 7.2.0\n   * @see {@link FederatedPointerEvent} For all available pointer properties\n   */\n  get pointer() {\n    return this._rootPointerEvent;\n  }\n  /**\n   * Event handler for pointer down events on {@link EventSystem#domElement this.domElement}.\n   * @param nativeEvent - The native mouse/pointer/touch event.\n   */\n  _onPointerDown(nativeEvent) {\n    if (!this.features.click)\n      return;\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    const events = this._normalizeToPointerData(nativeEvent);\n    if (this.autoPreventDefault && events[0].isNormalized) {\n      const cancelable = nativeEvent.cancelable || !(\"cancelable\" in nativeEvent);\n      if (cancelable) {\n        nativeEvent.preventDefault();\n      }\n    }\n    for (let i = 0, j = events.length; i < j; i++) {\n      const nativeEvent2 = events[i];\n      const federatedEvent = this._bootstrapEvent(this._rootPointerEvent, nativeEvent2);\n      this.rootBoundary.mapEvent(federatedEvent);\n    }\n    this.setCursor(this.rootBoundary.cursor);\n  }\n  /**\n   * Event handler for pointer move events on on {@link EventSystem#domElement this.domElement}.\n   * @param nativeEvent - The native mouse/pointer/touch events.\n   */\n  _onPointerMove(nativeEvent) {\n    if (!this.features.move)\n      return;\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    EventsTicker.pointerMoved();\n    const normalizedEvents = this._normalizeToPointerData(nativeEvent);\n    for (let i = 0, j = normalizedEvents.length; i < j; i++) {\n      const event = this._bootstrapEvent(this._rootPointerEvent, normalizedEvents[i]);\n      this.rootBoundary.mapEvent(event);\n    }\n    this.setCursor(this.rootBoundary.cursor);\n  }\n  /**\n   * Event handler for pointer up events on {@link EventSystem#domElement this.domElement}.\n   * @param nativeEvent - The native mouse/pointer/touch event.\n   */\n  _onPointerUp(nativeEvent) {\n    if (!this.features.click)\n      return;\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    let target = nativeEvent.target;\n    if (nativeEvent.composedPath && nativeEvent.composedPath().length > 0) {\n      target = nativeEvent.composedPath()[0];\n    }\n    const outside = target !== this.domElement ? \"outside\" : \"\";\n    const normalizedEvents = this._normalizeToPointerData(nativeEvent);\n    for (let i = 0, j = normalizedEvents.length; i < j; i++) {\n      const event = this._bootstrapEvent(this._rootPointerEvent, normalizedEvents[i]);\n      event.type += outside;\n      this.rootBoundary.mapEvent(event);\n    }\n    this.setCursor(this.rootBoundary.cursor);\n  }\n  /**\n   * Event handler for pointer over & out events on {@link EventSystem#domElement this.domElement}.\n   * @param nativeEvent - The native mouse/pointer/touch event.\n   */\n  _onPointerOverOut(nativeEvent) {\n    if (!this.features.click)\n      return;\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    const normalizedEvents = this._normalizeToPointerData(nativeEvent);\n    for (let i = 0, j = normalizedEvents.length; i < j; i++) {\n      const event = this._bootstrapEvent(this._rootPointerEvent, normalizedEvents[i]);\n      this.rootBoundary.mapEvent(event);\n    }\n    this.setCursor(this.rootBoundary.cursor);\n  }\n  /**\n   * Passive handler for `wheel` events on {@link EventSystem.domElement this.domElement}.\n   * @param nativeEvent - The native wheel event.\n   */\n  onWheel(nativeEvent) {\n    if (!this.features.wheel)\n      return;\n    const wheelEvent = this.normalizeWheelEvent(nativeEvent);\n    this.rootBoundary.rootTarget = this.renderer.lastObjectRendered;\n    this.rootBoundary.mapEvent(wheelEvent);\n  }\n  /**\n   * Sets the {@link EventSystem#domElement domElement} and binds event listeners.\n   * This method manages the DOM event bindings for the event system, allowing you to\n   * change or remove the target element that receives input events.\n   * > [!IMPORTANT] This will default to the canvas element of the renderer, so you\n   * > should not need to call this unless you are using a custom element.\n   * @param element - The new DOM element to bind events to, or null to remove all event bindings\n   * @example\n   * ```ts\n   * // Set a new canvas element as the target\n   * const canvas = document.createElement('canvas');\n   * app.renderer.events.setTargetElement(canvas);\n   *\n   * // Remove all event bindings\n   * app.renderer.events.setTargetElement(null);\n   *\n   * // Switch to a different canvas\n   * const newCanvas = document.querySelector('#game-canvas');\n   * app.renderer.events.setTargetElement(newCanvas);\n   * ```\n   * @remarks\n   * - Automatically removes event listeners from previous element\n   * - Required for the event system to function\n   * - Safe to call multiple times\n   * @see {@link EventSystem#domElement} The current DOM element\n   * @see {@link EventsTicker} For the ticker system that tracks pointer movement\n   */\n  setTargetElement(element) {\n    this._removeEvents();\n    this.domElement = element;\n    EventsTicker.domElement = element;\n    this._addEvents();\n  }\n  /** Register event listeners on {@link Renderer#domElement this.domElement}. */\n  _addEvents() {\n    if (this._eventsAdded || !this.domElement) {\n      return;\n    }\n    EventsTicker.addTickerListener();\n    const style = this.domElement.style;\n    if (style) {\n      if (globalThis.navigator.msPointerEnabled) {\n        style.msContentZooming = \"none\";\n        style.msTouchAction = \"none\";\n      } else if (this.supportsPointerEvents) {\n        style.touchAction = \"none\";\n      }\n    }\n    if (this.supportsPointerEvents) {\n      globalThis.document.addEventListener(\"pointermove\", this._onPointerMove, true);\n      this.domElement.addEventListener(\"pointerdown\", this._onPointerDown, true);\n      this.domElement.addEventListener(\"pointerleave\", this._onPointerOverOut, true);\n      this.domElement.addEventListener(\"pointerover\", this._onPointerOverOut, true);\n      globalThis.addEventListener(\"pointerup\", this._onPointerUp, true);\n    } else {\n      globalThis.document.addEventListener(\"mousemove\", this._onPointerMove, true);\n      this.domElement.addEventListener(\"mousedown\", this._onPointerDown, true);\n      this.domElement.addEventListener(\"mouseout\", this._onPointerOverOut, true);\n      this.domElement.addEventListener(\"mouseover\", this._onPointerOverOut, true);\n      globalThis.addEventListener(\"mouseup\", this._onPointerUp, true);\n      if (this.supportsTouchEvents) {\n        this.domElement.addEventListener(\"touchstart\", this._onPointerDown, true);\n        this.domElement.addEventListener(\"touchend\", this._onPointerUp, true);\n        this.domElement.addEventListener(\"touchmove\", this._onPointerMove, true);\n      }\n    }\n    this.domElement.addEventListener(\"wheel\", this.onWheel, {\n      passive: true,\n      capture: true\n    });\n    this._eventsAdded = true;\n  }\n  /** Unregister event listeners on {@link EventSystem#domElement this.domElement}. */\n  _removeEvents() {\n    if (!this._eventsAdded || !this.domElement) {\n      return;\n    }\n    EventsTicker.removeTickerListener();\n    const style = this.domElement.style;\n    if (style) {\n      if (globalThis.navigator.msPointerEnabled) {\n        style.msContentZooming = \"\";\n        style.msTouchAction = \"\";\n      } else if (this.supportsPointerEvents) {\n        style.touchAction = \"\";\n      }\n    }\n    if (this.supportsPointerEvents) {\n      globalThis.document.removeEventListener(\"pointermove\", this._onPointerMove, true);\n      this.domElement.removeEventListener(\"pointerdown\", this._onPointerDown, true);\n      this.domElement.removeEventListener(\"pointerleave\", this._onPointerOverOut, true);\n      this.domElement.removeEventListener(\"pointerover\", this._onPointerOverOut, true);\n      globalThis.removeEventListener(\"pointerup\", this._onPointerUp, true);\n    } else {\n      globalThis.document.removeEventListener(\"mousemove\", this._onPointerMove, true);\n      this.domElement.removeEventListener(\"mousedown\", this._onPointerDown, true);\n      this.domElement.removeEventListener(\"mouseout\", this._onPointerOverOut, true);\n      this.domElement.removeEventListener(\"mouseover\", this._onPointerOverOut, true);\n      globalThis.removeEventListener(\"mouseup\", this._onPointerUp, true);\n      if (this.supportsTouchEvents) {\n        this.domElement.removeEventListener(\"touchstart\", this._onPointerDown, true);\n        this.domElement.removeEventListener(\"touchend\", this._onPointerUp, true);\n        this.domElement.removeEventListener(\"touchmove\", this._onPointerMove, true);\n      }\n    }\n    this.domElement.removeEventListener(\"wheel\", this.onWheel, true);\n    this.domElement = null;\n    this._eventsAdded = false;\n  }\n  /**\n   * Maps coordinates from DOM/screen space into PixiJS normalized coordinates.\n   * This takes into account the current scale, position, and resolution of the DOM element.\n   * @param point - The point to store the mapped coordinates in\n   * @param x - The x coordinate in DOM/client space\n   * @param y - The y coordinate in DOM/client space\n   * @example\n   * ```ts\n   * // Map mouse coordinates to PixiJS space\n   * const point = new Point();\n   * app.renderer.events.mapPositionToPoint(\n   *     point,\n   *     event.clientX,\n   *     event.clientY\n   * );\n   * console.log('Mapped position:', point.x, point.y);\n   *\n   * // Using with pointer events\n   * sprite.on('pointermove', (event) => {\n   *     // event.global already contains mapped coordinates\n   *     console.log('Global:', event.global.x, event.global.y);\n   *\n   *     // Map to local coordinates\n   *     const local = event.getLocalPosition(sprite);\n   *     console.log('Local:', local.x, local.y);\n   * });\n   * ```\n   * @remarks\n   * - Accounts for element scaling and positioning\n   * - Adjusts for device pixel ratio/resolution\n   */\n  mapPositionToPoint(point, x, y) {\n    const rect = this.domElement.isConnected ? this.domElement.getBoundingClientRect() : {\n      x: 0,\n      y: 0,\n      width: this.domElement.width,\n      height: this.domElement.height,\n      left: 0,\n      top: 0\n    };\n    const resolutionMultiplier = 1 / this.resolution;\n    point.x = (x - rect.left) * (this.domElement.width / rect.width) * resolutionMultiplier;\n    point.y = (y - rect.top) * (this.domElement.height / rect.height) * resolutionMultiplier;\n  }\n  /**\n   * Ensures that the original event object contains all data that a regular pointer event would have\n   * @param event - The original event data from a touch or mouse event\n   * @returns An array containing a single normalized pointer event, in the case of a pointer\n   *  or mouse event, or a multiple normalized pointer events if there are multiple changed touches\n   */\n  _normalizeToPointerData(event) {\n    const normalizedEvents = [];\n    if (this.supportsTouchEvents && event instanceof TouchEvent) {\n      for (let i = 0, li = event.changedTouches.length; i < li; i++) {\n        const touch = event.changedTouches[i];\n        if (typeof touch.button === \"undefined\")\n          touch.button = 0;\n        if (typeof touch.buttons === \"undefined\")\n          touch.buttons = 1;\n        if (typeof touch.isPrimary === \"undefined\") {\n          touch.isPrimary = event.touches.length === 1 && event.type === \"touchstart\";\n        }\n        if (typeof touch.width === \"undefined\")\n          touch.width = touch.radiusX || 1;\n        if (typeof touch.height === \"undefined\")\n          touch.height = touch.radiusY || 1;\n        if (typeof touch.tiltX === \"undefined\")\n          touch.tiltX = 0;\n        if (typeof touch.tiltY === \"undefined\")\n          touch.tiltY = 0;\n        if (typeof touch.pointerType === \"undefined\")\n          touch.pointerType = \"touch\";\n        if (typeof touch.pointerId === \"undefined\")\n          touch.pointerId = touch.identifier || 0;\n        if (typeof touch.pressure === \"undefined\")\n          touch.pressure = touch.force || 0.5;\n        if (typeof touch.twist === \"undefined\")\n          touch.twist = 0;\n        if (typeof touch.tangentialPressure === \"undefined\")\n          touch.tangentialPressure = 0;\n        if (typeof touch.layerX === \"undefined\")\n          touch.layerX = touch.offsetX = touch.clientX;\n        if (typeof touch.layerY === \"undefined\")\n          touch.layerY = touch.offsetY = touch.clientY;\n        touch.isNormalized = true;\n        touch.type = event.type;\n        normalizedEvents.push(touch);\n      }\n    } else if (!globalThis.MouseEvent || event instanceof MouseEvent && (!this.supportsPointerEvents || !(event instanceof globalThis.PointerEvent))) {\n      const tempEvent = event;\n      if (typeof tempEvent.isPrimary === \"undefined\")\n        tempEvent.isPrimary = true;\n      if (typeof tempEvent.width === \"undefined\")\n        tempEvent.width = 1;\n      if (typeof tempEvent.height === \"undefined\")\n        tempEvent.height = 1;\n      if (typeof tempEvent.tiltX === \"undefined\")\n        tempEvent.tiltX = 0;\n      if (typeof tempEvent.tiltY === \"undefined\")\n        tempEvent.tiltY = 0;\n      if (typeof tempEvent.pointerType === \"undefined\")\n        tempEvent.pointerType = \"mouse\";\n      if (typeof tempEvent.pointerId === \"undefined\")\n        tempEvent.pointerId = MOUSE_POINTER_ID;\n      if (typeof tempEvent.pressure === \"undefined\")\n        tempEvent.pressure = 0.5;\n      if (typeof tempEvent.twist === \"undefined\")\n        tempEvent.twist = 0;\n      if (typeof tempEvent.tangentialPressure === \"undefined\")\n        tempEvent.tangentialPressure = 0;\n      tempEvent.isNormalized = true;\n      normalizedEvents.push(tempEvent);\n    } else {\n      normalizedEvents.push(event);\n    }\n    return normalizedEvents;\n  }\n  /**\n   * Normalizes the native {@link https://w3c.github.io/uievents/#interface-wheelevent WheelEvent}.\n   *\n   * The returned {@link FederatedWheelEvent} is a shared instance. It will not persist across\n   * multiple native wheel events.\n   * @param nativeEvent - The native wheel event that occurred on the canvas.\n   * @returns A federated wheel event.\n   */\n  normalizeWheelEvent(nativeEvent) {\n    const event = this._rootWheelEvent;\n    this._transferMouseData(event, nativeEvent);\n    event.deltaX = nativeEvent.deltaX;\n    event.deltaY = nativeEvent.deltaY;\n    event.deltaZ = nativeEvent.deltaZ;\n    event.deltaMode = nativeEvent.deltaMode;\n    this.mapPositionToPoint(event.screen, nativeEvent.clientX, nativeEvent.clientY);\n    event.global.copyFrom(event.screen);\n    event.offset.copyFrom(event.screen);\n    event.nativeEvent = nativeEvent;\n    event.type = nativeEvent.type;\n    return event;\n  }\n  /**\n   * Normalizes the `nativeEvent` into a federateed {@link FederatedPointerEvent}.\n   * @param event\n   * @param nativeEvent\n   */\n  _bootstrapEvent(event, nativeEvent) {\n    event.originalEvent = null;\n    event.nativeEvent = nativeEvent;\n    event.pointerId = nativeEvent.pointerId;\n    event.width = nativeEvent.width;\n    event.height = nativeEvent.height;\n    event.isPrimary = nativeEvent.isPrimary;\n    event.pointerType = nativeEvent.pointerType;\n    event.pressure = nativeEvent.pressure;\n    event.tangentialPressure = nativeEvent.tangentialPressure;\n    event.tiltX = nativeEvent.tiltX;\n    event.tiltY = nativeEvent.tiltY;\n    event.twist = nativeEvent.twist;\n    this._transferMouseData(event, nativeEvent);\n    this.mapPositionToPoint(event.screen, nativeEvent.clientX, nativeEvent.clientY);\n    event.global.copyFrom(event.screen);\n    event.offset.copyFrom(event.screen);\n    event.isTrusted = nativeEvent.isTrusted;\n    if (event.type === \"pointerleave\") {\n      event.type = \"pointerout\";\n    }\n    if (event.type.startsWith(\"mouse\")) {\n      event.type = event.type.replace(\"mouse\", \"pointer\");\n    }\n    if (event.type.startsWith(\"touch\")) {\n      event.type = TOUCH_TO_POINTER[event.type] || event.type;\n    }\n    return event;\n  }\n  /**\n   * Transfers base & mouse event data from the `nativeEvent` to the federated event.\n   * @param event\n   * @param nativeEvent\n   */\n  _transferMouseData(event, nativeEvent) {\n    event.isTrusted = nativeEvent.isTrusted;\n    event.srcElement = nativeEvent.srcElement;\n    event.timeStamp = performance.now();\n    event.type = nativeEvent.type;\n    event.altKey = nativeEvent.altKey;\n    event.button = nativeEvent.button;\n    event.buttons = nativeEvent.buttons;\n    event.client.x = nativeEvent.clientX;\n    event.client.y = nativeEvent.clientY;\n    event.ctrlKey = nativeEvent.ctrlKey;\n    event.metaKey = nativeEvent.metaKey;\n    event.movement.x = nativeEvent.movementX;\n    event.movement.y = nativeEvent.movementY;\n    event.page.x = nativeEvent.pageX;\n    event.page.y = nativeEvent.pageY;\n    event.relatedTarget = null;\n    event.shiftKey = nativeEvent.shiftKey;\n  }\n};\n/** @ignore */\n_EventSystem.extension = {\n  name: \"events\",\n  type: [\n    ExtensionType.WebGLSystem,\n    ExtensionType.CanvasSystem,\n    ExtensionType.WebGPUSystem\n  ],\n  priority: -1\n};\n/**\n * The event features that are enabled by the EventSystem\n * @since 7.2.0\n * @example\n * ```ts\n * import { EventSystem, EventSystemFeatures } from 'pixi.js';\n * // Access the default event features\n * EventSystem.defaultEventFeatures = {\n *     // Enable pointer movement events\n *     move: true,\n *     // Enable global pointer move events\n *     globalMove: true,\n *     // Enable click events\n *     click: true,\n *     // Enable wheel events\n *     wheel: true,\n * };\n * ```\n */\n_EventSystem.defaultEventFeatures = {\n  /** Enables pointer events associated with pointer movement. */\n  move: true,\n  /** Enables global pointer move events. */\n  globalMove: true,\n  /** Enables pointer events associated with clicking. */\n  click: true,\n  /** Enables wheel events. */\n  wheel: true\n};\nlet EventSystem = _EventSystem;\n\nexport { EventSystem };\n//# sourceMappingURL=EventSystem.mjs.map\n","import { EventSystem } from './EventSystem.mjs';\nimport { FederatedEvent } from './FederatedEvent.mjs';\n\n\"use strict\";\nconst FederatedContainer = {\n  onclick: null,\n  onmousedown: null,\n  onmouseenter: null,\n  onmouseleave: null,\n  onmousemove: null,\n  onglobalmousemove: null,\n  onmouseout: null,\n  onmouseover: null,\n  onmouseup: null,\n  onmouseupoutside: null,\n  onpointercancel: null,\n  onpointerdown: null,\n  onpointerenter: null,\n  onpointerleave: null,\n  onpointermove: null,\n  onglobalpointermove: null,\n  onpointerout: null,\n  onpointerover: null,\n  onpointertap: null,\n  onpointerup: null,\n  onpointerupoutside: null,\n  onrightclick: null,\n  onrightdown: null,\n  onrightup: null,\n  onrightupoutside: null,\n  ontap: null,\n  ontouchcancel: null,\n  ontouchend: null,\n  ontouchendoutside: null,\n  ontouchmove: null,\n  onglobaltouchmove: null,\n  ontouchstart: null,\n  onwheel: null,\n  get interactive() {\n    return this.eventMode === \"dynamic\" || this.eventMode === \"static\";\n  },\n  set interactive(value) {\n    this.eventMode = value ? \"static\" : \"passive\";\n  },\n  _internalEventMode: void 0,\n  get eventMode() {\n    return this._internalEventMode ?? EventSystem.defaultEventMode;\n  },\n  set eventMode(value) {\n    this._internalEventMode = value;\n  },\n  isInteractive() {\n    return this.eventMode === \"static\" || this.eventMode === \"dynamic\";\n  },\n  interactiveChildren: true,\n  hitArea: null,\n  addEventListener(type, listener, options) {\n    const capture = typeof options === \"boolean\" && options || typeof options === \"object\" && options.capture;\n    const signal = typeof options === \"object\" ? options.signal : void 0;\n    const once = typeof options === \"object\" ? options.once === true : false;\n    const context = typeof listener === \"function\" ? void 0 : listener;\n    type = capture ? `${type}capture` : type;\n    const listenerFn = typeof listener === \"function\" ? listener : listener.handleEvent;\n    const emitter = this;\n    if (signal) {\n      signal.addEventListener(\"abort\", () => {\n        emitter.off(type, listenerFn, context);\n      });\n    }\n    if (once) {\n      emitter.once(type, listenerFn, context);\n    } else {\n      emitter.on(type, listenerFn, context);\n    }\n  },\n  removeEventListener(type, listener, options) {\n    const capture = typeof options === \"boolean\" && options || typeof options === \"object\" && options.capture;\n    const context = typeof listener === \"function\" ? void 0 : listener;\n    type = capture ? `${type}capture` : type;\n    listener = typeof listener === \"function\" ? listener : listener.handleEvent;\n    this.off(type, listener, context);\n  },\n  dispatchEvent(e) {\n    if (!(e instanceof FederatedEvent)) {\n      throw new Error(\"Container cannot propagate events outside of the Federated Events API\");\n    }\n    e.defaultPrevented = false;\n    e.path = null;\n    e.target = this;\n    e.manager.dispatchEvent(e);\n    return !e.defaultPrevented;\n  }\n};\n\nexport { FederatedContainer };\n//# sourceMappingURL=FederatedEventTarget.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { Container } from '../scene/container/Container.mjs';\nimport { EventSystem } from './EventSystem.mjs';\nimport { FederatedContainer } from './FederatedEventTarget.mjs';\n\n\"use strict\";\nextensions.add(EventSystem);\nextensions.mixin(Container, FederatedContainer);\n//# sourceMappingURL=init.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\nimport { CanvasObserver } from './CanvasObserver.mjs';\n\n\"use strict\";\nclass DOMPipe {\n  /**\n   * Constructor for the DOMPipe class.\n   * @param renderer - The renderer instance that this DOMPipe will be associated with.\n   */\n  constructor(renderer) {\n    /** Array to keep track of attached DOM elements */\n    this._attachedDomElements = [];\n    this._renderer = renderer;\n    this._renderer.runners.postrender.add(this);\n    this._renderer.runners.init.add(this);\n    this._domElement = document.createElement(\"div\");\n    this._domElement.style.position = \"absolute\";\n    this._domElement.style.top = \"0\";\n    this._domElement.style.left = \"0\";\n    this._domElement.style.pointerEvents = \"none\";\n    this._domElement.style.zIndex = \"1000\";\n  }\n  /** Initializes the DOMPipe, setting up the main DOM element and adding it to the document body. */\n  init() {\n    this._canvasObserver = new CanvasObserver({\n      domElement: this._domElement,\n      renderer: this._renderer\n    });\n  }\n  /**\n   * Adds a renderable DOM container to the list of attached elements.\n   * @param domContainer - The DOM container to be added.\n   * @param _instructionSet - The instruction set (unused).\n   */\n  addRenderable(domContainer, _instructionSet) {\n    if (!this._attachedDomElements.includes(domContainer)) {\n      this._attachedDomElements.push(domContainer);\n    }\n  }\n  /**\n   * Updates a renderable DOM container.\n   * @param _domContainer - The DOM container to be updated (unused).\n   */\n  updateRenderable(_domContainer) {\n  }\n  /**\n   * Validates a renderable DOM container.\n   * @param _domContainer - The DOM container to be validated (unused).\n   * @returns Always returns true as validation is not required.\n   */\n  validateRenderable(_domContainer) {\n    return true;\n  }\n  /** Handles the post-rendering process, ensuring DOM elements are correctly positioned and visible. */\n  postrender() {\n    const attachedDomElements = this._attachedDomElements;\n    if (attachedDomElements.length === 0) {\n      this._domElement.remove();\n      return;\n    }\n    this._canvasObserver.ensureAttached();\n    for (let i = 0; i < attachedDomElements.length; i++) {\n      const domContainer = attachedDomElements[i];\n      const element = domContainer.element;\n      if (!domContainer.parent || domContainer.globalDisplayStatus < 7) {\n        element?.remove();\n        attachedDomElements.splice(i, 1);\n        i--;\n      } else {\n        if (!this._domElement.contains(element)) {\n          element.style.position = \"absolute\";\n          element.style.pointerEvents = \"auto\";\n          this._domElement.appendChild(element);\n        }\n        const wt = domContainer.worldTransform;\n        const anchor = domContainer._anchor;\n        const ax = domContainer.width * anchor.x;\n        const ay = domContainer.height * anchor.y;\n        element.style.transformOrigin = `${ax}px ${ay}px`;\n        element.style.transform = `matrix(${wt.a}, ${wt.b}, ${wt.c}, ${wt.d}, ${wt.tx - ax}, ${wt.ty - ay})`;\n        element.style.opacity = domContainer.groupAlpha.toString();\n      }\n    }\n  }\n  /** Destroys the DOMPipe, removing all attached DOM elements and cleaning up resources. */\n  destroy() {\n    this._renderer.runners.postrender.remove(this);\n    for (let i = 0; i < this._attachedDomElements.length; i++) {\n      const domContainer = this._attachedDomElements[i];\n      domContainer.element?.remove();\n    }\n    this._attachedDomElements.length = 0;\n    this._domElement.remove();\n    this._canvasObserver.destroy();\n    this._renderer = null;\n  }\n}\n/**\n * Static property defining the extension type and name for the DOMPipe.\n * This is used to register the DOMPipe with different rendering pipelines.\n */\nDOMPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"dom\"\n};\n\nexport { DOMPipe };\n//# sourceMappingURL=DOMPipe.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { DOMPipe } from './DOMPipe.mjs';\nimport './index.mjs';\nexport { CanvasObserver } from './CanvasObserver.mjs';\nexport { DOMContainer } from './DOMContainer.mjs';\n\n\"use strict\";\nextensions.add(DOMPipe);\n\nexport { DOMPipe };\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nclass BatchableSprite {\n  constructor() {\n    this.batcherName = \"default\";\n    this.topology = \"triangle-list\";\n    // batch specific..\n    this.attributeSize = 4;\n    this.indexSize = 6;\n    this.packAsQuad = true;\n    this.roundPixels = 0;\n    this._attributeStart = 0;\n    // location in the buffer\n    this._batcher = null;\n    this._batch = null;\n  }\n  get blendMode() {\n    return this.renderable.groupBlendMode;\n  }\n  get color() {\n    return this.renderable.groupColorAlpha;\n  }\n  reset() {\n    this.renderable = null;\n    this.texture = null;\n    this._batcher = null;\n    this._batch = null;\n    this.bounds = null;\n  }\n  destroy() {\n  }\n}\n\nexport { BatchableSprite };\n//# sourceMappingURL=BatchableSprite.mjs.map\n","import EventEmitter from 'eventemitter3';\nimport { uid } from '../../../../utils/data/uid.mjs';\nimport { GlProgram } from '../../gl/shader/GlProgram.mjs';\nimport { BindGroup } from '../../gpu/shader/BindGroup.mjs';\nimport { GpuProgram } from '../../gpu/shader/GpuProgram.mjs';\nimport { RendererType } from '../../types.mjs';\nimport { UniformGroup } from './UniformGroup.mjs';\n\n\"use strict\";\nclass Shader extends EventEmitter {\n  constructor(options) {\n    super();\n    /** A unique identifier for the shader */\n    this.uid = uid(\"shader\");\n    /**\n     * A record of the uniform groups and resources used by the shader.\n     * This is used by WebGL renderer to sync uniform data.\n     * @internal\n     */\n    this._uniformBindMap = /* @__PURE__ */ Object.create(null);\n    this._ownedBindGroups = [];\n    /** @internal */\n    this._destroyed = false;\n    let {\n      gpuProgram,\n      glProgram,\n      groups,\n      resources,\n      compatibleRenderers,\n      groupMap\n    } = options;\n    this.gpuProgram = gpuProgram;\n    this.glProgram = glProgram;\n    if (compatibleRenderers === void 0) {\n      compatibleRenderers = 0;\n      if (gpuProgram)\n        compatibleRenderers |= RendererType.WEBGPU;\n      if (glProgram)\n        compatibleRenderers |= RendererType.WEBGL;\n    }\n    this.compatibleRenderers = compatibleRenderers;\n    const nameHash = {};\n    if (!resources && !groups) {\n      resources = {};\n    }\n    if (resources && groups) {\n      throw new Error(\"[Shader] Cannot have both resources and groups\");\n    } else if (!gpuProgram && groups && !groupMap) {\n      throw new Error(\"[Shader] No group map or WebGPU shader provided - consider using resources instead.\");\n    } else if (!gpuProgram && groups && groupMap) {\n      for (const i in groupMap) {\n        for (const j in groupMap[i]) {\n          const uniformName = groupMap[i][j];\n          nameHash[uniformName] = {\n            group: i,\n            binding: j,\n            name: uniformName\n          };\n        }\n      }\n    } else if (gpuProgram && groups && !groupMap) {\n      const groupData = gpuProgram.structsAndGroups.groups;\n      groupMap = {};\n      groupData.forEach((data) => {\n        groupMap[data.group] = groupMap[data.group] || {};\n        groupMap[data.group][data.binding] = data.name;\n        nameHash[data.name] = data;\n      });\n    } else if (resources) {\n      groups = {};\n      groupMap = {};\n      if (gpuProgram) {\n        const groupData = gpuProgram.structsAndGroups.groups;\n        groupData.forEach((data) => {\n          groupMap[data.group] = groupMap[data.group] || {};\n          groupMap[data.group][data.binding] = data.name;\n          nameHash[data.name] = data;\n        });\n      }\n      let bindTick = 0;\n      for (const i in resources) {\n        if (nameHash[i])\n          continue;\n        if (!groups[99]) {\n          groups[99] = new BindGroup();\n          this._ownedBindGroups.push(groups[99]);\n        }\n        nameHash[i] = { group: 99, binding: bindTick, name: i };\n        groupMap[99] = groupMap[99] || {};\n        groupMap[99][bindTick] = i;\n        bindTick++;\n      }\n      for (const i in resources) {\n        const name = i;\n        let value = resources[i];\n        if (!value.source && !value._resourceType) {\n          value = new UniformGroup(value);\n        }\n        const data = nameHash[name];\n        if (data) {\n          if (!groups[data.group]) {\n            groups[data.group] = new BindGroup();\n            this._ownedBindGroups.push(groups[data.group]);\n          }\n          groups[data.group].setResource(value, data.binding);\n        }\n      }\n    }\n    this.groups = groups;\n    this._uniformBindMap = groupMap;\n    this.resources = this._buildResourceAccessor(groups, nameHash);\n  }\n  /**\n   * Sometimes a resource group will be provided later (for example global uniforms)\n   * In such cases, this method can be used to let the shader know about the group.\n   * @param name - the name of the resource group\n   * @param groupIndex - the index of the group (should match the webGPU shader group location)\n   * @param bindIndex - the index of the bind point (should match the webGPU shader bind point)\n   */\n  addResource(name, groupIndex, bindIndex) {\n    var _a, _b;\n    (_a = this._uniformBindMap)[groupIndex] || (_a[groupIndex] = {});\n    (_b = this._uniformBindMap[groupIndex])[bindIndex] || (_b[bindIndex] = name);\n    if (!this.groups[groupIndex]) {\n      this.groups[groupIndex] = new BindGroup();\n      this._ownedBindGroups.push(this.groups[groupIndex]);\n    }\n  }\n  _buildResourceAccessor(groups, nameHash) {\n    const uniformsOut = {};\n    for (const i in nameHash) {\n      const data = nameHash[i];\n      Object.defineProperty(uniformsOut, data.name, {\n        get() {\n          return groups[data.group].getResource(data.binding);\n        },\n        set(value) {\n          groups[data.group].setResource(value, data.binding);\n        }\n      });\n    }\n    return uniformsOut;\n  }\n  /**\n   * Use to destroy the shader when its not longer needed.\n   * It will destroy the resources and remove listeners.\n   * @param destroyPrograms - if the programs should be destroyed as well.\n   * Make sure its not being used by other shaders!\n   */\n  destroy(destroyPrograms = false) {\n    if (this._destroyed)\n      return;\n    this._destroyed = true;\n    this.emit(\"destroy\", this);\n    if (destroyPrograms) {\n      this.gpuProgram?.destroy();\n      this.glProgram?.destroy();\n    }\n    this.gpuProgram = null;\n    this.glProgram = null;\n    this.removeAllListeners();\n    this._uniformBindMap = null;\n    this._ownedBindGroups.forEach((bindGroup) => {\n      bindGroup.destroy();\n    });\n    this._ownedBindGroups = null;\n    this.resources = null;\n    this.groups = null;\n  }\n  static from(options) {\n    const { gpu, gl, ...rest } = options;\n    let gpuProgram;\n    let glProgram;\n    if (gpu) {\n      gpuProgram = GpuProgram.from(gpu);\n    }\n    if (gl) {\n      glProgram = GlProgram.from(gl);\n    }\n    return new Shader({\n      gpuProgram,\n      glProgram,\n      ...rest\n    });\n  }\n}\n\nexport { Shader };\n//# sourceMappingURL=Shader.mjs.map\n","import { Bounds } from '../../../scene/container/bounds/Bounds.mjs';\nimport { getGlobalBounds } from '../../../scene/container/bounds/getGlobalBounds.mjs';\n\n\"use strict\";\nconst tempBounds = new Bounds();\nfunction addMaskBounds(mask, bounds, skipUpdateTransform) {\n  const boundsToMask = tempBounds;\n  mask.measurable = true;\n  getGlobalBounds(mask, skipUpdateTransform, boundsToMask);\n  bounds.addBoundsMask(boundsToMask);\n  mask.measurable = false;\n}\n\nexport { addMaskBounds };\n//# sourceMappingURL=addMaskBounds.mjs.map\n","import { getLocalBounds } from '../../../scene/container/bounds/getLocalBounds.mjs';\nimport { boundsPool, matrixPool } from '../../../scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\n\n\"use strict\";\nfunction addMaskLocalBounds(mask, bounds, localRoot) {\n  const boundsToMask = boundsPool.get();\n  mask.measurable = true;\n  const tempMatrix = matrixPool.get().identity();\n  const relativeMask = getMatrixRelativeToParent(mask, localRoot, tempMatrix);\n  getLocalBounds(mask, boundsToMask, relativeMask);\n  mask.measurable = false;\n  bounds.addBoundsMask(boundsToMask);\n  matrixPool.return(tempMatrix);\n  boundsPool.return(boundsToMask);\n}\nfunction getMatrixRelativeToParent(target, root, matrix) {\n  if (!target) {\n    warn(\"Mask bounds, renderable is not inside the root container\");\n    return matrix;\n  }\n  if (target !== root) {\n    getMatrixRelativeToParent(target.parent, root, matrix);\n    target.updateLocalTransform();\n    matrix.append(target.localTransform);\n  }\n  return matrix;\n}\n\nexport { addMaskLocalBounds };\n//# sourceMappingURL=addMaskLocalBounds.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Sprite } from '../../../scene/sprite/Sprite.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass AlphaMask {\n  constructor(options) {\n    this.priority = 0;\n    this.inverse = false;\n    this.pipe = \"alphaMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.renderMaskToTexture = !(mask instanceof Sprite);\n    this.mask.renderable = this.renderMaskToTexture;\n    this.mask.includeInBuild = !this.renderMaskToTexture;\n    this.mask.measurable = false;\n  }\n  reset() {\n    if (this.mask === null)\n      return;\n    this.mask.measurable = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    if (!this.inverse) {\n      addMaskBounds(this.mask, bounds, skipUpdateTransform);\n    }\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Sprite;\n  }\n}\nAlphaMask.extension = ExtensionType.MaskEffect;\n\nexport { AlphaMask };\n//# sourceMappingURL=AlphaMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nclass ColorMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"colorMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n  }\n  destroy() {\n  }\n  static test(mask) {\n    return typeof mask === \"number\";\n  }\n}\nColorMask.extension = ExtensionType.MaskEffect;\n\nexport { ColorMask };\n//# sourceMappingURL=ColorMask.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Container } from '../../../scene/container/Container.mjs';\nimport { addMaskBounds } from '../utils/addMaskBounds.mjs';\nimport { addMaskLocalBounds } from '../utils/addMaskLocalBounds.mjs';\n\n\"use strict\";\nclass StencilMask {\n  constructor(options) {\n    this.priority = 0;\n    this.pipe = \"stencilMask\";\n    if (options?.mask) {\n      this.init(options.mask);\n    }\n  }\n  init(mask) {\n    this.mask = mask;\n    this.mask.includeInBuild = false;\n    this.mask.measurable = false;\n  }\n  reset() {\n    if (this.mask === null)\n      return;\n    this.mask.measurable = true;\n    this.mask.includeInBuild = true;\n    this.mask = null;\n  }\n  addBounds(bounds, skipUpdateTransform) {\n    addMaskBounds(this.mask, bounds, skipUpdateTransform);\n  }\n  addLocalBounds(bounds, localRoot) {\n    addMaskLocalBounds(this.mask, bounds, localRoot);\n  }\n  containsPoint(point, hitTestFn) {\n    const mask = this.mask;\n    return hitTestFn(mask, point);\n  }\n  destroy() {\n    this.reset();\n  }\n  static test(mask) {\n    return mask instanceof Container;\n  }\n}\nStencilMask.extension = ExtensionType.MaskEffect;\n\nexport { StencilMask };\n//# sourceMappingURL=StencilMask.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { AlphaMask } from './mask/alpha/AlphaMask.mjs';\nimport { ColorMask } from './mask/color/ColorMask.mjs';\nimport { StencilMask } from './mask/stencil/StencilMask.mjs';\nimport { BufferImageSource } from './renderers/shared/texture/sources/BufferImageSource.mjs';\nimport { CanvasSource } from './renderers/shared/texture/sources/CanvasSource.mjs';\nimport { ImageSource } from './renderers/shared/texture/sources/ImageSource.mjs';\nimport { VideoSource } from './renderers/shared/texture/sources/VideoSource.mjs';\nimport './renderers/shared/texture/utils/textureFrom.mjs';\nimport './mask/MaskEffectManager.mjs';\n\n\"use strict\";\nextensions.add(AlphaMask, ColorMask, StencilMask, VideoSource, ImageSource, CanvasSource, BufferImageSource);\n//# sourceMappingURL=init.mjs.map\n","\"use strict\";\nvar ExtensionType = /* @__PURE__ */ ((ExtensionType2) => {\n  ExtensionType2[\"Application\"] = \"application\";\n  ExtensionType2[\"WebGLPipes\"] = \"webgl-pipes\";\n  ExtensionType2[\"WebGLPipesAdaptor\"] = \"webgl-pipes-adaptor\";\n  ExtensionType2[\"WebGLSystem\"] = \"webgl-system\";\n  ExtensionType2[\"WebGPUPipes\"] = \"webgpu-pipes\";\n  ExtensionType2[\"WebGPUPipesAdaptor\"] = \"webgpu-pipes-adaptor\";\n  ExtensionType2[\"WebGPUSystem\"] = \"webgpu-system\";\n  ExtensionType2[\"CanvasSystem\"] = \"canvas-system\";\n  ExtensionType2[\"CanvasPipesAdaptor\"] = \"canvas-pipes-adaptor\";\n  ExtensionType2[\"CanvasPipes\"] = \"canvas-pipes\";\n  ExtensionType2[\"Asset\"] = \"asset\";\n  ExtensionType2[\"LoadParser\"] = \"load-parser\";\n  ExtensionType2[\"ResolveParser\"] = \"resolve-parser\";\n  ExtensionType2[\"CacheParser\"] = \"cache-parser\";\n  ExtensionType2[\"DetectionParser\"] = \"detection-parser\";\n  ExtensionType2[\"MaskEffect\"] = \"mask-effect\";\n  ExtensionType2[\"BlendMode\"] = \"blend-mode\";\n  ExtensionType2[\"TextureSource\"] = \"texture-source\";\n  ExtensionType2[\"Environment\"] = \"environment\";\n  ExtensionType2[\"ShapeBuilder\"] = \"shape-builder\";\n  ExtensionType2[\"Batcher\"] = \"batcher\";\n  return ExtensionType2;\n})(ExtensionType || {});\nconst normalizeExtension = (ext) => {\n  if (typeof ext === \"function\" || typeof ext === \"object\" && ext.extension) {\n    if (!ext.extension) {\n      throw new Error(\"Extension class must have an extension object\");\n    }\n    const metadata = typeof ext.extension !== \"object\" ? { type: ext.extension } : ext.extension;\n    ext = { ...metadata, ref: ext };\n  }\n  if (typeof ext === \"object\") {\n    ext = { ...ext };\n  } else {\n    throw new Error(\"Invalid extension type\");\n  }\n  if (typeof ext.type === \"string\") {\n    ext.type = [ext.type];\n  }\n  return ext;\n};\nconst normalizeExtensionPriority = (ext, defaultPriority) => normalizeExtension(ext).priority ?? defaultPriority;\nconst extensions = {\n  /** @ignore */\n  _addHandlers: {},\n  /** @ignore */\n  _removeHandlers: {},\n  /** @ignore */\n  _queue: {},\n  /**\n   * Remove extensions from PixiJS.\n   * @param extensions - Extensions to be removed. Can be:\n   * - Extension class with static `extension` property\n   * - Extension format object with `type` and `ref`\n   * - Multiple extensions as separate arguments\n   * @returns {extensions} this for chaining\n   * @example\n   * ```ts\n   * // Remove a single extension\n   * extensions.remove(MyRendererPlugin);\n   *\n   * // Remove multiple extensions\n   * extensions.remove(\n   *     MyRendererPlugin,\n   *     MySystemPlugin\n   * );\n   * ```\n   * @see {@link ExtensionType} For available extension types\n   * @see {@link ExtensionFormat} For extension format details\n   */\n  remove(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => this._removeHandlers[type]?.(ext));\n    });\n    return this;\n  },\n  /**\n   * Register new extensions with PixiJS. Extensions can be registered in multiple formats:\n   * - As a class with a static `extension` property\n   * - As an extension format object\n   * - As multiple extensions passed as separate arguments\n   * @param extensions - Extensions to add to PixiJS. Each can be:\n   * - A class with static `extension` property\n   * - An extension format object with `type` and `ref`\n   * - Multiple extensions as separate arguments\n   * @returns This extensions instance for chaining\n   * @example\n   * ```ts\n   * // Register a simple extension\n   * extensions.add(MyRendererPlugin);\n   *\n   * // Register multiple extensions\n   * extensions.add(\n   *     MyRendererPlugin,\n   *     MySystemPlugin,\n   * });\n   * ```\n   * @see {@link ExtensionType} For available extension types\n   * @see {@link ExtensionFormat} For extension format details\n   * @see {@link extensions.remove} For removing registered extensions\n   */\n  add(...extensions2) {\n    extensions2.map(normalizeExtension).forEach((ext) => {\n      ext.type.forEach((type) => {\n        const handlers = this._addHandlers;\n        const queue = this._queue;\n        if (!handlers[type]) {\n          queue[type] = queue[type] || [];\n          queue[type]?.push(ext);\n        } else {\n          handlers[type]?.(ext);\n        }\n      });\n    });\n    return this;\n  },\n  /**\n   * Internal method to handle extensions by name.\n   * @param type - The extension type.\n   * @param onAdd  - Function handler when extensions are added/registered {@link StrictExtensionFormat}.\n   * @param onRemove  - Function handler when extensions are removed/unregistered {@link StrictExtensionFormat}.\n   * @returns this for chaining.\n   * @internal\n   * @ignore\n   */\n  handle(type, onAdd, onRemove) {\n    const addHandlers = this._addHandlers;\n    const removeHandlers = this._removeHandlers;\n    if (addHandlers[type] || removeHandlers[type]) {\n      throw new Error(`Extension type ${type} already has a handler`);\n    }\n    addHandlers[type] = onAdd;\n    removeHandlers[type] = onRemove;\n    const queue = this._queue;\n    if (queue[type]) {\n      queue[type]?.forEach((ext) => onAdd(ext));\n      delete queue[type];\n    }\n    return this;\n  },\n  /**\n   * Handle a type, but using a map by `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The object map of named extensions.\n   * @returns this for chaining.\n   * @ignore\n   */\n  handleByMap(type, map) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (extension.name) {\n          map[extension.name] = extension.ref;\n        }\n      },\n      (extension) => {\n        if (extension.name) {\n          delete map[extension.name];\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions with a `name` property.\n   * @param type - Type of extension to handle.\n   * @param map - The array of named extensions.\n   * @param defaultPriority - Fallback priority if none is defined.\n   * @returns this for chaining.\n   * @ignore\n   */\n  handleByNamedList(type, map, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index >= 0)\n          return;\n        map.push({ name: extension.name, value: extension.ref });\n        map.sort((a, b) => normalizeExtensionPriority(b.value, defaultPriority) - normalizeExtensionPriority(a.value, defaultPriority));\n      },\n      (extension) => {\n        const index = map.findIndex((item) => item.name === extension.name);\n        if (index !== -1) {\n          map.splice(index, 1);\n        }\n      }\n    );\n  },\n  /**\n   * Handle a type, but using a list of extensions.\n   * @param type - Type of extension to handle.\n   * @param list - The list of extensions.\n   * @param defaultPriority - The default priority to use if none is specified.\n   * @returns this for chaining.\n   * @ignore\n   */\n  handleByList(type, list, defaultPriority = -1) {\n    return this.handle(\n      type,\n      (extension) => {\n        if (list.includes(extension.ref)) {\n          return;\n        }\n        list.push(extension.ref);\n        list.sort((a, b) => normalizeExtensionPriority(b, defaultPriority) - normalizeExtensionPriority(a, defaultPriority));\n      },\n      (extension) => {\n        const index = list.indexOf(extension.ref);\n        if (index !== -1) {\n          list.splice(index, 1);\n        }\n      }\n    );\n  },\n  /**\n   * Mixin the source object(s) properties into the target class's prototype.\n   * Copies all property descriptors from source objects to the target's prototype.\n   * @param Target - The target class to mix properties into\n   * @param sources - One or more source objects containing properties to mix in\n   * @example\n   * ```ts\n   * // Create a mixin with shared properties\n   * const moveable = {\n   *     x: 0,\n   *     y: 0,\n   *     move(x: number, y: number) {\n   *         this.x += x;\n   *         this.y += y;\n   *     }\n   * };\n   *\n   * // Create a mixin with computed properties\n   * const scalable = {\n   *     scale: 1,\n   *     get scaled() {\n   *         return this.scale > 1;\n   *     }\n   * };\n   *\n   * // Apply mixins to a class\n   * extensions.mixin(Sprite, moveable, scalable);\n   *\n   * // Use mixed-in properties\n   * const sprite = new Sprite();\n   * sprite.move(10, 20);\n   * console.log(sprite.x, sprite.y); // 10, 20\n   * ```\n   * @remarks\n   * - Copies all properties including getters/setters\n   * - Does not modify source objects\n   * - Preserves property descriptors\n   * @see {@link Object.defineProperties} For details on property descriptors\n   * @see {@link Object.getOwnPropertyDescriptors} For details on property copying\n   */\n  mixin(Target, ...sources) {\n    for (const source of sources) {\n      Object.defineProperties(Target.prototype, Object.getOwnPropertyDescriptors(source));\n    }\n  }\n};\n\nexport { ExtensionType, extensions, normalizeExtensionPriority };\n//# sourceMappingURL=Extensions.mjs.map\n","import { BLEND_TO_NPM } from './const.mjs';\n\n\"use strict\";\nfunction getAdjustedBlendModeBlend(blendMode, textureSource) {\n  if (textureSource.alphaMode === \"no-premultiply-alpha\") {\n    return BLEND_TO_NPM[blendMode] || blendMode;\n  }\n  return blendMode;\n}\n\nexport { getAdjustedBlendModeBlend };\n//# sourceMappingURL=getAdjustedBlendModeBlend.mjs.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.createControlChanges = void 0;\nvar ControlChange_1 = require(\"./ControlChange\");\n/**\n * Automatically creates an alias for named control values using Proxies\n * @hidden\n */\nfunction createControlChanges() {\n    return new Proxy({}, {\n        // tslint:disable-next-line: typedef\n        get: function (target, handler) {\n            if (target[handler]) {\n                return target[handler];\n            }\n            else if (ControlChange_1.controlChangeIds.hasOwnProperty(handler)) {\n                return target[ControlChange_1.controlChangeIds[handler]];\n            }\n        },\n        // tslint:disable-next-line: typedef\n        set: function (target, handler, value) {\n            if (ControlChange_1.controlChangeIds.hasOwnProperty(handler)) {\n                target[ControlChange_1.controlChangeIds[handler]] = value;\n            }\n            else {\n                target[handler] = value;\n            }\n            return true;\n        },\n    });\n}\nexports.createControlChanges = createControlChanges;\n//# sourceMappingURL=ControlChanges.js.map","\"use strict\";\nclass Pool {\n  /**\n   * Constructs a new Pool.\n   * @param ClassType - The constructor of the items in the pool.\n   * @param {number} [initialSize] - The initial size of the pool.\n   */\n  constructor(ClassType, initialSize) {\n    this._pool = [];\n    this._count = 0;\n    this._index = 0;\n    this._classType = ClassType;\n    if (initialSize) {\n      this.prepopulate(initialSize);\n    }\n  }\n  /**\n   * Prepopulates the pool with a given number of items.\n   * @param total - The number of items to add to the pool.\n   */\n  prepopulate(total) {\n    for (let i = 0; i < total; i++) {\n      this._pool[this._index++] = new this._classType();\n    }\n    this._count += total;\n  }\n  /**\n   * Gets an item from the pool. Calls the item's `init` method if it exists.\n   * If there are no items left in the pool, a new one will be created.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(data) {\n    let item;\n    if (this._index > 0) {\n      item = this._pool[--this._index];\n    } else {\n      item = new this._classType();\n      this._count++;\n    }\n    item.init?.(data);\n    return item;\n  }\n  /**\n   * Returns an item to the pool. Calls the item's `reset` method if it exists.\n   * @param {T} item - The item to return to the pool.\n   */\n  return(item) {\n    item.reset?.();\n    this._pool[this._index++] = item;\n  }\n  /**\n   * Gets the number of items in the pool.\n   * @readonly\n   */\n  get totalSize() {\n    return this._count;\n  }\n  /**\n   * Gets the number of items in the pool that are free to use without needing to create more.\n   * @readonly\n   */\n  get totalFree() {\n    return this._index;\n  }\n  /**\n   * Gets the number of items in the pool that are currently in use.\n   * @readonly\n   */\n  get totalUsed() {\n    return this._count - this._index;\n  }\n  /** clears the pool */\n  clear() {\n    if (this._pool.length > 0 && this._pool[0].destroy) {\n      for (let i = 0; i < this._index; i++) {\n        this._pool[i].destroy();\n      }\n    }\n    this._pool.length = 0;\n    this._count = 0;\n    this._index = 0;\n  }\n}\n\nexport { Pool };\n//# sourceMappingURL=Pool.mjs.map\n","import { GlobalResourceRegistry } from './GlobalResourceRegistry.mjs';\nimport { Pool } from './Pool.mjs';\n\n\"use strict\";\nclass PoolGroupClass {\n  constructor() {\n    /**\n     * A map to store the pools by their class type.\n     * @private\n     */\n    this._poolsByClass = /* @__PURE__ */ new Map();\n  }\n  /**\n   * Prepopulates a specific pool with a given number of items.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {number} total - The number of items to add to the pool.\n   */\n  prepopulate(Class, total) {\n    const classPool = this.getPool(Class);\n    classPool.prepopulate(total);\n  }\n  /**\n   * Gets an item from a specific pool.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} Class - The constructor of the items in the pool.\n   * @param {unknown} [data] - Optional data to pass to the item's constructor.\n   * @returns {T} The item from the pool.\n   */\n  get(Class, data) {\n    const pool = this.getPool(Class);\n    return pool.get(data);\n  }\n  /**\n   * Returns an item to its respective pool.\n   * @param {PoolItem} item - The item to return to the pool.\n   */\n  return(item) {\n    const pool = this.getPool(item.constructor);\n    pool.return(item);\n  }\n  /**\n   * Gets a specific pool based on the class type.\n   * @template T The type of items in the pool. Must extend PoolItem.\n   * @param {PoolItemConstructor<T>} ClassType - The constructor of the items in the pool.\n   * @returns {Pool<T>} The pool of the given class type.\n   */\n  getPool(ClassType) {\n    if (!this._poolsByClass.has(ClassType)) {\n      this._poolsByClass.set(ClassType, new Pool(ClassType));\n    }\n    return this._poolsByClass.get(ClassType);\n  }\n  /** gets the usage stats of each pool in the system */\n  stats() {\n    const stats = {};\n    this._poolsByClass.forEach((pool) => {\n      const name = stats[pool._classType.name] ? pool._classType.name + pool._classType.ID : pool._classType.name;\n      stats[name] = {\n        free: pool.totalFree,\n        used: pool.totalUsed,\n        size: pool.totalSize\n      };\n    });\n    return stats;\n  }\n  /** Clears all pools in the group. This will reset all pools and free their resources. */\n  clear() {\n    this._poolsByClass.forEach((pool) => pool.clear());\n    this._poolsByClass.clear();\n  }\n}\nconst BigPool = new PoolGroupClass();\nGlobalResourceRegistry.register(BigPool);\n\nexport { BigPool, PoolGroupClass };\n//# sourceMappingURL=PoolGroup.mjs.map\n","\"use strict\";\nconst tilingBit = {\n  name: \"tiling-bit\",\n  vertex: {\n    header: (\n      /* wgsl */\n      `\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n            uv = (tilingUniforms.uTextureTransform * vec3(uv, 1.0)).xy;\n\n            position = (position - tilingUniforms.uSizeAnchor.zw) * tilingUniforms.uSizeAnchor.xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* wgsl */\n      `\n            struct TilingUniforms {\n                uMapCoord:mat3x3<f32>,\n                uClampFrame:vec4<f32>,\n                uClampOffset:vec2<f32>,\n                uTextureTransform:mat3x3<f32>,\n                uSizeAnchor:vec4<f32>\n            };\n\n            @group(2) @binding(0) var<uniform> tilingUniforms: TilingUniforms;\n            @group(2) @binding(1) var uTexture: texture_2d<f32>;\n            @group(2) @binding(2) var uSampler: sampler;\n        `\n    ),\n    main: (\n      /* wgsl */\n      `\n\n            var coord = vUV + ceil(tilingUniforms.uClampOffset - vUV);\n            coord = (tilingUniforms.uMapCoord * vec3(coord, 1.0)).xy;\n            var unclamped = coord;\n            coord = clamp(coord, tilingUniforms.uClampFrame.xy, tilingUniforms.uClampFrame.zw);\n\n            var bias = 0.;\n\n            if(unclamped.x == coord.x && unclamped.y == coord.y)\n            {\n                bias = -32.;\n            }\n\n            outColor = textureSampleBias(uTexture, uSampler, coord, bias);\n        `\n    )\n  }\n};\nconst tilingBitGl = {\n  name: \"tiling-bit\",\n  vertex: {\n    header: (\n      /* glsl */\n      `\n            uniform mat3 uTextureTransform;\n            uniform vec4 uSizeAnchor;\n\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n            uv = (uTextureTransform * vec3(aUV, 1.0)).xy;\n\n            position = (position - uSizeAnchor.zw) * uSizeAnchor.xy;\n        `\n    )\n  },\n  fragment: {\n    header: (\n      /* glsl */\n      `\n            uniform sampler2D uTexture;\n            uniform mat3 uMapCoord;\n            uniform vec4 uClampFrame;\n            uniform vec2 uClampOffset;\n        `\n    ),\n    main: (\n      /* glsl */\n      `\n\n        vec2 coord = vUV + ceil(uClampOffset - vUV);\n        coord = (uMapCoord * vec3(coord, 1.0)).xy;\n        vec2 unclamped = coord;\n        coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n        outColor = texture(uTexture, coord, unclamped == coord ? 0.0 : -32.0);// lod-bias very negative to force lod 0\n\n        `\n    )\n  }\n};\n\nexport { tilingBit, tilingBitGl };\n//# sourceMappingURL=tilingBit.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { compileHighShaderGpuProgram, compileHighShaderGlProgram } from '../../../rendering/high-shader/compileHighShaderToProgram.mjs';\nimport { localUniformBit, localUniformBitGl } from '../../../rendering/high-shader/shader-bits/localUniformBit.mjs';\nimport { roundPixelsBit, roundPixelsBitGl } from '../../../rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nimport { Shader } from '../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { tilingBit, tilingBitGl } from './tilingBit.mjs';\n\n\"use strict\";\nlet gpuProgram;\nlet glProgram;\nclass TilingSpriteShader extends Shader {\n  constructor() {\n    gpuProgram ?? (gpuProgram = compileHighShaderGpuProgram({\n      name: \"tiling-sprite-shader\",\n      bits: [\n        localUniformBit,\n        tilingBit,\n        roundPixelsBit\n      ]\n    }));\n    glProgram ?? (glProgram = compileHighShaderGlProgram({\n      name: \"tiling-sprite-shader\",\n      bits: [\n        localUniformBitGl,\n        tilingBitGl,\n        roundPixelsBitGl\n      ]\n    }));\n    const tilingUniforms = new UniformGroup({\n      uMapCoord: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uClampFrame: { value: new Float32Array([0, 0, 1, 1]), type: \"vec4<f32>\" },\n      uClampOffset: { value: new Float32Array([0, 0]), type: \"vec2<f32>\" },\n      uTextureTransform: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uSizeAnchor: { value: new Float32Array([100, 100, 0.5, 0.5]), type: \"vec4<f32>\" }\n    });\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        localUniforms: new UniformGroup({\n          uTransformMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n          uColor: { value: new Float32Array([1, 1, 1, 1]), type: \"vec4<f32>\" },\n          uRound: { value: 0, type: \"f32\" }\n        }),\n        tilingUniforms,\n        uTexture: Texture.EMPTY.source,\n        uSampler: Texture.EMPTY.source.style\n      }\n    });\n  }\n  updateUniforms(width, height, matrix, anchorX, anchorY, texture) {\n    const tilingUniforms = this.resources.tilingUniforms;\n    const textureWidth = texture.width;\n    const textureHeight = texture.height;\n    const textureMatrix = texture.textureMatrix;\n    const uTextureTransform = tilingUniforms.uniforms.uTextureTransform;\n    uTextureTransform.set(\n      matrix.a * textureWidth / width,\n      matrix.b * textureWidth / height,\n      matrix.c * textureHeight / width,\n      matrix.d * textureHeight / height,\n      matrix.tx / width,\n      matrix.ty / height\n    );\n    uTextureTransform.invert();\n    tilingUniforms.uniforms.uMapCoord = textureMatrix.mapCoord;\n    tilingUniforms.uniforms.uClampFrame = textureMatrix.uClampFrame;\n    tilingUniforms.uniforms.uClampOffset = textureMatrix.uClampOffset;\n    tilingUniforms.uniforms.uTextureTransform = uTextureTransform;\n    tilingUniforms.uniforms.uSizeAnchor[0] = width;\n    tilingUniforms.uniforms.uSizeAnchor[1] = height;\n    tilingUniforms.uniforms.uSizeAnchor[2] = anchorX;\n    tilingUniforms.uniforms.uSizeAnchor[3] = anchorY;\n    if (texture) {\n      this.resources.uTexture = texture.source;\n      this.resources.uSampler = texture.source.style;\n    }\n  }\n}\n\nexport { TilingSpriteShader };\n//# sourceMappingURL=TilingSpriteShader.mjs.map\n","import { MeshGeometry } from '../../mesh/shared/MeshGeometry.mjs';\n\n\"use strict\";\nclass QuadGeometry extends MeshGeometry {\n  constructor() {\n    super({\n      positions: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n      uvs: new Float32Array([0, 0, 1, 0, 1, 1, 0, 1]),\n      indices: new Uint32Array([0, 1, 2, 0, 2, 3])\n    });\n  }\n}\n\nexport { QuadGeometry };\n//# sourceMappingURL=QuadGeometry.mjs.map\n","import { ExtensionType } from '../../extensions/Extensions.mjs';\nimport { getAdjustedBlendModeBlend } from '../../rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { State } from '../../rendering/renderers/shared/state/State.mjs';\nimport { RendererType } from '../../rendering/renderers/types.mjs';\nimport { color32BitToUniform } from '../graphics/gpu/colorToUniform.mjs';\nimport { BatchableMesh } from '../mesh/shared/BatchableMesh.mjs';\nimport { MeshGeometry } from '../mesh/shared/MeshGeometry.mjs';\nimport { TilingSpriteShader } from './shader/TilingSpriteShader.mjs';\nimport { QuadGeometry } from './utils/QuadGeometry.mjs';\nimport { setPositions } from './utils/setPositions.mjs';\nimport { setUvs } from './utils/setUvs.mjs';\n\n\"use strict\";\nconst sharedQuad = new QuadGeometry();\nclass TilingSpriteGpuData {\n  constructor() {\n    this.canBatch = true;\n    this.geometry = new MeshGeometry({\n      indices: sharedQuad.indices.slice(),\n      positions: sharedQuad.positions.slice(),\n      uvs: sharedQuad.uvs.slice()\n    });\n  }\n  destroy() {\n    this.geometry.destroy();\n    this.shader?.destroy();\n  }\n}\nclass TilingSpritePipe {\n  constructor(renderer) {\n    this._state = State.default2d;\n    this._renderer = renderer;\n  }\n  validateRenderable(renderable) {\n    const tilingSpriteData = this._getTilingSpriteData(renderable);\n    const couldBatch = tilingSpriteData.canBatch;\n    this._updateCanBatch(renderable);\n    const canBatch = tilingSpriteData.canBatch;\n    if (canBatch && canBatch === couldBatch) {\n      const { batchableMesh } = tilingSpriteData;\n      return !batchableMesh._batcher.checkAndUpdateTexture(\n        batchableMesh,\n        renderable.texture\n      );\n    }\n    return couldBatch !== canBatch;\n  }\n  addRenderable(tilingSprite, instructionSet) {\n    const batcher = this._renderer.renderPipes.batch;\n    this._updateCanBatch(tilingSprite);\n    const tilingSpriteData = this._getTilingSpriteData(tilingSprite);\n    const { geometry, canBatch } = tilingSpriteData;\n    if (canBatch) {\n      tilingSpriteData.batchableMesh || (tilingSpriteData.batchableMesh = new BatchableMesh());\n      const batchableMesh = tilingSpriteData.batchableMesh;\n      if (tilingSprite.didViewUpdate) {\n        this._updateBatchableMesh(tilingSprite);\n        batchableMesh.geometry = geometry;\n        batchableMesh.renderable = tilingSprite;\n        batchableMesh.transform = tilingSprite.groupTransform;\n        batchableMesh.setTexture(tilingSprite._texture);\n      }\n      batchableMesh.roundPixels = this._renderer._roundPixels | tilingSprite._roundPixels;\n      batcher.addToBatch(batchableMesh, instructionSet);\n    } else {\n      batcher.break(instructionSet);\n      tilingSpriteData.shader || (tilingSpriteData.shader = new TilingSpriteShader());\n      this.updateRenderable(tilingSprite);\n      instructionSet.add(tilingSprite);\n    }\n  }\n  execute(tilingSprite) {\n    const { shader } = this._getTilingSpriteData(tilingSprite);\n    shader.groups[0] = this._renderer.globalUniforms.bindGroup;\n    const localUniforms = shader.resources.localUniforms.uniforms;\n    localUniforms.uTransformMatrix = tilingSprite.groupTransform;\n    localUniforms.uRound = this._renderer._roundPixels | tilingSprite._roundPixels;\n    color32BitToUniform(\n      tilingSprite.groupColorAlpha,\n      localUniforms.uColor,\n      0\n    );\n    this._state.blendMode = getAdjustedBlendModeBlend(tilingSprite.groupBlendMode, tilingSprite.texture._source);\n    this._renderer.encoder.draw({\n      geometry: sharedQuad,\n      shader,\n      state: this._state\n    });\n  }\n  updateRenderable(tilingSprite) {\n    const tilingSpriteData = this._getTilingSpriteData(tilingSprite);\n    const { canBatch } = tilingSpriteData;\n    if (canBatch) {\n      const { batchableMesh } = tilingSpriteData;\n      if (tilingSprite.didViewUpdate)\n        this._updateBatchableMesh(tilingSprite);\n      batchableMesh._batcher.updateElement(batchableMesh);\n    } else if (tilingSprite.didViewUpdate) {\n      const { shader } = tilingSpriteData;\n      shader.updateUniforms(\n        tilingSprite.width,\n        tilingSprite.height,\n        tilingSprite._tileTransform.matrix,\n        tilingSprite.anchor.x,\n        tilingSprite.anchor.y,\n        tilingSprite.texture\n      );\n    }\n  }\n  _getTilingSpriteData(renderable) {\n    return renderable._gpuData[this._renderer.uid] || this._initTilingSpriteData(renderable);\n  }\n  _initTilingSpriteData(tilingSprite) {\n    const gpuData = new TilingSpriteGpuData();\n    gpuData.renderable = tilingSprite;\n    tilingSprite._gpuData[this._renderer.uid] = gpuData;\n    return gpuData;\n  }\n  _updateBatchableMesh(tilingSprite) {\n    const renderableData = this._getTilingSpriteData(tilingSprite);\n    const { geometry } = renderableData;\n    const style = tilingSprite.texture.source.style;\n    if (style.addressMode !== \"repeat\") {\n      style.addressMode = \"repeat\";\n      style.update();\n    }\n    setUvs(tilingSprite, geometry.uvs);\n    setPositions(tilingSprite, geometry.positions);\n  }\n  destroy() {\n    this._renderer = null;\n  }\n  _updateCanBatch(tilingSprite) {\n    const renderableData = this._getTilingSpriteData(tilingSprite);\n    const texture = tilingSprite.texture;\n    let _nonPowOf2wrapping = true;\n    if (this._renderer.type === RendererType.WEBGL) {\n      _nonPowOf2wrapping = this._renderer.context.supports.nonPowOf2wrapping;\n    }\n    renderableData.canBatch = texture.textureMatrix.isSimple && (_nonPowOf2wrapping || texture.source.isPowerOfTwo);\n    return renderableData.canBatch;\n  }\n}\n/** @ignore */\nTilingSpritePipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"tilingSprite\"\n};\n\nexport { TilingSpriteGpuData, TilingSpritePipe };\n//# sourceMappingURL=TilingSpritePipe.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { applyMatrix } from './applyMatrix.mjs';\n\n\"use strict\";\nfunction setUvs(tilingSprite, uvs) {\n  const texture = tilingSprite.texture;\n  const width = texture.frame.width;\n  const height = texture.frame.height;\n  let anchorX = 0;\n  let anchorY = 0;\n  if (tilingSprite.applyAnchorToTexture) {\n    anchorX = tilingSprite.anchor.x;\n    anchorY = tilingSprite.anchor.y;\n  }\n  uvs[0] = uvs[6] = -anchorX;\n  uvs[2] = uvs[4] = 1 - anchorX;\n  uvs[1] = uvs[3] = -anchorY;\n  uvs[5] = uvs[7] = 1 - anchorY;\n  const textureMatrix = Matrix.shared;\n  textureMatrix.copyFrom(tilingSprite._tileTransform.matrix);\n  textureMatrix.tx /= tilingSprite.width;\n  textureMatrix.ty /= tilingSprite.height;\n  textureMatrix.invert();\n  textureMatrix.scale(tilingSprite.width / width, tilingSprite.height / height);\n  applyMatrix(uvs, 2, 0, textureMatrix);\n}\n\nexport { setUvs };\n//# sourceMappingURL=setUvs.mjs.map\n","\"use strict\";\nfunction applyMatrix(array, stride, offset, matrix) {\n  let index = 0;\n  const size = array.length / (stride || 2);\n  const a = matrix.a;\n  const b = matrix.b;\n  const c = matrix.c;\n  const d = matrix.d;\n  const tx = matrix.tx;\n  const ty = matrix.ty;\n  offset *= stride;\n  while (index < size) {\n    const x = array[offset];\n    const y = array[offset + 1];\n    array[offset] = a * x + c * y + tx;\n    array[offset + 1] = b * x + d * y + ty;\n    offset += stride;\n    index++;\n  }\n}\n\nexport { applyMatrix };\n//# sourceMappingURL=applyMatrix.mjs.map\n","\"use strict\";\nfunction setPositions(tilingSprite, positions) {\n  const anchorX = tilingSprite.anchor.x;\n  const anchorY = tilingSprite.anchor.y;\n  positions[0] = -anchorX * tilingSprite.width;\n  positions[1] = -anchorY * tilingSprite.height;\n  positions[2] = (1 - anchorX) * tilingSprite.width;\n  positions[3] = -anchorY * tilingSprite.height;\n  positions[4] = (1 - anchorX) * tilingSprite.width;\n  positions[5] = (1 - anchorY) * tilingSprite.height;\n  positions[6] = -anchorX * tilingSprite.width;\n  positions[7] = (1 - anchorY) * tilingSprite.height;\n}\n\nexport { setPositions };\n//# sourceMappingURL=setPositions.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { TilingSpritePipe } from './TilingSpritePipe.mjs';\n\n\"use strict\";\nextensions.add(TilingSpritePipe);\n//# sourceMappingURL=init.mjs.map\n","import { GlobalResourceRegistry } from '../../../../../utils/pool/GlobalResourceRegistry.mjs';\nimport { CanvasSource } from '../sources/CanvasSource.mjs';\nimport { Texture } from '../Texture.mjs';\n\n\"use strict\";\nconst canvasCache = /* @__PURE__ */ new Map();\nGlobalResourceRegistry.register(canvasCache);\nfunction getCanvasTexture(canvas, options) {\n  if (!canvasCache.has(canvas)) {\n    const texture = new Texture({\n      source: new CanvasSource({\n        resource: canvas,\n        ...options\n      })\n    });\n    const onDestroy = () => {\n      if (canvasCache.get(canvas) === texture) {\n        canvasCache.delete(canvas);\n      }\n    };\n    texture.once(\"destroy\", onDestroy);\n    texture.source.once(\"destroy\", onDestroy);\n    canvasCache.set(canvas, texture);\n  }\n  return canvasCache.get(canvas);\n}\nfunction hasCachedCanvasTexture(canvas) {\n  return canvasCache.has(canvas);\n}\n\nexport { getCanvasTexture, hasCachedCanvasTexture };\n//# sourceMappingURL=getCanvasTexture.mjs.map\n","\"use strict\";\nclass BatchableMesh {\n  constructor() {\n    this.batcherName = \"default\";\n    this.packAsQuad = false;\n    this.indexOffset = 0;\n    this.attributeOffset = 0;\n    this.roundPixels = 0;\n    this._batcher = null;\n    this._batch = null;\n    this._textureMatrixUpdateId = -1;\n    this._uvUpdateId = -1;\n  }\n  get blendMode() {\n    return this.renderable.groupBlendMode;\n  }\n  get topology() {\n    return this._topology || this.geometry.topology;\n  }\n  set topology(value) {\n    this._topology = value;\n  }\n  reset() {\n    this.renderable = null;\n    this.texture = null;\n    this._batcher = null;\n    this._batch = null;\n    this.geometry = null;\n    this._uvUpdateId = -1;\n    this._textureMatrixUpdateId = -1;\n  }\n  /**\n   * Sets the texture for the batchable mesh.\n   * As it does so, it resets the texture matrix update ID.\n   * this is to ensure that the texture matrix is recalculated when the uvs are referenced\n   * @param value - The texture to set.\n   */\n  setTexture(value) {\n    if (this.texture === value)\n      return;\n    this.texture = value;\n    this._textureMatrixUpdateId = -1;\n  }\n  get uvs() {\n    const geometry = this.geometry;\n    const uvBuffer = geometry.getBuffer(\"aUV\");\n    const uvs = uvBuffer.data;\n    let transformedUvs = uvs;\n    const textureMatrix = this.texture.textureMatrix;\n    if (!textureMatrix.isSimple) {\n      transformedUvs = this._transformedUvs;\n      if (this._textureMatrixUpdateId !== textureMatrix._updateID || this._uvUpdateId !== uvBuffer._updateID) {\n        if (!transformedUvs || transformedUvs.length < uvs.length) {\n          transformedUvs = this._transformedUvs = new Float32Array(uvs.length);\n        }\n        this._textureMatrixUpdateId = textureMatrix._updateID;\n        this._uvUpdateId = uvBuffer._updateID;\n        textureMatrix.multiplyUvs(uvs, transformedUvs);\n      }\n    }\n    return transformedUvs;\n  }\n  get positions() {\n    return this.geometry.positions;\n  }\n  get indices() {\n    return this.geometry.indices;\n  }\n  get color() {\n    return this.renderable.groupColorAlpha;\n  }\n  get groupTransform() {\n    return this.renderable.groupTransform;\n  }\n  get attributeSize() {\n    return this.geometry.positions.length / 2;\n  }\n  get indexSize() {\n    return this.geometry.indices.length;\n  }\n}\n\nexport { BatchableMesh };\n//# sourceMappingURL=BatchableMesh.mjs.map\n","import EventEmitter from './index.js'\n\nexport { EventEmitter }\nexport default EventEmitter\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { State } from '../../../rendering/renderers/shared/state/State.mjs';\nimport { BigPool } from '../../../utils/pool/PoolGroup.mjs';\nimport { color32BitToUniform } from '../gpu/colorToUniform.mjs';\nimport { BatchableGraphics } from './BatchableGraphics.mjs';\n\n\"use strict\";\nclass GraphicsGpuData {\n  constructor() {\n    this.batches = [];\n    this.batched = false;\n  }\n  destroy() {\n    this.batches.forEach((batch) => {\n      BigPool.return(batch);\n    });\n    this.batches.length = 0;\n  }\n}\nclass GraphicsPipe {\n  constructor(renderer, adaptor) {\n    this.state = State.for2d();\n    this.renderer = renderer;\n    this._adaptor = adaptor;\n    this.renderer.runners.contextChange.add(this);\n  }\n  contextChange() {\n    this._adaptor.contextChange(this.renderer);\n  }\n  validateRenderable(graphics) {\n    const context = graphics.context;\n    const wasBatched = !!graphics._gpuData;\n    const gpuContext = this.renderer.graphicsContext.updateGpuContext(context);\n    if (gpuContext.isBatchable || wasBatched !== gpuContext.isBatchable) {\n      return true;\n    }\n    return false;\n  }\n  addRenderable(graphics, instructionSet) {\n    const gpuContext = this.renderer.graphicsContext.updateGpuContext(graphics.context);\n    if (graphics.didViewUpdate) {\n      this._rebuild(graphics);\n    }\n    if (gpuContext.isBatchable) {\n      this._addToBatcher(graphics, instructionSet);\n    } else {\n      this.renderer.renderPipes.batch.break(instructionSet);\n      instructionSet.add(graphics);\n    }\n  }\n  updateRenderable(graphics) {\n    const gpuData = this._getGpuDataForRenderable(graphics);\n    const batches = gpuData.batches;\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batch._batcher.updateElement(batch);\n    }\n  }\n  execute(graphics) {\n    if (!graphics.isRenderable)\n      return;\n    const renderer = this.renderer;\n    const context = graphics.context;\n    const contextSystem = renderer.graphicsContext;\n    if (!contextSystem.getGpuContext(context).batches.length) {\n      return;\n    }\n    const shader = context.customShader || this._adaptor.shader;\n    this.state.blendMode = graphics.groupBlendMode;\n    const localUniforms = shader.resources.localUniforms.uniforms;\n    localUniforms.uTransformMatrix = graphics.groupTransform;\n    localUniforms.uRound = renderer._roundPixels | graphics._roundPixels;\n    color32BitToUniform(\n      graphics.groupColorAlpha,\n      localUniforms.uColor,\n      0\n    );\n    this._adaptor.execute(this, graphics);\n  }\n  _rebuild(graphics) {\n    const gpuData = this._getGpuDataForRenderable(graphics);\n    const gpuContext = this.renderer.graphicsContext.updateGpuContext(graphics.context);\n    gpuData.destroy();\n    if (gpuContext.isBatchable) {\n      this._updateBatchesForRenderable(graphics, gpuData);\n    }\n  }\n  _addToBatcher(graphics, instructionSet) {\n    const batchPipe = this.renderer.renderPipes.batch;\n    const batches = this._getGpuDataForRenderable(graphics).batches;\n    for (let i = 0; i < batches.length; i++) {\n      const batch = batches[i];\n      batchPipe.addToBatch(batch, instructionSet);\n    }\n  }\n  _getGpuDataForRenderable(graphics) {\n    return graphics._gpuData[this.renderer.uid] || this._initGpuDataForRenderable(graphics);\n  }\n  _initGpuDataForRenderable(graphics) {\n    const gpuData = new GraphicsGpuData();\n    graphics._gpuData[this.renderer.uid] = gpuData;\n    return gpuData;\n  }\n  _updateBatchesForRenderable(graphics, gpuData) {\n    const context = graphics.context;\n    const gpuContext = this.renderer.graphicsContext.getGpuContext(context);\n    const roundPixels = this.renderer._roundPixels | graphics._roundPixels;\n    gpuData.batches = gpuContext.batches.map((batch) => {\n      const batchClone = BigPool.get(BatchableGraphics);\n      batch.copyTo(batchClone);\n      batchClone.renderable = graphics;\n      batchClone.roundPixels = roundPixels;\n      return batchClone;\n    });\n  }\n  destroy() {\n    this.renderer = null;\n    this._adaptor.destroy();\n    this._adaptor = null;\n    this.state = null;\n  }\n}\n/** @ignore */\nGraphicsPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes,\n    ExtensionType.WebGPUPipes,\n    ExtensionType.CanvasPipes\n  ],\n  name: \"graphics\"\n};\n\nexport { GraphicsGpuData, GraphicsPipe };\n//# sourceMappingURL=GraphicsPipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { GraphicsContextSystem } from './shared/GraphicsContextSystem.mjs';\nimport { GraphicsPipe } from './shared/GraphicsPipe.mjs';\n\n\"use strict\";\nextensions.add(GraphicsPipe);\nextensions.add(GraphicsContextSystem);\n//# sourceMappingURL=init.mjs.map\n","import { Rectangle } from '../maths/shapes/Rectangle.mjs';\nimport { TextureSource } from '../rendering/renderers/shared/texture/sources/TextureSource.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst _Spritesheet = class _Spritesheet {\n  constructor(optionsOrTexture, arg1) {\n    /** For multi-packed spritesheets, this contains a reference to all the other spritesheets it depends on. */\n    this.linkedSheets = [];\n    let options = optionsOrTexture;\n    if (optionsOrTexture?.source instanceof TextureSource) {\n      options = {\n        texture: optionsOrTexture,\n        data: arg1\n      };\n    }\n    const { texture, data, cachePrefix = \"\" } = options;\n    this.cachePrefix = cachePrefix;\n    this._texture = texture instanceof Texture ? texture : null;\n    this.textureSource = texture.source;\n    this.textures = {};\n    this.animations = {};\n    this.data = data;\n    const metaResolution = parseFloat(data.meta.scale);\n    if (metaResolution) {\n      this.resolution = metaResolution;\n      texture.source.resolution = this.resolution;\n    } else {\n      this.resolution = texture.source._resolution;\n    }\n    this._frames = this.data.frames;\n    this._frameKeys = Object.keys(this._frames);\n    this._batchIndex = 0;\n    this._callback = null;\n  }\n  /**\n   * Parser spritesheet from loaded data. This is done asynchronously\n   * to prevent creating too many Texture within a single process.\n   */\n  parse() {\n    return new Promise((resolve) => {\n      this._callback = resolve;\n      this._batchIndex = 0;\n      if (this._frameKeys.length <= _Spritesheet.BATCH_SIZE) {\n        this._processFrames(0);\n        this._processAnimations();\n        this._parseComplete();\n      } else {\n        this._nextBatch();\n      }\n    });\n  }\n  /**\n   * Process a batch of frames\n   * @param initialFrameIndex - The index of frame to start.\n   */\n  _processFrames(initialFrameIndex) {\n    let frameIndex = initialFrameIndex;\n    const maxFrames = _Spritesheet.BATCH_SIZE;\n    while (frameIndex - initialFrameIndex < maxFrames && frameIndex < this._frameKeys.length) {\n      const i = this._frameKeys[frameIndex];\n      const data = this._frames[i];\n      const rect = data.frame;\n      if (rect) {\n        let frame = null;\n        let trim = null;\n        const sourceSize = data.trimmed !== false && data.sourceSize ? data.sourceSize : data.frame;\n        const orig = new Rectangle(\n          0,\n          0,\n          Math.floor(sourceSize.w) / this.resolution,\n          Math.floor(sourceSize.h) / this.resolution\n        );\n        if (data.rotated) {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.h) / this.resolution,\n            Math.floor(rect.w) / this.resolution\n          );\n        } else {\n          frame = new Rectangle(\n            Math.floor(rect.x) / this.resolution,\n            Math.floor(rect.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        if (data.trimmed !== false && data.spriteSourceSize) {\n          trim = new Rectangle(\n            Math.floor(data.spriteSourceSize.x) / this.resolution,\n            Math.floor(data.spriteSourceSize.y) / this.resolution,\n            Math.floor(rect.w) / this.resolution,\n            Math.floor(rect.h) / this.resolution\n          );\n        }\n        this.textures[i] = new Texture({\n          source: this.textureSource,\n          frame,\n          orig,\n          trim,\n          rotate: data.rotated ? 2 : 0,\n          defaultAnchor: data.anchor,\n          defaultBorders: data.borders,\n          label: i.toString()\n        });\n      }\n      frameIndex++;\n    }\n  }\n  /** Parse animations config. */\n  _processAnimations() {\n    const animations = this.data.animations || {};\n    for (const animName in animations) {\n      this.animations[animName] = [];\n      for (let i = 0; i < animations[animName].length; i++) {\n        const frameName = animations[animName][i];\n        this.animations[animName].push(this.textures[frameName]);\n      }\n    }\n  }\n  /** The parse has completed. */\n  _parseComplete() {\n    const callback = this._callback;\n    this._callback = null;\n    this._batchIndex = 0;\n    callback.call(this, this.textures);\n  }\n  /** Begin the next batch of textures. */\n  _nextBatch() {\n    this._processFrames(this._batchIndex * _Spritesheet.BATCH_SIZE);\n    this._batchIndex++;\n    setTimeout(() => {\n      if (this._batchIndex * _Spritesheet.BATCH_SIZE < this._frameKeys.length) {\n        this._nextBatch();\n      } else {\n        this._processAnimations();\n        this._parseComplete();\n      }\n    }, 0);\n  }\n  /**\n   * Destroy Spritesheet and don't use after this.\n   * @param {boolean} [destroyBase=false] - Whether to destroy the base texture as well\n   */\n  destroy(destroyBase = false) {\n    for (const i in this.textures) {\n      this.textures[i].destroy();\n    }\n    this._frames = null;\n    this._frameKeys = null;\n    this.data = null;\n    this.textures = null;\n    if (destroyBase) {\n      this._texture?.destroy();\n      this.textureSource.destroy();\n    }\n    this._texture = null;\n    this.textureSource = null;\n    this.linkedSheets = [];\n  }\n};\n/**\n * The maximum number of Textures to build per process.\n * @advanced\n */\n_Spritesheet.BATCH_SIZE = 1e3;\nlet Spritesheet = _Spritesheet;\n\nexport { Spritesheet };\n//# sourceMappingURL=Spritesheet.mjs.map\n","import { LoaderParserPriority } from '../assets/loader/parsers/LoaderParser.mjs';\nimport { Resolver } from '../assets/resolver/Resolver.mjs';\nimport { copySearchParams } from '../assets/utils/copySearchParams.mjs';\nimport { ExtensionType } from '../extensions/Extensions.mjs';\nimport { Texture } from '../rendering/renderers/shared/texture/Texture.mjs';\nimport { path } from '../utils/path.mjs';\nimport { Spritesheet } from './Spritesheet.mjs';\n\n\"use strict\";\nconst validImages = [\n  \"jpg\",\n  \"png\",\n  \"jpeg\",\n  \"avif\",\n  \"webp\",\n  \"basis\",\n  \"etc2\",\n  \"bc7\",\n  \"bc6h\",\n  \"bc5\",\n  \"bc4\",\n  \"bc3\",\n  \"bc2\",\n  \"bc1\",\n  \"eac\",\n  \"astc\"\n];\nfunction getCacheableAssets(keys, asset, ignoreMultiPack) {\n  const out = {};\n  keys.forEach((key) => {\n    out[key] = asset;\n  });\n  Object.keys(asset.textures).forEach((key) => {\n    out[`${asset.cachePrefix}${key}`] = asset.textures[key];\n  });\n  if (!ignoreMultiPack) {\n    const basePath = path.dirname(keys[0]);\n    asset.linkedSheets.forEach((item, i) => {\n      const out2 = getCacheableAssets([`${basePath}/${asset.data.meta.related_multi_packs[i]}`], item, true);\n      Object.assign(out, out2);\n    });\n  }\n  return out;\n}\nconst spritesheetAsset = {\n  extension: ExtensionType.Asset,\n  /** Handle the caching of the related Spritesheet Textures */\n  cache: {\n    test: (asset) => asset instanceof Spritesheet,\n    getCacheableAssets: (keys, asset) => getCacheableAssets(keys, asset, false)\n  },\n  /** Resolve the resolution of the asset. */\n  resolver: {\n    extension: {\n      type: ExtensionType.ResolveParser,\n      name: \"resolveSpritesheet\"\n    },\n    test: (value) => {\n      const tempURL = value.split(\"?\")[0];\n      const split = tempURL.split(\".\");\n      const extension = split.pop();\n      const format = split.pop();\n      return extension === \"json\" && validImages.includes(format);\n    },\n    parse: (value) => {\n      const split = value.split(\".\");\n      return {\n        resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n        format: split[split.length - 2],\n        src: value\n      };\n    }\n  },\n  /**\n   * Loader plugin that parses sprite sheets!\n   * once the JSON has been loaded this checks to see if the JSON is spritesheet data.\n   * If it is, we load the spritesheets image and parse the data into Spritesheet\n   * All textures in the sprite sheet are then added to the cache\n   */\n  loader: {\n    /** used for deprecation purposes */\n    name: \"spritesheetLoader\",\n    id: \"spritesheet\",\n    extension: {\n      type: ExtensionType.LoadParser,\n      priority: LoaderParserPriority.Normal,\n      name: \"spritesheetLoader\"\n    },\n    async testParse(asset, options) {\n      return path.extname(options.src).toLowerCase() === \".json\" && !!asset.frames;\n    },\n    async parse(asset, options, loader) {\n      const {\n        texture: imageTexture,\n        // if user need to use preloaded texture\n        imageFilename,\n        // if user need to use custom filename (not from jsonFile.meta.image)\n        textureOptions,\n        // if user need to set texture options on texture\n        cachePrefix\n        // if user need to use custom cache prefix\n      } = options?.data ?? {};\n      let basePath = path.dirname(options.src);\n      if (basePath && basePath.lastIndexOf(\"/\") !== basePath.length - 1) {\n        basePath += \"/\";\n      }\n      let texture;\n      if (imageTexture instanceof Texture) {\n        texture = imageTexture;\n      } else {\n        const imagePath = copySearchParams(basePath + (imageFilename ?? asset.meta.image), options.src);\n        const assets = await loader.load([{ src: imagePath, data: textureOptions }]);\n        texture = assets[imagePath];\n      }\n      const spritesheet = new Spritesheet({\n        texture: texture.source,\n        data: asset,\n        cachePrefix\n      });\n      await spritesheet.parse();\n      const multiPacks = asset?.meta?.related_multi_packs;\n      if (Array.isArray(multiPacks)) {\n        const promises = [];\n        for (const item of multiPacks) {\n          if (typeof item !== \"string\") {\n            continue;\n          }\n          let itemUrl = basePath + item;\n          if (options.data?.ignoreMultiPack) {\n            continue;\n          }\n          itemUrl = copySearchParams(itemUrl, options.src);\n          promises.push(loader.load({\n            src: itemUrl,\n            data: {\n              textureOptions,\n              ignoreMultiPack: true\n            }\n          }));\n        }\n        const res = await Promise.all(promises);\n        spritesheet.linkedSheets = res;\n        res.forEach((item) => {\n          item.linkedSheets = [spritesheet].concat(spritesheet.linkedSheets.filter((sp) => sp !== item));\n        });\n      }\n      return spritesheet;\n    },\n    async unload(spritesheet, _resolvedAsset, loader) {\n      await loader.unload(spritesheet.textureSource._sourceOrigin);\n      spritesheet.destroy(false);\n    }\n  }\n};\n\nexport { spritesheetAsset };\n//# sourceMappingURL=spritesheetAsset.mjs.map\n","import { extensions } from '../extensions/Extensions.mjs';\nimport { spritesheetAsset } from './spritesheetAsset.mjs';\n\n\"use strict\";\nextensions.add(spritesheetAsset);\n//# sourceMappingURL=init.mjs.map\n","var _typeof = require(\"./typeof.js\")[\"default\"];\nfunction toPrimitive(t, r) {\n  if (\"object\" != _typeof(t) || !t) return t;\n  var e = t[Symbol.toPrimitive];\n  if (void 0 !== e) {\n    var i = e.call(t, r || \"default\");\n    if (\"object\" != _typeof(i)) return i;\n    throw new TypeError(\"@@toPrimitive must return a primitive value.\");\n  }\n  return (\"string\" === r ? String : Number)(t);\n}\nmodule.exports = toPrimitive, module.exports.__esModule = true, module.exports[\"default\"] = module.exports;","\"use strict\";\nclass FilterEffect {\n  constructor() {\n    /** the pipe that knows how to handle this effect */\n    this.pipe = \"filter\";\n    /** the priority of this effect */\n    this.priority = 1;\n  }\n  destroy() {\n    for (let i = 0; i < this.filters.length; i++) {\n      this.filters[i].destroy();\n    }\n    this.filters = null;\n    this.filterArea = null;\n  }\n}\n\nexport { FilterEffect };\n//# sourceMappingURL=FilterEffect.mjs.map\n","import { getTestContext } from './getTestContext.mjs';\n\n\"use strict\";\nlet maxFragmentPrecision;\nfunction getMaxFragmentPrecision() {\n  if (!maxFragmentPrecision) {\n    maxFragmentPrecision = \"mediump\";\n    const gl = getTestContext();\n    if (gl) {\n      if (gl.getShaderPrecisionFormat) {\n        const shaderFragment = gl.getShaderPrecisionFormat(gl.FRAGMENT_SHADER, gl.HIGH_FLOAT);\n        maxFragmentPrecision = shaderFragment.precision ? \"highp\" : \"mediump\";\n      }\n    }\n  }\n  return maxFragmentPrecision;\n}\n\nexport { getMaxFragmentPrecision };\n//# sourceMappingURL=getMaxFragmentPrecision.mjs.map\n","\"use strict\";\nconst fragmentNameCache = {};\nconst VertexNameCache = {};\nfunction setProgramName(src, { name = `pixi-program` }, isFragment = true) {\n  name = name.replace(/\\s+/g, \"-\");\n  name += isFragment ? \"-fragment\" : \"-vertex\";\n  const nameCache = isFragment ? fragmentNameCache : VertexNameCache;\n  if (nameCache[name]) {\n    nameCache[name]++;\n    name += `-${nameCache[name]}`;\n  } else {\n    nameCache[name] = 1;\n  }\n  if (src.indexOf(\"#define SHADER_NAME\") !== -1)\n    return src;\n  const shaderName = `#define SHADER_NAME ${name}`;\n  return `${shaderName}\n${src}`;\n}\n\nexport { setProgramName };\n//# sourceMappingURL=setProgramName.mjs.map\n","import { createIdFromString } from '../../shared/utils/createIdFromString.mjs';\nimport { getMaxFragmentPrecision } from './program/getMaxFragmentPrecision.mjs';\nimport { addProgramDefines } from './program/preprocessors/addProgramDefines.mjs';\nimport { ensurePrecision } from './program/preprocessors/ensurePrecision.mjs';\nimport { insertVersion } from './program/preprocessors/insertVersion.mjs';\nimport { setProgramName } from './program/preprocessors/setProgramName.mjs';\nimport { stripVersion } from './program/preprocessors/stripVersion.mjs';\n\n\"use strict\";\nconst processes = {\n  // strips any version headers..\n  stripVersion,\n  // adds precision string if not already present\n  ensurePrecision,\n  // add some defines if WebGL1 to make it more compatible with WebGL2 shaders\n  addProgramDefines,\n  // add the program name to the shader\n  setProgramName,\n  // add the version string to the shader header\n  insertVersion\n};\nconst programCache = /* @__PURE__ */ Object.create(null);\nconst _GlProgram = class _GlProgram {\n  /**\n   * Creates a shiny new GlProgram. Used by WebGL renderer.\n   * @param options - The options for the program.\n   */\n  constructor(options) {\n    options = { ..._GlProgram.defaultOptions, ...options };\n    const isES300 = options.fragment.indexOf(\"#version 300 es\") !== -1;\n    const preprocessorOptions = {\n      stripVersion: isES300,\n      ensurePrecision: {\n        requestedFragmentPrecision: options.preferredFragmentPrecision,\n        requestedVertexPrecision: options.preferredVertexPrecision,\n        maxSupportedVertexPrecision: \"highp\",\n        maxSupportedFragmentPrecision: getMaxFragmentPrecision()\n      },\n      setProgramName: {\n        name: options.name\n      },\n      addProgramDefines: isES300,\n      insertVersion: isES300\n    };\n    let fragment = options.fragment;\n    let vertex = options.vertex;\n    Object.keys(processes).forEach((processKey) => {\n      const processOptions = preprocessorOptions[processKey];\n      fragment = processes[processKey](fragment, processOptions, true);\n      vertex = processes[processKey](vertex, processOptions, false);\n    });\n    this.fragment = fragment;\n    this.vertex = vertex;\n    this.transformFeedbackVaryings = options.transformFeedbackVaryings;\n    this._key = createIdFromString(`${this.vertex}:${this.fragment}`, \"gl-program\");\n  }\n  /** destroys the program */\n  destroy() {\n    this.fragment = null;\n    this.vertex = null;\n    this._attributeData = null;\n    this._uniformData = null;\n    this._uniformBlockData = null;\n    this.transformFeedbackVaryings = null;\n    programCache[this._cacheKey] = null;\n  }\n  /**\n   * Helper function that creates a program for a given source.\n   * It will check the program cache if the program has already been created.\n   * If it has that one will be returned, if not a new one will be created and cached.\n   * @param options - The options for the program.\n   * @returns A program using the same source\n   */\n  static from(options) {\n    const key = `${options.vertex}:${options.fragment}`;\n    if (!programCache[key]) {\n      programCache[key] = new _GlProgram(options);\n      programCache[key]._cacheKey = key;\n    }\n    return programCache[key];\n  }\n};\n/** The default options used by the program. */\n_GlProgram.defaultOptions = {\n  preferredVertexPrecision: \"highp\",\n  preferredFragmentPrecision: \"mediump\"\n};\nlet GlProgram = _GlProgram;\n\nexport { GlProgram };\n//# sourceMappingURL=GlProgram.mjs.map\n","\"use strict\";\nfunction stripVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return src.replace(\"#version 300 es\", \"\");\n}\n\nexport { stripVersion };\n//# sourceMappingURL=stripVersion.mjs.map\n","\"use strict\";\nfunction ensurePrecision(src, options, isFragment) {\n  const maxSupportedPrecision = isFragment ? options.maxSupportedFragmentPrecision : options.maxSupportedVertexPrecision;\n  if (src.substring(0, 9) !== \"precision\") {\n    let precision = isFragment ? options.requestedFragmentPrecision : options.requestedVertexPrecision;\n    if (precision === \"highp\" && maxSupportedPrecision !== \"highp\") {\n      precision = \"mediump\";\n    }\n    return `precision ${precision} float;\n${src}`;\n  } else if (maxSupportedPrecision !== \"highp\" && src.substring(0, 15) === \"precision highp\") {\n    return src.replace(\"precision highp\", \"precision mediump\");\n  }\n  return src;\n}\n\nexport { ensurePrecision };\n//# sourceMappingURL=ensurePrecision.mjs.map\n","\"use strict\";\nfunction addProgramDefines(src, isES300, isFragment) {\n  if (isES300)\n    return src;\n  if (isFragment) {\n    src = src.replace(\"out vec4 finalColor;\", \"\");\n    return `\n\n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in varying\n        #define finalColor gl_FragColor\n        #define texture texture2D\n        #endif\n        ${src}\n        `;\n  }\n  return `\n\n        #ifdef GL_ES // This checks if it is WebGL1\n        #define in attribute\n        #define out varying\n        #endif\n        ${src}\n        `;\n}\n\nexport { addProgramDefines };\n//# sourceMappingURL=addProgramDefines.mjs.map\n","\"use strict\";\nfunction insertVersion(src, isES300) {\n  if (!isES300)\n    return src;\n  return `#version 300 es\n${src}`;\n}\n\nexport { insertVersion };\n//# sourceMappingURL=insertVersion.mjs.map\n","import { Point } from '../point/Point.mjs';\n\n\"use strict\";\nconst tempPoints = [new Point(), new Point(), new Point(), new Point()];\nclass Rectangle {\n  /**\n   * @param x - The X coordinate of the upper-left corner of the rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rectangle\n   * @param width - The overall width of the rectangle\n   * @param height - The overall height of the rectangle\n   */\n  constructor(x = 0, y = 0, width = 0, height = 0) {\n    /**\n     * The type of the object, mainly used to avoid `instanceof` checks\n     * @example\n     * ```ts\n     * // Check shape type\n     * const shape = new Rectangle(0, 0, 100, 100);\n     * console.log(shape.type); // 'rectangle'\n     *\n     * // Use in type guards\n     * if (shape.type === 'rectangle') {\n     *     console.log(shape.width, shape.height);\n     * }\n     * ```\n     * @readonly\n     * @default 'rectangle'\n     * @see {@link SHAPE_PRIMITIVE} For all shape types\n     */\n    this.type = \"rectangle\";\n    this.x = Number(x);\n    this.y = Number(y);\n    this.width = Number(width);\n    this.height = Number(height);\n  }\n  /**\n   * Returns the left edge (x-coordinate) of the rectangle.\n   * @example\n   * ```ts\n   * // Get left edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.left); // 100\n   *\n   * // Use in alignment calculations\n   * sprite.x = rect.left + padding;\n   *\n   * // Compare positions\n   * if (point.x > rect.left) {\n   *     console.log('Point is right of rectangle');\n   * }\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the left edge\n   * @see {@link Rectangle.right} For right edge position\n   * @see {@link Rectangle.x} For direct x-coordinate access\n   */\n  get left() {\n    return this.x;\n  }\n  /**\n   * Returns the right edge (x + width) of the rectangle.\n   * @example\n   * ```ts\n   * // Get right edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.right); // 300\n   *\n   * // Align to right edge\n   * sprite.x = rect.right - sprite.width;\n   *\n   * // Check boundaries\n   * if (point.x < rect.right) {\n   *     console.log('Point is inside right bound');\n   * }\n   * ```\n   * @readonly\n   * @returns The x-coordinate of the right edge\n   * @see {@link Rectangle.left} For left edge position\n   * @see {@link Rectangle.width} For width value\n   */\n  get right() {\n    return this.x + this.width;\n  }\n  /**\n   * Returns the top edge (y-coordinate) of the rectangle.\n   * @example\n   * ```ts\n   * // Get top edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.top); // 100\n   *\n   * // Position above rectangle\n   * sprite.y = rect.top - sprite.height;\n   *\n   * // Check vertical position\n   * if (point.y > rect.top) {\n   *     console.log('Point is below top edge');\n   * }\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the top edge\n   * @see {@link Rectangle.bottom} For bottom edge position\n   * @see {@link Rectangle.y} For direct y-coordinate access\n   */\n  get top() {\n    return this.y;\n  }\n  /**\n   * Returns the bottom edge (y + height) of the rectangle.\n   * @example\n   * ```ts\n   * // Get bottom edge position\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * console.log(rect.bottom); // 250\n   *\n   * // Stack below rectangle\n   * sprite.y = rect.bottom + margin;\n   *\n   * // Check vertical bounds\n   * if (point.y < rect.bottom) {\n   *     console.log('Point is above bottom edge');\n   * }\n   * ```\n   * @readonly\n   * @returns The y-coordinate of the bottom edge\n   * @see {@link Rectangle.top} For top edge position\n   * @see {@link Rectangle.height} For height value\n   */\n  get bottom() {\n    return this.y + this.height;\n  }\n  /**\n   * Determines whether the Rectangle is empty (has no area).\n   * @example\n   * ```ts\n   * // Check zero dimensions\n   * const rect = new Rectangle(100, 100, 0, 50);\n   * console.log(rect.isEmpty()); // true\n   * ```\n   * @returns True if the rectangle has no area\n   * @see {@link Rectangle.width} For width value\n   * @see {@link Rectangle.height} For height value\n   */\n  isEmpty() {\n    return this.left === this.right || this.top === this.bottom;\n  }\n  /**\n   * A constant empty rectangle. This is a new object every time the property is accessed.\n   * @example\n   * ```ts\n   * // Get fresh empty rectangle\n   * const empty = Rectangle.EMPTY;\n   * console.log(empty.isEmpty()); // true\n   * ```\n   * @returns A new empty rectangle instance\n   * @see {@link Rectangle.isEmpty} For empty state testing\n   */\n  static get EMPTY() {\n    return new Rectangle(0, 0, 0, 0);\n  }\n  /**\n   * Creates a clone of this Rectangle\n   * @example\n   * ```ts\n   * // Basic cloning\n   * const original = new Rectangle(100, 100, 200, 150);\n   * const copy = original.clone();\n   *\n   * // Clone and modify\n   * const modified = original.clone();\n   * modified.width *= 2;\n   * modified.height += 50;\n   *\n   * // Verify independence\n   * console.log(original.width);  // 200\n   * console.log(modified.width);  // 400\n   * ```\n   * @returns A copy of the rectangle\n   * @see {@link Rectangle.copyFrom} For copying into existing rectangle\n   * @see {@link Rectangle.copyTo} For copying to another rectangle\n   */\n  clone() {\n    return new Rectangle(this.x, this.y, this.width, this.height);\n  }\n  /**\n   * Converts a Bounds object to a Rectangle object.\n   * @example\n   * ```ts\n   * // Convert bounds to rectangle\n   * const bounds = container.getBounds();\n   * const rect = new Rectangle().copyFromBounds(bounds);\n   * ```\n   * @param bounds - The bounds to copy and convert to a rectangle\n   * @returns Returns itself\n   * @see {@link Bounds} For bounds object structure\n   * @see {@link Rectangle.getBounds} For getting rectangle bounds\n   */\n  copyFromBounds(bounds) {\n    this.x = bounds.minX;\n    this.y = bounds.minY;\n    this.width = bounds.maxX - bounds.minX;\n    this.height = bounds.maxY - bounds.minY;\n    return this;\n  }\n  /**\n   * Copies another rectangle to this one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Rectangle(100, 100, 200, 150);\n   * const target = new Rectangle();\n   * target.copyFrom(source);\n   *\n   * // Chain with other operations\n   * const rect = new Rectangle()\n   *     .copyFrom(source)\n   *     .pad(10);\n   * ```\n   * @param rectangle - The rectangle to copy from\n   * @returns Returns itself\n   * @see {@link Rectangle.copyTo} For copying to another rectangle\n   * @see {@link Rectangle.clone} For creating new rectangle copy\n   */\n  copyFrom(rectangle) {\n    this.x = rectangle.x;\n    this.y = rectangle.y;\n    this.width = rectangle.width;\n    this.height = rectangle.height;\n    return this;\n  }\n  /**\n   * Copies this rectangle to another one.\n   * @example\n   * ```ts\n   * // Basic copying\n   * const source = new Rectangle(100, 100, 200, 150);\n   * const target = new Rectangle();\n   * source.copyTo(target);\n   *\n   * // Chain with other operations\n   * const result = source\n   *     .copyTo(new Rectangle())\n   *     .getBounds();\n   * ```\n   * @param rectangle - The rectangle to copy to\n   * @returns Returns given parameter\n   * @see {@link Rectangle.copyFrom} For copying from another rectangle\n   * @see {@link Rectangle.clone} For creating new rectangle copy\n   */\n  copyTo(rectangle) {\n    rectangle.copyFrom(this);\n    return rectangle;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this Rectangle\n   * @example\n   * ```ts\n   * // Basic containment check\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * const isInside = rect.contains(150, 125); // true\n   * // Check edge cases\n   * console.log(rect.contains(100, 100)); // true (on edge)\n   * console.log(rect.contains(300, 250)); // false (outside)\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @returns Whether the x/y coordinates are within this Rectangle\n   * @see {@link Rectangle.containsRect} For rectangle containment\n   * @see {@link Rectangle.strokeContains} For checking stroke intersection\n   */\n  contains(x, y) {\n    if (this.width <= 0 || this.height <= 0) {\n      return false;\n    }\n    if (x >= this.x && x < this.x + this.width) {\n      if (y >= this.y && y < this.y + this.height) {\n        return true;\n      }\n    }\n    return false;\n  }\n  /**\n   * Checks whether the x and y coordinates given are contained within this rectangle including the stroke.\n   * @example\n   * ```ts\n   * // Basic stroke check\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * const isOnStroke = rect.strokeContains(150, 100, 4); // 4px line width\n   *\n   * // Check with different alignments\n   * const innerStroke = rect.strokeContains(150, 100, 4, 1);   // Inside\n   * const centerStroke = rect.strokeContains(150, 100, 4, 0.5); // Centered\n   * const outerStroke = rect.strokeContains(150, 100, 4, 0);   // Outside\n   * ```\n   * @param x - The X coordinate of the point to test\n   * @param y - The Y coordinate of the point to test\n   * @param strokeWidth - The width of the line to check\n   * @param alignment - The alignment of the stroke (1 = inner, 0.5 = centered, 0 = outer)\n   * @returns Whether the x/y coordinates are within this rectangle's stroke\n   * @see {@link Rectangle.contains} For checking fill containment\n   * @see {@link Rectangle.getBounds} For getting stroke bounds\n   */\n  strokeContains(x, y, strokeWidth, alignment = 0.5) {\n    const { width, height } = this;\n    if (width <= 0 || height <= 0)\n      return false;\n    const _x = this.x;\n    const _y = this.y;\n    const strokeWidthOuter = strokeWidth * (1 - alignment);\n    const strokeWidthInner = strokeWidth - strokeWidthOuter;\n    const outerLeft = _x - strokeWidthOuter;\n    const outerRight = _x + width + strokeWidthOuter;\n    const outerTop = _y - strokeWidthOuter;\n    const outerBottom = _y + height + strokeWidthOuter;\n    const innerLeft = _x + strokeWidthInner;\n    const innerRight = _x + width - strokeWidthInner;\n    const innerTop = _y + strokeWidthInner;\n    const innerBottom = _y + height - strokeWidthInner;\n    return x >= outerLeft && x <= outerRight && y >= outerTop && y <= outerBottom && !(x > innerLeft && x < innerRight && y > innerTop && y < innerBottom);\n  }\n  /**\n   * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n   * Returns true only if the area of the intersection is >0, this means that Rectangles\n   * sharing a side are not overlapping. Another side effect is that an arealess rectangle\n   * (width or height equal to zero) can't intersect any other rectangle.\n   * @param {Rectangle} other - The Rectangle to intersect with `this`.\n   * @param {Matrix} transform - The transformation matrix of `other`.\n   * @returns {boolean} A value of `true` if the transformed `other` Rectangle intersects with `this`; otherwise `false`.\n   */\n  /**\n   * Determines whether the `other` Rectangle transformed by `transform` intersects with `this` Rectangle object.\n   *\n   * Returns true only if the area of the intersection is greater than 0.\n   * This means that rectangles sharing only a side are not considered intersecting.\n   * @example\n   * ```ts\n   * // Basic intersection check\n   * const rect1 = new Rectangle(0, 0, 100, 100);\n   * const rect2 = new Rectangle(50, 50, 100, 100);\n   * console.log(rect1.intersects(rect2)); // true\n   *\n   * // With transformation matrix\n   * const matrix = new Matrix();\n   * matrix.rotate(Math.PI / 4); // 45 degrees\n   * console.log(rect1.intersects(rect2, matrix)); // Checks with rotation\n   *\n   * // Edge cases\n   * const zeroWidth = new Rectangle(0, 0, 0, 100);\n   * console.log(rect1.intersects(zeroWidth)); // false (no area)\n   * ```\n   * @remarks\n   * - Returns true only if intersection area is > 0\n   * - Rectangles sharing only a side are not intersecting\n   * - Zero-area rectangles cannot intersect anything\n   * - Supports optional transformation matrix\n   * @param other - The Rectangle to intersect with `this`\n   * @param transform - Optional transformation matrix of `other`\n   * @returns True if the transformed `other` Rectangle intersects with `this`\n   * @see {@link Rectangle.containsRect} For containment testing\n   * @see {@link Rectangle.contains} For point testing\n   */\n  intersects(other, transform) {\n    if (!transform) {\n      const x02 = this.x < other.x ? other.x : this.x;\n      const x12 = this.right > other.right ? other.right : this.right;\n      if (x12 <= x02) {\n        return false;\n      }\n      const y02 = this.y < other.y ? other.y : this.y;\n      const y12 = this.bottom > other.bottom ? other.bottom : this.bottom;\n      return y12 > y02;\n    }\n    const x0 = this.left;\n    const x1 = this.right;\n    const y0 = this.top;\n    const y1 = this.bottom;\n    if (x1 <= x0 || y1 <= y0) {\n      return false;\n    }\n    const lt = tempPoints[0].set(other.left, other.top);\n    const lb = tempPoints[1].set(other.left, other.bottom);\n    const rt = tempPoints[2].set(other.right, other.top);\n    const rb = tempPoints[3].set(other.right, other.bottom);\n    if (rt.x <= lt.x || lb.y <= lt.y) {\n      return false;\n    }\n    const s = Math.sign(transform.a * transform.d - transform.b * transform.c);\n    if (s === 0) {\n      return false;\n    }\n    transform.apply(lt, lt);\n    transform.apply(lb, lb);\n    transform.apply(rt, rt);\n    transform.apply(rb, rb);\n    if (Math.max(lt.x, lb.x, rt.x, rb.x) <= x0 || Math.min(lt.x, lb.x, rt.x, rb.x) >= x1 || Math.max(lt.y, lb.y, rt.y, rb.y) <= y0 || Math.min(lt.y, lb.y, rt.y, rb.y) >= y1) {\n      return false;\n    }\n    const nx = s * (lb.y - lt.y);\n    const ny = s * (lt.x - lb.x);\n    const n00 = nx * x0 + ny * y0;\n    const n10 = nx * x1 + ny * y0;\n    const n01 = nx * x0 + ny * y1;\n    const n11 = nx * x1 + ny * y1;\n    if (Math.max(n00, n10, n01, n11) <= nx * lt.x + ny * lt.y || Math.min(n00, n10, n01, n11) >= nx * rb.x + ny * rb.y) {\n      return false;\n    }\n    const mx = s * (lt.y - rt.y);\n    const my = s * (rt.x - lt.x);\n    const m00 = mx * x0 + my * y0;\n    const m10 = mx * x1 + my * y0;\n    const m01 = mx * x0 + my * y1;\n    const m11 = mx * x1 + my * y1;\n    if (Math.max(m00, m10, m01, m11) <= mx * lt.x + my * lt.y || Math.min(m00, m10, m01, m11) >= mx * rb.x + my * rb.y) {\n      return false;\n    }\n    return true;\n  }\n  /**\n   * Pads the rectangle making it grow in all directions.\n   *\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @example\n   * ```ts\n   * // Basic padding\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * rect.pad(10); // Adds 10px padding on all sides\n   *\n   * // Different horizontal and vertical padding\n   * const uiRect = new Rectangle(0, 0, 100, 50);\n   * uiRect.pad(20, 10); // 20px horizontal, 10px vertical\n   * ```\n   * @remarks\n   * - Adjusts x/y by subtracting padding\n   * - Increases width/height by padding * 2\n   * - Common in UI layout calculations\n   * - Chainable with other methods\n   * @param paddingX - The horizontal padding amount\n   * @param paddingY - The vertical padding amount\n   * @returns Returns itself\n   * @see {@link Rectangle.enlarge} For growing to include another rectangle\n   * @see {@link Rectangle.fit} For shrinking to fit within another rectangle\n   */\n  pad(paddingX = 0, paddingY = paddingX) {\n    this.x -= paddingX;\n    this.y -= paddingY;\n    this.width += paddingX * 2;\n    this.height += paddingY * 2;\n    return this;\n  }\n  /**\n   * Fits this rectangle around the passed one.\n   * @example\n   * ```ts\n   * // Basic fitting\n   * const container = new Rectangle(0, 0, 100, 100);\n   * const content = new Rectangle(25, 25, 200, 200);\n   * content.fit(container); // Clips to container bounds\n   * ```\n   * @param rectangle - The rectangle to fit around\n   * @returns Returns itself\n   * @see {@link Rectangle.enlarge} For growing to include another rectangle\n   * @see {@link Rectangle.pad} For adding padding around the rectangle\n   */\n  fit(rectangle) {\n    const x1 = Math.max(this.x, rectangle.x);\n    const x2 = Math.min(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.max(this.y, rectangle.y);\n    const y2 = Math.min(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = Math.max(x2 - x1, 0);\n    this.y = y1;\n    this.height = Math.max(y2 - y1, 0);\n    return this;\n  }\n  /**\n   * Enlarges rectangle so that its corners lie on a grid defined by resolution.\n   * @example\n   * ```ts\n   * // Basic grid alignment\n   * const rect = new Rectangle(10.2, 10.6, 100.8, 100.4);\n   * rect.ceil(); // Aligns to whole pixels\n   *\n   * // Custom resolution grid\n   * const uiRect = new Rectangle(5.3, 5.7, 50.2, 50.8);\n   * uiRect.ceil(0.5); // Aligns to half pixels\n   *\n   * // Use with precision value\n   * const preciseRect = new Rectangle(20.001, 20.999, 100.001, 100.999);\n   * preciseRect.ceil(1, 0.01); // Handles small decimal variations\n   * ```\n   * @param resolution - The grid size to align to (1 = whole pixels)\n   * @param eps - Small number to prevent floating point errors\n   * @returns Returns itself\n   * @see {@link Rectangle.fit} For constraining to bounds\n   * @see {@link Rectangle.enlarge} For growing dimensions\n   */\n  ceil(resolution = 1, eps = 1e-3) {\n    const x2 = Math.ceil((this.x + this.width - eps) * resolution) / resolution;\n    const y2 = Math.ceil((this.y + this.height - eps) * resolution) / resolution;\n    this.x = Math.floor((this.x + eps) * resolution) / resolution;\n    this.y = Math.floor((this.y + eps) * resolution) / resolution;\n    this.width = x2 - this.x;\n    this.height = y2 - this.y;\n    return this;\n  }\n  /**\n   * Scales the rectangle's dimensions and position by the specified factors.\n   * @example\n   * ```ts\n   * const rect = new Rectangle(50, 50, 100, 100);\n   *\n   * // Scale uniformly\n   * rect.scale(0.5, 0.5);\n   * // rect is now: x=25, y=25, width=50, height=50\n   *\n   * // non-uniformly\n   * rect.scale(0.5, 1);\n   * // rect is now: x=25, y=50, width=50, height=100\n   * ```\n   * @param x - The factor by which to scale the horizontal properties (x, width).\n   * @param y - The factor by which to scale the vertical properties (y, height).\n   * @returns Returns itself\n   */\n  scale(x, y = x) {\n    this.x *= x;\n    this.y *= y;\n    this.width *= x;\n    this.height *= y;\n    return this;\n  }\n  /**\n   * Enlarges this rectangle to include the passed rectangle.\n   * @example\n   * ```ts\n   * // Basic enlargement\n   * const rect = new Rectangle(50, 50, 100, 100);\n   * const other = new Rectangle(0, 0, 200, 75);\n   * rect.enlarge(other);\n   * // rect is now: x=0, y=0, width=200, height=150\n   *\n   * // Use for bounding box calculation\n   * const bounds = new Rectangle();\n   * objects.forEach((obj) => {\n   *     bounds.enlarge(obj.getBounds());\n   * });\n   * ```\n   * @param rectangle - The rectangle to include\n   * @returns Returns itself\n   * @see {@link Rectangle.fit} For shrinking to fit within another rectangle\n   * @see {@link Rectangle.pad} For adding padding around the rectangle\n   */\n  enlarge(rectangle) {\n    const x1 = Math.min(this.x, rectangle.x);\n    const x2 = Math.max(this.x + this.width, rectangle.x + rectangle.width);\n    const y1 = Math.min(this.y, rectangle.y);\n    const y2 = Math.max(this.y + this.height, rectangle.y + rectangle.height);\n    this.x = x1;\n    this.width = x2 - x1;\n    this.y = y1;\n    this.height = y2 - y1;\n    return this;\n  }\n  /**\n   * Returns the framing rectangle of the rectangle as a Rectangle object\n   * @example\n   * ```ts\n   * // Basic bounds retrieval\n   * const rect = new Rectangle(100, 100, 200, 150);\n   * const bounds = rect.getBounds();\n   *\n   * // Reuse existing rectangle\n   * const out = new Rectangle();\n   * rect.getBounds(out);\n   * ```\n   * @param out - Optional rectangle to store the result\n   * @returns The framing rectangle\n   * @see {@link Rectangle.copyFrom} For direct copying\n   * @see {@link Rectangle.clone} For creating new copy\n   */\n  getBounds(out) {\n    out || (out = new Rectangle());\n    out.copyFrom(this);\n    return out;\n  }\n  /**\n   * Determines whether another Rectangle is fully contained within this Rectangle.\n   *\n   * Rectangles that occupy the same space are considered to be containing each other.\n   *\n   * Rectangles without area (width or height equal to zero) can't contain anything,\n   * not even other arealess rectangles.\n   * @example\n   * ```ts\n   * // Check if one rectangle contains another\n   * const container = new Rectangle(0, 0, 100, 100);\n   * const inner = new Rectangle(25, 25, 50, 50);\n   *\n   * console.log(container.containsRect(inner)); // true\n   *\n   * // Check overlapping rectangles\n   * const partial = new Rectangle(75, 75, 50, 50);\n   * console.log(container.containsRect(partial)); // false\n   *\n   * // Zero-area rectangles\n   * const empty = new Rectangle(0, 0, 0, 100);\n   * console.log(container.containsRect(empty)); // false\n   * ```\n   * @param other - The Rectangle to check for containment\n   * @returns True if other is fully contained within this Rectangle\n   * @see {@link Rectangle.contains} For point containment\n   * @see {@link Rectangle.intersects} For overlap testing\n   */\n  containsRect(other) {\n    if (this.width <= 0 || this.height <= 0)\n      return false;\n    const x1 = other.x;\n    const y1 = other.y;\n    const x2 = other.x + other.width;\n    const y2 = other.y + other.height;\n    return x1 >= this.x && x1 < this.x + this.width && y1 >= this.y && y1 < this.y + this.height && x2 >= this.x && x2 < this.x + this.width && y2 >= this.y && y2 < this.y + this.height;\n  }\n  /**\n   * Sets the position and dimensions of the rectangle.\n   * @example\n   * ```ts\n   * // Basic usage\n   * const rect = new Rectangle();\n   * rect.set(100, 100, 200, 150);\n   *\n   * // Chain with other operations\n   * const bounds = new Rectangle()\n   *     .set(0, 0, 100, 100)\n   *     .pad(10);\n   * ```\n   * @param x - The X coordinate of the upper-left corner of the rectangle\n   * @param y - The Y coordinate of the upper-left corner of the rectangle\n   * @param width - The overall width of the rectangle\n   * @param height - The overall height of the rectangle\n   * @returns Returns itself for method chaining\n   * @see {@link Rectangle.copyFrom} For copying from another rectangle\n   * @see {@link Rectangle.clone} For creating a new copy\n   */\n  set(x, y, width, height) {\n    this.x = x;\n    this.y = y;\n    this.width = width;\n    this.height = height;\n    return this;\n  }\n  toString() {\n    return `[pixi.js/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`;\n  }\n}\n\nexport { Rectangle };\n//# sourceMappingURL=Rectangle.mjs.map\n","\"use strict\";\nclass GlParticleContainerAdaptor {\n  execute(particleContainerPipe, container) {\n    const state = particleContainerPipe.state;\n    const renderer = particleContainerPipe.renderer;\n    const shader = container.shader || particleContainerPipe.defaultShader;\n    shader.resources.uTexture = container.texture._source;\n    shader.resources.uniforms = particleContainerPipe.localUniforms;\n    const gl = renderer.gl;\n    const buffer = particleContainerPipe.getBuffers(container);\n    renderer.shader.bind(shader);\n    renderer.state.set(state);\n    renderer.geometry.bind(buffer.geometry, shader.glProgram);\n    const byteSize = buffer.geometry.indexBuffer.data.BYTES_PER_ELEMENT;\n    const glType = byteSize === 2 ? gl.UNSIGNED_SHORT : gl.UNSIGNED_INT;\n    gl.drawElements(gl.TRIANGLES, container.particleChildren.length * 6, glType, 0);\n  }\n}\n\nexport { GlParticleContainerAdaptor };\n//# sourceMappingURL=GlParticleContainerAdaptor.mjs.map\n","\"use strict\";\nfunction createIndicesForQuads(size, outBuffer = null) {\n  const totalIndices = size * 6;\n  if (totalIndices > 65535) {\n    outBuffer || (outBuffer = new Uint32Array(totalIndices));\n  } else {\n    outBuffer || (outBuffer = new Uint16Array(totalIndices));\n  }\n  if (outBuffer.length !== totalIndices) {\n    throw new Error(`Out buffer length is incorrect, got ${outBuffer.length} and expected ${totalIndices}`);\n  }\n  for (let i = 0, j = 0; i < totalIndices; i += 6, j += 4) {\n    outBuffer[i + 0] = j + 0;\n    outBuffer[i + 1] = j + 1;\n    outBuffer[i + 2] = j + 2;\n    outBuffer[i + 3] = j + 0;\n    outBuffer[i + 4] = j + 2;\n    outBuffer[i + 5] = j + 3;\n  }\n  return outBuffer;\n}\n\nexport { createIndicesForQuads };\n//# sourceMappingURL=createIndicesForQuads.mjs.map\n","import { getAttributeInfoFromFormat } from '../../../../rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\n\n\"use strict\";\nfunction generateParticleUpdateFunction(properties) {\n  return {\n    dynamicUpdate: generateUpdateFunction(properties, true),\n    staticUpdate: generateUpdateFunction(properties, false)\n  };\n}\nfunction generateUpdateFunction(properties, dynamic) {\n  const funcFragments = [];\n  funcFragments.push(`\n\n        var index = 0;\n\n        for (let i = 0; i < ps.length; ++i)\n        {\n            const p = ps[i];\n\n            `);\n  let offset = 0;\n  for (const i in properties) {\n    const property = properties[i];\n    if (dynamic !== property.dynamic)\n      continue;\n    funcFragments.push(`offset = index + ${offset}`);\n    funcFragments.push(property.code);\n    const attributeInfo = getAttributeInfoFromFormat(property.format);\n    offset += attributeInfo.stride / 4;\n  }\n  funcFragments.push(`\n            index += stride * 4;\n        }\n    `);\n  funcFragments.unshift(`\n        var stride = ${offset};\n    `);\n  const functionSource = funcFragments.join(\"\\n\");\n  return new Function(\"ps\", \"f32v\", \"u32v\", functionSource);\n}\n\nexport { generateParticleUpdateFunction };\n//# sourceMappingURL=generateParticleUpdateFunction.mjs.map\n","import { Buffer } from '../../../rendering/renderers/shared/buffer/Buffer.mjs';\nimport { BufferUsage } from '../../../rendering/renderers/shared/buffer/const.mjs';\nimport { Geometry } from '../../../rendering/renderers/shared/geometry/Geometry.mjs';\nimport { getAttributeInfoFromFormat } from '../../../rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nimport { ViewableBuffer } from '../../../utils/data/ViewableBuffer.mjs';\nimport { createIndicesForQuads } from './utils/createIndicesForQuads.mjs';\nimport { generateParticleUpdateFunction } from './utils/generateParticleUpdateFunction.mjs';\n\n\"use strict\";\nclass ParticleBuffer {\n  constructor(options) {\n    this._size = 0;\n    this._generateParticleUpdateCache = {};\n    const size = this._size = options.size ?? 1e3;\n    const properties = options.properties;\n    let staticVertexSize = 0;\n    let dynamicVertexSize = 0;\n    for (const i in properties) {\n      const property = properties[i];\n      const attributeInfo = getAttributeInfoFromFormat(property.format);\n      if (property.dynamic) {\n        dynamicVertexSize += attributeInfo.stride;\n      } else {\n        staticVertexSize += attributeInfo.stride;\n      }\n    }\n    this._dynamicStride = dynamicVertexSize / 4;\n    this._staticStride = staticVertexSize / 4;\n    this.staticAttributeBuffer = new ViewableBuffer(size * 4 * staticVertexSize);\n    this.dynamicAttributeBuffer = new ViewableBuffer(size * 4 * dynamicVertexSize);\n    this.indexBuffer = createIndicesForQuads(size);\n    const geometry = new Geometry();\n    let dynamicOffset = 0;\n    let staticOffset = 0;\n    this._staticBuffer = new Buffer({\n      data: new Float32Array(1),\n      label: \"static-particle-buffer\",\n      shrinkToFit: false,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    this._dynamicBuffer = new Buffer({\n      data: new Float32Array(1),\n      label: \"dynamic-particle-buffer\",\n      shrinkToFit: false,\n      usage: BufferUsage.VERTEX | BufferUsage.COPY_DST\n    });\n    for (const i in properties) {\n      const property = properties[i];\n      const attributeInfo = getAttributeInfoFromFormat(property.format);\n      if (property.dynamic) {\n        geometry.addAttribute(property.attributeName, {\n          buffer: this._dynamicBuffer,\n          stride: this._dynamicStride * 4,\n          offset: dynamicOffset * 4,\n          format: property.format\n        });\n        dynamicOffset += attributeInfo.size;\n      } else {\n        geometry.addAttribute(property.attributeName, {\n          buffer: this._staticBuffer,\n          stride: this._staticStride * 4,\n          offset: staticOffset * 4,\n          format: property.format\n        });\n        staticOffset += attributeInfo.size;\n      }\n    }\n    geometry.addIndex(this.indexBuffer);\n    const uploadFunction = this.getParticleUpdate(properties);\n    this._dynamicUpload = uploadFunction.dynamicUpdate;\n    this._staticUpload = uploadFunction.staticUpdate;\n    this.geometry = geometry;\n  }\n  getParticleUpdate(properties) {\n    const key = getParticleSyncKey(properties);\n    if (this._generateParticleUpdateCache[key]) {\n      return this._generateParticleUpdateCache[key];\n    }\n    this._generateParticleUpdateCache[key] = this.generateParticleUpdate(properties);\n    return this._generateParticleUpdateCache[key];\n  }\n  generateParticleUpdate(properties) {\n    return generateParticleUpdateFunction(properties);\n  }\n  update(particles, uploadStatic) {\n    if (particles.length > this._size) {\n      uploadStatic = true;\n      this._size = Math.max(particles.length, this._size * 1.5 | 0);\n      this.staticAttributeBuffer = new ViewableBuffer(this._size * this._staticStride * 4 * 4);\n      this.dynamicAttributeBuffer = new ViewableBuffer(this._size * this._dynamicStride * 4 * 4);\n      this.indexBuffer = createIndicesForQuads(this._size);\n      this.geometry.indexBuffer.setDataWithSize(\n        this.indexBuffer,\n        this.indexBuffer.byteLength,\n        true\n      );\n    }\n    const dynamicAttributeBuffer = this.dynamicAttributeBuffer;\n    this._dynamicUpload(particles, dynamicAttributeBuffer.float32View, dynamicAttributeBuffer.uint32View);\n    this._dynamicBuffer.setDataWithSize(\n      this.dynamicAttributeBuffer.float32View,\n      particles.length * this._dynamicStride * 4,\n      true\n    );\n    if (uploadStatic) {\n      const staticAttributeBuffer = this.staticAttributeBuffer;\n      this._staticUpload(particles, staticAttributeBuffer.float32View, staticAttributeBuffer.uint32View);\n      this._staticBuffer.setDataWithSize(\n        staticAttributeBuffer.float32View,\n        particles.length * this._staticStride * 4,\n        true\n      );\n    }\n  }\n  destroy() {\n    this._staticBuffer.destroy();\n    this._dynamicBuffer.destroy();\n    this.geometry.destroy();\n  }\n}\nfunction getParticleSyncKey(properties) {\n  const keyGen = [];\n  for (const key in properties) {\n    const property = properties[key];\n    keyGen.push(key, property.code, property.dynamic ? \"d\" : \"s\");\n  }\n  return keyGen.join(\"_\");\n}\n\nexport { ParticleBuffer };\n//# sourceMappingURL=ParticleBuffer.mjs.map\n","var wgsl = \"\\nstruct ParticleUniforms {\\n  uTranslationMatrix:mat3x3<f32>,\\n  uColor:vec4<f32>,\\n  uRound:f32,\\n  uResolution:vec2<f32>,\\n};\\n\\nfn roundPixels(position: vec2<f32>, targetSize: vec2<f32>) -> vec2<f32>\\n{\\n  return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\\n}\\n\\n@group(0) @binding(0) var<uniform> uniforms: ParticleUniforms;\\n\\n@group(1) @binding(0) var uTexture: texture_2d<f32>;\\n@group(1) @binding(1) var uSampler : sampler;\\n\\nstruct VSOutput {\\n    @builtin(position) position: vec4<f32>,\\n    @location(0) uv : vec2<f32>,\\n    @location(1) color : vec4<f32>,\\n  };\\n@vertex\\nfn mainVertex(\\n  @location(0) aVertex: vec2<f32>,\\n  @location(1) aPosition: vec2<f32>,\\n  @location(2) aUV: vec2<f32>,\\n  @location(3) aColor: vec4<f32>,\\n  @location(4) aRotation: f32,\\n) -> VSOutput {\\n  \\n   let v = vec2(\\n       aVertex.x * cos(aRotation) - aVertex.y * sin(aRotation),\\n       aVertex.x * sin(aRotation) + aVertex.y * cos(aRotation)\\n   ) + aPosition;\\n\\n   var position = vec4((uniforms.uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\\n\\n   if(uniforms.uRound == 1.0) {\\n       position = vec4(roundPixels(position.xy, uniforms.uResolution), position.zw);\\n   }\\n\\n    let vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uniforms.uColor;\\n\\n  return VSOutput(\\n   position,\\n   aUV,\\n   vColor,\\n  );\\n}\\n\\n@fragment\\nfn mainFragment(\\n  @location(0) uv: vec2<f32>,\\n  @location(1) color: vec4<f32>,\\n  @builtin(position) position: vec4<f32>,\\n) -> @location(0) vec4<f32> {\\n\\n    var sample = textureSample(uTexture, uSampler, uv) * color;\\n   \\n    return sample;\\n}\";\n\nexport { wgsl as default };\n//# sourceMappingURL=particles.wgsl.mjs.map\n","import { Color } from '../../../../color/Color.mjs';\nimport { Matrix } from '../../../../maths/matrix/Matrix.mjs';\nimport { GlProgram } from '../../../../rendering/renderers/gl/shader/GlProgram.mjs';\nimport { GpuProgram } from '../../../../rendering/renderers/gpu/shader/GpuProgram.mjs';\nimport { Shader } from '../../../../rendering/renderers/shared/shader/Shader.mjs';\nimport { Texture } from '../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { TextureStyle } from '../../../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport fragment from './particles.frag.mjs';\nimport vertex from './particles.vert.mjs';\nimport wgsl from './particles.wgsl.mjs';\n\n\"use strict\";\nclass ParticleShader extends Shader {\n  constructor() {\n    const glProgram = GlProgram.from({\n      vertex,\n      fragment\n    });\n    const gpuProgram = GpuProgram.from({\n      fragment: {\n        source: wgsl,\n        entryPoint: \"mainFragment\"\n      },\n      vertex: {\n        source: wgsl,\n        entryPoint: \"mainVertex\"\n      }\n    });\n    super({\n      glProgram,\n      gpuProgram,\n      resources: {\n        // this will be replaced with the texture from the particle container\n        uTexture: Texture.WHITE.source,\n        // this will be replaced with the texture style from the particle container\n        uSampler: new TextureStyle({}),\n        // this will be replaced with the local uniforms from the particle container\n        uniforms: {\n          uTranslationMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n          uColor: { value: new Color(16777215), type: \"vec4<f32>\" },\n          uRound: { value: 1, type: \"f32\" },\n          uResolution: { value: [0, 0], type: \"vec2<f32>\" }\n        }\n      }\n    });\n  }\n}\n\nexport { ParticleShader };\n//# sourceMappingURL=ParticleShader.mjs.map\n","var vertex = \"attribute vec2 aVertex;\\nattribute vec2 aUV;\\nattribute vec4 aColor;\\n\\nattribute vec2 aPosition;\\nattribute float aRotation;\\n\\nuniform mat3 uTranslationMatrix;\\nuniform float uRound;\\nuniform vec2 uResolution;\\nuniform vec4 uColor;\\n\\nvarying vec2 vUV;\\nvarying vec4 vColor;\\n\\nvec2 roundPixels(vec2 position, vec2 targetSize)\\n{       \\n    return (floor(((position * 0.5 + 0.5) * targetSize) + 0.5) / targetSize) * 2.0 - 1.0;\\n}\\n\\nvoid main(void){\\n    float cosRotation = cos(aRotation);\\n    float sinRotation = sin(aRotation);\\n    float x = aVertex.x * cosRotation - aVertex.y * sinRotation;\\n    float y = aVertex.x * sinRotation + aVertex.y * cosRotation;\\n\\n    vec2 v = vec2(x, y);\\n    v = v + aPosition;\\n\\n    gl_Position = vec4((uTranslationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\\n\\n    if(uRound == 1.0)\\n    {\\n        gl_Position.xy = roundPixels(gl_Position.xy, uResolution);\\n    }\\n\\n    vUV = aUV;\\n    vColor = vec4(aColor.rgb * aColor.a, aColor.a) * uColor;\\n}\\n\";\n\nexport { vertex as default };\n//# sourceMappingURL=particles.vert.mjs.map\n","var fragment = \"varying vec2 vUV;\\nvarying vec4 vColor;\\n\\nuniform sampler2D uTexture;\\n\\nvoid main(void){\\n    vec4 color = texture2D(uTexture, vUV) * vColor;\\n    gl_FragColor = color;\\n}\";\n\nexport { fragment as default };\n//# sourceMappingURL=particles.frag.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { UniformGroup } from '../../../rendering/renderers/shared/shader/UniformGroup.mjs';\nimport { getAdjustedBlendModeBlend } from '../../../rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nimport { State } from '../../../rendering/renderers/shared/state/State.mjs';\nimport { color32BitToUniform } from '../../graphics/gpu/colorToUniform.mjs';\nimport { ParticleBuffer } from './ParticleBuffer.mjs';\nimport { ParticleShader } from './shader/ParticleShader.mjs';\n\n\"use strict\";\nclass ParticleContainerPipe {\n  /**\n   * @param renderer - The renderer this sprite batch works for.\n   * @param adaptor\n   */\n  constructor(renderer, adaptor) {\n    /** @internal */\n    this.state = State.for2d();\n    /** Local uniforms that are used for rendering particles. */\n    this.localUniforms = new UniformGroup({\n      uTranslationMatrix: { value: new Matrix(), type: \"mat3x3<f32>\" },\n      uColor: { value: new Float32Array(4), type: \"vec4<f32>\" },\n      uRound: { value: 1, type: \"f32\" },\n      uResolution: { value: [0, 0], type: \"vec2<f32>\" }\n    });\n    this.renderer = renderer;\n    this.adaptor = adaptor;\n    this.defaultShader = new ParticleShader();\n    this.state = State.for2d();\n  }\n  validateRenderable(_renderable) {\n    return false;\n  }\n  addRenderable(renderable, instructionSet) {\n    this.renderer.renderPipes.batch.break(instructionSet);\n    instructionSet.add(renderable);\n  }\n  getBuffers(renderable) {\n    return renderable._gpuData[this.renderer.uid] || this._initBuffer(renderable);\n  }\n  _initBuffer(renderable) {\n    renderable._gpuData[this.renderer.uid] = new ParticleBuffer({\n      size: renderable.particleChildren.length,\n      properties: renderable._properties\n    });\n    return renderable._gpuData[this.renderer.uid];\n  }\n  updateRenderable(_renderable) {\n  }\n  execute(container) {\n    const children = container.particleChildren;\n    if (children.length === 0) {\n      return;\n    }\n    const renderer = this.renderer;\n    const buffer = this.getBuffers(container);\n    container.texture || (container.texture = children[0].texture);\n    const state = this.state;\n    buffer.update(children, container._childrenDirty);\n    container._childrenDirty = false;\n    state.blendMode = getAdjustedBlendModeBlend(container.blendMode, container.texture._source);\n    const uniforms = this.localUniforms.uniforms;\n    const transformationMatrix = uniforms.uTranslationMatrix;\n    container.worldTransform.copyTo(transformationMatrix);\n    transformationMatrix.prepend(renderer.globalUniforms.globalUniformData.projectionMatrix);\n    uniforms.uResolution = renderer.globalUniforms.globalUniformData.resolution;\n    uniforms.uRound = renderer._roundPixels | container._roundPixels;\n    color32BitToUniform(\n      container.groupColorAlpha,\n      uniforms.uColor,\n      0\n    );\n    this.adaptor.execute(this, container);\n  }\n  /** Destroys the ParticleRenderer. */\n  destroy() {\n    this.renderer = null;\n    if (this.defaultShader) {\n      this.defaultShader.destroy();\n      this.defaultShader = null;\n    }\n  }\n}\n\nexport { ParticleContainerPipe };\n//# sourceMappingURL=ParticleContainerPipe.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GlParticleContainerAdaptor } from '../gl/GlParticleContainerAdaptor.mjs';\nimport { ParticleContainerPipe } from './ParticleContainerPipe.mjs';\n\n\"use strict\";\nclass GlParticleContainerPipe extends ParticleContainerPipe {\n  constructor(renderer) {\n    super(renderer, new GlParticleContainerAdaptor());\n  }\n}\n/** @ignore */\nGlParticleContainerPipe.extension = {\n  type: [\n    ExtensionType.WebGLPipes\n  ],\n  name: \"particle\"\n};\n\nexport { GlParticleContainerPipe };\n//# sourceMappingURL=GlParticleContainerPipe.mjs.map\n","\"use strict\";\nclass GpuParticleContainerAdaptor {\n  execute(particleContainerPipe, container) {\n    const renderer = particleContainerPipe.renderer;\n    const shader = container.shader || particleContainerPipe.defaultShader;\n    shader.groups[0] = renderer.renderPipes.uniformBatch.getUniformBindGroup(particleContainerPipe.localUniforms, true);\n    shader.groups[1] = renderer.texture.getTextureBindGroup(container.texture);\n    const state = particleContainerPipe.state;\n    const buffer = particleContainerPipe.getBuffers(container);\n    renderer.encoder.draw({\n      geometry: buffer.geometry,\n      shader: container.shader || particleContainerPipe.defaultShader,\n      state,\n      size: container.particleChildren.length * 6\n    });\n  }\n}\n\nexport { GpuParticleContainerAdaptor };\n//# sourceMappingURL=GpuParticleContainerAdaptor.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { GpuParticleContainerAdaptor } from '../gpu/GpuParticleContainerAdaptor.mjs';\nimport { ParticleContainerPipe } from './ParticleContainerPipe.mjs';\n\n\"use strict\";\nclass GpuParticleContainerPipe extends ParticleContainerPipe {\n  constructor(renderer) {\n    super(renderer, new GpuParticleContainerAdaptor());\n  }\n}\n/** @ignore */\nGpuParticleContainerPipe.extension = {\n  type: [\n    ExtensionType.WebGPUPipes\n  ],\n  name: \"particle\"\n};\n\nexport { GpuParticleContainerPipe };\n//# sourceMappingURL=GpuParticleContainerPipe.mjs.map\n","import { extensions } from '../../extensions/Extensions.mjs';\nimport { GlParticleContainerPipe } from './shared/GlParticleContainerPipe.mjs';\nimport { GpuParticleContainerPipe } from './shared/GpuParticleContainerPipe.mjs';\n\n\"use strict\";\nextensions.add(GlParticleContainerPipe);\nextensions.add(GpuParticleContainerPipe);\n//# sourceMappingURL=init.mjs.map\n","import { PI_2 } from '../misc/const.mjs';\nimport { Point } from '../point/Point.mjs';\n\n\"use strict\";\nclass Matrix {\n  /**\n   * @param a - x scale\n   * @param b - y skew\n   * @param c - x skew\n   * @param d - y scale\n   * @param tx - x translation\n   * @param ty - y translation\n   */\n  constructor(a = 1, b = 0, c = 0, d = 1, tx = 0, ty = 0) {\n    /**\n     * Array representation of the matrix.\n     * Only populated when `toArray()` is called.\n     * @default null\n     * @see {@link Matrix.toArray} For filling this array\n     */\n    this.array = null;\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n  }\n  /**\n   * Creates a Matrix object based on the given array.\n   * Populates matrix components from a flat array in column-major order.\n   *\n   * > [!NOTE] Array mapping order:\n   * > ```\n   * > array[0] = a  (x scale)\n   * > array[1] = b  (y skew)\n   * > array[2] = tx (x translation)\n   * > array[3] = c  (x skew)\n   * > array[4] = d  (y scale)\n   * > array[5] = ty (y translation)\n   * > ```\n   * @example\n   * ```ts\n   * // Create matrix from array\n   * const matrix = new Matrix();\n   * matrix.fromArray([\n   *     2, 0,  100,  // a, b, tx\n   *     0, 2,  100   // c, d, ty\n   * ]);\n   *\n   * // Create matrix from typed array\n   * const float32Array = new Float32Array([\n   *     1, 0, 0,     // Scale x1, no skew\n   *     0, 1, 0      // No skew, scale x1\n   * ]);\n   * matrix.fromArray(float32Array);\n   * ```\n   * @param array - The array to populate the matrix from\n   * @see {@link Matrix.toArray} For converting matrix to array\n   * @see {@link Matrix.set} For setting values directly\n   */\n  fromArray(array) {\n    this.a = array[0];\n    this.b = array[1];\n    this.c = array[3];\n    this.d = array[4];\n    this.tx = array[2];\n    this.ty = array[5];\n  }\n  /**\n   * Sets the matrix properties directly.\n   * All matrix components can be set in one call.\n   * @example\n   * ```ts\n   * // Set to identity matrix\n   * matrix.set(1, 0, 0, 1, 0, 0);\n   *\n   * // Set to scale matrix\n   * matrix.set(2, 0, 0, 2, 0, 0); // Scale 2x\n   *\n   * // Set to translation matrix\n   * matrix.set(1, 0, 0, 1, 100, 50); // Move 100,50\n   * ```\n   * @param a - Scale on x axis\n   * @param b - Shear on y axis\n   * @param c - Shear on x axis\n   * @param d - Scale on y axis\n   * @param tx - Translation on x axis\n   * @param ty - Translation on y axis\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.identity} For resetting to identity\n   * @see {@link Matrix.fromArray} For setting from array\n   */\n  set(a, b, c, d, tx, ty) {\n    this.a = a;\n    this.b = b;\n    this.c = c;\n    this.d = d;\n    this.tx = tx;\n    this.ty = ty;\n    return this;\n  }\n  /**\n   * Creates an array from the current Matrix object.\n   *\n   * > [!NOTE] The array format is:\n   * > ```\n   * > Non-transposed:\n   * > [a, c, tx,\n   * > b, d, ty,\n   * > 0, 0, 1]\n   * >\n   * > Transposed:\n   * > [a, b, 0,\n   * > c, d, 0,\n   * > tx,ty,1]\n   * > ```\n   * @example\n   * ```ts\n   * // Basic array conversion\n   * const matrix = new Matrix(2, 0, 0, 2, 100, 100);\n   * const array = matrix.toArray();\n   *\n   * // Using existing array\n   * const float32Array = new Float32Array(9);\n   * matrix.toArray(false, float32Array);\n   *\n   * // Get transposed array\n   * const transposed = matrix.toArray(true);\n   * ```\n   * @param transpose - Whether to transpose the matrix\n   * @param out - Optional Float32Array to store the result\n   * @returns The array containing the matrix values\n   * @see {@link Matrix.fromArray} For creating matrix from array\n   * @see {@link Matrix.array} For cached array storage\n   */\n  toArray(transpose, out) {\n    if (!this.array) {\n      this.array = new Float32Array(9);\n    }\n    const array = out || this.array;\n    if (transpose) {\n      array[0] = this.a;\n      array[1] = this.b;\n      array[2] = 0;\n      array[3] = this.c;\n      array[4] = this.d;\n      array[5] = 0;\n      array[6] = this.tx;\n      array[7] = this.ty;\n      array[8] = 1;\n    } else {\n      array[0] = this.a;\n      array[1] = this.c;\n      array[2] = this.tx;\n      array[3] = this.b;\n      array[4] = this.d;\n      array[5] = this.ty;\n      array[6] = 0;\n      array[7] = 0;\n      array[8] = 1;\n    }\n    return array;\n  }\n  /**\n   * Get a new position with the current transformation applied.\n   *\n   * Can be used to go from a child's coordinate space to the world coordinate space. (e.g. rendering)\n   * @example\n   * ```ts\n   * // Basic point transformation\n   * const matrix = new Matrix().translate(100, 50).rotate(Math.PI / 4);\n   * const point = new Point(10, 20);\n   * const transformed = matrix.apply(point);\n   *\n   * // Reuse existing point\n   * const output = new Point();\n   * matrix.apply(point, output);\n   * ```\n   * @param pos - The origin point to transform\n   * @param newPos - Optional point to store the result\n   * @returns The transformed point\n   * @see {@link Matrix.applyInverse} For inverse transformation\n   * @see {@link Point} For point operations\n   */\n  apply(pos, newPos) {\n    newPos = newPos || new Point();\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = this.a * x + this.c * y + this.tx;\n    newPos.y = this.b * x + this.d * y + this.ty;\n    return newPos;\n  }\n  /**\n   * Get a new position with the inverse of the current transformation applied.\n   *\n   * Can be used to go from the world coordinate space to a child's coordinate space. (e.g. input)\n   * @example\n   * ```ts\n   * // Basic inverse transformation\n   * const matrix = new Matrix().translate(100, 50).rotate(Math.PI / 4);\n   * const worldPoint = new Point(150, 100);\n   * const localPoint = matrix.applyInverse(worldPoint);\n   *\n   * // Reuse existing point\n   * const output = new Point();\n   * matrix.applyInverse(worldPoint, output);\n   *\n   * // Convert mouse position to local space\n   * const mousePoint = new Point(mouseX, mouseY);\n   * const localMouse = matrix.applyInverse(mousePoint);\n   * ```\n   * @param pos - The origin point to inverse-transform\n   * @param newPos - Optional point to store the result\n   * @returns The inverse-transformed point\n   * @see {@link Matrix.apply} For forward transformation\n   * @see {@link Matrix.invert} For getting inverse matrix\n   */\n  applyInverse(pos, newPos) {\n    newPos = newPos || new Point();\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const tx = this.tx;\n    const ty = this.ty;\n    const id = 1 / (a * d + c * -b);\n    const x = pos.x;\n    const y = pos.y;\n    newPos.x = d * id * x + -c * id * y + (ty * c - tx * d) * id;\n    newPos.y = a * id * y + -b * id * x + (-ty * a + tx * b) * id;\n    return newPos;\n  }\n  /**\n   * Translates the matrix on the x and y axes.\n   * Adds to the position values while preserving scale, rotation and skew.\n   * @example\n   * ```ts\n   * // Basic translation\n   * const matrix = new Matrix();\n   * matrix.translate(100, 50); // Move right 100, down 50\n   *\n   * // Chain with other transformations\n   * matrix\n   *     .scale(2, 2)\n   *     .translate(100, 0)\n   *     .rotate(Math.PI / 4);\n   * ```\n   * @param x - How much to translate on the x axis\n   * @param y - How much to translate on the y axis\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.set} For setting position directly\n   * @see {@link Matrix.setTransform} For complete transform setup\n   */\n  translate(x, y) {\n    this.tx += x;\n    this.ty += y;\n    return this;\n  }\n  /**\n   * Applies a scale transformation to the matrix.\n   * Multiplies the scale values with existing matrix components.\n   * @example\n   * ```ts\n   * // Basic scaling\n   * const matrix = new Matrix();\n   * matrix.scale(2, 3); // Scale 2x horizontally, 3x vertically\n   *\n   * // Chain with other transformations\n   * matrix\n   *     .translate(100, 100)\n   *     .scale(2, 2)     // Scales after translation\n   *     .rotate(Math.PI / 4);\n   * ```\n   * @param x - The amount to scale horizontally\n   * @param y - The amount to scale vertically\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.setTransform} For setting scale directly\n   * @see {@link Matrix.append} For combining transformations\n   */\n  scale(x, y) {\n    this.a *= x;\n    this.d *= y;\n    this.c *= x;\n    this.b *= y;\n    this.tx *= x;\n    this.ty *= y;\n    return this;\n  }\n  /**\n   * Applies a rotation transformation to the matrix.\n   *\n   * Rotates around the origin (0,0) by the given angle in radians.\n   * @example\n   * ```ts\n   * // Basic rotation\n   * const matrix = new Matrix();\n   * matrix.rotate(Math.PI / 4); // Rotate 45 degrees\n   *\n   * // Chain with other transformations\n   * matrix\n   *     .translate(100, 100) // Move to rotation center\n   *     .rotate(Math.PI)     // Rotate 180 degrees\n   *     .scale(2, 2);        // Scale after rotation\n   *\n   * // Common angles\n   * matrix.rotate(Math.PI / 2);  // 90 degrees\n   * matrix.rotate(Math.PI);      // 180 degrees\n   * matrix.rotate(Math.PI * 2);  // 360 degrees\n   * ```\n   * @remarks\n   * - Rotates around origin point (0,0)\n   * - Affects position if translation was set\n   * - Uses counter-clockwise rotation\n   * - Order of operations matters when chaining\n   * @param angle - The angle in radians\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.setTransform} For setting rotation directly\n   * @see {@link Matrix.append} For combining transformations\n   */\n  rotate(angle) {\n    const cos = Math.cos(angle);\n    const sin = Math.sin(angle);\n    const a1 = this.a;\n    const c1 = this.c;\n    const tx1 = this.tx;\n    this.a = a1 * cos - this.b * sin;\n    this.b = a1 * sin + this.b * cos;\n    this.c = c1 * cos - this.d * sin;\n    this.d = c1 * sin + this.d * cos;\n    this.tx = tx1 * cos - this.ty * sin;\n    this.ty = tx1 * sin + this.ty * cos;\n    return this;\n  }\n  /**\n   * Appends the given Matrix to this Matrix.\n   * Combines two matrices by multiplying them together: this = this * matrix\n   * @example\n   * ```ts\n   * // Basic matrix combination\n   * const matrix = new Matrix();\n   * const other = new Matrix().translate(100, 0).rotate(Math.PI / 4);\n   * matrix.append(other);\n   * ```\n   * @remarks\n   * - Order matters: A.append(B) !== B.append(A)\n   * - Modifies current matrix\n   * - Preserves transformation order\n   * - Commonly used for combining transforms\n   * @param matrix - The matrix to append\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.prepend} For prepending transformations\n   * @see {@link Matrix.appendFrom} For appending two external matrices\n   */\n  append(matrix) {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    this.a = matrix.a * a1 + matrix.b * c1;\n    this.b = matrix.a * b1 + matrix.b * d1;\n    this.c = matrix.c * a1 + matrix.d * c1;\n    this.d = matrix.c * b1 + matrix.d * d1;\n    this.tx = matrix.tx * a1 + matrix.ty * c1 + this.tx;\n    this.ty = matrix.tx * b1 + matrix.ty * d1 + this.ty;\n    return this;\n  }\n  /**\n   * Appends two matrices and sets the result to this matrix.\n   * Performs matrix multiplication: this = A * B\n   * @example\n   * ```ts\n   * // Basic matrix multiplication\n   * const result = new Matrix();\n   * const matrixA = new Matrix().scale(2, 2);\n   * const matrixB = new Matrix().rotate(Math.PI / 4);\n   * result.appendFrom(matrixA, matrixB);\n   * ```\n   * @remarks\n   * - Order matters: A * B !== B * A\n   * - Creates a new transformation from two others\n   * - More efficient than append() for multiple operations\n   * - Does not modify input matrices\n   * @param a - The first matrix to multiply\n   * @param b - The second matrix to multiply\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.append} For single matrix combination\n   * @see {@link Matrix.prepend} For reverse order multiplication\n   */\n  appendFrom(a, b) {\n    const a1 = a.a;\n    const b1 = a.b;\n    const c1 = a.c;\n    const d1 = a.d;\n    const tx = a.tx;\n    const ty = a.ty;\n    const a2 = b.a;\n    const b2 = b.b;\n    const c2 = b.c;\n    const d2 = b.d;\n    this.a = a1 * a2 + b1 * c2;\n    this.b = a1 * b2 + b1 * d2;\n    this.c = c1 * a2 + d1 * c2;\n    this.d = c1 * b2 + d1 * d2;\n    this.tx = tx * a2 + ty * c2 + b.tx;\n    this.ty = tx * b2 + ty * d2 + b.ty;\n    return this;\n  }\n  /**\n   * Sets the matrix based on all the available properties.\n   * Combines position, scale, rotation, skew and pivot in a single operation.\n   * @example\n   * ```ts\n   * // Basic transform setup\n   * const matrix = new Matrix();\n   * matrix.setTransform(\n   *     100, 100,    // position\n   *     0, 0,        // pivot\n   *     2, 2,        // scale\n   *     Math.PI / 4, // rotation (45 degrees)\n   *     0, 0         // skew\n   * );\n   * ```\n   * @remarks\n   * - Updates all matrix components at once\n   * - More efficient than separate transform calls\n   * - Uses radians for rotation and skew\n   * - Pivot affects rotation center\n   * @param x - Position on the x axis\n   * @param y - Position on the y axis\n   * @param pivotX - Pivot on the x axis\n   * @param pivotY - Pivot on the y axis\n   * @param scaleX - Scale on the x axis\n   * @param scaleY - Scale on the y axis\n   * @param rotation - Rotation in radians\n   * @param skewX - Skew on the x axis\n   * @param skewY - Skew on the y axis\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.decompose} For extracting transform properties\n   * @see {@link TransformableObject} For transform data structure\n   */\n  setTransform(x, y, pivotX, pivotY, scaleX, scaleY, rotation, skewX, skewY) {\n    this.a = Math.cos(rotation + skewY) * scaleX;\n    this.b = Math.sin(rotation + skewY) * scaleX;\n    this.c = -Math.sin(rotation - skewX) * scaleY;\n    this.d = Math.cos(rotation - skewX) * scaleY;\n    this.tx = x - (pivotX * this.a + pivotY * this.c);\n    this.ty = y - (pivotX * this.b + pivotY * this.d);\n    return this;\n  }\n  /**\n   * Prepends the given Matrix to this Matrix.\n   * Combines two matrices by multiplying them together: this = matrix * this\n   * @example\n   * ```ts\n   * // Basic matrix prepend\n   * const matrix = new Matrix().scale(2, 2);\n   * const other = new Matrix().translate(100, 0);\n   * matrix.prepend(other); // Translation happens before scaling\n   * ```\n   * @remarks\n   * - Order matters: A.prepend(B) !== B.prepend(A)\n   * - Modifies current matrix\n   * - Reverses transformation order compared to append()\n   * @param matrix - The matrix to prepend\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.append} For appending transformations\n   * @see {@link Matrix.appendFrom} For combining external matrices\n   */\n  prepend(matrix) {\n    const tx1 = this.tx;\n    if (matrix.a !== 1 || matrix.b !== 0 || matrix.c !== 0 || matrix.d !== 1) {\n      const a1 = this.a;\n      const c1 = this.c;\n      this.a = a1 * matrix.a + this.b * matrix.c;\n      this.b = a1 * matrix.b + this.b * matrix.d;\n      this.c = c1 * matrix.a + this.d * matrix.c;\n      this.d = c1 * matrix.b + this.d * matrix.d;\n    }\n    this.tx = tx1 * matrix.a + this.ty * matrix.c + matrix.tx;\n    this.ty = tx1 * matrix.b + this.ty * matrix.d + matrix.ty;\n    return this;\n  }\n  /**\n   * Decomposes the matrix into its individual transform components.\n   * Extracts position, scale, rotation and skew values from the matrix.\n   * @example\n   * ```ts\n   * // Basic decomposition\n   * const matrix = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4)\n   *     .scale(2, 2);\n   *\n   * const transform = {\n   *     position: new Point(),\n   *     scale: new Point(),\n   *     pivot: new Point(),\n   *     skew: new Point(),\n   *     rotation: 0\n   * };\n   *\n   * matrix.decompose(transform);\n   * console.log(transform.position); // Point(100, 100)\n   * console.log(transform.rotation); // ~0.785 (PI/4)\n   * console.log(transform.scale); // Point(2, 2)\n   * ```\n   * @remarks\n   * - Handles combined transformations\n   * - Accounts for pivot points\n   * - Chooses between rotation/skew based on transform type\n   * - Uses radians for rotation and skew\n   * @param transform - The transform object to store the decomposed values\n   * @returns The transform with the newly applied properties\n   * @see {@link Matrix.setTransform} For composing from components\n   * @see {@link TransformableObject} For transform structure\n   */\n  decompose(transform) {\n    const a = this.a;\n    const b = this.b;\n    const c = this.c;\n    const d = this.d;\n    const pivot = transform.pivot;\n    const skewX = -Math.atan2(-c, d);\n    const skewY = Math.atan2(b, a);\n    const delta = Math.abs(skewX + skewY);\n    if (delta < 1e-5 || Math.abs(PI_2 - delta) < 1e-5) {\n      transform.rotation = skewY;\n      transform.skew.x = transform.skew.y = 0;\n    } else {\n      transform.rotation = 0;\n      transform.skew.x = skewX;\n      transform.skew.y = skewY;\n    }\n    transform.scale.x = Math.sqrt(a * a + b * b);\n    transform.scale.y = Math.sqrt(c * c + d * d);\n    transform.position.x = this.tx + (pivot.x * a + pivot.y * c);\n    transform.position.y = this.ty + (pivot.x * b + pivot.y * d);\n    return transform;\n  }\n  /**\n   * Inverts this matrix.\n   * Creates the matrix that when multiplied with this matrix results in an identity matrix.\n   * @example\n   * ```ts\n   * // Basic matrix inversion\n   * const matrix = new Matrix()\n   *     .translate(100, 50)\n   *     .scale(2, 2);\n   *\n   * matrix.invert(); // Now transforms in opposite direction\n   *\n   * // Verify inversion\n   * const point = new Point(50, 50);\n   * const transformed = matrix.apply(point);\n   * const original = matrix.invert().apply(transformed);\n   * // original  point\n   * ```\n   * @remarks\n   * - Modifies the current matrix\n   * - Useful for reversing transformations\n   * - Cannot invert matrices with zero determinant\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.identity} For resetting to identity\n   * @see {@link Matrix.applyInverse} For inverse transformations\n   */\n  invert() {\n    const a1 = this.a;\n    const b1 = this.b;\n    const c1 = this.c;\n    const d1 = this.d;\n    const tx1 = this.tx;\n    const n = a1 * d1 - b1 * c1;\n    this.a = d1 / n;\n    this.b = -b1 / n;\n    this.c = -c1 / n;\n    this.d = a1 / n;\n    this.tx = (c1 * this.ty - d1 * tx1) / n;\n    this.ty = -(a1 * this.ty - b1 * tx1) / n;\n    return this;\n  }\n  /**\n   * Checks if this matrix is an identity matrix.\n   *\n   * An identity matrix has no transformations applied (default state).\n   * @example\n   * ```ts\n   * // Check if matrix is identity\n   * const matrix = new Matrix();\n   * console.log(matrix.isIdentity()); // true\n   *\n   * // Check after transformations\n   * matrix.translate(100, 0);\n   * console.log(matrix.isIdentity()); // false\n   *\n   * // Reset and verify\n   * matrix.identity();\n   * console.log(matrix.isIdentity()); // true\n   * ```\n   * @remarks\n   * - Verifies a = 1, d = 1 (no scale)\n   * - Verifies b = 0, c = 0 (no skew)\n   * - Verifies tx = 0, ty = 0 (no translation)\n   * @returns True if matrix has no transformations\n   * @see {@link Matrix.identity} For resetting to identity\n   * @see {@link Matrix.IDENTITY} For constant identity matrix\n   */\n  isIdentity() {\n    return this.a === 1 && this.b === 0 && this.c === 0 && this.d === 1 && this.tx === 0 && this.ty === 0;\n  }\n  /**\n   * Resets this Matrix to an identity (default) matrix.\n   * Sets all components to their default values: scale=1, no skew, no translation.\n   * @example\n   * ```ts\n   * // Reset transformed matrix\n   * const matrix = new Matrix()\n   *     .scale(2, 2)\n   *     .rotate(Math.PI / 4);\n   * matrix.identity(); // Back to default state\n   *\n   * // Chain after reset\n   * matrix\n   *     .identity()\n   *     .translate(100, 100)\n   *     .scale(2, 2);\n   *\n   * // Compare with identity constant\n   * const isDefault = matrix.equals(Matrix.IDENTITY);\n   * ```\n   * @remarks\n   * - Sets a=1, d=1 (default scale)\n   * - Sets b=0, c=0 (no skew)\n   * - Sets tx=0, ty=0 (no translation)\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.IDENTITY} For constant identity matrix\n   * @see {@link Matrix.isIdentity} For checking identity state\n   */\n  identity() {\n    this.a = 1;\n    this.b = 0;\n    this.c = 0;\n    this.d = 1;\n    this.tx = 0;\n    this.ty = 0;\n    return this;\n  }\n  /**\n   * Creates a new Matrix object with the same values as this one.\n   * @returns A copy of this matrix. Good for chaining method calls.\n   */\n  clone() {\n    const matrix = new Matrix();\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Creates a new Matrix object with the same values as this one.\n   * @param matrix\n   * @example\n   * ```ts\n   * // Basic matrix cloning\n   * const matrix = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4);\n   * const copy = matrix.clone();\n   *\n   * // Clone and modify\n   * const modified = matrix.clone()\n   *     .scale(2, 2);\n   *\n   * // Compare matrices\n   * console.log(matrix.equals(copy));     // true\n   * console.log(matrix.equals(modified)); // false\n   * ```\n   * @returns A copy of this matrix. Good for chaining method calls.\n   * @see {@link Matrix.copyTo} For copying to existing matrix\n   * @see {@link Matrix.copyFrom} For copying from another matrix\n   */\n  copyTo(matrix) {\n    matrix.a = this.a;\n    matrix.b = this.b;\n    matrix.c = this.c;\n    matrix.d = this.d;\n    matrix.tx = this.tx;\n    matrix.ty = this.ty;\n    return matrix;\n  }\n  /**\n   * Changes the values of the matrix to be the same as the ones in given matrix.\n   * @example\n   * ```ts\n   * // Basic matrix copying\n   * const source = new Matrix()\n   *     .translate(100, 100)\n   *     .rotate(Math.PI / 4);\n   * const target = new Matrix();\n   * target.copyFrom(source);\n   * ```\n   * @param matrix - The matrix to copy from\n   * @returns This matrix. Good for chaining method calls.\n   * @see {@link Matrix.clone} For creating new matrix copy\n   * @see {@link Matrix.copyTo} For copying to another matrix\n   */\n  copyFrom(matrix) {\n    this.a = matrix.a;\n    this.b = matrix.b;\n    this.c = matrix.c;\n    this.d = matrix.d;\n    this.tx = matrix.tx;\n    this.ty = matrix.ty;\n    return this;\n  }\n  /**\n   * Checks if this matrix equals another matrix.\n   * Compares all components for exact equality.\n   * @example\n   * ```ts\n   * // Basic equality check\n   * const m1 = new Matrix();\n   * const m2 = new Matrix();\n   * console.log(m1.equals(m2)); // true\n   *\n   * // Compare transformed matrices\n   * const transform = new Matrix()\n   *     .translate(100, 100)\n   * const clone = new Matrix()\n   *     .scale(2, 2);\n   * console.log(transform.equals(clone)); // false\n   * ```\n   * @param matrix - The matrix to compare to\n   * @returns True if matrices are identical\n   * @see {@link Matrix.copyFrom} For copying matrix values\n   * @see {@link Matrix.isIdentity} For identity comparison\n   */\n  equals(matrix) {\n    return matrix.a === this.a && matrix.b === this.b && matrix.c === this.c && matrix.d === this.d && matrix.tx === this.tx && matrix.ty === this.ty;\n  }\n  toString() {\n    return `[pixi.js:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`;\n  }\n  /**\n   * A default (identity) matrix with no transformations applied.\n   *\n   * > [!IMPORTANT] This is a shared read-only object. Create a new Matrix if you need to modify it.\n   * @example\n   * ```ts\n   * // Get identity matrix reference\n   * const identity = Matrix.IDENTITY;\n   * console.log(identity.isIdentity()); // true\n   *\n   * // Compare with identity\n   * const matrix = new Matrix();\n   * console.log(matrix.equals(Matrix.IDENTITY)); // true\n   *\n   * // Create new matrix instead of modifying IDENTITY\n   * const transform = new Matrix()\n   *     .copyFrom(Matrix.IDENTITY)\n   *     .translate(100, 100);\n   * ```\n   * @readonly\n   * @returns A read-only identity matrix\n   * @see {@link Matrix.shared} For temporary calculations\n   * @see {@link Matrix.identity} For resetting matrices\n   */\n  static get IDENTITY() {\n    return identityMatrix.identity();\n  }\n  /**\n   * A static Matrix that can be used to avoid creating new objects.\n   * Will always ensure the matrix is reset to identity when requested.\n   *\n   * > [!IMPORTANT] This matrix is shared and temporary. Do not store references to it.\n   * @example\n   * ```ts\n   * // Use for temporary calculations\n   * const tempMatrix = Matrix.shared;\n   * tempMatrix.translate(100, 100).rotate(Math.PI / 4);\n   * const point = tempMatrix.apply({ x: 10, y: 20 });\n   *\n   * // Will be reset to identity on next access\n   * const fresh = Matrix.shared; // Back to identity\n   * ```\n   * @remarks\n   * - Always returns identity matrix\n   * - Safe to modify temporarily\n   * - Not safe to store references\n   * - Useful for one-off calculations\n   * @readonly\n   * @returns A fresh identity matrix for temporary use\n   * @see {@link Matrix.IDENTITY} For immutable identity matrix\n   * @see {@link Matrix.identity} For resetting matrices\n   */\n  static get shared() {\n    return tempMatrix.identity();\n  }\n}\nconst tempMatrix = new Matrix();\nconst identityMatrix = new Matrix();\n\nexport { Matrix };\n//# sourceMappingURL=Matrix.mjs.map\n","import { deprecation, v8_0_0 } from '../../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../../view/ViewContainer.mjs';\nimport { GraphicsContext } from './GraphicsContext.mjs';\n\n\"use strict\";\nclass Graphics extends ViewContainer {\n  /**\n   * Creates a new Graphics object.\n   * @param options - Options for the Graphics.\n   */\n  constructor(options) {\n    if (options instanceof GraphicsContext) {\n      options = { context: options };\n    }\n    const { context, roundPixels, ...rest } = options || {};\n    super({\n      label: \"Graphics\",\n      ...rest\n    });\n    /** @internal */\n    this.renderPipeId = \"graphics\";\n    if (!context) {\n      this._context = this._ownedContext = new GraphicsContext();\n    } else {\n      this._context = context;\n    }\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.didViewUpdate = true;\n    this.allowChildren = false;\n    this.roundPixels = roundPixels ?? false;\n  }\n  set context(context) {\n    if (context === this._context)\n      return;\n    this._context.off(\"update\", this.onViewUpdate, this);\n    this._context = context;\n    this._context.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  /**\n   * The underlying graphics context used for drawing operations.\n   * Controls how shapes and paths are rendered.\n   * @example\n   * ```ts\n   * // Create a shared context\n   * const sharedContext = new GraphicsContext();\n   *\n   * // Create graphics objects sharing the same context\n   * const graphics1 = new Graphics();\n   * const graphics2 = new Graphics();\n   *\n   * // Assign shared context\n   * graphics1.context = sharedContext;\n   * graphics2.context = sharedContext;\n   *\n   * // Both graphics will show the same shapes\n   * sharedContext\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   * ```\n   * @see {@link GraphicsContext} For drawing operations\n   * @see {@link GraphicsOptions} For context configuration\n   */\n  get context() {\n    return this._context;\n  }\n  /**\n   * The local bounds of the graphics object.\n   * Returns the boundaries after all graphical operations but before any transforms.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw a shape\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Get bounds information\n   * const bounds = graphics.bounds;\n   * console.log(bounds.width);  // 100\n   * console.log(bounds.height); // 100\n   * ```\n   * @readonly\n   * @see {@link Bounds} For bounds operations\n   * @see {@link Container#getBounds} For transformed bounds\n   */\n  get bounds() {\n    return this._context.bounds;\n  }\n  /**\n   * Graphics objects do not need to update their bounds as the context handles this.\n   * @private\n   */\n  updateBounds() {\n  }\n  /**\n   * Checks if the object contains the given point.\n   * Returns true if the point lies within the Graphics object's rendered area.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw a shape\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Check point intersection\n   * if (graphics.containsPoint({ x: 50, y: 50 })) {\n   *     console.log('Point is inside rectangle!');\n   * }\n   * ```\n   * @param point - The point to check in local coordinates\n   * @returns True if the point is inside the Graphics object\n   * @see {@link Graphics#bounds} For bounding box checks\n   * @see {@link PointData} For point data structure\n   */\n  containsPoint(point) {\n    return this._context.containsPoint(point);\n  }\n  /**\n   * Destroys this graphics renderable and optionally its context.\n   * @param options - Options parameter. A boolean will act as if all options\n   *\n   * If the context was created by this graphics and `destroy(false)` or `destroy()` is called\n   * then the context will still be destroyed.\n   *\n   * If you want to explicitly not destroy this context that this graphics created,\n   * then you should pass destroy({ context: false })\n   *\n   * If the context was passed in as an argument to the constructor then it will not be destroyed\n   * @example\n   * ```ts\n   * // Destroy the graphics and its context\n   * graphics.destroy();\n   * graphics.destroy(true);\n   * graphics.destroy({ context: true, texture: true, textureSource: true });\n   * ```\n   */\n  destroy(options) {\n    if (this._ownedContext && !options) {\n      this._ownedContext.destroy(options);\n    } else if (options === true || options?.context === true) {\n      this._context.destroy(options);\n    }\n    this._ownedContext = null;\n    this._context = null;\n    super.destroy(options);\n  }\n  _callContextMethod(method, args) {\n    this.context[method](...args);\n    return this;\n  }\n  // --------------------------------------- GraphicsContext methods ---------------------------------------\n  /**\n   * Sets the current fill style of the graphics context.\n   * The fill style can be a color, gradient, pattern, or a complex style object.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color fill\n   * graphics\n   *     .setFillStyle({ color: 0xff0000 }) // Red fill\n   *     .rect(0, 0, 100, 100)\n   *     .fill();\n   *\n   * // Gradient fill\n   * const gradient = new FillGradient({\n   *    end: { x: 1, y: 0 },\n   *    colorStops: [\n   *         { offset: 0, color: 0xff0000 }, // Red at start\n   *         { offset: 0.5, color: 0x00ff00 }, // Green at middle\n   *         { offset: 1, color: 0x0000ff }, // Blue at end\n   *    ],\n   * });\n   *\n   * graphics\n   *     .setFillStyle(gradient)\n   *     .circle(100, 100, 50)\n   *     .fill();\n   *\n   * // Pattern fill\n   * const pattern = new FillPattern(texture);\n   * graphics\n   *     .setFillStyle({\n   *         fill: pattern,\n   *         alpha: 0.5\n   *     })\n   *     .rect(0, 0, 200, 200)\n   *     .fill();\n   * ```\n   * @param {FillInput} args - The fill style to apply\n   * @returns The Graphics instance for chaining\n   * @see {@link FillStyle} For fill style options\n   * @see {@link FillGradient} For gradient fills\n   * @see {@link FillPattern} For pattern fills\n   */\n  setFillStyle(...args) {\n    return this._callContextMethod(\"setFillStyle\", args);\n  }\n  /**\n   * Sets the current stroke style of the graphics context.\n   * Similar to fill styles, stroke styles can encompass colors, gradients, patterns, or more detailed configurations.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color stroke\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 2,\n   *         color: 0x000000\n   *     })\n   *     .rect(0, 0, 100, 100)\n   *     .stroke();\n   *\n   * // Complex stroke style\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 4,\n   *         color: 0xff0000,\n   *         alpha: 0.5,\n   *         join: 'round',\n   *         cap: 'round',\n   *         alignment: 0.5\n   *     })\n   *     .circle(100, 100, 50)\n   *     .stroke();\n   *\n   * // Gradient stroke\n   * const gradient = new FillGradient({\n   *    end: { x: 1, y: 0 },\n   *    colorStops: [\n   *         { offset: 0, color: 0xff0000 }, // Red at start\n   *         { offset: 0.5, color: 0x00ff00 }, // Green at middle\n   *         { offset: 1, color: 0x0000ff }, // Blue at end\n   *    ],\n   * });\n   *\n   * graphics\n   *     .setStrokeStyle({\n   *         width: 10,\n   *         fill: gradient\n   *     })\n   *     .poly([0,0, 100,50, 0,100])\n   *     .stroke();\n   * ```\n   * @param {StrokeInput} args - The stroke style to apply\n   * @returns The Graphics instance for chaining\n   * @see {@link StrokeStyle} For stroke style options\n   * @see {@link FillGradient} For gradient strokes\n   * @see {@link FillPattern} For pattern strokes\n   */\n  setStrokeStyle(...args) {\n    return this._callContextMethod(\"setStrokeStyle\", args);\n  }\n  fill(...args) {\n    return this._callContextMethod(\"fill\", args);\n  }\n  /**\n   * Strokes the current path with the current stroke style or specified style.\n   * Outlines the shape using the stroke settings.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Stroke with direct color\n   * graphics\n   *     .circle(50, 50, 25)\n   *     .stroke({\n   *         width: 2,\n   *         color: 0xff0000\n   *     }); // 2px red stroke\n   *\n   * // Fill with texture\n   * graphics\n   *    .rect(0, 0, 100, 100)\n   *    .stroke(myTexture); // Fill with texture\n   *\n   * // Stroke with gradient\n   * const gradient = new FillGradient({\n   *     end: { x: 1, y: 0 },\n   *     colorStops: [\n   *         { offset: 0, color: 0xff0000 },\n   *         { offset: 0.5, color: 0x00ff00 },\n   *         { offset: 1, color: 0x0000ff },\n   *     ],\n   * });\n   *\n   * graphics\n   *     .rect(0, 0, 100, 100)\n   *     .stroke({\n   *         width: 4,\n   *         fill: gradient,\n   *         alignment: 0.5,\n   *         join: 'round'\n   *     });\n   * ```\n   * @param {StrokeStyle} args - Optional stroke style to apply. Can be:\n   * - A stroke style object with width, color, etc.\n   * - A gradient\n   * - A pattern\n   * If omitted, uses current stroke style.\n   * @returns The Graphics instance for chaining\n   * @see {@link StrokeStyle} For stroke style options\n   * @see {@link FillGradient} For gradient strokes\n   * @see {@link setStrokeStyle} For setting default stroke style\n   */\n  stroke(...args) {\n    return this._callContextMethod(\"stroke\", args);\n  }\n  texture(...args) {\n    return this._callContextMethod(\"texture\", args);\n  }\n  /**\n   * Resets the current path. Any previous path and its commands are discarded and a new path is\n   * started. This is typically called before beginning a new shape or series of drawing commands.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   * graphics\n   *     .circle(150, 150, 50)\n   *     .fill({ color: 0x00ff00 })\n   *     .beginPath() // Starts a new path\n   *     .circle(250, 150, 50)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @returns The Graphics instance for chaining\n   * @see {@link Graphics#moveTo} For starting a new subpath\n   * @see {@link Graphics#closePath} For closing the current path\n   */\n  beginPath() {\n    return this._callContextMethod(\"beginPath\", []);\n  }\n  /**\n   * Applies a cutout to the last drawn shape. This is used to create holes or complex shapes by\n   * subtracting a path from the previously drawn path.\n   *\n   * If a hole is not completely in a shape, it will fail to cut correctly.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw outer circle\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 });\n   *     .circle(100, 100, 25) // Inner circle\n   *     .cut() // Cuts out the inner circle from the outer circle\n   * ```\n   */\n  cut() {\n    return this._callContextMethod(\"cut\", []);\n  }\n  arc(...args) {\n    return this._callContextMethod(\"arc\", args);\n  }\n  arcTo(...args) {\n    return this._callContextMethod(\"arcTo\", args);\n  }\n  arcToSvg(...args) {\n    return this._callContextMethod(\"arcToSvg\", args);\n  }\n  bezierCurveTo(...args) {\n    return this._callContextMethod(\"bezierCurveTo\", args);\n  }\n  /**\n   * Closes the current path by drawing a straight line back to the start point.\n   *\n   * This is useful for completing shapes and ensuring they are properly closed for fills.\n   * @example\n   * ```ts\n   * // Create a triangle with closed path\n   * const graphics = new Graphics();\n   * graphics\n   *     .moveTo(50, 50)\n   *     .lineTo(100, 100)\n   *     .lineTo(0, 100)\n   *     .closePath()\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#beginPath} For starting a new path\n   * @see {@link Graphics#fill} For filling closed paths\n   * @see {@link Graphics#stroke} For stroking paths\n   */\n  closePath() {\n    return this._callContextMethod(\"closePath\", []);\n  }\n  ellipse(...args) {\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  circle(...args) {\n    return this._callContextMethod(\"circle\", args);\n  }\n  path(...args) {\n    return this._callContextMethod(\"path\", args);\n  }\n  lineTo(...args) {\n    return this._callContextMethod(\"lineTo\", args);\n  }\n  moveTo(...args) {\n    return this._callContextMethod(\"moveTo\", args);\n  }\n  quadraticCurveTo(...args) {\n    return this._callContextMethod(\"quadraticCurveTo\", args);\n  }\n  rect(...args) {\n    return this._callContextMethod(\"rect\", args);\n  }\n  roundRect(...args) {\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  poly(...args) {\n    return this._callContextMethod(\"poly\", args);\n  }\n  regularPoly(...args) {\n    return this._callContextMethod(\"regularPoly\", args);\n  }\n  roundPoly(...args) {\n    return this._callContextMethod(\"roundPoly\", args);\n  }\n  roundShape(...args) {\n    return this._callContextMethod(\"roundShape\", args);\n  }\n  filletRect(...args) {\n    return this._callContextMethod(\"filletRect\", args);\n  }\n  chamferRect(...args) {\n    return this._callContextMethod(\"chamferRect\", args);\n  }\n  star(...args) {\n    return this._callContextMethod(\"star\", args);\n  }\n  svg(...args) {\n    return this._callContextMethod(\"svg\", args);\n  }\n  restore(...args) {\n    return this._callContextMethod(\"restore\", args);\n  }\n  /**\n   * Saves the current graphics state onto a stack. The state includes:\n   * - Current transformation matrix\n   * - Current fill style\n   * - Current stroke style\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Save state before complex operations\n   * graphics.save();\n   *\n   * // Create transformed and styled shape\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .rotateTransform(Math.PI / 4)\n   *     .setFillStyle({\n   *         color: 0xff0000,\n   *         alpha: 0.5\n   *     })\n   *     .rect(-25, -25, 50, 50)\n   *     .fill();\n   *\n   * // Restore to original state\n   * graphics.restore();\n   *\n   * // Continue drawing with previous state\n   * graphics\n   *     .circle(50, 50, 25)\n   *     .fill();\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#restore} For restoring the saved state\n   * @see {@link Graphics#setTransform} For setting transformations\n   */\n  save() {\n    return this._callContextMethod(\"save\", []);\n  }\n  /**\n   * Returns the current transformation matrix of the graphics context.\n   * This matrix represents all accumulated transformations including translate, scale, and rotate.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Apply some transformations\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .rotateTransform(Math.PI / 4);\n   *\n   * // Get the current transform matrix\n   * const matrix = graphics.getTransform();\n   * console.log(matrix.tx, matrix.ty); // 100, 100\n   *\n   * // Use the matrix for other operations\n   * graphics\n   *     .setTransform(matrix)\n   *     .circle(0, 0, 50)\n   *     .fill({ color: 0xff0000 });\n   * ```\n   * @returns The current transformation matrix.\n   * @see {@link Graphics#setTransform} For setting the transform matrix\n   * @see {@link Matrix} For matrix operations\n   */\n  getTransform() {\n    return this.context.getTransform();\n  }\n  /**\n   * Resets the current transformation matrix to the identity matrix, effectively removing\n   * any transformations (rotation, scaling, translation) previously applied.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Apply transformations\n   * graphics\n   *     .translateTransform(100, 100)\n   *     .scaleTransform(2, 2)\n   *     .circle(0, 0, 25)\n   *     .fill({ color: 0xff0000 });\n   * // Reset transform to default state\n   * graphics\n   *     .resetTransform()\n   *     .circle(50, 50, 25) // Will draw at actual coordinates\n   *     .fill({ color: 0x00ff00 });\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#getTransform} For getting the current transform\n   * @see {@link Graphics#setTransform} For setting a specific transform\n   * @see {@link Graphics#save} For saving the current transform state\n   * @see {@link Graphics#restore} For restoring a previous transform state\n   */\n  resetTransform() {\n    return this._callContextMethod(\"resetTransform\", []);\n  }\n  rotateTransform(...args) {\n    return this._callContextMethod(\"rotate\", args);\n  }\n  scaleTransform(...args) {\n    return this._callContextMethod(\"scale\", args);\n  }\n  setTransform(...args) {\n    return this._callContextMethod(\"setTransform\", args);\n  }\n  transform(...args) {\n    return this._callContextMethod(\"transform\", args);\n  }\n  translateTransform(...args) {\n    return this._callContextMethod(\"translate\", args);\n  }\n  /**\n   * Clears all drawing commands from the graphics context, effectively resetting it.\n   * This includes clearing the current path, fill style, stroke style, and transformations.\n   *\n   * > [!NOTE] Graphics objects are not designed to be continuously cleared and redrawn.\n   * > Instead, they are intended to be used for static or semi-static graphics that\n   * > can be redrawn as needed. Frequent clearing and redrawing may lead to performance issues.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Draw some shapes\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 })\n   *     .rect(200, 100, 100, 50)\n   *     .fill({ color: 0x00ff00 });\n   *\n   * // Clear all graphics\n   * graphics.clear();\n   *\n   * // Start fresh with new shapes\n   * graphics\n   *     .circle(150, 150, 30)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @returns The Graphics instance for method chaining\n   * @see {@link Graphics#beginPath} For starting a new path without clearing styles\n   * @see {@link Graphics#save} For saving the current state\n   * @see {@link Graphics#restore} For restoring a previous state\n   */\n  clear() {\n    return this._callContextMethod(\"clear\", []);\n  }\n  /**\n   * Gets or sets the current fill style for the graphics context. The fill style determines\n   * how shapes are filled when using the fill() method.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic color fill\n   * graphics.fillStyle = {\n   *     color: 0xff0000,  // Red\n   *     alpha: 1\n   * };\n   *\n   * // Using gradients\n   * const gradient = new FillGradient({\n   *     end: { x: 0, y: 1 }, // Vertical gradient\n   *     stops: [\n   *         { offset: 0, color: 0xff0000, alpha: 1 }, // Start color\n   *         { offset: 1, color: 0x0000ff, alpha: 1 }  // End color\n   *     ]\n   * });\n   *\n   * graphics.fillStyle = {\n   *     fill: gradient,\n   *     alpha: 0.8\n   * };\n   *\n   * // Using patterns\n   * graphics.fillStyle = {\n   *     texture: myTexture,\n   *     alpha: 1,\n   *     matrix: new Matrix()\n   *         .scale(0.5, 0.5)\n   *         .rotate(Math.PI / 4)\n   * };\n   * ```\n   * @type {ConvertedFillStyle}\n   * @see {@link FillStyle} For all available fill style options\n   * @see {@link FillGradient} For creating gradient fills\n   * @see {@link Graphics#fill} For applying the fill to paths\n   */\n  get fillStyle() {\n    return this._context.fillStyle;\n  }\n  set fillStyle(value) {\n    this._context.fillStyle = value;\n  }\n  /**\n   * Gets or sets the current stroke style for the graphics context. The stroke style determines\n   * how paths are outlined when using the stroke() method.\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Basic stroke style\n   * graphics.strokeStyle = {\n   *     width: 2,\n   *     color: 0xff0000,\n   *     alpha: 1\n   * };\n   *\n   * // Using with gradients\n   * const gradient = new FillGradient({\n   *   end: { x: 0, y: 1 },\n   *   stops: [\n   *       { offset: 0, color: 0xff0000, alpha: 1 },\n   *       { offset: 1, color: 0x0000ff, alpha: 1 }\n   *   ]\n   * });\n   *\n   * graphics.strokeStyle = {\n   *     width: 4,\n   *     fill: gradient,\n   *     alignment: 0.5,\n   *     join: 'round',\n   *     cap: 'round'\n   * };\n   *\n   * // Complex stroke settings\n   * graphics.strokeStyle = {\n   *     width: 6,\n   *     color: 0x00ff00,\n   *     alpha: 0.5,\n   *     join: 'miter',\n   *     miterLimit: 10,\n   * };\n   * ```\n   * @see {@link StrokeStyle} For all available stroke style options\n   * @see {@link Graphics#stroke} For applying the stroke to paths\n   */\n  get strokeStyle() {\n    return this._context.strokeStyle;\n  }\n  set strokeStyle(value) {\n    this._context.strokeStyle = value;\n  }\n  /**\n   * Creates a new Graphics object that copies the current graphics content.\n   * The clone can either share the same context (shallow clone) or have its own independent\n   * context (deep clone).\n   * @example\n   * ```ts\n   * const graphics = new Graphics();\n   *\n   * // Create original graphics content\n   * graphics\n   *     .circle(100, 100, 50)\n   *     .fill({ color: 0xff0000 });\n   *\n   * // Create a shallow clone (shared context)\n   * const shallowClone = graphics.clone();\n   *\n   * // Changes to original affect the clone\n   * graphics\n   *     .circle(200, 100, 30)\n   *     .fill({ color: 0x00ff00 });\n   *\n   * // Create a deep clone (independent context)\n   * const deepClone = graphics.clone(true);\n   *\n   * // Modify deep clone independently\n   * deepClone\n   *     .translateTransform(100, 100)\n   *     .circle(0, 0, 40)\n   *     .fill({ color: 0x0000ff });\n   * ```\n   * @param deep - Whether to create a deep clone of the graphics object.\n   *              If false (default), the context will be shared between objects.\n   *              If true, creates an independent copy of the context.\n   * @returns A new Graphics instance with either shared or copied context\n   * @see {@link Graphics#context} For accessing the underlying graphics context\n   * @see {@link GraphicsContext} For understanding the shared context behavior\n   */\n  clone(deep = false) {\n    if (deep) {\n      return new Graphics(this._context.clone());\n    }\n    this._ownedContext = null;\n    const clone = new Graphics(this._context);\n    return clone;\n  }\n  // -------- v7 deprecations ---------\n  /**\n   * @param width\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#setStrokeStyle} instead\n   */\n  lineStyle(width, color, alpha) {\n    deprecation(v8_0_0, \"Graphics#lineStyle is no longer needed. Use Graphics#setStrokeStyle to set the stroke style.\");\n    const strokeStyle = {};\n    width && (strokeStyle.width = width);\n    color && (strokeStyle.color = color);\n    alpha && (strokeStyle.alpha = alpha);\n    this.context.strokeStyle = strokeStyle;\n    return this;\n  }\n  /**\n   * @param color\n   * @param alpha\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  beginFill(color, alpha) {\n    deprecation(v8_0_0, \"Graphics#beginFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    const fillStyle = {};\n    if (color !== void 0)\n      fillStyle.color = color;\n    if (alpha !== void 0)\n      fillStyle.alpha = alpha;\n    this.context.fillStyle = fillStyle;\n    return this;\n  }\n  /**\n   * @deprecated since 8.0.0 Use {@link Graphics#fill} instead\n   */\n  endFill() {\n    deprecation(v8_0_0, \"Graphics#endFill is no longer needed. Use Graphics#fill to fill the shape with the desired style.\");\n    this.context.fill();\n    const strokeStyle = this.context.strokeStyle;\n    if (strokeStyle.width !== GraphicsContext.defaultStrokeStyle.width || strokeStyle.color !== GraphicsContext.defaultStrokeStyle.color || strokeStyle.alpha !== GraphicsContext.defaultStrokeStyle.alpha) {\n      this.context.stroke();\n    }\n    return this;\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#circle} instead\n   */\n  drawCircle(...args) {\n    deprecation(v8_0_0, \"Graphics#drawCircle has been renamed to Graphics#circle\");\n    return this._callContextMethod(\"circle\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#ellipse} instead\n   */\n  drawEllipse(...args) {\n    deprecation(v8_0_0, \"Graphics#drawEllipse has been renamed to Graphics#ellipse\");\n    return this._callContextMethod(\"ellipse\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#poly} instead\n   */\n  drawPolygon(...args) {\n    deprecation(v8_0_0, \"Graphics#drawPolygon has been renamed to Graphics#poly\");\n    return this._callContextMethod(\"poly\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#rect} instead\n   */\n  drawRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRect has been renamed to Graphics#rect\");\n    return this._callContextMethod(\"rect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#roundRect} instead\n   */\n  drawRoundedRect(...args) {\n    deprecation(v8_0_0, \"Graphics#drawRoundedRect has been renamed to Graphics#roundRect\");\n    return this._callContextMethod(\"roundRect\", args);\n  }\n  /**\n   * @param {...any} args\n   * @deprecated since 8.0.0 Use {@link Graphics#star} instead\n   */\n  drawStar(...args) {\n    deprecation(v8_0_0, \"Graphics#drawStar has been renamed to Graphics#star\");\n    return this._callContextMethod(\"star\", args);\n  }\n}\n\nexport { Graphics };\n//# sourceMappingURL=Graphics.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { matrixPool, boundsPool } from './utils/matrixAndBoundsPool.mjs';\n\n\"use strict\";\nfunction getGlobalBounds(target, skipUpdateTransform, bounds) {\n  bounds.clear();\n  let parentTransform;\n  let pooledMatrix;\n  if (target.parent) {\n    if (!skipUpdateTransform) {\n      pooledMatrix = matrixPool.get().identity();\n      parentTransform = updateTransformBackwards(target, pooledMatrix);\n    } else {\n      parentTransform = target.parent.worldTransform;\n    }\n  } else {\n    parentTransform = Matrix.IDENTITY;\n  }\n  _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform);\n  if (pooledMatrix) {\n    matrixPool.return(pooledMatrix);\n  }\n  if (!bounds.isValid) {\n    bounds.set(0, 0, 0, 0);\n  }\n  return bounds;\n}\nfunction _getGlobalBounds(target, bounds, parentTransform, skipUpdateTransform) {\n  if (!target.visible || !target.measurable)\n    return;\n  let worldTransform;\n  if (!skipUpdateTransform) {\n    target.updateLocalTransform();\n    worldTransform = matrixPool.get();\n    worldTransform.appendFrom(target.localTransform, parentTransform);\n  } else {\n    worldTransform = target.worldTransform;\n  }\n  const parentBounds = bounds;\n  const preserveBounds = !!target.effects.length;\n  if (preserveBounds) {\n    bounds = boundsPool.get().clear();\n  }\n  if (target.boundsArea) {\n    bounds.addRect(target.boundsArea, worldTransform);\n  } else {\n    const renderableBounds = target.bounds;\n    if (renderableBounds && !renderableBounds.isEmpty()) {\n      bounds.matrix = worldTransform;\n      bounds.addBounds(renderableBounds);\n    }\n    for (let i = 0; i < target.children.length; i++) {\n      _getGlobalBounds(target.children[i], bounds, worldTransform, skipUpdateTransform);\n    }\n  }\n  if (preserveBounds) {\n    for (let i = 0; i < target.effects.length; i++) {\n      target.effects[i].addBounds?.(bounds);\n    }\n    parentBounds.addBounds(bounds, Matrix.IDENTITY);\n    boundsPool.return(bounds);\n  }\n  if (!skipUpdateTransform) {\n    matrixPool.return(worldTransform);\n  }\n}\nfunction updateTransformBackwards(target, parentTransform) {\n  const parent = target.parent;\n  if (parent) {\n    updateTransformBackwards(parent, parentTransform);\n    parent.updateLocalTransform();\n    parentTransform.append(parent.localTransform);\n  }\n  return parentTransform;\n}\n\nexport { getGlobalBounds, updateTransformBackwards };\n//# sourceMappingURL=getGlobalBounds.mjs.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Note = void 0;\n/**\n * Convert a MIDI note into a pitch.\n */\nfunction midiToPitch(midi) {\n    var octave = Math.floor(midi / 12) - 1;\n    return midiToPitchClass(midi) + octave.toString();\n}\n/**\n * Convert a MIDI note to a pitch class (just the pitch no octave).\n */\nfunction midiToPitchClass(midi) {\n    var scaleIndexToNote = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\n    var note = midi % 12;\n    return scaleIndexToNote[note];\n}\n/**\n * Convert a pitch class to a MIDI note.\n */\nfunction pitchClassToMidi(pitch) {\n    var scaleIndexToNote = [\"C\", \"C#\", \"D\", \"D#\", \"E\", \"F\", \"F#\", \"G\", \"G#\", \"A\", \"A#\", \"B\"];\n    return scaleIndexToNote.indexOf(pitch);\n}\n/**\n * Convert a pitch to a MIDI number.\n */\n// tslint:disable-next-line: only-arrow-functions typedef\nvar pitchToMidi = (function () {\n    var regexp = /^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i;\n    var noteToScaleIndex = {\n        // tslint:disable-next-line: object-literal-sort-keys\n        cbb: -2, cb: -1, c: 0, \"c#\": 1, cx: 2,\n        dbb: 0, db: 1, d: 2, \"d#\": 3, dx: 4,\n        ebb: 2, eb: 3, e: 4, \"e#\": 5, ex: 6,\n        fbb: 3, fb: 4, f: 5, \"f#\": 6, fx: 7,\n        gbb: 5, gb: 6, g: 7, \"g#\": 8, gx: 9,\n        abb: 7, ab: 8, a: 9, \"a#\": 10, ax: 11,\n        bbb: 9, bb: 10, b: 11, \"b#\": 12, bx: 13,\n    };\n    return function (note) {\n        var split = regexp.exec(note);\n        var pitch = split[1];\n        var octave = split[2];\n        var index = noteToScaleIndex[pitch.toLowerCase()];\n        return index + (parseInt(octave, 10) + 1) * 12;\n    };\n}());\nvar privateHeaderMap = new WeakMap();\n/**\n * A Note consists of a `noteOn` and `noteOff` event.\n */\nvar Note = /** @class */ (function () {\n    function Note(noteOn, noteOff, header) {\n        privateHeaderMap.set(this, header);\n        this.midi = noteOn.midi;\n        this.velocity = noteOn.velocity;\n        this.noteOffVelocity = noteOff.velocity;\n        this.ticks = noteOn.ticks;\n        this.durationTicks = noteOff.ticks - noteOn.ticks;\n    }\n    Object.defineProperty(Note.prototype, \"name\", {\n        /**\n         * The note name and octave in scientific pitch notation, e.g. \"C4\".\n         */\n        get: function () {\n            return midiToPitch(this.midi);\n        },\n        set: function (n) {\n            this.midi = pitchToMidi(n);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"octave\", {\n        /**\n         * The notes octave number.\n         */\n        get: function () {\n            return Math.floor(this.midi / 12) - 1;\n        },\n        set: function (o) {\n            var diff = o - this.octave;\n            this.midi += diff * 12;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"pitch\", {\n        /**\n         * The pitch class name. e.g. \"A\".\n         */\n        get: function () {\n            return midiToPitchClass(this.midi);\n        },\n        set: function (p) {\n            this.midi = 12 * (this.octave + 1) + pitchClassToMidi(p);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"duration\", {\n        /**\n         * The duration of the segment in seconds.\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToSeconds(this.ticks + this.durationTicks) - header.ticksToSeconds(this.ticks);\n        },\n        set: function (d) {\n            var header = privateHeaderMap.get(this);\n            var noteEndTicks = header.secondsToTicks(this.time + d);\n            this.durationTicks = noteEndTicks - this.ticks;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"time\", {\n        /**\n         * The time of the event in seconds.\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToSeconds(this.ticks);\n        },\n        set: function (t) {\n            var header = privateHeaderMap.get(this);\n            this.ticks = header.secondsToTicks(t);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Note.prototype, \"bars\", {\n        /**\n         * The number of measures (and partial measures) to this beat.\n         * Takes into account time signature changes.\n         * @readonly\n         */\n        get: function () {\n            var header = privateHeaderMap.get(this);\n            return header.ticksToMeasures(this.ticks);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Note.prototype.toJSON = function () {\n        return {\n            duration: this.duration,\n            durationTicks: this.durationTicks,\n            midi: this.midi,\n            name: this.name,\n            ticks: this.ticks,\n            time: this.time,\n            velocity: this.velocity,\n        };\n    };\n    return Note;\n}());\nexports.Note = Note;\n//# sourceMappingURL=Note.js.map","import { DOMAdapter } from '../../environment/adapter.mjs';\nimport { nextPow2 } from '../../maths/misc/pow2.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nlet _internalCanvas = null;\nlet _internalContext = null;\nfunction ensureInternalCanvas(width, height) {\n  if (!_internalCanvas) {\n    _internalCanvas = DOMAdapter.get().createCanvas(256, 128);\n    _internalContext = _internalCanvas.getContext(\"2d\", { willReadFrequently: true });\n    _internalContext.globalCompositeOperation = \"copy\";\n    _internalContext.globalAlpha = 1;\n  }\n  if (_internalCanvas.width < width || _internalCanvas.height < height) {\n    _internalCanvas.width = nextPow2(width);\n    _internalCanvas.height = nextPow2(height);\n  }\n}\nfunction checkRow(data, width, y) {\n  for (let x = 0, index = 4 * y * width; x < width; ++x, index += 4) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction checkColumn(data, width, x, top, bottom) {\n  const stride = 4 * width;\n  for (let y = top, index = top * stride + 4 * x; y <= bottom; ++y, index += stride) {\n    if (data[index + 3] !== 0)\n      return false;\n  }\n  return true;\n}\nfunction getCanvasBoundingBox(...args) {\n  let options = args[0];\n  if (!options.canvas) {\n    options = { canvas: args[0], resolution: args[1] };\n  }\n  const { canvas } = options;\n  const resolution = Math.min(options.resolution ?? 1, 1);\n  const width = options.width ?? canvas.width;\n  const height = options.height ?? canvas.height;\n  let output = options.output;\n  ensureInternalCanvas(width, height);\n  if (!_internalContext) {\n    throw new TypeError(\"Failed to get canvas 2D context\");\n  }\n  _internalContext.drawImage(\n    canvas,\n    0,\n    0,\n    width,\n    height,\n    0,\n    0,\n    width * resolution,\n    height * resolution\n  );\n  const imageData = _internalContext.getImageData(0, 0, width, height);\n  const data = imageData.data;\n  let left = 0;\n  let top = 0;\n  let right = width - 1;\n  let bottom = height - 1;\n  while (top < height && checkRow(data, width, top))\n    ++top;\n  if (top === height)\n    return Rectangle.EMPTY;\n  while (checkRow(data, width, bottom))\n    --bottom;\n  while (checkColumn(data, width, left, top, bottom))\n    ++left;\n  while (checkColumn(data, width, right, top, bottom))\n    --right;\n  ++right;\n  ++bottom;\n  _internalContext.globalCompositeOperation = \"source-over\";\n  _internalContext.strokeRect(left, top, right - left, bottom - top);\n  _internalContext.globalCompositeOperation = \"copy\";\n  output ?? (output = new Rectangle());\n  output.set(left / resolution, top / resolution, (right - left) / resolution, (bottom - top) / resolution);\n  return output;\n}\n\nexport { getCanvasBoundingBox };\n//# sourceMappingURL=getCanvasBoundingBox.mjs.map\n","import { Color } from '../../../color/Color.mjs';\nimport { Rectangle } from '../../../maths/shapes/Rectangle.mjs';\nimport { CanvasPool } from '../../../rendering/renderers/shared/texture/CanvasPool.mjs';\nimport { getCanvasBoundingBox } from '../../../utils/canvas/getCanvasBoundingBox.mjs';\nimport { CanvasTextMetrics } from './CanvasTextMetrics.mjs';\nimport { fontStringFromTextStyle } from './utils/fontStringFromTextStyle.mjs';\nimport { getCanvasFillStyle } from './utils/getCanvasFillStyle.mjs';\n\n\"use strict\";\nconst tempRect = new Rectangle();\nclass CanvasTextGeneratorClass {\n  /**\n   * Creates a canvas with the specified text rendered to it.\n   *\n   * Generates a canvas of appropriate size, renders the text with the provided style,\n   * and returns both the canvas/context and a Rectangle representing the text bounds.\n   *\n   * When trim is enabled in the style, the frame will represent the bounds of the\n   * non-transparent pixels, which can be smaller than the full canvas.\n   * @param options - The options for generating the text canvas\n   * @param options.text - The text to render\n   * @param options.style - The style to apply to the text\n   * @param options.resolution - The resolution of the canvas (defaults to 1)\n   * @param options.padding\n   * @returns An object containing the canvas/context and the frame (bounds) of the text\n   */\n  getCanvasAndContext(options) {\n    const { text, style, resolution = 1 } = options;\n    const padding = style._getFinalPadding();\n    const measured = CanvasTextMetrics.measureText(text || \" \", style);\n    const width = Math.ceil(Math.ceil(Math.max(1, measured.width) + padding * 2) * resolution);\n    const height = Math.ceil(Math.ceil(Math.max(1, measured.height) + padding * 2) * resolution);\n    const canvasAndContext = CanvasPool.getOptimalCanvasAndContext(width, height);\n    this._renderTextToCanvas(text, style, padding, resolution, canvasAndContext);\n    const frame = style.trim ? getCanvasBoundingBox({ canvas: canvasAndContext.canvas, width, height, resolution: 1, output: tempRect }) : tempRect.set(0, 0, width, height);\n    return {\n      canvasAndContext,\n      frame\n    };\n  }\n  /**\n   * Returns a canvas and context to the pool.\n   *\n   * This should be called when you're done with the canvas to allow reuse\n   * and prevent memory leaks.\n   * @param canvasAndContext - The canvas and context to return to the pool\n   */\n  returnCanvasAndContext(canvasAndContext) {\n    CanvasPool.returnCanvasAndContext(canvasAndContext);\n  }\n  /**\n   * Renders text to its canvas, and updates its texture.\n   * @param text - The text to render\n   * @param style - The style of the text\n   * @param padding - The padding of the text\n   * @param resolution - The resolution of the text\n   * @param canvasAndContext - The canvas and context to render the text to\n   */\n  _renderTextToCanvas(text, style, padding, resolution, canvasAndContext) {\n    const { canvas, context } = canvasAndContext;\n    const font = fontStringFromTextStyle(style);\n    const measured = CanvasTextMetrics.measureText(text || \" \", style);\n    const lines = measured.lines;\n    const lineHeight = measured.lineHeight;\n    const lineWidths = measured.lineWidths;\n    const maxLineWidth = measured.maxLineWidth;\n    const fontProperties = measured.fontProperties;\n    const height = canvas.height;\n    context.resetTransform();\n    context.scale(resolution, resolution);\n    context.textBaseline = style.textBaseline;\n    if (style._stroke?.width) {\n      const strokeStyle = style._stroke;\n      context.lineWidth = strokeStyle.width;\n      context.miterLimit = strokeStyle.miterLimit;\n      context.lineJoin = strokeStyle.join;\n      context.lineCap = strokeStyle.cap;\n    }\n    context.font = font;\n    let linePositionX;\n    let linePositionY;\n    const passesCount = style.dropShadow ? 2 : 1;\n    for (let i = 0; i < passesCount; ++i) {\n      const isShadowPass = style.dropShadow && i === 0;\n      const dsOffsetText = isShadowPass ? Math.ceil(Math.max(1, height) + padding * 2) : 0;\n      const dsOffsetShadow = dsOffsetText * resolution;\n      if (isShadowPass) {\n        context.fillStyle = \"black\";\n        context.strokeStyle = \"black\";\n        const shadowOptions = style.dropShadow;\n        const dropShadowColor = shadowOptions.color;\n        const dropShadowAlpha = shadowOptions.alpha;\n        context.shadowColor = Color.shared.setValue(dropShadowColor).setAlpha(dropShadowAlpha).toRgbaString();\n        const dropShadowBlur = shadowOptions.blur * resolution;\n        const dropShadowDistance = shadowOptions.distance * resolution;\n        context.shadowBlur = dropShadowBlur;\n        context.shadowOffsetX = Math.cos(shadowOptions.angle) * dropShadowDistance;\n        context.shadowOffsetY = Math.sin(shadowOptions.angle) * dropShadowDistance + dsOffsetShadow;\n      } else {\n        context.fillStyle = style._fill ? getCanvasFillStyle(style._fill, context, measured, padding * 2) : null;\n        if (style._stroke?.width) {\n          const strokePadding = style._stroke.width * 0.5 + padding * 2;\n          context.strokeStyle = getCanvasFillStyle(style._stroke, context, measured, strokePadding);\n        }\n        context.shadowColor = \"black\";\n      }\n      let linePositionYShift = (lineHeight - fontProperties.fontSize) / 2;\n      if (lineHeight - fontProperties.fontSize < 0) {\n        linePositionYShift = 0;\n      }\n      const strokeWidth = style._stroke?.width ?? 0;\n      for (let i2 = 0; i2 < lines.length; i2++) {\n        linePositionX = strokeWidth / 2;\n        linePositionY = strokeWidth / 2 + i2 * lineHeight + fontProperties.ascent + linePositionYShift;\n        if (style.align === \"right\") {\n          linePositionX += maxLineWidth - lineWidths[i2];\n        } else if (style.align === \"center\") {\n          linePositionX += (maxLineWidth - lineWidths[i2]) / 2;\n        }\n        if (style._stroke?.width) {\n          this._drawLetterSpacing(\n            lines[i2],\n            style,\n            canvasAndContext,\n            linePositionX + padding,\n            linePositionY + padding - dsOffsetText,\n            true\n          );\n        }\n        if (style._fill !== void 0) {\n          this._drawLetterSpacing(\n            lines[i2],\n            style,\n            canvasAndContext,\n            linePositionX + padding,\n            linePositionY + padding - dsOffsetText\n          );\n        }\n      }\n    }\n  }\n  /**\n   * Render the text with letter-spacing.\n   *\n   * This method handles rendering text with the correct letter spacing, using either:\n   * 1. Native letter spacing if supported by the browser\n   * 2. Manual letter spacing calculation if not natively supported\n   *\n   * For manual letter spacing, it calculates the position of each character\n   * based on its width and the desired spacing.\n   * @param text - The text to draw\n   * @param style - The text style to apply\n   * @param canvasAndContext - The canvas and context to draw to\n   * @param x - Horizontal position to draw the text\n   * @param y - Vertical position to draw the text\n   * @param isStroke - Whether to render the stroke (true) or fill (false)\n   * @private\n   */\n  _drawLetterSpacing(text, style, canvasAndContext, x, y, isStroke = false) {\n    const { context } = canvasAndContext;\n    const letterSpacing = style.letterSpacing;\n    let useExperimentalLetterSpacing = false;\n    if (CanvasTextMetrics.experimentalLetterSpacingSupported) {\n      if (CanvasTextMetrics.experimentalLetterSpacing) {\n        context.letterSpacing = `${letterSpacing}px`;\n        context.textLetterSpacing = `${letterSpacing}px`;\n        useExperimentalLetterSpacing = true;\n      } else {\n        context.letterSpacing = \"0px\";\n        context.textLetterSpacing = \"0px\";\n      }\n    }\n    if (letterSpacing === 0 || useExperimentalLetterSpacing) {\n      if (isStroke) {\n        context.strokeText(text, x, y);\n      } else {\n        context.fillText(text, x, y);\n      }\n      return;\n    }\n    let currentPosition = x;\n    const stringArray = CanvasTextMetrics.graphemeSegmenter(text);\n    let previousWidth = context.measureText(text).width;\n    let currentWidth = 0;\n    for (let i = 0; i < stringArray.length; ++i) {\n      const currentChar = stringArray[i];\n      if (isStroke) {\n        context.strokeText(currentChar, currentPosition, y);\n      } else {\n        context.fillText(currentChar, currentPosition, y);\n      }\n      let textStr = \"\";\n      for (let j = i + 1; j < stringArray.length; ++j) {\n        textStr += stringArray[j];\n      }\n      currentWidth = context.measureText(textStr).width;\n      currentPosition += previousWidth - currentWidth + letterSpacing;\n      previousWidth = currentWidth;\n    }\n  }\n}\nconst CanvasTextGenerator = new CanvasTextGeneratorClass();\n\nexport { CanvasTextGenerator };\n//# sourceMappingURL=CanvasTextGenerator.mjs.map\n","import { Matrix } from '../../../maths/matrix/Matrix.mjs';\nimport { Rectangle } from '../../../maths/shapes/Rectangle.mjs';\n\n\"use strict\";\nconst defaultMatrix = new Matrix();\nclass Bounds {\n  /**\n   * Creates a new Bounds object.\n   * @param minX - The minimum X coordinate of the bounds.\n   * @param minY - The minimum Y coordinate of the bounds.\n   * @param maxX - The maximum X coordinate of the bounds.\n   * @param maxY - The maximum Y coordinate of the bounds.\n   */\n  constructor(minX = Infinity, minY = Infinity, maxX = -Infinity, maxY = -Infinity) {\n    /**\n     * The minimum X coordinate of the bounds.\n     * Represents the leftmost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set left edge\n     * bounds.minX = 100;\n     * ```\n     * @default Infinity\n     */\n    this.minX = Infinity;\n    /**\n     * The minimum Y coordinate of the bounds.\n     * Represents the topmost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set top edge\n     * bounds.minY = 100;\n     * ```\n     * @default Infinity\n     */\n    this.minY = Infinity;\n    /**\n     * The maximum X coordinate of the bounds.\n     * Represents the rightmost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set right edge\n     * bounds.maxX = 200;\n     * // Get width\n     * const width = bounds.maxX - bounds.minX;\n     * ```\n     * @default -Infinity\n     */\n    this.maxX = -Infinity;\n    /**\n     * The maximum Y coordinate of the bounds.\n     * Represents the bottommost edge of the bounding box.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     * // Set bottom edge\n     * bounds.maxY = 200;\n     * // Get height\n     * const height = bounds.maxY - bounds.minY;\n     * ```\n     * @default -Infinity\n     */\n    this.maxY = -Infinity;\n    /**\n     * The transformation matrix applied to this bounds object.\n     * Used when calculating bounds with transforms.\n     * @example\n     * ```ts\n     * const bounds = new Bounds();\n     *\n     * // Apply translation matrix\n     * bounds.matrix = new Matrix()\n     *     .translate(100, 100);\n     *\n     * // Combine transformations\n     * bounds.matrix = new Matrix()\n     *     .translate(50, 50)\n     *     .rotate(Math.PI / 4)\n     *     .scale(2, 2);\n     *\n     * // Use in bounds calculations\n     * bounds.addFrame(0, 0, 100, 100); // Uses current matrix\n     * bounds.addFrame(0, 0, 100, 100, customMatrix); // Override matrix\n     * ```\n     * @advanced\n     */\n    this.matrix = defaultMatrix;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if bounds are empty, meaning either width or height is zero or negative.\n   * Empty bounds occur when min values exceed max values on either axis.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   *\n   * // Check if newly created bounds are empty\n   * console.log(bounds.isEmpty()); // true, default bounds are empty\n   *\n   * // Add frame and check again\n   * bounds.addFrame(0, 0, 100, 100);\n   * console.log(bounds.isEmpty()); // false, bounds now have area\n   *\n   * // Clear bounds\n   * bounds.clear();\n   * console.log(bounds.isEmpty()); // true, bounds are empty again\n   * ```\n   * @returns True if bounds are empty (have no area)\n   * @see {@link Bounds#clear} For resetting bounds\n   * @see {@link Bounds#isValid} For checking validity\n   */\n  isEmpty() {\n    return this.minX > this.maxX || this.minY > this.maxY;\n  }\n  /**\n   * The bounding rectangle representation of these bounds.\n   * Lazily creates and updates a Rectangle instance based on the current bounds.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Get rectangle representation\n   * const rect = bounds.rectangle;\n   * console.log(rect.x, rect.y, rect.width, rect.height);\n   *\n   * // Use for hit testing\n   * if (bounds.rectangle.contains(mouseX, mouseY)) {\n   *     console.log('Mouse is inside bounds!');\n   * }\n   * ```\n   * @see {@link Rectangle} For rectangle methods\n   * @see {@link Bounds.isEmpty} For bounds validation\n   */\n  get rectangle() {\n    if (!this._rectangle) {\n      this._rectangle = new Rectangle();\n    }\n    const rectangle = this._rectangle;\n    if (this.minX > this.maxX || this.minY > this.maxY) {\n      rectangle.x = 0;\n      rectangle.y = 0;\n      rectangle.width = 0;\n      rectangle.height = 0;\n    } else {\n      rectangle.copyFromBounds(this);\n    }\n    return rectangle;\n  }\n  /**\n   * Clears the bounds and resets all coordinates to their default values.\n   * Resets the transformation matrix back to identity.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * console.log(bounds.isEmpty()); // false\n   * // Clear the bounds\n   * bounds.clear();\n   * console.log(bounds.isEmpty()); // true\n   * ```\n   * @returns This bounds object for chaining\n   */\n  clear() {\n    this.minX = Infinity;\n    this.minY = Infinity;\n    this.maxX = -Infinity;\n    this.maxY = -Infinity;\n    this.matrix = defaultMatrix;\n    return this;\n  }\n  /**\n   * Sets the bounds directly using coordinate values.\n   * Provides a way to set all bounds values at once.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * bounds.set(0, 0, 100, 100);\n   * ```\n   * @param x0 - Left X coordinate of frame\n   * @param y0 - Top Y coordinate of frame\n   * @param x1 - Right X coordinate of frame\n   * @param y1 - Bottom Y coordinate of frame\n   * @see {@link Bounds#addFrame} For matrix-aware bounds setting\n   * @see {@link Bounds#clear} For resetting bounds\n   */\n  set(x0, y0, x1, y1) {\n    this.minX = x0;\n    this.minY = y0;\n    this.maxX = x1;\n    this.maxY = y1;\n  }\n  /**\n   * Adds a rectangular frame to the bounds, optionally transformed by a matrix.\n   * Updates the bounds to encompass the new frame coordinates.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * bounds.addFrame(0, 0, 100, 100);\n   *\n   * // Add transformed frame\n   * const matrix = new Matrix()\n   *     .translate(50, 50)\n   *     .rotate(Math.PI / 4);\n   * bounds.addFrame(0, 0, 100, 100, matrix);\n   * ```\n   * @param x0 - Left X coordinate of frame\n   * @param y0 - Top Y coordinate of frame\n   * @param x1 - Right X coordinate of frame\n   * @param y1 - Bottom Y coordinate of frame\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addRect} For adding Rectangle objects\n   * @see {@link Bounds#addBounds} For adding other Bounds\n   */\n  addFrame(x0, y0, x1, y1, matrix) {\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    let x = a * x0 + c * y0 + tx;\n    let y = b * x0 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y0 + tx;\n    y = b * x1 + d * y0 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x0 + c * y1 + tx;\n    y = b * x0 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    x = a * x1 + c * y1 + tx;\n    y = b * x1 + d * y1 + ty;\n    if (x < minX)\n      minX = x;\n    if (y < minY)\n      minY = y;\n    if (x > maxX)\n      maxX = x;\n    if (y > maxY)\n      maxY = y;\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Adds a rectangle to the bounds, optionally transformed by a matrix.\n   * Updates the bounds to encompass the given rectangle.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * // Add simple rectangle\n   * const rect = new Rectangle(0, 0, 100, 100);\n   * bounds.addRect(rect);\n   *\n   * // Add transformed rectangle\n   * const matrix = new Matrix()\n   *     .translate(50, 50)\n   *     .rotate(Math.PI / 4);\n   * bounds.addRect(rect, matrix);\n   * ```\n   * @param rect - The rectangle to be added\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addFrame} For adding raw coordinates\n   * @see {@link Bounds#addBounds} For adding other bounds\n   */\n  addRect(rect, matrix) {\n    this.addFrame(rect.x, rect.y, rect.x + rect.width, rect.y + rect.height, matrix);\n  }\n  /**\n   * Adds another bounds object to this one, optionally transformed by a matrix.\n   * Expands the bounds to include the given bounds' area.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   *\n   * // Add child bounds\n   * const childBounds = sprite.getBounds();\n   * bounds.addBounds(childBounds);\n   *\n   * // Add transformed bounds\n   * const matrix = new Matrix()\n   *     .scale(2, 2);\n   * bounds.addBounds(childBounds, matrix);\n   * ```\n   * @param bounds - The bounds to be added\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addFrame} For adding raw coordinates\n   * @see {@link Bounds#addRect} For adding rectangles\n   */\n  addBounds(bounds, matrix) {\n    this.addFrame(bounds.minX, bounds.minY, bounds.maxX, bounds.maxY, matrix);\n  }\n  /**\n   * Adds other Bounds as a mask, creating an intersection of the two bounds.\n   * Only keeps the overlapping region between current bounds and mask bounds.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Create mask bounds\n   * const mask = new Bounds();\n   * mask.addFrame(50, 50, 150, 150);\n   * // Apply mask - results in bounds of (50,50,100,100)\n   * bounds.addBoundsMask(mask);\n   * ```\n   * @param mask - The Bounds to use as a mask\n   * @see {@link Bounds#addBounds} For union operation\n   * @see {@link Bounds#fit} For fitting to rectangle\n   */\n  addBoundsMask(mask) {\n    this.minX = this.minX > mask.minX ? this.minX : mask.minX;\n    this.minY = this.minY > mask.minY ? this.minY : mask.minY;\n    this.maxX = this.maxX < mask.maxX ? this.maxX : mask.maxX;\n    this.maxY = this.maxY < mask.maxY ? this.maxY : mask.maxY;\n  }\n  /**\n   * Applies a transformation matrix to the bounds, updating its coordinates.\n   * Transforms all corners of the bounds using the given matrix.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Apply translation\n   * const translateMatrix = new Matrix()\n   *     .translate(50, 50);\n   * bounds.applyMatrix(translateMatrix);\n   * ```\n   * @param matrix - The matrix to apply to the bounds\n   * @see {@link Matrix} For matrix operations\n   * @see {@link Bounds#addFrame} For adding transformed frames\n   */\n  applyMatrix(matrix) {\n    const minX = this.minX;\n    const minY = this.minY;\n    const maxX = this.maxX;\n    const maxY = this.maxY;\n    const { a, b, c, d, tx, ty } = matrix;\n    let x = a * minX + c * minY + tx;\n    let y = b * minX + d * minY + ty;\n    this.minX = x;\n    this.minY = y;\n    this.maxX = x;\n    this.maxY = y;\n    x = a * maxX + c * minY + tx;\n    y = b * maxX + d * minY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * minX + c * maxY + tx;\n    y = b * minX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n    x = a * maxX + c * maxY + tx;\n    y = b * maxX + d * maxY + ty;\n    this.minX = x < this.minX ? x : this.minX;\n    this.minY = y < this.minY ? y : this.minY;\n    this.maxX = x > this.maxX ? x : this.maxX;\n    this.maxY = y > this.maxY ? y : this.maxY;\n  }\n  /**\n   * Resizes the bounds object to fit within the given rectangle.\n   * Clips the bounds if they extend beyond the rectangle's edges.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 200, 200);\n   * // Fit within viewport\n   * const viewport = new Rectangle(50, 50, 100, 100);\n   * bounds.fit(viewport);\n   * // bounds are now (50, 50, 150, 150)\n   * ```\n   * @param rect - The rectangle to fit within\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#addBoundsMask} For intersection\n   * @see {@link Bounds#pad} For expanding bounds\n   */\n  fit(rect) {\n    if (this.minX < rect.left)\n      this.minX = rect.left;\n    if (this.maxX > rect.right)\n      this.maxX = rect.right;\n    if (this.minY < rect.top)\n      this.minY = rect.top;\n    if (this.maxY > rect.bottom)\n      this.maxY = rect.bottom;\n    return this;\n  }\n  /**\n   * Resizes the bounds object to include the given bounds.\n   * Similar to fit() but works with raw coordinate values instead of a Rectangle.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 200, 200);\n   * // Fit to specific coordinates\n   * bounds.fitBounds(50, 150, 50, 150);\n   * // bounds are now (50, 50, 150, 150)\n   * ```\n   * @param left - The left value of the bounds\n   * @param right - The right value of the bounds\n   * @param top - The top value of the bounds\n   * @param bottom - The bottom value of the bounds\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#fit} For fitting to Rectangle\n   * @see {@link Bounds#addBoundsMask} For intersection\n   */\n  fitBounds(left, right, top, bottom) {\n    if (this.minX < left)\n      this.minX = left;\n    if (this.maxX > right)\n      this.maxX = right;\n    if (this.minY < top)\n      this.minY = top;\n    if (this.maxY > bottom)\n      this.maxY = bottom;\n    return this;\n  }\n  /**\n   * Pads bounds object, making it grow in all directions.\n   * If paddingY is omitted, both paddingX and paddingY will be set to paddingX.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Add equal padding\n   * bounds.pad(10);\n   * // bounds are now (-10, -10, 110, 110)\n   *\n   * // Add different padding for x and y\n   * bounds.pad(20, 10);\n   * // bounds are now (-30, -20, 130, 120)\n   * ```\n   * @param paddingX - The horizontal padding amount\n   * @param paddingY - The vertical padding amount\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#fit} For constraining bounds\n   * @see {@link Bounds#scale} For uniform scaling\n   */\n  pad(paddingX, paddingY = paddingX) {\n    this.minX -= paddingX;\n    this.maxX += paddingX;\n    this.minY -= paddingY;\n    this.maxY += paddingY;\n    return this;\n  }\n  /**\n   * Ceils the bounds by rounding up max values and rounding down min values.\n   * Useful for pixel-perfect calculations and avoiding fractional pixels.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * bounds.set(10.2, 10.9, 50.1, 50.8);\n   *\n   * // Round to whole pixels\n   * bounds.ceil();\n   * // bounds are now (10, 10, 51, 51)\n   * ```\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#scale} For size adjustments\n   * @see {@link Bounds#fit} For constraining bounds\n   */\n  ceil() {\n    this.minX = Math.floor(this.minX);\n    this.minY = Math.floor(this.minY);\n    this.maxX = Math.ceil(this.maxX);\n    this.maxY = Math.ceil(this.maxY);\n    return this;\n  }\n  /**\n   * Creates a new Bounds instance with the same values.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Create a copy\n   * const copy = bounds.clone();\n   *\n   * // Original and copy are independent\n   * bounds.pad(10);\n   * console.log(copy.width === bounds.width); // false\n   * ```\n   * @returns A new Bounds instance with the same values\n   * @see {@link Bounds#copyFrom} For reusing existing bounds\n   */\n  clone() {\n    return new Bounds(this.minX, this.minY, this.maxX, this.maxY);\n  }\n  /**\n   * Scales the bounds by the given values, adjusting all edges proportionally.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   *\n   * // Scale uniformly\n   * bounds.scale(2);\n   * // bounds are now (0, 0, 200, 200)\n   *\n   * // Scale non-uniformly\n   * bounds.scale(0.5, 2);\n   * // bounds are now (0, 0, 100, 400)\n   * ```\n   * @param x - The X value to scale by\n   * @param y - The Y value to scale by (defaults to x)\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#pad} For adding padding\n   * @see {@link Bounds#fit} For constraining size\n   */\n  scale(x, y = x) {\n    this.minX *= x;\n    this.minY *= y;\n    this.maxX *= x;\n    this.maxY *= y;\n    return this;\n  }\n  /**\n   * The x position of the bounds in local space.\n   * Setting this value will move the bounds while maintaining its width.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get x position\n   * console.log(bounds.x); // 0\n   *\n   * // Move bounds horizontally\n   * bounds.x = 50;\n   * console.log(bounds.minX, bounds.maxX); // 50, 150\n   *\n   * // Width stays the same\n   * console.log(bounds.width); // Still 100\n   * ```\n   */\n  get x() {\n    return this.minX;\n  }\n  set x(value) {\n    const width = this.maxX - this.minX;\n    this.minX = value;\n    this.maxX = value + width;\n  }\n  /**\n   * The y position of the bounds in local space.\n   * Setting this value will move the bounds while maintaining its height.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get y position\n   * console.log(bounds.y); // 0\n   *\n   * // Move bounds vertically\n   * bounds.y = 50;\n   * console.log(bounds.minY, bounds.maxY); // 50, 150\n   *\n   * // Height stays the same\n   * console.log(bounds.height); // Still 100\n   * ```\n   */\n  get y() {\n    return this.minY;\n  }\n  set y(value) {\n    const height = this.maxY - this.minY;\n    this.minY = value;\n    this.maxY = value + height;\n  }\n  /**\n   * The width value of the bounds.\n   * Represents the distance between minX and maxX coordinates.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get width\n   * console.log(bounds.width); // 100\n   * // Resize width\n   * bounds.width = 200;\n   * console.log(bounds.maxX - bounds.minX); // 200\n   * ```\n   */\n  get width() {\n    return this.maxX - this.minX;\n  }\n  set width(value) {\n    this.maxX = this.minX + value;\n  }\n  /**\n   * The height value of the bounds.\n   * Represents the distance between minY and maxY coordinates.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Get height\n   * console.log(bounds.height); // 100\n   * // Resize height\n   * bounds.height = 150;\n   * console.log(bounds.maxY - bounds.minY); // 150\n   * ```\n   */\n  get height() {\n    return this.maxY - this.minY;\n  }\n  set height(value) {\n    this.maxY = this.minY + value;\n  }\n  /**\n   * The left edge coordinate of the bounds.\n   * Alias for minX.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(50, 0, 150, 100);\n   * console.log(bounds.left); // 50\n   * console.log(bounds.left === bounds.minX); // true\n   * ```\n   * @readonly\n   */\n  get left() {\n    return this.minX;\n  }\n  /**\n   * The right edge coordinate of the bounds.\n   * Alias for maxX.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * console.log(bounds.right); // 100\n   * console.log(bounds.right === bounds.maxX); // true\n   * ```\n   * @readonly\n   */\n  get right() {\n    return this.maxX;\n  }\n  /**\n   * The top edge coordinate of the bounds.\n   * Alias for minY.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 25, 100, 125);\n   * console.log(bounds.top); // 25\n   * console.log(bounds.top === bounds.minY); // true\n   * ```\n   * @readonly\n   */\n  get top() {\n    return this.minY;\n  }\n  /**\n   * The bottom edge coordinate of the bounds.\n   * Alias for maxY.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 200);\n   * console.log(bounds.bottom); // 200\n   * console.log(bounds.bottom === bounds.maxY); // true\n   * ```\n   * @readonly\n   */\n  get bottom() {\n    return this.maxY;\n  }\n  /**\n   * Whether the bounds has positive width and height.\n   * Checks if both dimensions are greater than zero.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Check if bounds are positive\n   * console.log(bounds.isPositive); // true\n   *\n   * // Negative bounds\n   * bounds.maxX = bounds.minX;\n   * console.log(bounds.isPositive); // false, width is 0\n   * ```\n   * @readonly\n   * @see {@link Bounds#isEmpty} For checking empty state\n   * @see {@link Bounds#isValid} For checking validity\n   */\n  get isPositive() {\n    return this.maxX - this.minX > 0 && this.maxY - this.minY > 0;\n  }\n  /**\n   * Whether the bounds has valid coordinates.\n   * Checks if the bounds has been initialized with real values.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   * console.log(bounds.isValid); // false, default state\n   *\n   * // Set valid bounds\n   * bounds.addFrame(0, 0, 100, 100);\n   * console.log(bounds.isValid); // true\n   * ```\n   * @readonly\n   * @see {@link Bounds#isEmpty} For checking empty state\n   * @see {@link Bounds#isPositive} For checking dimensions\n   */\n  get isValid() {\n    return this.minX + this.minY !== Infinity;\n  }\n  /**\n   * Adds vertices from a Float32Array to the bounds, optionally transformed by a matrix.\n   * Used for efficiently updating bounds from raw vertex data.\n   * @example\n   * ```ts\n   * const bounds = new Bounds();\n   *\n   * // Add vertices from geometry\n   * const vertices = new Float32Array([\n   *     0, 0,    // Vertex 1\n   *     100, 0,  // Vertex 2\n   *     100, 100 // Vertex 3\n   * ]);\n   * bounds.addVertexData(vertices, 0, 6);\n   *\n   * // Add transformed vertices\n   * const matrix = new Matrix()\n   *     .translate(50, 50)\n   *     .rotate(Math.PI / 4);\n   * bounds.addVertexData(vertices, 0, 6, matrix);\n   *\n   * // Add subset of vertices\n   * bounds.addVertexData(vertices, 2, 4); // Only second vertex\n   * ```\n   * @param vertexData - The array of vertices to add\n   * @param beginOffset - Starting index in the vertex array\n   * @param endOffset - Ending index in the vertex array (excluded)\n   * @param matrix - Optional transformation matrix\n   * @see {@link Bounds#addFrame} For adding rectangular frames\n   * @see {@link Matrix} For transformation details\n   */\n  addVertexData(vertexData, beginOffset, endOffset, matrix) {\n    let minX = this.minX;\n    let minY = this.minY;\n    let maxX = this.maxX;\n    let maxY = this.maxY;\n    matrix || (matrix = this.matrix);\n    const a = matrix.a;\n    const b = matrix.b;\n    const c = matrix.c;\n    const d = matrix.d;\n    const tx = matrix.tx;\n    const ty = matrix.ty;\n    for (let i = beginOffset; i < endOffset; i += 2) {\n      const localX = vertexData[i];\n      const localY = vertexData[i + 1];\n      const x = a * localX + c * localY + tx;\n      const y = b * localX + d * localY + ty;\n      minX = x < minX ? x : minX;\n      minY = y < minY ? y : minY;\n      maxX = x > maxX ? x : maxX;\n      maxY = y > maxY ? y : maxY;\n    }\n    this.minX = minX;\n    this.minY = minY;\n    this.maxX = maxX;\n    this.maxY = maxY;\n  }\n  /**\n   * Checks if a point is contained within the bounds.\n   * Returns true if the point's coordinates fall within the bounds' area.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * // Basic point check\n   * console.log(bounds.containsPoint(50, 50)); // true\n   * console.log(bounds.containsPoint(150, 150)); // false\n   *\n   * // Check edges\n   * console.log(bounds.containsPoint(0, 0));   // true, includes edges\n   * console.log(bounds.containsPoint(100, 100)); // true, includes edges\n   * ```\n   * @param x - x coordinate to check\n   * @param y - y coordinate to check\n   * @returns True if the point is inside the bounds\n   * @see {@link Bounds#isPositive} For valid bounds check\n   * @see {@link Bounds#rectangle} For Rectangle representation\n   */\n  containsPoint(x, y) {\n    if (this.minX <= x && this.minY <= y && this.maxX >= x && this.maxY >= y) {\n      return true;\n    }\n    return false;\n  }\n  /**\n   * Returns a string representation of the bounds.\n   * Useful for debugging and logging bounds information.\n   * @example\n   * ```ts\n   * const bounds = new Bounds(0, 0, 100, 100);\n   * console.log(bounds.toString()); // \"[pixi.js:Bounds minX=0 minY=0 maxX=100 maxY=100 width=100 height=100]\"\n   * ```\n   * @returns A string describing the bounds\n   * @see {@link Bounds#copyFrom} For copying bounds\n   * @see {@link Bounds#clone} For creating a new instance\n   */\n  toString() {\n    return `[pixi.js:Bounds minX=${this.minX} minY=${this.minY} maxX=${this.maxX} maxY=${this.maxY} width=${this.width} height=${this.height}]`;\n  }\n  /**\n   * Copies the bounds from another bounds object.\n   * Useful for reusing bounds objects and avoiding allocations.\n   * @example\n   * ```ts\n   * const sourceBounds = new Bounds(0, 0, 100, 100);\n   * // Copy bounds\n   * const targetBounds = new Bounds();\n   * targetBounds.copyFrom(sourceBounds);\n   * ```\n   * @param bounds - The bounds to copy from\n   * @returns This bounds object for chaining\n   * @see {@link Bounds#clone} For creating new instances\n   */\n  copyFrom(bounds) {\n    this.minX = bounds.minX;\n    this.minY = bounds.minY;\n    this.maxX = bounds.maxX;\n    this.maxY = bounds.maxY;\n    return this;\n  }\n}\n\nexport { Bounds };\n//# sourceMappingURL=Bounds.mjs.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Header = exports.keySignatureKeys = void 0;\nvar BinarySearch_1 = require(\"./BinarySearch\");\nvar privatePPQMap = new WeakMap();\n/**\n * @hidden\n */\nexports.keySignatureKeys = [\n    \"Cb\",\n    \"Gb\",\n    \"Db\",\n    \"Ab\",\n    \"Eb\",\n    \"Bb\",\n    \"F\",\n    \"C\",\n    \"G\",\n    \"D\",\n    \"A\",\n    \"E\",\n    \"B\",\n    \"F#\",\n    \"C#\",\n];\n/**\n * The parsed MIDI file header.\n */\nvar Header = /** @class */ (function () {\n    function Header(midiData) {\n        var _this = this;\n        /**\n         * The array of all the tempo events.\n         */\n        this.tempos = [];\n        /**\n         * The time signatures.\n         */\n        this.timeSignatures = [];\n        /**\n         * The time signatures.\n         */\n        this.keySignatures = [];\n        /**\n         * Additional meta events.\n         */\n        this.meta = [];\n        /**\n         * The name of the MIDI file;\n         */\n        this.name = \"\";\n        // Look through all the tracks for tempo changes.\n        privatePPQMap.set(this, 480);\n        if (midiData) {\n            privatePPQMap.set(this, midiData.header.ticksPerBeat);\n            // Check time signature and tempo events from all of the tracks.\n            midiData.tracks.forEach(function (track) {\n                track.forEach(function (event) {\n                    if (event.meta) {\n                        if (event.type === \"timeSignature\") {\n                            _this.timeSignatures.push({\n                                ticks: event.absoluteTime,\n                                timeSignature: [\n                                    event.numerator,\n                                    event.denominator,\n                                ],\n                            });\n                        }\n                        else if (event.type === \"setTempo\") {\n                            _this.tempos.push({\n                                bpm: 60000000 / event.microsecondsPerBeat,\n                                ticks: event.absoluteTime,\n                            });\n                        }\n                        else if (event.type === \"keySignature\") {\n                            _this.keySignatures.push({\n                                key: exports.keySignatureKeys[event.key + 7],\n                                scale: event.scale === 0 ? \"major\" : \"minor\",\n                                ticks: event.absoluteTime,\n                            });\n                        }\n                    }\n                });\n            });\n            // Check the first track for other relevant data.\n            var firstTrackCurrentTicks_1 = 0; // Used for absolute times.\n            midiData.tracks[0].forEach(function (event) {\n                firstTrackCurrentTicks_1 += event.deltaTime;\n                if (event.meta) {\n                    if (event.type === \"trackName\") {\n                        _this.name = event.text;\n                    }\n                    else if (event.type === \"text\" ||\n                        event.type === \"cuePoint\" ||\n                        event.type === \"marker\" ||\n                        event.type === \"lyrics\") {\n                        _this.meta.push({\n                            text: event.text,\n                            ticks: firstTrackCurrentTicks_1,\n                            type: event.type,\n                        });\n                    }\n                }\n            });\n            this.update();\n        }\n    }\n    /**\n     * This must be invoked after any changes are made to the tempo array\n     * or the timeSignature array for the updated values to be reflected.\n     */\n    Header.prototype.update = function () {\n        var _this = this;\n        var currentTime = 0;\n        var lastEventBeats = 0;\n        // Make sure it's sorted;\n        this.tempos.sort(function (a, b) { return a.ticks - b.ticks; });\n        this.tempos.forEach(function (event, index) {\n            var lastBPM = index > 0 ? _this.tempos[index - 1].bpm : _this.tempos[0].bpm;\n            var beats = event.ticks / _this.ppq - lastEventBeats;\n            var elapsedSeconds = (60 / lastBPM) * beats;\n            event.time = elapsedSeconds + currentTime;\n            currentTime = event.time;\n            lastEventBeats += beats;\n        });\n        this.timeSignatures.sort(function (a, b) { return a.ticks - b.ticks; });\n        this.timeSignatures.forEach(function (event, index) {\n            var lastEvent = index > 0\n                ? _this.timeSignatures[index - 1]\n                : _this.timeSignatures[0];\n            var elapsedBeats = (event.ticks - lastEvent.ticks) / _this.ppq;\n            var elapsedMeasures = elapsedBeats /\n                lastEvent.timeSignature[0] /\n                (lastEvent.timeSignature[1] / 4);\n            lastEvent.measures = lastEvent.measures || 0;\n            event.measures = elapsedMeasures + lastEvent.measures;\n        });\n    };\n    /**\n     * Convert ticks into seconds based on the tempo changes.\n     */\n    Header.prototype.ticksToSeconds = function (ticks) {\n        // Find the relevant position.\n        var index = (0, BinarySearch_1.search)(this.tempos, ticks);\n        if (index !== -1) {\n            var tempo = this.tempos[index];\n            var tempoTime = tempo.time;\n            var elapsedBeats = (ticks - tempo.ticks) / this.ppq;\n            return tempoTime + (60 / tempo.bpm) * elapsedBeats;\n        }\n        else {\n            // Assume 120.\n            var beats = ticks / this.ppq;\n            return (60 / 120) * beats;\n        }\n    };\n    /**\n     * Convert ticks into measures based off of the time signatures.\n     */\n    Header.prototype.ticksToMeasures = function (ticks) {\n        var index = (0, BinarySearch_1.search)(this.timeSignatures, ticks);\n        if (index !== -1) {\n            var timeSigEvent = this.timeSignatures[index];\n            var elapsedBeats = (ticks - timeSigEvent.ticks) / this.ppq;\n            return (timeSigEvent.measures +\n                elapsedBeats /\n                    (timeSigEvent.timeSignature[0] /\n                        timeSigEvent.timeSignature[1]) /\n                    4);\n        }\n        else {\n            return ticks / this.ppq / 4;\n        }\n    };\n    Object.defineProperty(Header.prototype, \"ppq\", {\n        /**\n         * The number of ticks per quarter note.\n         */\n        get: function () {\n            return privatePPQMap.get(this);\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Convert seconds to ticks based on the tempo events.\n     */\n    Header.prototype.secondsToTicks = function (seconds) {\n        // Find the relevant position.\n        var index = (0, BinarySearch_1.search)(this.tempos, seconds, \"time\");\n        if (index !== -1) {\n            var tempo = this.tempos[index];\n            var tempoTime = tempo.time;\n            var elapsedTime = seconds - tempoTime;\n            var elapsedBeats = elapsedTime / (60 / tempo.bpm);\n            return Math.round(tempo.ticks + elapsedBeats * this.ppq);\n        }\n        else {\n            // Assume 120.\n            var beats = seconds / (60 / 120);\n            return Math.round(beats * this.ppq);\n        }\n    };\n    /**\n     * Convert the header into an object.\n     */\n    Header.prototype.toJSON = function () {\n        return {\n            keySignatures: this.keySignatures,\n            meta: this.meta,\n            name: this.name,\n            ppq: this.ppq,\n            tempos: this.tempos.map(function (t) {\n                return {\n                    bpm: t.bpm,\n                    ticks: t.ticks,\n                };\n            }),\n            timeSignatures: this.timeSignatures,\n        };\n    };\n    /**\n     * Parse a header json object.\n     */\n    Header.prototype.fromJSON = function (json) {\n        this.name = json.name;\n        // Clone all the attributes.\n        this.tempos = json.tempos.map(function (t) { return Object.assign({}, t); });\n        this.timeSignatures = json.timeSignatures.map(function (t) {\n            return Object.assign({}, t);\n        });\n        this.keySignatures = json.keySignatures.map(function (t) {\n            return Object.assign({}, t);\n        });\n        this.meta = json.meta.map(function (t) { return Object.assign({}, t); });\n        privatePPQMap.set(this, json.ppq);\n        this.update();\n    };\n    /**\n     * Update the tempo of the midi to a single tempo. Will remove and replace\n     * any other tempos currently set and update all of the event timing.\n     * @param bpm The tempo in beats per second.\n     */\n    Header.prototype.setTempo = function (bpm) {\n        this.tempos = [\n            {\n                bpm: bpm,\n                ticks: 0,\n            },\n        ];\n        this.update();\n    };\n    return Header;\n}());\nexports.Header = Header;\n//# sourceMappingURL=Header.js.map","\"use strict\";\nfunction removeItems(arr, startIdx, removeCount) {\n  const length = arr.length;\n  let i;\n  if (startIdx >= length || removeCount === 0) {\n    return;\n  }\n  removeCount = startIdx + removeCount > length ? length - startIdx : removeCount;\n  const len = length - removeCount;\n  for (i = startIdx; i < len; ++i) {\n    arr[i] = arr[i + removeCount];\n  }\n  arr.length = len;\n}\n\nexport { removeItems };\n//# sourceMappingURL=removeItems.mjs.map\n","\"use strict\";\nfunction nextPow2(v) {\n  v += v === 0 ? 1 : 0;\n  --v;\n  v |= v >>> 1;\n  v |= v >>> 2;\n  v |= v >>> 4;\n  v |= v >>> 8;\n  v |= v >>> 16;\n  return v + 1;\n}\nfunction isPow2(v) {\n  return !(v & v - 1) && !!v;\n}\nfunction log2(v) {\n  let r = (v > 65535 ? 1 : 0) << 4;\n  v >>>= r;\n  let shift = (v > 255 ? 1 : 0) << 3;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 15 ? 1 : 0) << 2;\n  v >>>= shift;\n  r |= shift;\n  shift = (v > 3 ? 1 : 0) << 1;\n  v >>>= shift;\n  r |= shift;\n  return r | v >> 1;\n}\n\nexport { isPow2, log2, nextPow2 };\n//# sourceMappingURL=pow2.mjs.map\n","\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.Instrument = void 0;\nvar InstrumentMaps_1 = require(\"./InstrumentMaps\");\n/**\n * @hidden\n */\nvar privateTrackMap = new WeakMap();\n/**\n * Describes the MIDI instrument of a track.\n */\nvar Instrument = /** @class */ (function () {\n    /**\n     * @param trackData\n     * @param track\n     */\n    function Instrument(trackData, track) {\n        /**\n         * The instrument number. Defaults to 0.\n         */\n        this.number = 0;\n        privateTrackMap.set(this, track);\n        this.number = 0;\n        if (trackData) {\n            var programChange = trackData.find(function (e) { return e.type === \"programChange\"; });\n            // Set 'number' from 'programNumber' if exists.\n            if (programChange) {\n                this.number = programChange.programNumber;\n            }\n        }\n    }\n    Object.defineProperty(Instrument.prototype, \"name\", {\n        /**\n         * The common name of the instrument.\n         */\n        get: function () {\n            if (this.percussion) {\n                return InstrumentMaps_1.DrumKitByPatchID[this.number];\n            }\n            else {\n                return InstrumentMaps_1.instrumentByPatchID[this.number];\n            }\n        },\n        set: function (n) {\n            var patchNumber = InstrumentMaps_1.instrumentByPatchID.indexOf(n);\n            if (patchNumber !== -1) {\n                this.number = patchNumber;\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Instrument.prototype, \"family\", {\n        /**\n         * The instrument family, e.g. \"piano\".\n         */\n        get: function () {\n            if (this.percussion) {\n                return \"drums\";\n            }\n            else {\n                return InstrumentMaps_1.InstrumentFamilyByID[Math.floor(this.number / 8)];\n            }\n        },\n        enumerable: false,\n        configurable: true\n    });\n    Object.defineProperty(Instrument.prototype, \"percussion\", {\n        /**\n         * If the instrument is a percussion instrument.\n         */\n        get: function () {\n            var track = privateTrackMap.get(this);\n            return track.channel === 9;\n        },\n        enumerable: false,\n        configurable: true\n    });\n    /**\n     * Convert it to JSON form.\n     */\n    Instrument.prototype.toJSON = function () {\n        return {\n            family: this.family,\n            number: this.number,\n            name: this.name\n        };\n    };\n    /**\n     * Convert from JSON form.\n     */\n    Instrument.prototype.fromJSON = function (json) {\n        this.number = json.number;\n    };\n    return Instrument;\n}());\nexports.Instrument = Instrument;\n//# sourceMappingURL=Instrument.js.map","// The module cache\nvar __webpack_module_cache__ = {};\n\n// The require function\nfunction __webpack_require__(moduleId) {\n\t// Check if module is in cache\n\tvar cachedModule = __webpack_module_cache__[moduleId];\n\tif (cachedModule !== undefined) {\n\t\treturn cachedModule.exports;\n\t}\n\t// Create a new module (and put it into the cache)\n\tvar module = __webpack_module_cache__[moduleId] = {\n\t\t// no module.id needed\n\t\t// no module.loaded needed\n\t\texports: {}\n\t};\n\n\t// Execute the module function\n\t__webpack_modules__[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n\t// Return the exports of the module\n\treturn module.exports;\n}\n\n","// define getter functions for harmony exports\n__webpack_require__.d = (exports, definition) => {\n\tfor(var key in definition) {\n\t\tif(__webpack_require__.o(definition, key) && !__webpack_require__.o(exports, key)) {\n\t\t\tObject.defineProperty(exports, key, { enumerable: true, get: definition[key] });\n\t\t}\n\t}\n};","__webpack_require__.g = (function() {\n\tif (typeof globalThis === 'object') return globalThis;\n\ttry {\n\t\treturn this || new Function('return this')();\n\t} catch (e) {\n\t\tif (typeof window === 'object') return window;\n\t}\n})();","__webpack_require__.o = (obj, prop) => (Object.prototype.hasOwnProperty.call(obj, prop))","// define __esModule on exports\n__webpack_require__.r = (exports) => {\n\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n\t}\n\tObject.defineProperty(exports, '__esModule', { value: true });\n};","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst browserExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"browser\",\n    priority: -1\n  },\n  test: () => true,\n  load: async () => {\n    await import('./browserAll.mjs');\n  }\n};\n\nexport { browserExt };\n//# sourceMappingURL=browserExt.mjs.map\n","import { ExtensionType } from '../extensions/Extensions.mjs';\n\n\"use strict\";\nconst webworkerExt = {\n  extension: {\n    type: ExtensionType.Environment,\n    name: \"webworker\",\n    priority: 0\n  },\n  test: () => typeof self !== \"undefined\" && self.WorkerGlobalScope !== void 0,\n  load: async () => {\n    await import('./webworkerAll.mjs');\n  }\n};\n\nexport { webworkerExt };\n//# sourceMappingURL=webworkerExt.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\nimport { AbstractRenderer } from '../../rendering/renderers/shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nlet _isWebGLSupported;\nfunction isWebGLSupported(failIfMajorPerformanceCaveat) {\n  if (_isWebGLSupported !== void 0)\n    return _isWebGLSupported;\n  _isWebGLSupported = (() => {\n    const contextOptions = {\n      stencil: true,\n      failIfMajorPerformanceCaveat: failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    };\n    try {\n      if (!DOMAdapter.get().getWebGLRenderingContext()) {\n        return false;\n      }\n      const canvas = DOMAdapter.get().createCanvas();\n      let gl = canvas.getContext(\"webgl\", contextOptions);\n      const success = !!gl?.getContextAttributes()?.stencil;\n      if (gl) {\n        const loseContext = gl.getExtension(\"WEBGL_lose_context\");\n        if (loseContext) {\n          loseContext.loseContext();\n        }\n      }\n      gl = null;\n      return success;\n    } catch (_e) {\n      return false;\n    }\n  })();\n  return _isWebGLSupported;\n}\n\nexport { isWebGLSupported };\n//# sourceMappingURL=isWebGLSupported.mjs.map\n","import { DOMAdapter } from '../../environment/adapter.mjs';\n\n\"use strict\";\nlet _isWebGPUSupported;\nasync function isWebGPUSupported(options = {}) {\n  if (_isWebGPUSupported !== void 0)\n    return _isWebGPUSupported;\n  _isWebGPUSupported = await (async () => {\n    const gpu = DOMAdapter.get().getNavigator().gpu;\n    if (!gpu) {\n      return false;\n    }\n    try {\n      const adapter = await gpu.requestAdapter(options);\n      await adapter.requestDevice();\n      return true;\n    } catch (_e) {\n      return false;\n    }\n  })();\n  return _isWebGPUSupported;\n}\n\nexport { isWebGPUSupported };\n//# sourceMappingURL=isWebGPUSupported.mjs.map\n","import { isWebGLSupported } from '../../utils/browser/isWebGLSupported.mjs';\nimport { isWebGPUSupported } from '../../utils/browser/isWebGPUSupported.mjs';\nimport { AbstractRenderer } from './shared/system/AbstractRenderer.mjs';\n\n\"use strict\";\nconst renderPriority = [\"webgl\", \"webgpu\", \"canvas\"];\nasync function autoDetectRenderer(options) {\n  let preferredOrder = [];\n  if (options.preference) {\n    preferredOrder.push(options.preference);\n    renderPriority.forEach((item) => {\n      if (item !== options.preference) {\n        preferredOrder.push(item);\n      }\n    });\n  } else {\n    preferredOrder = renderPriority.slice();\n  }\n  let RendererClass;\n  let finalOptions = {};\n  for (let i = 0; i < preferredOrder.length; i++) {\n    const rendererType = preferredOrder[i];\n    if (rendererType === \"webgpu\" && await isWebGPUSupported()) {\n      const { WebGPURenderer } = await import('./gpu/WebGPURenderer.mjs');\n      RendererClass = WebGPURenderer;\n      finalOptions = { ...options, ...options.webgpu };\n      break;\n    } else if (rendererType === \"webgl\" && isWebGLSupported(\n      options.failIfMajorPerformanceCaveat ?? AbstractRenderer.defaultOptions.failIfMajorPerformanceCaveat\n    )) {\n      const { WebGLRenderer } = await import('./gl/WebGLRenderer.mjs');\n      RendererClass = WebGLRenderer;\n      finalOptions = { ...options, ...options.webgl };\n      break;\n    } else if (rendererType === \"canvas\") {\n      finalOptions = { ...options };\n      throw new Error(\"CanvasRenderer is not yet implemented\");\n    }\n  }\n  delete finalOptions.webgpu;\n  delete finalOptions.webgl;\n  if (!RendererClass) {\n    throw new Error(\"No available renderer for the current environment\");\n  }\n  const renderer = new RendererClass();\n  await renderer.init(finalOptions);\n  return renderer;\n}\n\nexport { autoDetectRenderer };\n//# sourceMappingURL=autoDetectRenderer.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\nimport { autoDetectRenderer } from '../rendering/renderers/autoDetectRenderer.mjs';\nimport { Container } from '../scene/container/Container.mjs';\nimport { ApplicationInitHook } from '../utils/global/globalHooks.mjs';\nimport { deprecation, v8_0_0 } from '../utils/logging/deprecation.mjs';\n\n\"use strict\";\nconst _Application = class _Application {\n  constructor(...args) {\n    /**\n     * The root display container for your application.\n     * All visual elements should be added to this container or its children.\n     * @example\n     * ```js\n     * // Create a sprite and add it to the stage\n     * const sprite = Sprite.from('image.png');\n     * app.stage.addChild(sprite);\n     *\n     * // Create a container for grouping objects\n     * const container = new Container();\n     * app.stage.addChild(container);\n     * ```\n     */\n    this.stage = new Container();\n    if (args[0] !== void 0) {\n      deprecation(v8_0_0, \"Application constructor options are deprecated, please use Application.init() instead.\");\n    }\n  }\n  /**\n   * Initializes the PixiJS application with the specified options.\n   *\n   * This method must be called after creating a new Application instance.\n   * @param options - Configuration options for the application and renderer\n   * @returns A promise that resolves when initialization is complete\n   * @example\n   * ```js\n   * const app = new Application();\n   *\n   * // Initialize with custom options\n   * await app.init({\n   *     width: 800,\n   *     height: 600,\n   *     backgroundColor: 0x1099bb,\n   *     preference: 'webgl', // or 'webgpu'\n   * });\n   * ```\n   */\n  async init(options) {\n    options = { ...options };\n    this.stage || (this.stage = new Container());\n    this.renderer = await autoDetectRenderer(options);\n    _Application._plugins.forEach((plugin) => {\n      plugin.init.call(this, options);\n    });\n  }\n  /**\n   * Renders the current stage to the screen.\n   *\n   * When using the default setup with {@link TickerPlugin} (enabled by default), you typically don't need to call\n   * this method directly as rendering is handled automatically.\n   *\n   * Only use this method if you've disabled the {@link TickerPlugin} or need custom\n   * render timing control.\n   * @example\n   * ```js\n   * // Example 1: Default setup (TickerPlugin handles rendering)\n   * const app = new Application();\n   * await app.init();\n   * // No need to call render() - TickerPlugin handles it\n   *\n   * // Example 2: Custom rendering loop (if TickerPlugin is disabled)\n   * const app = new Application();\n   * await app.init({ autoStart: false }); // Disable automatic rendering\n   *\n   * function animate() {\n   *     app.render();\n   *     requestAnimationFrame(animate);\n   * }\n   * animate();\n   * ```\n   */\n  render() {\n    this.renderer.render({ container: this.stage });\n  }\n  /**\n   * Reference to the renderer's canvas element. This is the HTML element\n   * that displays your application's graphics.\n   * @readonly\n   * @type {HTMLCanvasElement}\n   * @example\n   * ```js\n   * // Create a new application\n   * const app = new Application();\n   * // Initialize the application\n   * await app.init({...});\n   * // Add canvas to the page\n   * document.body.appendChild(app.canvas);\n   *\n   * // Access the canvas directly\n   * console.log(app.canvas); // HTMLCanvasElement\n   * ```\n   */\n  get canvas() {\n    return this.renderer.canvas;\n  }\n  /**\n   * Reference to the renderer's canvas element.\n   * @type {HTMLCanvasElement}\n   * @deprecated since 8.0.0\n   * @see {@link Application#canvas}\n   */\n  get view() {\n    deprecation(v8_0_0, \"Application.view is deprecated, please use Application.canvas instead.\");\n    return this.renderer.canvas;\n  }\n  /**\n   * Reference to the renderer's screen rectangle. This represents the visible area of your application.\n   *\n   * It's commonly used for:\n   * - Setting filter areas for full-screen effects\n   * - Defining hit areas for screen-wide interaction\n   * - Determining the visible bounds of your application\n   * @readonly\n   * @example\n   * ```js\n   * // Use as filter area for a full-screen effect\n   * const blurFilter = new BlurFilter();\n   * sprite.filterArea = app.screen;\n   *\n   * // Use as hit area for screen-wide interaction\n   * const screenSprite = new Sprite();\n   * screenSprite.hitArea = app.screen;\n   *\n   * // Get screen dimensions\n   * console.log(app.screen.width, app.screen.height);\n   * ```\n   * @see {@link Rectangle} For all available properties and methods\n   */\n  get screen() {\n    return this.renderer.screen;\n  }\n  /**\n   * Destroys the application and all of its resources.\n   *\n   * This method should be called when you want to completely\n   * clean up the application and free all associated memory.\n   * @param rendererDestroyOptions - Options for destroying the renderer:\n   *  - `false` or `undefined`: Preserves the canvas element (default)\n   *  - `true`: Removes the canvas element\n   *  - `{ removeView: boolean }`: Object with removeView property to control canvas removal\n   * @param options - Options for destroying the application:\n   *  - `false` or `undefined`: Basic cleanup (default)\n   *  - `true`: Complete cleanup including children\n   *  - Detailed options object:\n   *    - `children`: Remove children\n   *    - `texture`: Destroy textures\n   *    - `textureSource`: Destroy texture sources\n   *    - `context`: Destroy WebGL context\n   * @example\n   * ```js\n   * // Basic cleanup\n   * app.destroy();\n   *\n   * // Remove canvas and do complete cleanup\n   * app.destroy(true, true);\n   *\n   * // Remove canvas with explicit options\n   * app.destroy({ removeView: true }, true);\n   *\n   * // Detailed cleanup with specific options\n   * app.destroy(\n   *     { removeView: true },\n   *     {\n   *         children: true,\n   *         texture: true,\n   *         textureSource: true,\n   *         context: true\n   *     }\n   * );\n   * ```\n   * > [!WARNING] After calling destroy, the application instance should no longer be used.\n   * > All properties will be null and further operations will throw errors.\n   */\n  destroy(rendererDestroyOptions = false, options = false) {\n    const plugins = _Application._plugins.slice(0);\n    plugins.reverse();\n    plugins.forEach((plugin) => {\n      plugin.destroy.call(this);\n    });\n    this.stage.destroy(options);\n    this.stage = null;\n    this.renderer.destroy(rendererDestroyOptions);\n    this.renderer = null;\n  }\n};\n/**\n * Collection of installed plugins.\n * @internal\n */\n_Application._plugins = [];\nlet Application = _Application;\nextensions.handleByList(ExtensionType.Application, Application._plugins);\nextensions.add(ApplicationInitHook);\n\nexport { Application };\n//# sourceMappingURL=Application.mjs.map\n","import { groupD8 } from '../../maths/matrix/groupD8.mjs';\nimport { Rectangle } from '../../maths/shapes/Rectangle.mjs';\nimport { Texture } from '../../rendering/renderers/shared/texture/Texture.mjs';\nimport { AbstractBitmapFont } from './AbstractBitmapFont.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\n\n\"use strict\";\nclass BitmapFont extends AbstractBitmapFont {\n  constructor(options, url) {\n    super();\n    const { textures, data } = options;\n    Object.keys(data.pages).forEach((key) => {\n      const pageData = data.pages[parseInt(key, 10)];\n      const texture = textures[pageData.id];\n      this.pages.push({ texture });\n    });\n    Object.keys(data.chars).forEach((key) => {\n      const charData = data.chars[key];\n      const {\n        frame: textureFrame,\n        source: textureSource,\n        rotate: textureRotate\n      } = textures[charData.page];\n      const frame = groupD8.transformRectCoords(\n        charData,\n        textureFrame,\n        textureRotate,\n        new Rectangle()\n      );\n      const texture = new Texture({\n        frame,\n        orig: new Rectangle(0, 0, charData.width, charData.height),\n        source: textureSource,\n        rotate: textureRotate\n      });\n      this.chars[key] = {\n        id: key.codePointAt(0),\n        xOffset: charData.xOffset,\n        yOffset: charData.yOffset,\n        xAdvance: charData.xAdvance,\n        kerning: charData.kerning ?? {},\n        texture\n      };\n    });\n    this.baseRenderedFontSize = data.fontSize;\n    this.baseMeasurementFontSize = data.fontSize;\n    this.fontMetrics = {\n      ascent: 0,\n      descent: 0,\n      fontSize: data.fontSize\n    };\n    this.baseLineOffset = data.baseLineOffset;\n    this.lineHeight = data.lineHeight;\n    this.fontFamily = data.fontFamily;\n    this.distanceField = data.distanceField ?? {\n      type: \"none\",\n      range: 0\n    };\n    this.url = url;\n  }\n  /** Destroys the BitmapFont object. */\n  destroy() {\n    super.destroy();\n    for (let i = 0; i < this.pages.length; i++) {\n      const { texture } = this.pages[i];\n      texture.destroy(true);\n    }\n    this.pages = null;\n  }\n  /**\n   * Generates and installs a bitmap font with the specified options.\n   * The font will be cached and available for use in BitmapText objects.\n   * @param options - Setup options for font generation\n   * @returns Installed font instance\n   * @example\n   * ```ts\n   * // Install a basic font\n   * BitmapFont.install({\n   *     name: 'Title',\n   *     style: {\n   *         fontFamily: 'Arial',\n   *         fontSize: 32,\n   *         fill: '#ffffff'\n   *     }\n   * });\n   *\n   * // Install with advanced options\n   * BitmapFont.install({\n   *     name: 'Custom',\n   *     style: {\n   *         fontFamily: 'Arial',\n   *         fontSize: 24,\n   *         fill: '#00ff00',\n   *         stroke: { color: '#000000', width: 2 }\n   *     },\n   *     chars: [['a', 'z'], ['A', 'Z'], ['0', '9']],\n   *     resolution: 2,\n   *     padding: 4,\n   *     textureStyle: {\n   *         scaleMode: 'nearest'\n   *     }\n   * });\n   * ```\n   */\n  static install(options) {\n    BitmapFontManager.install(options);\n  }\n  /**\n   * Uninstalls a bitmap font from the cache.\n   * This frees up memory and resources associated with the font.\n   * @param name - The name of the bitmap font to uninstall\n   * @example\n   * ```ts\n   * // Remove a font when it's no longer needed\n   * BitmapFont.uninstall('MyCustomFont');\n   *\n   * // Clear multiple fonts\n   * ['Title', 'Heading', 'Body'].forEach(BitmapFont.uninstall);\n   * ```\n   */\n  static uninstall(name) {\n    BitmapFontManager.uninstall(name);\n  }\n}\n\nexport { BitmapFont };\n//# sourceMappingURL=BitmapFont.mjs.map\n","\"use strict\";\nconst bitmapFontTextParser = {\n  test(data) {\n    return typeof data === \"string\" && data.startsWith(\"info face=\");\n  },\n  parse(txt) {\n    const items = txt.match(/^[a-z]+\\s+.+$/gm);\n    const rawData = {\n      info: [],\n      common: [],\n      page: [],\n      char: [],\n      chars: [],\n      kerning: [],\n      kernings: [],\n      distanceField: []\n    };\n    for (const i in items) {\n      const name = items[i].match(/^[a-z]+/gm)[0];\n      const attributeList = items[i].match(/[a-zA-Z]+=([^\\s\"']+|\"([^\"]*)\")/gm);\n      const itemData = {};\n      for (const i2 in attributeList) {\n        const split = attributeList[i2].split(\"=\");\n        const key = split[0];\n        const strValue = split[1].replace(/\"/gm, \"\");\n        const floatValue = parseFloat(strValue);\n        const value = isNaN(floatValue) ? strValue : floatValue;\n        itemData[key] = value;\n      }\n      rawData[name].push(itemData);\n    }\n    const font = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const [info] = rawData.info;\n    const [common] = rawData.common;\n    const [distanceField] = rawData.distanceField ?? [];\n    if (distanceField) {\n      font.distanceField = {\n        range: parseInt(distanceField.distanceRange, 10),\n        type: distanceField.fieldType\n      };\n    }\n    font.fontSize = parseInt(info.size, 10);\n    font.fontFamily = info.face;\n    font.lineHeight = parseInt(common.lineHeight, 10);\n    const page = rawData.page;\n    for (let i = 0; i < page.length; i++) {\n      font.pages.push({\n        id: parseInt(page[i].id, 10) || 0,\n        file: page[i].file\n      });\n    }\n    const map = {};\n    font.baseLineOffset = font.lineHeight - parseInt(common.base, 10);\n    const char = rawData.char;\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.id, 10);\n      let letter = charNode.letter ?? charNode.char ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      font.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.page, 10) || 0,\n        x: parseInt(charNode.x, 10),\n        y: parseInt(charNode.y, 10),\n        width: parseInt(charNode.width, 10),\n        height: parseInt(charNode.height, 10),\n        xOffset: parseInt(charNode.xoffset, 10),\n        yOffset: parseInt(charNode.yoffset, 10),\n        xAdvance: parseInt(charNode.xadvance, 10),\n        kerning: {}\n      };\n    }\n    const kerning = rawData.kerning || [];\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].first, 10);\n      const second = parseInt(kerning[i].second, 10);\n      const amount = parseInt(kerning[i].amount, 10);\n      font.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return font;\n  }\n};\n\nexport { bitmapFontTextParser };\n//# sourceMappingURL=bitmapFontTextParser.mjs.map\n","\"use strict\";\nconst bitmapFontXMLParser = {\n  test(data) {\n    const xml = data;\n    return typeof xml !== \"string\" && \"getElementsByTagName\" in xml && xml.getElementsByTagName(\"page\").length && xml.getElementsByTagName(\"info\")[0].getAttribute(\"face\") !== null;\n  },\n  parse(xml) {\n    const data = {\n      chars: {},\n      pages: [],\n      lineHeight: 0,\n      fontSize: 0,\n      fontFamily: \"\",\n      distanceField: null,\n      baseLineOffset: 0\n    };\n    const info = xml.getElementsByTagName(\"info\")[0];\n    const common = xml.getElementsByTagName(\"common\")[0];\n    const distanceField = xml.getElementsByTagName(\"distanceField\")[0];\n    if (distanceField) {\n      data.distanceField = {\n        type: distanceField.getAttribute(\"fieldType\"),\n        range: parseInt(distanceField.getAttribute(\"distanceRange\"), 10)\n      };\n    }\n    const page = xml.getElementsByTagName(\"page\");\n    const char = xml.getElementsByTagName(\"char\");\n    const kerning = xml.getElementsByTagName(\"kerning\");\n    data.fontSize = parseInt(info.getAttribute(\"size\"), 10);\n    data.fontFamily = info.getAttribute(\"face\");\n    data.lineHeight = parseInt(common.getAttribute(\"lineHeight\"), 10);\n    for (let i = 0; i < page.length; i++) {\n      data.pages.push({\n        id: parseInt(page[i].getAttribute(\"id\"), 10) || 0,\n        file: page[i].getAttribute(\"file\")\n      });\n    }\n    const map = {};\n    data.baseLineOffset = data.lineHeight - parseInt(common.getAttribute(\"base\"), 10);\n    for (let i = 0; i < char.length; i++) {\n      const charNode = char[i];\n      const id = parseInt(charNode.getAttribute(\"id\"), 10);\n      let letter = charNode.getAttribute(\"letter\") ?? charNode.getAttribute(\"char\") ?? String.fromCharCode(id);\n      if (letter === \"space\")\n        letter = \" \";\n      map[id] = letter;\n      data.chars[letter] = {\n        id,\n        // texture deets..\n        page: parseInt(charNode.getAttribute(\"page\"), 10) || 0,\n        x: parseInt(charNode.getAttribute(\"x\"), 10),\n        y: parseInt(charNode.getAttribute(\"y\"), 10),\n        width: parseInt(charNode.getAttribute(\"width\"), 10),\n        height: parseInt(charNode.getAttribute(\"height\"), 10),\n        // render deets..\n        xOffset: parseInt(charNode.getAttribute(\"xoffset\"), 10),\n        yOffset: parseInt(charNode.getAttribute(\"yoffset\"), 10),\n        // + baseLineOffset,\n        xAdvance: parseInt(charNode.getAttribute(\"xadvance\"), 10),\n        kerning: {}\n      };\n    }\n    for (let i = 0; i < kerning.length; i++) {\n      const first = parseInt(kerning[i].getAttribute(\"first\"), 10);\n      const second = parseInt(kerning[i].getAttribute(\"second\"), 10);\n      const amount = parseInt(kerning[i].getAttribute(\"amount\"), 10);\n      data.chars[map[second]].kerning[map[first]] = amount;\n    }\n    return data;\n  }\n};\n\nexport { bitmapFontXMLParser };\n//# sourceMappingURL=bitmapFontXMLParser.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { bitmapFontXMLParser } from './bitmapFontXMLParser.mjs';\n\n\"use strict\";\nconst bitmapFontXMLStringParser = {\n  test(data) {\n    if (typeof data === \"string\" && data.match(/<font(\\s|>)/)) {\n      return bitmapFontXMLParser.test(DOMAdapter.get().parseXML(data));\n    }\n    return false;\n  },\n  parse(data) {\n    return bitmapFontXMLParser.parse(DOMAdapter.get().parseXML(data));\n  }\n};\n\nexport { bitmapFontXMLStringParser };\n//# sourceMappingURL=bitmapFontXMLStringParser.mjs.map\n","import { LoaderParserPriority } from '../../../assets/loader/parsers/LoaderParser.mjs';\nimport { copySearchParams } from '../../../assets/utils/copySearchParams.mjs';\nimport { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { path } from '../../../utils/path.mjs';\nimport { BitmapFont } from '../BitmapFont.mjs';\nimport { bitmapFontTextParser } from './bitmapFontTextParser.mjs';\nimport { bitmapFontXMLStringParser } from './bitmapFontXMLStringParser.mjs';\n\n\"use strict\";\nconst validExtensions = [\".xml\", \".fnt\"];\nconst bitmapFontCachePlugin = {\n  extension: {\n    type: ExtensionType.CacheParser,\n    name: \"cacheBitmapFont\"\n  },\n  test: (asset) => asset instanceof BitmapFont,\n  getCacheableAssets(keys, asset) {\n    const out = {};\n    keys.forEach((key) => {\n      out[key] = asset;\n      out[`${key}-bitmap`] = asset;\n    });\n    out[`${asset.fontFamily}-bitmap`] = asset;\n    return out;\n  }\n};\nconst loadBitmapFont = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Normal\n  },\n  /** used for deprecation purposes */\n  name: \"loadBitmapFont\",\n  id: \"bitmap-font\",\n  test(url) {\n    return validExtensions.includes(path.extname(url).toLowerCase());\n  },\n  async testParse(data) {\n    return bitmapFontTextParser.test(data) || bitmapFontXMLStringParser.test(data);\n  },\n  async parse(asset, data, loader) {\n    const bitmapFontData = bitmapFontTextParser.test(asset) ? bitmapFontTextParser.parse(asset) : bitmapFontXMLStringParser.parse(asset);\n    const { src } = data;\n    const { pages } = bitmapFontData;\n    const textureUrls = [];\n    const textureOptions = bitmapFontData.distanceField ? {\n      scaleMode: \"linear\",\n      alphaMode: \"premultiply-alpha-on-upload\",\n      autoGenerateMipmaps: false,\n      resolution: 1\n    } : {};\n    for (let i = 0; i < pages.length; ++i) {\n      const pageFile = pages[i].file;\n      let imagePath = path.join(path.dirname(src), pageFile);\n      imagePath = copySearchParams(imagePath, src);\n      textureUrls.push({\n        src: imagePath,\n        data: textureOptions\n      });\n    }\n    const loadedTextures = await loader.load(textureUrls);\n    const textures = textureUrls.map((url) => loadedTextures[url.src]);\n    const bitmapFont = new BitmapFont({\n      data: bitmapFontData,\n      textures\n    }, src);\n    return bitmapFont;\n  },\n  async load(url, _options) {\n    const response = await DOMAdapter.get().fetch(url);\n    return await response.text();\n  },\n  async unload(bitmapFont, _resolvedAsset, loader) {\n    await Promise.all(bitmapFont.pages.map((page) => loader.unload(page.texture.source._sourceOrigin)));\n    bitmapFont.destroy();\n  }\n};\n\nexport { bitmapFontCachePlugin, loadBitmapFont };\n//# sourceMappingURL=loadBitmapFont.mjs.map\n","\"use strict\";\nclass BackgroundLoader {\n  /**\n   * @param loader\n   * @param verbose - should the loader log to the console\n   */\n  constructor(loader, verbose = false) {\n    this._loader = loader;\n    this._assetList = [];\n    this._isLoading = false;\n    this._maxConcurrent = 1;\n    this.verbose = verbose;\n  }\n  /**\n   * Adds assets to the background loading queue. Assets are loaded one at a time to minimize\n   * performance impact.\n   * @param assetUrls - Array of resolved assets to load in the background\n   * @example\n   * ```ts\n   * // Add assets to background load queue\n   * backgroundLoader.add([\n   *     { src: 'images/level1/bg.png' },\n   *     { src: 'images/level1/characters.json' }\n   * ]);\n   *\n   * // Assets will load sequentially in the background\n   * // The loader automatically pauses when high-priority loads occur\n   * // e.g. Assets.load() is called\n   * ```\n   * @remarks\n   * - Assets are loaded one at a time to minimize performance impact\n   * - Loading automatically pauses when Assets.load() is called\n   * - No progress tracking is available for background loading\n   * - Assets are cached as they complete loading\n   * @internal\n   */\n  add(assetUrls) {\n    assetUrls.forEach((a) => {\n      this._assetList.push(a);\n    });\n    if (this.verbose) {\n      console.log(\"[BackgroundLoader] assets: \", this._assetList);\n    }\n    if (this._isActive && !this._isLoading) {\n      void this._next();\n    }\n  }\n  /**\n   * Loads the next set of assets. Will try to load as many assets as it can at the same time.\n   *\n   * The max assets it will try to load at one time will be 4.\n   */\n  async _next() {\n    if (this._assetList.length && this._isActive) {\n      this._isLoading = true;\n      const toLoad = [];\n      const toLoadAmount = Math.min(this._assetList.length, this._maxConcurrent);\n      for (let i = 0; i < toLoadAmount; i++) {\n        toLoad.push(this._assetList.pop());\n      }\n      await this._loader.load(toLoad);\n      this._isLoading = false;\n      void this._next();\n    }\n  }\n  /**\n   * Controls the active state of the background loader. When active, the loader will\n   * continue processing its queue. When inactive, loading is paused.\n   * @returns Whether the background loader is currently active\n   * @example\n   * ```ts\n   * // Pause background loading\n   * backgroundLoader.active = false;\n   *\n   * // Resume background loading\n   * backgroundLoader.active = true;\n   *\n   * // Check current state\n   * console.log(backgroundLoader.active); // true/false\n   *\n   * // Common use case: Pause during intensive operations\n   * backgroundLoader.active = false;  // Pause background loading\n   * ... // Perform high-priority tasks\n   * backgroundLoader.active = true;   // Resume background loading\n   * ```\n   * @remarks\n   * - Setting to true resumes loading immediately\n   * - Setting to false pauses after current asset completes\n   * - Background loading is automatically paused during `Assets.load()`\n   * - Assets already being loaded will complete even when set to false\n   */\n  get active() {\n    return this._isActive;\n  }\n  set active(value) {\n    if (this._isActive === value)\n      return;\n    this._isActive = value;\n    if (value && !this._isLoading) {\n      void this._next();\n    }\n  }\n}\n\nexport { BackgroundLoader };\n//# sourceMappingURL=BackgroundLoader.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\n\n\"use strict\";\nconst cacheTextureArray = {\n  extension: {\n    type: ExtensionType.CacheParser,\n    name: \"cacheTextureArray\"\n  },\n  test: (asset) => Array.isArray(asset) && asset.every((t) => t instanceof Texture),\n  getCacheableAssets: (keys, asset) => {\n    const out = {};\n    keys.forEach((key) => {\n      asset.forEach((item, i) => {\n        out[key + (i === 0 ? \"\" : i + 1)] = item;\n      });\n    });\n    return out;\n  }\n};\n\nexport { cacheTextureArray };\n//# sourceMappingURL=cacheTextureArray.mjs.map\n","\"use strict\";\nasync function testImageFormat(imageData) {\n  if (\"Image\" in globalThis) {\n    return new Promise((resolve) => {\n      const image = new Image();\n      image.onload = () => {\n        resolve(true);\n      };\n      image.onerror = () => {\n        resolve(false);\n      };\n      image.src = imageData;\n    });\n  }\n  if (\"createImageBitmap\" in globalThis && \"fetch\" in globalThis) {\n    try {\n      const blob = await (await fetch(imageData)).blob();\n      await createImageBitmap(blob);\n    } catch (_e) {\n      return false;\n    }\n    return true;\n  }\n  return false;\n}\n\nexport { testImageFormat };\n//# sourceMappingURL=testImageFormat.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testImageFormat } from '../utils/testImageFormat.mjs';\n\n\"use strict\";\nconst detectAvif = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 1\n  },\n  test: async () => testImageFormat(\n    // eslint-disable-next-line max-len\n    \"data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A=\"\n  ),\n  add: async (formats) => [...formats, \"avif\"],\n  remove: async (formats) => formats.filter((f) => f !== \"avif\")\n};\n\nexport { detectAvif };\n//# sourceMappingURL=detectAvif.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\n\n\"use strict\";\nconst imageFormats = [\"png\", \"jpg\", \"jpeg\"];\nconst detectDefaults = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: -1\n  },\n  test: () => Promise.resolve(true),\n  add: async (formats) => [...formats, ...imageFormats],\n  remove: async (formats) => formats.filter((f) => !imageFormats.includes(f))\n};\n\nexport { detectDefaults };\n//# sourceMappingURL=detectDefaults.mjs.map\n","\"use strict\";\nconst inWorker = \"WorkerGlobalScope\" in globalThis && globalThis instanceof globalThis.WorkerGlobalScope;\nfunction testVideoFormat(mimeType) {\n  if (inWorker) {\n    return false;\n  }\n  const video = document.createElement(\"video\");\n  return video.canPlayType(mimeType) !== \"\";\n}\n\nexport { testVideoFormat };\n//# sourceMappingURL=testVideoFormat.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectMp4 = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/mp4\"),\n  add: async (formats) => [...formats, \"mp4\", \"m4v\"],\n  remove: async (formats) => formats.filter((f) => f !== \"mp4\" && f !== \"m4v\")\n};\n\nexport { detectMp4 };\n//# sourceMappingURL=detectMp4.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectOgv = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/ogg\"),\n  add: async (formats) => [...formats, \"ogv\"],\n  remove: async (formats) => formats.filter((f) => f !== \"ogv\")\n};\n\nexport { detectOgv };\n//# sourceMappingURL=detectOgv.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testVideoFormat } from '../utils/testVideoFormat.mjs';\n\n\"use strict\";\nconst detectWebm = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testVideoFormat(\"video/webm\"),\n  add: async (formats) => [...formats, \"webm\"],\n  remove: async (formats) => formats.filter((f) => f !== \"webm\")\n};\n\nexport { detectWebm };\n//# sourceMappingURL=detectWebm.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { testImageFormat } from '../utils/testImageFormat.mjs';\n\n\"use strict\";\nconst detectWebp = {\n  extension: {\n    type: ExtensionType.DetectionParser,\n    priority: 0\n  },\n  test: async () => testImageFormat(\n    \"data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA=\"\n  ),\n  add: async (formats) => [...formats, \"webp\"],\n  remove: async (formats) => formats.filter((f) => f !== \"webp\")\n};\n\nexport { detectWebp };\n//# sourceMappingURL=detectWebp.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { path } from '../../utils/path.mjs';\nimport { convertToList } from '../utils/convertToList.mjs';\nimport { isSingleItem } from '../utils/isSingleItem.mjs';\n\n\"use strict\";\nconst _Loader = class _Loader {\n  constructor() {\n    /**\n     * Options for loading assets with the loader.\n     * These options will be used as defaults for all load calls made with this loader instance.\n     * They can be overridden by passing options directly to the load method.\n     * @example\n     * ```ts\n     * // Create a loader with custom default options\n     * const loader = new Loader();\n     * loader.loadOptions = {\n     *   strategy: 'skip', // Default strategy to 'skip'\n     *   retryCount: 5,   // Default retry count to 5\n     *   retryDelay: 500, // Default retry delay to 500ms\n     * };\n     *\n     * // This load call will use the loader's default options\n     * await loader.load('image1.png');\n     */\n    this.loadOptions = { ..._Loader.defaultOptions };\n    this._parsers = [];\n    this._parsersValidated = false;\n    /**\n     * All loader parsers registered\n     * @type {assets.LoaderParser[]}\n     */\n    this.parsers = new Proxy(this._parsers, {\n      set: (target, key, value) => {\n        this._parsersValidated = false;\n        target[key] = value;\n        return true;\n      }\n    });\n    /** Cache loading promises that ae currently active */\n    this.promiseCache = {};\n  }\n  /** function used for testing */\n  reset() {\n    this._parsersValidated = false;\n    this.promiseCache = {};\n  }\n  /**\n   * Used internally to generate a promise for the asset to be loaded.\n   * @param url - The URL to be loaded\n   * @param data - any custom additional information relevant to the asset being loaded\n   * @returns - a promise that will resolve to an Asset for example a Texture of a JSON object\n   */\n  _getLoadPromiseAndParser(url, data) {\n    const result = {\n      promise: null,\n      parser: null\n    };\n    result.promise = (async () => {\n      let asset = null;\n      let parser = null;\n      if (data.parser || data.loadParser) {\n        parser = this._parserHash[data.parser || data.loadParser];\n        if (data.loadParser) {\n          warn(\n            `[Assets] \"loadParser\" is deprecated, use \"parser\" instead for ${url}`\n          );\n        }\n        if (!parser) {\n          warn(\n            `[Assets] specified load parser \"${data.parser || data.loadParser}\" not found while loading ${url}`\n          );\n        }\n      }\n      if (!parser) {\n        for (let i = 0; i < this.parsers.length; i++) {\n          const parserX = this.parsers[i];\n          if (parserX.load && parserX.test?.(url, data, this)) {\n            parser = parserX;\n            break;\n          }\n        }\n        if (!parser) {\n          warn(`[Assets] ${url} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`);\n          return null;\n        }\n      }\n      asset = await parser.load(url, data, this);\n      result.parser = parser;\n      for (let i = 0; i < this.parsers.length; i++) {\n        const parser2 = this.parsers[i];\n        if (parser2.parse) {\n          if (parser2.parse && await parser2.testParse?.(asset, data, this)) {\n            asset = await parser2.parse(asset, data, this) || asset;\n            result.parser = parser2;\n          }\n        }\n      }\n      return asset;\n    })();\n    return result;\n  }\n  async load(assetsToLoadIn, onProgressOrOptions) {\n    if (!this._parsersValidated) {\n      this._validateParsers();\n    }\n    const options = typeof onProgressOrOptions === \"function\" ? { ..._Loader.defaultOptions, ...this.loadOptions, onProgress: onProgressOrOptions } : { ..._Loader.defaultOptions, ...this.loadOptions, ...onProgressOrOptions || {} };\n    const { onProgress, onError, strategy, retryCount, retryDelay } = options;\n    let count = 0;\n    const assets = {};\n    const singleAsset = isSingleItem(assetsToLoadIn);\n    const assetsToLoad = convertToList(assetsToLoadIn, (item) => ({\n      alias: [item],\n      src: item,\n      data: {}\n    }));\n    const total = assetsToLoad.reduce((sum, asset) => sum + (asset.progressSize || 1), 0);\n    const promises = assetsToLoad.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      if (assets[asset.src])\n        return;\n      await this._loadAssetWithRetry(url, asset, { onProgress, onError, strategy, retryCount, retryDelay }, assets);\n      count += asset.progressSize || 1;\n      if (onProgress)\n        onProgress(count / total);\n    });\n    await Promise.all(promises);\n    return singleAsset ? assets[assetsToLoad[0].src] : assets;\n  }\n  /**\n   * Unloads one or more assets. Any unloaded assets will be destroyed, freeing up memory for your app.\n   * The parser that created the asset, will be the one that unloads it.\n   * @example\n   * // Single asset:\n   * const asset = await Loader.load('cool.png');\n   *\n   * await Loader.unload('cool.png');\n   *\n   * console.log(asset.destroyed); // true\n   * @param assetsToUnloadIn - urls that you want to unload, or a single one!\n   */\n  async unload(assetsToUnloadIn) {\n    const assetsToUnload = convertToList(assetsToUnloadIn, (item) => ({\n      alias: [item],\n      src: item\n    }));\n    const promises = assetsToUnload.map(async (asset) => {\n      const url = path.toAbsolute(asset.src);\n      const loadPromise = this.promiseCache[url];\n      if (loadPromise) {\n        const loadedAsset = await loadPromise.promise;\n        delete this.promiseCache[url];\n        await loadPromise.parser?.unload?.(loadedAsset, asset, this);\n      }\n    });\n    await Promise.all(promises);\n  }\n  /** validates our parsers, right now it only checks for name conflicts but we can add more here as required! */\n  _validateParsers() {\n    this._parsersValidated = true;\n    this._parserHash = this._parsers.filter((parser) => parser.name || parser.id).reduce((hash, parser) => {\n      if (!parser.name && !parser.id) {\n        warn(`[Assets] parser should have an id`);\n      } else if (hash[parser.name] || hash[parser.id]) {\n        warn(`[Assets] parser id conflict \"${parser.id}\"`);\n      }\n      hash[parser.name] = parser;\n      if (parser.id)\n        hash[parser.id] = parser;\n      return hash;\n    }, {});\n  }\n  async _loadAssetWithRetry(url, asset, options, assets) {\n    let attempt = 0;\n    const { onError, strategy, retryCount, retryDelay } = options;\n    const wait = (ms) => new Promise((r) => setTimeout(r, ms));\n    while (true) {\n      try {\n        if (!this.promiseCache[url]) {\n          this.promiseCache[url] = this._getLoadPromiseAndParser(url, asset);\n        }\n        assets[asset.src] = await this.promiseCache[url].promise;\n        return;\n      } catch (e) {\n        delete this.promiseCache[url];\n        delete assets[asset.src];\n        attempt++;\n        const isLast = strategy !== \"retry\" || attempt > retryCount;\n        if (strategy === \"retry\" && !isLast) {\n          if (onError)\n            onError(e, asset);\n          await wait(retryDelay);\n          continue;\n        }\n        if (strategy === \"skip\") {\n          if (onError)\n            onError(e, asset);\n          return;\n        }\n        if (onError)\n          onError(e, asset);\n        throw new Error(`[Loader.load] Failed to load ${url}.\n${e}`);\n      }\n    }\n  }\n};\n/**\n * Default options for loading assets\n * @example\n * ```ts\n * // Change default load options globally\n * Loader.defaultOptions = {\n *   strategy: 'skip', // Change default strategy to 'skip'\n *   retryCount: 5,   // Change default retry count to 5\n *   retryDelay: 500, // Change default retry delay to 500ms\n * };\n * ```\n */\n_Loader.defaultOptions = {\n  onProgress: void 0,\n  onError: void 0,\n  strategy: \"throw\",\n  retryCount: 3,\n  retryDelay: 250\n};\nlet Loader = _Loader;\n\nexport { Loader };\n//# sourceMappingURL=Loader.mjs.map\n","\"use strict\";\nfunction checkDataUrl(url, mimes) {\n  if (Array.isArray(mimes)) {\n    for (const mime of mimes) {\n      if (url.startsWith(`data:${mime}`))\n        return true;\n    }\n    return false;\n  }\n  return url.startsWith(`data:${mimes}`);\n}\n\nexport { checkDataUrl };\n//# sourceMappingURL=checkDataUrl.mjs.map\n","import { path } from '../../utils/path.mjs';\n\n\"use strict\";\nfunction checkExtension(url, extension) {\n  const tempURL = url.split(\"?\")[0];\n  const ext = path.extname(tempURL).toLowerCase();\n  if (Array.isArray(extension)) {\n    return extension.includes(ext);\n  }\n  return ext === extension;\n}\n\nexport { checkExtension };\n//# sourceMappingURL=checkExtension.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validJSONExtension = \".json\";\nconst validJSONMIME = \"application/json\";\nconst loadJson = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low\n  },\n  /** used for deprecation purposes */\n  name: \"loadJson\",\n  id: \"json\",\n  test(url) {\n    return checkDataUrl(url, validJSONMIME) || checkExtension(url, validJSONExtension);\n  },\n  async load(url) {\n    const response = await DOMAdapter.get().fetch(url);\n    const json = await response.json();\n    return json;\n  }\n};\n\nexport { loadJson };\n//# sourceMappingURL=loadJson.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validTXTExtension = \".txt\";\nconst validTXTMIME = \"text/plain\";\nconst loadTxt = {\n  /** used for deprecation purposes */\n  name: \"loadTxt\",\n  id: \"text\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low,\n    name: \"loadTxt\"\n  },\n  test(url) {\n    return checkDataUrl(url, validTXTMIME) || checkExtension(url, validTXTExtension);\n  },\n  async load(url) {\n    const response = await DOMAdapter.get().fetch(url);\n    const txt = await response.text();\n    return txt;\n  }\n};\n\nexport { loadTxt };\n//# sourceMappingURL=loadTxt.mjs.map\n","import { DOMAdapter } from '../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { warn } from '../../../utils/logging/warn.mjs';\nimport { path } from '../../../utils/path.mjs';\nimport { Cache } from '../../cache/Cache.mjs';\nimport { checkDataUrl } from '../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from './LoaderParser.mjs';\n\n\"use strict\";\nconst validWeights = [\n  \"normal\",\n  \"bold\",\n  \"100\",\n  \"200\",\n  \"300\",\n  \"400\",\n  \"500\",\n  \"600\",\n  \"700\",\n  \"800\",\n  \"900\"\n];\nconst validFontExtensions = [\".ttf\", \".otf\", \".woff\", \".woff2\"];\nconst validFontMIMEs = [\n  \"font/ttf\",\n  \"font/otf\",\n  \"font/woff\",\n  \"font/woff2\"\n];\nconst CSS_IDENT_TOKEN_REGEX = /^(--|-?[A-Z_])[0-9A-Z_-]*$/i;\nfunction getFontFamilyName(url) {\n  const ext = path.extname(url);\n  const name = path.basename(url, ext);\n  const nameWithSpaces = name.replace(/(-|_)/g, \" \");\n  const nameTokens = nameWithSpaces.toLowerCase().split(\" \").map((word) => word.charAt(0).toUpperCase() + word.slice(1));\n  let valid = nameTokens.length > 0;\n  for (const token of nameTokens) {\n    if (!token.match(CSS_IDENT_TOKEN_REGEX)) {\n      valid = false;\n      break;\n    }\n  }\n  let fontFamilyName = nameTokens.join(\" \");\n  if (!valid) {\n    fontFamilyName = `\"${fontFamilyName.replace(/[\\\\\"]/g, \"\\\\$&\")}\"`;\n  }\n  return fontFamilyName;\n}\nconst validURICharactersRegex = /^[0-9A-Za-z%:/?#\\[\\]@!\\$&'()\\*\\+,;=\\-._~]*$/;\nfunction encodeURIWhenNeeded(uri) {\n  if (validURICharactersRegex.test(uri)) {\n    return uri;\n  }\n  return encodeURI(uri);\n}\nconst loadWebFont = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low\n  },\n  /** used for deprecation purposes */\n  name: \"loadWebFont\",\n  id: \"web-font\",\n  test(url) {\n    return checkDataUrl(url, validFontMIMEs) || checkExtension(url, validFontExtensions);\n  },\n  async load(url, options) {\n    const fonts = DOMAdapter.get().getFontFaceSet();\n    if (fonts) {\n      const fontFaces = [];\n      const name = options.data?.family ?? getFontFamilyName(url);\n      const weights = options.data?.weights?.filter((weight) => validWeights.includes(weight)) ?? [\"normal\"];\n      const data = options.data ?? {};\n      for (let i = 0; i < weights.length; i++) {\n        const weight = weights[i];\n        const font = new FontFace(name, `url(${encodeURIWhenNeeded(url)})`, {\n          ...data,\n          weight\n        });\n        await font.load();\n        fonts.add(font);\n        fontFaces.push(font);\n      }\n      if (Cache.has(`${name}-and-url`)) {\n        const cached = Cache.get(`${name}-and-url`);\n        cached.entries.push({ url, faces: fontFaces });\n      } else {\n        Cache.set(`${name}-and-url`, {\n          entries: [{ url, faces: fontFaces }]\n        });\n      }\n      return fontFaces.length === 1 ? fontFaces[0] : fontFaces;\n    }\n    warn(\"[loadWebFont] FontFace API is not supported. Skipping loading font\");\n    return null;\n  },\n  unload(font) {\n    const fonts = Array.isArray(font) ? font : [font];\n    const fontFamily = fonts[0].family;\n    const cached = Cache.get(`${fontFamily}-and-url`);\n    const entry = cached.entries.find((f) => f.faces.some((t) => fonts.indexOf(t) !== -1));\n    entry.faces = entry.faces.filter((f) => fonts.indexOf(f) === -1);\n    if (entry.faces.length === 0) {\n      cached.entries = cached.entries.filter((f) => f !== entry);\n    }\n    fonts.forEach((t) => {\n      DOMAdapter.get().getFontFaceSet().delete(t);\n    });\n    if (cached.entries.length === 0) {\n      Cache.remove(`${fontFamily}-and-url`);\n    }\n  }\n};\n\nexport { getFontFamilyName, loadWebFont };\n//# sourceMappingURL=loadWebFont.mjs.map\n","import { Resolver } from '../../assets/resolver/Resolver.mjs';\n\n\"use strict\";\nfunction getResolutionOfUrl(url, defaultValue = 1) {\n  const resolution = Resolver.RETINA_PREFIX?.exec(url);\n  if (resolution) {\n    return parseFloat(resolution[1]);\n  }\n  return defaultValue;\n}\n\nexport { getResolutionOfUrl };\n//# sourceMappingURL=getResolutionOfUrl.mjs.map\n","import { Texture } from '../../../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { warn } from '../../../../../utils/logging/warn.mjs';\nimport { Cache } from '../../../../cache/Cache.mjs';\n\n\"use strict\";\nfunction createTexture(source, loader, url) {\n  source.label = url;\n  source._sourceOrigin = url;\n  const texture = new Texture({\n    source,\n    label: url\n  });\n  const unload = () => {\n    delete loader.promiseCache[url];\n    if (Cache.has(url)) {\n      Cache.remove(url);\n    }\n  };\n  texture.source.once(\"destroy\", () => {\n    if (loader.promiseCache[url]) {\n      warn(\"[Assets] A TextureSource managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the TextureSource.\");\n      unload();\n    }\n  });\n  texture.once(\"destroy\", () => {\n    if (!source.destroyed) {\n      warn(\"[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture.\");\n      unload();\n    }\n  });\n  return texture;\n}\n\nexport { createTexture };\n//# sourceMappingURL=createTexture.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { GraphicsContext } from '../../../../scene/graphics/shared/GraphicsContext.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { LoaderParserPriority } from '../LoaderParser.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validSVGExtension = \".svg\";\nconst validSVGMIME = \"image/svg+xml\";\nconst loadSvg = {\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.Low,\n    name: \"loadSVG\"\n  },\n  /** used for deprecation purposes */\n  name: \"loadSVG\",\n  id: \"svg\",\n  config: {\n    crossOrigin: \"anonymous\",\n    parseAsGraphicsContext: false\n  },\n  test(url) {\n    return checkDataUrl(url, validSVGMIME) || checkExtension(url, validSVGExtension);\n  },\n  async load(url, asset, loader) {\n    if (asset.data?.parseAsGraphicsContext ?? this.config.parseAsGraphicsContext) {\n      return loadAsGraphics(url);\n    }\n    return loadAsTexture(url, asset, loader, this.config.crossOrigin);\n  },\n  unload(asset) {\n    asset.destroy(true);\n  }\n};\nasync function loadAsTexture(url, asset, loader, crossOrigin) {\n  const response = await DOMAdapter.get().fetch(url);\n  const image = DOMAdapter.get().createImage();\n  image.src = `data:image/svg+xml;charset=utf-8,${encodeURIComponent(await response.text())}`;\n  image.crossOrigin = crossOrigin;\n  await image.decode();\n  const width = asset.data?.width ?? image.width;\n  const height = asset.data?.height ?? image.height;\n  const resolution = asset.data?.resolution || getResolutionOfUrl(url);\n  const canvasWidth = Math.ceil(width * resolution);\n  const canvasHeight = Math.ceil(height * resolution);\n  const canvas = DOMAdapter.get().createCanvas(canvasWidth, canvasHeight);\n  const context = canvas.getContext(\"2d\");\n  context.imageSmoothingEnabled = true;\n  context.imageSmoothingQuality = \"high\";\n  context.drawImage(image, 0, 0, width * resolution, height * resolution);\n  const { parseAsGraphicsContext: _p, ...rest } = asset.data ?? {};\n  const base = new ImageSource({\n    resource: canvas,\n    alphaMode: \"premultiply-alpha-on-upload\",\n    resolution,\n    ...rest\n  });\n  return createTexture(base, loader, url);\n}\nasync function loadAsGraphics(url) {\n  const response = await DOMAdapter.get().fetch(url);\n  const svgSource = await response.text();\n  const context = new GraphicsContext();\n  context.svg(svgSource);\n  return context;\n}\n\nexport { loadSvg };\n//# sourceMappingURL=loadSVG.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    const WHITE_PNG = \\\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=\\\";\\n    async function checkImageBitmap() {\\n      try {\\n        if (typeof createImageBitmap !== \\\"function\\\")\\n          return false;\\n        const response = await fetch(WHITE_PNG);\\n        const imageBlob = await response.blob();\\n        const imageBitmap = await createImageBitmap(imageBlob);\\n        return imageBitmap.width === 1 && imageBitmap.height === 1;\\n      } catch (_e) {\\n        return false;\\n      }\\n    }\\n    void checkImageBitmap().then((result) => {\\n      self.postMessage(result);\\n    });\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=checkImageBitmap.worker.mjs.map\n","const WORKER_CODE = \"(function () {\\n    'use strict';\\n\\n    async function loadImageBitmap(url, alphaMode) {\\n      const response = await fetch(url);\\n      if (!response.ok) {\\n        throw new Error(`[WorkerManager.loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\\n      }\\n      const imageBlob = await response.blob();\\n      return alphaMode === \\\"premultiplied-alpha\\\" ? createImageBitmap(imageBlob, { premultiplyAlpha: \\\"none\\\" }) : createImageBitmap(imageBlob);\\n    }\\n    self.onmessage = async (event) => {\\n      try {\\n        const imageBitmap = await loadImageBitmap(event.data.data[0], event.data.data[1]);\\n        self.postMessage({\\n          data: imageBitmap,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        }, [imageBitmap]);\\n      } catch (e) {\\n        self.postMessage({\\n          error: e,\\n          uuid: event.data.uuid,\\n          id: event.data.id\\n        });\\n      }\\n    };\\n\\n})();\\n\";\nlet WORKER_URL = null;\nclass WorkerInstance\n{\n    constructor()\n    {\n        if (!WORKER_URL)\n        {\n            WORKER_URL = URL.createObjectURL(new Blob([WORKER_CODE], { type: 'application/javascript' }));\n        }\n        this.worker = new Worker(WORKER_URL);\n    }\n}\nWorkerInstance.revokeObjectURL = function revokeObjectURL()\n{\n    if (WORKER_URL)\n    {\n        URL.revokeObjectURL(WORKER_URL);\n        WORKER_URL = null;\n    }\n};\n\nexport { WorkerInstance as default };\n//# sourceMappingURL=loadImageBitmap.worker.mjs.map\n","import WorkerInstance from '../../../_virtual/checkImageBitmap.worker.mjs';\nimport WorkerInstance$1 from '../../../_virtual/loadImageBitmap.worker.mjs';\n\n\"use strict\";\nlet UUID = 0;\nlet MAX_WORKERS;\nclass WorkerManagerClass {\n  constructor() {\n    /** Whether the worker manager has been initialized */\n    this._initialized = false;\n    /** Current number of created workers (used to enforce MAX_WORKERS limit) */\n    this._createdWorkers = 0;\n    this._workerPool = [];\n    this._queue = [];\n    this._resolveHash = {};\n  }\n  /**\n   * Checks if ImageBitmap is supported in the current environment.\n   *\n   * This method uses a dedicated worker to test ImageBitmap support\n   * and caches the result for subsequent calls.\n   * @returns Promise that resolves to true if ImageBitmap is supported, false otherwise\n   */\n  isImageBitmapSupported() {\n    if (this._isImageBitmapSupported !== void 0)\n      return this._isImageBitmapSupported;\n    this._isImageBitmapSupported = new Promise((resolve) => {\n      const { worker } = new WorkerInstance();\n      worker.addEventListener(\"message\", (event) => {\n        worker.terminate();\n        WorkerInstance.revokeObjectURL();\n        resolve(event.data);\n      });\n    });\n    return this._isImageBitmapSupported;\n  }\n  /**\n   * Loads an image as an ImageBitmap using a web worker.\n   * @param src - The source URL or path of the image to load\n   * @param asset - Optional resolved asset containing additional texture source options\n   * @returns Promise that resolves to the loaded ImageBitmap\n   * @example\n   * ```typescript\n   * const bitmap = await WorkerManager.loadImageBitmap('image.png');\n   * const bitmapWithOptions = await WorkerManager.loadImageBitmap('image.png', asset);\n   * ```\n   */\n  loadImageBitmap(src, asset) {\n    return this._run(\"loadImageBitmap\", [src, asset?.data?.alphaMode]);\n  }\n  /**\n   * Initializes the worker pool if not already initialized.\n   * Currently a no-op but reserved for future initialization logic.\n   */\n  async _initWorkers() {\n    if (this._initialized)\n      return;\n    this._initialized = true;\n  }\n  /**\n   * Gets an available worker from the pool or creates a new one if needed.\n   *\n   * Workers are created up to the MAX_WORKERS limit (based on navigator.hardwareConcurrency).\n   * Each worker is configured with a message handler for processing results.\n   * @returns Available worker or undefined if pool is at capacity and no workers are free\n   */\n  _getWorker() {\n    if (MAX_WORKERS === void 0) {\n      MAX_WORKERS = navigator.hardwareConcurrency || 4;\n    }\n    let worker = this._workerPool.pop();\n    if (!worker && this._createdWorkers < MAX_WORKERS) {\n      this._createdWorkers++;\n      worker = new WorkerInstance$1().worker;\n      worker.addEventListener(\"message\", (event) => {\n        this._complete(event.data);\n        this._returnWorker(event.target);\n        this._next();\n      });\n    }\n    return worker;\n  }\n  /**\n   * Returns a worker to the pool after completing a task.\n   * @param worker - The worker to return to the pool\n   */\n  _returnWorker(worker) {\n    this._workerPool.push(worker);\n  }\n  /**\n   * Handles completion of a worker task by resolving or rejecting the corresponding promise.\n   * @param data - Result data from the worker containing uuid, data, and optional error\n   */\n  _complete(data) {\n    if (!this._resolveHash[data.uuid]) {\n      return;\n    }\n    if (data.error !== void 0) {\n      this._resolveHash[data.uuid].reject(data.error);\n    } else {\n      this._resolveHash[data.uuid].resolve(data.data);\n    }\n    delete this._resolveHash[data.uuid];\n  }\n  /**\n   * Executes a task using the worker pool system.\n   *\n   * Queues the task and processes it when a worker becomes available.\n   * @param id - Identifier for the type of task to run\n   * @param args - Arguments to pass to the worker\n   * @returns Promise that resolves with the worker's result\n   */\n  async _run(id, args) {\n    await this._initWorkers();\n    const promise = new Promise((resolve, reject) => {\n      this._queue.push({ id, arguments: args, resolve, reject });\n    });\n    this._next();\n    return promise;\n  }\n  /**\n   * Processes the next item in the queue if workers are available.\n   *\n   * This method is called after worker initialization and when workers\n   * complete tasks to continue processing the queue.\n   */\n  _next() {\n    if (!this._queue.length)\n      return;\n    const worker = this._getWorker();\n    if (!worker) {\n      return;\n    }\n    const toDo = this._queue.pop();\n    const id = toDo.id;\n    this._resolveHash[UUID] = { resolve: toDo.resolve, reject: toDo.reject };\n    worker.postMessage({\n      data: toDo.arguments,\n      uuid: UUID++,\n      id\n    });\n  }\n  /**\n   * Resets the worker manager, terminating all workers and clearing the queue.\n   *\n   * This method:\n   * - Terminates all active workers\n   * - Rejects all pending promises with an error\n   * - Clears all internal state\n   * - Resets initialization flags\n   *\n   * This should be called when the worker manager is no longer needed\n   * to prevent memory leaks and ensure proper cleanup.\n   * @example\n   * ```typescript\n   * // Clean up when shutting down\n   * WorkerManager.reset();\n   * ```\n   */\n  reset() {\n    this._workerPool.forEach((worker) => worker.terminate());\n    this._workerPool.length = 0;\n    Object.values(this._resolveHash).forEach(({ reject }) => {\n      reject?.(new Error(\"WorkerManager has been reset before completion\"));\n    });\n    this._resolveHash = {};\n    this._queue.length = 0;\n    this._initialized = false;\n    this._createdWorkers = 0;\n  }\n}\nconst WorkerManager = new WorkerManagerClass();\n\nexport { WorkerManager };\n//# sourceMappingURL=WorkerManager.mjs.map\n","import { DOMAdapter } from '../../../../environment/adapter.mjs';\nimport { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { ImageSource } from '../../../../rendering/renderers/shared/texture/sources/ImageSource.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { WorkerManager } from '../../workers/WorkerManager.mjs';\nimport { LoaderParserPriority } from '../LoaderParser.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst validImageExtensions = [\".jpeg\", \".jpg\", \".png\", \".webp\", \".avif\"];\nconst validImageMIMEs = [\n  \"image/jpeg\",\n  \"image/png\",\n  \"image/webp\",\n  \"image/avif\"\n];\nasync function loadImageBitmap(url, asset) {\n  const response = await DOMAdapter.get().fetch(url);\n  if (!response.ok) {\n    throw new Error(`[loadImageBitmap] Failed to fetch ${url}: ${response.status} ${response.statusText}`);\n  }\n  const imageBlob = await response.blob();\n  return asset?.data?.alphaMode === \"premultiplied-alpha\" ? createImageBitmap(imageBlob, { premultiplyAlpha: \"none\" }) : createImageBitmap(imageBlob);\n}\nconst loadTextures = {\n  /** used for deprecation purposes */\n  name: \"loadTextures\",\n  id: \"texture\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    priority: LoaderParserPriority.High,\n    name: \"loadTextures\"\n  },\n  config: {\n    preferWorkers: true,\n    preferCreateImageBitmap: true,\n    crossOrigin: \"anonymous\"\n  },\n  test(url) {\n    return checkDataUrl(url, validImageMIMEs) || checkExtension(url, validImageExtensions);\n  },\n  async load(url, asset, loader) {\n    let src = null;\n    if (globalThis.createImageBitmap && this.config.preferCreateImageBitmap) {\n      if (this.config.preferWorkers && await WorkerManager.isImageBitmapSupported()) {\n        src = await WorkerManager.loadImageBitmap(url, asset);\n      } else {\n        src = await loadImageBitmap(url, asset);\n      }\n    } else {\n      src = await new Promise((resolve, reject) => {\n        src = DOMAdapter.get().createImage();\n        src.crossOrigin = this.config.crossOrigin;\n        src.src = url;\n        if (src.complete) {\n          resolve(src);\n        } else {\n          src.onload = () => {\n            resolve(src);\n          };\n          src.onerror = reject;\n        }\n      });\n    }\n    const base = new ImageSource({\n      resource: src,\n      alphaMode: \"premultiply-alpha-on-upload\",\n      resolution: asset.data?.resolution || getResolutionOfUrl(url),\n      ...asset.data\n    });\n    return createTexture(base, loader, url);\n  },\n  unload(texture) {\n    texture.destroy(true);\n  }\n};\n\nexport { loadImageBitmap, loadTextures };\n//# sourceMappingURL=loadTextures.mjs.map\n","import { ExtensionType } from '../../../../extensions/Extensions.mjs';\nimport { VideoSource } from '../../../../rendering/renderers/shared/texture/sources/VideoSource.mjs';\nimport { detectVideoAlphaMode } from '../../../../utils/browser/detectVideoAlphaMode.mjs';\nimport { getResolutionOfUrl } from '../../../../utils/network/getResolutionOfUrl.mjs';\nimport { testVideoFormat } from '../../../detections/utils/testVideoFormat.mjs';\nimport { checkDataUrl } from '../../../utils/checkDataUrl.mjs';\nimport { checkExtension } from '../../../utils/checkExtension.mjs';\nimport { createTexture } from './utils/createTexture.mjs';\n\n\"use strict\";\nconst potentialVideoExtensions = [\".mp4\", \".m4v\", \".webm\", \".ogg\", \".ogv\", \".h264\", \".avi\", \".mov\"];\nlet validVideoExtensions;\nlet validVideoMIMEs;\nfunction crossOrigin(element, url, crossorigin) {\n  if (crossorigin === void 0 && !url.startsWith(\"data:\")) {\n    element.crossOrigin = determineCrossOrigin(url);\n  } else if (crossorigin !== false) {\n    element.crossOrigin = typeof crossorigin === \"string\" ? crossorigin : \"anonymous\";\n  }\n}\nfunction preloadVideo(element) {\n  return new Promise((resolve, reject) => {\n    element.addEventListener(\"canplaythrough\", loaded);\n    element.addEventListener(\"error\", error);\n    element.load();\n    function loaded() {\n      cleanup();\n      resolve();\n    }\n    function error(err) {\n      cleanup();\n      reject(err);\n    }\n    function cleanup() {\n      element.removeEventListener(\"canplaythrough\", loaded);\n      element.removeEventListener(\"error\", error);\n    }\n  });\n}\nfunction determineCrossOrigin(url, loc = globalThis.location) {\n  if (url.startsWith(\"data:\")) {\n    return \"\";\n  }\n  loc || (loc = globalThis.location);\n  const parsedUrl = new URL(url, document.baseURI);\n  if (parsedUrl.hostname !== loc.hostname || parsedUrl.port !== loc.port || parsedUrl.protocol !== loc.protocol) {\n    return \"anonymous\";\n  }\n  return \"\";\n}\nfunction getBrowserSupportedVideoExtensions() {\n  const supportedExtensions = [];\n  const supportedMimes = [];\n  for (const ext of potentialVideoExtensions) {\n    const mimeType = VideoSource.MIME_TYPES[ext.substring(1)] || `video/${ext.substring(1)}`;\n    if (testVideoFormat(mimeType)) {\n      supportedExtensions.push(ext);\n      if (!supportedMimes.includes(mimeType)) {\n        supportedMimes.push(mimeType);\n      }\n    }\n  }\n  return {\n    validVideoExtensions: supportedExtensions,\n    validVideoMime: supportedMimes\n  };\n}\nconst loadVideoTextures = {\n  /** used for deprecation purposes */\n  name: \"loadVideo\",\n  id: \"video\",\n  extension: {\n    type: ExtensionType.LoadParser,\n    name: \"loadVideo\"\n  },\n  test(url) {\n    if (!validVideoExtensions || !validVideoMIMEs) {\n      const { validVideoExtensions: ve, validVideoMime: vm } = getBrowserSupportedVideoExtensions();\n      validVideoExtensions = ve;\n      validVideoMIMEs = vm;\n    }\n    const isValidDataUrl = checkDataUrl(url, validVideoMIMEs);\n    const isValidExtension = checkExtension(url, validVideoExtensions);\n    return isValidDataUrl || isValidExtension;\n  },\n  async load(url, asset, loader) {\n    const options = {\n      ...VideoSource.defaultOptions,\n      resolution: asset.data?.resolution || getResolutionOfUrl(url),\n      alphaMode: asset.data?.alphaMode || await detectVideoAlphaMode(),\n      ...asset.data\n    };\n    const videoElement = document.createElement(\"video\");\n    const attributeMap = {\n      preload: options.autoLoad !== false ? \"auto\" : void 0,\n      \"webkit-playsinline\": options.playsinline !== false ? \"\" : void 0,\n      playsinline: options.playsinline !== false ? \"\" : void 0,\n      muted: options.muted === true ? \"\" : void 0,\n      loop: options.loop === true ? \"\" : void 0,\n      autoplay: options.autoPlay !== false ? \"\" : void 0\n    };\n    Object.keys(attributeMap).forEach((key) => {\n      const value = attributeMap[key];\n      if (value !== void 0)\n        videoElement.setAttribute(key, value);\n    });\n    if (options.muted === true) {\n      videoElement.muted = true;\n    }\n    crossOrigin(videoElement, url, options.crossorigin);\n    const sourceElement = document.createElement(\"source\");\n    let mime;\n    if (options.mime) {\n      mime = options.mime;\n    } else if (url.startsWith(\"data:\")) {\n      mime = url.slice(5, url.indexOf(\";\"));\n    } else if (!url.startsWith(\"blob:\")) {\n      const ext = url.split(\"?\")[0].slice(url.lastIndexOf(\".\") + 1).toLowerCase();\n      mime = VideoSource.MIME_TYPES[ext] || `video/${ext}`;\n    }\n    sourceElement.src = url;\n    if (mime) {\n      sourceElement.type = mime;\n    }\n    return new Promise((resolve) => {\n      const onCanPlay = async () => {\n        const base = new VideoSource({ ...options, resource: videoElement });\n        videoElement.removeEventListener(\"canplay\", onCanPlay);\n        if (asset.data.preload) {\n          await preloadVideo(videoElement);\n        }\n        resolve(createTexture(base, loader, url));\n      };\n      if (options.preload && !options.autoPlay) {\n        videoElement.load();\n      }\n      videoElement.addEventListener(\"canplay\", onCanPlay);\n      videoElement.appendChild(sourceElement);\n    });\n  },\n  unload(texture) {\n    texture.destroy(true);\n  }\n};\n\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo };\n//# sourceMappingURL=loadVideoTextures.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { loadTextures } from '../../loader/parsers/textures/loadTextures.mjs';\nimport { Resolver } from '../Resolver.mjs';\n\n\"use strict\";\nconst resolveTextureUrl = {\n  extension: {\n    type: ExtensionType.ResolveParser,\n    name: \"resolveTexture\"\n  },\n  test: loadTextures.test,\n  parse: (value) => ({\n    resolution: parseFloat(Resolver.RETINA_PREFIX.exec(value)?.[1] ?? \"1\"),\n    format: value.split(\".\").pop(),\n    src: value\n  })\n};\n\nexport { resolveTextureUrl };\n//# sourceMappingURL=resolveTextureUrl.mjs.map\n","import { ExtensionType } from '../../../extensions/Extensions.mjs';\nimport { Resolver } from '../Resolver.mjs';\nimport { resolveTextureUrl } from './resolveTextureUrl.mjs';\n\n\"use strict\";\nconst resolveJsonUrl = {\n  extension: {\n    type: ExtensionType.ResolveParser,\n    priority: -2,\n    name: \"resolveJson\"\n  },\n  test: (value) => Resolver.RETINA_PREFIX.test(value) && value.endsWith(\".json\"),\n  parse: resolveTextureUrl.parse\n};\n\nexport { resolveJsonUrl };\n//# sourceMappingURL=resolveJsonUrl.mjs.map\n","import { extensions, ExtensionType } from '../extensions/Extensions.mjs';\nimport { loadBitmapFont, bitmapFontCachePlugin } from '../scene/text-bitmap/asset/loadBitmapFont.mjs';\nimport { warn } from '../utils/logging/warn.mjs';\nimport { BackgroundLoader } from './BackgroundLoader.mjs';\nimport { Cache } from './cache/Cache.mjs';\nimport { cacheTextureArray } from './cache/parsers/cacheTextureArray.mjs';\nimport { detectAvif } from './detections/parsers/detectAvif.mjs';\nimport { detectDefaults } from './detections/parsers/detectDefaults.mjs';\nimport { detectMp4 } from './detections/parsers/detectMp4.mjs';\nimport { detectOgv } from './detections/parsers/detectOgv.mjs';\nimport { detectWebm } from './detections/parsers/detectWebm.mjs';\nimport { detectWebp } from './detections/parsers/detectWebp.mjs';\nimport { Loader } from './loader/Loader.mjs';\nimport { loadJson } from './loader/parsers/loadJson.mjs';\nimport { loadTxt } from './loader/parsers/loadTxt.mjs';\nimport { loadWebFont } from './loader/parsers/loadWebFont.mjs';\nimport { loadSvg } from './loader/parsers/textures/loadSVG.mjs';\nimport { loadTextures } from './loader/parsers/textures/loadTextures.mjs';\nimport { loadVideoTextures } from './loader/parsers/textures/loadVideoTextures.mjs';\nimport { resolveJsonUrl } from './resolver/parsers/resolveJsonUrl.mjs';\nimport { resolveTextureUrl } from './resolver/parsers/resolveTextureUrl.mjs';\nimport { Resolver } from './resolver/Resolver.mjs';\nimport { convertToList } from './utils/convertToList.mjs';\nimport { isSingleItem } from './utils/isSingleItem.mjs';\n\n\"use strict\";\nclass AssetsClass {\n  constructor() {\n    this._detections = [];\n    this._initialized = false;\n    this.resolver = new Resolver();\n    this.loader = new Loader();\n    this.cache = Cache;\n    this._backgroundLoader = new BackgroundLoader(this.loader);\n    this._backgroundLoader.active = true;\n    this.reset();\n  }\n  /**\n   * Initializes the Assets class with configuration options. While not required,\n   * calling this before loading assets is recommended to set up default behaviors.\n   * @param options - Configuration options for the Assets system\n   * @example\n   * ```ts\n   * // Basic initialization (optional as Assets.load will call this automatically)\n   * await Assets.init();\n   *\n   * // With CDN configuration\n   * await Assets.init({\n   *     basePath: 'https://my-cdn.com/assets/',\n   *     defaultSearchParams: { version: '1.0.0' }\n   * });\n   *\n   * // With manifest and preferences\n   * await Assets.init({\n   *     manifest: {\n   *         bundles: [{\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'hero',\n   *                     src: 'hero.{png,webp}',\n   *                     data: { scaleMode: SCALE_MODES.NEAREST }\n   *                 },\n   *                 {\n   *                     alias: 'map',\n   *                     src: 'map.json'\n   *                 }\n   *             ]\n   *         }]\n   *     },\n   *     // Optimize for device capabilities\n   *     texturePreference: {\n   *         resolution: window.devicePixelRatio,\n   *         format: ['webp', 'png']\n   *     },\n   *     // Set global preferences\n   *     preferences: {\n   *         crossOrigin: 'anonymous',\n   *     }\n   * });\n   *\n   * // Load assets after initialization\n   * const heroTexture = await Assets.load('hero');\n   * ```\n   * @remarks\n   * - Can be called only once; subsequent calls will be ignored with a warning\n   * - Format detection runs automatically unless `skipDetections` is true\n   * - The manifest can be a URL to a JSON file or an inline object\n   * @see {@link AssetInitOptions} For all available initialization options\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  async init(options = {}) {\n    if (this._initialized) {\n      warn(\"[Assets]AssetManager already initialized, did you load before calling this Assets.init()?\");\n      return;\n    }\n    this._initialized = true;\n    if (options.defaultSearchParams) {\n      this.resolver.setDefaultSearchParams(options.defaultSearchParams);\n    }\n    if (options.basePath) {\n      this.resolver.basePath = options.basePath;\n    }\n    if (options.bundleIdentifier) {\n      this.resolver.setBundleIdentifier(options.bundleIdentifier);\n    }\n    if (options.manifest) {\n      let manifest = options.manifest;\n      if (typeof manifest === \"string\") {\n        manifest = await this.load(manifest);\n      }\n      this.resolver.addManifest(manifest);\n    }\n    const resolutionPref = options.texturePreference?.resolution ?? 1;\n    const resolution = typeof resolutionPref === \"number\" ? [resolutionPref] : resolutionPref;\n    const formats = await this._detectFormats({\n      preferredFormats: options.texturePreference?.format,\n      skipDetections: options.skipDetections,\n      detections: this._detections\n    });\n    this.resolver.prefer({\n      params: {\n        format: formats,\n        resolution\n      }\n    });\n    if (options.preferences) {\n      this.setPreferences(options.preferences);\n    }\n    if (options.loadOptions) {\n      this.loader.loadOptions = {\n        ...this.loader.loadOptions,\n        ...options.loadOptions\n      };\n    }\n  }\n  /**\n   * Registers assets with the Assets resolver. This method maps keys (aliases) to asset sources,\n   * allowing you to load assets using friendly names instead of direct URLs.\n   * @param assets - The unresolved assets to add to the resolver\n   * @example\n   * ```ts\n   * // Basic usage - single asset\n   * Assets.add({\n   *     alias: 'myTexture',\n   *     src: 'assets/texture.png'\n   * });\n   * const texture = await Assets.load('myTexture');\n   *\n   * // Multiple aliases for the same asset\n   * Assets.add({\n   *     alias: ['hero', 'player'],\n   *     src: 'hero.png'\n   * });\n   * const hero1 = await Assets.load('hero');\n   * const hero2 = await Assets.load('player'); // Same texture\n   *\n   * // Multiple format support\n   * Assets.add({\n   *     alias: 'character',\n   *     src: 'character.{webp,png}' // Will choose best format\n   * });\n   * Assets.add({\n   *     alias: 'character',\n   *     src: ['character.webp', 'character.png'], // Explicitly specify formats\n   * });\n   *\n   * // With texture options\n   * Assets.add({\n   *     alias: 'sprite',\n   *     src: 'sprite.png',\n   *     data: { scaleMode: 'nearest' }\n   * });\n   *\n   * // Multiple assets at once\n   * Assets.add([\n   *     { alias: 'bg', src: 'background.png' },\n   *     { alias: 'music', src: 'music.mp3' },\n   *     { alias: 'spritesheet', src: 'sheet.json', data: { ignoreMultiPack: false } }\n   * ]);\n   * ```\n   * @remarks\n   * - Assets are resolved when loaded, not when added\n   * - Multiple formats use the best available format for the browser\n   * - Adding with same alias overwrites previous definition\n   * - The `data` property is passed to the asset loader\n   * @see {@link Resolver} For details on asset resolution\n   * @see {@link LoaderParser} For asset-specific data options\n   * @advanced\n   */\n  add(assets) {\n    this.resolver.add(assets);\n  }\n  async load(urls, onProgress) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    const singleAsset = isSingleItem(urls);\n    const urlArray = convertToList(urls).map((url) => {\n      if (typeof url !== \"string\") {\n        const aliases = this.resolver.getAlias(url);\n        if (aliases.some((alias) => !this.resolver.hasKey(alias))) {\n          this.add(url);\n        }\n        return Array.isArray(aliases) ? aliases[0] : aliases;\n      }\n      if (!this.resolver.hasKey(url))\n        this.add({ alias: url, src: url });\n      return url;\n    });\n    const resolveResults = this.resolver.resolve(urlArray);\n    const out = await this._mapLoadToResolve(resolveResults, onProgress);\n    return singleAsset ? out[urlArray[0]] : out;\n  }\n  /**\n   * Registers a bundle of assets that can be loaded as a group. Bundles are useful for organizing\n   * assets into logical groups, such as game levels or UI screens.\n   * @param bundleId - Unique identifier for the bundle\n   * @param assets - Assets to include in the bundle\n   * @example\n   * ```ts\n   * // Add a bundle using array format\n   * Assets.addBundle('animals', [\n   *     { alias: 'bunny', src: 'bunny.png' },\n   *     { alias: 'chicken', src: 'chicken.png' },\n   *     { alias: 'thumper', src: 'thumper.png' },\n   * ]);\n   *\n   * // Add a bundle using object format\n   * Assets.addBundle('animals', {\n   *     bunny: 'bunny.png',\n   *     chicken: 'chicken.png',\n   *     thumper: 'thumper.png',\n   * });\n   *\n   * // Add a bundle with advanced options\n   * Assets.addBundle('ui', [\n   *     {\n   *         alias: 'button',\n   *         src: 'button.{webp,png}',\n   *         data: { scaleMode: 'nearest' }\n   *     },\n   *     {\n   *         alias: ['logo', 'brand'],  // Multiple aliases\n   *         src: 'logo.svg',\n   *         data: { resolution: 2 }\n   *     }\n   * ]);\n   *\n   * // Load the bundle\n   * await Assets.loadBundle('animals');\n   *\n   * // Use the loaded assets\n   * const bunny = Sprite.from('bunny');\n   * const chicken = Sprite.from('chicken');\n   * ```\n   * @remarks\n   * - Bundle IDs must be unique\n   * - Assets in bundles are not loaded until `loadBundle` is called\n   * - Bundles can be background loaded using `backgroundLoadBundle`\n   * - Assets in bundles can be loaded individually using their aliases\n   * @see {@link Assets.loadBundle} For loading bundles\n   * @see {@link Assets.backgroundLoadBundle} For background loading bundles\n   * @see {@link Assets.unloadBundle} For unloading bundles\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  addBundle(bundleId, assets) {\n    this.resolver.addBundle(bundleId, assets);\n  }\n  /**\n   * Loads a bundle or multiple bundles of assets. Bundles are collections of related assets\n   * that can be loaded together.\n   * @param bundleIds - Single bundle ID or array of bundle IDs to load\n   * @param onProgress - Optional callback for load progress (0.0 to 1.0)\n   * @returns Promise that resolves with the loaded bundle assets\n   * @example\n   * ```ts\n   * // Define bundles in your manifest\n   * const manifest = {\n   *     bundles: [\n   *         {\n   *             name: 'load-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'sunset.png',\n   *                 },\n   *                 {\n   *                     alias: 'bar',\n   *                     src: 'load-bar.{png,webp}', // use an array of individual assets\n   *                 },\n   *             ],\n   *         },\n   *         {\n   *             name: 'game-screen',\n   *             assets: [\n   *                 {\n   *                     alias: 'character',\n   *                     src: 'robot.png',\n   *                 },\n   *                 {\n   *                     alias: 'enemy',\n   *                     src: 'bad-guy.png',\n   *                 },\n   *             ],\n   *         },\n   *     ]\n   * };\n   *\n   * // Initialize with manifest\n   * await Assets.init({ manifest });\n   *\n   * // Or add bundles programmatically\n   * Assets.addBundle('load-screen', [...]);\n   * Assets.loadBundle('load-screen');\n   *\n   * // Load a single bundle\n   * await Assets.loadBundle('load-screen');\n   * const bg = Sprite.from('background'); // Uses alias from bundle\n   *\n   * // Load multiple bundles\n   * await Assets.loadBundle([\n   *     'load-screen',\n   *     'game-screen'\n   * ]);\n   *\n   * // Load with progress tracking\n   * await Assets.loadBundle('game-screen', (progress) => {\n   *     console.log(`Loading: ${Math.round(progress * 100)}%`);\n   * });\n   * ```\n   * @remarks\n   * - Bundle assets are cached automatically\n   * - Bundles can be pre-loaded using `backgroundLoadBundle`\n   * - Assets in bundles can be accessed by their aliases\n   * - Progress callback receives values from 0.0 to 1.0\n   * @throws {Error} If the bundle ID doesn't exist in the manifest\n   * @see {@link Assets.addBundle} For adding bundles programmatically\n   * @see {@link Assets.backgroundLoadBundle} For background loading bundles\n   * @see {@link Assets.unloadBundle} For unloading bundles\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  async loadBundle(bundleIds, onProgress) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    let singleAsset = false;\n    if (typeof bundleIds === \"string\") {\n      singleAsset = true;\n      bundleIds = [bundleIds];\n    }\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    const out = {};\n    const keys = Object.keys(resolveResults);\n    let total = 0;\n    const counts = [];\n    const _onProgress = () => {\n      onProgress?.(counts.reduce((a, b) => a + b, 0) / total);\n    };\n    const promises = keys.map((bundleId, i) => {\n      const resolveResult = resolveResults[bundleId];\n      const values = Object.values(resolveResult);\n      const totalAssetsToLoad = [...new Set(values.flat())];\n      const progressSize = totalAssetsToLoad.reduce((sum, asset) => sum + (asset.progressSize || 1), 0);\n      counts.push(0);\n      total += progressSize;\n      return this._mapLoadToResolve(resolveResult, (e) => {\n        counts[i] = e * progressSize;\n        _onProgress();\n      }).then((resolveResult2) => {\n        out[bundleId] = resolveResult2;\n      });\n    });\n    await Promise.all(promises);\n    return singleAsset ? out[bundleIds[0]] : out;\n  }\n  /**\n   * Initiates background loading of assets. This allows assets to be loaded passively while other operations\n   * continue, making them instantly available when needed later.\n   *\n   * Background loading is useful for:\n   * - Preloading game levels while in a menu\n   * - Loading non-critical assets during gameplay\n   * - Reducing visible loading screens\n   * @param urls - Single URL/alias or array of URLs/aliases to load in the background\n   * @example\n   * ```ts\n   * // Basic background loading\n   * Assets.backgroundLoad('images/level2-assets.png');\n   *\n   * // Background load multiple assets\n   * Assets.backgroundLoad([\n   *     'images/sprite1.png',\n   *     'images/sprite2.png',\n   *     'images/background.png'\n   * ]);\n   *\n   * // Later, when you need the assets\n   * const textures = await Assets.load([\n   *     'images/sprite1.png',\n   *     'images/sprite2.png'\n   * ]); // Resolves immediately if background loading completed\n   * ```\n   * @remarks\n   * - Background loading happens one asset at a time to avoid blocking the main thread\n   * - Loading can be interrupted safely by calling `Assets.load()`\n   * - Assets are cached as they complete loading\n   * - No progress tracking is available for background loading\n   */\n  async backgroundLoad(urls) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    if (typeof urls === \"string\") {\n      urls = [urls];\n    }\n    const resolveResults = this.resolver.resolve(urls);\n    this._backgroundLoader.add(Object.values(resolveResults));\n  }\n  /**\n   * Initiates background loading of asset bundles. Similar to backgroundLoad but works with\n   * predefined bundles of assets.\n   *\n   * Perfect for:\n   * - Preloading level bundles during gameplay\n   * - Loading UI assets during splash screens\n   * - Preparing assets for upcoming game states\n   * @param bundleIds - Single bundle ID or array of bundle IDs to load in the background\n   * @example\n   * ```ts\n   * // Define bundles in your manifest\n   * await Assets.init({\n   *     manifest: {\n   *         bundles: [\n   *             {\n   *               name: 'home',\n   *               assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'images/home-bg.png',\n   *                 },\n   *                 {\n   *                     alias: 'logo',\n   *                     src: 'images/logo.png',\n   *                 }\n   *              ]\n   *            },\n   *            {\n   *             name: 'level-1',\n   *             assets: [\n   *                 {\n   *                     alias: 'background',\n   *                     src: 'images/level1/bg.png',\n   *                 },\n   *                 {\n   *                     alias: 'sprites',\n   *                     src: 'images/level1/sprites.json'\n   *                 }\n   *             ]\n   *         }]\n   *     }\n   * });\n   *\n   * // Load the home screen assets right away\n   * await Assets.loadBundle('home');\n   * showHomeScreen();\n   *\n   * // Start background loading while showing home screen\n   * Assets.backgroundLoadBundle('level-1');\n   *\n   * // When player starts level, load completes faster\n   * await Assets.loadBundle('level-1');\n   * hideHomeScreen();\n   * startLevel();\n   * ```\n   * @remarks\n   * - Bundle assets are loaded one at a time\n   * - Loading can be interrupted safely by calling `Assets.loadBundle()`\n   * - Assets are cached as they complete loading\n   * - Requires bundles to be registered via manifest or `addBundle`\n   * @see {@link Assets.addBundle} For adding bundles programmatically\n   * @see {@link Assets.loadBundle} For immediate bundle loading\n   * @see {@link AssetsManifest} For manifest format details\n   */\n  async backgroundLoadBundle(bundleIds) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    if (typeof bundleIds === \"string\") {\n      bundleIds = [bundleIds];\n    }\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    Object.values(resolveResults).forEach((resolveResult) => {\n      this._backgroundLoader.add(Object.values(resolveResult));\n    });\n  }\n  /**\n   * Only intended for development purposes.\n   * This will wipe the resolver and caches.\n   * You will need to reinitialize the Asset\n   * @internal\n   */\n  reset() {\n    this.resolver.reset();\n    this.loader.reset();\n    this.cache.reset();\n    this._initialized = false;\n  }\n  get(keys) {\n    if (typeof keys === \"string\") {\n      return Cache.get(keys);\n    }\n    const assets = {};\n    for (let i = 0; i < keys.length; i++) {\n      assets[i] = Cache.get(keys[i]);\n    }\n    return assets;\n  }\n  /**\n   * helper function to map resolved assets back to loaded assets\n   * @param resolveResults - the resolve results from the resolver\n   * @param progressOrLoadOptions - the progress callback or load options\n   */\n  async _mapLoadToResolve(resolveResults, progressOrLoadOptions) {\n    const resolveArray = [...new Set(Object.values(resolveResults))];\n    this._backgroundLoader.active = false;\n    const loadedAssets = await this.loader.load(resolveArray, progressOrLoadOptions);\n    this._backgroundLoader.active = true;\n    const out = {};\n    resolveArray.forEach((resolveResult) => {\n      const asset = loadedAssets[resolveResult.src];\n      const keys = [resolveResult.src];\n      if (resolveResult.alias) {\n        keys.push(...resolveResult.alias);\n      }\n      keys.forEach((key) => {\n        out[key] = asset;\n      });\n      Cache.set(keys, asset);\n    });\n    return out;\n  }\n  /**\n   * Unloads assets and releases them from memory. This method ensures proper cleanup of\n   * loaded assets when they're no longer needed.\n   * @param urls - Single URL/alias or array of URLs/aliases to unload\n   * @example\n   * ```ts\n   * // Unload a single asset\n   * await Assets.unload('images/sprite.png');\n   *\n   * // Unload using an alias\n   * await Assets.unload('hero'); // Unloads the asset registered with 'hero' alias\n   *\n   * // Unload multiple assets\n   * await Assets.unload([\n   *     'images/background.png',\n   *     'images/character.png',\n   *     'hero'\n   * ]);\n   *\n   * // Unload and handle creation of new instances\n   * await Assets.unload('hero');\n   * const newHero = await Assets.load('hero'); // Will load fresh from source\n   * ```\n   * @remarks\n   * > [!WARNING]\n   * > Make sure assets aren't being used before unloading:\n   * > - Remove sprites using the texture\n   * > - Clear any references to the asset\n   * > - Textures will be destroyed and can't be used after unloading\n   * @throws {Error} If the asset is not found in cache\n   */\n  async unload(urls) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    const urlArray = convertToList(urls).map((url) => typeof url !== \"string\" ? url.src : url);\n    const resolveResults = this.resolver.resolve(urlArray);\n    await this._unloadFromResolved(resolveResults);\n  }\n  /**\n   * Unloads all assets in a bundle. Use this to free memory when a bundle's assets\n   * are no longer needed, such as when switching game levels.\n   * @param bundleIds - Single bundle ID or array of bundle IDs to unload\n   * @example\n   * ```ts\n   * // Define and load a bundle\n   * Assets.addBundle('level-1', {\n   *     background: 'level1/bg.png',\n   *     sprites: 'level1/sprites.json',\n   *     music: 'level1/music.mp3'\n   * });\n   *\n   * // Load the bundle\n   * const level1 = await Assets.loadBundle('level-1');\n   *\n   * // Use the assets\n   * const background = Sprite.from(level1.background);\n   *\n   * // When done with the level, unload everything\n   * await Assets.unloadBundle('level-1');\n   * // background sprite is now invalid!\n   *\n   * // Unload multiple bundles\n   * await Assets.unloadBundle([\n   *     'level-1',\n   *     'level-2',\n   *     'ui-elements'\n   * ]);\n   * ```\n   * @remarks\n   * > [!WARNING]\n   * > - All assets in the bundle will be destroyed\n   * > - Bundle needs to be reloaded to use assets again\n   * > - Make sure no sprites or other objects are using the assets\n   * @throws {Error} If the bundle is not found\n   * @see {@link Assets.addBundle} For adding bundles\n   * @see {@link Assets.loadBundle} For loading bundles\n   */\n  async unloadBundle(bundleIds) {\n    if (!this._initialized) {\n      await this.init();\n    }\n    bundleIds = convertToList(bundleIds);\n    const resolveResults = this.resolver.resolveBundle(bundleIds);\n    const promises = Object.keys(resolveResults).map((bundleId) => this._unloadFromResolved(resolveResults[bundleId]));\n    await Promise.all(promises);\n  }\n  async _unloadFromResolved(resolveResult) {\n    const resolveArray = Object.values(resolveResult);\n    resolveArray.forEach((resolveResult2) => {\n      Cache.remove(resolveResult2.src);\n    });\n    await this.loader.unload(resolveArray);\n  }\n  /**\n   * Detects the supported formats for the browser, and returns an array of supported formats, respecting\n   * the users preferred formats order.\n   * @param options - the options to use when detecting formats\n   * @param options.preferredFormats - the preferred formats to use\n   * @param options.skipDetections - if we should skip the detections altogether\n   * @param options.detections - the detections to use\n   * @returns - the detected formats\n   */\n  async _detectFormats(options) {\n    let formats = [];\n    if (options.preferredFormats) {\n      formats = Array.isArray(options.preferredFormats) ? options.preferredFormats : [options.preferredFormats];\n    }\n    for (const detection of options.detections) {\n      if (options.skipDetections || await detection.test()) {\n        formats = await detection.add(formats);\n      } else if (!options.skipDetections) {\n        formats = await detection.remove(formats);\n      }\n    }\n    formats = formats.filter((format, index) => formats.indexOf(format) === index);\n    return formats;\n  }\n  /**\n   * All the detection parsers currently added to the Assets class.\n   * @advanced\n   */\n  get detections() {\n    return this._detections;\n  }\n  /**\n   * Sets global preferences for asset loading behavior. This method configures how assets\n   * are loaded and processed across all parsers.\n   * @param preferences - Asset loading preferences\n   * @example\n   * ```ts\n   * // Basic preferences\n   * Assets.setPreferences({\n   *     crossOrigin: 'anonymous',\n   *     parseAsGraphicsContext: false\n   * });\n   * ```\n   * @remarks\n   * Preferences are applied to all compatible parsers and affect future asset loading.\n   * Common preferences include:\n   * - `crossOrigin`: CORS setting for loaded assets\n   * - `preferWorkers`: Whether to use web workers for loading textures\n   * - `preferCreateImageBitmap`: Use `createImageBitmap` for texture creation. Turning this off will use the `Image` constructor instead.\n   * @see {@link AssetsPreferences} For all available preferences\n   */\n  setPreferences(preferences) {\n    this.loader.parsers.forEach((parser) => {\n      if (!parser.config)\n        return;\n      Object.keys(parser.config).filter((key) => key in preferences).forEach((key) => {\n        parser.config[key] = preferences[key];\n      });\n    });\n  }\n}\nconst Assets = new AssetsClass();\nextensions.handleByList(ExtensionType.LoadParser, Assets.loader.parsers).handleByList(ExtensionType.ResolveParser, Assets.resolver.parsers).handleByList(ExtensionType.CacheParser, Assets.cache.parsers).handleByList(ExtensionType.DetectionParser, Assets.detections);\nextensions.add(\n  cacheTextureArray,\n  detectDefaults,\n  detectAvif,\n  detectWebp,\n  detectMp4,\n  detectOgv,\n  detectWebm,\n  loadJson,\n  loadTxt,\n  loadWebFont,\n  loadSvg,\n  loadTextures,\n  loadVideoTextures,\n  loadBitmapFont,\n  bitmapFontCachePlugin,\n  resolveTextureUrl,\n  resolveJsonUrl\n);\nconst assetKeyMap = {\n  loader: ExtensionType.LoadParser,\n  resolver: ExtensionType.ResolveParser,\n  cache: ExtensionType.CacheParser,\n  detection: ExtensionType.DetectionParser\n};\nextensions.handle(ExtensionType.Asset, (extension) => {\n  const ref = extension.ref;\n  Object.entries(assetKeyMap).filter(([key]) => !!ref[key]).forEach(([key, type]) => extensions.add(Object.assign(\n    ref[key],\n    // Allow the function to optionally define it's own\n    // ExtensionMetadata, the use cases here is priority for LoaderParsers\n    { extension: ref[key].extension ?? type }\n  )));\n}, (extension) => {\n  const ref = extension.ref;\n  Object.keys(assetKeyMap).filter((key) => !!ref[key]).forEach((key) => extensions.remove(ref[key]));\n});\n\nexport { Assets, AssetsClass };\n//# sourceMappingURL=Assets.mjs.map\n","import { Color } from '../../../color/Color.mjs';\nimport { Texture } from '../../../rendering/renderers/shared/texture/Texture.mjs';\nimport { bgr2rgb } from '../../container/container-mixins/getGlobalMixin.mjs';\nimport { assignWithIgnore } from '../../container/utils/assignWithIgnore.mjs';\n\n\"use strict\";\nconst _Particle = class _Particle {\n  constructor(options) {\n    if (options instanceof Texture) {\n      this.texture = options;\n      assignWithIgnore(this, _Particle.defaultOptions, {});\n    } else {\n      const combined = { ..._Particle.defaultOptions, ...options };\n      assignWithIgnore(this, combined, {});\n    }\n  }\n  /**\n   * The transparency of the particle. Values range from 0 (fully transparent)\n   * to 1 (fully opaque). Values outside this range are clamped.\n   * @example\n   * ```ts\n   * // Create a semi-transparent particle\n   * const particle = new Particle({\n   *     texture: Texture.from('particle.png'),\n   *     alpha: 0.5\n   * });\n   *\n   * // Fade out\n   * particle.alpha *= 0.9;\n   *\n   * // Fade in\n   * particle.alpha = Math.min(particle.alpha + 0.1, 1);\n   *\n   * // Values are clamped to valid range\n   * particle.alpha = 1.5; // Becomes 1.0\n   * particle.alpha = -0.5; // Becomes 0.0\n   *\n   * // Animate transparency\n   * app.ticker.add((delta) => {\n   *     const time = performance.now() / 1000;\n   *     particle.alpha = 0.5 + Math.sin(time) * 0.5; // Pulse between 0-1\n   * });\n   * ```\n   * @default 1\n   * @see {@link Particle#tint} For controlling particle color\n   * @see {@link Particle#color} For the combined color and alpha value\n   */\n  get alpha() {\n    return this._alpha;\n  }\n  set alpha(value) {\n    this._alpha = Math.min(Math.max(value, 0), 1);\n    this._updateColor();\n  }\n  /**\n   * The tint color of the particle. Can be set using hex numbers or CSS color strings.\n   * The tint is multiplied with the texture color to create the final particle color.\n   * @example\n   * ```ts\n   * // Create a red particle\n   * const particle = new Particle({\n   *     texture: Texture.from('particle.png'),\n   *     tint: 0xff0000\n   * });\n   *\n   * // Use CSS color strings\n   * particle.tint = '#00ff00';  // Green\n   * particle.tint = 'blue';     // Blue\n   *\n   * // Animate tint color\n   * app.ticker.add(() => {\n   *     const time = performance.now() / 1000;\n   *\n   *     // Cycle through hues\n   *     const hue = (time * 50) % 360;\n   *     particle.tint = `hsl(${hue}, 100%, 50%)`;\n   * });\n   *\n   * // Reset to white (no tint)\n   * particle.tint = 0xffffff;\n   * ```\n   * @type {ColorSource} Hex number or CSS color string\n   * @default 0xffffff\n   * @see {@link Particle#alpha} For controlling transparency\n   * @see {@link Particle#color} For the combined color and alpha value\n   * @see {@link Color} For supported color formats\n   */\n  get tint() {\n    return bgr2rgb(this._tint);\n  }\n  set tint(value) {\n    this._tint = Color.shared.setValue(value ?? 16777215).toBgrNumber();\n    this._updateColor();\n  }\n  _updateColor() {\n    this.color = this._tint + ((this._alpha * 255 | 0) << 24);\n  }\n};\n/**\n * Default options used when creating new particles. These values are applied when specific\n * options aren't provided in the constructor.\n * @example\n * ```ts\n * // Override defaults globally\n * Particle.defaultOptions = {\n *     ...Particle.defaultOptions,\n *     anchorX: 0.5,\n *     anchorY: 0.5,\n *     alpha: 0.8\n * };\n *\n * // New particles use modified defaults\n * const centeredParticle = new Particle(texture);\n * console.log(centeredParticle.anchorX); // 0.5\n * console.log(centeredParticle.alpha); // 0.8\n * ```\n * @see {@link ParticleOptions} For all available options\n * @see {@link Particle} For the particle implementation\n */\n_Particle.defaultOptions = {\n  anchorX: 0,\n  anchorY: 0,\n  x: 0,\n  y: 0,\n  scaleX: 1,\n  scaleY: 1,\n  rotation: 0,\n  tint: 16777215,\n  alpha: 1\n};\nlet Particle = _Particle;\n\nexport { Particle };\n//# sourceMappingURL=Particle.mjs.map\n","\"use strict\";\nconst particleData = {\n  vertex: {\n    attributeName: \"aVertex\",\n    format: \"float32x2\",\n    code: `\n            const texture = p.texture;\n            const sx = p.scaleX;\n            const sy = p.scaleY;\n            const ax = p.anchorX;\n            const ay = p.anchorY;\n            const trim = texture.trim;\n            const orig = texture.orig;\n\n            if (trim)\n            {\n                w1 = trim.x - (ax * orig.width);\n                w0 = w1 + trim.width;\n\n                h1 = trim.y - (ay * orig.height);\n                h0 = h1 + trim.height;\n            }\n            else\n            {\n                w1 = -ax * (orig.width);\n                w0 = w1 + orig.width;\n\n                h1 = -ay * (orig.height);\n                h0 = h1 + orig.height;\n            }\n\n            f32v[offset] = w1 * sx;\n            f32v[offset + 1] = h1 * sy;\n\n            f32v[offset + stride] = w0 * sx;\n            f32v[offset + stride + 1] = h1 * sy;\n\n            f32v[offset + (stride * 2)] = w0 * sx;\n            f32v[offset + (stride * 2) + 1] = h0 * sy;\n\n            f32v[offset + (stride * 3)] = w1 * sx;\n            f32v[offset + (stride * 3) + 1] = h0 * sy;\n        `,\n    dynamic: false\n  },\n  // positionData\n  position: {\n    attributeName: \"aPosition\",\n    format: \"float32x2\",\n    code: `\n            var x = p.x;\n            var y = p.y;\n\n            f32v[offset] = x;\n            f32v[offset + 1] = y;\n\n            f32v[offset + stride] = x;\n            f32v[offset + stride + 1] = y;\n\n            f32v[offset + (stride * 2)] = x;\n            f32v[offset + (stride * 2) + 1] = y;\n\n            f32v[offset + (stride * 3)] = x;\n            f32v[offset + (stride * 3) + 1] = y;\n        `,\n    dynamic: true\n  },\n  // rotationData\n  rotation: {\n    attributeName: \"aRotation\",\n    format: \"float32\",\n    code: `\n            var rotation = p.rotation;\n\n            f32v[offset] = rotation;\n            f32v[offset + stride] = rotation;\n            f32v[offset + (stride * 2)] = rotation;\n            f32v[offset + (stride * 3)] = rotation;\n        `,\n    dynamic: false\n  },\n  // uvsData\n  uvs: {\n    attributeName: \"aUV\",\n    format: \"float32x2\",\n    code: `\n            var uvs = p.texture.uvs;\n\n            f32v[offset] = uvs.x0;\n            f32v[offset + 1] = uvs.y0;\n\n            f32v[offset + stride] = uvs.x1;\n            f32v[offset + stride + 1] = uvs.y1;\n\n            f32v[offset + (stride * 2)] = uvs.x2;\n            f32v[offset + (stride * 2) + 1] = uvs.y2;\n\n            f32v[offset + (stride * 3)] = uvs.x3;\n            f32v[offset + (stride * 3) + 1] = uvs.y3;\n        `,\n    dynamic: false\n  },\n  // tintData\n  color: {\n    attributeName: \"aColor\",\n    format: \"unorm8x4\",\n    code: `\n            const c = p.color;\n\n            u32v[offset] = c;\n            u32v[offset + stride] = c;\n            u32v[offset + (stride * 2)] = c;\n            u32v[offset + (stride * 3)] = c;\n        `,\n    dynamic: false\n  }\n};\n\nexport { particleData };\n//# sourceMappingURL=particleData.mjs.map\n","import { Bounds } from '../../container/bounds/Bounds.mjs';\nimport { ViewContainer } from '../../view/ViewContainer.mjs';\nimport { particleData } from './particleData.mjs';\n\n\"use strict\";\nconst emptyBounds = new Bounds(0, 0, 0, 0);\nconst _ParticleContainer = class _ParticleContainer extends ViewContainer {\n  /**\n   * @param options - The options for creating the sprite.\n   */\n  constructor(options = {}) {\n    options = {\n      ..._ParticleContainer.defaultOptions,\n      ...options,\n      dynamicProperties: {\n        ..._ParticleContainer.defaultOptions.dynamicProperties,\n        ...options?.dynamicProperties\n      }\n    };\n    const { dynamicProperties, shader, roundPixels, texture, particles, ...rest } = options;\n    super({\n      label: \"ParticleContainer\",\n      ...rest\n    });\n    /**\n     * The unique identifier for the render pipe of this ParticleContainer.\n     * @internal\n     */\n    this.renderPipeId = \"particle\";\n    /** @internal */\n    this.batched = false;\n    /**\n     * Indicates if the children of this ParticleContainer have changed and need to be updated.\n     * @internal\n     */\n    this._childrenDirty = false;\n    this.texture = texture || null;\n    this.shader = shader;\n    this._properties = {};\n    for (const key in particleData) {\n      const property = particleData[key];\n      const dynamic = dynamicProperties[key];\n      this._properties[key] = {\n        ...property,\n        dynamic\n      };\n    }\n    this.allowChildren = true;\n    this.roundPixels = roundPixels ?? false;\n    this.particleChildren = particles ?? [];\n  }\n  /**\n   * Adds one or more particles to the container. The particles will be rendered using the container's shared texture\n   * and properties. When adding multiple particles, they must all share the same base texture.\n   * @example\n   * ```ts\n   * const container = new ParticleContainer();\n   *\n   * // Add a single particle\n   * const particle = new Particle(Assets.get('particleTexture'));\n   * container.addParticle(particle);\n   *\n   * // Add multiple particles at once\n   * const particles = [\n   *     new Particle(Assets.get('particleTexture')),\n   *     new Particle(Assets.get('particleTexture')),\n   *     new Particle(Assets.get('particleTexture'))\n   * ];\n   *\n   * container.addParticle(...particles);\n   * ```\n   * @param children - The Particle(s) to add to the container\n   * @returns The first particle that was added, for method chaining\n   * @see {@link ParticleContainer#texture} For setting the shared texture\n   * @see {@link ParticleContainer#update} For updating after modifications\n   */\n  addParticle(...children) {\n    for (let i = 0; i < children.length; i++) {\n      this.particleChildren.push(children[i]);\n    }\n    this.onViewUpdate();\n    return children[0];\n  }\n  /**\n   * Removes one or more particles from the container. The particles must already be children\n   * of this container to be removed.\n   * @example\n   * ```ts\n   * // Remove a single particle\n   * container.removeParticle(particle1);\n   *\n   * // Remove multiple particles at once\n   * container.removeParticle(particle2, particle3);\n   * ```\n   * @param children - The Particle(s) to remove from the container\n   * @returns The first particle that was removed, for method chaining\n   * @see {@link ParticleContainer#particleChildren} For accessing all particles\n   * @see {@link ParticleContainer#removeParticles} For removing particles by index\n   * @see {@link ParticleContainer#removeParticleAt} For removing a particle at a specific index\n   */\n  removeParticle(...children) {\n    let didRemove = false;\n    for (let i = 0; i < children.length; i++) {\n      const index = this.particleChildren.indexOf(children[i]);\n      if (index > -1) {\n        this.particleChildren.splice(index, 1);\n        didRemove = true;\n      }\n    }\n    if (didRemove)\n      this.onViewUpdate();\n    return children[0];\n  }\n  /**\n   * Updates the particle container's internal state. Call this method after manually modifying\n   * the particleChildren array or when changing static properties of particles.\n   * @example\n   * ```ts\n   * // Batch modify particles\n   * container.particleChildren.push(...particles);\n   * container.update(); // Required after direct array modification\n   *\n   * // Update static properties\n   * container.particleChildren.forEach(particle => {\n   *     particle.position.set(\n   *         Math.random() * 800,\n   *         Math.random() * 600\n   *     );\n   * });\n   * container.update(); // Required after changing static positions\n   * ```\n   * @see {@link ParticleProperties} For configuring dynamic vs static properties\n   * @see {@link ParticleContainer#particleChildren} For direct array access\n   */\n  update() {\n    this._childrenDirty = true;\n  }\n  onViewUpdate() {\n    this._childrenDirty = true;\n    super.onViewUpdate();\n  }\n  /**\n   * Returns a static empty bounds object since ParticleContainer does not calculate bounds automatically\n   * for performance reasons. Use the `boundsArea` property to manually set container bounds.\n   * @example\n   * ```ts\n   * const container = new ParticleContainer({\n   *     texture: Texture.from('particle.png')\n   * });\n   *\n   * // Default bounds are empty\n   * console.log(container.bounds); // Bounds(0, 0, 0, 0)\n   *\n   * // Set manual bounds for the particle area\n   * container.boundsArea = {\n   *     minX: 0,\n   *     minY: 0,\n   *     maxX: 800,\n   *     maxY: 600\n   * };\n   * ```\n   * @readonly\n   * @returns {Bounds} An empty bounds object (0,0,0,0)\n   * @see {@link Container#boundsArea} For manually setting container bounds\n   * @see {@link Bounds} For bounds object structure\n   */\n  get bounds() {\n    return emptyBounds;\n  }\n  /** @private */\n  updateBounds() {\n  }\n  /**\n   * Destroys this sprite renderable and optionally its texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * particleContainer.destroy();\n   * particleContainer.destroy(true);\n   * particleContainer.destroy({ texture: true, textureSource: true, children: true });\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    const destroyTexture = typeof options === \"boolean\" ? options : options?.texture;\n    if (destroyTexture) {\n      const destroyTextureSource = typeof options === \"boolean\" ? options : options?.textureSource;\n      const texture = this.texture ?? this.particleChildren[0]?.texture;\n      if (texture) {\n        texture.destroy(destroyTextureSource);\n      }\n    }\n    this.texture = null;\n    this.shader?.destroy();\n  }\n  /**\n   * Removes all particles from this container that are within the begin and end indexes.\n   * @param beginIndex - The beginning position.\n   * @param endIndex - The ending position. Default value is size of the container.\n   * @returns - List of removed particles\n   */\n  removeParticles(beginIndex, endIndex) {\n    beginIndex ?? (beginIndex = 0);\n    endIndex ?? (endIndex = this.particleChildren.length);\n    const children = this.particleChildren.splice(\n      beginIndex,\n      endIndex - beginIndex\n    );\n    this.onViewUpdate();\n    return children;\n  }\n  /**\n   * Removes a particle from the specified index position.\n   * @param index - The index to get the particle from\n   * @returns The particle that was removed.\n   */\n  removeParticleAt(index) {\n    const child = this.particleChildren.splice(index, 1);\n    this.onViewUpdate();\n    return child[0];\n  }\n  /**\n   * Adds a particle to the container at a specified index. If the index is out of bounds an error will be thrown.\n   * If the particle is already in this container, it will be moved to the specified index.\n   * @param {Container} child - The particle to add.\n   * @param {number} index - The absolute index where the particle will be positioned at the end of the operation.\n   * @returns {Container} The particle that was added.\n   */\n  addParticleAt(child, index) {\n    this.particleChildren.splice(index, 0, child);\n    this.onViewUpdate();\n    return child;\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error. Please use `ParticleContainer.addParticle()` instead.\n   * @param {...any} _children\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  addChild(..._children) {\n    throw new Error(\n      \"ParticleContainer.addChild() is not available. Please use ParticleContainer.addParticle()\"\n    );\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   * Calling this method will throw an error. Please use `ParticleContainer.removeParticle()` instead.\n   * @param {...any} _children\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  removeChild(..._children) {\n    throw new Error(\n      \"ParticleContainer.removeChild() is not available. Please use ParticleContainer.removeParticle()\"\n    );\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error. Please use `ParticleContainer.removeParticles()` instead.\n   * @param {number} [_beginIndex]\n   * @param {number} [_endIndex]\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  removeChildren(_beginIndex, _endIndex) {\n    throw new Error(\n      \"ParticleContainer.removeChildren() is not available. Please use ParticleContainer.removeParticles()\"\n    );\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error. Please use `ParticleContainer.removeParticleAt()` instead.\n   * @param {number} _index\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  removeChildAt(_index) {\n    throw new Error(\n      \"ParticleContainer.removeChildAt() is not available. Please use ParticleContainer.removeParticleAt()\"\n    );\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error. Please use `ParticleContainer.getParticleAt()` instead.\n   * @param {number} _index\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  getChildAt(_index) {\n    throw new Error(\n      \"ParticleContainer.getChildAt() is not available. Please use ParticleContainer.getParticleAt()\"\n    );\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error. Please use `ParticleContainer.setParticleIndex()` instead.\n   * @param {ContainerChild} _child\n   * @param {number} _index\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  setChildIndex(_child, _index) {\n    throw new Error(\n      \"ParticleContainer.setChildIndex() is not available. Please use ParticleContainer.setParticleIndex()\"\n    );\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error. Please use `ParticleContainer.getParticleIndex()` instead.\n   * @param {ContainerChild} _child\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  getChildIndex(_child) {\n    throw new Error(\n      \"ParticleContainer.getChildIndex() is not available. Please use ParticleContainer.getParticleIndex()\"\n    );\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error. Please use `ParticleContainer.addParticleAt()` instead.\n   * @param {ContainerChild} _child\n   * @param {number} _index\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  addChildAt(_child, _index) {\n    throw new Error(\n      \"ParticleContainer.addChildAt() is not available. Please use ParticleContainer.addParticleAt()\"\n    );\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error. Please use `ParticleContainer.swapParticles()` instead.\n   * @param {ContainerChild} _child\n   * @param {ContainerChild} _child2\n   * @ignore\n   */\n  swapChildren(_child, _child2) {\n    throw new Error(\n      \"ParticleContainer.swapChildren() is not available. Please use ParticleContainer.swapParticles()\"\n    );\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error.\n   * @param _child - The child to reparent\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  reparentChild(..._child) {\n    throw new Error(\"ParticleContainer.reparentChild() is not available with the particle container\");\n  }\n  /**\n   * This method is not available in ParticleContainer.\n   *\n   * Calling this method will throw an error.\n   * @param _child - The child to reparent\n   * @param _index - The index to reparent the child to\n   * @throws {Error} Always throws an error as this method is not available.\n   * @ignore\n   */\n  reparentChildAt(_child, _index) {\n    throw new Error(\"ParticleContainer.reparentChildAt() is not available with the particle container\");\n  }\n};\n/**\n * Defines the default options for creating a ParticleContainer.\n * @example\n * ```ts\n * // Change defaults globally\n * ParticleContainer.defaultOptions = {\n *     dynamicProperties: {\n *         position: true,  // Update positions each frame\n *         rotation: true,  // Update rotations each frame\n *         vertex: false,   // Static vertices\n *         uvs: false,      // Static texture coordinates\n *         color: false     // Static colors\n *     },\n *     roundPixels: true // Enable pixel rounding for crisp rendering\n * };\n * ```\n * @property {Record<string, boolean>} dynamicProperties - Specifies which properties are dynamic.\n * @property {boolean} roundPixels - Indicates if pixels should be  rounded.\n */\n_ParticleContainer.defaultOptions = {\n  /** Specifies which properties are dynamic. */\n  dynamicProperties: {\n    /** Indicates if vertex positions are dynamic. */\n    vertex: false,\n    /** Indicates if particle positions are dynamic. */\n    position: true,\n    /** Indicates if particle rotations are dynamic. */\n    rotation: false,\n    /** Indicates if UV coordinates are dynamic. */\n    uvs: false,\n    /** Indicates if particle colors are dynamic. */\n    color: false\n  },\n  /** Indicates if pixels should be rounded for rendering. */\n  roundPixels: false\n};\nlet ParticleContainer = _ParticleContainer;\n\nexport { ParticleContainer };\n//# sourceMappingURL=ParticleContainer.mjs.map\n","import { ObservablePoint } from '../../maths/point/ObservablePoint.mjs';\nimport { deprecation, v8_0_0 } from '../../utils/logging/deprecation.mjs';\nimport { ViewContainer } from '../view/ViewContainer.mjs';\n\n\"use strict\";\nclass AbstractText extends ViewContainer {\n  constructor(options, styleClass) {\n    const { text, resolution, style, anchor, width, height, roundPixels, ...rest } = options;\n    super({\n      ...rest\n    });\n    /** @internal */\n    this.batched = true;\n    /** @internal */\n    this._resolution = null;\n    /** @internal */\n    this._autoResolution = true;\n    /** @internal */\n    this._didTextUpdate = true;\n    this._styleClass = styleClass;\n    this.text = text ?? \"\";\n    this.style = style;\n    this.resolution = resolution ?? null;\n    this.allowChildren = false;\n    this._anchor = new ObservablePoint(\n      {\n        _onUpdate: () => {\n          this.onViewUpdate();\n        }\n      }\n    );\n    if (anchor)\n      this.anchor = anchor;\n    this.roundPixels = roundPixels ?? false;\n    if (width !== void 0)\n      this.width = width;\n    if (height !== void 0)\n      this.height = height;\n  }\n  /**\n   * The anchor point of the text that controls the origin point for positioning and rotation.\n   * Can be a number (same value for x/y) or a PointData object.\n   * - (0,0) is top-left\n   * - (0.5,0.5) is center\n   * - (1,1) is bottom-right\n   * ```ts\n   * // Set anchor to center\n   * const text = new Text({\n   *     text: 'Hello Pixi!',\n   *     anchor: 0.5 // Same as { x: 0.5, y: 0.5 }\n   * });\n   * // Set anchor to top-left\n   * const text2 = new Text({\n   *     text: 'Hello Pixi!',\n   *     anchor: { x: 0, y: 0 } // Top-left corner\n   * });\n   * // Set anchor to bottom-right\n   * const text3 = new Text({\n   *     text: 'Hello Pixi!',\n   *     anchor: { x: 1, y: 1 } // Bottom-right corner\n   * });\n   * ```\n   * @default { x: 0, y: 0 }\n   */\n  get anchor() {\n    return this._anchor;\n  }\n  set anchor(value) {\n    typeof value === \"number\" ? this._anchor.set(value) : this._anchor.copyFrom(value);\n  }\n  /**\n   * The text content to display. Use '\\n' for line breaks.\n   * Accepts strings, numbers, or objects with toString() method.\n   * @example\n   * ```ts\n   * const text = new Text({\n   *     text: 'Hello Pixi!',\n   * });\n   * const multilineText = new Text({\n   *     text: 'Line 1\\nLine 2\\nLine 3',\n   * });\n   * const numberText = new Text({\n   *     text: 12345, // Will be converted to '12345'\n   * });\n   * const objectText = new Text({\n   *     text: { toString: () => 'Object Text' }, // Custom toString\n   * });\n   *\n   * // Update text dynamically\n   * text.text = 'Updated Text'; // Re-renders with new text\n   * text.text = 67890; // Updates to '67890'\n   * text.text = { toString: () => 'Dynamic Text' }; // Uses custom toString method\n   * // Clear text\n   * text.text = ''; // Clears the text\n   * ```\n   * @default ''\n   */\n  set text(value) {\n    value = value.toString();\n    if (this._text === value)\n      return;\n    this._text = value;\n    this.onViewUpdate();\n  }\n  get text() {\n    return this._text;\n  }\n  /**\n   * The resolution/device pixel ratio for rendering.\n   * Higher values result in sharper text at the cost of performance.\n   * Set to null for auto-resolution based on device.\n   * @example\n   * ```ts\n   * const text = new Text({\n   *     text: 'Hello Pixi!',\n   *     resolution: 2 // High DPI for sharper text\n   * });\n   * const autoResText = new Text({\n   *     text: 'Auto Resolution',\n   *     resolution: null // Use device's pixel ratio\n   * });\n   * ```\n   * @default null\n   */\n  set resolution(value) {\n    this._autoResolution = value === null;\n    this._resolution = value;\n    this.onViewUpdate();\n  }\n  get resolution() {\n    return this._resolution;\n  }\n  get style() {\n    return this._style;\n  }\n  /**\n   * The style configuration for the text.\n   * Can be a TextStyle instance or a configuration object.\n   * Supports canvas text styles, HTML text styles, and bitmap text styles.\n   * @example\n   * ```ts\n   * const text = new Text({\n   *     text: 'Styled Text',\n   *     style: {\n   *         fontSize: 24,\n   *         fill: 0xff1010, // Red color\n   *         fontFamily: 'Arial',\n   *         align: 'center', // Center alignment\n   *         stroke: { color: '#4a1850', width: 5 }, // Purple stroke\n   *         dropShadow: {\n   *             color: '#000000', // Black shadow\n   *             blur: 4, // Shadow blur\n   *             distance: 6 // Shadow distance\n   *         }\n   *     }\n   * });\n   * const htmlText = new HTMLText({\n   *     text: 'HTML Styled Text',\n   *     style: {\n   *         fontSize: '20px',\n   *         fill: 'blue',\n   *         fontFamily: 'Verdana',\n   *     }\n   * });\n   * const bitmapText = new BitmapText({\n   *     text: 'Bitmap Styled Text',\n   *     style: {\n   *         fontName: 'Arial',\n   *         fontSize: 32,\n   *     }\n   * })\n   *\n   * // Update style dynamically\n   * text.style = {\n   *     fontSize: 30, // Change font size\n   *     fill: 0x00ff00, // Change color to green\n   *     align: 'right', // Change alignment to right\n   *     stroke: { color: '#000000', width: 2 }, // Add black stroke\n   * }\n   */\n  set style(style) {\n    style || (style = {});\n    this._style?.off(\"update\", this.onViewUpdate, this);\n    if (style instanceof this._styleClass) {\n      this._style = style;\n    } else {\n      this._style = new this._styleClass(style);\n    }\n    this._style.on(\"update\", this.onViewUpdate, this);\n    this.onViewUpdate();\n  }\n  /**\n   * The width of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set width directly\n   * texture.width = 200;\n   * console.log(texture.scale.x); // Scale adjusted to match width\n   *\n   * // For better performance when setting both width and height\n   * texture.setSize(300, 400); // Avoids recalculating bounds twice\n   * ```\n   */\n  get width() {\n    return Math.abs(this.scale.x) * this.bounds.width;\n  }\n  set width(value) {\n    this._setWidth(value, this.bounds.width);\n  }\n  /**\n   * The height of the sprite, setting this will actually modify the scale to achieve the value set.\n   * @example\n   * ```ts\n   * // Set height directly\n   * texture.height = 200;\n   * console.log(texture.scale.y); // Scale adjusted to match height\n   *\n   * // For better performance when setting both width and height\n   * texture.setSize(300, 400); // Avoids recalculating bounds twice\n   * ```\n   */\n  get height() {\n    return Math.abs(this.scale.y) * this.bounds.height;\n  }\n  set height(value) {\n    this._setHeight(value, this.bounds.height);\n  }\n  /**\n   * Retrieves the size of the Text as a [Size]{@link Size} object based on the texture dimensions and scale.\n   * This is faster than getting width and height separately as it only calculates the bounds once.\n   * @example\n   * ```ts\n   * // Basic size retrieval\n   * const text = new Text({\n   *     text: 'Hello Pixi!',\n   *     style: { fontSize: 24 }\n   * });\n   * const size = text.getSize();\n   * console.log(`Size: ${size.width}x${size.height}`);\n   *\n   * // Reuse existing size object\n   * const reuseSize = { width: 0, height: 0 };\n   * text.getSize(reuseSize);\n   * ```\n   * @param out - Optional object to store the size in, to avoid allocating a new object\n   * @returns The size of the Sprite\n   * @see {@link Text#width} For getting just the width\n   * @see {@link Text#height} For getting just the height\n   * @see {@link Text#setSize} For setting both width and height\n   */\n  getSize(out) {\n    out || (out = {});\n    out.width = Math.abs(this.scale.x) * this.bounds.width;\n    out.height = Math.abs(this.scale.y) * this.bounds.height;\n    return out;\n  }\n  /**\n   * Sets the size of the Text to the specified width and height.\n   * This is faster than setting width and height separately as it only recalculates bounds once.\n   * @example\n   * ```ts\n   * // Basic size setting\n   * const text = new Text({\n   *    text: 'Hello Pixi!',\n   *    style: { fontSize: 24 }\n   * });\n   * text.setSize(100, 200); // Width: 100, Height: 200\n   *\n   * // Set uniform size\n   * text.setSize(100); // Sets both width and height to 100\n   *\n   * // Set size with object\n   * text.setSize({\n   *     width: 200,\n   *     height: 300\n   * });\n   * ```\n   * @param value - This can be either a number or a {@link Size} object\n   * @param height - The height to set. Defaults to the value of `width` if not provided\n   * @see {@link Text#width} For setting width only\n   * @see {@link Text#height} For setting height only\n   */\n  setSize(value, height) {\n    if (typeof value === \"object\") {\n      height = value.height ?? value.width;\n      value = value.width;\n    } else {\n      height ?? (height = value);\n    }\n    value !== void 0 && this._setWidth(value, this.bounds.width);\n    height !== void 0 && this._setHeight(height, this.bounds.height);\n  }\n  /**\n   * Checks if the object contains the given point in local coordinates.\n   * Uses the text's bounds for hit testing.\n   * @example\n   * ```ts\n   * // Basic point check\n   * const localPoint = { x: 50, y: 25 };\n   * const contains = text.containsPoint(localPoint);\n   * console.log('Point is inside:', contains);\n   * ```\n   * @param point - The point to check in local coordinates\n   * @returns True if the point is within the text's bounds\n   * @see {@link Container#toLocal} For converting global coordinates to local\n   */\n  containsPoint(point) {\n    const width = this.bounds.width;\n    const height = this.bounds.height;\n    const x1 = -width * this.anchor.x;\n    let y1 = 0;\n    if (point.x >= x1 && point.x <= x1 + width) {\n      y1 = -height * this.anchor.y;\n      if (point.y >= y1 && point.y <= y1 + height)\n        return true;\n    }\n    return false;\n  }\n  /** @internal */\n  onViewUpdate() {\n    if (!this.didViewUpdate)\n      this._didTextUpdate = true;\n    super.onViewUpdate();\n  }\n  /**\n   * Destroys this text renderable and optionally its style texture.\n   * @param options - Options parameter. A boolean will act as if all options\n   *  have been set to that value\n   * @example\n   * // Destroys the text and its style\n   * text.destroy({ style: true, texture: true, textureSource: true });\n   * text.destroy(true);\n   * text.destroy() // Destroys the text, but not its style\n   */\n  destroy(options = false) {\n    super.destroy(options);\n    this.owner = null;\n    this._bounds = null;\n    this._anchor = null;\n    if (typeof options === \"boolean\" ? options : options?.style) {\n      this._style.destroy(options);\n    }\n    this._style = null;\n    this._text = null;\n  }\n  /**\n   * Returns a unique key for this instance.\n   * This key is used for caching.\n   * @returns {string} Unique key for the instance\n   */\n  get styleKey() {\n    return `${this._text}:${this._style.styleKey}:${this._resolution}`;\n  }\n}\nfunction ensureTextOptions(args, name) {\n  let options = args[0] ?? {};\n  if (typeof options === \"string\" || args[1]) {\n    deprecation(v8_0_0, `use new ${name}({ text: \"hi!\", style }) instead`);\n    options = {\n      text: options,\n      style: args[1]\n    };\n  }\n  return options;\n}\n\nexport { AbstractText, ensureTextOptions };\n//# sourceMappingURL=AbstractText.mjs.map\n","import { warn } from '../../utils/logging/warn.mjs';\nimport { AbstractText, ensureTextOptions } from '../text/AbstractText.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\nimport { BitmapFontManager } from './BitmapFontManager.mjs';\n\n\"use strict\";\nclass BitmapText extends AbstractText {\n  constructor(...args) {\n    var _a;\n    const options = ensureTextOptions(args, \"BitmapText\");\n    options.style ?? (options.style = options.style || {});\n    (_a = options.style).fill ?? (_a.fill = 16777215);\n    super(options, TextStyle);\n    /** @internal */\n    this.renderPipeId = \"bitmapText\";\n  }\n  /** @private */\n  updateBounds() {\n    const bounds = this._bounds;\n    const anchor = this._anchor;\n    const bitmapMeasurement = BitmapFontManager.measureText(this.text, this._style);\n    const scale = bitmapMeasurement.scale;\n    const offset = bitmapMeasurement.offsetY * scale;\n    let width = bitmapMeasurement.width * scale;\n    let height = bitmapMeasurement.height * scale;\n    const stroke = this._style._stroke;\n    if (stroke) {\n      width += stroke.width;\n      height += stroke.width;\n    }\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * (height + offset);\n    bounds.maxY = bounds.minY + height;\n  }\n  /**\n   * The resolution / device pixel ratio for text rendering.\n   * Unlike other text types, BitmapText resolution is managed by the BitmapFont.\n   * Individual resolution changes are not supported.\n   * @example\n   * ```ts\n   * //  Incorrect: Setting resolution directly (will trigger warning)\n   * const text = new BitmapText({\n   *     text: 'Hello',\n   *     resolution: 2 // This will be ignored\n   * });\n   *\n   * //  Correct: Set resolution when installing the font\n   * BitmapFont.install({\n   *     name: 'MyFont',\n   *     style: {\n   *         fontFamily: 'Arial',\n   *     },\n   *     resolution: 2 // Resolution is set here\n   * });\n   *\n   * const text = new BitmapText({\n   *     text: 'Hello',\n   *     style: {\n   *         fontFamily: 'MyFont' // Uses font's resolution\n   *     }\n   * });\n   * ```\n   * @default 1\n   * @see {@link BitmapFont.install} For setting font resolution\n   * @throws {Warning} When attempting to change resolution directly\n   * @readonly\n   */\n  set resolution(value) {\n    if (value !== null) {\n      warn(\n        // eslint-disable-next-line max-len\n        \"[BitmapText] dynamically updating the resolution is not supported. Resolution should be managed by the BitmapFont.\"\n      );\n    }\n  }\n  get resolution() {\n    return this._resolution;\n  }\n}\n\nexport { BitmapText };\n//# sourceMappingURL=BitmapText.mjs.map\n","import { Container } from '../container/Container.mjs';\nimport { TextStyle } from '../text/TextStyle.mjs';\n\n\"use strict\";\nclass AbstractSplitText extends Container {\n  constructor(config) {\n    const {\n      text,\n      style,\n      autoSplit,\n      lineAnchor,\n      wordAnchor,\n      charAnchor,\n      ...options\n    } = config;\n    super(options);\n    this._dirty = false;\n    this._canReuseChars = false;\n    this.chars = [];\n    this.words = [];\n    this.lines = [];\n    this._originalText = text;\n    this._autoSplit = autoSplit;\n    this._lineAnchor = lineAnchor;\n    this._wordAnchor = wordAnchor;\n    this._charAnchor = charAnchor;\n    this.style = style;\n  }\n  /**\n   * Splits the text into lines, words, and characters.\n   * Call this manually when autoSplit is false.\n   * @example Manual Splitting\n   * ```ts\n   * const text = new SplitText({\n   *   text: 'Manual Update',\n   *   autoSplit: false\n   * });\n   *\n   * text.text = 'New Content';\n   * text.style = { fontSize: 32 };\n   * text.split(); // Apply changes\n   * ```\n   */\n  split() {\n    const res = this.splitFn();\n    this.chars = res.chars;\n    this.words = res.words;\n    this.lines = res.lines;\n    this.addChild(...this.lines);\n    this.charAnchor = this._charAnchor;\n    this.wordAnchor = this._wordAnchor;\n    this.lineAnchor = this._lineAnchor;\n    this._dirty = false;\n    this._canReuseChars = true;\n  }\n  get text() {\n    return this._originalText;\n  }\n  /**\n   * Gets or sets the text content.\n   * Setting new text triggers splitting if autoSplit is true.\n   * > [!NOTE] Setting this frequently can have a performance impact, especially with large texts and canvas text.\n   * @example Dynamic Text Updates\n   * ```ts\n   * const text = new SplitText({\n   *   text: 'Original',\n   *   autoSplit: true\n   * });\n   *\n   * // Auto-splits on change\n   * text.text = 'Updated Content';\n   *\n   * // Manual update\n   * text.autoSplit = false;\n   * text.text = 'Manual Update';\n   * text.split();\n   * ```\n   */\n  set text(value) {\n    this._originalText = value;\n    this.lines.forEach((line) => line.destroy({ children: true }));\n    this.lines.length = 0;\n    this.words.length = 0;\n    this.chars.length = 0;\n    this._canReuseChars = false;\n    this.onTextUpdate();\n  }\n  _setOrigin(value, elements, property) {\n    let originPoint;\n    if (typeof value === \"number\") {\n      originPoint = { x: value, y: value };\n    } else {\n      originPoint = { x: value.x, y: value.y };\n    }\n    elements.forEach((element) => {\n      const localBounds = element.getLocalBounds();\n      const originX = localBounds.minX + localBounds.width * originPoint.x;\n      const originY = localBounds.minY + localBounds.height * originPoint.y;\n      element.origin.set(originX, originY);\n    });\n    this[property] = value;\n  }\n  /**\n   * Gets or sets the transform anchor for line segments.\n   * The anchor point determines the center of rotation and scaling for each line.\n   * @example Setting Line Anchors\n   * ```ts\n   * // Center rotation/scaling\n   * text.lineAnchor = 0.5;\n   *\n   * // Rotate/scale from top-right corner\n   * text.lineAnchor = { x: 1, y: 0 };\n   *\n   * // Custom anchor point\n   * text.lineAnchor = {\n   *   x: 0.2, // 20% from left\n   *   y: 0.8  // 80% from top\n   * };\n   * ```\n   */\n  get lineAnchor() {\n    return this._lineAnchor;\n  }\n  set lineAnchor(value) {\n    this._setOrigin(value, this.lines, \"_lineAnchor\");\n  }\n  /**\n   * Gets or sets the transform anchor for word segments.\n   * The anchor point determines the center of rotation and scaling for each word.\n   * @example\n   * ```ts\n   * // Center each word\n   * text.wordAnchor = 0.5;\n   *\n   * // Scale from bottom-left\n   * text.wordAnchor = { x: 0, y: 1 };\n   *\n   * // Rotate around custom point\n   * text.wordAnchor = {\n   *   x: 0.75,  // 75% from left\n   *   y: 0.5    // Middle vertically\n   * };\n   * ```\n   */\n  get wordAnchor() {\n    return this._wordAnchor;\n  }\n  set wordAnchor(value) {\n    this._setOrigin(value, this.words, \"_wordAnchor\");\n  }\n  /**\n   * Gets or sets the transform anchor for character segments.\n   * The anchor point determines the center of rotation and scaling for each character.\n   * @example Setting Character Anchors\n   * ```ts\n   * // Center each character\n   * text.charAnchor = 0.5;\n   *\n   * // Rotate from top-center\n   * text.charAnchor = { x: 0.5, y: 0 };\n   *\n   * // Scale from bottom-right\n   * text.charAnchor = { x: 1, y: 1 };\n   * ```\n   * @example Animation with Anchors\n   * ```ts\n   * // Rotate characters around their centers\n   * text.charAnchor = 0.5;\n   * text.chars.forEach((char, i) => {\n   *   gsap.to(char, {\n   *     rotation: Math.PI * 2,\n   *     duration: 1,\n   *     delay: i * 0.1,\n   *     repeat: -1\n   *   });\n   * });\n   * ```\n   */\n  get charAnchor() {\n    return this._charAnchor;\n  }\n  set charAnchor(value) {\n    this._setOrigin(value, this.chars, \"_charAnchor\");\n  }\n  get style() {\n    return this._style;\n  }\n  /**\n   * The style configuration for the text.\n   * Can be a TextStyle instance or a configuration object.\n   * @example\n   * ```ts\n   * const text = new Text({\n   *     text: 'Styled Text',\n   *     style: {\n   *         fontSize: 24,\n   *         fill: 0xff1010, // Red color\n   *         fontFamily: 'Arial',\n   *         align: 'center', // Center alignment\n   *         stroke: { color: '#4a1850', width: 5 }, // Purple stroke\n   *         dropShadow: {\n   *             color: '#000000', // Black shadow\n   *             blur: 4, // Shadow blur\n   *             distance: 6 // Shadow distance\n   *         }\n   *     }\n   * });\n   * // Update style dynamically\n   * text.style = {\n   *     fontSize: 30, // Change font size\n   *     fill: 0x00ff00, // Change color to green\n   *     align: 'right', // Change alignment to right\n   *     stroke: { color: '#000000', width: 2 }, // Add black stroke\n   * }\n   */\n  set style(style) {\n    style || (style = {});\n    this._style = new TextStyle(style);\n    this.words.forEach((word) => word.destroy());\n    this.words.length = 0;\n    this.lines.forEach((line) => line.destroy());\n    this.lines.length = 0;\n    this._canReuseChars = true;\n    this.onTextUpdate();\n  }\n  onTextUpdate() {\n    this._dirty = true;\n    if (this._autoSplit) {\n      this.split();\n    }\n  }\n  /**\n   * Destroys the SplitText instance and all its resources.\n   * Cleans up all segment arrays, event listeners, and optionally the text style.\n   * @param options - Destroy configuration options\n   * @example\n   * ```ts\n   * // Clean up everything\n   * text.destroy({ children: true, texture: true, style: true });\n   *\n   * // Remove from parent but keep style\n   * text.destroy({ children: true, style: false });\n   * ```\n   */\n  destroy(options) {\n    super.destroy(options);\n    this.chars = [];\n    this.words = [];\n    this.lines = [];\n    if (typeof options === \"boolean\" ? options : options?.style) {\n      this._style.destroy(options);\n    }\n    this._style = null;\n    this._originalText = \"\";\n  }\n}\n\nexport { AbstractSplitText };\n//# sourceMappingURL=AbstractSplitText.mjs.map\n","import { TextStyle } from '../text/TextStyle.mjs';\nimport { bitmapTextSplit } from '../text-bitmap/utils/bitmapTextSplit.mjs';\nimport { AbstractSplitText } from './AbstractSplitText.mjs';\n\n\"use strict\";\nconst _SplitBitmapText = class _SplitBitmapText extends AbstractSplitText {\n  constructor(config) {\n    const completeOptions = {\n      ..._SplitBitmapText.defaultOptions,\n      ...config\n    };\n    super(completeOptions);\n  }\n  /**\n   * Creates a SplitBitmapText instance from an existing text object.\n   * Useful for converting standard Text or BitmapText objects into segmented versions.\n   * @param text - The source text object to convert\n   * @param options - Additional splitting options\n   * @returns A new SplitBitmapText instance\n   * @example\n   * ```ts\n   * const bitmapText = new BitmapText({\n   *   text: 'Bitmap Text',\n   *   style: { fontFamily: 'Arial' }\n   * });\n   *\n   * const segmented = SplitBitmapText.from(bitmapText);\n   *\n   * // with additional options\n   * const segmentedWithOptions = SplitBitmapText.from(bitmapText, {\n   *   autoSplit: false,\n   *   lineAnchor: 0.5,\n   *   wordAnchor: { x: 0, y: 0.5 },\n   * })\n   * ```\n   */\n  static from(text, options) {\n    const completeOptions = {\n      ..._SplitBitmapText.defaultOptions,\n      ...options,\n      text: text.text,\n      style: new TextStyle(text.style)\n    };\n    return new _SplitBitmapText({\n      ...completeOptions\n    });\n  }\n  splitFn() {\n    return bitmapTextSplit({\n      text: this._originalText,\n      style: this._style,\n      chars: this._canReuseChars ? this.chars : []\n    });\n  }\n};\n/**\n * Default configuration options for SplitBitmapText instances.\n * @example\n * ```ts\n * // Override defaults globally\n * SplitBitmapText.defaultOptions = {\n *   autoSplit: false,\n *   lineAnchor: 0.5,  // Center alignment\n *   wordAnchor: { x: 0, y: 0.5 },  // Left-center\n *   charAnchor: { x: 0.5, y: 1 }   // Bottom-center\n * };\n * ```\n */\n_SplitBitmapText.defaultOptions = {\n  autoSplit: true,\n  // Auto-update on text/style changes\n  lineAnchor: 0,\n  // Top-left alignment\n  wordAnchor: 0,\n  // Top-left alignment\n  charAnchor: 0\n  // Top-left alignment\n};\nlet SplitBitmapText = _SplitBitmapText;\n\nexport { SplitBitmapText };\n//# sourceMappingURL=SplitBitmapText.mjs.map\n","import { Container } from '../../container/Container.mjs';\nimport { CanvasTextMetrics } from '../../text/canvas/CanvasTextMetrics.mjs';\nimport { BitmapFontManager } from '../BitmapFontManager.mjs';\nimport { BitmapText } from '../BitmapText.mjs';\nimport { getBitmapTextLayout } from './getBitmapTextLayout.mjs';\n\n\"use strict\";\nfunction bitmapTextSplit(options) {\n  const { text, style, chars: existingChars } = options;\n  const textStyle = style;\n  const font = BitmapFontManager.getFont(text, textStyle);\n  const segments = CanvasTextMetrics.graphemeSegmenter(text);\n  const layout = getBitmapTextLayout(segments, textStyle, font, true);\n  const scale = layout.scale;\n  const chars = [];\n  const words = [];\n  const lines = [];\n  const lineHeight = style.lineHeight ? style.lineHeight : font.lineHeight * scale;\n  let yOffset = 0;\n  for (const line of layout.lines) {\n    if (line.chars.length === 0)\n      continue;\n    const lineContainer = new Container({ label: \"line\" });\n    lineContainer.y = yOffset;\n    lines.push(lineContainer);\n    let currentWordContainer = new Container({ label: \"word\" });\n    let currentWordStartIndex = 0;\n    for (let i = 0; i < line.chars.length; i++) {\n      const char = line.chars[i];\n      if (!char)\n        continue;\n      const charData = font.chars[char];\n      if (!charData)\n        continue;\n      const isSpace = char === \" \";\n      const isLastChar = i === line.chars.length - 1;\n      let charInstance;\n      if (existingChars.length > 0) {\n        charInstance = existingChars.shift();\n        charInstance.text = char;\n        charInstance.style = textStyle;\n        charInstance.label = `char-${char}`;\n        charInstance.x = line.charPositions[i] * scale - line.charPositions[currentWordStartIndex] * scale;\n      } else {\n        charInstance = new BitmapText({\n          text: char,\n          style: textStyle,\n          label: `char-${char}`,\n          x: line.charPositions[i] * scale - line.charPositions[currentWordStartIndex] * scale\n        });\n      }\n      if (!isSpace) {\n        chars.push(charInstance);\n        currentWordContainer.addChild(charInstance);\n      }\n      if (isSpace || isLastChar) {\n        if (currentWordContainer.children.length > 0) {\n          currentWordContainer.x = line.charPositions[currentWordStartIndex] * scale;\n          words.push(currentWordContainer);\n          lineContainer.addChild(currentWordContainer);\n          currentWordContainer = new Container({ label: \"word\" });\n          currentWordStartIndex = i + 1;\n        }\n      }\n    }\n    yOffset += lineHeight;\n  }\n  return { chars, lines, words };\n}\n\nexport { bitmapTextSplit };\n//# sourceMappingURL=bitmapTextSplit.mjs.map\n","import { TextureStyle } from '../../rendering/renderers/shared/texture/TextureStyle.mjs';\nimport { AbstractText, ensureTextOptions } from './AbstractText.mjs';\nimport { CanvasTextGenerator } from './canvas/CanvasTextGenerator.mjs';\nimport { CanvasTextMetrics } from './canvas/CanvasTextMetrics.mjs';\nimport { TextStyle } from './TextStyle.mjs';\n\n\"use strict\";\nclass Text extends AbstractText {\n  constructor(...args) {\n    const options = ensureTextOptions(args, \"Text\");\n    super(options, TextStyle);\n    /** @internal */\n    this.renderPipeId = \"text\";\n    if (options.textureStyle) {\n      this.textureStyle = options.textureStyle instanceof TextureStyle ? options.textureStyle : new TextureStyle(options.textureStyle);\n    }\n  }\n  /** @private */\n  updateBounds() {\n    const bounds = this._bounds;\n    const anchor = this._anchor;\n    let width = 0;\n    let height = 0;\n    if (this._style.trim) {\n      const { frame, canvasAndContext } = CanvasTextGenerator.getCanvasAndContext({\n        text: this.text,\n        style: this._style,\n        resolution: 1\n      });\n      CanvasTextGenerator.returnCanvasAndContext(canvasAndContext);\n      width = frame.width;\n      height = frame.height;\n    } else {\n      const canvasMeasurement = CanvasTextMetrics.measureText(\n        this._text,\n        this._style\n      );\n      width = canvasMeasurement.width;\n      height = canvasMeasurement.height;\n    }\n    bounds.minX = -anchor._x * width;\n    bounds.maxX = bounds.minX + width;\n    bounds.minY = -anchor._y * height;\n    bounds.maxY = bounds.minY + height;\n  }\n}\n\nexport { Text };\n//# sourceMappingURL=Text.mjs.map\n","import { browserExt } from './environment-browser/browserExt.mjs';\nimport { webworkerExt } from './environment-webworker/webworkerExt.mjs';\nimport { extensions } from './extensions/Extensions.mjs';\nexport { ExtensionType, normalizeExtensionPriority } from './extensions/Extensions.mjs';\nimport './rendering/init.mjs';\nimport './spritesheet/init.mjs';\nimport './accessibility/index.mjs';\nimport './advanced-blend-modes/index.mjs';\nimport './app/index.mjs';\nimport './assets/index.mjs';\nimport './color/index.mjs';\nimport './compressed-textures/index.mjs';\nimport './culling/index.mjs';\nimport './dom/index.mjs';\nimport './environment/index.mjs';\nimport './environment-browser/index.mjs';\nimport './environment-webworker/index.mjs';\nimport './events/index.mjs';\nimport './extensions/index.mjs';\nimport './filters/index.mjs';\nimport './maths/index.mjs';\nimport './prepare/index.mjs';\nimport './rendering/index.mjs';\nimport './scene/index.mjs';\nimport './spritesheet/index.mjs';\nimport './ticker/index.mjs';\nimport './utils/index.mjs';\nexport { AccessibilitySystem } from './accessibility/AccessibilitySystem.mjs';\nexport { accessibilityTarget } from './accessibility/accessibilityTarget.mjs';\nexport { ColorBlend } from './advanced-blend-modes/ColorBlend.mjs';\nexport { ColorBurnBlend } from './advanced-blend-modes/ColorBurnBlend.mjs';\nexport { ColorDodgeBlend } from './advanced-blend-modes/ColorDodgeBlend.mjs';\nexport { DarkenBlend } from './advanced-blend-modes/DarkenBlend.mjs';\nexport { DifferenceBlend } from './advanced-blend-modes/DifferenceBlend.mjs';\nexport { DivideBlend } from './advanced-blend-modes/DivideBlend.mjs';\nexport { ExclusionBlend } from './advanced-blend-modes/ExclusionBlend.mjs';\nexport { HardLightBlend } from './advanced-blend-modes/HardLightBlend.mjs';\nexport { HardMixBlend } from './advanced-blend-modes/HardMixBlend.mjs';\nexport { LightenBlend } from './advanced-blend-modes/LightenBlend.mjs';\nexport { LinearBurnBlend } from './advanced-blend-modes/LinearBurnBlend.mjs';\nexport { LinearDodgeBlend } from './advanced-blend-modes/LinearDodgeBlend.mjs';\nexport { LinearLightBlend } from './advanced-blend-modes/LinearLightBlend.mjs';\nexport { LuminosityBlend } from './advanced-blend-modes/LuminosityBlend.mjs';\nexport { NegationBlend } from './advanced-blend-modes/NegationBlend.mjs';\nexport { OverlayBlend } from './advanced-blend-modes/OverlayBlend.mjs';\nexport { PinLightBlend } from './advanced-blend-modes/PinLightBlend.mjs';\nexport { SaturationBlend } from './advanced-blend-modes/SaturationBlend.mjs';\nexport { SoftLightBlend } from './advanced-blend-modes/SoftLightBlend.mjs';\nexport { SubtractBlend } from './advanced-blend-modes/SubtractBlend.mjs';\nexport { VividLightBlend } from './advanced-blend-modes/VividLightBlend.mjs';\nexport { Application } from './app/Application.mjs';\nexport { ResizePlugin } from './app/ResizePlugin.mjs';\nexport { TickerPlugin } from './app/TickerPlugin.mjs';\nexport { Assets, AssetsClass } from './assets/Assets.mjs';\nexport { BackgroundLoader } from './assets/BackgroundLoader.mjs';\nexport { Cache } from './assets/cache/Cache.mjs';\nexport { cacheTextureArray } from './assets/cache/parsers/cacheTextureArray.mjs';\nexport { detectAvif } from './assets/detections/parsers/detectAvif.mjs';\nexport { detectDefaults } from './assets/detections/parsers/detectDefaults.mjs';\nexport { detectMp4 } from './assets/detections/parsers/detectMp4.mjs';\nexport { detectOgv } from './assets/detections/parsers/detectOgv.mjs';\nexport { detectWebm } from './assets/detections/parsers/detectWebm.mjs';\nexport { detectWebp } from './assets/detections/parsers/detectWebp.mjs';\nexport { testImageFormat } from './assets/detections/utils/testImageFormat.mjs';\nexport { testVideoFormat } from './assets/detections/utils/testVideoFormat.mjs';\nexport { Loader } from './assets/loader/Loader.mjs';\nexport { LoaderParserPriority } from './assets/loader/parsers/LoaderParser.mjs';\nexport { loadJson } from './assets/loader/parsers/loadJson.mjs';\nexport { loadTxt } from './assets/loader/parsers/loadTxt.mjs';\nexport { getFontFamilyName, loadWebFont } from './assets/loader/parsers/loadWebFont.mjs';\nexport { loadSvg } from './assets/loader/parsers/textures/loadSVG.mjs';\nexport { loadImageBitmap, loadTextures } from './assets/loader/parsers/textures/loadTextures.mjs';\nexport { crossOrigin, determineCrossOrigin, loadVideoTextures, preloadVideo } from './assets/loader/parsers/textures/loadVideoTextures.mjs';\nexport { createTexture } from './assets/loader/parsers/textures/utils/createTexture.mjs';\nexport { WorkerManager } from './assets/loader/workers/WorkerManager.mjs';\nexport { resolveJsonUrl } from './assets/resolver/parsers/resolveJsonUrl.mjs';\nexport { resolveTextureUrl } from './assets/resolver/parsers/resolveTextureUrl.mjs';\nexport { Resolver, getUrlExtension } from './assets/resolver/Resolver.mjs';\nexport { checkDataUrl } from './assets/utils/checkDataUrl.mjs';\nexport { checkExtension } from './assets/utils/checkExtension.mjs';\nexport { convertToList } from './assets/utils/convertToList.mjs';\nexport { copySearchParams } from './assets/utils/copySearchParams.mjs';\nexport { createStringVariations } from './assets/utils/createStringVariations.mjs';\nexport { isSingleItem } from './assets/utils/isSingleItem.mjs';\nexport { Color } from './color/Color.mjs';\nexport { detectBasis } from './compressed-textures/basis/detectBasis.mjs';\nexport { loadBasis } from './compressed-textures/basis/loadBasis.mjs';\nexport { createLevelBuffers } from './compressed-textures/basis/utils/createLevelBuffers.mjs';\nexport { gpuFormatToBasisTranscoderFormat } from './compressed-textures/basis/utils/gpuFormatToBasisTranscoderFormat.mjs';\nexport { basisTranscoderUrls, setBasisTranscoderPath } from './compressed-textures/basis/utils/setBasisTranscoderPath.mjs';\nexport { loadBasisOnWorker } from './compressed-textures/basis/worker/loadBasisOnWorker.mjs';\nexport { D3D10_RESOURCE_DIMENSION, D3DFMT, DDS, DXGI_FORMAT, DXGI_TO_TEXTURE_FORMAT, FOURCC_TO_TEXTURE_FORMAT, TEXTURE_FORMAT_BLOCK_SIZE } from './compressed-textures/dds/const.mjs';\nexport { loadDDS } from './compressed-textures/dds/loadDDS.mjs';\nexport { parseDDS } from './compressed-textures/dds/parseDDS.mjs';\nexport { loadKTX } from './compressed-textures/ktx/loadKTX.mjs';\nexport { parseKTX } from './compressed-textures/ktx/parseKTX.mjs';\nexport { GL_INTERNAL_FORMAT, KTX } from './compressed-textures/ktx2/const.mjs';\nexport { loadKTX2 } from './compressed-textures/ktx2/loadKTX2.mjs';\nexport { convertFormatIfRequired } from './compressed-textures/ktx2/utils/convertFormatIfRequired.mjs';\nexport { createLevelBuffersFromKTX } from './compressed-textures/ktx2/utils/createLevelBuffersFromKTX.mjs';\nexport { getTextureFormatFromKTXTexture } from './compressed-textures/ktx2/utils/getTextureFormatFromKTXTexture.mjs';\nexport { glFormatToGPUFormat } from './compressed-textures/ktx2/utils/glFormatToGPUFormat.mjs';\nexport { gpuFormatToKTXBasisTranscoderFormat } from './compressed-textures/ktx2/utils/gpuFormatToKTXBasisTranscoderFormat.mjs';\nexport { ktxTranscoderUrls, setKTXTranscoderPath } from './compressed-textures/ktx2/utils/setKTXTranscoderPath.mjs';\nexport { vkFormatToGPUFormat } from './compressed-textures/ktx2/utils/vkFormatToGPUFormat.mjs';\nexport { loadKTX2onWorker } from './compressed-textures/ktx2/worker/loadKTX2onWorker.mjs';\nexport { detectCompressed } from './compressed-textures/shared/detectCompressed.mjs';\nexport { resolveCompressedTextureUrl, validFormats } from './compressed-textures/shared/resolveCompressedTextureUrl.mjs';\nexport { Culler } from './culling/Culler.mjs';\nexport { CullerPlugin } from './culling/CullerPlugin.mjs';\nexport { cullingMixin } from './culling/cullingMixin.mjs';\nexport { CanvasObserver } from './dom/CanvasObserver.mjs';\nexport { DOMContainer } from './dom/DOMContainer.mjs';\nexport { DOMPipe } from './dom/DOMPipe.mjs';\nexport { DOMAdapter } from './environment/adapter.mjs';\nexport { autoDetectEnvironment, loadEnvironmentExtensions } from './environment/autoDetectEnvironment.mjs';\nexport { BrowserAdapter } from './environment-browser/BrowserAdapter.mjs';\nexport { WebWorkerAdapter } from './environment-webworker/WebWorkerAdapter.mjs';\nexport { EventBoundary } from './events/EventBoundary.mjs';\nexport { EventSystem } from './events/EventSystem.mjs';\nexport { EventsTicker } from './events/EventTicker.mjs';\nexport { FederatedEvent } from './events/FederatedEvent.mjs';\nexport { FederatedContainer } from './events/FederatedEventTarget.mjs';\nexport { FederatedMouseEvent } from './events/FederatedMouseEvent.mjs';\nexport { FederatedPointerEvent } from './events/FederatedPointerEvent.mjs';\nexport { FederatedWheelEvent } from './events/FederatedWheelEvent.mjs';\nexport { default as blendTemplateFrag } from './filters/blend-modes/blend-template.frag.mjs';\nexport { default as blendTemplateVert } from './filters/blend-modes/blend-template.vert.mjs';\nexport { default as blendTemplateWgsl } from './filters/blend-modes/blend-template.wgsl.mjs';\nexport { default as hslWgsl } from './filters/blend-modes/hsl.wgsl.mjs';\nexport { default as alphaFrag } from './filters/defaults/alpha/alpha.frag.mjs';\nexport { default as alphaWgsl } from './filters/defaults/alpha/alpha.wgsl.mjs';\nexport { default as blurTemplateWgsl } from './filters/defaults/blur/gpu/blur-template.wgsl.mjs';\nexport { default as colorMatrixFilterFrag } from './filters/defaults/color-matrix/colorMatrixFilter.frag.mjs';\nexport { default as colorMatrixFilterWgsl } from './filters/defaults/color-matrix/colorMatrixFilter.wgsl.mjs';\nexport { default as defaultFilterVert } from './filters/defaults/defaultFilter.vert.mjs';\nexport { default as displacementFrag } from './filters/defaults/displacement/displacement.frag.mjs';\nexport { default as displacementVert } from './filters/defaults/displacement/displacement.vert.mjs';\nexport { default as displacementWgsl } from './filters/defaults/displacement/displacement.wgsl.mjs';\nexport { default as noiseFrag } from './filters/defaults/noise/noise.frag.mjs';\nexport { default as noiseWgsl } from './filters/defaults/noise/noise.wgsl.mjs';\nexport { default as passthroughFrag } from './filters/defaults/passthrough/passthrough.frag.mjs';\nexport { default as passthroughWgsl } from './filters/defaults/passthrough/passthrough.wgsl.mjs';\nexport { default as maskFrag } from './filters/mask/mask.frag.mjs';\nexport { default as maskVert } from './filters/mask/mask.vert.mjs';\nexport { default as maskWgsl } from './filters/mask/mask.wgsl.mjs';\nexport { BlendModeFilter } from './filters/blend-modes/BlendModeFilter.mjs';\nexport { hslgl } from './filters/blend-modes/hls/GLhls.mjs';\nexport { hslgpu } from './filters/blend-modes/hls/GPUhls.mjs';\nexport { AlphaFilter } from './filters/defaults/alpha/AlphaFilter.mjs';\nexport { BlurFilter } from './filters/defaults/blur/BlurFilter.mjs';\nexport { BlurFilterPass } from './filters/defaults/blur/BlurFilterPass.mjs';\nexport { GAUSSIAN_VALUES } from './filters/defaults/blur/const.mjs';\nexport { generateBlurFragSource } from './filters/defaults/blur/gl/generateBlurFragSource.mjs';\nexport { generateBlurGlProgram } from './filters/defaults/blur/gl/generateBlurGlProgram.mjs';\nexport { generateBlurVertSource } from './filters/defaults/blur/gl/generateBlurVertSource.mjs';\nexport { generateBlurProgram } from './filters/defaults/blur/gpu/generateBlurProgram.mjs';\nexport { ColorMatrixFilter } from './filters/defaults/color-matrix/ColorMatrixFilter.mjs';\nexport { DisplacementFilter } from './filters/defaults/displacement/DisplacementFilter.mjs';\nexport { NoiseFilter } from './filters/defaults/noise/NoiseFilter.mjs';\nexport { PassthroughFilter } from './filters/defaults/passthrough/PassthroughFilter.mjs';\nexport { Filter } from './filters/Filter.mjs';\nexport { FilterEffect } from './filters/FilterEffect.mjs';\nexport { FilterPipe } from './filters/FilterPipe.mjs';\nexport { FilterSystem } from './filters/FilterSystem.mjs';\nexport { MaskFilter } from './filters/mask/MaskFilter.mjs';\nexport { groupD8 } from './maths/matrix/groupD8.mjs';\nexport { Matrix } from './maths/matrix/Matrix.mjs';\nexport { DEG_TO_RAD, PI_2, RAD_TO_DEG } from './maths/misc/const.mjs';\nexport { isPow2, log2, nextPow2 } from './maths/misc/pow2.mjs';\nexport { squaredDistanceToLineSegment } from './maths/misc/squaredDistanceToLineSegment.mjs';\nexport { ObservablePoint } from './maths/point/ObservablePoint.mjs';\nexport { Point } from './maths/point/Point.mjs';\nexport { pointInTriangle } from './maths/point/pointInTriangle.mjs';\nexport { Circle } from './maths/shapes/Circle.mjs';\nexport { Ellipse } from './maths/shapes/Ellipse.mjs';\nexport { Polygon } from './maths/shapes/Polygon.mjs';\nexport { Rectangle } from './maths/shapes/Rectangle.mjs';\nexport { RoundedRectangle } from './maths/shapes/RoundedRectangle.mjs';\nexport { Triangle } from './maths/shapes/Triangle.mjs';\nexport { PrepareBase } from './prepare/PrepareBase.mjs';\nexport { PrepareQueue } from './prepare/PrepareQueue.mjs';\nexport { PrepareSystem } from './prepare/PrepareSystem.mjs';\nexport { PrepareUpload } from './prepare/PrepareUpload.mjs';\nexport { GlBatchAdaptor } from './rendering/batcher/gl/GlBatchAdaptor.mjs';\nexport { checkMaxIfStatementsInShader } from './rendering/batcher/gl/utils/checkMaxIfStatementsInShader.mjs';\nexport { getMaxTexturesPerBatch } from './rendering/batcher/gl/utils/maxRecommendedTextures.mjs';\nexport { generateGPULayout } from './rendering/batcher/gpu/generateGPULayout.mjs';\nexport { generateLayout } from './rendering/batcher/gpu/generateLayout.mjs';\nexport { getTextureBatchBindGroup } from './rendering/batcher/gpu/getTextureBatchBindGroup.mjs';\nexport { GpuBatchAdaptor } from './rendering/batcher/gpu/GpuBatchAdaptor.mjs';\nexport { Batch, Batcher } from './rendering/batcher/shared/Batcher.mjs';\nexport { BatcherPipe } from './rendering/batcher/shared/BatcherPipe.mjs';\nexport { BatchGeometry } from './rendering/batcher/shared/BatchGeometry.mjs';\nexport { BatchTextureArray } from './rendering/batcher/shared/BatchTextureArray.mjs';\nexport { DefaultBatcher } from './rendering/batcher/shared/DefaultBatcher.mjs';\nexport { DefaultShader } from './rendering/batcher/shared/DefaultShader.mjs';\nexport { compileHighShaderGlProgram, compileHighShaderGpuProgram } from './rendering/high-shader/compileHighShaderToProgram.mjs';\nexport { compileHighShader, compileHighShaderGl } from './rendering/high-shader/compiler/compileHighShader.mjs';\nexport { addBits } from './rendering/high-shader/compiler/utils/addBits.mjs';\nexport { compileHooks } from './rendering/high-shader/compiler/utils/compileHooks.mjs';\nexport { compileInputs } from './rendering/high-shader/compiler/utils/compileInputs.mjs';\nexport { compileOutputs } from './rendering/high-shader/compiler/utils/compileOutputs.mjs';\nexport { formatShader } from './rendering/high-shader/compiler/utils/formatShader.mjs';\nexport { injectBits } from './rendering/high-shader/compiler/utils/injectBits.mjs';\nexport { fragmentGPUTemplate, fragmentGlTemplate, vertexGPUTemplate, vertexGlTemplate } from './rendering/high-shader/defaultProgramTemplate.mjs';\nexport { colorBit, colorBitGl } from './rendering/high-shader/shader-bits/colorBit.mjs';\nexport { generateTextureBatchBit, generateTextureBatchBitGl } from './rendering/high-shader/shader-bits/generateTextureBatchBit.mjs';\nexport { globalUniformsBit, globalUniformsBitGl, globalUniformsUBOBitGl } from './rendering/high-shader/shader-bits/globalUniformsBit.mjs';\nexport { localUniformBit, localUniformBitGl, localUniformBitGroup2 } from './rendering/high-shader/shader-bits/localUniformBit.mjs';\nexport { roundPixelsBit, roundPixelsBitGl } from './rendering/high-shader/shader-bits/roundPixelsBit.mjs';\nexport { textureBit, textureBitGl } from './rendering/high-shader/shader-bits/textureBit.mjs';\nexport { AlphaMask } from './rendering/mask/alpha/AlphaMask.mjs';\nexport { AlphaMaskPipe } from './rendering/mask/alpha/AlphaMaskPipe.mjs';\nexport { ColorMask } from './rendering/mask/color/ColorMask.mjs';\nexport { ColorMaskPipe } from './rendering/mask/color/ColorMaskPipe.mjs';\nexport { MaskEffectManager, MaskEffectManagerClass } from './rendering/mask/MaskEffectManager.mjs';\nexport { ScissorMask } from './rendering/mask/scissor/ScissorMask.mjs';\nexport { StencilMask } from './rendering/mask/stencil/StencilMask.mjs';\nexport { StencilMaskPipe } from './rendering/mask/stencil/StencilMaskPipe.mjs';\nexport { addMaskBounds } from './rendering/mask/utils/addMaskBounds.mjs';\nexport { addMaskLocalBounds } from './rendering/mask/utils/addMaskLocalBounds.mjs';\nexport { autoDetectRenderer } from './rendering/renderers/autoDetectRenderer.mjs';\nexport { BUFFER_TYPE } from './rendering/renderers/gl/buffer/const.mjs';\nexport { GlBuffer } from './rendering/renderers/gl/buffer/GlBuffer.mjs';\nexport { GlBufferSystem } from './rendering/renderers/gl/buffer/GlBufferSystem.mjs';\nexport { CLEAR } from './rendering/renderers/gl/const.mjs';\nexport { GlContextSystem } from './rendering/renderers/gl/context/GlContextSystem.mjs';\nexport { GlGeometrySystem } from './rendering/renderers/gl/geometry/GlGeometrySystem.mjs';\nexport { getGlTypeFromFormat } from './rendering/renderers/gl/geometry/utils/getGlTypeFromFormat.mjs';\nexport { GlBackBufferSystem } from './rendering/renderers/gl/GlBackBufferSystem.mjs';\nexport { GlColorMaskSystem } from './rendering/renderers/gl/GlColorMaskSystem.mjs';\nexport { GlEncoderSystem } from './rendering/renderers/gl/GlEncoderSystem.mjs';\nexport { GlLimitsSystem } from './rendering/renderers/gl/GlLimitsSystem.mjs';\nexport { GlRenderTarget } from './rendering/renderers/gl/GlRenderTarget.mjs';\nexport { GlStencilSystem } from './rendering/renderers/gl/GlStencilSystem.mjs';\nexport { GlUboSystem } from './rendering/renderers/gl/GlUboSystem.mjs';\nexport { GlRenderTargetAdaptor } from './rendering/renderers/gl/renderTarget/GlRenderTargetAdaptor.mjs';\nexport { GlRenderTargetSystem } from './rendering/renderers/gl/renderTarget/GlRenderTargetSystem.mjs';\nexport { generateShaderSyncCode } from './rendering/renderers/gl/shader/GenerateShaderSyncCode.mjs';\nexport { getBatchSamplersUniformGroup } from './rendering/renderers/gl/shader/getBatchSamplersUniformGroup.mjs';\nexport { GlProgram } from './rendering/renderers/gl/shader/GlProgram.mjs';\nexport { GlProgramData, IGLUniformData } from './rendering/renderers/gl/shader/GlProgramData.mjs';\nexport { GlShaderSystem } from './rendering/renderers/gl/shader/GlShaderSystem.mjs';\nexport { GlUniformGroupSystem } from './rendering/renderers/gl/shader/GlUniformGroupSystem.mjs';\nexport { migrateFragmentFromV7toV8 } from './rendering/renderers/gl/shader/migrateFragmentFromV7toV8.mjs';\nexport { compileShader } from './rendering/renderers/gl/shader/program/compileShader.mjs';\nexport { defaultValue } from './rendering/renderers/gl/shader/program/defaultValue.mjs';\nexport { ensureAttributes } from './rendering/renderers/gl/shader/program/ensureAttributes.mjs';\nexport { extractAttributesFromGlProgram } from './rendering/renderers/gl/shader/program/extractAttributesFromGlProgram.mjs';\nexport { generateProgram } from './rendering/renderers/gl/shader/program/generateProgram.mjs';\nexport { getMaxFragmentPrecision } from './rendering/renderers/gl/shader/program/getMaxFragmentPrecision.mjs';\nexport { getTestContext } from './rendering/renderers/gl/shader/program/getTestContext.mjs';\nexport { getUboData } from './rendering/renderers/gl/shader/program/getUboData.mjs';\nexport { getUniformData } from './rendering/renderers/gl/shader/program/getUniformData.mjs';\nexport { logProgramError } from './rendering/renderers/gl/shader/program/logProgramError.mjs';\nexport { mapSize } from './rendering/renderers/gl/shader/program/mapSize.mjs';\nexport { mapGlToVertexFormat, mapType } from './rendering/renderers/gl/shader/program/mapType.mjs';\nexport { addProgramDefines } from './rendering/renderers/gl/shader/program/preprocessors/addProgramDefines.mjs';\nexport { ensurePrecision } from './rendering/renderers/gl/shader/program/preprocessors/ensurePrecision.mjs';\nexport { insertVersion } from './rendering/renderers/gl/shader/program/preprocessors/insertVersion.mjs';\nexport { setProgramName } from './rendering/renderers/gl/shader/program/preprocessors/setProgramName.mjs';\nexport { stripVersion } from './rendering/renderers/gl/shader/program/preprocessors/stripVersion.mjs';\nexport { WGSL_TO_STD40_SIZE, createUboElementsSTD40 } from './rendering/renderers/gl/shader/utils/createUboElementsSTD40.mjs';\nexport { createUboSyncFunctionSTD40 } from './rendering/renderers/gl/shader/utils/createUboSyncSTD40.mjs';\nexport { generateArraySyncSTD40 } from './rendering/renderers/gl/shader/utils/generateArraySyncSTD40.mjs';\nexport { generateUniformsSync } from './rendering/renderers/gl/shader/utils/generateUniformsSync.mjs';\nexport { UNIFORM_TO_ARRAY_SETTERS, UNIFORM_TO_SINGLE_SETTERS } from './rendering/renderers/gl/shader/utils/generateUniformsSyncTypes.mjs';\nexport { GlStateSystem } from './rendering/renderers/gl/state/GlStateSystem.mjs';\nexport { mapWebGLBlendModesToPixi } from './rendering/renderers/gl/state/mapWebGLBlendModesToPixi.mjs';\nexport { GL_FORMATS, GL_TARGETS, GL_TYPES, GL_WRAP_MODES } from './rendering/renderers/gl/texture/const.mjs';\nexport { GlTexture } from './rendering/renderers/gl/texture/GlTexture.mjs';\nexport { GlTextureSystem } from './rendering/renderers/gl/texture/GlTextureSystem.mjs';\nexport { glUploadBufferImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadBufferImageResource.mjs';\nexport { glUploadCompressedTextureResource } from './rendering/renderers/gl/texture/uploaders/glUploadCompressedTextureResource.mjs';\nexport { glUploadImageResource } from './rendering/renderers/gl/texture/uploaders/glUploadImageResource.mjs';\nexport { glUploadVideoResource } from './rendering/renderers/gl/texture/uploaders/glUploadVideoResource.mjs';\nexport { applyStyleParams } from './rendering/renderers/gl/texture/utils/applyStyleParams.mjs';\nexport { getSupportedGlCompressedTextureFormats } from './rendering/renderers/gl/texture/utils/getSupportedGlCompressedTextureFormats.mjs';\nexport { mapFormatToGlFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlFormat.mjs';\nexport { mapFormatToGlInternalFormat } from './rendering/renderers/gl/texture/utils/mapFormatToGlInternalFormat.mjs';\nexport { mapFormatToGlType } from './rendering/renderers/gl/texture/utils/mapFormatToGlType.mjs';\nexport { compareModeToGlCompare, mipmapScaleModeToGlFilter, scaleModeToGlFilter, wrapModeToGlAddress } from './rendering/renderers/gl/texture/utils/pixiToGlMaps.mjs';\nexport { unpremultiplyAlpha } from './rendering/renderers/gl/texture/utils/unpremultiplyAlpha.mjs';\nexport { WebGLRenderer } from './rendering/renderers/gl/WebGLRenderer.mjs';\nexport { BindGroupSystem } from './rendering/renderers/gpu/BindGroupSystem.mjs';\nexport { GpuBufferSystem } from './rendering/renderers/gpu/buffer/GpuBufferSystem.mjs';\nexport { UboBatch } from './rendering/renderers/gpu/buffer/UboBatch.mjs';\nexport { GpuColorMaskSystem } from './rendering/renderers/gpu/GpuColorMaskSystem.mjs';\nexport { GpuDeviceSystem } from './rendering/renderers/gpu/GpuDeviceSystem.mjs';\nexport { GpuEncoderSystem } from './rendering/renderers/gpu/GpuEncoderSystem.mjs';\nexport { GpuLimitsSystem } from './rendering/renderers/gpu/GpuLimitsSystem.mjs';\nexport { GpuStencilSystem } from './rendering/renderers/gpu/GpuStencilSystem.mjs';\nexport { GpuUboSystem } from './rendering/renderers/gpu/GpuUboSystem.mjs';\nexport { GpuUniformBatchPipe } from './rendering/renderers/gpu/GpuUniformBatchPipe.mjs';\nexport { PipelineSystem } from './rendering/renderers/gpu/pipeline/PipelineSystem.mjs';\nexport { calculateProjection } from './rendering/renderers/gpu/renderTarget/calculateProjection.mjs';\nexport { GpuRenderTarget } from './rendering/renderers/gpu/renderTarget/GpuRenderTarget.mjs';\nexport { GpuRenderTargetAdaptor } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetAdaptor.mjs';\nexport { GpuRenderTargetSystem } from './rendering/renderers/gpu/renderTarget/GpuRenderTargetSystem.mjs';\nexport { BindGroup } from './rendering/renderers/gpu/shader/BindGroup.mjs';\nexport { GpuProgram } from './rendering/renderers/gpu/shader/GpuProgram.mjs';\nexport { GpuShaderSystem } from './rendering/renderers/gpu/shader/GpuShaderSystem.mjs';\nexport { WGSL_ALIGN_SIZE_DATA, createUboElementsWGSL } from './rendering/renderers/gpu/shader/utils/createUboElementsWGSL.mjs';\nexport { createUboSyncFunctionWGSL } from './rendering/renderers/gpu/shader/utils/createUboSyncFunctionWGSL.mjs';\nexport { extractAttributesFromGpuProgram } from './rendering/renderers/gpu/shader/utils/extractAttributesFromGpuProgram.mjs';\nexport { extractStructAndGroups } from './rendering/renderers/gpu/shader/utils/extractStructAndGroups.mjs';\nexport { generateArraySyncWGSL } from './rendering/renderers/gpu/shader/utils/generateArraySyncWGSL.mjs';\nexport { generateGpuLayoutGroups } from './rendering/renderers/gpu/shader/utils/generateGpuLayoutGroups.mjs';\nexport { generateLayoutHash } from './rendering/renderers/gpu/shader/utils/generateLayoutHash.mjs';\nexport { removeStructAndGroupDuplicates } from './rendering/renderers/gpu/shader/utils/removeStructAndGroupDuplicates.mjs';\nexport { GpuBlendModesToPixi } from './rendering/renderers/gpu/state/GpuBlendModesToPixi.mjs';\nexport { GpuStateSystem } from './rendering/renderers/gpu/state/GpuStateSystem.mjs';\nexport { GpuStencilModesToPixi } from './rendering/renderers/gpu/state/GpuStencilModesToPixi.mjs';\nexport { GpuTextureSystem } from './rendering/renderers/gpu/texture/GpuTextureSystem.mjs';\nexport { gpuUploadBufferImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadBufferImageResource.mjs';\nexport { blockDataMap, gpuUploadCompressedTextureResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadCompressedTextureResource.mjs';\nexport { gpuUploadImageResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadImageSource.mjs';\nexport { gpuUploadVideoResource } from './rendering/renderers/gpu/texture/uploaders/gpuUploadVideoSource.mjs';\nexport { getSupportedGPUCompressedTextureFormats } from './rendering/renderers/gpu/texture/utils/getSupportedGPUCompressedTextureFormats.mjs';\nexport { GpuMipmapGenerator } from './rendering/renderers/gpu/texture/utils/GpuMipmapGenerator.mjs';\nexport { WebGPURenderer } from './rendering/renderers/gpu/WebGPURenderer.mjs';\nexport { BackgroundSystem } from './rendering/renderers/shared/background/BackgroundSystem.mjs';\nexport { BlendModePipe } from './rendering/renderers/shared/blendModes/BlendModePipe.mjs';\nexport { Buffer } from './rendering/renderers/shared/buffer/Buffer.mjs';\nexport { BufferResource } from './rendering/renderers/shared/buffer/BufferResource.mjs';\nexport { BufferUsage } from './rendering/renderers/shared/buffer/const.mjs';\nexport { fastCopy } from './rendering/renderers/shared/buffer/utils/fastCopy.mjs';\nexport { ExtractSystem } from './rendering/renderers/shared/extract/ExtractSystem.mjs';\nexport { GenerateTextureSystem } from './rendering/renderers/shared/extract/GenerateTextureSystem.mjs';\nexport { DRAW_MODES } from './rendering/renderers/shared/geometry/const.mjs';\nexport { Geometry } from './rendering/renderers/shared/geometry/Geometry.mjs';\nexport { buildSimpleUvs, buildUvs } from './rendering/renderers/shared/geometry/utils/buildUvs.mjs';\nexport { ensureIsBuffer } from './rendering/renderers/shared/geometry/utils/ensureIsBuffer.mjs';\nexport { getAttributeInfoFromFormat } from './rendering/renderers/shared/geometry/utils/getAttributeInfoFromFormat.mjs';\nexport { getGeometryBounds } from './rendering/renderers/shared/geometry/utils/getGeometryBounds.mjs';\nexport { transformVertices } from './rendering/renderers/shared/geometry/utils/transformVertices.mjs';\nexport { InstructionSet } from './rendering/renderers/shared/instructions/InstructionSet.mjs';\nexport { GlobalUniformSystem } from './rendering/renderers/shared/renderTarget/GlobalUniformSystem.mjs';\nexport { isRenderingToScreen } from './rendering/renderers/shared/renderTarget/isRenderingToScreen.mjs';\nexport { RenderTarget } from './rendering/renderers/shared/renderTarget/RenderTarget.mjs';\nexport { RenderTargetSystem } from './rendering/renderers/shared/renderTarget/RenderTargetSystem.mjs';\nexport { SchedulerSystem } from './rendering/renderers/shared/SchedulerSystem.mjs';\nexport { ShaderStage } from './rendering/renderers/shared/shader/const.mjs';\nexport { Shader } from './rendering/renderers/shared/shader/Shader.mjs';\nexport { UNIFORM_TYPES_MAP, UNIFORM_TYPES_VALUES } from './rendering/renderers/shared/shader/types.mjs';\nexport { UboSystem } from './rendering/renderers/shared/shader/UboSystem.mjs';\nexport { UniformGroup } from './rendering/renderers/shared/shader/UniformGroup.mjs';\nexport { createUboSyncFunction } from './rendering/renderers/shared/shader/utils/createUboSyncFunction.mjs';\nexport { getDefaultUniformValue } from './rendering/renderers/shared/shader/utils/getDefaultUniformValue.mjs';\nexport { uboSyncFunctionsSTD40, uboSyncFunctionsWGSL } from './rendering/renderers/shared/shader/utils/uboSyncFunctions.mjs';\nexport { uniformParsers } from './rendering/renderers/shared/shader/utils/uniformParsers.mjs';\nexport { HelloSystem } from './rendering/renderers/shared/startup/HelloSystem.mjs';\nexport { BLEND_TO_NPM, STENCIL_MODES } from './rendering/renderers/shared/state/const.mjs';\nexport { getAdjustedBlendModeBlend } from './rendering/renderers/shared/state/getAdjustedBlendModeBlend.mjs';\nexport { State } from './rendering/renderers/shared/state/State.mjs';\nexport { AbstractRenderer } from './rendering/renderers/shared/system/AbstractRenderer.mjs';\nexport { SharedRenderPipes, SharedSystems } from './rendering/renderers/shared/system/SharedSystems.mjs';\nexport { SystemRunner } from './rendering/renderers/shared/system/SystemRunner.mjs';\nexport { CanvasPool, CanvasPoolClass } from './rendering/renderers/shared/texture/CanvasPool.mjs';\nexport { DEPRECATED_SCALE_MODES, DEPRECATED_WRAP_MODES, SCALE_MODES, WRAP_MODES } from './rendering/renderers/shared/texture/const.mjs';\nexport { RenderableGCSystem } from './rendering/renderers/shared/texture/RenderableGCSystem.mjs';\nexport { RenderTexture } from './rendering/renderers/shared/texture/RenderTexture.mjs';\nexport { BufferImageSource } from './rendering/renderers/shared/texture/sources/BufferImageSource.mjs';\nexport { CanvasSource } from './rendering/renderers/shared/texture/sources/CanvasSource.mjs';\nexport { CompressedSource } from './rendering/renderers/shared/texture/sources/CompressedSource.mjs';\nexport { ImageSource } from './rendering/renderers/shared/texture/sources/ImageSource.mjs';\nexport { TextureSource } from './rendering/renderers/shared/texture/sources/TextureSource.mjs';\nexport { VideoSource } from './rendering/renderers/shared/texture/sources/VideoSource.mjs';\nexport { Texture } from './rendering/renderers/shared/texture/Texture.mjs';\nexport { TextureGCSystem } from './rendering/renderers/shared/texture/TextureGCSystem.mjs';\nexport { TextureMatrix } from './rendering/renderers/shared/texture/TextureMatrix.mjs';\nexport { TexturePool, TexturePoolClass } from './rendering/renderers/shared/texture/TexturePool.mjs';\nexport { TextureStyle } from './rendering/renderers/shared/texture/TextureStyle.mjs';\nexport { TextureUvs } from './rendering/renderers/shared/texture/TextureUvs.mjs';\nexport { getCanvasTexture, hasCachedCanvasTexture } from './rendering/renderers/shared/texture/utils/getCanvasTexture.mjs';\nexport { getSupportedCompressedTextureFormats } from './rendering/renderers/shared/texture/utils/getSupportedCompressedTextureFormats.mjs';\nexport { getSupportedTextureFormats, nonCompressedFormats } from './rendering/renderers/shared/texture/utils/getSupportedTextureFormats.mjs';\nexport { autoDetectSource, resourceToTexture, textureFrom } from './rendering/renderers/shared/texture/utils/textureFrom.mjs';\nexport { createIdFromString } from './rendering/renderers/shared/utils/createIdFromString.mjs';\nexport { parseFunctionBody } from './rendering/renderers/shared/utils/parseFunctionBody.mjs';\nexport { ViewSystem } from './rendering/renderers/shared/view/ViewSystem.mjs';\nexport { RendererType } from './rendering/renderers/types.mjs';\nexport { default as particlesFrag } from './scene/particle-container/shared/shader/particles.frag.mjs';\nexport { default as particlesVert } from './scene/particle-container/shared/shader/particles.vert.mjs';\nexport { default as particlesWgsl } from './scene/particle-container/shared/shader/particles.wgsl.mjs';\nexport { Bounds } from './scene/container/bounds/Bounds.mjs';\nexport { getFastGlobalBounds } from './scene/container/bounds/getFastGlobalBounds.mjs';\nexport { getGlobalBounds, updateTransformBackwards } from './scene/container/bounds/getGlobalBounds.mjs';\nexport { getLocalBounds } from './scene/container/bounds/getLocalBounds.mjs';\nexport { getGlobalRenderableBounds } from './scene/container/bounds/getRenderableBounds.mjs';\nexport { boundsPool, matrixPool } from './scene/container/bounds/utils/matrixAndBoundsPool.mjs';\nexport { cacheAsTextureMixin } from './scene/container/container-mixins/cacheAsTextureMixin.mjs';\nexport { childrenHelperMixin } from './scene/container/container-mixins/childrenHelperMixin.mjs';\nexport { collectRenderablesMixin } from './scene/container/container-mixins/collectRenderablesMixin.mjs';\nexport { effectsMixin } from './scene/container/container-mixins/effectsMixin.mjs';\nexport { findMixin } from './scene/container/container-mixins/findMixin.mjs';\nexport { getFastGlobalBoundsMixin } from './scene/container/container-mixins/getFastGlobalBoundsMixin.mjs';\nexport { bgr2rgb, getGlobalMixin } from './scene/container/container-mixins/getGlobalMixin.mjs';\nexport { measureMixin } from './scene/container/container-mixins/measureMixin.mjs';\nexport { onRenderMixin } from './scene/container/container-mixins/onRenderMixin.mjs';\nexport { sortMixin } from './scene/container/container-mixins/sortMixin.mjs';\nexport { toLocalGlobalMixin } from './scene/container/container-mixins/toLocalGlobalMixin.mjs';\nexport { Container, UPDATE_BLEND, UPDATE_COLOR, UPDATE_TRANSFORM, UPDATE_VISIBLE } from './scene/container/Container.mjs';\nexport { CustomRenderPipe } from './scene/container/CustomRenderPipe.mjs';\nexport { RenderContainer } from './scene/container/RenderContainer.mjs';\nexport { RenderGroup } from './scene/container/RenderGroup.mjs';\nexport { RenderGroupPipe } from './scene/container/RenderGroupPipe.mjs';\nexport { RenderGroupSystem } from './scene/container/RenderGroupSystem.mjs';\nexport { assignWithIgnore } from './scene/container/utils/assignWithIgnore.mjs';\nexport { checkChildrenDidChange } from './scene/container/utils/checkChildrenDidChange.mjs';\nexport { clearList } from './scene/container/utils/clearList.mjs';\nexport { collectAllRenderables } from './scene/container/utils/collectAllRenderables.mjs';\nexport { definedProps } from './scene/container/utils/definedProps.mjs';\nexport { executeInstructions } from './scene/container/utils/executeInstructions.mjs';\nexport { multiplyColors } from './scene/container/utils/multiplyColors.mjs';\nexport { multiplyHexColors } from './scene/container/utils/multiplyHexColors.mjs';\nexport { updateLocalTransform } from './scene/container/utils/updateLocalTransform.mjs';\nexport { updateRenderGroupTransform, updateRenderGroupTransforms, updateTransformAndChildren } from './scene/container/utils/updateRenderGroupTransforms.mjs';\nexport { updateWorldTransform } from './scene/container/utils/updateWorldTransform.mjs';\nexport { validateRenderables } from './scene/container/utils/validateRenderables.mjs';\nexport { GlGraphicsAdaptor } from './scene/graphics/gl/GlGraphicsAdaptor.mjs';\nexport { color32BitToUniform, colorToUniform } from './scene/graphics/gpu/colorToUniform.mjs';\nexport { GpuGraphicsAdaptor } from './scene/graphics/gpu/GpuGraphicsAdaptor.mjs';\nexport { BatchableGraphics } from './scene/graphics/shared/BatchableGraphics.mjs';\nexport { buildAdaptiveBezier } from './scene/graphics/shared/buildCommands/buildAdaptiveBezier.mjs';\nexport { buildAdaptiveQuadratic } from './scene/graphics/shared/buildCommands/buildAdaptiveQuadratic.mjs';\nexport { buildArc } from './scene/graphics/shared/buildCommands/buildArc.mjs';\nexport { buildArcTo } from './scene/graphics/shared/buildCommands/buildArcTo.mjs';\nexport { buildArcToSvg } from './scene/graphics/shared/buildCommands/buildArcToSvg.mjs';\nexport { buildCircle, buildEllipse, buildRoundedRectangle } from './scene/graphics/shared/buildCommands/buildCircle.mjs';\nexport { buildLine } from './scene/graphics/shared/buildCommands/buildLine.mjs';\nexport { buildPixelLine } from './scene/graphics/shared/buildCommands/buildPixelLine.mjs';\nexport { buildPolygon } from './scene/graphics/shared/buildCommands/buildPolygon.mjs';\nexport { buildRectangle } from './scene/graphics/shared/buildCommands/buildRectangle.mjs';\nexport { buildTriangle } from './scene/graphics/shared/buildCommands/buildTriangle.mjs';\nexport { closePointEps, curveEps } from './scene/graphics/shared/const.mjs';\nexport { FillGradient } from './scene/graphics/shared/fill/FillGradient.mjs';\nexport { FillPattern } from './scene/graphics/shared/fill/FillPattern.mjs';\nexport { Graphics } from './scene/graphics/shared/Graphics.mjs';\nexport { GraphicsContext } from './scene/graphics/shared/GraphicsContext.mjs';\nexport { GpuGraphicsContext, GraphicsContextRenderData, GraphicsContextSystem } from './scene/graphics/shared/GraphicsContextSystem.mjs';\nexport { GraphicsGpuData, GraphicsPipe } from './scene/graphics/shared/GraphicsPipe.mjs';\nexport { GraphicsPath } from './scene/graphics/shared/path/GraphicsPath.mjs';\nexport { roundedShapeArc, roundedShapeQuadraticCurve } from './scene/graphics/shared/path/roundShape.mjs';\nexport { ShapePath } from './scene/graphics/shared/path/ShapePath.mjs';\nexport { parseSVGDefinitions } from './scene/graphics/shared/svg/parseSVGDefinitions.mjs';\nexport { parseSVGFloatAttribute } from './scene/graphics/shared/svg/parseSVGFloatAttribute.mjs';\nexport { parseSVGPath } from './scene/graphics/shared/svg/parseSVGPath.mjs';\nexport { parseSVGStyle, styleAttributes } from './scene/graphics/shared/svg/parseSVGStyle.mjs';\nexport { SVGParser } from './scene/graphics/shared/svg/SVGParser.mjs';\nexport { extractSvgUrlId } from './scene/graphics/shared/svg/utils/extractSvgUrlId.mjs';\nexport { checkForNestedPattern, getFillInstructionData } from './scene/graphics/shared/svg/utils/fillOperations.mjs';\nexport { appendSVGPath, calculatePathArea, extractSubpaths } from './scene/graphics/shared/svg/utils/pathOperations.mjs';\nexport { buildContextBatches, shapeBuilders } from './scene/graphics/shared/utils/buildContextBatches.mjs';\nexport { buildGeometryFromPath } from './scene/graphics/shared/utils/buildGeometryFromPath.mjs';\nexport { toFillStyle, toStrokeStyle } from './scene/graphics/shared/utils/convertFillInputToFillStyle.mjs';\nexport { generateTextureMatrix } from './scene/graphics/shared/utils/generateTextureFillMatrix.mjs';\nexport { getOrientationOfPoints } from './scene/graphics/shared/utils/getOrientationOfPoints.mjs';\nexport { triangulateWithHoles } from './scene/graphics/shared/utils/triangulateWithHoles.mjs';\nexport { RenderLayer } from './scene/layers/RenderLayer.mjs';\nexport { PerspectiveMesh } from './scene/mesh-perspective/PerspectiveMesh.mjs';\nexport { PerspectivePlaneGeometry } from './scene/mesh-perspective/PerspectivePlaneGeometry.mjs';\nexport { applyProjectiveTransformationToPlane } from './scene/mesh-perspective/utils/applyProjectiveTransformationToPlane.mjs';\nexport { compute2DProjection } from './scene/mesh-perspective/utils/compute2DProjections.mjs';\nexport { MeshPlane } from './scene/mesh-plane/MeshPlane.mjs';\nexport { PlaneGeometry } from './scene/mesh-plane/PlaneGeometry.mjs';\nexport { MeshRope } from './scene/mesh-simple/MeshRope.mjs';\nexport { MeshSimple } from './scene/mesh-simple/MeshSimple.mjs';\nexport { RopeGeometry } from './scene/mesh-simple/RopeGeometry.mjs';\nexport { GlMeshAdaptor } from './scene/mesh/gl/GlMeshAdaptor.mjs';\nexport { GpuMeshAdapter } from './scene/mesh/gpu/GpuMeshAdapter.mjs';\nexport { BatchableMesh } from './scene/mesh/shared/BatchableMesh.mjs';\nexport { getTextureDefaultMatrix } from './scene/mesh/shared/getTextureDefaultMatrix.mjs';\nexport { Mesh } from './scene/mesh/shared/Mesh.mjs';\nexport { MeshGeometry } from './scene/mesh/shared/MeshGeometry.mjs';\nexport { MeshGpuData, MeshPipe } from './scene/mesh/shared/MeshPipe.mjs';\nexport { GlParticleContainerAdaptor } from './scene/particle-container/gl/GlParticleContainerAdaptor.mjs';\nexport { GpuParticleContainerAdaptor } from './scene/particle-container/gpu/GpuParticleContainerAdaptor.mjs';\nexport { GlParticleContainerPipe } from './scene/particle-container/shared/GlParticleContainerPipe.mjs';\nexport { GpuParticleContainerPipe } from './scene/particle-container/shared/GpuParticleContainerPipe.mjs';\nexport { Particle } from './scene/particle-container/shared/Particle.mjs';\nexport { ParticleBuffer } from './scene/particle-container/shared/ParticleBuffer.mjs';\nexport { ParticleContainer } from './scene/particle-container/shared/ParticleContainer.mjs';\nexport { ParticleContainerPipe } from './scene/particle-container/shared/ParticleContainerPipe.mjs';\nexport { particleData } from './scene/particle-container/shared/particleData.mjs';\nexport { ParticleShader } from './scene/particle-container/shared/shader/ParticleShader.mjs';\nexport { createIndicesForQuads } from './scene/particle-container/shared/utils/createIndicesForQuads.mjs';\nexport { generateParticleUpdateFunction } from './scene/particle-container/shared/utils/generateParticleUpdateFunction.mjs';\nexport { AnimatedSprite } from './scene/sprite-animated/AnimatedSprite.mjs';\nexport { NineSliceGeometry } from './scene/sprite-nine-slice/NineSliceGeometry.mjs';\nexport { NineSlicePlane, NineSliceSprite } from './scene/sprite-nine-slice/NineSliceSprite.mjs';\nexport { NineSliceSpriteGpuData, NineSliceSpritePipe } from './scene/sprite-nine-slice/NineSliceSpritePipe.mjs';\nexport { tilingBit, tilingBitGl } from './scene/sprite-tiling/shader/tilingBit.mjs';\nexport { TilingSpriteShader } from './scene/sprite-tiling/shader/TilingSpriteShader.mjs';\nexport { TilingSprite } from './scene/sprite-tiling/TilingSprite.mjs';\nexport { TilingSpriteGpuData, TilingSpritePipe } from './scene/sprite-tiling/TilingSpritePipe.mjs';\nexport { applyMatrix } from './scene/sprite-tiling/utils/applyMatrix.mjs';\nexport { QuadGeometry } from './scene/sprite-tiling/utils/QuadGeometry.mjs';\nexport { setPositions } from './scene/sprite-tiling/utils/setPositions.mjs';\nexport { setUvs } from './scene/sprite-tiling/utils/setUvs.mjs';\nexport { BatchableSprite } from './scene/sprite/BatchableSprite.mjs';\nexport { Sprite } from './scene/sprite/Sprite.mjs';\nexport { SpritePipe } from './scene/sprite/SpritePipe.mjs';\nexport { AbstractBitmapFont } from './scene/text-bitmap/AbstractBitmapFont.mjs';\nexport { bitmapFontTextParser } from './scene/text-bitmap/asset/bitmapFontTextParser.mjs';\nexport { bitmapFontXMLParser } from './scene/text-bitmap/asset/bitmapFontXMLParser.mjs';\nexport { bitmapFontXMLStringParser } from './scene/text-bitmap/asset/bitmapFontXMLStringParser.mjs';\nexport { bitmapFontCachePlugin, loadBitmapFont } from './scene/text-bitmap/asset/loadBitmapFont.mjs';\nexport { BitmapFont } from './scene/text-bitmap/BitmapFont.mjs';\nexport { BitmapFontManager } from './scene/text-bitmap/BitmapFontManager.mjs';\nexport { BitmapText } from './scene/text-bitmap/BitmapText.mjs';\nexport { BitmapTextGraphics, BitmapTextPipe } from './scene/text-bitmap/BitmapTextPipe.mjs';\nexport { DynamicBitmapFont } from './scene/text-bitmap/DynamicBitmapFont.mjs';\nexport { bitmapTextSplit } from './scene/text-bitmap/utils/bitmapTextSplit.mjs';\nexport { getBitmapTextLayout } from './scene/text-bitmap/utils/getBitmapTextLayout.mjs';\nexport { resolveCharacters } from './scene/text-bitmap/utils/resolveCharacters.mjs';\nexport { BatchableHTMLText } from './scene/text-html/BatchableHTMLText.mjs';\nexport { HTMLText } from './scene/text-html/HTMLText.mjs';\nexport { HTMLTextPipe } from './scene/text-html/HTMLTextPipe.mjs';\nexport { HTMLTextRenderData } from './scene/text-html/HTMLTextRenderData.mjs';\nexport { HTMLTextStyle } from './scene/text-html/HTMLTextStyle.mjs';\nexport { HTMLTextSystem } from './scene/text-html/HTMLTextSystem.mjs';\nexport { extractFontFamilies } from './scene/text-html/utils/extractFontFamilies.mjs';\nexport { FontStylePromiseCache, getFontCss } from './scene/text-html/utils/getFontCss.mjs';\nexport { getSVGUrl } from './scene/text-html/utils/getSVGUrl.mjs';\nexport { getTemporaryCanvasFromImage } from './scene/text-html/utils/getTemporaryCanvasFromImage.mjs';\nexport { loadFontAsBase64 } from './scene/text-html/utils/loadFontAsBase64.mjs';\nexport { loadFontCSS } from './scene/text-html/utils/loadFontCSS.mjs';\nexport { loadSVGImage } from './scene/text-html/utils/loadSVGImage.mjs';\nexport { measureHtmlText } from './scene/text-html/utils/measureHtmlText.mjs';\nexport { textStyleToCSS } from './scene/text-html/utils/textStyleToCSS.mjs';\nexport { AbstractSplitText } from './scene/text-split/AbstractSplitText.mjs';\nexport { SplitBitmapText } from './scene/text-split/SplitBitmapText.mjs';\nexport { SplitText } from './scene/text-split/SplitText.mjs';\nexport { AbstractText, ensureTextOptions } from './scene/text/AbstractText.mjs';\nexport { BatchableText } from './scene/text/canvas/BatchableText.mjs';\nexport { CanvasTextGenerator } from './scene/text/canvas/CanvasTextGenerator.mjs';\nexport { CanvasTextMetrics } from './scene/text/canvas/CanvasTextMetrics.mjs';\nexport { CanvasTextPipe } from './scene/text/canvas/CanvasTextPipe.mjs';\nexport { CanvasTextSystem } from './scene/text/canvas/CanvasTextSystem.mjs';\nexport { fontStringFromTextStyle } from './scene/text/canvas/utils/fontStringFromTextStyle.mjs';\nexport { getCanvasFillStyle } from './scene/text/canvas/utils/getCanvasFillStyle.mjs';\nexport { SdfShader } from './scene/text/sdfShader/SdfShader.mjs';\nexport { localUniformMSDFBit, localUniformMSDFBitGl } from './scene/text/sdfShader/shader-bits/localUniformMSDFBit.mjs';\nexport { mSDFBit, mSDFBitGl } from './scene/text/sdfShader/shader-bits/mSDFBit.mjs';\nexport { Text } from './scene/text/Text.mjs';\nexport { TextStyle } from './scene/text/TextStyle.mjs';\nexport { canvasTextSplit } from './scene/text/utils/canvasTextSplit.mjs';\nexport { generateTextStyleKey } from './scene/text/utils/generateTextStyleKey.mjs';\nexport { getPo2TextureFromSource } from './scene/text/utils/getPo2TextureFromSource.mjs';\nexport { updateTextBounds } from './scene/text/utils/updateTextBounds.mjs';\nexport { ViewContainer } from './scene/view/ViewContainer.mjs';\nexport { Spritesheet } from './spritesheet/Spritesheet.mjs';\nexport { spritesheetAsset } from './spritesheet/spritesheetAsset.mjs';\nexport { UPDATE_PRIORITY } from './ticker/const.mjs';\nexport { Ticker } from './ticker/Ticker.mjs';\nexport { TickerListener } from './ticker/TickerListener.mjs';\nexport { detectVideoAlphaMode } from './utils/browser/detectVideoAlphaMode.mjs';\nexport { isMobile } from './utils/browser/isMobile.mjs';\nexport { isSafari } from './utils/browser/isSafari.mjs';\nexport { isWebGLSupported } from './utils/browser/isWebGLSupported.mjs';\nexport { isWebGPUSupported } from './utils/browser/isWebGPUSupported.mjs';\nexport { unsafeEvalSupported } from './utils/browser/unsafeEvalSupported.mjs';\nexport { getCanvasBoundingBox } from './utils/canvas/getCanvasBoundingBox.mjs';\nexport { DATA_URI, VERSION } from './utils/const.mjs';\nexport { default as EventEmitter } from 'eventemitter3';\nexport { cleanArray, cleanHash } from './utils/data/clean.mjs';\nexport { removeItems } from './utils/data/removeItems.mjs';\nexport { resetUids, uid } from './utils/data/uid.mjs';\nexport { updateQuadBounds } from './utils/data/updateQuadBounds.mjs';\nexport { ViewableBuffer } from './utils/data/ViewableBuffer.mjs';\nexport { ApplicationInitHook, RendererInitHook } from './utils/global/globalHooks.mjs';\nexport { deprecation, v8_0_0, v8_3_4 } from './utils/logging/deprecation.mjs';\nexport { logDebugTexture } from './utils/logging/logDebugTexture.mjs';\nexport { logRenderGroupScene, logScene } from './utils/logging/logScene.mjs';\nexport { warn } from './utils/logging/warn.mjs';\nexport { NOOP } from './utils/misc/NOOP.mjs';\nexport { Transform } from './utils/misc/Transform.mjs';\nexport { getResolutionOfUrl } from './utils/network/getResolutionOfUrl.mjs';\nexport { path } from './utils/path.mjs';\nexport { GlobalResourceRegistry } from './utils/pool/GlobalResourceRegistry.mjs';\nexport { Pool } from './utils/pool/Pool.mjs';\nexport { BigPool, PoolGroupClass } from './utils/pool/PoolGroup.mjs';\nexport { sayHello } from './utils/sayHello.mjs';\nexport { earcut } from './utils/utils.mjs';\n\n\"use strict\";\nextensions.add(browserExt, webworkerExt);\n\nexport { browserExt, extensions, webworkerExt };\n//# sourceMappingURL=index.mjs.map\n","/**\r\n * Interpolates between two values using a value\r\n *\r\n * @param a\r\n * @param b\r\n * @param k\r\n */\r\nexport function lerp(a: number, b: number, k: number): number {\r\n\treturn (b - a) * k + a;\r\n}\r\n","/** Used to match a single whitespace character. */\nvar reWhitespace = /\\s/;\n\n/**\n * Used by `_.trim` and `_.trimEnd` to get the index of the last non-whitespace\n * character of `string`.\n *\n * @private\n * @param {string} string The string to inspect.\n * @returns {number} Returns the index of the last non-whitespace character.\n */\nfunction trimmedEndIndex(string) {\n  var index = string.length;\n\n  while (index-- && reWhitespace.test(string.charAt(index))) {}\n  return index;\n}\n\nexport default trimmedEndIndex;\n","import trimmedEndIndex from './_trimmedEndIndex.js';\n\n/** Used to match leading whitespace. */\nvar reTrimStart = /^\\s+/;\n\n/**\n * The base implementation of `_.trim`.\n *\n * @private\n * @param {string} string The string to trim.\n * @returns {string} Returns the trimmed string.\n */\nfunction baseTrim(string) {\n  return string\n    ? string.slice(0, trimmedEndIndex(string) + 1).replace(reTrimStart, '')\n    : string;\n}\n\nexport default baseTrim;\n","/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return value != null && (type == 'object' || type == 'function');\n}\n\nexport default isObject;\n","/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\nexport default freeGlobal;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\nexport default root;\n","import root from './_root.js';\n\n/** Built-in value references. */\nvar Symbol = root.Symbol;\n\nexport default Symbol;\n","import Symbol from './_Symbol.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * A specialized version of `baseGetTag` which ignores `Symbol.toStringTag` values.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the raw `toStringTag`.\n */\nfunction getRawTag(value) {\n  var isOwn = hasOwnProperty.call(value, symToStringTag),\n      tag = value[symToStringTag];\n\n  try {\n    value[symToStringTag] = undefined;\n    var unmasked = true;\n  } catch (e) {}\n\n  var result = nativeObjectToString.call(value);\n  if (unmasked) {\n    if (isOwn) {\n      value[symToStringTag] = tag;\n    } else {\n      delete value[symToStringTag];\n    }\n  }\n  return result;\n}\n\nexport default getRawTag;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar nativeObjectToString = objectProto.toString;\n\n/**\n * Converts `value` to a string using `Object.prototype.toString`.\n *\n * @private\n * @param {*} value The value to convert.\n * @returns {string} Returns the converted string.\n */\nfunction objectToString(value) {\n  return nativeObjectToString.call(value);\n}\n\nexport default objectToString;\n","import Symbol from './_Symbol.js';\nimport getRawTag from './_getRawTag.js';\nimport objectToString from './_objectToString.js';\n\n/** `Object#toString` result references. */\nvar nullTag = '[object Null]',\n    undefinedTag = '[object Undefined]';\n\n/** Built-in value references. */\nvar symToStringTag = Symbol ? Symbol.toStringTag : undefined;\n\n/**\n * The base implementation of `getTag` without fallbacks for buggy environments.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  if (value == null) {\n    return value === undefined ? undefinedTag : nullTag;\n  }\n  return (symToStringTag && symToStringTag in Object(value))\n    ? getRawTag(value)\n    : objectToString(value);\n}\n\nexport default baseGetTag;\n","/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return value != null && typeof value == 'object';\n}\n\nexport default isObjectLike;\n","import baseTrim from './_baseTrim.js';\nimport isObject from './isObject.js';\nimport isSymbol from './isSymbol.js';\n\n/** Used as references for various `Number` constants. */\nvar NAN = 0 / 0;\n\n/** Used to detect bad signed hexadecimal string values. */\nvar reIsBadHex = /^[-+]0x[0-9a-f]+$/i;\n\n/** Used to detect binary string values. */\nvar reIsBinary = /^0b[01]+$/i;\n\n/** Used to detect octal string values. */\nvar reIsOctal = /^0o[0-7]+$/i;\n\n/** Built-in method references without a dependency on `root`. */\nvar freeParseInt = parseInt;\n\n/**\n * Converts `value` to a number.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to process.\n * @returns {number} Returns the number.\n * @example\n *\n * _.toNumber(3.2);\n * // => 3.2\n *\n * _.toNumber(Number.MIN_VALUE);\n * // => 5e-324\n *\n * _.toNumber(Infinity);\n * // => Infinity\n *\n * _.toNumber('3.2');\n * // => 3.2\n */\nfunction toNumber(value) {\n  if (typeof value == 'number') {\n    return value;\n  }\n  if (isSymbol(value)) {\n    return NAN;\n  }\n  if (isObject(value)) {\n    var other = typeof value.valueOf == 'function' ? value.valueOf() : value;\n    value = isObject(other) ? (other + '') : other;\n  }\n  if (typeof value != 'string') {\n    return value === 0 ? value : +value;\n  }\n  value = baseTrim(value);\n  var isBinary = reIsBinary.test(value);\n  return (isBinary || reIsOctal.test(value))\n    ? freeParseInt(value.slice(2), isBinary ? 2 : 8)\n    : (reIsBadHex.test(value) ? NAN : +value);\n}\n\nexport default toNumber;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar symbolTag = '[object Symbol]';\n\n/**\n * Checks if `value` is classified as a `Symbol` primitive or object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a symbol, else `false`.\n * @example\n *\n * _.isSymbol(Symbol.iterator);\n * // => true\n *\n * _.isSymbol('abc');\n * // => false\n */\nfunction isSymbol(value) {\n  return typeof value == 'symbol' ||\n    (isObjectLike(value) && baseGetTag(value) == symbolTag);\n}\n\nexport default isSymbol;\n","/**\n * This method returns the first argument it receives.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Util\n * @param {*} value Any value.\n * @returns {*} Returns `value`.\n * @example\n *\n * var object = { 'a': 1 };\n *\n * console.log(_.identity(object) === object);\n * // => true\n */\nfunction identity(value) {\n  return value;\n}\n\nexport default identity;\n","import apply from './_apply.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeMax = Math.max;\n\n/**\n * A specialized version of `baseRest` which transforms the rest array.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @param {Function} transform The rest array transform.\n * @returns {Function} Returns the new function.\n */\nfunction overRest(func, start, transform) {\n  start = nativeMax(start === undefined ? (func.length - 1) : start, 0);\n  return function() {\n    var args = arguments,\n        index = -1,\n        length = nativeMax(args.length - start, 0),\n        array = Array(length);\n\n    while (++index < length) {\n      array[index] = args[start + index];\n    }\n    index = -1;\n    var otherArgs = Array(start + 1);\n    while (++index < start) {\n      otherArgs[index] = args[index];\n    }\n    otherArgs[start] = transform(array);\n    return apply(func, this, otherArgs);\n  };\n}\n\nexport default overRest;\n","import baseGetTag from './_baseGetTag.js';\nimport isObject from './isObject.js';\n\n/** `Object#toString` result references. */\nvar asyncTag = '[object AsyncFunction]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    proxyTag = '[object Proxy]';\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  if (!isObject(value)) {\n    return false;\n  }\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 9 which returns 'object' for typed arrays and other constructors.\n  var tag = baseGetTag(value);\n  return tag == funcTag || tag == genTag || tag == asyncTag || tag == proxyTag;\n}\n\nexport default isFunction;\n","import root from './_root.js';\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\nexport default coreJsData;\n","import coreJsData from './_coreJsData.js';\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\nexport default isMasked;\n","/** Used for built-in method references. */\nvar funcProto = Function.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to convert.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\nexport default toSource;\n","import isFunction from './isFunction.js';\nimport isMasked from './_isMasked.js';\nimport isObject from './isObject.js';\nimport toSource from './_toSource.js';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used for built-in method references. */\nvar funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = isFunction(value) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\nexport default baseIsNative;\n","import getNative from './_getNative.js';\n\nvar defineProperty = (function() {\n  try {\n    var func = getNative(Object, 'defineProperty');\n    func({}, '', {});\n    return func;\n  } catch (e) {}\n}());\n\nexport default defineProperty;\n","import baseIsNative from './_baseIsNative.js';\nimport getValue from './_getValue.js';\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\nexport default getNative;\n","/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\nexport default getValue;\n","import constant from './constant.js';\nimport defineProperty from './_defineProperty.js';\nimport identity from './identity.js';\n\n/**\n * The base implementation of `setToString` without support for hot loop shorting.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar baseSetToString = !defineProperty ? identity : function(func, string) {\n  return defineProperty(func, 'toString', {\n    'configurable': true,\n    'enumerable': false,\n    'value': constant(string),\n    'writable': true\n  });\n};\n\nexport default baseSetToString;\n","/**\n * Creates a function that returns `value`.\n *\n * @static\n * @memberOf _\n * @since 2.4.0\n * @category Util\n * @param {*} value The value to return from the new function.\n * @returns {Function} Returns the new constant function.\n * @example\n *\n * var objects = _.times(2, _.constant({ 'a': 1 }));\n *\n * console.log(objects);\n * // => [{ 'a': 1 }, { 'a': 1 }]\n *\n * console.log(objects[0] === objects[1]);\n * // => true\n */\nfunction constant(value) {\n  return function() {\n    return value;\n  };\n}\n\nexport default constant;\n","/** Used to detect hot functions by number of calls within a span of milliseconds. */\nvar HOT_COUNT = 800,\n    HOT_SPAN = 16;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeNow = Date.now;\n\n/**\n * Creates a function that'll short out and invoke `identity` instead\n * of `func` when it's called `HOT_COUNT` or more times in `HOT_SPAN`\n * milliseconds.\n *\n * @private\n * @param {Function} func The function to restrict.\n * @returns {Function} Returns the new shortable function.\n */\nfunction shortOut(func) {\n  var count = 0,\n      lastCalled = 0;\n\n  return function() {\n    var stamp = nativeNow(),\n        remaining = HOT_SPAN - (stamp - lastCalled);\n\n    lastCalled = stamp;\n    if (remaining > 0) {\n      if (++count >= HOT_COUNT) {\n        return arguments[0];\n      }\n    } else {\n      count = 0;\n    }\n    return func.apply(undefined, arguments);\n  };\n}\n\nexport default shortOut;\n","import baseSetToString from './_baseSetToString.js';\nimport shortOut from './_shortOut.js';\n\n/**\n * Sets the `toString` method of `func` to return `string`.\n *\n * @private\n * @param {Function} func The function to modify.\n * @param {Function} string The `toString` result.\n * @returns {Function} Returns `func`.\n */\nvar setToString = shortOut(baseSetToString);\n\nexport default setToString;\n","import identity from './identity.js';\nimport overRest from './_overRest.js';\nimport setToString from './_setToString.js';\n\n/**\n * The base implementation of `_.rest` which doesn't validate or coerce arguments.\n *\n * @private\n * @param {Function} func The function to apply a rest parameter to.\n * @param {number} [start=func.length-1] The start position of the rest parameter.\n * @returns {Function} Returns the new function.\n */\nfunction baseRest(func, start) {\n  return setToString(overRest(func, start, identity), func + '');\n}\n\nexport default baseRest;\n","/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\nexport default eq;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\nexport default isLength;\n","import isFunction from './isFunction.js';\nimport isLength from './isLength.js';\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\nexport default isArrayLike;\n","/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  var type = typeof value;\n  length = length == null ? MAX_SAFE_INTEGER : length;\n\n  return !!length &&\n    (type == 'number' ||\n      (type != 'symbol' && reIsUint.test(value))) &&\n        (value > -1 && value % 1 == 0 && value < length);\n}\n\nexport default isIndex;\n","import baseGetTag from './_baseGetTag.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]';\n\n/**\n * The base implementation of `_.isArguments`.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n */\nfunction baseIsArguments(value) {\n  return isObjectLike(value) && baseGetTag(value) == argsTag;\n}\n\nexport default baseIsArguments;\n","import baseIsArguments from './_baseIsArguments.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/** Built-in value references. */\nvar propertyIsEnumerable = objectProto.propertyIsEnumerable;\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nvar isArguments = baseIsArguments(function() { return arguments; }()) ? baseIsArguments : function(value) {\n  return isObjectLike(value) && hasOwnProperty.call(value, 'callee') &&\n    !propertyIsEnumerable.call(value, 'callee');\n};\n\nexport default isArguments;\n","/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\nexport default isArray;\n","import root from './_root.js';\nimport stubFalse from './stubFalse.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined;\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\nexport default isBuffer;\n","/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nexport default stubFalse;\n","import baseGetTag from './_baseGetTag.js';\nimport isLength from './isLength.js';\nimport isObjectLike from './isObjectLike.js';\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/** Used to identify `toStringTag` values of typed arrays. */\nvar typedArrayTags = {};\ntypedArrayTags[float32Tag] = typedArrayTags[float64Tag] =\ntypedArrayTags[int8Tag] = typedArrayTags[int16Tag] =\ntypedArrayTags[int32Tag] = typedArrayTags[uint8Tag] =\ntypedArrayTags[uint8ClampedTag] = typedArrayTags[uint16Tag] =\ntypedArrayTags[uint32Tag] = true;\ntypedArrayTags[argsTag] = typedArrayTags[arrayTag] =\ntypedArrayTags[arrayBufferTag] = typedArrayTags[boolTag] =\ntypedArrayTags[dataViewTag] = typedArrayTags[dateTag] =\ntypedArrayTags[errorTag] = typedArrayTags[funcTag] =\ntypedArrayTags[mapTag] = typedArrayTags[numberTag] =\ntypedArrayTags[objectTag] = typedArrayTags[regexpTag] =\ntypedArrayTags[setTag] = typedArrayTags[stringTag] =\ntypedArrayTags[weakMapTag] = false;\n\n/**\n * The base implementation of `_.isTypedArray` without Node.js optimizations.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n */\nfunction baseIsTypedArray(value) {\n  return isObjectLike(value) &&\n    isLength(value.length) && !!typedArrayTags[baseGetTag(value)];\n}\n\nexport default baseIsTypedArray;\n","import freeGlobal from './_freeGlobal.js';\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/** Detect free variable `process` from Node.js. */\nvar freeProcess = moduleExports && freeGlobal.process;\n\n/** Used to access faster Node.js helpers. */\nvar nodeUtil = (function() {\n  try {\n    // Use `util.types` for Node.js 10+.\n    var types = freeModule && freeModule.require && freeModule.require('util').types;\n\n    if (types) {\n      return types;\n    }\n\n    // Legacy `process.binding('util')` for Node.js < 10.\n    return freeProcess && freeProcess.binding && freeProcess.binding('util');\n  } catch (e) {}\n}());\n\nexport default nodeUtil;\n","import baseIsTypedArray from './_baseIsTypedArray.js';\nimport baseUnary from './_baseUnary.js';\nimport nodeUtil from './_nodeUtil.js';\n\n/* Node.js helper references. */\nvar nodeIsTypedArray = nodeUtil && nodeUtil.isTypedArray;\n\n/**\n * Checks if `value` is classified as a typed array.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a typed array, else `false`.\n * @example\n *\n * _.isTypedArray(new Uint8Array);\n * // => true\n *\n * _.isTypedArray([]);\n * // => false\n */\nvar isTypedArray = nodeIsTypedArray ? baseUnary(nodeIsTypedArray) : baseIsTypedArray;\n\nexport default isTypedArray;\n","/**\n * The base implementation of `_.unary` without support for storing metadata.\n *\n * @private\n * @param {Function} func The function to cap arguments for.\n * @returns {Function} Returns the new capped function.\n */\nfunction baseUnary(func) {\n  return function(value) {\n    return func(value);\n  };\n}\n\nexport default baseUnary;\n","import baseTimes from './_baseTimes.js';\nimport isArguments from './isArguments.js';\nimport isArray from './isArray.js';\nimport isBuffer from './isBuffer.js';\nimport isIndex from './_isIndex.js';\nimport isTypedArray from './isTypedArray.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  var isArr = isArray(value),\n      isArg = !isArr && isArguments(value),\n      isBuff = !isArr && !isArg && isBuffer(value),\n      isType = !isArr && !isArg && !isBuff && isTypedArray(value),\n      skipIndexes = isArr || isArg || isBuff || isType,\n      result = skipIndexes ? baseTimes(value.length, String) : [],\n      length = result.length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (\n           // Safari 9 has enumerable `arguments.length` in strict mode.\n           key == 'length' ||\n           // Node.js 0.10 has enumerable non-index properties on buffers.\n           (isBuff && (key == 'offset' || key == 'parent')) ||\n           // PhantomJS 2 has enumerable non-index properties on typed arrays.\n           (isType && (key == 'buffer' || key == 'byteLength' || key == 'byteOffset')) ||\n           // Skip index properties.\n           isIndex(key, length)\n        ))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default arrayLikeKeys;\n","/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\nexport default baseTimes;\n","/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\nexport default isPrototype;\n","import isObject from './isObject.js';\nimport isPrototype from './_isPrototype.js';\nimport nativeKeysIn from './_nativeKeysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keysIn` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeysIn(object) {\n  if (!isObject(object)) {\n    return nativeKeysIn(object);\n  }\n  var isProto = isPrototype(object),\n      result = [];\n\n  for (var key in object) {\n    if (!(key == 'constructor' && (isProto || !hasOwnProperty.call(object, key)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeysIn;\n","/**\n * This function is like\n * [`Object.keys`](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * except that it includes inherited enumerable properties.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction nativeKeysIn(object) {\n  var result = [];\n  if (object != null) {\n    for (var key in Object(object)) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default nativeKeysIn;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeysIn from './_baseKeysIn.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own and inherited enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @memberOf _\n * @since 3.0.0\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keysIn(new Foo);\n * // => ['a', 'b', 'c'] (iteration order is not guaranteed)\n */\nfunction keysIn(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object, true) : baseKeysIn(object);\n}\n\nexport default keysIn;\n","import baseRest from './_baseRest.js';\nimport eq from './eq.js';\nimport isIterateeCall from './_isIterateeCall.js';\nimport keysIn from './keysIn.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Assigns own and inherited enumerable string keyed properties of source\n * objects to the destination object for all destination properties that\n * resolve to `undefined`. Source objects are applied from left to right.\n * Once a property is set, additional values of the same property are ignored.\n *\n * **Note:** This method mutates `object`.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The destination object.\n * @param {...Object} [sources] The source objects.\n * @returns {Object} Returns `object`.\n * @see _.defaultsDeep\n * @example\n *\n * _.defaults({ 'a': 1 }, { 'b': 2 }, { 'a': 3 });\n * // => { 'a': 1, 'b': 2 }\n */\nvar defaults = baseRest(function(object, sources) {\n  object = Object(object);\n\n  var index = -1;\n  var length = sources.length;\n  var guard = length > 2 ? sources[2] : undefined;\n\n  if (guard && isIterateeCall(sources[0], sources[1], guard)) {\n    length = 1;\n  }\n\n  while (++index < length) {\n    var source = sources[index];\n    var props = keysIn(source);\n    var propsIndex = -1;\n    var propsLength = props.length;\n\n    while (++propsIndex < propsLength) {\n      var key = props[propsIndex];\n      var value = object[key];\n\n      if (value === undefined ||\n          (eq(value, objectProto[key]) && !hasOwnProperty.call(object, key))) {\n        object[key] = source[key];\n      }\n    }\n  }\n\n  return object;\n});\n\nexport default defaults;\n","/**\n * A faster alternative to `Function#apply`, this function invokes `func`\n * with the `this` binding of `thisArg` and the arguments of `args`.\n *\n * @private\n * @param {Function} func The function to invoke.\n * @param {*} thisArg The `this` binding of `func`.\n * @param {Array} args The arguments to invoke `func` with.\n * @returns {*} Returns the result of `func`.\n */\nfunction apply(func, thisArg, args) {\n  switch (args.length) {\n    case 0: return func.call(thisArg);\n    case 1: return func.call(thisArg, args[0]);\n    case 2: return func.call(thisArg, args[0], args[1]);\n    case 3: return func.call(thisArg, args[0], args[1], args[2]);\n  }\n  return func.apply(thisArg, args);\n}\n\nexport default apply;\n","import eq from './eq.js';\nimport isArrayLike from './isArrayLike.js';\nimport isIndex from './_isIndex.js';\nimport isObject from './isObject.js';\n\n/**\n * Checks if the given arguments are from an iteratee call.\n *\n * @private\n * @param {*} value The potential iteratee value argument.\n * @param {*} index The potential iteratee index or key argument.\n * @param {*} object The potential iteratee object argument.\n * @returns {boolean} Returns `true` if the arguments are from an iteratee call,\n *  else `false`.\n */\nfunction isIterateeCall(value, index, object) {\n  if (!isObject(object)) {\n    return false;\n  }\n  var type = typeof index;\n  if (type == 'number'\n        ? (isArrayLike(object) && isIndex(index, object.length))\n        : (type == 'string' && index in object)\n      ) {\n    return eq(object[index], value);\n  }\n  return false;\n}\n\nexport default isIterateeCall;\n","export const version = \"15.1.22\";\n//# sourceMappingURL=version.js.map","export const createAbortError = () => new DOMException('', 'AbortError');\n//# sourceMappingURL=abort-error.js.map","export const ACTIVE_AUDIO_NODE_STORE = new WeakSet();\nexport const AUDIO_NODE_CONNECTIONS_STORE = new WeakMap();\nexport const AUDIO_NODE_STORE = new WeakMap();\nexport const AUDIO_PARAM_CONNECTIONS_STORE = new WeakMap();\nexport const AUDIO_PARAM_STORE = new WeakMap();\nexport const CONTEXT_STORE = new WeakMap();\nexport const EVENT_LISTENERS = new WeakMap();\nexport const CYCLE_COUNTERS = new WeakMap();\n// This clunky name is borrowed from the spec. :-)\nexport const NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS = new WeakMap();\nexport const NODE_TO_PROCESSOR_MAPS = new WeakMap();\n//# sourceMappingURL=globals.js.map","const handler = {\n    construct() {\n        return handler;\n    }\n};\nexport const isConstructible = (constructible) => {\n    try {\n        const proxy = new Proxy(constructible, handler);\n        new proxy(); // tslint:disable-line:no-unused-expression\n    }\n    catch {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=is-constructible.js.map","/*\n * This massive regex tries to cover all the following cases.\n *\n * import './path';\n * import defaultImport from './path';\n * import { namedImport } from './path';\n * import { namedImport as renamendImport } from './path';\n * import * as namespaceImport from './path';\n * import defaultImport, { namedImport } from './path';\n * import defaultImport, { namedImport as renamendImport } from './path';\n * import defaultImport, * as namespaceImport from './path';\n */\nconst IMPORT_STATEMENT_REGEX = /^import(?:(?:[\\s]+[\\w]+|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\{[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?(?:[\\s]*,[\\s]*[\\w]+(?:[\\s]+as[\\s]+[\\w]+)?)*[\\s]*}|(?:[\\s]+[\\w]+[\\s]*,)?[\\s]*\\*[\\s]+as[\\s]+[\\w]+)[\\s]+from)?(?:[\\s]*)(\"([^\"\\\\]|\\\\.)+\"|'([^'\\\\]|\\\\.)+')(?:[\\s]*);?/; // tslint:disable-line:max-line-length\nexport const splitImportStatements = (source, url) => {\n    const importStatements = [];\n    let sourceWithoutImportStatements = source.replace(/^[\\s]+/, '');\n    let result = sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX);\n    while (result !== null) {\n        const unresolvedUrl = result[1].slice(1, -1);\n        const importStatementWithResolvedUrl = result[0]\n            .replace(/([\\s]+)?;?$/, '')\n            .replace(unresolvedUrl, new URL(unresolvedUrl, url).toString());\n        importStatements.push(importStatementWithResolvedUrl);\n        sourceWithoutImportStatements = sourceWithoutImportStatements.slice(result[0].length).replace(/^[\\s]+/, '');\n        result = sourceWithoutImportStatements.match(IMPORT_STATEMENT_REGEX);\n    }\n    return [importStatements.join(';'), sourceWithoutImportStatements];\n};\n//# sourceMappingURL=split-import-statements.js.map","import { NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS } from '../globals';\nimport { isConstructible } from '../helpers/is-constructible';\nimport { splitImportStatements } from '../helpers/split-import-statements';\nconst verifyParameterDescriptors = (parameterDescriptors) => {\n    if (parameterDescriptors !== undefined && !Array.isArray(parameterDescriptors)) {\n        throw new TypeError('The parameterDescriptors property of given value for processorCtor is not an array.');\n    }\n};\nconst verifyProcessorCtor = (processorCtor) => {\n    if (!isConstructible(processorCtor)) {\n        throw new TypeError('The given value for processorCtor should be a constructor.');\n    }\n    if (processorCtor.prototype === null || typeof processorCtor.prototype !== 'object') {\n        throw new TypeError('The given value for processorCtor should have a prototype.');\n    }\n};\nexport const createAddAudioWorkletModule = (cacheTestResult, createNotSupportedError, evaluateSource, exposeCurrentFrameAndCurrentTime, fetchSource, getNativeContext, getOrCreateBackupOfflineAudioContext, isNativeOfflineAudioContext, nativeAudioWorkletNodeConstructor, ongoingRequests, resolvedRequests, testAudioWorkletProcessorPostMessageSupport, window) => {\n    let index = 0;\n    return (context, moduleURL, options = { credentials: 'omit' }) => {\n        const resolvedRequestsOfContext = resolvedRequests.get(context);\n        if (resolvedRequestsOfContext !== undefined && resolvedRequestsOfContext.has(moduleURL)) {\n            return Promise.resolve();\n        }\n        const ongoingRequestsOfContext = ongoingRequests.get(context);\n        if (ongoingRequestsOfContext !== undefined) {\n            const promiseOfOngoingRequest = ongoingRequestsOfContext.get(moduleURL);\n            if (promiseOfOngoingRequest !== undefined) {\n                return promiseOfOngoingRequest;\n            }\n        }\n        const nativeContext = getNativeContext(context);\n        // Bug #59: Safari does not implement the audioWorklet property.\n        const promise = nativeContext.audioWorklet === undefined\n            ? fetchSource(moduleURL)\n                .then(([source, absoluteUrl]) => {\n                const [importStatements, sourceWithoutImportStatements] = splitImportStatements(source, absoluteUrl);\n                /*\n                 * This is the unminified version of the code used below:\n                 *\n                 * ```js\n                 * ${ importStatements };\n                 * ((a, b) => {\n                 *     (a[b] = a[b] || [ ]).push(\n                 *         (AudioWorkletProcessor, global, registerProcessor, sampleRate, self, window) => {\n                 *             ${ sourceWithoutImportStatements }\n                 *         }\n                 *     );\n                 * })(window, '_AWGS');\n                 * ```\n                 */\n                // tslint:disable-next-line:max-line-length\n                const wrappedSource = `${importStatements};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${sourceWithoutImportStatements}\n})})(window,'_AWGS')`;\n                // @todo Evaluating the given source code is a possible security problem.\n                return evaluateSource(wrappedSource);\n            })\n                .then(() => {\n                const evaluateAudioWorkletGlobalScope = window._AWGS.pop();\n                if (evaluateAudioWorkletGlobalScope === undefined) {\n                    // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                    throw new SyntaxError();\n                }\n                exposeCurrentFrameAndCurrentTime(nativeContext.currentTime, nativeContext.sampleRate, () => evaluateAudioWorkletGlobalScope(class AudioWorkletProcessor {\n                }, undefined, (name, processorCtor) => {\n                    if (name.trim() === '') {\n                        throw createNotSupportedError();\n                    }\n                    const nodeNameToProcessorConstructorMap = NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(nativeContext);\n                    if (nodeNameToProcessorConstructorMap !== undefined) {\n                        if (nodeNameToProcessorConstructorMap.has(name)) {\n                            throw createNotSupportedError();\n                        }\n                        verifyProcessorCtor(processorCtor);\n                        verifyParameterDescriptors(processorCtor.parameterDescriptors);\n                        nodeNameToProcessorConstructorMap.set(name, processorCtor);\n                    }\n                    else {\n                        verifyProcessorCtor(processorCtor);\n                        verifyParameterDescriptors(processorCtor.parameterDescriptors);\n                        NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(nativeContext, new Map([[name, processorCtor]]));\n                    }\n                }, nativeContext.sampleRate, undefined, undefined));\n            })\n            : Promise.all([\n                fetchSource(moduleURL),\n                Promise.resolve(cacheTestResult(testAudioWorkletProcessorPostMessageSupport, testAudioWorkletProcessorPostMessageSupport))\n            ]).then(([[source, absoluteUrl], isSupportingPostMessage]) => {\n                const currentIndex = index + 1;\n                index = currentIndex;\n                const [importStatements, sourceWithoutImportStatements] = splitImportStatements(source, absoluteUrl);\n                /*\n                 * Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\n                 *\n                 * This is the unminified version of the code used below.\n                 *\n                 * ```js\n                 * class extends AudioWorkletProcessor {\n                 *\n                 *     __buffers = new WeakSet();\n                 *\n                 *     constructor () {\n                 *         super();\n                 *\n                 *         this.port.postMessage = ((postMessage) => {\n                 *             return (message, transferables) => {\n                 *                 const filteredTransferables = (transferables)\n                 *                     ? transferables.filter((transferable) => !this.__buffers.has(transferable))\n                 *                     : transferables;\n                 *\n                 *                 return postMessage.call(this.port, message, filteredTransferables);\n                 *              };\n                 *         })(this.port.postMessage);\n                 *     }\n                 * }\n                 * ```\n                 */\n                const patchedAudioWorkletProcessor = isSupportingPostMessage\n                    ? 'AudioWorkletProcessor'\n                    : 'class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}';\n                /*\n                 * Bug #170: Chrome and Edge do call process() with an array with empty channelData for each input if no input is connected.\n                 *\n                 * Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\n                 *\n                 * Bug #190: Safari doesn't throw an error when loading an unparsable module.\n                 *\n                 * This is the unminified version of the code used below:\n                 *\n                 * ```js\n                 * `${ importStatements };\n                 * ((AudioWorkletProcessor, registerProcessor) => {${ sourceWithoutImportStatements }\n                 * })(\n                 *     ${patchedAudioWorkletProcessor },\n                 *     (name, processorCtor) => registerProcessor(name, class extends processorCtor {\n                 *\n                 *         __collectBuffers = (array) => {\n                 *             array.forEach((element) => this.__buffers.add(element.buffer));\n                 *         };\n                 *\n                 *         process (inputs, outputs, parameters) {\n                 *             inputs.forEach(this.__collectBuffers);\n                 *             outputs.forEach(this.__collectBuffers);\n                 *             this.__collectBuffers(Object.values(parameters));\n                 *\n                 *             return super.process(\n                 *                 (inputs.map((input) => input.some((channelData) => channelData.length === 0)) ? [ ] : input),\n                 *                 outputs,\n                 *                 parameters\n                 *             );\n                 *         }\n                 *\n                 *     })\n                 * );\n                 *\n                 * registerProcessor(`__sac${currentIndex}`, class extends AudioWorkletProcessor{\n                 *\n                 *     process () {\n                 *         return false;\n                 *     }\n                 *\n                 * })`\n                 * ```\n                 */\n                const memberDefinition = isSupportingPostMessage ? '' : '__c = (a) => a.forEach(e=>this.__b.add(e.buffer));';\n                const bufferRegistration = isSupportingPostMessage\n                    ? ''\n                    : 'i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));';\n                const wrappedSource = `${importStatements};((AudioWorkletProcessor,registerProcessor)=>{${sourceWithoutImportStatements}\n})(${patchedAudioWorkletProcessor},(n,p)=>registerProcessor(n,class extends p{${memberDefinition}process(i,o,p){${bufferRegistration}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${currentIndex}',class extends AudioWorkletProcessor{process(){return !1}})`;\n                const blob = new Blob([wrappedSource], { type: 'application/javascript; charset=utf-8' });\n                const url = URL.createObjectURL(blob);\n                return nativeContext.audioWorklet\n                    .addModule(url, options)\n                    .then(() => {\n                    if (isNativeOfflineAudioContext(nativeContext)) {\n                        return nativeContext;\n                    }\n                    // Bug #186: Chrome and Edge do not allow to create an AudioWorkletNode on a closed AudioContext.\n                    const backupOfflineAudioContext = getOrCreateBackupOfflineAudioContext(nativeContext);\n                    return backupOfflineAudioContext.audioWorklet.addModule(url, options).then(() => backupOfflineAudioContext);\n                })\n                    .then((nativeContextOrBackupOfflineAudioContext) => {\n                    if (nativeAudioWorkletNodeConstructor === null) {\n                        throw new SyntaxError();\n                    }\n                    try {\n                        // Bug #190: Safari doesn't throw an error when loading an unparsable module.\n                        new nativeAudioWorkletNodeConstructor(nativeContextOrBackupOfflineAudioContext, `__sac${currentIndex}`); // tslint:disable-line:no-unused-expression\n                    }\n                    catch {\n                        throw new SyntaxError();\n                    }\n                })\n                    .finally(() => URL.revokeObjectURL(url));\n            });\n        if (ongoingRequestsOfContext === undefined) {\n            ongoingRequests.set(context, new Map([[moduleURL, promise]]));\n        }\n        else {\n            ongoingRequestsOfContext.set(moduleURL, promise);\n        }\n        promise\n            .then(() => {\n            const updatedResolvedRequestsOfContext = resolvedRequests.get(context);\n            if (updatedResolvedRequestsOfContext === undefined) {\n                resolvedRequests.set(context, new Set([moduleURL]));\n            }\n            else {\n                updatedResolvedRequestsOfContext.add(moduleURL);\n            }\n        })\n            .finally(() => {\n            const updatedOngoingRequestsOfContext = ongoingRequests.get(context);\n            if (updatedOngoingRequestsOfContext !== undefined) {\n                updatedOngoingRequestsOfContext.delete(moduleURL);\n            }\n        });\n        return promise;\n    };\n};\n//# sourceMappingURL=add-audio-worklet-module.js.map","export const getValueForKey = (map, key) => {\n    const value = map.get(key);\n    if (value === undefined) {\n        throw new Error('A value with the given key could not be found.');\n    }\n    return value;\n};\n//# sourceMappingURL=get-value-for-key.js.map","export const pickElementFromSet = (set, predicate) => {\n    const matchingElements = Array.from(set).filter(predicate);\n    if (matchingElements.length > 1) {\n        throw Error('More than one element was found.');\n    }\n    if (matchingElements.length === 0) {\n        throw Error('No element was found.');\n    }\n    const [matchingElement] = matchingElements;\n    set.delete(matchingElement);\n    return matchingElement;\n};\n//# sourceMappingURL=pick-element-from-set.js.map","import { getValueForKey } from './get-value-for-key';\nimport { pickElementFromSet } from './pick-element-from-set';\nexport const deletePassiveInputConnectionToAudioNode = (passiveInputs, source, output, input) => {\n    const passiveInputConnections = getValueForKey(passiveInputs, source);\n    const matchingConnection = pickElementFromSet(passiveInputConnections, (passiveInputConnection) => passiveInputConnection[0] === output && passiveInputConnection[1] === input);\n    if (passiveInputConnections.size === 0) {\n        passiveInputs.delete(source);\n    }\n    return matchingConnection;\n};\n//# sourceMappingURL=delete-passive-input-connection-to-audio-node.js.map","import { EVENT_LISTENERS } from '../globals';\nimport { getValueForKey } from './get-value-for-key';\nexport const getEventListenersOfAudioNode = (audioNode) => {\n    return getValueForKey(EVENT_LISTENERS, audioNode);\n};\n//# sourceMappingURL=get-event-listeners-of-audio-node.js.map","import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\nexport const setInternalStateToActive = (audioNode) => {\n    if (ACTIVE_AUDIO_NODE_STORE.has(audioNode)) {\n        throw new Error('The AudioNode is already stored.');\n    }\n    ACTIVE_AUDIO_NODE_STORE.add(audioNode);\n    getEventListenersOfAudioNode(audioNode).forEach((eventListener) => eventListener(true));\n};\n//# sourceMappingURL=set-internal-state-to-active.js.map","export const isAudioWorkletNode = (audioNode) => {\n    return 'port' in audioNode;\n};\n//# sourceMappingURL=audio-worklet-node.js.map","import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nimport { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\nexport const setInternalStateToPassive = (audioNode) => {\n    if (!ACTIVE_AUDIO_NODE_STORE.has(audioNode)) {\n        throw new Error('The AudioNode is not stored.');\n    }\n    ACTIVE_AUDIO_NODE_STORE.delete(audioNode);\n    getEventListenersOfAudioNode(audioNode).forEach((eventListener) => eventListener(false));\n};\n//# sourceMappingURL=set-internal-state-to-passive.js.map","import { isAudioWorkletNode } from '../guards/audio-worklet-node';\nimport { setInternalStateToPassive } from './set-internal-state-to-passive';\n// Set the internalState of the audioNode to 'passive' if it is not an AudioWorkletNode and if it has no 'active' input connections.\nexport const setInternalStateToPassiveWhenNecessary = (audioNode, activeInputs) => {\n    if (!isAudioWorkletNode(audioNode) && activeInputs.every((connections) => connections.size === 0)) {\n        setInternalStateToPassive(audioNode);\n    }\n};\n//# sourceMappingURL=set-internal-state-to-passive-when-necessary.js.map","const DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    fftSize: 2048,\n    maxDecibels: -30,\n    minDecibels: -100,\n    smoothingTimeConstant: 0.8\n};\nexport const createAnalyserNodeConstructor = (audionNodeConstructor, createAnalyserNodeRenderer, createIndexSizeError, createNativeAnalyserNode, getNativeContext, isNativeOfflineAudioContext) => {\n    return class AnalyserNode extends audionNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeAnalyserNode = createNativeAnalyserNode(nativeContext, mergedOptions);\n            const analyserNodeRenderer = ((isNativeOfflineAudioContext(nativeContext) ? createAnalyserNodeRenderer() : null));\n            super(context, false, nativeAnalyserNode, analyserNodeRenderer);\n            this._nativeAnalyserNode = nativeAnalyserNode;\n        }\n        get fftSize() {\n            return this._nativeAnalyserNode.fftSize;\n        }\n        set fftSize(value) {\n            this._nativeAnalyserNode.fftSize = value;\n        }\n        get frequencyBinCount() {\n            return this._nativeAnalyserNode.frequencyBinCount;\n        }\n        get maxDecibels() {\n            return this._nativeAnalyserNode.maxDecibels;\n        }\n        set maxDecibels(value) {\n            // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n            const maxDecibels = this._nativeAnalyserNode.maxDecibels;\n            this._nativeAnalyserNode.maxDecibels = value;\n            if (!(value > this._nativeAnalyserNode.minDecibels)) {\n                this._nativeAnalyserNode.maxDecibels = maxDecibels;\n                throw createIndexSizeError();\n            }\n        }\n        get minDecibels() {\n            return this._nativeAnalyserNode.minDecibels;\n        }\n        set minDecibels(value) {\n            // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n            const minDecibels = this._nativeAnalyserNode.minDecibels;\n            this._nativeAnalyserNode.minDecibels = value;\n            if (!(this._nativeAnalyserNode.maxDecibels > value)) {\n                this._nativeAnalyserNode.minDecibels = minDecibels;\n                throw createIndexSizeError();\n            }\n        }\n        get smoothingTimeConstant() {\n            return this._nativeAnalyserNode.smoothingTimeConstant;\n        }\n        set smoothingTimeConstant(value) {\n            this._nativeAnalyserNode.smoothingTimeConstant = value;\n        }\n        getByteFrequencyData(array) {\n            this._nativeAnalyserNode.getByteFrequencyData(array);\n        }\n        getByteTimeDomainData(array) {\n            this._nativeAnalyserNode.getByteTimeDomainData(array);\n        }\n        getFloatFrequencyData(array) {\n            this._nativeAnalyserNode.getFloatFrequencyData(array);\n        }\n        getFloatTimeDomainData(array) {\n            this._nativeAnalyserNode.getFloatTimeDomainData(array);\n        }\n    };\n};\n//# sourceMappingURL=analyser-node-constructor.js.map","export const isOwnedByContext = (nativeAudioNode, nativeContext) => {\n    return nativeAudioNode.context === nativeContext;\n};\n//# sourceMappingURL=is-owned-by-context.js.map","export const testAudioBufferCopyChannelMethodsOutOfBoundsSupport = (nativeAudioBuffer) => {\n    try {\n        nativeAudioBuffer.copyToChannel(new Float32Array(1), 0, -1);\n    }\n    catch {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=test-audio-buffer-copy-channel-methods-out-of-bounds-support.js.map","export const createIndexSizeError = () => new DOMException('', 'IndexSizeError');\n//# sourceMappingURL=index-size-error.js.map","import { createIndexSizeError } from '../factories/index-size-error';\nexport const wrapAudioBufferGetChannelDataMethod = (audioBuffer) => {\n    audioBuffer.getChannelData = ((getChannelData) => {\n        return (channel) => {\n            try {\n                return getChannelData.call(audioBuffer, channel);\n            }\n            catch (err) {\n                if (err.code === 12) {\n                    throw createIndexSizeError();\n                }\n                throw err;\n            }\n        };\n    })(audioBuffer.getChannelData);\n};\n//# sourceMappingURL=wrap-audio-buffer-get-channel-data-method.js.map","import { testAudioBufferCopyChannelMethodsOutOfBoundsSupport } from '../helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support';\nimport { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\nconst DEFAULT_OPTIONS = {\n    numberOfChannels: 1\n};\nexport const createAudioBufferConstructor = (audioBufferStore, cacheTestResult, createNotSupportedError, nativeAudioBufferConstructor, nativeOfflineAudioContextConstructor, testNativeAudioBufferConstructorSupport, wrapAudioBufferCopyChannelMethods, wrapAudioBufferCopyChannelMethodsOutOfBounds) => {\n    let nativeOfflineAudioContext = null;\n    return class AudioBuffer {\n        constructor(options) {\n            if (nativeOfflineAudioContextConstructor === null) {\n                throw new Error('Missing the native OfflineAudioContext constructor.');\n            }\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\n            if (nativeOfflineAudioContext === null) {\n                nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n            }\n            /*\n             * Bug #99: Firefox does not throw a NotSupportedError when the numberOfChannels is zero. But it only does it when using the\n             * factory function. But since Firefox also supports the constructor everything should be fine.\n             */\n            const audioBuffer = nativeAudioBufferConstructor !== null &&\n                cacheTestResult(testNativeAudioBufferConstructorSupport, testNativeAudioBufferConstructorSupport)\n                ? new nativeAudioBufferConstructor({ length, numberOfChannels, sampleRate })\n                : nativeOfflineAudioContext.createBuffer(numberOfChannels, length, sampleRate);\n            // Bug #99: Safari does not throw an error when the numberOfChannels is zero.\n            if (audioBuffer.numberOfChannels === 0) {\n                throw createNotSupportedError();\n            }\n            // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n            // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\n            if (typeof audioBuffer.copyFromChannel !== 'function') {\n                wrapAudioBufferCopyChannelMethods(audioBuffer);\n                wrapAudioBufferGetChannelDataMethod(audioBuffer);\n                // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\n            }\n            else if (!cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () => testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer))) {\n                wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\n            }\n            audioBufferStore.add(audioBuffer);\n            /*\n             * This does violate all good pratices but it is necessary to allow this AudioBuffer to be used with native\n             * (Offline)AudioContexts.\n             */\n            return audioBuffer;\n        }\n        static [Symbol.hasInstance](instance) {\n            return ((instance !== null && typeof instance === 'object' && Object.getPrototypeOf(instance) === AudioBuffer.prototype) ||\n                audioBufferStore.has(instance));\n        }\n    };\n};\n//# sourceMappingURL=audio-buffer-constructor.js.map","export const MOST_NEGATIVE_SINGLE_FLOAT = -3.4028234663852886e38;\nexport const MOST_POSITIVE_SINGLE_FLOAT = -MOST_NEGATIVE_SINGLE_FLOAT;\n//# sourceMappingURL=constants.js.map","import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nexport const isActiveAudioNode = (audioNode) => ACTIVE_AUDIO_NODE_STORE.has(audioNode);\n//# sourceMappingURL=is-active-audio-node.js.map","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\nconst DEFAULT_OPTIONS = {\n    buffer: null,\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    // Bug #149: Safari does not yet support the detune AudioParam.\n    loop: false,\n    loopEnd: 0,\n    loopStart: 0,\n    playbackRate: 1\n};\nexport const createAudioBufferSourceNodeConstructor = (audioNodeConstructor, createAudioBufferSourceNodeRenderer, createAudioParam, createInvalidStateError, createNativeAudioBufferSourceNode, getNativeContext, isNativeOfflineAudioContext, wrapEventListener) => {\n    return class AudioBufferSourceNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const audioBufferSourceNodeRenderer = ((isOffline ? createAudioBufferSourceNodeRenderer() : null));\n            super(context, false, nativeAudioBufferSourceNode, audioBufferSourceNodeRenderer);\n            this._audioBufferSourceNodeRenderer = audioBufferSourceNodeRenderer;\n            this._isBufferNullified = false;\n            this._isBufferSet = mergedOptions.buffer !== null;\n            this._nativeAudioBufferSourceNode = nativeAudioBufferSourceNode;\n            this._onended = null;\n            // Bug #73: Safari does not export the correct values for maxValue and minValue.\n            this._playbackRate = createAudioParam(this, isOffline, nativeAudioBufferSourceNode.playbackRate, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n        }\n        get buffer() {\n            if (this._isBufferNullified) {\n                return null;\n            }\n            return this._nativeAudioBufferSourceNode.buffer;\n        }\n        set buffer(value) {\n            this._nativeAudioBufferSourceNode.buffer = value;\n            // Bug #72: Only Chrome & Edge do not allow to reassign the buffer yet.\n            if (value !== null) {\n                if (this._isBufferSet) {\n                    throw createInvalidStateError();\n                }\n                this._isBufferSet = true;\n            }\n        }\n        get loop() {\n            return this._nativeAudioBufferSourceNode.loop;\n        }\n        set loop(value) {\n            this._nativeAudioBufferSourceNode.loop = value;\n        }\n        get loopEnd() {\n            return this._nativeAudioBufferSourceNode.loopEnd;\n        }\n        set loopEnd(value) {\n            this._nativeAudioBufferSourceNode.loopEnd = value;\n        }\n        get loopStart() {\n            return this._nativeAudioBufferSourceNode.loopStart;\n        }\n        set loopStart(value) {\n            this._nativeAudioBufferSourceNode.loopStart = value;\n        }\n        get onended() {\n            return this._onended;\n        }\n        set onended(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n            this._nativeAudioBufferSourceNode.onended = wrappedListener;\n            const nativeOnEnded = this._nativeAudioBufferSourceNode.onended;\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\n        }\n        get playbackRate() {\n            return this._playbackRate;\n        }\n        start(when = 0, offset = 0, duration) {\n            this._nativeAudioBufferSourceNode.start(when, offset, duration);\n            if (this._audioBufferSourceNodeRenderer !== null) {\n                this._audioBufferSourceNodeRenderer.start = duration === undefined ? [when, offset] : [when, offset, duration];\n            }\n            if (this.context.state !== 'closed') {\n                setInternalStateToActive(this);\n                const resetInternalStateToPassive = () => {\n                    this._nativeAudioBufferSourceNode.removeEventListener('ended', resetInternalStateToPassive);\n                    if (isActiveAudioNode(this)) {\n                        setInternalStateToPassive(this);\n                    }\n                };\n                this._nativeAudioBufferSourceNode.addEventListener('ended', resetInternalStateToPassive);\n            }\n        }\n        stop(when = 0) {\n            this._nativeAudioBufferSourceNode.stop(when);\n            if (this._audioBufferSourceNodeRenderer !== null) {\n                this._audioBufferSourceNodeRenderer.stop = when;\n            }\n        }\n    };\n};\n//# sourceMappingURL=audio-buffer-source-node-constructor.js.map","import { AUDIO_NODE_CONNECTIONS_STORE } from '../globals';\nimport { getValueForKey } from './get-value-for-key';\nexport const getAudioNodeConnections = (audioNode) => {\n    return getValueForKey(AUDIO_NODE_CONNECTIONS_STORE, audioNode);\n};\n//# sourceMappingURL=get-audio-node-connections.js.map","import { AUDIO_PARAM_CONNECTIONS_STORE } from '../globals';\nimport { getValueForKey } from './get-value-for-key';\nexport const getAudioParamConnections = (audioParam) => {\n    return getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE, audioParam);\n};\n//# sourceMappingURL=get-audio-param-connections.js.map","import { isAudioBufferSourceNode } from '../guards/audio-buffer-source-node';\nimport { isAudioWorkletNode } from '../guards/audio-worklet-node';\nimport { isBiquadFilterNode } from '../guards/biquad-filter-node';\nimport { isConstantSourceNode } from '../guards/constant-source-node';\nimport { isGainNode } from '../guards/gain-node';\nimport { isOscillatorNode } from '../guards/oscillator-node';\nimport { isStereoPannerNode } from '../guards/stereo-panner-node';\nimport { getAudioNodeConnections } from './get-audio-node-connections';\nimport { getAudioParamConnections } from './get-audio-param-connections';\nimport { isActiveAudioNode } from './is-active-audio-node';\nimport { setInternalStateToPassive } from './set-internal-state-to-passive';\nexport const deactivateActiveAudioNodeInputConnections = (audioNode, trace) => {\n    const { activeInputs } = getAudioNodeConnections(audioNode);\n    activeInputs.forEach((connections) => connections.forEach(([source]) => {\n        if (!trace.includes(audioNode)) {\n            deactivateActiveAudioNodeInputConnections(source, [...trace, audioNode]);\n        }\n    }));\n    const audioParams = isAudioBufferSourceNode(audioNode)\n        ? [\n            // Bug #149: Safari does not yet support the detune AudioParam.\n            audioNode.playbackRate\n        ]\n        : isAudioWorkletNode(audioNode)\n            ? Array.from(audioNode.parameters.values())\n            : isBiquadFilterNode(audioNode)\n                ? [audioNode.Q, audioNode.detune, audioNode.frequency, audioNode.gain]\n                : isConstantSourceNode(audioNode)\n                    ? [audioNode.offset]\n                    : isGainNode(audioNode)\n                        ? [audioNode.gain]\n                        : isOscillatorNode(audioNode)\n                            ? [audioNode.detune, audioNode.frequency]\n                            : isStereoPannerNode(audioNode)\n                                ? [audioNode.pan]\n                                : [];\n    for (const audioParam of audioParams) {\n        const audioParamConnections = getAudioParamConnections(audioParam);\n        if (audioParamConnections !== undefined) {\n            audioParamConnections.activeInputs.forEach(([source]) => deactivateActiveAudioNodeInputConnections(source, trace));\n        }\n    }\n    if (isActiveAudioNode(audioNode)) {\n        setInternalStateToPassive(audioNode);\n    }\n};\n//# sourceMappingURL=deactivate-active-audio-node-input-connections.js.map","export const isAudioBufferSourceNode = (audioNode) => {\n    return 'playbackRate' in audioNode;\n};\n//# sourceMappingURL=audio-buffer-source-node.js.map","export const isBiquadFilterNode = (audioNode) => {\n    return 'frequency' in audioNode && 'gain' in audioNode;\n};\n//# sourceMappingURL=biquad-filter-node.js.map","export const isConstantSourceNode = (audioNode) => {\n    return 'offset' in audioNode;\n};\n//# sourceMappingURL=constant-source-node.js.map","export const isGainNode = (audioNode) => {\n    return !('frequency' in audioNode) && 'gain' in audioNode;\n};\n//# sourceMappingURL=gain-node.js.map","export const isOscillatorNode = (audioNode) => {\n    return 'detune' in audioNode && 'frequency' in audioNode;\n};\n//# sourceMappingURL=oscillator-node.js.map","export const isStereoPannerNode = (audioNode) => {\n    return 'pan' in audioNode;\n};\n//# sourceMappingURL=stereo-panner-node.js.map","import { deactivateActiveAudioNodeInputConnections } from './deactivate-active-audio-node-input-connections';\nexport const deactivateAudioGraph = (context) => {\n    deactivateActiveAudioNodeInputConnections(context.destination, []);\n};\n//# sourceMappingURL=deactivate-audio-graph.js.map","export const isAudioNode = (audioNodeOrAudioParam) => {\n    return 'context' in audioNodeOrAudioParam;\n};\n//# sourceMappingURL=audio-node.js.map","import { isAudioNode } from './audio-node';\nexport const isAudioNodeOutputConnection = (outputConnection) => {\n    return isAudioNode(outputConnection[0]);\n};\n//# sourceMappingURL=audio-node-output-connection.js.map","export const insertElementInSet = (set, element, predicate, ignoreDuplicates) => {\n    for (const lmnt of set) {\n        if (predicate(lmnt)) {\n            if (ignoreDuplicates) {\n                return false;\n            }\n            throw Error('The set contains at least one similar element.');\n        }\n    }\n    set.add(element);\n    return true;\n};\n//# sourceMappingURL=insert-element-in-set.js.map","import { insertElementInSet } from './insert-element-in-set';\nexport const addActiveInputConnectionToAudioParam = (activeInputs, source, [output, eventListener], ignoreDuplicates) => {\n    insertElementInSet(activeInputs, [source, output, eventListener], (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output, ignoreDuplicates);\n};\n//# sourceMappingURL=add-active-input-connection-to-audio-param.js.map","import { insertElementInSet } from './insert-element-in-set';\nexport const addPassiveInputConnectionToAudioParam = (passiveInputs, [source, output, eventListener], ignoreDuplicates) => {\n    const passiveInputConnections = passiveInputs.get(source);\n    if (passiveInputConnections === undefined) {\n        passiveInputs.set(source, new Set([[output, eventListener]]));\n    }\n    else {\n        insertElementInSet(passiveInputConnections, [output, eventListener], (passiveInputConnection) => passiveInputConnection[0] === output, ignoreDuplicates);\n    }\n};\n//# sourceMappingURL=add-passive-input-connection-to-audio-param.js.map","export const isNativeAudioNodeFaker = (nativeAudioNodeOrNativeAudioNodeFaker) => {\n    return 'inputs' in nativeAudioNodeOrNativeAudioNodeFaker;\n};\n//# sourceMappingURL=native-audio-node-faker.js.map","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nexport const connectNativeAudioNodeToNativeAudioNode = (nativeSourceAudioNode, nativeDestinationAudioNode, output, input) => {\n    if (isNativeAudioNodeFaker(nativeDestinationAudioNode)) {\n        const fakeNativeDestinationAudioNode = nativeDestinationAudioNode.inputs[input];\n        nativeSourceAudioNode.connect(fakeNativeDestinationAudioNode, output, 0);\n        return [fakeNativeDestinationAudioNode, output, 0];\n    }\n    nativeSourceAudioNode.connect(nativeDestinationAudioNode, output, input);\n    return [nativeDestinationAudioNode, output, input];\n};\n//# sourceMappingURL=connect-native-audio-node-to-native-audio-node.js.map","export const deleteActiveInputConnection = (activeInputConnections, source, output) => {\n    for (const activeInputConnection of activeInputConnections) {\n        if (activeInputConnection[0] === source && activeInputConnection[1] === output) {\n            activeInputConnections.delete(activeInputConnection);\n            return activeInputConnection;\n        }\n    }\n    return null;\n};\n//# sourceMappingURL=delete-active-input-connection.js.map","import { getEventListenersOfAudioNode } from './get-event-listeners-of-audio-node';\nexport const deleteEventListenerOfAudioNode = (audioNode, eventListener) => {\n    const eventListeners = getEventListenersOfAudioNode(audioNode);\n    if (!eventListeners.delete(eventListener)) {\n        throw new Error('Missing the expected event listener.');\n    }\n};\n//# sourceMappingURL=delete-event-listeners-of-audio-node.js.map","import { getValueForKey } from './get-value-for-key';\nimport { pickElementFromSet } from './pick-element-from-set';\nexport const deletePassiveInputConnectionToAudioParam = (passiveInputs, source, output) => {\n    const passiveInputConnections = getValueForKey(passiveInputs, source);\n    const matchingConnection = pickElementFromSet(passiveInputConnections, (passiveInputConnection) => passiveInputConnection[0] === output);\n    if (passiveInputConnections.size === 0) {\n        passiveInputs.delete(source);\n    }\n    return matchingConnection;\n};\n//# sourceMappingURL=delete-passive-input-connection-to-audio-param.js.map","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nexport const disconnectNativeAudioNodeFromNativeAudioNode = (nativeSourceAudioNode, nativeDestinationAudioNode, output, input) => {\n    if (isNativeAudioNodeFaker(nativeDestinationAudioNode)) {\n        nativeSourceAudioNode.disconnect(nativeDestinationAudioNode.inputs[input], output, 0);\n    }\n    else {\n        nativeSourceAudioNode.disconnect(nativeDestinationAudioNode, output, input);\n    }\n};\n//# sourceMappingURL=disconnect-native-audio-node-from-native-audio-node.js.map","import { AUDIO_NODE_STORE } from '../globals';\nimport { getValueForKey } from './get-value-for-key';\nexport const getNativeAudioNode = (audioNode) => {\n    return getValueForKey(AUDIO_NODE_STORE, audioNode);\n};\n//# sourceMappingURL=get-native-audio-node.js.map","import { AUDIO_PARAM_STORE } from '../globals';\nimport { getValueForKey } from './get-value-for-key';\nexport const getNativeAudioParam = (audioParam) => {\n    return getValueForKey(AUDIO_PARAM_STORE, audioParam);\n};\n//# sourceMappingURL=get-native-audio-param.js.map","import { CYCLE_COUNTERS } from '../globals';\nexport const isPartOfACycle = (audioNode) => {\n    return CYCLE_COUNTERS.has(audioNode);\n};\n//# sourceMappingURL=is-part-of-a-cycle.js.map","import { ACTIVE_AUDIO_NODE_STORE } from '../globals';\nexport const isPassiveAudioNode = (audioNode) => {\n    return !ACTIVE_AUDIO_NODE_STORE.has(audioNode);\n};\n//# sourceMappingURL=is-passive-audio-node.js.map","export const testAudioNodeDisconnectMethodSupport = (nativeAudioContext, nativeAudioWorkletNodeConstructor) => {\n    return new Promise((resolve) => {\n        /*\n         * This bug existed in Safari up until v14.0.2. Since AudioWorklets were not supported in Safari until v14.1 the presence of the\n         * constructor for an AudioWorkletNode can be used here to skip the test.\n         */\n        if (nativeAudioWorkletNodeConstructor !== null) {\n            resolve(true);\n        }\n        else {\n            const analyzer = nativeAudioContext.createScriptProcessor(256, 1, 1); // tslint:disable-line deprecation\n            const dummy = nativeAudioContext.createGain();\n            // Bug #95: Safari does not play one sample buffers.\n            const ones = nativeAudioContext.createBuffer(1, 2, 44100);\n            const channelData = ones.getChannelData(0);\n            channelData[0] = 1;\n            channelData[1] = 1;\n            const source = nativeAudioContext.createBufferSource();\n            source.buffer = ones;\n            source.loop = true;\n            source.connect(analyzer).connect(nativeAudioContext.destination);\n            source.connect(dummy);\n            source.disconnect(dummy);\n            // tslint:disable-next-line:deprecation\n            analyzer.onaudioprocess = (event) => {\n                const chnnlDt = event.inputBuffer.getChannelData(0); // tslint:disable-line deprecation\n                if (Array.prototype.some.call(chnnlDt, (sample) => sample === 1)) {\n                    resolve(true);\n                }\n                else {\n                    resolve(false);\n                }\n                source.stop();\n                analyzer.onaudioprocess = null; // tslint:disable-line:deprecation\n                source.disconnect(analyzer);\n                analyzer.disconnect(nativeAudioContext.destination);\n            };\n            source.start();\n        }\n    });\n};\n//# sourceMappingURL=test-audio-node-disconnect-method-support.js.map","export const visitEachAudioNodeOnce = (cycles, visitor) => {\n    const counts = new Map();\n    for (const cycle of cycles) {\n        for (const audioNode of cycle) {\n            const count = counts.get(audioNode);\n            counts.set(audioNode, count === undefined ? 1 : count + 1);\n        }\n    }\n    counts.forEach((count, audioNode) => visitor(audioNode, count));\n};\n//# sourceMappingURL=visit-each-audio-node-once.js.map","export const isNativeAudioNode = (nativeAudioNodeOrAudioParam) => {\n    return 'context' in nativeAudioNodeOrAudioParam;\n};\n//# sourceMappingURL=native-audio-node.js.map","import { isNativeAudioNode } from '../guards/native-audio-node';\nexport const wrapAudioNodeDisconnectMethod = (nativeAudioNode) => {\n    const connections = new Map();\n    nativeAudioNode.connect = ((connect) => {\n        // tslint:disable-next-line:invalid-void no-inferrable-types\n        return (destination, output = 0, input = 0) => {\n            const returnValue = isNativeAudioNode(destination) ? connect(destination, output, input) : connect(destination, output);\n            // Save the new connection only if the calls to connect above didn't throw an error.\n            const connectionsToDestination = connections.get(destination);\n            if (connectionsToDestination === undefined) {\n                connections.set(destination, [{ input, output }]);\n            }\n            else {\n                if (connectionsToDestination.every((connection) => connection.input !== input || connection.output !== output)) {\n                    connectionsToDestination.push({ input, output });\n                }\n            }\n            return returnValue;\n        };\n    })(nativeAudioNode.connect.bind(nativeAudioNode));\n    nativeAudioNode.disconnect = ((disconnect) => {\n        return (destinationOrOutput, output, input) => {\n            disconnect.apply(nativeAudioNode);\n            if (destinationOrOutput === undefined) {\n                connections.clear();\n            }\n            else if (typeof destinationOrOutput === 'number') {\n                for (const [destination, connectionsToDestination] of connections) {\n                    const filteredConnections = connectionsToDestination.filter((connection) => connection.output !== destinationOrOutput);\n                    if (filteredConnections.length === 0) {\n                        connections.delete(destination);\n                    }\n                    else {\n                        connections.set(destination, filteredConnections);\n                    }\n                }\n            }\n            else if (connections.has(destinationOrOutput)) {\n                if (output === undefined) {\n                    connections.delete(destinationOrOutput);\n                }\n                else {\n                    const connectionsToDestination = connections.get(destinationOrOutput);\n                    if (connectionsToDestination !== undefined) {\n                        const filteredConnections = connectionsToDestination.filter((connection) => connection.output !== output && (connection.input !== input || input === undefined));\n                        if (filteredConnections.length === 0) {\n                            connections.delete(destinationOrOutput);\n                        }\n                        else {\n                            connections.set(destinationOrOutput, filteredConnections);\n                        }\n                    }\n                }\n            }\n            for (const [destination, connectionsToDestination] of connections) {\n                connectionsToDestination.forEach((connection) => {\n                    if (isNativeAudioNode(destination)) {\n                        nativeAudioNode.connect(destination, connection.output, connection.input);\n                    }\n                    else {\n                        nativeAudioNode.connect(destination, connection.output);\n                    }\n                });\n            }\n        };\n    })(nativeAudioNode.disconnect);\n};\n//# sourceMappingURL=wrap-audio-node-disconnect-method.js.map","import { AUDIO_NODE_STORE, EVENT_LISTENERS } from '../globals';\nimport { isAudioNode } from '../guards/audio-node';\nimport { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nimport { addActiveInputConnectionToAudioParam } from '../helpers/add-active-input-connection-to-audio-param';\nimport { addPassiveInputConnectionToAudioParam } from '../helpers/add-passive-input-connection-to-audio-param';\nimport { connectNativeAudioNodeToNativeAudioNode } from '../helpers/connect-native-audio-node-to-native-audio-node';\nimport { deleteActiveInputConnection } from '../helpers/delete-active-input-connection';\nimport { deleteActiveInputConnectionToAudioParam } from '../helpers/delete-active-input-connection-to-audio-param';\nimport { deleteEventListenerOfAudioNode } from '../helpers/delete-event-listeners-of-audio-node';\nimport { deletePassiveInputConnectionToAudioNode } from '../helpers/delete-passive-input-connection-to-audio-node';\nimport { deletePassiveInputConnectionToAudioParam } from '../helpers/delete-passive-input-connection-to-audio-param';\nimport { disconnectNativeAudioNodeFromNativeAudioNode } from '../helpers/disconnect-native-audio-node-from-native-audio-node';\nimport { getAudioNodeConnections } from '../helpers/get-audio-node-connections';\nimport { getAudioParamConnections } from '../helpers/get-audio-param-connections';\nimport { getEventListenersOfAudioNode } from '../helpers/get-event-listeners-of-audio-node';\nimport { getNativeAudioNode } from '../helpers/get-native-audio-node';\nimport { getNativeAudioParam } from '../helpers/get-native-audio-param';\nimport { insertElementInSet } from '../helpers/insert-element-in-set';\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { isPartOfACycle } from '../helpers/is-part-of-a-cycle';\nimport { isPassiveAudioNode } from '../helpers/is-passive-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassiveWhenNecessary } from '../helpers/set-internal-state-to-passive-when-necessary';\nimport { testAudioNodeDisconnectMethodSupport } from '../helpers/test-audio-node-disconnect-method-support';\nimport { visitEachAudioNodeOnce } from '../helpers/visit-each-audio-node-once';\nimport { wrapAudioNodeDisconnectMethod } from '../helpers/wrap-audio-node-disconnect-method';\nconst addConnectionToAudioParamOfAudioContext = (source, destination, output, isOffline) => {\n    const { activeInputs, passiveInputs } = getAudioParamConnections(destination);\n    const { outputs } = getAudioNodeConnections(source);\n    const eventListeners = getEventListenersOfAudioNode(source);\n    const eventListener = (isActive) => {\n        const nativeAudioNode = getNativeAudioNode(source);\n        const nativeAudioParam = getNativeAudioParam(destination);\n        if (isActive) {\n            const partialConnection = deletePassiveInputConnectionToAudioParam(passiveInputs, source, output);\n            addActiveInputConnectionToAudioParam(activeInputs, source, partialConnection, false);\n            if (!isOffline && !isPartOfACycle(source)) {\n                nativeAudioNode.connect(nativeAudioParam, output);\n            }\n        }\n        else {\n            const partialConnection = deleteActiveInputConnectionToAudioParam(activeInputs, source, output);\n            addPassiveInputConnectionToAudioParam(passiveInputs, partialConnection, false);\n            if (!isOffline && !isPartOfACycle(source)) {\n                nativeAudioNode.disconnect(nativeAudioParam, output);\n            }\n        }\n    };\n    if (insertElementInSet(outputs, [destination, output], (outputConnection) => outputConnection[0] === destination && outputConnection[1] === output, true)) {\n        eventListeners.add(eventListener);\n        if (isActiveAudioNode(source)) {\n            addActiveInputConnectionToAudioParam(activeInputs, source, [output, eventListener], true);\n        }\n        else {\n            addPassiveInputConnectionToAudioParam(passiveInputs, [source, output, eventListener], true);\n        }\n        return true;\n    }\n    return false;\n};\nconst deleteInputConnectionOfAudioNode = (source, destination, output, input) => {\n    const { activeInputs, passiveInputs } = getAudioNodeConnections(destination);\n    const activeInputConnection = deleteActiveInputConnection(activeInputs[input], source, output);\n    if (activeInputConnection === null) {\n        const passiveInputConnection = deletePassiveInputConnectionToAudioNode(passiveInputs, source, output, input);\n        return [passiveInputConnection[2], false];\n    }\n    return [activeInputConnection[2], true];\n};\nconst deleteInputConnectionOfAudioParam = (source, destination, output) => {\n    const { activeInputs, passiveInputs } = getAudioParamConnections(destination);\n    const activeInputConnection = deleteActiveInputConnection(activeInputs, source, output);\n    if (activeInputConnection === null) {\n        const passiveInputConnection = deletePassiveInputConnectionToAudioParam(passiveInputs, source, output);\n        return [passiveInputConnection[1], false];\n    }\n    return [activeInputConnection[2], true];\n};\nconst deleteInputsOfAudioNode = (source, isOffline, destination, output, input) => {\n    const [listener, isActive] = deleteInputConnectionOfAudioNode(source, destination, output, input);\n    if (listener !== null) {\n        deleteEventListenerOfAudioNode(source, listener);\n        if (isActive && !isOffline && !isPartOfACycle(source)) {\n            disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(source), getNativeAudioNode(destination), output, input);\n        }\n    }\n    if (isActiveAudioNode(destination)) {\n        const { activeInputs } = getAudioNodeConnections(destination);\n        setInternalStateToPassiveWhenNecessary(destination, activeInputs);\n    }\n};\nconst deleteInputsOfAudioParam = (source, isOffline, destination, output) => {\n    const [listener, isActive] = deleteInputConnectionOfAudioParam(source, destination, output);\n    if (listener !== null) {\n        deleteEventListenerOfAudioNode(source, listener);\n        if (isActive && !isOffline && !isPartOfACycle(source)) {\n            getNativeAudioNode(source).disconnect(getNativeAudioParam(destination), output);\n        }\n    }\n};\nconst deleteAnyConnection = (source, isOffline) => {\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\n    const destinations = [];\n    for (const outputConnection of audioNodeConnectionsOfSource.outputs) {\n        if (isAudioNodeOutputConnection(outputConnection)) {\n            deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\n        }\n        else {\n            deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\n        }\n        destinations.push(outputConnection[0]);\n    }\n    audioNodeConnectionsOfSource.outputs.clear();\n    return destinations;\n};\nconst deleteConnectionAtOutput = (source, isOffline, output) => {\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\n    const destinations = [];\n    for (const outputConnection of audioNodeConnectionsOfSource.outputs) {\n        if (outputConnection[1] === output) {\n            if (isAudioNodeOutputConnection(outputConnection)) {\n                deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\n            }\n            else {\n                deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\n            }\n            destinations.push(outputConnection[0]);\n            audioNodeConnectionsOfSource.outputs.delete(outputConnection);\n        }\n    }\n    return destinations;\n};\nconst deleteConnectionToDestination = (source, isOffline, destination, output, input) => {\n    const audioNodeConnectionsOfSource = getAudioNodeConnections(source);\n    return Array.from(audioNodeConnectionsOfSource.outputs)\n        .filter((outputConnection) => outputConnection[0] === destination &&\n        (output === undefined || outputConnection[1] === output) &&\n        (input === undefined || outputConnection[2] === input))\n        .map((outputConnection) => {\n        if (isAudioNodeOutputConnection(outputConnection)) {\n            deleteInputsOfAudioNode(source, isOffline, ...outputConnection);\n        }\n        else {\n            deleteInputsOfAudioParam(source, isOffline, ...outputConnection);\n        }\n        audioNodeConnectionsOfSource.outputs.delete(outputConnection);\n        return outputConnection[0];\n    });\n};\nexport const createAudioNodeConstructor = (addAudioNodeConnections, addConnectionToAudioNode, cacheTestResult, createIncrementCycleCounter, createIndexSizeError, createInvalidAccessError, createNotSupportedError, decrementCycleCounter, detectCycles, eventTargetConstructor, getNativeContext, isNativeAudioContext, isNativeAudioNode, isNativeAudioParam, isNativeOfflineAudioContext, nativeAudioWorkletNodeConstructor) => {\n    return class AudioNode extends eventTargetConstructor {\n        constructor(context, isActive, nativeAudioNode, audioNodeRenderer) {\n            super(nativeAudioNode);\n            this._context = context;\n            this._nativeAudioNode = nativeAudioNode;\n            const nativeContext = getNativeContext(context);\n            // Bug #12: Safari does not support to disconnect a specific destination.\n            if (isNativeAudioContext(nativeContext) &&\n                true !==\n                    cacheTestResult(testAudioNodeDisconnectMethodSupport, () => {\n                        return testAudioNodeDisconnectMethodSupport(nativeContext, nativeAudioWorkletNodeConstructor);\n                    })) {\n                wrapAudioNodeDisconnectMethod(nativeAudioNode);\n            }\n            AUDIO_NODE_STORE.set(this, nativeAudioNode);\n            EVENT_LISTENERS.set(this, new Set());\n            if (context.state !== 'closed' && isActive) {\n                setInternalStateToActive(this);\n            }\n            addAudioNodeConnections(this, audioNodeRenderer, nativeAudioNode);\n        }\n        get channelCount() {\n            return this._nativeAudioNode.channelCount;\n        }\n        set channelCount(value) {\n            this._nativeAudioNode.channelCount = value;\n        }\n        get channelCountMode() {\n            return this._nativeAudioNode.channelCountMode;\n        }\n        set channelCountMode(value) {\n            this._nativeAudioNode.channelCountMode = value;\n        }\n        get channelInterpretation() {\n            return this._nativeAudioNode.channelInterpretation;\n        }\n        set channelInterpretation(value) {\n            this._nativeAudioNode.channelInterpretation = value;\n        }\n        get context() {\n            return this._context;\n        }\n        get numberOfInputs() {\n            return this._nativeAudioNode.numberOfInputs;\n        }\n        get numberOfOutputs() {\n            return this._nativeAudioNode.numberOfOutputs;\n        }\n        // tslint:disable-next-line:invalid-void\n        connect(destination, output = 0, input = 0) {\n            // Bug #174: Safari does expose a wrong numberOfOutputs for MediaStreamAudioDestinationNodes.\n            if (output < 0 || output >= this._nativeAudioNode.numberOfOutputs) {\n                throw createIndexSizeError();\n            }\n            const nativeContext = getNativeContext(this._context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            if (isNativeAudioNode(destination) || isNativeAudioParam(destination)) {\n                throw createInvalidAccessError();\n            }\n            if (isAudioNode(destination)) {\n                const nativeDestinationAudioNode = getNativeAudioNode(destination);\n                try {\n                    const connection = connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode, nativeDestinationAudioNode, output, input);\n                    const isPassive = isPassiveAudioNode(this);\n                    if (isOffline || isPassive) {\n                        this._nativeAudioNode.disconnect(...connection);\n                    }\n                    if (this.context.state !== 'closed' && !isPassive && isPassiveAudioNode(destination)) {\n                        setInternalStateToActive(destination);\n                    }\n                }\n                catch (err) {\n                    // Bug #41: Safari does not throw the correct exception so far.\n                    if (err.code === 12) {\n                        throw createInvalidAccessError();\n                    }\n                    throw err;\n                }\n                const isNewConnectionToAudioNode = addConnectionToAudioNode(this, destination, output, input, isOffline);\n                // Bug #164: Only Firefox detects cycles so far.\n                if (isNewConnectionToAudioNode) {\n                    const cycles = detectCycles([this], destination);\n                    visitEachAudioNodeOnce(cycles, createIncrementCycleCounter(isOffline));\n                }\n                return destination;\n            }\n            const nativeAudioParam = getNativeAudioParam(destination);\n            /*\n             * Bug #73, #147 & #153: Safari does not support to connect an input signal to the playbackRate AudioParam of an\n             * AudioBufferSourceNode. This can't be easily detected and that's why the outdated name property is used here to identify\n             * Safari. In addition to that the maxValue property is used to only detect the affected versions below v14.0.2.\n             */\n            if (nativeAudioParam.name === 'playbackRate' && nativeAudioParam.maxValue === 1024) {\n                throw createNotSupportedError();\n            }\n            try {\n                this._nativeAudioNode.connect(nativeAudioParam, output);\n                if (isOffline || isPassiveAudioNode(this)) {\n                    this._nativeAudioNode.disconnect(nativeAudioParam, output);\n                }\n            }\n            catch (err) {\n                // Bug #58: Safari doesn't throw an InvalidAccessError yet.\n                if (err.code === 12) {\n                    throw createInvalidAccessError();\n                }\n                throw err;\n            }\n            const isNewConnectionToAudioParam = addConnectionToAudioParamOfAudioContext(this, destination, output, isOffline);\n            // Bug #164: Only Firefox detects cycles so far.\n            if (isNewConnectionToAudioParam) {\n                const cycles = detectCycles([this], destination);\n                visitEachAudioNodeOnce(cycles, createIncrementCycleCounter(isOffline));\n            }\n        }\n        disconnect(destinationOrOutput, output, input) {\n            let destinations;\n            const nativeContext = getNativeContext(this._context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            if (destinationOrOutput === undefined) {\n                destinations = deleteAnyConnection(this, isOffline);\n            }\n            else if (typeof destinationOrOutput === 'number') {\n                if (destinationOrOutput < 0 || destinationOrOutput >= this.numberOfOutputs) {\n                    throw createIndexSizeError();\n                }\n                destinations = deleteConnectionAtOutput(this, isOffline, destinationOrOutput);\n            }\n            else {\n                if (output !== undefined && (output < 0 || output >= this.numberOfOutputs)) {\n                    throw createIndexSizeError();\n                }\n                if (isAudioNode(destinationOrOutput) && input !== undefined && (input < 0 || input >= destinationOrOutput.numberOfInputs)) {\n                    throw createIndexSizeError();\n                }\n                destinations = deleteConnectionToDestination(this, isOffline, destinationOrOutput, output, input);\n                if (destinations.length === 0) {\n                    throw createInvalidAccessError();\n                }\n            }\n            // Bug #164: Only Firefox detects cycles so far.\n            for (const destination of destinations) {\n                const cycles = detectCycles([this], destination);\n                visitEachAudioNodeOnce(cycles, decrementCycleCounter);\n            }\n        }\n    };\n};\n//# sourceMappingURL=audio-node-constructor.js.map","export class ReadOnlyMap {\n    constructor(parameters) {\n        this._map = new Map(parameters);\n    }\n    get size() {\n        return this._map.size;\n    }\n    entries() {\n        return this._map.entries();\n    }\n    forEach(callback, thisArg = null) {\n        return this._map.forEach((value, key) => callback.call(thisArg, value, key, this));\n    }\n    get(name) {\n        return this._map.get(name);\n    }\n    has(name) {\n        return this._map.has(name);\n    }\n    keys() {\n        return this._map.keys();\n    }\n    values() {\n        return this._map.values();\n    }\n}\n//# sourceMappingURL=read-only-map.js.map","import { NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS } from '../globals';\nimport { ReadOnlyMap } from '../read-only-map';\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    // Bug #61: The channelCountMode should be 'max' according to the spec but is set to 'explicit' to achieve consistent behavior.\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers',\n    numberOfInputs: 1,\n    numberOfOutputs: 1,\n    parameterData: {},\n    processorOptions: {}\n};\nexport const createAudioWorkletNodeConstructor = (addUnrenderedAudioWorkletNode, audioNodeConstructor, createAudioParam, createAudioWorkletNodeRenderer, createNativeAudioWorkletNode, getAudioNodeConnections, getBackupOfflineAudioContext, getNativeContext, isNativeOfflineAudioContext, nativeAudioWorkletNodeConstructor, sanitizeAudioWorkletNodeOptions, setActiveAudioWorkletNodeInputs, testAudioWorkletNodeOptionsClonability, wrapEventListener) => {\n    return class AudioWorkletNode extends audioNodeConstructor {\n        constructor(context, name, options) {\n            var _a;\n            const nativeContext = getNativeContext(context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const mergedOptions = sanitizeAudioWorkletNodeOptions({ ...DEFAULT_OPTIONS, ...options });\n            // Bug #191: Safari doesn't throw an error if the options aren't clonable.\n            testAudioWorkletNodeOptionsClonability(mergedOptions);\n            const nodeNameToProcessorConstructorMap = NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(nativeContext);\n            const processorConstructor = nodeNameToProcessorConstructorMap === null || nodeNameToProcessorConstructorMap === void 0 ? void 0 : nodeNameToProcessorConstructorMap.get(name);\n            // Bug #186: Chrome and Edge do not allow to create an AudioWorkletNode on a closed AudioContext.\n            const nativeContextOrBackupOfflineAudioContext = isOffline || nativeContext.state !== 'closed'\n                ? nativeContext\n                : (_a = getBackupOfflineAudioContext(nativeContext)) !== null && _a !== void 0 ? _a : nativeContext;\n            const nativeAudioWorkletNode = createNativeAudioWorkletNode(nativeContextOrBackupOfflineAudioContext, isOffline ? null : context.baseLatency, nativeAudioWorkletNodeConstructor, name, processorConstructor, mergedOptions);\n            const audioWorkletNodeRenderer = ((isOffline ? createAudioWorkletNodeRenderer(name, mergedOptions, processorConstructor) : null));\n            /*\n             * @todo Add a mechanism to switch an AudioWorkletNode to passive once the process() function of the AudioWorkletProcessor\n             * returns false.\n             */\n            super(context, true, nativeAudioWorkletNode, audioWorkletNodeRenderer);\n            const parameters = [];\n            nativeAudioWorkletNode.parameters.forEach((nativeAudioParam, nm) => {\n                const audioParam = createAudioParam(this, isOffline, nativeAudioParam);\n                parameters.push([nm, audioParam]);\n            });\n            this._nativeAudioWorkletNode = nativeAudioWorkletNode;\n            this._onprocessorerror = null;\n            this._parameters = new ReadOnlyMap(parameters);\n            /*\n             * Bug #86 & #87: Invoking the renderer of an AudioWorkletNode might be necessary if it has no direct or indirect connection to\n             * the destination.\n             */\n            if (isOffline) {\n                addUnrenderedAudioWorkletNode(nativeContext, this);\n            }\n            const { activeInputs } = getAudioNodeConnections(this);\n            setActiveAudioWorkletNodeInputs(nativeAudioWorkletNode, activeInputs);\n        }\n        get onprocessorerror() {\n            return this._onprocessorerror;\n        }\n        set onprocessorerror(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n            this._nativeAudioWorkletNode.onprocessorerror = wrappedListener;\n            const nativeOnProcessorError = this._nativeAudioWorkletNode.onprocessorerror;\n            this._onprocessorerror =\n                nativeOnProcessorError !== null && nativeOnProcessorError === wrappedListener\n                    ? value\n                    : nativeOnProcessorError;\n        }\n        get parameters() {\n            if (this._parameters === null) {\n                // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\n                return this._nativeAudioWorkletNode.parameters;\n            }\n            return this._parameters;\n        }\n        get port() {\n            return this._nativeAudioWorkletNode.port;\n        }\n    };\n};\n//# sourceMappingURL=audio-worklet-node-constructor.js.map","export function copyFromChannel(audioBuffer, \n// @todo There is currently no way to define something like { [ key: number | string ]: Float32Array }\nparent, key, channelNumber, bufferOffset) {\n    if (typeof audioBuffer.copyFromChannel === 'function') {\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength === 0) {\n            parent[key] = new Float32Array(128);\n        }\n        audioBuffer.copyFromChannel(parent[key], channelNumber, bufferOffset);\n        // Bug #5: Safari does not support copyFromChannel().\n    }\n    else {\n        const channelData = audioBuffer.getChannelData(channelNumber);\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength === 0) {\n            parent[key] = channelData.slice(bufferOffset, bufferOffset + 128);\n        }\n        else {\n            const slicedInput = new Float32Array(channelData.buffer, bufferOffset * Float32Array.BYTES_PER_ELEMENT, 128);\n            parent[key].set(slicedInput);\n        }\n    }\n}\n//# sourceMappingURL=copy-from-channel.js.map","export const copyToChannel = (audioBuffer, parent, key, channelNumber, bufferOffset) => {\n    if (typeof audioBuffer.copyToChannel === 'function') {\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength !== 0) {\n            audioBuffer.copyToChannel(parent[key], channelNumber, bufferOffset);\n        }\n        // Bug #5: Safari does not support copyToChannel().\n    }\n    else {\n        // The byteLength will be 0 when the ArrayBuffer was transferred.\n        if (parent[key].byteLength !== 0) {\n            audioBuffer.getChannelData(channelNumber).set(parent[key], bufferOffset);\n        }\n    }\n};\n//# sourceMappingURL=copy-to-channel.js.map","export const createNestedArrays = (x, y) => {\n    const arrays = [];\n    for (let i = 0; i < x; i += 1) {\n        const array = [];\n        const length = typeof y === 'number' ? y : y[i];\n        for (let j = 0; j < length; j += 1) {\n            array.push(new Float32Array(128));\n        }\n        arrays.push(array);\n    }\n    return arrays;\n};\n//# sourceMappingURL=create-nested-arrays.js.map","import { copyFromChannel } from '../helpers/copy-from-channel';\nimport { copyToChannel } from '../helpers/copy-to-channel';\nimport { createNestedArrays } from '../helpers/create-nested-arrays';\nimport { getAudioNodeConnections } from '../helpers/get-audio-node-connections';\nimport { getAudioWorkletProcessor } from '../helpers/get-audio-worklet-processor';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nconst processBuffer = async (proxy, renderedBuffer, nativeOfflineAudioContext, options, outputChannelCount, processorConstructor, exposeCurrentFrameAndCurrentTime) => {\n    // Ceil the length to the next full render quantum.\n    // Bug #17: Safari does not yet expose the length.\n    const length = renderedBuffer === null ? Math.ceil(proxy.context.length / 128) * 128 : renderedBuffer.length;\n    const numberOfInputChannels = options.channelCount * options.numberOfInputs;\n    const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\n    const processedBuffer = numberOfOutputChannels === 0\n        ? null\n        : nativeOfflineAudioContext.createBuffer(numberOfOutputChannels, length, nativeOfflineAudioContext.sampleRate);\n    if (processorConstructor === undefined) {\n        throw new Error('Missing the processor constructor.');\n    }\n    const audioNodeConnections = getAudioNodeConnections(proxy);\n    const audioWorkletProcessor = await getAudioWorkletProcessor(nativeOfflineAudioContext, proxy);\n    const inputs = createNestedArrays(options.numberOfInputs, options.channelCount);\n    const outputs = createNestedArrays(options.numberOfOutputs, outputChannelCount);\n    const parameters = Array.from(proxy.parameters.keys()).reduce((prmtrs, name) => ({ ...prmtrs, [name]: new Float32Array(128) }), {});\n    for (let i = 0; i < length; i += 128) {\n        if (options.numberOfInputs > 0 && renderedBuffer !== null) {\n            for (let j = 0; j < options.numberOfInputs; j += 1) {\n                for (let k = 0; k < options.channelCount; k += 1) {\n                    copyFromChannel(renderedBuffer, inputs[j], k, k, i);\n                }\n            }\n        }\n        if (processorConstructor.parameterDescriptors !== undefined && renderedBuffer !== null) {\n            processorConstructor.parameterDescriptors.forEach(({ name }, index) => {\n                copyFromChannel(renderedBuffer, parameters, name, numberOfInputChannels + index, i);\n            });\n        }\n        for (let j = 0; j < options.numberOfInputs; j += 1) {\n            for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                // The byteLength will be 0 when the ArrayBuffer was transferred.\n                if (outputs[j][k].byteLength === 0) {\n                    outputs[j][k] = new Float32Array(128);\n                }\n            }\n        }\n        try {\n            const potentiallyEmptyInputs = inputs.map((input, index) => {\n                if (audioNodeConnections.activeInputs[index].size === 0) {\n                    return [];\n                }\n                return input;\n            });\n            const activeSourceFlag = exposeCurrentFrameAndCurrentTime(i / nativeOfflineAudioContext.sampleRate, nativeOfflineAudioContext.sampleRate, () => audioWorkletProcessor.process(potentiallyEmptyInputs, outputs, parameters));\n            if (processedBuffer !== null) {\n                for (let j = 0, outputChannelSplitterNodeOutput = 0; j < options.numberOfOutputs; j += 1) {\n                    for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                        copyToChannel(processedBuffer, outputs[j], k, outputChannelSplitterNodeOutput + k, i);\n                    }\n                    outputChannelSplitterNodeOutput += outputChannelCount[j];\n                }\n            }\n            if (!activeSourceFlag) {\n                break;\n            }\n        }\n        catch (error) {\n            proxy.dispatchEvent(new ErrorEvent('processorerror', {\n                colno: error.colno,\n                filename: error.filename,\n                lineno: error.lineno,\n                message: error.message\n            }));\n            break;\n        }\n    }\n    return processedBuffer;\n};\nexport const createAudioWorkletNodeRendererFactory = (connectAudioParam, connectMultipleOutputs, createNativeAudioBufferSourceNode, createNativeChannelMergerNode, createNativeChannelSplitterNode, createNativeConstantSourceNode, createNativeGainNode, deleteUnrenderedAudioWorkletNode, disconnectMultipleOutputs, exposeCurrentFrameAndCurrentTime, getNativeAudioNode, nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor, renderAutomation, renderInputsOfAudioNode, renderNativeOfflineAudioContext) => {\n    return (name, options, processorConstructor) => {\n        const renderedNativeAudioNodes = new WeakMap();\n        let processedBufferPromise = null;\n        const createAudioNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeAudioWorkletNode = getNativeAudioNode(proxy);\n            let nativeOutputNodes = null;\n            const nativeAudioWorkletNodeIsOwnedByContext = isOwnedByContext(nativeAudioWorkletNode, nativeOfflineAudioContext);\n            const outputChannelCount = Array.isArray(options.outputChannelCount)\n                ? options.outputChannelCount\n                : Array.from(options.outputChannelCount);\n            // Bug #61: Only Chrome, Edge & Firefox have an implementation of the AudioWorkletNode yet.\n            if (nativeAudioWorkletNodeConstructor === null) {\n                const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\n                const outputChannelSplitterNode = createNativeChannelSplitterNode(nativeOfflineAudioContext, {\n                    channelCount: Math.max(1, numberOfOutputChannels),\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    numberOfOutputs: Math.max(1, numberOfOutputChannels)\n                });\n                const outputChannelMergerNodes = [];\n                for (let i = 0; i < proxy.numberOfOutputs; i += 1) {\n                    outputChannelMergerNodes.push(createNativeChannelMergerNode(nativeOfflineAudioContext, {\n                        channelCount: 1,\n                        channelCountMode: 'explicit',\n                        channelInterpretation: 'speakers',\n                        numberOfInputs: outputChannelCount[i]\n                    }));\n                }\n                const outputGainNode = createNativeGainNode(nativeOfflineAudioContext, {\n                    channelCount: options.channelCount,\n                    channelCountMode: options.channelCountMode,\n                    channelInterpretation: options.channelInterpretation,\n                    gain: 1\n                });\n                outputGainNode.connect = connectMultipleOutputs.bind(null, outputChannelMergerNodes);\n                outputGainNode.disconnect = disconnectMultipleOutputs.bind(null, outputChannelMergerNodes);\n                nativeOutputNodes = [outputChannelSplitterNode, outputChannelMergerNodes, outputGainNode];\n            }\n            else if (!nativeAudioWorkletNodeIsOwnedByContext) {\n                nativeAudioWorkletNode = new nativeAudioWorkletNodeConstructor(nativeOfflineAudioContext, name);\n            }\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeOutputNodes === null ? nativeAudioWorkletNode : nativeOutputNodes[2]);\n            if (nativeOutputNodes !== null) {\n                if (processedBufferPromise === null) {\n                    if (processorConstructor === undefined) {\n                        throw new Error('Missing the processor constructor.');\n                    }\n                    if (nativeOfflineAudioContextConstructor === null) {\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\n                    }\n                    // Bug #47: The AudioDestinationNode in Safari gets not initialized correctly.\n                    const numberOfInputChannels = proxy.channelCount * proxy.numberOfInputs;\n                    const numberOfParameters = processorConstructor.parameterDescriptors === undefined ? 0 : processorConstructor.parameterDescriptors.length;\n                    const numberOfChannels = numberOfInputChannels + numberOfParameters;\n                    const renderBuffer = async () => {\n                        const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(numberOfChannels, \n                        // Ceil the length to the next full render quantum.\n                        // Bug #17: Safari does not yet expose the length.\n                        Math.ceil(proxy.context.length / 128) * 128, nativeOfflineAudioContext.sampleRate);\n                        const gainNodes = [];\n                        const inputChannelSplitterNodes = [];\n                        for (let i = 0; i < options.numberOfInputs; i += 1) {\n                            gainNodes.push(createNativeGainNode(partialOfflineAudioContext, {\n                                channelCount: options.channelCount,\n                                channelCountMode: options.channelCountMode,\n                                channelInterpretation: options.channelInterpretation,\n                                gain: 1\n                            }));\n                            inputChannelSplitterNodes.push(createNativeChannelSplitterNode(partialOfflineAudioContext, {\n                                channelCount: options.channelCount,\n                                channelCountMode: 'explicit',\n                                channelInterpretation: 'discrete',\n                                numberOfOutputs: options.channelCount\n                            }));\n                        }\n                        const constantSourceNodes = await Promise.all(Array.from(proxy.parameters.values()).map(async (audioParam) => {\n                            const constantSourceNode = createNativeConstantSourceNode(partialOfflineAudioContext, {\n                                channelCount: 1,\n                                channelCountMode: 'explicit',\n                                channelInterpretation: 'discrete',\n                                offset: audioParam.value\n                            });\n                            await renderAutomation(partialOfflineAudioContext, audioParam, constantSourceNode.offset);\n                            return constantSourceNode;\n                        }));\n                        const inputChannelMergerNode = createNativeChannelMergerNode(partialOfflineAudioContext, {\n                            channelCount: 1,\n                            channelCountMode: 'explicit',\n                            channelInterpretation: 'speakers',\n                            numberOfInputs: Math.max(1, numberOfInputChannels + numberOfParameters)\n                        });\n                        for (let i = 0; i < options.numberOfInputs; i += 1) {\n                            gainNodes[i].connect(inputChannelSplitterNodes[i]);\n                            for (let j = 0; j < options.channelCount; j += 1) {\n                                inputChannelSplitterNodes[i].connect(inputChannelMergerNode, j, i * options.channelCount + j);\n                            }\n                        }\n                        for (const [index, constantSourceNode] of constantSourceNodes.entries()) {\n                            constantSourceNode.connect(inputChannelMergerNode, 0, numberOfInputChannels + index);\n                            constantSourceNode.start(0);\n                        }\n                        inputChannelMergerNode.connect(partialOfflineAudioContext.destination);\n                        await Promise.all(gainNodes.map((gainNode) => renderInputsOfAudioNode(proxy, partialOfflineAudioContext, gainNode)));\n                        return renderNativeOfflineAudioContext(partialOfflineAudioContext);\n                    };\n                    processedBufferPromise = processBuffer(proxy, numberOfChannels === 0 ? null : await renderBuffer(), nativeOfflineAudioContext, options, outputChannelCount, processorConstructor, exposeCurrentFrameAndCurrentTime);\n                }\n                const processedBuffer = await processedBufferPromise;\n                const audioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, {\n                    buffer: null,\n                    channelCount: 2,\n                    channelCountMode: 'max',\n                    channelInterpretation: 'speakers',\n                    loop: false,\n                    loopEnd: 0,\n                    loopStart: 0,\n                    playbackRate: 1\n                });\n                const [outputChannelSplitterNode, outputChannelMergerNodes, outputGainNode] = nativeOutputNodes;\n                if (processedBuffer !== null) {\n                    audioBufferSourceNode.buffer = processedBuffer;\n                    audioBufferSourceNode.start(0);\n                }\n                audioBufferSourceNode.connect(outputChannelSplitterNode);\n                for (let i = 0, outputChannelSplitterNodeOutput = 0; i < proxy.numberOfOutputs; i += 1) {\n                    const outputChannelMergerNode = outputChannelMergerNodes[i];\n                    for (let j = 0; j < outputChannelCount[i]; j += 1) {\n                        outputChannelSplitterNode.connect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\n                    }\n                    outputChannelSplitterNodeOutput += outputChannelCount[i];\n                }\n                return outputGainNode;\n            }\n            if (!nativeAudioWorkletNodeIsOwnedByContext) {\n                for (const [nm, audioParam] of proxy.parameters.entries()) {\n                    await renderAutomation(nativeOfflineAudioContext, audioParam, \n                    // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\n                    nativeAudioWorkletNode.parameters.get(nm));\n                }\n            }\n            else {\n                for (const [nm, audioParam] of proxy.parameters.entries()) {\n                    await connectAudioParam(nativeOfflineAudioContext, audioParam, \n                    // @todo The definition that TypeScript uses of the AudioParamMap is lacking many methods.\n                    nativeAudioWorkletNode.parameters.get(nm));\n                }\n            }\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioWorkletNode);\n            return nativeAudioWorkletNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                deleteUnrenderedAudioWorkletNode(nativeOfflineAudioContext, proxy);\n                const renderedNativeAudioWorkletNodeOrGainNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeAudioWorkletNodeOrGainNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioWorkletNodeOrGainNode);\n                }\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=audio-worklet-node-renderer-factory.js.map","import { NODE_TO_PROCESSOR_MAPS } from '../globals';\nimport { getNativeAudioNode } from './get-native-audio-node';\nimport { getValueForKey } from './get-value-for-key';\nexport const getAudioWorkletProcessor = (nativeOfflineAudioContext, proxy) => {\n    const nodeToProcessorMap = getValueForKey(NODE_TO_PROCESSOR_MAPS, nativeOfflineAudioContext);\n    const nativeAudioWorkletNode = getNativeAudioNode(proxy);\n    return getValueForKey(nodeToProcessorMap, nativeAudioWorkletNode);\n};\n//# sourceMappingURL=get-audio-worklet-processor.js.map","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nconst DEFAULT_OPTIONS = {\n    Q: 1,\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    detune: 0,\n    frequency: 350,\n    gain: 0,\n    type: 'lowpass'\n};\nexport const createBiquadFilterNodeConstructor = (audioNodeConstructor, createAudioParam, createBiquadFilterNodeRenderer, createInvalidAccessError, createNativeBiquadFilterNode, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime) => {\n    return class BiquadFilterNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeBiquadFilterNode = createNativeBiquadFilterNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const biquadFilterNodeRenderer = (isOffline ? createBiquadFilterNodeRenderer() : null);\n            super(context, false, nativeBiquadFilterNode, biquadFilterNodeRenderer);\n            // Bug #80: Safari does not export the correct values for maxValue and minValue.\n            this._Q = createAudioParam(this, isOffline, nativeBiquadFilterNode.Q, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            // Bug #78: Firefox & Safari do not export the correct values for maxValue and minValue.\n            this._detune = createAudioParam(this, isOffline, nativeBiquadFilterNode.detune, 1200 * Math.log2(MOST_POSITIVE_SINGLE_FLOAT), -1200 * Math.log2(MOST_POSITIVE_SINGLE_FLOAT));\n            // Bug #77: Firefox & Safari do not export the correct value for minValue.\n            this._frequency = createAudioParam(this, isOffline, nativeBiquadFilterNode.frequency, context.sampleRate / 2, 0);\n            // Bug #79: Firefox & Safari do not export the correct values for maxValue and minValue.\n            this._gain = createAudioParam(this, isOffline, nativeBiquadFilterNode.gain, 40 * Math.log10(MOST_POSITIVE_SINGLE_FLOAT), MOST_NEGATIVE_SINGLE_FLOAT);\n            this._nativeBiquadFilterNode = nativeBiquadFilterNode;\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n        get detune() {\n            return this._detune;\n        }\n        get frequency() {\n            return this._frequency;\n        }\n        get gain() {\n            return this._gain;\n        }\n        get Q() {\n            return this._Q;\n        }\n        get type() {\n            return this._nativeBiquadFilterNode.type;\n        }\n        set type(value) {\n            this._nativeBiquadFilterNode.type = value;\n        }\n        getFrequencyResponse(frequencyHz, magResponse, phaseResponse) {\n            // Bug #189: Safari does throw an InvalidStateError.\n            try {\n                this._nativeBiquadFilterNode.getFrequencyResponse(frequencyHz, magResponse, phaseResponse);\n            }\n            catch (err) {\n                if (err.code === 11) {\n                    throw createInvalidAccessError();\n                }\n                throw err;\n            }\n            // Bug #68: Safari does not throw an error if the parameters differ in their length.\n            if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\n                throw createInvalidAccessError();\n            }\n        }\n    };\n};\n//# sourceMappingURL=biquad-filter-node-constructor.js.map","const DEFAULT_OPTIONS = {\n    channelCount: 1,\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers',\n    numberOfInputs: 6\n};\nexport const createChannelMergerNodeConstructor = (audioNodeConstructor, createChannelMergerNodeRenderer, createNativeChannelMergerNode, getNativeContext, isNativeOfflineAudioContext) => {\n    return class ChannelMergerNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeChannelMergerNode = createNativeChannelMergerNode(nativeContext, mergedOptions);\n            const channelMergerNodeRenderer = ((isNativeOfflineAudioContext(nativeContext) ? createChannelMergerNodeRenderer() : null));\n            super(context, false, nativeChannelMergerNode, channelMergerNodeRenderer);\n        }\n    };\n};\n//# sourceMappingURL=channel-merger-node-constructor.js.map","const DEFAULT_OPTIONS = {\n    channelCount: 6,\n    channelCountMode: 'explicit',\n    channelInterpretation: 'discrete',\n    numberOfOutputs: 6\n};\nexport const createChannelSplitterNodeConstructor = (audioNodeConstructor, createChannelSplitterNodeRenderer, createNativeChannelSplitterNode, getNativeContext, isNativeOfflineAudioContext, sanitizeChannelSplitterOptions) => {\n    return class ChannelSplitterNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = sanitizeChannelSplitterOptions({ ...DEFAULT_OPTIONS, ...options });\n            const nativeChannelSplitterNode = createNativeChannelSplitterNode(nativeContext, mergedOptions);\n            const channelSplitterNodeRenderer = ((isNativeOfflineAudioContext(nativeContext) ? createChannelSplitterNodeRenderer() : null));\n            super(context, false, nativeChannelSplitterNode, channelSplitterNodeRenderer);\n        }\n    };\n};\n//# sourceMappingURL=channel-splitter-node-constructor.js.map","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    offset: 1\n};\nexport const createConstantSourceNodeConstructor = (audioNodeConstructor, createAudioParam, createConstantSourceNodeRendererFactory, createNativeConstantSourceNode, getNativeContext, isNativeOfflineAudioContext, wrapEventListener) => {\n    return class ConstantSourceNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeConstantSourceNode = createNativeConstantSourceNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const constantSourceNodeRenderer = ((isOffline ? createConstantSourceNodeRendererFactory() : null));\n            super(context, false, nativeConstantSourceNode, constantSourceNodeRenderer);\n            this._constantSourceNodeRenderer = constantSourceNodeRenderer;\n            this._nativeConstantSourceNode = nativeConstantSourceNode;\n            /*\n             * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and minValue\n             * for GainNodes.\n             */\n            this._offset = createAudioParam(this, isOffline, nativeConstantSourceNode.offset, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            this._onended = null;\n        }\n        get offset() {\n            return this._offset;\n        }\n        get onended() {\n            return this._onended;\n        }\n        set onended(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n            this._nativeConstantSourceNode.onended = wrappedListener;\n            const nativeOnEnded = this._nativeConstantSourceNode.onended;\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\n        }\n        start(when = 0) {\n            this._nativeConstantSourceNode.start(when);\n            if (this._constantSourceNodeRenderer !== null) {\n                this._constantSourceNodeRenderer.start = when;\n            }\n            if (this.context.state !== 'closed') {\n                setInternalStateToActive(this);\n                const resetInternalStateToPassive = () => {\n                    this._nativeConstantSourceNode.removeEventListener('ended', resetInternalStateToPassive);\n                    if (isActiveAudioNode(this)) {\n                        setInternalStateToPassive(this);\n                    }\n                };\n                this._nativeConstantSourceNode.addEventListener('ended', resetInternalStateToPassive);\n            }\n        }\n        stop(when = 0) {\n            this._nativeConstantSourceNode.stop(when);\n            if (this._constantSourceNodeRenderer !== null) {\n                this._constantSourceNodeRenderer.stop = when;\n            }\n        }\n    };\n};\n//# sourceMappingURL=constant-source-node-constructor.js.map","const DEFAULT_OPTIONS = {\n    buffer: null,\n    channelCount: 2,\n    channelCountMode: 'clamped-max',\n    channelInterpretation: 'speakers',\n    disableNormalization: false\n};\nexport const createConvolverNodeConstructor = (audioNodeConstructor, createConvolverNodeRenderer, createNativeConvolverNode, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime) => {\n    return class ConvolverNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeConvolverNode = createNativeConvolverNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const convolverNodeRenderer = (isOffline ? createConvolverNodeRenderer() : null);\n            super(context, false, nativeConvolverNode, convolverNodeRenderer);\n            this._isBufferNullified = false;\n            this._nativeConvolverNode = nativeConvolverNode;\n            if (mergedOptions.buffer !== null) {\n                setAudioNodeTailTime(this, mergedOptions.buffer.duration);\n            }\n        }\n        get buffer() {\n            if (this._isBufferNullified) {\n                return null;\n            }\n            return this._nativeConvolverNode.buffer;\n        }\n        set buffer(value) {\n            this._nativeConvolverNode.buffer = value;\n            // Bug #115: Safari does not allow to set the buffer to null.\n            if (value === null && this._nativeConvolverNode.buffer !== null) {\n                const nativeContext = this._nativeConvolverNode.context;\n                this._nativeConvolverNode.buffer = nativeContext.createBuffer(1, 1, nativeContext.sampleRate);\n                this._isBufferNullified = true;\n                setAudioNodeTailTime(this, 0);\n            }\n            else {\n                this._isBufferNullified = false;\n                setAudioNodeTailTime(this, this._nativeConvolverNode.buffer === null ? 0 : this._nativeConvolverNode.buffer.duration);\n            }\n        }\n        get normalize() {\n            return this._nativeConvolverNode.normalize;\n        }\n        set normalize(value) {\n            this._nativeConvolverNode.normalize = value;\n        }\n    };\n};\n//# sourceMappingURL=convolver-node-constructor.js.map","export const detachArrayBuffer = (arrayBuffer) => {\n    const { port1, port2 } = new MessageChannel();\n    return new Promise((resolve) => {\n        const closeAndResolve = () => {\n            port2.onmessage = null;\n            port1.close();\n            port2.close();\n            resolve();\n        };\n        port2.onmessage = () => closeAndResolve();\n        try {\n            port1.postMessage(arrayBuffer, [arrayBuffer]);\n        }\n        catch {\n            // Ignore errors.\n        }\n        finally {\n            closeAndResolve();\n        }\n    });\n};\n//# sourceMappingURL=detach-array-buffer.js.map","const DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    delayTime: 0,\n    maxDelayTime: 1\n};\nexport const createDelayNodeConstructor = (audioNodeConstructor, createAudioParam, createDelayNodeRenderer, createNativeDelayNode, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime) => {\n    return class DelayNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeDelayNode = createNativeDelayNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const delayNodeRenderer = (isOffline ? createDelayNodeRenderer(mergedOptions.maxDelayTime) : null);\n            super(context, false, nativeDelayNode, delayNodeRenderer);\n            this._delayTime = createAudioParam(this, isOffline, nativeDelayNode.delayTime);\n            setAudioNodeTailTime(this, mergedOptions.maxDelayTime);\n        }\n        get delayTime() {\n            return this._delayTime;\n        }\n    };\n};\n//# sourceMappingURL=delay-node-constructor.js.map","import { isNativeAudioNode } from '../guards/native-audio-node';\nconst getOutputAudioNodeAtIndex = (createIndexSizeError, outputAudioNodes, output) => {\n    const outputAudioNode = outputAudioNodes[output];\n    if (outputAudioNode === undefined) {\n        throw createIndexSizeError();\n    }\n    return outputAudioNode;\n};\nexport const createDisconnectMultipleOutputs = (createIndexSizeError) => {\n    return (outputAudioNodes, destinationOrOutput = undefined, output = undefined, input = 0) => {\n        if (destinationOrOutput === undefined) {\n            return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect());\n        }\n        if (typeof destinationOrOutput === 'number') {\n            return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, destinationOrOutput).disconnect();\n        }\n        if (isNativeAudioNode(destinationOrOutput)) {\n            if (output === undefined) {\n                return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect(destinationOrOutput));\n            }\n            if (input === undefined) {\n                return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0);\n            }\n            return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0, input);\n        }\n        if (output === undefined) {\n            return outputAudioNodes.forEach((outputAudioNode) => outputAudioNode.disconnect(destinationOrOutput));\n        }\n        return getOutputAudioNodeAtIndex(createIndexSizeError, outputAudioNodes, output).disconnect(destinationOrOutput, 0);\n    };\n};\n//# sourceMappingURL=disconnect-multiple-outputs.js.map","const DEFAULT_OPTIONS = {\n    attack: 0.003,\n    channelCount: 2,\n    channelCountMode: 'clamped-max',\n    channelInterpretation: 'speakers',\n    knee: 30,\n    ratio: 12,\n    release: 0.25,\n    threshold: -24\n};\nexport const createDynamicsCompressorNodeConstructor = (audioNodeConstructor, createAudioParam, createDynamicsCompressorNodeRenderer, createNativeDynamicsCompressorNode, createNotSupportedError, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime) => {\n    return class DynamicsCompressorNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeDynamicsCompressorNode = createNativeDynamicsCompressorNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const dynamicsCompressorNodeRenderer = (isOffline ? createDynamicsCompressorNodeRenderer() : null);\n            super(context, false, nativeDynamicsCompressorNode, dynamicsCompressorNodeRenderer);\n            this._attack = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.attack);\n            this._knee = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.knee);\n            this._nativeDynamicsCompressorNode = nativeDynamicsCompressorNode;\n            this._ratio = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.ratio);\n            this._release = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.release);\n            this._threshold = createAudioParam(this, isOffline, nativeDynamicsCompressorNode.threshold);\n            setAudioNodeTailTime(this, 0.006);\n        }\n        get attack() {\n            return this._attack;\n        }\n        // Bug #108: Safari allows a channelCount of three and above which is why the getter and setter needs to be overwritten here.\n        get channelCount() {\n            return this._nativeDynamicsCompressorNode.channelCount;\n        }\n        set channelCount(value) {\n            const previousChannelCount = this._nativeDynamicsCompressorNode.channelCount;\n            this._nativeDynamicsCompressorNode.channelCount = value;\n            if (value > 2) {\n                this._nativeDynamicsCompressorNode.channelCount = previousChannelCount;\n                throw createNotSupportedError();\n            }\n        }\n        /*\n         * Bug #109: Only Chrome and Firefox disallow a channelCountMode of 'max' yet which is why the getter and setter needs to be\n         * overwritten here.\n         */\n        get channelCountMode() {\n            return this._nativeDynamicsCompressorNode.channelCountMode;\n        }\n        set channelCountMode(value) {\n            const previousChannelCount = this._nativeDynamicsCompressorNode.channelCountMode;\n            this._nativeDynamicsCompressorNode.channelCountMode = value;\n            if (value === 'max') {\n                this._nativeDynamicsCompressorNode.channelCountMode = previousChannelCount;\n                throw createNotSupportedError();\n            }\n        }\n        get knee() {\n            return this._knee;\n        }\n        get ratio() {\n            return this._ratio;\n        }\n        get reduction() {\n            // Bug #111: Safari returns an AudioParam instead of a number.\n            if (typeof this._nativeDynamicsCompressorNode.reduction.value === 'number') {\n                return this._nativeDynamicsCompressorNode.reduction.value;\n            }\n            return this._nativeDynamicsCompressorNode.reduction;\n        }\n        get release() {\n            return this._release;\n        }\n        get threshold() {\n            return this._threshold;\n        }\n    };\n};\n//# sourceMappingURL=dynamics-compressor-node-constructor.js.map","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    gain: 1\n};\nexport const createGainNodeConstructor = (audioNodeConstructor, createAudioParam, createGainNodeRenderer, createNativeGainNode, getNativeContext, isNativeOfflineAudioContext) => {\n    return class GainNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeGainNode = createNativeGainNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const gainNodeRenderer = (isOffline ? createGainNodeRenderer() : null);\n            super(context, false, nativeGainNode, gainNodeRenderer);\n            // Bug #74: Safari does not export the correct values for maxValue and minValue.\n            this._gain = createAudioParam(this, isOffline, nativeGainNode.gain, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n        }\n        get gain() {\n            return this._gain;\n        }\n    };\n};\n//# sourceMappingURL=gain-node-constructor.js.map","export const createInvalidStateError = () => new DOMException('', 'InvalidStateError');\n//# sourceMappingURL=invalid-state-error.js.map","export const createInvalidAccessError = () => new DOMException('', 'InvalidAccessError');\n//# sourceMappingURL=invalid-access-error.js.map","import { wrapIIRFilterNodeGetFrequencyResponseMethod } from '../helpers/wrap-iir-filter-node-get-frequency-response-method';\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers'\n};\nexport const createIIRFilterNodeConstructor = (audioNodeConstructor, createNativeIIRFilterNode, createIIRFilterNodeRenderer, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime) => {\n    return class IIRFilterNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeIIRFilterNode = createNativeIIRFilterNode(nativeContext, isOffline ? null : context.baseLatency, mergedOptions);\n            const iirFilterNodeRenderer = ((isOffline ? createIIRFilterNodeRenderer(mergedOptions.feedback, mergedOptions.feedforward) : null));\n            super(context, false, nativeIIRFilterNode, iirFilterNodeRenderer);\n            // Bug #23 & #24: FirefoxDeveloper does not throw an InvalidAccessError.\n            // @todo Write a test which allows other browsers to remain unpatched.\n            wrapIIRFilterNodeGetFrequencyResponseMethod(nativeIIRFilterNode);\n            this._nativeIIRFilterNode = nativeIIRFilterNode;\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n        getFrequencyResponse(frequencyHz, magResponse, phaseResponse) {\n            return this._nativeIIRFilterNode.getFrequencyResponse(frequencyHz, magResponse, phaseResponse);\n        }\n    };\n};\n//# sourceMappingURL=iir-filter-node-constructor.js.map","// This implementation as shamelessly inspired by source code of\n// tslint:disable-next-line:max-line-length\n// {@link https://chromium.googlesource.com/chromium/src.git/+/master/third_party/WebKit/Source/platform/audio/IIRFilter.cpp|Chromium's IIRFilter}.\nexport const filterBuffer = (feedback, feedbackLength, feedforward, feedforwardLength, minLength, xBuffer, yBuffer, bufferIndex, bufferLength, input, output) => {\n    const inputLength = input.length;\n    let i = bufferIndex;\n    for (let j = 0; j < inputLength; j += 1) {\n        let y = feedforward[0] * input[j];\n        for (let k = 1; k < minLength; k += 1) {\n            const x = (i - k) & (bufferLength - 1); // tslint:disable-line:no-bitwise\n            y += feedforward[k] * xBuffer[x];\n            y -= feedback[k] * yBuffer[x];\n        }\n        for (let k = minLength; k < feedforwardLength; k += 1) {\n            y += feedforward[k] * xBuffer[(i - k) & (bufferLength - 1)]; // tslint:disable-line:no-bitwise\n        }\n        for (let k = minLength; k < feedbackLength; k += 1) {\n            y -= feedback[k] * yBuffer[(i - k) & (bufferLength - 1)]; // tslint:disable-line:no-bitwise\n        }\n        xBuffer[i] = input[j];\n        yBuffer[i] = y;\n        i = (i + 1) & (bufferLength - 1); // tslint:disable-line:no-bitwise\n        output[j] = y;\n    }\n    return i;\n};\n//# sourceMappingURL=filter-buffer.js.map","const DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers'\n};\nexport const createMediaStreamAudioDestinationNodeConstructor = (audioNodeConstructor, createNativeMediaStreamAudioDestinationNode, getNativeContext, isNativeOfflineAudioContext) => {\n    return class MediaStreamAudioDestinationNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            // Bug #173: Safari allows to create a MediaStreamAudioDestinationNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(nativeContext)) {\n                throw new TypeError();\n            }\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeMediaStreamAudioDestinationNode = createNativeMediaStreamAudioDestinationNode(nativeContext, mergedOptions);\n            super(context, false, nativeMediaStreamAudioDestinationNode, null);\n            this._nativeMediaStreamAudioDestinationNode = nativeMediaStreamAudioDestinationNode;\n        }\n        get stream() {\n            return this._nativeMediaStreamAudioDestinationNode.stream;\n        }\n    };\n};\n//# sourceMappingURL=media-stream-audio-destination-node-constructor.js.map","export const testPromiseSupport = (nativeContext) => {\n    // This 12 numbers represent the 48 bytes of an empty WAVE file with a single sample.\n    const uint32Array = new Uint32Array([1179011410, 40, 1163280727, 544501094, 16, 131073, 44100, 176400, 1048580, 1635017060, 4, 0]);\n    try {\n        // Bug #1: Safari requires a successCallback.\n        const promise = nativeContext.decodeAudioData(uint32Array.buffer, () => {\n            // Ignore the success callback.\n        });\n        if (promise === undefined) {\n            return false;\n        }\n        promise.catch(() => {\n            // Ignore rejected errors.\n        });\n        return true;\n    }\n    catch {\n        // Ignore errors.\n    }\n    return false;\n};\n//# sourceMappingURL=test-promise-support.js.map","export const assignNativeAudioNodeOption = (nativeAudioNode, options, option) => {\n    const value = options[option];\n    if (value !== undefined && value !== nativeAudioNode[option]) {\n        nativeAudioNode[option] = value;\n    }\n};\n//# sourceMappingURL=assign-native-audio-node-option.js.map","import { assignNativeAudioNodeOption } from './assign-native-audio-node-option';\nexport const assignNativeAudioNodeOptions = (nativeAudioNode, options) => {\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelCount');\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelCountMode');\n    assignNativeAudioNodeOption(nativeAudioNode, options, 'channelInterpretation');\n};\n//# sourceMappingURL=assign-native-audio-node-options.js.map","export const testAnalyserNodeGetFloatTimeDomainDataMethodSupport = (nativeAnalyserNode) => {\n    return typeof nativeAnalyserNode.getFloatTimeDomainData === 'function';\n};\n//# sourceMappingURL=test-analyser-node-get-float-time-domain-data-method-support.js.map","export const assignNativeAudioNodeAudioParamValue = (nativeAudioNode, options, audioParam) => {\n    const value = options[audioParam];\n    if (value !== undefined && value !== nativeAudioNode[audioParam].value) {\n        nativeAudioNode[audioParam].value = value;\n    }\n};\n//# sourceMappingURL=assign-native-audio-node-audio-param-value.js.map","export const wrapAudioScheduledSourceNodeStartMethodNegativeParameters = (nativeAudioScheduledSourceNode) => {\n    nativeAudioScheduledSourceNode.start = ((start) => {\n        return (when = 0, offset = 0, duration) => {\n            if ((typeof duration === 'number' && duration < 0) || offset < 0 || when < 0) {\n                throw new RangeError(\"The parameters can't be negative.\");\n            }\n            // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\n            start.call(nativeAudioScheduledSourceNode, when, offset, duration);\n        };\n    })(nativeAudioScheduledSourceNode.start);\n};\n//# sourceMappingURL=wrap-audio-scheduled-source-node-start-method-negative-parameters.js.map","export const wrapAudioScheduledSourceNodeStopMethodNegativeParameters = (nativeAudioScheduledSourceNode) => {\n    nativeAudioScheduledSourceNode.stop = ((stop) => {\n        return (when = 0) => {\n            if (when < 0) {\n                throw new RangeError(\"The parameter can't be negative.\");\n            }\n            stop.call(nativeAudioScheduledSourceNode, when);\n        };\n    })(nativeAudioScheduledSourceNode.stop);\n};\n//# sourceMappingURL=wrap-audio-scheduled-source-node-stop-method-negative-parameters.js.map","export const computeBufferSize = (baseLatency, sampleRate) => {\n    if (baseLatency === null) {\n        return 512;\n    }\n    return Math.max(512, Math.min(16384, Math.pow(2, Math.round(Math.log2(baseLatency * sampleRate)))));\n};\n//# sourceMappingURL=compute-buffer-size.js.map","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeBiquadFilterNode = (nativeContext, options) => {\n    const nativeBiquadFilterNode = nativeContext.createBiquadFilter();\n    assignNativeAudioNodeOptions(nativeBiquadFilterNode, options);\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'Q');\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'detune');\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'frequency');\n    assignNativeAudioNodeAudioParamValue(nativeBiquadFilterNode, options, 'gain');\n    assignNativeAudioNodeOption(nativeBiquadFilterNode, options, 'type');\n    return nativeBiquadFilterNode;\n};\n//# sourceMappingURL=native-biquad-filter-node.js.map","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapChannelSplitterNode } from '../helpers/wrap-channel-splitter-node';\nexport const createNativeChannelSplitterNode = (nativeContext, options) => {\n    const nativeChannelSplitterNode = nativeContext.createChannelSplitter(options.numberOfOutputs);\n    // Bug #96: Safari does not have the correct channelCount.\n    // Bug #29: Safari does not have the correct channelCountMode.\n    // Bug #31: Safari does not have the correct channelInterpretation.\n    assignNativeAudioNodeOptions(nativeChannelSplitterNode, options);\n    // Bug #29, #30, #31, #32, #96 & #97: Only Chrome, Edge & Firefox partially support the spec yet.\n    wrapChannelSplitterNode(nativeChannelSplitterNode);\n    return nativeChannelSplitterNode;\n};\n//# sourceMappingURL=native-channel-splitter-node.js.map","import { createInvalidStateError } from '../factories/invalid-state-error';\nexport const wrapChannelSplitterNode = (channelSplitterNode) => {\n    const channelCount = channelSplitterNode.numberOfOutputs;\n    // Bug #97: Safari does not throw an error when attempting to change the channelCount to something other than its initial value.\n    Object.defineProperty(channelSplitterNode, 'channelCount', {\n        get: () => channelCount,\n        set: (value) => {\n            if (value !== channelCount) {\n                throw createInvalidStateError();\n            }\n        }\n    });\n    // Bug #30: Safari does not throw an error when attempting to change the channelCountMode to something other than explicit.\n    Object.defineProperty(channelSplitterNode, 'channelCountMode', {\n        get: () => 'explicit',\n        set: (value) => {\n            if (value !== 'explicit') {\n                throw createInvalidStateError();\n            }\n        }\n    });\n    // Bug #32: Safari does not throw an error when attempting to change the channelInterpretation to something other than discrete.\n    Object.defineProperty(channelSplitterNode, 'channelInterpretation', {\n        get: () => 'discrete',\n        set: (value) => {\n            if (value !== 'discrete') {\n                throw createInvalidStateError();\n            }\n        }\n    });\n};\n//# sourceMappingURL=wrap-channel-splitter-node.js.map","export const interceptConnections = (original, interceptor) => {\n    original.connect = interceptor.connect.bind(interceptor);\n    original.disconnect = interceptor.disconnect.bind(interceptor);\n    return original;\n};\n//# sourceMappingURL=intercept-connections.js.map","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeDelayNode = (nativeContext, options) => {\n    const nativeDelayNode = nativeContext.createDelay(options.maxDelayTime);\n    assignNativeAudioNodeOptions(nativeDelayNode, options);\n    assignNativeAudioNodeAudioParamValue(nativeDelayNode, options, 'delayTime');\n    return nativeDelayNode;\n};\n//# sourceMappingURL=native-delay-node.js.map","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeGainNode = (nativeContext, options) => {\n    const nativeGainNode = nativeContext.createGain();\n    assignNativeAudioNodeOptions(nativeGainNode, options);\n    assignNativeAudioNodeAudioParamValue(nativeGainNode, options, 'gain');\n    return nativeGainNode;\n};\n//# sourceMappingURL=native-gain-node.js.map","import { computeBufferSize } from '../helpers/compute-buffer-size';\nimport { filterBuffer } from '../helpers/filter-buffer';\nimport { interceptConnections } from '../helpers/intercept-connections';\nfunction divide(a, b) {\n    const denominator = b[0] * b[0] + b[1] * b[1];\n    return [(a[0] * b[0] + a[1] * b[1]) / denominator, (a[1] * b[0] - a[0] * b[1]) / denominator];\n}\nfunction multiply(a, b) {\n    return [a[0] * b[0] - a[1] * b[1], a[0] * b[1] + a[1] * b[0]];\n}\nfunction evaluatePolynomial(coefficient, z) {\n    let result = [0, 0];\n    for (let i = coefficient.length - 1; i >= 0; i -= 1) {\n        result = multiply(result, z);\n        result[0] += coefficient[i];\n    }\n    return result;\n}\nexport const createNativeIIRFilterNodeFakerFactory = (createInvalidAccessError, createInvalidStateError, createNativeScriptProcessorNode, createNotSupportedError) => {\n    return (nativeContext, baseLatency, { channelCount, channelCountMode, channelInterpretation, feedback, feedforward }) => {\n        const bufferSize = computeBufferSize(baseLatency, nativeContext.sampleRate);\n        const convertedFeedback = feedback instanceof Float64Array ? feedback : new Float64Array(feedback);\n        const convertedFeedforward = feedforward instanceof Float64Array ? feedforward : new Float64Array(feedforward);\n        const feedbackLength = convertedFeedback.length;\n        const feedforwardLength = convertedFeedforward.length;\n        const minLength = Math.min(feedbackLength, feedforwardLength);\n        if (feedbackLength === 0 || feedbackLength > 20) {\n            throw createNotSupportedError();\n        }\n        if (convertedFeedback[0] === 0) {\n            throw createInvalidStateError();\n        }\n        if (feedforwardLength === 0 || feedforwardLength > 20) {\n            throw createNotSupportedError();\n        }\n        if (convertedFeedforward[0] === 0) {\n            throw createInvalidStateError();\n        }\n        if (convertedFeedback[0] !== 1) {\n            for (let i = 0; i < feedforwardLength; i += 1) {\n                convertedFeedforward[i] /= convertedFeedback[0];\n            }\n            for (let i = 1; i < feedbackLength; i += 1) {\n                convertedFeedback[i] /= convertedFeedback[0];\n            }\n        }\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, bufferSize, channelCount, channelCount);\n        scriptProcessorNode.channelCount = channelCount;\n        scriptProcessorNode.channelCountMode = channelCountMode;\n        scriptProcessorNode.channelInterpretation = channelInterpretation;\n        const bufferLength = 32;\n        const bufferIndexes = [];\n        const xBuffers = [];\n        const yBuffers = [];\n        for (let i = 0; i < channelCount; i += 1) {\n            bufferIndexes.push(0);\n            const xBuffer = new Float32Array(bufferLength);\n            const yBuffer = new Float32Array(bufferLength);\n            xBuffer.fill(0);\n            yBuffer.fill(0);\n            xBuffers.push(xBuffer);\n            yBuffers.push(yBuffer);\n        }\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = (event) => {\n            const inputBuffer = event.inputBuffer;\n            const outputBuffer = event.outputBuffer;\n            const numberOfChannels = inputBuffer.numberOfChannels;\n            for (let i = 0; i < numberOfChannels; i += 1) {\n                const input = inputBuffer.getChannelData(i);\n                const output = outputBuffer.getChannelData(i);\n                bufferIndexes[i] = filterBuffer(convertedFeedback, feedbackLength, convertedFeedforward, feedforwardLength, minLength, xBuffers[i], yBuffers[i], bufferIndexes[i], bufferLength, input, output);\n            }\n        };\n        const nyquist = nativeContext.sampleRate / 2;\n        const nativeIIRFilterNodeFaker = {\n            get bufferSize() {\n                return bufferSize;\n            },\n            get channelCount() {\n                return scriptProcessorNode.channelCount;\n            },\n            set channelCount(value) {\n                scriptProcessorNode.channelCount = value;\n            },\n            get channelCountMode() {\n                return scriptProcessorNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                scriptProcessorNode.channelCountMode = value;\n            },\n            get channelInterpretation() {\n                return scriptProcessorNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                scriptProcessorNode.channelInterpretation = value;\n            },\n            get context() {\n                return scriptProcessorNode.context;\n            },\n            get inputs() {\n                return [scriptProcessorNode];\n            },\n            get numberOfInputs() {\n                return scriptProcessorNode.numberOfInputs;\n            },\n            get numberOfOutputs() {\n                return scriptProcessorNode.numberOfOutputs;\n            },\n            addEventListener(...args) {\n                // @todo Dissallow adding an audioprocess listener.\n                return scriptProcessorNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args) {\n                return scriptProcessorNode.dispatchEvent(args[0]);\n            },\n            getFrequencyResponse(frequencyHz, magResponse, phaseResponse) {\n                if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\n                    throw createInvalidAccessError();\n                }\n                const length = frequencyHz.length;\n                for (let i = 0; i < length; i += 1) {\n                    const omega = -Math.PI * (frequencyHz[i] / nyquist);\n                    const z = [Math.cos(omega), Math.sin(omega)];\n                    const numerator = evaluatePolynomial(convertedFeedforward, z);\n                    const denominator = evaluatePolynomial(convertedFeedback, z);\n                    const response = divide(numerator, denominator);\n                    magResponse[i] = Math.sqrt(response[0] * response[0] + response[1] * response[1]);\n                    phaseResponse[i] = Math.atan2(response[1], response[0]);\n                }\n            },\n            removeEventListener(...args) {\n                return scriptProcessorNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n        return interceptConnections(nativeIIRFilterNodeFaker, scriptProcessorNode);\n    };\n};\n//# sourceMappingURL=native-iir-filter-node-faker-factory.js.map","export const createNativeScriptProcessorNode = (nativeContext, bufferSize, numberOfInputChannels, numberOfOutputChannels) => {\n    return nativeContext.createScriptProcessor(bufferSize, numberOfInputChannels, numberOfOutputChannels); // tslint:disable-line deprecation\n};\n//# sourceMappingURL=native-script-processor-node.js.map","export const createNotSupportedError = () => new DOMException('', 'NotSupportedError');\n//# sourceMappingURL=not-supported-error.js.map","import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { testPromiseSupport } from '../helpers/test-promise-support';\nconst DEFAULT_OPTIONS = {\n    numberOfChannels: 1\n};\nexport const createOfflineAudioContextConstructor = (baseAudioContextConstructor, cacheTestResult, createInvalidStateError, createNativeOfflineAudioContext, startRendering) => {\n    return class OfflineAudioContext extends baseAudioContextConstructor {\n        constructor(a, b, c) {\n            let options;\n            if (typeof a === 'number' && b !== undefined && c !== undefined) {\n                options = { length: b, numberOfChannels: a, sampleRate: c };\n            }\n            else if (typeof a === 'object') {\n                options = a;\n            }\n            else {\n                throw new Error('The given parameters are not valid.');\n            }\n            const { length, numberOfChannels, sampleRate } = { ...DEFAULT_OPTIONS, ...options };\n            const nativeOfflineAudioContext = createNativeOfflineAudioContext(numberOfChannels, length, sampleRate);\n            // #21 Safari does not support promises and therefore would fire the statechange event before the promise can be resolved.\n            if (!cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n                nativeOfflineAudioContext.addEventListener('statechange', (() => {\n                    let i = 0;\n                    const delayStateChangeEvent = (event) => {\n                        if (this._state === 'running') {\n                            if (i > 0) {\n                                nativeOfflineAudioContext.removeEventListener('statechange', delayStateChangeEvent);\n                                event.stopImmediatePropagation();\n                                this._waitForThePromiseToSettle(event);\n                            }\n                            else {\n                                i += 1;\n                            }\n                        }\n                    };\n                    return delayStateChangeEvent;\n                })());\n            }\n            super(nativeOfflineAudioContext, numberOfChannels);\n            this._length = length;\n            this._nativeOfflineAudioContext = nativeOfflineAudioContext;\n            this._state = null;\n        }\n        get length() {\n            // Bug #17: Safari does not yet expose the length.\n            if (this._nativeOfflineAudioContext.length === undefined) {\n                return this._length;\n            }\n            return this._nativeOfflineAudioContext.length;\n        }\n        get state() {\n            return this._state === null ? this._nativeOfflineAudioContext.state : this._state;\n        }\n        startRendering() {\n            /*\n             * Bug #9 & #59: It is theoretically possible that startRendering() will first render a partialOfflineAudioContext. Therefore\n             * the state of the nativeOfflineAudioContext might no transition to running immediately.\n             */\n            if (this._state === 'running') {\n                return Promise.reject(createInvalidStateError());\n            }\n            this._state = 'running';\n            return startRendering(this.destination, this._nativeOfflineAudioContext).finally(() => {\n                this._state = null;\n                deactivateAudioGraph(this);\n            });\n        }\n        _waitForThePromiseToSettle(event) {\n            if (this._state === null) {\n                this._nativeOfflineAudioContext.dispatchEvent(event);\n            }\n            else {\n                setTimeout(() => this._waitForThePromiseToSettle(event));\n            }\n        }\n    };\n};\n//# sourceMappingURL=offline-audio-context-constructor.js.map","import { isActiveAudioNode } from '../helpers/is-active-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassive } from '../helpers/set-internal-state-to-passive';\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max', // This attribute has no effect for nodes with no inputs.\n    channelInterpretation: 'speakers', // This attribute has no effect for nodes with no inputs.\n    detune: 0,\n    frequency: 440,\n    periodicWave: undefined,\n    type: 'sine'\n};\nexport const createOscillatorNodeConstructor = (audioNodeConstructor, createAudioParam, createNativeOscillatorNode, createOscillatorNodeRenderer, getNativeContext, isNativeOfflineAudioContext, wrapEventListener) => {\n    return class OscillatorNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeOscillatorNode = createNativeOscillatorNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const oscillatorNodeRenderer = (isOffline ? createOscillatorNodeRenderer() : null);\n            const nyquist = context.sampleRate / 2;\n            super(context, false, nativeOscillatorNode, oscillatorNodeRenderer);\n            // Bug #81: Firefox & Safari do not export the correct values for maxValue and minValue.\n            this._detune = createAudioParam(this, isOffline, nativeOscillatorNode.detune, 153600, -153600);\n            // Bug #76: Safari does not export the correct values for maxValue and minValue.\n            this._frequency = createAudioParam(this, isOffline, nativeOscillatorNode.frequency, nyquist, -nyquist);\n            this._nativeOscillatorNode = nativeOscillatorNode;\n            this._onended = null;\n            this._oscillatorNodeRenderer = oscillatorNodeRenderer;\n            if (this._oscillatorNodeRenderer !== null && mergedOptions.periodicWave !== undefined) {\n                this._oscillatorNodeRenderer.periodicWave =\n                    mergedOptions.periodicWave;\n            }\n        }\n        get detune() {\n            return this._detune;\n        }\n        get frequency() {\n            return this._frequency;\n        }\n        get onended() {\n            return this._onended;\n        }\n        set onended(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n            this._nativeOscillatorNode.onended = wrappedListener;\n            const nativeOnEnded = this._nativeOscillatorNode.onended;\n            this._onended = nativeOnEnded !== null && nativeOnEnded === wrappedListener ? value : nativeOnEnded;\n        }\n        get type() {\n            return this._nativeOscillatorNode.type;\n        }\n        set type(value) {\n            this._nativeOscillatorNode.type = value;\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.periodicWave = null;\n            }\n        }\n        setPeriodicWave(periodicWave) {\n            this._nativeOscillatorNode.setPeriodicWave(periodicWave);\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.periodicWave = periodicWave;\n            }\n        }\n        start(when = 0) {\n            this._nativeOscillatorNode.start(when);\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.start = when;\n            }\n            if (this.context.state !== 'closed') {\n                setInternalStateToActive(this);\n                const resetInternalStateToPassive = () => {\n                    this._nativeOscillatorNode.removeEventListener('ended', resetInternalStateToPassive);\n                    if (isActiveAudioNode(this)) {\n                        setInternalStateToPassive(this);\n                    }\n                };\n                this._nativeOscillatorNode.addEventListener('ended', resetInternalStateToPassive);\n            }\n        }\n        stop(when = 0) {\n            this._nativeOscillatorNode.stop(when);\n            if (this._oscillatorNodeRenderer !== null) {\n                this._oscillatorNodeRenderer.stop = when;\n            }\n        }\n    };\n};\n//# sourceMappingURL=oscillator-node-constructor.js.map","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nconst DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'clamped-max',\n    channelInterpretation: 'speakers',\n    coneInnerAngle: 360,\n    coneOuterAngle: 360,\n    coneOuterGain: 0,\n    distanceModel: 'inverse',\n    maxDistance: 10000,\n    orientationX: 1,\n    orientationY: 0,\n    orientationZ: 0,\n    panningModel: 'equalpower',\n    positionX: 0,\n    positionY: 0,\n    positionZ: 0,\n    refDistance: 1,\n    rolloffFactor: 1\n};\nexport const createPannerNodeConstructor = (audioNodeConstructor, createAudioParam, createNativePannerNode, createPannerNodeRenderer, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime) => {\n    return class PannerNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativePannerNode = createNativePannerNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const pannerNodeRenderer = (isOffline ? createPannerNodeRenderer() : null);\n            super(context, false, nativePannerNode, pannerNodeRenderer);\n            this._nativePannerNode = nativePannerNode;\n            // Bug #74: Safari does not export the correct values for maxValue and minValue.\n            this._orientationX = createAudioParam(this, isOffline, nativePannerNode.orientationX, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            this._orientationY = createAudioParam(this, isOffline, nativePannerNode.orientationY, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            this._orientationZ = createAudioParam(this, isOffline, nativePannerNode.orientationZ, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            this._positionX = createAudioParam(this, isOffline, nativePannerNode.positionX, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            this._positionY = createAudioParam(this, isOffline, nativePannerNode.positionY, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            this._positionZ = createAudioParam(this, isOffline, nativePannerNode.positionZ, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n        get coneInnerAngle() {\n            return this._nativePannerNode.coneInnerAngle;\n        }\n        set coneInnerAngle(value) {\n            this._nativePannerNode.coneInnerAngle = value;\n        }\n        get coneOuterAngle() {\n            return this._nativePannerNode.coneOuterAngle;\n        }\n        set coneOuterAngle(value) {\n            this._nativePannerNode.coneOuterAngle = value;\n        }\n        get coneOuterGain() {\n            return this._nativePannerNode.coneOuterGain;\n        }\n        set coneOuterGain(value) {\n            this._nativePannerNode.coneOuterGain = value;\n        }\n        get distanceModel() {\n            return this._nativePannerNode.distanceModel;\n        }\n        set distanceModel(value) {\n            this._nativePannerNode.distanceModel = value;\n        }\n        get maxDistance() {\n            return this._nativePannerNode.maxDistance;\n        }\n        set maxDistance(value) {\n            this._nativePannerNode.maxDistance = value;\n        }\n        get orientationX() {\n            return this._orientationX;\n        }\n        get orientationY() {\n            return this._orientationY;\n        }\n        get orientationZ() {\n            return this._orientationZ;\n        }\n        get panningModel() {\n            return this._nativePannerNode.panningModel;\n        }\n        set panningModel(value) {\n            this._nativePannerNode.panningModel = value;\n        }\n        get positionX() {\n            return this._positionX;\n        }\n        get positionY() {\n            return this._positionY;\n        }\n        get positionZ() {\n            return this._positionZ;\n        }\n        get refDistance() {\n            return this._nativePannerNode.refDistance;\n        }\n        set refDistance(value) {\n            this._nativePannerNode.refDistance = value;\n        }\n        get rolloffFactor() {\n            return this._nativePannerNode.rolloffFactor;\n        }\n        set rolloffFactor(value) {\n            this._nativePannerNode.rolloffFactor = value;\n        }\n    };\n};\n//# sourceMappingURL=panner-node-constructor.js.map","const DEFAULT_OPTIONS = {\n    disableNormalization: false\n};\nexport const createPeriodicWaveConstructor = (createNativePeriodicWave, getNativeContext, periodicWaveStore, sanitizePeriodicWaveOptions) => {\n    return class PeriodicWave {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = sanitizePeriodicWaveOptions({ ...DEFAULT_OPTIONS, ...options });\n            const periodicWave = createNativePeriodicWave(nativeContext, mergedOptions);\n            periodicWaveStore.add(periodicWave);\n            // This does violate all good pratices but it is used here to simplify the handling of periodic waves.\n            return periodicWave;\n        }\n        static [Symbol.hasInstance](instance) {\n            return ((instance !== null && typeof instance === 'object' && Object.getPrototypeOf(instance) === PeriodicWave.prototype) ||\n                periodicWaveStore.has(instance));\n        }\n    };\n};\n//# sourceMappingURL=periodic-wave-constructor.js.map","const DEFAULT_OPTIONS = {\n    channelCount: 2,\n    /*\n     * Bug #105: The channelCountMode should be 'clamped-max' according to the spec but is set to 'explicit' to achieve consistent\n     * behavior.\n     */\n    channelCountMode: 'explicit',\n    channelInterpretation: 'speakers',\n    pan: 0\n};\nexport const createStereoPannerNodeConstructor = (audioNodeConstructor, createAudioParam, createNativeStereoPannerNode, createStereoPannerNodeRenderer, getNativeContext, isNativeOfflineAudioContext) => {\n    return class StereoPannerNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeStereoPannerNode = createNativeStereoPannerNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const stereoPannerNodeRenderer = (isOffline ? createStereoPannerNodeRenderer() : null);\n            super(context, false, nativeStereoPannerNode, stereoPannerNodeRenderer);\n            this._pan = createAudioParam(this, isOffline, nativeStereoPannerNode.pan);\n        }\n        get pan() {\n            return this._pan;\n        }\n    };\n};\n//# sourceMappingURL=stereo-panner-node-constructor.js.map","export const createUnknownError = () => new DOMException('', 'UnknownError');\n//# sourceMappingURL=unknown-error.js.map","const DEFAULT_OPTIONS = {\n    channelCount: 2,\n    channelCountMode: 'max',\n    channelInterpretation: 'speakers',\n    curve: null,\n    oversample: 'none'\n};\nexport const createWaveShaperNodeConstructor = (audioNodeConstructor, createInvalidStateError, createNativeWaveShaperNode, createWaveShaperNodeRenderer, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime) => {\n    return class WaveShaperNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const mergedOptions = { ...DEFAULT_OPTIONS, ...options };\n            const nativeWaveShaperNode = createNativeWaveShaperNode(nativeContext, mergedOptions);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const waveShaperNodeRenderer = (isOffline ? createWaveShaperNodeRenderer() : null);\n            // @todo Add a mechanism to only switch a WaveShaperNode to active while it is connected.\n            super(context, true, nativeWaveShaperNode, waveShaperNodeRenderer);\n            this._isCurveNullified = false;\n            this._nativeWaveShaperNode = nativeWaveShaperNode;\n            // @todo Determine a meaningful tail-time instead of just using one second.\n            setAudioNodeTailTime(this, 1);\n        }\n        get curve() {\n            if (this._isCurveNullified) {\n                return null;\n            }\n            return this._nativeWaveShaperNode.curve;\n        }\n        set curve(value) {\n            // Bug #103: Safari does not allow to set the curve to null.\n            if (value === null) {\n                this._isCurveNullified = true;\n                this._nativeWaveShaperNode.curve = new Float32Array([0, 0]);\n            }\n            else {\n                // Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.\n                // Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.\n                if (value.length < 2) {\n                    throw createInvalidStateError();\n                }\n                this._isCurveNullified = false;\n                this._nativeWaveShaperNode.curve = value;\n            }\n        }\n        get oversample() {\n            return this._nativeWaveShaperNode.oversample;\n        }\n        set oversample(value) {\n            this._nativeWaveShaperNode.oversample = value;\n        }\n    };\n};\n//# sourceMappingURL=wave-shaper-node-constructor.js.map","export const getFirstSample = (audioBuffer, buffer, channelNumber) => {\n    // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n    if (audioBuffer.copyFromChannel === undefined) {\n        return audioBuffer.getChannelData(channelNumber)[0];\n    }\n    audioBuffer.copyFromChannel(buffer, channelNumber);\n    return buffer[0];\n};\n//# sourceMappingURL=get-first-sample.js.map","export const isDCCurve = (curve) => {\n    if (curve === null) {\n        return false;\n    }\n    const length = curve.length;\n    if (length % 2 !== 0) {\n        return curve[Math.floor(length / 2)] !== 0;\n    }\n    return curve[length / 2 - 1] + curve[length / 2] !== 0;\n};\n//# sourceMappingURL=is-dc-curve.js.map","export const overwriteAccessors = (object, property, createGetter, createSetter) => {\n    let prototype = object;\n    while (!prototype.hasOwnProperty(property)) {\n        prototype = Object.getPrototypeOf(prototype);\n    }\n    const { get, set } = Object.getOwnPropertyDescriptor(prototype, property);\n    Object.defineProperty(object, property, { get: createGetter(get), set: createSetter(set) });\n};\n//# sourceMappingURL=overwrite-accessors.js.map","export const setValueAtTimeUntilPossible = (audioParam, value, startTime) => {\n    try {\n        audioParam.setValueAtTime(value, startTime);\n    }\n    catch (err) {\n        if (err.code !== 9) {\n            throw err;\n        }\n        setValueAtTimeUntilPossible(audioParam, value, startTime + 1e-7);\n    }\n};\n//# sourceMappingURL=set-value-at-time-until-possible.js.map","export const testAudioScheduledSourceNodeStartMethodNegativeParametersSupport = (nativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createOscillator();\n    try {\n        nativeAudioBufferSourceNode.start(-1);\n    }\n    catch (err) {\n        return err instanceof RangeError;\n    }\n    return false;\n};\n//# sourceMappingURL=test-audio-scheduled-source-node-start-method-negative-parameters-support.js.map","export const testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport = (nativeContext) => {\n    const nativeAudioBuffer = nativeContext.createBuffer(1, 1, 44100);\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n    nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\n    nativeAudioBufferSourceNode.start();\n    nativeAudioBufferSourceNode.stop();\n    try {\n        nativeAudioBufferSourceNode.stop();\n        return true;\n    }\n    catch {\n        return false;\n    }\n};\n//# sourceMappingURL=test-audio-scheduled-source-node-stop-method-consecutive-calls-support.js.map","export const testAudioScheduledSourceNodeStopMethodNegativeParametersSupport = (nativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createOscillator();\n    try {\n        nativeAudioBufferSourceNode.stop(-1);\n    }\n    catch (err) {\n        return err instanceof RangeError;\n    }\n    return false;\n};\n//# sourceMappingURL=test-audio-scheduled-source-node-stop-method-negative-parameters-support.js.map","import { interceptConnections } from './intercept-connections';\nexport const wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls = (nativeAudioScheduledSourceNode, nativeContext) => {\n    const nativeGainNode = nativeContext.createGain();\n    nativeAudioScheduledSourceNode.connect(nativeGainNode);\n    const disconnectGainNode = ((disconnect) => {\n        return () => {\n            // @todo TypeScript cannot infer the overloaded signature with 1 argument yet.\n            disconnect.call(nativeAudioScheduledSourceNode, nativeGainNode);\n            nativeAudioScheduledSourceNode.removeEventListener('ended', disconnectGainNode);\n        };\n    })(nativeAudioScheduledSourceNode.disconnect);\n    nativeAudioScheduledSourceNode.addEventListener('ended', disconnectGainNode);\n    interceptConnections(nativeAudioScheduledSourceNode, nativeGainNode);\n    nativeAudioScheduledSourceNode.stop = ((stop) => {\n        let isStopped = false;\n        return (when = 0) => {\n            if (isStopped) {\n                try {\n                    stop.call(nativeAudioScheduledSourceNode, when);\n                }\n                catch {\n                    nativeGainNode.gain.setValueAtTime(0, when);\n                }\n            }\n            else {\n                stop.call(nativeAudioScheduledSourceNode, when);\n                isStopped = true;\n            }\n        };\n    })(nativeAudioScheduledSourceNode.stop);\n};\n//# sourceMappingURL=wrap-audio-scheduled-source-node-stop-method-consecutive-calls.js.map","export const wrapEventListener = (target, eventListener) => {\n    return (event) => {\n        const descriptor = { value: target };\n        Object.defineProperties(event, {\n            currentTarget: descriptor,\n            target: descriptor\n        });\n        if (typeof eventListener === 'function') {\n            return eventListener.call(target, event);\n        }\n        return eventListener.handleEvent.call(target, event);\n    };\n};\n//# sourceMappingURL=wrap-event-listener.js.map","import { createCancelAndHoldAutomationEvent, createCancelScheduledValuesAutomationEvent, createExponentialRampToValueAutomationEvent, createLinearRampToValueAutomationEvent, createSetTargetAutomationEvent, createSetValueAutomationEvent, createSetValueCurveAutomationEvent } from 'automation-events';\nimport { createAbortError } from './factories/abort-error';\nimport { createAddActiveInputConnectionToAudioNode } from './factories/add-active-input-connection-to-audio-node';\nimport { createAddAudioNodeConnections } from './factories/add-audio-node-connections';\nimport { createAddAudioParamConnections } from './factories/add-audio-param-connections';\nimport { createAddAudioWorkletModule } from './factories/add-audio-worklet-module';\nimport { createAddConnectionToAudioNode } from './factories/add-connection-to-audio-node';\nimport { createAddPassiveInputConnectionToAudioNode } from './factories/add-passive-input-connection-to-audio-node';\nimport { createAddSilentConnection } from './factories/add-silent-connection';\nimport { createAddUnrenderedAudioWorkletNode } from './factories/add-unrendered-audio-worklet-node';\nimport { createAnalyserNodeConstructor } from './factories/analyser-node-constructor';\nimport { createAnalyserNodeRendererFactory } from './factories/analyser-node-renderer-factory';\nimport { createAudioBufferConstructor } from './factories/audio-buffer-constructor';\nimport { createAudioBufferSourceNodeConstructor } from './factories/audio-buffer-source-node-constructor';\nimport { createAudioBufferSourceNodeRendererFactory } from './factories/audio-buffer-source-node-renderer-factory';\nimport { createAudioContextConstructor } from './factories/audio-context-constructor';\nimport { createAudioDestinationNodeConstructor } from './factories/audio-destination-node-constructor';\nimport { createAudioDestinationNodeRenderer } from './factories/audio-destination-node-renderer-factory';\nimport { createAudioListenerFactory } from './factories/audio-listener-factory';\nimport { createAudioNodeConstructor } from './factories/audio-node-constructor';\nimport { createAudioParamFactory } from './factories/audio-param-factory';\nimport { createAudioParamRenderer } from './factories/audio-param-renderer';\nimport { createAudioWorkletNodeConstructor } from './factories/audio-worklet-node-constructor';\nimport { createAudioWorkletNodeRendererFactory } from './factories/audio-worklet-node-renderer-factory';\nimport { createBaseAudioContextConstructor } from './factories/base-audio-context-constructor';\nimport { createBiquadFilterNodeConstructor } from './factories/biquad-filter-node-constructor';\nimport { createBiquadFilterNodeRendererFactory } from './factories/biquad-filter-node-renderer-factory';\nimport { createCacheTestResult } from './factories/cache-test-result';\nimport { createChannelMergerNodeConstructor } from './factories/channel-merger-node-constructor';\nimport { createChannelMergerNodeRendererFactory } from './factories/channel-merger-node-renderer-factory';\nimport { createChannelSplitterNodeConstructor } from './factories/channel-splitter-node-constructor';\nimport { createChannelSplitterNodeRendererFactory } from './factories/channel-splitter-node-renderer-factory';\nimport { createConnectAudioParam } from './factories/connect-audio-param';\nimport { createConnectMultipleOutputs } from './factories/connect-multiple-outputs';\nimport { createConnectedNativeAudioBufferSourceNodeFactory } from './factories/connected-native-audio-buffer-source-node-factory';\nimport { createConstantSourceNodeConstructor } from './factories/constant-source-node-constructor';\nimport { createConstantSourceNodeRendererFactory } from './factories/constant-source-node-renderer-factory';\nimport { createConvertNumberToUnsignedLong } from './factories/convert-number-to-unsigned-long';\nimport { createConvolverNodeConstructor } from './factories/convolver-node-constructor';\nimport { createConvolverNodeRendererFactory } from './factories/convolver-node-renderer-factory';\nimport { createCreateNativeOfflineAudioContext } from './factories/create-native-offline-audio-context';\nimport { createDataCloneError } from './factories/data-clone-error';\nimport { createDecodeAudioData } from './factories/decode-audio-data';\nimport { createDecrementCycleCounter } from './factories/decrement-cycle-counter';\nimport { createDelayNodeConstructor } from './factories/delay-node-constructor';\nimport { createDelayNodeRendererFactory } from './factories/delay-node-renderer-factory';\nimport { createDeleteActiveInputConnectionToAudioNode } from './factories/delete-active-input-connection-to-audio-node';\nimport { createDeleteUnrenderedAudioWorkletNode } from './factories/delete-unrendered-audio-worklet-node';\nimport { createDetectCycles } from './factories/detect-cycles';\nimport { createDisconnectMultipleOutputs } from './factories/disconnect-multiple-outputs';\nimport { createDynamicsCompressorNodeConstructor } from './factories/dynamics-compressor-node-constructor';\nimport { createDynamicsCompressorNodeRendererFactory } from './factories/dynamics-compressor-node-renderer-factory';\nimport { createEncodingError } from './factories/encoding-error';\nimport { createEvaluateSource } from './factories/evaluate-source';\nimport { createEventTargetConstructor } from './factories/event-target-constructor';\nimport { createExposeCurrentFrameAndCurrentTime } from './factories/expose-current-frame-and-current-time';\nimport { createFetchSource } from './factories/fetch-source';\nimport { createGainNodeConstructor } from './factories/gain-node-constructor';\nimport { createGainNodeRendererFactory } from './factories/gain-node-renderer-factory';\nimport { createGetActiveAudioWorkletNodeInputs } from './factories/get-active-audio-worklet-node-inputs';\nimport { createGetAudioNodeRenderer } from './factories/get-audio-node-renderer';\nimport { createGetAudioNodeTailTime } from './factories/get-audio-node-tail-time';\nimport { createGetAudioParamRenderer } from './factories/get-audio-param-renderer';\nimport { createGetBackupOfflineAudioContext } from './factories/get-backup-offline-audio-context';\nimport { createGetNativeContext } from './factories/get-native-context';\nimport { createGetOrCreateBackupOfflineAudioContext } from './factories/get-or-create-backup-offline-audio-context';\nimport { createGetUnrenderedAudioWorkletNodes } from './factories/get-unrendered-audio-worklet-nodes';\nimport { createIIRFilterNodeConstructor } from './factories/iir-filter-node-constructor';\nimport { createIIRFilterNodeRendererFactory } from './factories/iir-filter-node-renderer-factory';\nimport { createIncrementCycleCounterFactory } from './factories/increment-cycle-counter-factory';\nimport { createIndexSizeError } from './factories/index-size-error';\nimport { createInvalidAccessError } from './factories/invalid-access-error';\nimport { createInvalidStateError } from './factories/invalid-state-error';\nimport { createIsAnyAudioContext } from './factories/is-any-audio-context';\nimport { createIsAnyAudioNode } from './factories/is-any-audio-node';\nimport { createIsAnyAudioParam } from './factories/is-any-audio-param';\nimport { createIsAnyOfflineAudioContext } from './factories/is-any-offline-audio-context';\nimport { createIsNativeAudioContext } from './factories/is-native-audio-context';\nimport { createIsNativeAudioNode } from './factories/is-native-audio-node';\nimport { createIsNativeAudioParam } from './factories/is-native-audio-param';\nimport { createIsNativeContext } from './factories/is-native-context';\nimport { createIsNativeOfflineAudioContext } from './factories/is-native-offline-audio-context';\nimport { createIsSecureContext } from './factories/is-secure-context';\nimport { createIsSupportedPromise } from './factories/is-supported-promise';\nimport { createMediaElementAudioSourceNodeConstructor } from './factories/media-element-audio-source-node-constructor';\nimport { createMediaStreamAudioDestinationNodeConstructor } from './factories/media-stream-audio-destination-node-constructor';\nimport { createMediaStreamAudioSourceNodeConstructor } from './factories/media-stream-audio-source-node-constructor';\nimport { createMediaStreamTrackAudioSourceNodeConstructor } from './factories/media-stream-track-audio-source-node-constructor';\nimport { createMinimalAudioContextConstructor } from './factories/minimal-audio-context-constructor';\nimport { createMinimalBaseAudioContextConstructor } from './factories/minimal-base-audio-context-constructor';\nimport { createMinimalOfflineAudioContextConstructor } from './factories/minimal-offline-audio-context-constructor';\nimport { createMonitorConnections } from './factories/monitor-connections';\nimport { createNativeAnalyserNodeFactory } from './factories/native-analyser-node-factory';\nimport { createNativeAudioBufferConstructor } from './factories/native-audio-buffer-constructor';\nimport { createNativeAudioBufferSourceNodeFactory } from './factories/native-audio-buffer-source-node-factory';\nimport { createNativeAudioContextConstructor } from './factories/native-audio-context-constructor';\nimport { createNativeAudioDestinationNodeFactory } from './factories/native-audio-destination-node';\nimport { createNativeAudioWorkletNodeConstructor } from './factories/native-audio-worklet-node-constructor';\nimport { createNativeAudioWorkletNodeFactory } from './factories/native-audio-worklet-node-factory';\nimport { createNativeAudioWorkletNodeFakerFactory } from './factories/native-audio-worklet-node-faker-factory';\nimport { createNativeBiquadFilterNode } from './factories/native-biquad-filter-node';\nimport { createNativeChannelMergerNodeFactory } from './factories/native-channel-merger-node-factory';\nimport { createNativeChannelSplitterNode } from './factories/native-channel-splitter-node';\nimport { createNativeConstantSourceNodeFactory } from './factories/native-constant-source-node-factory';\nimport { createNativeConstantSourceNodeFakerFactory } from './factories/native-constant-source-node-faker-factory';\nimport { createNativeConvolverNodeFactory } from './factories/native-convolver-node-factory';\nimport { createNativeDelayNode } from './factories/native-delay-node';\nimport { createNativeDynamicsCompressorNodeFactory } from './factories/native-dynamics-compressor-node-factory';\nimport { createNativeGainNode } from './factories/native-gain-node';\nimport { createNativeIIRFilterNodeFactory } from './factories/native-iir-filter-node-factory';\nimport { createNativeIIRFilterNodeFakerFactory } from './factories/native-iir-filter-node-faker-factory';\nimport { createNativeMediaElementAudioSourceNode } from './factories/native-media-element-audio-source-node';\nimport { createNativeMediaStreamAudioDestinationNode } from './factories/native-media-stream-audio-destination-node';\nimport { createNativeMediaStreamAudioSourceNode } from './factories/native-media-stream-audio-source-node';\nimport { createNativeMediaStreamTrackAudioSourceNodeFactory } from './factories/native-media-stream-track-audio-source-node-factory';\nimport { createNativeOfflineAudioContextConstructor } from './factories/native-offline-audio-context-constructor';\nimport { createNativeOscillatorNodeFactory } from './factories/native-oscillator-node-factory';\nimport { createNativePannerNodeFactory } from './factories/native-panner-node-factory';\nimport { createNativePannerNodeFakerFactory } from './factories/native-panner-node-faker-factory';\nimport { createNativePeriodicWaveFactory } from './factories/native-periodic-wave-factory';\nimport { createNativeScriptProcessorNode } from './factories/native-script-processor-node';\nimport { createNativeStereoPannerNodeFactory } from './factories/native-stereo-panner-node-factory';\nimport { createNativeStereoPannerNodeFakerFactory } from './factories/native-stereo-panner-node-faker-factory';\nimport { createNativeWaveShaperNodeFactory } from './factories/native-wave-shaper-node-factory';\nimport { createNativeWaveShaperNodeFakerFactory } from './factories/native-wave-shaper-node-faker-factory';\nimport { createNotSupportedError } from './factories/not-supported-error';\nimport { createOfflineAudioContextConstructor } from './factories/offline-audio-context-constructor';\nimport { createOscillatorNodeConstructor } from './factories/oscillator-node-constructor';\nimport { createOscillatorNodeRendererFactory } from './factories/oscillator-node-renderer-factory';\nimport { createPannerNodeConstructor } from './factories/panner-node-constructor';\nimport { createPannerNodeRendererFactory } from './factories/panner-node-renderer-factory';\nimport { createPeriodicWaveConstructor } from './factories/periodic-wave-constructor';\nimport { createRenderAutomation } from './factories/render-automation';\nimport { createRenderInputsOfAudioNode } from './factories/render-inputs-of-audio-node';\nimport { createRenderInputsOfAudioParam } from './factories/render-inputs-of-audio-param';\nimport { createRenderNativeOfflineAudioContext } from './factories/render-native-offline-audio-context';\nimport { createSetActiveAudioWorkletNodeInputs } from './factories/set-active-audio-worklet-node-inputs';\nimport { createSetAudioNodeTailTime } from './factories/set-audio-node-tail-time';\nimport { createStartRendering } from './factories/start-rendering';\nimport { createStereoPannerNodeConstructor } from './factories/stereo-panner-node-constructor';\nimport { createStereoPannerNodeRendererFactory } from './factories/stereo-panner-node-renderer-factory';\nimport { createTestAudioBufferConstructorSupport } from './factories/test-audio-buffer-constructor-support';\nimport { createTestAudioBufferCopyChannelMethodsSubarraySupport } from './factories/test-audio-buffer-copy-channel-methods-subarray-support';\nimport { createTestAudioContextCloseMethodSupport } from './factories/test-audio-context-close-method-support';\nimport { createTestAudioContextDecodeAudioDataMethodTypeErrorSupport } from './factories/test-audio-context-decode-audio-data-method-type-error-support';\nimport { createTestAudioContextOptionsSupport } from './factories/test-audio-context-options-support';\nimport { createTestAudioNodeConnectMethodSupport } from './factories/test-audio-node-connect-method-support';\nimport { createTestAudioWorkletProcessorNoOutputsSupport } from './factories/test-audio-worklet-processor-no-outputs-support';\nimport { createTestAudioWorkletProcessorPostMessageSupport } from './factories/test-audio-worklet-processor-post-message-support';\nimport { createTestChannelMergerNodeChannelCountSupport } from './factories/test-channel-merger-node-channel-count-support';\nimport { createTestConstantSourceNodeAccurateSchedulingSupport } from './factories/test-constant-source-node-accurate-scheduling-support';\nimport { createTestConvolverNodeBufferReassignabilitySupport } from './factories/test-convolver-node-buffer-reassignability-support';\nimport { createTestConvolverNodeChannelCountSupport } from './factories/test-convolver-node-channel-count-support';\nimport { createTestIsSecureContextSupport } from './factories/test-is-secure-context-support';\nimport { createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport } from './factories/test-media-stream-audio-source-node-media-stream-without-audio-track-support';\nimport { createTestOfflineAudioContextCurrentTimeSupport } from './factories/test-offline-audio-context-current-time-support';\nimport { createTestStereoPannerNodeDefaultValueSupport } from './factories/test-stereo-panner-node-default-value-support';\nimport { createUnknownError } from './factories/unknown-error';\nimport { createWaveShaperNodeConstructor } from './factories/wave-shaper-node-constructor';\nimport { createWaveShaperNodeRendererFactory } from './factories/wave-shaper-node-renderer-factory';\nimport { createWindow } from './factories/window';\nimport { createWrapAudioBufferCopyChannelMethods } from './factories/wrap-audio-buffer-copy-channel-methods';\nimport { createWrapAudioBufferCopyChannelMethodsOutOfBounds } from './factories/wrap-audio-buffer-copy-channel-methods-out-of-bounds';\nimport { createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer } from './factories/wrap-audio-buffer-source-node-stop-method-nullified-buffer';\nimport { createWrapChannelMergerNode } from './factories/wrap-channel-merger-node';\nimport { AUDIO_NODE_CONNECTIONS_STORE, AUDIO_NODE_STORE, AUDIO_PARAM_CONNECTIONS_STORE, AUDIO_PARAM_STORE, CONTEXT_STORE, CYCLE_COUNTERS } from './globals';\nimport { connectNativeAudioNodeToNativeAudioNode } from './helpers/connect-native-audio-node-to-native-audio-node';\nimport { disconnectNativeAudioNodeFromNativeAudioNode } from './helpers/disconnect-native-audio-node-from-native-audio-node';\nimport { getAudioNodeConnections } from './helpers/get-audio-node-connections';\nimport { getAudioParamConnections } from './helpers/get-audio-param-connections';\nimport { getEventListenersOfAudioNode } from './helpers/get-event-listeners-of-audio-node';\nimport { getFirstSample } from './helpers/get-first-sample';\nimport { getNativeAudioNode } from './helpers/get-native-audio-node';\nimport { getNativeAudioParam } from './helpers/get-native-audio-param';\nimport { getValueForKey } from './helpers/get-value-for-key';\nimport { insertElementInSet } from './helpers/insert-element-in-set';\nimport { isActiveAudioNode } from './helpers/is-active-audio-node';\nimport { isDCCurve } from './helpers/is-dc-curve';\nimport { isPartOfACycle } from './helpers/is-part-of-a-cycle';\nimport { isPassiveAudioNode } from './helpers/is-passive-audio-node';\nimport { overwriteAccessors } from './helpers/overwrite-accessors';\nimport { pickElementFromSet } from './helpers/pick-element-from-set';\nimport { sanitizeAudioWorkletNodeOptions } from './helpers/sanitize-audio-worklet-node-options';\nimport { sanitizeChannelSplitterOptions } from './helpers/sanitize-channel-splitter-options';\nimport { sanitizePeriodicWaveOptions } from './helpers/sanitize-periodic-wave-options';\nimport { setValueAtTimeUntilPossible } from './helpers/set-value-at-time-until-possible';\nimport { testAudioBufferCopyChannelMethodsOutOfBoundsSupport } from './helpers/test-audio-buffer-copy-channel-methods-out-of-bounds-support';\nimport { testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport } from './helpers/test-audio-buffer-source-node-start-method-consecutive-calls-support';\nimport { testAudioBufferSourceNodeStartMethodOffsetClampingSupport } from './helpers/test-audio-buffer-source-node-start-method-offset-clamping-support';\nimport { testAudioBufferSourceNodeStopMethodNullifiedBufferSupport } from './helpers/test-audio-buffer-source-node-stop-method-nullified-buffer-support';\nimport { testAudioScheduledSourceNodeStartMethodNegativeParametersSupport } from './helpers/test-audio-scheduled-source-node-start-method-negative-parameters-support';\nimport { testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport } from './helpers/test-audio-scheduled-source-node-stop-method-consecutive-calls-support';\nimport { testAudioScheduledSourceNodeStopMethodNegativeParametersSupport } from './helpers/test-audio-scheduled-source-node-stop-method-negative-parameters-support';\nimport { testAudioWorkletNodeOptionsClonability } from './helpers/test-audio-worklet-node-options-clonability';\nimport { testDomExceptionConstructorSupport } from './helpers/test-dom-exception-constructor-support';\nimport { testPromiseSupport } from './helpers/test-promise-support';\nimport { testTransferablesSupport } from './helpers/test-transferables-support';\nimport { wrapAudioBufferSourceNodeStartMethodOffsetClamping } from './helpers/wrap-audio-buffer-source-node-start-method-offset-clamping';\nimport { wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls } from './helpers/wrap-audio-scheduled-source-node-stop-method-consecutive-calls';\nimport { wrapEventListener } from './helpers/wrap-event-listener';\n/*\n * @todo Explicitly referencing the barrel file seems to be necessary when enabling the\n * isolatedModules compiler option.\n */\nexport * from './interfaces/index';\nexport * from './types/index';\nconst addActiveInputConnectionToAudioNode = createAddActiveInputConnectionToAudioNode(insertElementInSet);\nconst addPassiveInputConnectionToAudioNode = createAddPassiveInputConnectionToAudioNode(insertElementInSet);\nconst deleteActiveInputConnectionToAudioNode = createDeleteActiveInputConnectionToAudioNode(pickElementFromSet);\nconst audioNodeTailTimeStore = new WeakMap();\nconst getAudioNodeTailTime = createGetAudioNodeTailTime(audioNodeTailTimeStore);\nconst cacheTestResult = createCacheTestResult(new Map(), new WeakMap());\nconst window = createWindow();\nconst createNativeAnalyserNode = createNativeAnalyserNodeFactory(cacheTestResult, createIndexSizeError);\nconst getAudioNodeRenderer = createGetAudioNodeRenderer(getAudioNodeConnections);\nconst renderInputsOfAudioNode = createRenderInputsOfAudioNode(getAudioNodeConnections, getAudioNodeRenderer, isPartOfACycle);\nconst createAnalyserNodeRenderer = createAnalyserNodeRendererFactory(createNativeAnalyserNode, getNativeAudioNode, renderInputsOfAudioNode);\nconst getNativeContext = createGetNativeContext(CONTEXT_STORE);\nconst nativeOfflineAudioContextConstructor = createNativeOfflineAudioContextConstructor(window);\nconst isNativeOfflineAudioContext = createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor);\nconst audioParamAudioNodeStore = new WeakMap();\nconst eventTargetConstructor = createEventTargetConstructor(wrapEventListener);\nconst nativeAudioContextConstructor = createNativeAudioContextConstructor(window);\nconst isNativeAudioContext = createIsNativeAudioContext(nativeAudioContextConstructor);\nconst isNativeAudioNode = createIsNativeAudioNode(window);\nconst isNativeAudioParam = createIsNativeAudioParam(window);\nconst nativeAudioWorkletNodeConstructor = createNativeAudioWorkletNodeConstructor(window);\nconst audioNodeConstructor = createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE), createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode, addPassiveInputConnectionToAudioNode, connectNativeAudioNodeToNativeAudioNode, deleteActiveInputConnectionToAudioNode, disconnectNativeAudioNodeFromNativeAudioNode, getAudioNodeConnections, getAudioNodeTailTime, getEventListenersOfAudioNode, getNativeAudioNode, insertElementInSet, isActiveAudioNode, isPartOfACycle, isPassiveAudioNode), cacheTestResult, createIncrementCycleCounterFactory(CYCLE_COUNTERS, disconnectNativeAudioNodeFromNativeAudioNode, getAudioNodeConnections, getNativeAudioNode, getNativeAudioParam, isActiveAudioNode), createIndexSizeError, createInvalidAccessError, createNotSupportedError, createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode, CYCLE_COUNTERS, getAudioNodeConnections, getNativeAudioNode, getNativeAudioParam, getNativeContext, isActiveAudioNode, isNativeOfflineAudioContext), createDetectCycles(audioParamAudioNodeStore, getAudioNodeConnections, getValueForKey), eventTargetConstructor, getNativeContext, isNativeAudioContext, isNativeAudioNode, isNativeAudioParam, isNativeOfflineAudioContext, nativeAudioWorkletNodeConstructor);\nconst analyserNodeConstructor = createAnalyserNodeConstructor(audioNodeConstructor, createAnalyserNodeRenderer, createIndexSizeError, createNativeAnalyserNode, getNativeContext, isNativeOfflineAudioContext);\nexport { analyserNodeConstructor as AnalyserNode };\nconst audioBufferStore = new WeakSet();\nconst nativeAudioBufferConstructor = createNativeAudioBufferConstructor(window);\nconst convertNumberToUnsignedLong = createConvertNumberToUnsignedLong(new Uint32Array(1));\nconst wrapAudioBufferCopyChannelMethods = createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong, createIndexSizeError);\nconst wrapAudioBufferCopyChannelMethodsOutOfBounds = createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong);\nconst audioBufferConstructor = createAudioBufferConstructor(audioBufferStore, cacheTestResult, createNotSupportedError, nativeAudioBufferConstructor, nativeOfflineAudioContextConstructor, createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor), wrapAudioBufferCopyChannelMethods, wrapAudioBufferCopyChannelMethodsOutOfBounds);\nexport { audioBufferConstructor as AudioBuffer };\nconst addSilentConnection = createAddSilentConnection(createNativeGainNode);\nconst renderInputsOfAudioParam = createRenderInputsOfAudioParam(getAudioNodeRenderer, getAudioParamConnections, isPartOfACycle);\nconst connectAudioParam = createConnectAudioParam(renderInputsOfAudioParam);\nconst createNativeAudioBufferSourceNode = createNativeAudioBufferSourceNodeFactory(addSilentConnection, cacheTestResult, testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport, testAudioBufferSourceNodeStartMethodOffsetClampingSupport, testAudioBufferSourceNodeStopMethodNullifiedBufferSupport, testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, wrapAudioBufferSourceNodeStartMethodOffsetClamping, createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors), wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls);\nconst renderAutomation = createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections), renderInputsOfAudioParam);\nconst createAudioBufferSourceNodeRenderer = createAudioBufferSourceNodeRendererFactory(connectAudioParam, createNativeAudioBufferSourceNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode);\nconst createAudioParam = createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE), audioParamAudioNodeStore, AUDIO_PARAM_STORE, createAudioParamRenderer, createCancelAndHoldAutomationEvent, createCancelScheduledValuesAutomationEvent, createExponentialRampToValueAutomationEvent, createLinearRampToValueAutomationEvent, createSetTargetAutomationEvent, createSetValueAutomationEvent, createSetValueCurveAutomationEvent, nativeAudioContextConstructor, setValueAtTimeUntilPossible);\nconst audioBufferSourceNodeConstructor = createAudioBufferSourceNodeConstructor(audioNodeConstructor, createAudioBufferSourceNodeRenderer, createAudioParam, createInvalidStateError, createNativeAudioBufferSourceNode, getNativeContext, isNativeOfflineAudioContext, wrapEventListener);\nexport { audioBufferSourceNodeConstructor as AudioBufferSourceNode };\nconst audioDestinationNodeConstructor = createAudioDestinationNodeConstructor(audioNodeConstructor, createAudioDestinationNodeRenderer, createIndexSizeError, createInvalidStateError, createNativeAudioDestinationNodeFactory(createNativeGainNode, overwriteAccessors), getNativeContext, isNativeOfflineAudioContext, renderInputsOfAudioNode);\nconst createBiquadFilterNodeRenderer = createBiquadFilterNodeRendererFactory(connectAudioParam, createNativeBiquadFilterNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode);\nconst setAudioNodeTailTime = createSetAudioNodeTailTime(audioNodeTailTimeStore);\nconst biquadFilterNodeConstructor = createBiquadFilterNodeConstructor(audioNodeConstructor, createAudioParam, createBiquadFilterNodeRenderer, createInvalidAccessError, createNativeBiquadFilterNode, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime);\nconst monitorConnections = createMonitorConnections(insertElementInSet, isNativeAudioNode);\nconst wrapChannelMergerNode = createWrapChannelMergerNode(createInvalidStateError, monitorConnections);\nconst createNativeChannelMergerNode = createNativeChannelMergerNodeFactory(nativeAudioContextConstructor, wrapChannelMergerNode);\nconst createChannelMergerNodeRenderer = createChannelMergerNodeRendererFactory(createNativeChannelMergerNode, getNativeAudioNode, renderInputsOfAudioNode);\nconst channelMergerNodeConstructor = createChannelMergerNodeConstructor(audioNodeConstructor, createChannelMergerNodeRenderer, createNativeChannelMergerNode, getNativeContext, isNativeOfflineAudioContext);\nconst createChannelSplitterNodeRenderer = createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode, getNativeAudioNode, renderInputsOfAudioNode);\nconst channelSplitterNodeConstructor = createChannelSplitterNodeConstructor(audioNodeConstructor, createChannelSplitterNodeRenderer, createNativeChannelSplitterNode, getNativeContext, isNativeOfflineAudioContext, sanitizeChannelSplitterOptions);\nconst createNativeConstantSourceNodeFaker = createNativeConstantSourceNodeFakerFactory(addSilentConnection, createNativeAudioBufferSourceNode, createNativeGainNode, monitorConnections);\nconst createNativeConstantSourceNode = createNativeConstantSourceNodeFactory(addSilentConnection, cacheTestResult, createNativeConstantSourceNodeFaker, testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, testAudioScheduledSourceNodeStopMethodNegativeParametersSupport);\nconst createConstantSourceNodeRenderer = createConstantSourceNodeRendererFactory(connectAudioParam, createNativeConstantSourceNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode);\nconst constantSourceNodeConstructor = createConstantSourceNodeConstructor(audioNodeConstructor, createAudioParam, createConstantSourceNodeRenderer, createNativeConstantSourceNode, getNativeContext, isNativeOfflineAudioContext, wrapEventListener);\nconst createNativeConvolverNode = createNativeConvolverNodeFactory(createNotSupportedError, overwriteAccessors);\nconst createConvolverNodeRenderer = createConvolverNodeRendererFactory(createNativeConvolverNode, getNativeAudioNode, renderInputsOfAudioNode);\nconst convolverNodeConstructor = createConvolverNodeConstructor(audioNodeConstructor, createConvolverNodeRenderer, createNativeConvolverNode, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime);\nconst createDelayNodeRenderer = createDelayNodeRendererFactory(connectAudioParam, createNativeDelayNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode);\nconst delayNodeConstructor = createDelayNodeConstructor(audioNodeConstructor, createAudioParam, createDelayNodeRenderer, createNativeDelayNode, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime);\nconst createNativeDynamicsCompressorNode = createNativeDynamicsCompressorNodeFactory(createNotSupportedError);\nconst createDynamicsCompressorNodeRenderer = createDynamicsCompressorNodeRendererFactory(connectAudioParam, createNativeDynamicsCompressorNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode);\nconst dynamicsCompressorNodeConstructor = createDynamicsCompressorNodeConstructor(audioNodeConstructor, createAudioParam, createDynamicsCompressorNodeRenderer, createNativeDynamicsCompressorNode, createNotSupportedError, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime);\nconst createGainNodeRenderer = createGainNodeRendererFactory(connectAudioParam, createNativeGainNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode);\nconst gainNodeConstructor = createGainNodeConstructor(audioNodeConstructor, createAudioParam, createGainNodeRenderer, createNativeGainNode, getNativeContext, isNativeOfflineAudioContext);\nconst createNativeIIRFilterNodeFaker = createNativeIIRFilterNodeFakerFactory(createInvalidAccessError, createInvalidStateError, createNativeScriptProcessorNode, createNotSupportedError);\nconst renderNativeOfflineAudioContext = createRenderNativeOfflineAudioContext(cacheTestResult, createNativeGainNode, createNativeScriptProcessorNode, createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode, nativeOfflineAudioContextConstructor));\nconst createIIRFilterNodeRenderer = createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode, getNativeAudioNode, nativeOfflineAudioContextConstructor, renderInputsOfAudioNode, renderNativeOfflineAudioContext);\nconst createNativeIIRFilterNode = createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker);\nconst iIRFilterNodeConstructor = createIIRFilterNodeConstructor(audioNodeConstructor, createNativeIIRFilterNode, createIIRFilterNodeRenderer, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime);\nconst createAudioListener = createAudioListenerFactory(createAudioParam, createNativeChannelMergerNode, createNativeConstantSourceNode, createNativeScriptProcessorNode, createNotSupportedError, getFirstSample, isNativeOfflineAudioContext, overwriteAccessors);\nconst unrenderedAudioWorkletNodeStore = new WeakMap();\nconst minimalBaseAudioContextConstructor = createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor, createAudioListener, eventTargetConstructor, isNativeOfflineAudioContext, unrenderedAudioWorkletNodeStore, wrapEventListener);\nconst createNativeOscillatorNode = createNativeOscillatorNodeFactory(addSilentConnection, cacheTestResult, testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls);\nconst createOscillatorNodeRenderer = createOscillatorNodeRendererFactory(connectAudioParam, createNativeOscillatorNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode);\nconst oscillatorNodeConstructor = createOscillatorNodeConstructor(audioNodeConstructor, createAudioParam, createNativeOscillatorNode, createOscillatorNodeRenderer, getNativeContext, isNativeOfflineAudioContext, wrapEventListener);\nconst createConnectedNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode);\nconst createNativeWaveShaperNodeFaker = createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode, createInvalidStateError, createNativeGainNode, isDCCurve, monitorConnections);\nconst createNativeWaveShaperNode = createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode, createInvalidStateError, createNativeWaveShaperNodeFaker, isDCCurve, monitorConnections, nativeAudioContextConstructor, overwriteAccessors);\nconst createNativePannerNodeFaker = createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode, createInvalidStateError, createNativeChannelMergerNode, createNativeGainNode, createNativeScriptProcessorNode, createNativeWaveShaperNode, createNotSupportedError, disconnectNativeAudioNodeFromNativeAudioNode, getFirstSample, monitorConnections);\nconst createNativePannerNode = createNativePannerNodeFactory(createNativePannerNodeFaker);\nconst createPannerNodeRenderer = createPannerNodeRendererFactory(connectAudioParam, createNativeChannelMergerNode, createNativeConstantSourceNode, createNativeGainNode, createNativePannerNode, getNativeAudioNode, nativeOfflineAudioContextConstructor, renderAutomation, renderInputsOfAudioNode, renderNativeOfflineAudioContext);\nconst pannerNodeConstructor = createPannerNodeConstructor(audioNodeConstructor, createAudioParam, createNativePannerNode, createPannerNodeRenderer, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime);\nconst createNativePeriodicWave = createNativePeriodicWaveFactory(createIndexSizeError);\nconst periodicWaveConstructor = createPeriodicWaveConstructor(createNativePeriodicWave, getNativeContext, new WeakSet(), sanitizePeriodicWaveOptions);\nconst nativeStereoPannerNodeFakerFactory = createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode, createNativeChannelSplitterNode, createNativeGainNode, createNativeWaveShaperNode, createNotSupportedError, monitorConnections);\nconst createNativeStereoPannerNode = createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory, createNotSupportedError);\nconst createStereoPannerNodeRenderer = createStereoPannerNodeRendererFactory(connectAudioParam, createNativeStereoPannerNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode);\nconst stereoPannerNodeConstructor = createStereoPannerNodeConstructor(audioNodeConstructor, createAudioParam, createNativeStereoPannerNode, createStereoPannerNodeRenderer, getNativeContext, isNativeOfflineAudioContext);\nconst createWaveShaperNodeRenderer = createWaveShaperNodeRendererFactory(createNativeWaveShaperNode, getNativeAudioNode, renderInputsOfAudioNode);\nconst waveShaperNodeConstructor = createWaveShaperNodeConstructor(audioNodeConstructor, createInvalidStateError, createNativeWaveShaperNode, createWaveShaperNodeRenderer, getNativeContext, isNativeOfflineAudioContext, setAudioNodeTailTime);\nconst isSecureContext = createIsSecureContext(window);\nconst exposeCurrentFrameAndCurrentTime = createExposeCurrentFrameAndCurrentTime(window);\nconst backupOfflineAudioContextStore = new WeakMap();\nconst getOrCreateBackupOfflineAudioContext = createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore, nativeOfflineAudioContextConstructor);\n// The addAudioWorkletModule() function is only available in a SecureContext.\nexport const addAudioWorkletModule = isSecureContext\n    ? createAddAudioWorkletModule(cacheTestResult, createNotSupportedError, createEvaluateSource(window), exposeCurrentFrameAndCurrentTime, createFetchSource(createAbortError), getNativeContext, getOrCreateBackupOfflineAudioContext, isNativeOfflineAudioContext, nativeAudioWorkletNodeConstructor, new WeakMap(), new WeakMap(), createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor), \n    // @todo window is guaranteed to be defined because isSecureContext checks that as well.\n    window)\n    : undefined;\nconst isNativeContext = createIsNativeContext(isNativeAudioContext, isNativeOfflineAudioContext);\nexport const decodeAudioData = createDecodeAudioData(audioBufferStore, cacheTestResult, createDataCloneError, createEncodingError, new WeakSet(), getNativeContext, isNativeContext, testAudioBufferCopyChannelMethodsOutOfBoundsSupport, testPromiseSupport, wrapAudioBufferCopyChannelMethods, wrapAudioBufferCopyChannelMethodsOutOfBounds);\nconst baseAudioContextConstructor = createBaseAudioContextConstructor(addAudioWorkletModule, analyserNodeConstructor, audioBufferConstructor, audioBufferSourceNodeConstructor, biquadFilterNodeConstructor, channelMergerNodeConstructor, channelSplitterNodeConstructor, constantSourceNodeConstructor, convolverNodeConstructor, decodeAudioData, delayNodeConstructor, dynamicsCompressorNodeConstructor, gainNodeConstructor, iIRFilterNodeConstructor, minimalBaseAudioContextConstructor, oscillatorNodeConstructor, pannerNodeConstructor, periodicWaveConstructor, stereoPannerNodeConstructor, waveShaperNodeConstructor);\nconst mediaElementAudioSourceNodeConstructor = createMediaElementAudioSourceNodeConstructor(audioNodeConstructor, createNativeMediaElementAudioSourceNode, getNativeContext, isNativeOfflineAudioContext);\nconst mediaStreamAudioDestinationNodeConstructor = createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor, createNativeMediaStreamAudioDestinationNode, getNativeContext, isNativeOfflineAudioContext);\nconst mediaStreamAudioSourceNodeConstructor = createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor, createNativeMediaStreamAudioSourceNode, getNativeContext, isNativeOfflineAudioContext);\nconst createNativeMediaStreamTrackAudioSourceNode = createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError, isNativeOfflineAudioContext);\nconst mediaStreamTrackAudioSourceNodeConstructor = createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor, createNativeMediaStreamTrackAudioSourceNode, getNativeContext);\nconst audioContextConstructor = createAudioContextConstructor(baseAudioContextConstructor, createInvalidStateError, createNotSupportedError, createUnknownError, mediaElementAudioSourceNodeConstructor, mediaStreamAudioDestinationNodeConstructor, mediaStreamAudioSourceNodeConstructor, mediaStreamTrackAudioSourceNodeConstructor, nativeAudioContextConstructor);\nexport { audioContextConstructor as AudioContext };\nconst getUnrenderedAudioWorkletNodes = createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore);\nconst addUnrenderedAudioWorkletNode = createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes);\nconst connectMultipleOutputs = createConnectMultipleOutputs(createIndexSizeError);\nconst deleteUnrenderedAudioWorkletNode = createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes);\nconst disconnectMultipleOutputs = createDisconnectMultipleOutputs(createIndexSizeError);\nconst activeAudioWorkletNodeInputsStore = new WeakMap();\nconst getActiveAudioWorkletNodeInputs = createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore, getValueForKey);\nconst createNativeAudioWorkletNodeFaker = createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs, createIndexSizeError, createInvalidStateError, createNativeChannelMergerNode, createNativeChannelSplitterNode, createNativeConstantSourceNode, createNativeGainNode, createNativeScriptProcessorNode, createNotSupportedError, disconnectMultipleOutputs, exposeCurrentFrameAndCurrentTime, getActiveAudioWorkletNodeInputs, monitorConnections);\nconst createNativeAudioWorkletNode = createNativeAudioWorkletNodeFactory(createInvalidStateError, createNativeAudioWorkletNodeFaker, createNativeGainNode, createNotSupportedError, monitorConnections);\nconst createAudioWorkletNodeRenderer = createAudioWorkletNodeRendererFactory(connectAudioParam, connectMultipleOutputs, createNativeAudioBufferSourceNode, createNativeChannelMergerNode, createNativeChannelSplitterNode, createNativeConstantSourceNode, createNativeGainNode, deleteUnrenderedAudioWorkletNode, disconnectMultipleOutputs, exposeCurrentFrameAndCurrentTime, getNativeAudioNode, nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor, renderAutomation, renderInputsOfAudioNode, renderNativeOfflineAudioContext);\nconst getBackupOfflineAudioContext = createGetBackupOfflineAudioContext(backupOfflineAudioContextStore);\nconst setActiveAudioWorkletNodeInputs = createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore);\n// The AudioWorkletNode constructor is only available in a SecureContext.\nconst audioWorkletNodeConstructor = isSecureContext\n    ? createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode, audioNodeConstructor, createAudioParam, createAudioWorkletNodeRenderer, createNativeAudioWorkletNode, getAudioNodeConnections, getBackupOfflineAudioContext, getNativeContext, isNativeOfflineAudioContext, nativeAudioWorkletNodeConstructor, sanitizeAudioWorkletNodeOptions, setActiveAudioWorkletNodeInputs, testAudioWorkletNodeOptionsClonability, wrapEventListener)\n    : undefined;\nexport { audioWorkletNodeConstructor as AudioWorkletNode };\nexport { biquadFilterNodeConstructor as BiquadFilterNode };\nexport { channelMergerNodeConstructor as ChannelMergerNode };\nexport { channelSplitterNodeConstructor as ChannelSplitterNode };\nexport { convolverNodeConstructor as ConvolverNode };\nexport { constantSourceNodeConstructor as ConstantSourceNode };\nexport { delayNodeConstructor as DelayNode };\nexport { dynamicsCompressorNodeConstructor as DynamicsCompressorNode };\nexport { gainNodeConstructor as GainNode };\nexport { iIRFilterNodeConstructor as IIRFilterNode };\nexport { mediaElementAudioSourceNodeConstructor as MediaElementAudioSourceNode };\nexport { mediaStreamAudioDestinationNodeConstructor as MediaStreamAudioDestinationNode };\nexport { mediaStreamAudioSourceNodeConstructor as MediaStreamAudioSourceNode };\nexport { mediaStreamTrackAudioSourceNodeConstructor as MediaStreamTrackAudioSourceNode };\nconst minimalAudioContextConstructor = createMinimalAudioContextConstructor(createInvalidStateError, createNotSupportedError, createUnknownError, minimalBaseAudioContextConstructor, nativeAudioContextConstructor);\nexport { minimalAudioContextConstructor as MinimalAudioContext };\nconst createNativeOfflineAudioContext = createCreateNativeOfflineAudioContext(createNotSupportedError, nativeOfflineAudioContextConstructor);\nconst startRendering = createStartRendering(audioBufferStore, cacheTestResult, getAudioNodeRenderer, getUnrenderedAudioWorkletNodes, renderNativeOfflineAudioContext, testAudioBufferCopyChannelMethodsOutOfBoundsSupport, wrapAudioBufferCopyChannelMethods, wrapAudioBufferCopyChannelMethodsOutOfBounds);\nconst minimalOfflineAudioContextConstructor = createMinimalOfflineAudioContextConstructor(cacheTestResult, createInvalidStateError, createNativeOfflineAudioContext, minimalBaseAudioContextConstructor, startRendering);\nexport { minimalOfflineAudioContextConstructor as MinimalOfflineAudioContext };\nconst offlineAudioContextConstructor = createOfflineAudioContextConstructor(baseAudioContextConstructor, cacheTestResult, createInvalidStateError, createNativeOfflineAudioContext, startRendering);\nexport { offlineAudioContextConstructor as OfflineAudioContext };\nexport { oscillatorNodeConstructor as OscillatorNode };\nexport { pannerNodeConstructor as PannerNode };\nexport { periodicWaveConstructor as PeriodicWave };\nexport { stereoPannerNodeConstructor as StereoPannerNode };\nexport { waveShaperNodeConstructor as WaveShaperNode };\nexport const isAnyAudioContext = createIsAnyAudioContext(CONTEXT_STORE, isNativeAudioContext);\nexport const isAnyAudioNode = createIsAnyAudioNode(AUDIO_NODE_STORE, isNativeAudioNode);\nexport const isAnyAudioParam = createIsAnyAudioParam(AUDIO_PARAM_STORE, isNativeAudioParam);\nexport const isAnyOfflineAudioContext = createIsAnyOfflineAudioContext(CONTEXT_STORE, isNativeOfflineAudioContext);\nexport const isSupported = () => createIsSupportedPromise(cacheTestResult, createTestAudioBufferCopyChannelMethodsSubarraySupport(nativeOfflineAudioContextConstructor), createTestAudioContextCloseMethodSupport(nativeAudioContextConstructor), createTestAudioContextDecodeAudioDataMethodTypeErrorSupport(nativeOfflineAudioContextConstructor), createTestAudioContextOptionsSupport(nativeAudioContextConstructor), createTestAudioNodeConnectMethodSupport(nativeOfflineAudioContextConstructor), createTestAudioWorkletProcessorNoOutputsSupport(nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor), createTestChannelMergerNodeChannelCountSupport(nativeOfflineAudioContextConstructor), createTestConstantSourceNodeAccurateSchedulingSupport(nativeOfflineAudioContextConstructor), createTestConvolverNodeBufferReassignabilitySupport(nativeOfflineAudioContextConstructor), createTestConvolverNodeChannelCountSupport(nativeOfflineAudioContextConstructor), testDomExceptionConstructorSupport, createTestIsSecureContextSupport(window), createTestMediaStreamAudioSourceNodeMediaStreamWithoutAudioTrackSupport(nativeAudioContextConstructor), createTestStereoPannerNodeDefaultValueSupport(nativeOfflineAudioContextConstructor), testTransferablesSupport);\n//# sourceMappingURL=module.js.map","export const createAddActiveInputConnectionToAudioNode = (insertElementInSet) => {\n    return (activeInputs, source, [output, input, eventListener], ignoreDuplicates) => {\n        insertElementInSet(activeInputs[input], [source, output, eventListener], (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output, ignoreDuplicates);\n    };\n};\n//# sourceMappingURL=add-active-input-connection-to-audio-node.js.map","export const createAddPassiveInputConnectionToAudioNode = (insertElementInSet) => {\n    return (passiveInputs, input, [source, output, eventListener], ignoreDuplicates) => {\n        const passiveInputConnections = passiveInputs.get(source);\n        if (passiveInputConnections === undefined) {\n            passiveInputs.set(source, new Set([[output, input, eventListener]]));\n        }\n        else {\n            insertElementInSet(passiveInputConnections, [output, input, eventListener], (passiveInputConnection) => passiveInputConnection[0] === output && passiveInputConnection[1] === input, ignoreDuplicates);\n        }\n    };\n};\n//# sourceMappingURL=add-passive-input-connection-to-audio-node.js.map","export const createDeleteActiveInputConnectionToAudioNode = (pickElementFromSet) => {\n    return (activeInputs, source, output, input) => {\n        return pickElementFromSet(activeInputs[input], (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output);\n    };\n};\n//# sourceMappingURL=delete-active-input-connection-to-audio-node.js.map","export const createGetAudioNodeTailTime = (audioNodeTailTimeStore) => {\n    return (audioNode) => { var _a; return (_a = audioNodeTailTimeStore.get(audioNode)) !== null && _a !== void 0 ? _a : 0; };\n};\n//# sourceMappingURL=get-audio-node-tail-time.js.map","export const createCacheTestResult = (ongoingTests, testResults) => {\n    return (tester, test) => {\n        const cachedTestResult = testResults.get(tester);\n        if (cachedTestResult !== undefined) {\n            return cachedTestResult;\n        }\n        const ongoingTest = ongoingTests.get(tester);\n        if (ongoingTest !== undefined) {\n            return ongoingTest;\n        }\n        try {\n            const synchronousTestResult = test();\n            if (synchronousTestResult instanceof Promise) {\n                ongoingTests.set(tester, synchronousTestResult);\n                return synchronousTestResult\n                    .catch(() => false)\n                    .then((finalTestResult) => {\n                    ongoingTests.delete(tester);\n                    testResults.set(tester, finalTestResult);\n                    return finalTestResult;\n                });\n            }\n            testResults.set(tester, synchronousTestResult);\n            return synchronousTestResult;\n        }\n        catch {\n            testResults.set(tester, false);\n            return false;\n        }\n    };\n};\n//# sourceMappingURL=cache-test-result.js.map","export const createWindow = () => (typeof window === 'undefined' ? null : window);\n//# sourceMappingURL=window.js.map","import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { testAnalyserNodeGetFloatTimeDomainDataMethodSupport } from '../helpers/test-analyser-node-get-float-time-domain-data-method-support';\nimport { wrapAnalyserNodeGetFloatTimeDomainDataMethod } from '../helpers/wrap-analyser-node-get-float-time-domain-data-method';\nexport const createNativeAnalyserNodeFactory = (cacheTestResult, createIndexSizeError) => {\n    return (nativeContext, options) => {\n        const nativeAnalyserNode = nativeContext.createAnalyser();\n        // Bug #37: Firefox does not create an AnalyserNode with the default properties.\n        assignNativeAudioNodeOptions(nativeAnalyserNode, options);\n        // Bug #118: Safari does not throw an error if maxDecibels is not more than minDecibels.\n        if (!(options.maxDecibels > options.minDecibels)) {\n            throw createIndexSizeError();\n        }\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'fftSize');\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'maxDecibels');\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'minDecibels');\n        assignNativeAudioNodeOption(nativeAnalyserNode, options, 'smoothingTimeConstant');\n        // Bug #36: Safari does not support getFloatTimeDomainData() yet.\n        if (!cacheTestResult(testAnalyserNodeGetFloatTimeDomainDataMethodSupport, () => testAnalyserNodeGetFloatTimeDomainDataMethodSupport(nativeAnalyserNode))) {\n            wrapAnalyserNodeGetFloatTimeDomainDataMethod(nativeAnalyserNode);\n        }\n        return nativeAnalyserNode;\n    };\n};\n//# sourceMappingURL=native-analyser-node-factory.js.map","export const wrapAnalyserNodeGetFloatTimeDomainDataMethod = (nativeAnalyserNode) => {\n    nativeAnalyserNode.getFloatTimeDomainData = (array) => {\n        const byteTimeDomainData = new Uint8Array(array.length);\n        nativeAnalyserNode.getByteTimeDomainData(byteTimeDomainData);\n        const length = Math.max(byteTimeDomainData.length, nativeAnalyserNode.fftSize);\n        for (let i = 0; i < length; i += 1) {\n            array[i] = (byteTimeDomainData[i] - 128) * 0.0078125;\n        }\n        return array;\n    };\n};\n//# sourceMappingURL=wrap-analyser-node-get-float-time-domain-data-method.js.map","export const createGetAudioNodeRenderer = (getAudioNodeConnections) => {\n    return (audioNode) => {\n        const audioNodeConnections = getAudioNodeConnections(audioNode);\n        if (audioNodeConnections.renderer === null) {\n            throw new Error('Missing the renderer of the given AudioNode in the audio graph.');\n        }\n        return audioNodeConnections.renderer;\n    };\n};\n//# sourceMappingURL=get-audio-node-renderer.js.map","export const createRenderInputsOfAudioNode = (getAudioNodeConnections, getAudioNodeRenderer, isPartOfACycle) => {\n    return async (audioNode, nativeOfflineAudioContext, nativeAudioNode) => {\n        const audioNodeConnections = getAudioNodeConnections(audioNode);\n        await Promise.all(audioNodeConnections.activeInputs\n            .map((connections, input) => Array.from(connections).map(async ([source, output]) => {\n            const audioNodeRenderer = getAudioNodeRenderer(source);\n            const renderedNativeAudioNode = await audioNodeRenderer.render(source, nativeOfflineAudioContext);\n            const destination = audioNode.context.destination;\n            if (!isPartOfACycle(source) && (audioNode !== destination || !isPartOfACycle(audioNode))) {\n                renderedNativeAudioNode.connect(nativeAudioNode, output, input);\n            }\n        }))\n            .reduce((allRenderingPromises, renderingPromises) => [...allRenderingPromises, ...renderingPromises], []));\n    };\n};\n//# sourceMappingURL=render-inputs-of-audio-node.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createAnalyserNodeRendererFactory = (createNativeAnalyserNode, getNativeAudioNode, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeAnalyserNodes = new WeakMap();\n        const createAnalyserNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeAnalyserNode = getNativeAudioNode(proxy);\n            // If the initially used nativeAnalyserNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeAnalyserNodeIsOwnedByContext = isOwnedByContext(nativeAnalyserNode, nativeOfflineAudioContext);\n            if (!nativeAnalyserNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeAnalyserNode.channelCount,\n                    channelCountMode: nativeAnalyserNode.channelCountMode,\n                    channelInterpretation: nativeAnalyserNode.channelInterpretation,\n                    fftSize: nativeAnalyserNode.fftSize,\n                    maxDecibels: nativeAnalyserNode.maxDecibels,\n                    minDecibels: nativeAnalyserNode.minDecibels,\n                    smoothingTimeConstant: nativeAnalyserNode.smoothingTimeConstant\n                };\n                nativeAnalyserNode = createNativeAnalyserNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeAnalyserNodes.set(nativeOfflineAudioContext, nativeAnalyserNode);\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAnalyserNode);\n            return nativeAnalyserNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeAnalyserNode = renderedNativeAnalyserNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeAnalyserNode !== undefined) {\n                    return Promise.resolve(renderedNativeAnalyserNode);\n                }\n                return createAnalyserNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=analyser-node-renderer-factory.js.map","import { createInvalidStateError } from './invalid-state-error';\nexport const createGetNativeContext = (contextStore) => {\n    return (context) => {\n        const nativeContext = contextStore.get(context);\n        if (nativeContext === undefined) {\n            throw createInvalidStateError();\n        }\n        return (nativeContext);\n    };\n};\n//# sourceMappingURL=get-native-context.js.map","export const createNativeOfflineAudioContextConstructor = (window) => {\n    if (window === null) {\n        return null;\n    }\n    if (window.hasOwnProperty('OfflineAudioContext')) {\n        return window.OfflineAudioContext;\n    }\n    return window.hasOwnProperty('webkitOfflineAudioContext') ? window.webkitOfflineAudioContext : null;\n};\n//# sourceMappingURL=native-offline-audio-context-constructor.js.map","export const createIsNativeOfflineAudioContext = (nativeOfflineAudioContextConstructor) => {\n    return (anything) => {\n        return nativeOfflineAudioContextConstructor !== null && anything instanceof nativeOfflineAudioContextConstructor;\n    };\n};\n//# sourceMappingURL=is-native-offline-audio-context.js.map","export const createEventTargetConstructor = (wrapEventListener) => {\n    return class EventTarget {\n        constructor(_nativeEventTarget) {\n            this._nativeEventTarget = _nativeEventTarget;\n            this._listeners = new WeakMap();\n        }\n        addEventListener(type, listener, options) {\n            if (listener !== null) {\n                let wrappedEventListener = this._listeners.get(listener);\n                if (wrappedEventListener === undefined) {\n                    wrappedEventListener = wrapEventListener(this, listener);\n                    if (typeof listener === 'function') {\n                        this._listeners.set(listener, wrappedEventListener);\n                    }\n                }\n                this._nativeEventTarget.addEventListener(type, wrappedEventListener, options);\n            }\n        }\n        dispatchEvent(event) {\n            return this._nativeEventTarget.dispatchEvent(event);\n        }\n        removeEventListener(type, listener, options) {\n            const wrappedEventListener = listener === null ? undefined : this._listeners.get(listener);\n            this._nativeEventTarget.removeEventListener(type, wrappedEventListener === undefined ? null : wrappedEventListener, options);\n        }\n    };\n};\n//# sourceMappingURL=event-target-constructor.js.map","export const createNativeAudioContextConstructor = (window) => {\n    if (window === null) {\n        return null;\n    }\n    if (window.hasOwnProperty('AudioContext')) {\n        return window.AudioContext;\n    }\n    return window.hasOwnProperty('webkitAudioContext') ? window.webkitAudioContext : null;\n};\n//# sourceMappingURL=native-audio-context-constructor.js.map","export const createIsNativeAudioContext = (nativeAudioContextConstructor) => {\n    return (anything) => {\n        return nativeAudioContextConstructor !== null && anything instanceof nativeAudioContextConstructor;\n    };\n};\n//# sourceMappingURL=is-native-audio-context.js.map","export const createIsNativeAudioNode = (window) => {\n    return (anything) => {\n        return window !== null && typeof window.AudioNode === 'function' && anything instanceof window.AudioNode;\n    };\n};\n//# sourceMappingURL=is-native-audio-node.js.map","export const createIsNativeAudioParam = (window) => {\n    return (anything) => {\n        return window !== null && typeof window.AudioParam === 'function' && anything instanceof window.AudioParam;\n    };\n};\n//# sourceMappingURL=is-native-audio-param.js.map","export const createNativeAudioWorkletNodeConstructor = (window) => {\n    if (window === null) {\n        return null;\n    }\n    return window.hasOwnProperty('AudioWorkletNode') ? window.AudioWorkletNode : null;\n};\n//# sourceMappingURL=native-audio-worklet-node-constructor.js.map","import { pickElementFromSet } from './pick-element-from-set';\nexport const deleteActiveInputConnectionToAudioParam = (activeInputs, source, output) => {\n    return pickElementFromSet(activeInputs, (activeInputConnection) => activeInputConnection[0] === source && activeInputConnection[1] === output);\n};\n//# sourceMappingURL=delete-active-input-connection-to-audio-param.js.map","export const createAddAudioNodeConnections = (audioNodeConnectionsStore) => {\n    return (audioNode, audioNodeRenderer, nativeAudioNode) => {\n        const activeInputs = [];\n        for (let i = 0; i < nativeAudioNode.numberOfInputs; i += 1) {\n            activeInputs.push(new Set());\n        }\n        audioNodeConnectionsStore.set(audioNode, {\n            activeInputs,\n            outputs: new Set(),\n            passiveInputs: new WeakMap(),\n            renderer: audioNodeRenderer\n        });\n    };\n};\n//# sourceMappingURL=add-audio-node-connections.js.map","import { deletePassiveInputConnectionToAudioNode } from '../helpers/delete-passive-input-connection-to-audio-node';\nimport { setInternalStateToActive } from '../helpers/set-internal-state-to-active';\nimport { setInternalStateToPassiveWhenNecessary } from '../helpers/set-internal-state-to-passive-when-necessary';\nexport const createAddConnectionToAudioNode = (addActiveInputConnectionToAudioNode, addPassiveInputConnectionToAudioNode, connectNativeAudioNodeToNativeAudioNode, deleteActiveInputConnectionToAudioNode, disconnectNativeAudioNodeFromNativeAudioNode, getAudioNodeConnections, getAudioNodeTailTime, getEventListenersOfAudioNode, getNativeAudioNode, insertElementInSet, isActiveAudioNode, isPartOfACycle, isPassiveAudioNode) => {\n    const tailTimeTimeoutIds = new WeakMap();\n    return (source, destination, output, input, isOffline) => {\n        const { activeInputs, passiveInputs } = getAudioNodeConnections(destination);\n        const { outputs } = getAudioNodeConnections(source);\n        const eventListeners = getEventListenersOfAudioNode(source);\n        const eventListener = (isActive) => {\n            const nativeDestinationAudioNode = getNativeAudioNode(destination);\n            const nativeSourceAudioNode = getNativeAudioNode(source);\n            if (isActive) {\n                const partialConnection = deletePassiveInputConnectionToAudioNode(passiveInputs, source, output, input);\n                addActiveInputConnectionToAudioNode(activeInputs, source, partialConnection, false);\n                if (!isOffline && !isPartOfACycle(source)) {\n                    connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output, input);\n                }\n                if (isPassiveAudioNode(destination)) {\n                    setInternalStateToActive(destination);\n                }\n            }\n            else {\n                const partialConnection = deleteActiveInputConnectionToAudioNode(activeInputs, source, output, input);\n                addPassiveInputConnectionToAudioNode(passiveInputs, input, partialConnection, false);\n                if (!isOffline && !isPartOfACycle(source)) {\n                    disconnectNativeAudioNodeFromNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output, input);\n                }\n                const tailTime = getAudioNodeTailTime(destination);\n                if (tailTime === 0) {\n                    if (isActiveAudioNode(destination)) {\n                        setInternalStateToPassiveWhenNecessary(destination, activeInputs);\n                    }\n                }\n                else {\n                    const tailTimeTimeoutId = tailTimeTimeoutIds.get(destination);\n                    if (tailTimeTimeoutId !== undefined) {\n                        clearTimeout(tailTimeTimeoutId);\n                    }\n                    tailTimeTimeoutIds.set(destination, setTimeout(() => {\n                        if (isActiveAudioNode(destination)) {\n                            setInternalStateToPassiveWhenNecessary(destination, activeInputs);\n                        }\n                    }, tailTime * 1000));\n                }\n            }\n        };\n        if (insertElementInSet(outputs, [destination, output, input], (outputConnection) => outputConnection[0] === destination && outputConnection[1] === output && outputConnection[2] === input, true)) {\n            eventListeners.add(eventListener);\n            if (isActiveAudioNode(source)) {\n                addActiveInputConnectionToAudioNode(activeInputs, source, [output, input, eventListener], true);\n            }\n            else {\n                addPassiveInputConnectionToAudioNode(passiveInputs, input, [source, output, eventListener], true);\n            }\n            return true;\n        }\n        return false;\n    };\n};\n//# sourceMappingURL=add-connection-to-audio-node.js.map","import { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nexport const createIncrementCycleCounterFactory = (cycleCounters, disconnectNativeAudioNodeFromNativeAudioNode, getAudioNodeConnections, getNativeAudioNode, getNativeAudioParam, isActiveAudioNode) => {\n    return (isOffline) => {\n        return (audioNode, count) => {\n            const cycleCounter = cycleCounters.get(audioNode);\n            if (cycleCounter === undefined) {\n                if (!isOffline && isActiveAudioNode(audioNode)) {\n                    const nativeSourceAudioNode = getNativeAudioNode(audioNode);\n                    const { outputs } = getAudioNodeConnections(audioNode);\n                    for (const output of outputs) {\n                        if (isAudioNodeOutputConnection(output)) {\n                            const nativeDestinationAudioNode = getNativeAudioNode(output[0]);\n                            disconnectNativeAudioNodeFromNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output[1], output[2]);\n                        }\n                        else {\n                            const nativeDestinationAudioParam = getNativeAudioParam(output[0]);\n                            nativeSourceAudioNode.disconnect(nativeDestinationAudioParam, output[1]);\n                        }\n                    }\n                }\n                cycleCounters.set(audioNode, count);\n            }\n            else {\n                cycleCounters.set(audioNode, cycleCounter + count);\n            }\n        };\n    };\n};\n//# sourceMappingURL=increment-cycle-counter-factory.js.map","import { isAudioNodeOutputConnection } from '../guards/audio-node-output-connection';\nexport const createDecrementCycleCounter = (connectNativeAudioNodeToNativeAudioNode, cycleCounters, getAudioNodeConnections, getNativeAudioNode, getNativeAudioParam, getNativeContext, isActiveAudioNode, isNativeOfflineAudioContext) => {\n    return (audioNode, count) => {\n        const cycleCounter = cycleCounters.get(audioNode);\n        if (cycleCounter === undefined) {\n            throw new Error('Missing the expected cycle count.');\n        }\n        const nativeContext = getNativeContext(audioNode.context);\n        const isOffline = isNativeOfflineAudioContext(nativeContext);\n        if (cycleCounter === count) {\n            cycleCounters.delete(audioNode);\n            if (!isOffline && isActiveAudioNode(audioNode)) {\n                const nativeSourceAudioNode = getNativeAudioNode(audioNode);\n                const { outputs } = getAudioNodeConnections(audioNode);\n                for (const output of outputs) {\n                    if (isAudioNodeOutputConnection(output)) {\n                        const nativeDestinationAudioNode = getNativeAudioNode(output[0]);\n                        connectNativeAudioNodeToNativeAudioNode(nativeSourceAudioNode, nativeDestinationAudioNode, output[1], output[2]);\n                    }\n                    else {\n                        const nativeDestinationAudioParam = getNativeAudioParam(output[0]);\n                        nativeSourceAudioNode.connect(nativeDestinationAudioParam, output[1]);\n                    }\n                }\n            }\n        }\n        else {\n            cycleCounters.set(audioNode, cycleCounter - count);\n        }\n    };\n};\n//# sourceMappingURL=decrement-cycle-counter.js.map","import { isAudioNode } from '../guards/audio-node';\nimport { isDelayNode } from '../guards/delay-node';\nexport const createDetectCycles = (audioParamAudioNodeStore, getAudioNodeConnections, getValueForKey) => {\n    return function detectCycles(chain, nextLink) {\n        const audioNode = isAudioNode(nextLink) ? nextLink : getValueForKey(audioParamAudioNodeStore, nextLink);\n        if (isDelayNode(audioNode)) {\n            return [];\n        }\n        if (chain[0] === audioNode) {\n            return [chain];\n        }\n        if (chain.includes(audioNode)) {\n            return [];\n        }\n        const { outputs } = getAudioNodeConnections(audioNode);\n        return Array.from(outputs)\n            .map((outputConnection) => detectCycles([...chain, audioNode], outputConnection[0]))\n            .reduce((mergedCycles, nestedCycles) => mergedCycles.concat(nestedCycles), []);\n    };\n};\n//# sourceMappingURL=detect-cycles.js.map","export const isDelayNode = (audioNode) => {\n    return 'delayTime' in audioNode;\n};\n//# sourceMappingURL=delay-node.js.map","export const createNativeAudioBufferConstructor = (window) => {\n    if (window === null) {\n        return null;\n    }\n    if (window.hasOwnProperty('AudioBuffer')) {\n        return window.AudioBuffer;\n    }\n    return null;\n};\n//# sourceMappingURL=native-audio-buffer-constructor.js.map","export const createConvertNumberToUnsignedLong = (unit32Array) => {\n    return (value) => {\n        unit32Array[0] = value;\n        return unit32Array[0];\n    };\n};\n//# sourceMappingURL=convert-number-to-unsigned-long.js.map","export const createWrapAudioBufferCopyChannelMethods = (convertNumberToUnsignedLong, createIndexSizeError) => {\n    return (audioBuffer) => {\n        audioBuffer.copyFromChannel = (destination, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\n            const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n            const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n            if (channelNumber >= audioBuffer.numberOfChannels) {\n                throw createIndexSizeError();\n            }\n            const audioBufferLength = audioBuffer.length;\n            const channelData = audioBuffer.getChannelData(channelNumber);\n            const destinationLength = destination.length;\n            for (let i = bufferOffset < 0 ? -bufferOffset : 0; i + bufferOffset < audioBufferLength && i < destinationLength; i += 1) {\n                destination[i] = channelData[i + bufferOffset];\n            }\n        };\n        audioBuffer.copyToChannel = (source, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\n            const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n            const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n            if (channelNumber >= audioBuffer.numberOfChannels) {\n                throw createIndexSizeError();\n            }\n            const audioBufferLength = audioBuffer.length;\n            const channelData = audioBuffer.getChannelData(channelNumber);\n            const sourceLength = source.length;\n            for (let i = bufferOffset < 0 ? -bufferOffset : 0; i + bufferOffset < audioBufferLength && i < sourceLength; i += 1) {\n                channelData[i + bufferOffset] = source[i];\n            }\n        };\n    };\n};\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods.js.map","export const createWrapAudioBufferCopyChannelMethodsOutOfBounds = (convertNumberToUnsignedLong) => {\n    return (audioBuffer) => {\n        audioBuffer.copyFromChannel = ((copyFromChannel) => {\n            return (destination, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\n                const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n                const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n                if (bufferOffset < audioBuffer.length) {\n                    return copyFromChannel.call(audioBuffer, destination, channelNumber, bufferOffset);\n                }\n            };\n        })(audioBuffer.copyFromChannel);\n        audioBuffer.copyToChannel = ((copyToChannel) => {\n            return (source, channelNumberAsNumber, bufferOffsetAsNumber = 0) => {\n                const bufferOffset = convertNumberToUnsignedLong(bufferOffsetAsNumber);\n                const channelNumber = convertNumberToUnsignedLong(channelNumberAsNumber);\n                if (bufferOffset < audioBuffer.length) {\n                    return copyToChannel.call(audioBuffer, source, channelNumber, bufferOffset);\n                }\n            };\n        })(audioBuffer.copyToChannel);\n    };\n};\n//# sourceMappingURL=wrap-audio-buffer-copy-channel-methods-out-of-bounds.js.map","// Bug #33: Safari exposes an AudioBuffer but it can't be used as a constructor.\nexport const createTestAudioBufferConstructorSupport = (nativeAudioBufferConstructor) => {\n    return () => {\n        if (nativeAudioBufferConstructor === null) {\n            return false;\n        }\n        try {\n            new nativeAudioBufferConstructor({ length: 1, sampleRate: 44100 }); // tslint:disable-line:no-unused-expression\n        }\n        catch {\n            return false;\n        }\n        return true;\n    };\n};\n//# sourceMappingURL=test-audio-buffer-constructor-support.js.map","export const createAddSilentConnection = (createNativeGainNode) => {\n    return (nativeContext, nativeAudioScheduledSourceNode) => {\n        const nativeGainNode = createNativeGainNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n        nativeAudioScheduledSourceNode.connect(nativeGainNode).connect(nativeContext.destination);\n        const disconnect = () => {\n            nativeAudioScheduledSourceNode.removeEventListener('ended', disconnect);\n            nativeAudioScheduledSourceNode.disconnect(nativeGainNode);\n            nativeGainNode.disconnect();\n        };\n        nativeAudioScheduledSourceNode.addEventListener('ended', disconnect);\n    };\n};\n//# sourceMappingURL=add-silent-connection.js.map","export const createRenderInputsOfAudioParam = (getAudioNodeRenderer, getAudioParamConnections, isPartOfACycle) => {\n    return async (audioParam, nativeOfflineAudioContext, nativeAudioParam) => {\n        const audioParamConnections = getAudioParamConnections(audioParam);\n        await Promise.all(Array.from(audioParamConnections.activeInputs).map(async ([source, output]) => {\n            const audioNodeRenderer = getAudioNodeRenderer(source);\n            const renderedNativeAudioNode = await audioNodeRenderer.render(source, nativeOfflineAudioContext);\n            if (!isPartOfACycle(source)) {\n                renderedNativeAudioNode.connect(nativeAudioParam, output);\n            }\n        }));\n    };\n};\n//# sourceMappingURL=render-inputs-of-audio-param.js.map","export const createConnectAudioParam = (renderInputsOfAudioParam) => {\n    return (nativeOfflineAudioContext, audioParam, nativeAudioParam) => {\n        return renderInputsOfAudioParam(audioParam, nativeOfflineAudioContext, nativeAudioParam);\n    };\n};\n//# sourceMappingURL=connect-audio-param.js.map","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioBufferSourceNodeStartMethodConsecutiveCalls } from '../helpers/wrap-audio-buffer-source-node-start-method-consecutive-calls';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nexport const createNativeAudioBufferSourceNodeFactory = (addSilentConnection, cacheTestResult, testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport, testAudioBufferSourceNodeStartMethodOffsetClampingSupport, testAudioBufferSourceNodeStopMethodNullifiedBufferSupport, testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, wrapAudioBufferSourceNodeStartMethodOffsetClampling, wrapAudioBufferSourceNodeStopMethodNullifiedBuffer, wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls) => {\n    return (nativeContext, options) => {\n        const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n        assignNativeAudioNodeOptions(nativeAudioBufferSourceNode, options);\n        assignNativeAudioNodeAudioParamValue(nativeAudioBufferSourceNode, options, 'playbackRate');\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'buffer');\n        // Bug #149: Safari does not yet support the detune AudioParam.\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loop');\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loopEnd');\n        assignNativeAudioNodeOption(nativeAudioBufferSourceNode, options, 'loopStart');\n        // Bug #69: Safari does allow calls to start() of an already scheduled AudioBufferSourceNode.\n        if (!cacheTestResult(testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport, () => testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport(nativeContext))) {\n            wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(nativeAudioBufferSourceNode);\n        }\n        // Bug #154 & #155: Safari does not handle offsets which are equal to or greater than the duration of the buffer.\n        if (!cacheTestResult(testAudioBufferSourceNodeStartMethodOffsetClampingSupport, () => testAudioBufferSourceNodeStartMethodOffsetClampingSupport(nativeContext))) {\n            wrapAudioBufferSourceNodeStartMethodOffsetClampling(nativeAudioBufferSourceNode);\n        }\n        // Bug #162: Safari does throw an error when stop() is called on an AudioBufferSourceNode which has no buffer assigned to it.\n        if (!cacheTestResult(testAudioBufferSourceNodeStopMethodNullifiedBufferSupport, () => testAudioBufferSourceNodeStopMethodNullifiedBufferSupport(nativeContext))) {\n            wrapAudioBufferSourceNodeStopMethodNullifiedBuffer(nativeAudioBufferSourceNode, nativeContext);\n        }\n        // Bug #44: Safari does not throw a RangeError yet.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () => testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeAudioBufferSourceNode);\n        }\n        // Bug #19: Safari does not ignore calls to stop() of an already stopped AudioBufferSourceNode.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, () => testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeAudioBufferSourceNode, nativeContext);\n        }\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () => testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeAudioBufferSourceNode);\n        }\n        // Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.\n        addSilentConnection(nativeContext, nativeAudioBufferSourceNode);\n        return nativeAudioBufferSourceNode;\n    };\n};\n//# sourceMappingURL=native-audio-buffer-source-node-factory.js.map","import { createInvalidStateError } from '../factories/invalid-state-error';\nexport const wrapAudioBufferSourceNodeStartMethodConsecutiveCalls = (nativeAudioBufferSourceNode) => {\n    nativeAudioBufferSourceNode.start = ((start) => {\n        let isScheduled = false;\n        return (when = 0, offset = 0, duration) => {\n            if (isScheduled) {\n                throw createInvalidStateError();\n            }\n            start.call(nativeAudioBufferSourceNode, when, offset, duration);\n            isScheduled = true;\n        };\n    })(nativeAudioBufferSourceNode.start);\n};\n//# sourceMappingURL=wrap-audio-buffer-source-node-start-method-consecutive-calls.js.map","export const wrapAudioBufferSourceNodeStartMethodOffsetClamping = (nativeAudioBufferSourceNode) => {\n    nativeAudioBufferSourceNode.start = ((start) => {\n        return (when = 0, offset = 0, duration) => {\n            const buffer = nativeAudioBufferSourceNode.buffer;\n            // Bug #154: Safari does not clamp the offset if it is equal to or greater than the duration of the buffer.\n            const clampedOffset = buffer === null ? offset : Math.min(buffer.duration, offset);\n            // Bug #155: Safari does not handle the offset correctly if it would cause the buffer to be not be played at all.\n            if (buffer !== null && clampedOffset > buffer.duration - 0.5 / nativeAudioBufferSourceNode.context.sampleRate) {\n                start.call(nativeAudioBufferSourceNode, when, 0, 0);\n            }\n            else {\n                start.call(nativeAudioBufferSourceNode, when, clampedOffset, duration);\n            }\n        };\n    })(nativeAudioBufferSourceNode.start);\n};\n//# sourceMappingURL=wrap-audio-buffer-source-node-start-method-offset-clamping.js.map","export const testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport = (nativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n    nativeAudioBufferSourceNode.start();\n    try {\n        nativeAudioBufferSourceNode.start();\n    }\n    catch {\n        return true;\n    }\n    return false;\n};\n//# sourceMappingURL=test-audio-buffer-source-node-start-method-consecutive-calls-support.js.map","export const testAudioBufferSourceNodeStartMethodOffsetClampingSupport = (nativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n    const nativeAudioBuffer = nativeContext.createBuffer(1, 1, 44100);\n    nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\n    try {\n        nativeAudioBufferSourceNode.start(0, 1);\n    }\n    catch {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=test-audio-buffer-source-node-start-method-offset-clamping-support.js.map","export const testAudioBufferSourceNodeStopMethodNullifiedBufferSupport = (nativeContext) => {\n    const nativeAudioBufferSourceNode = nativeContext.createBufferSource();\n    nativeAudioBufferSourceNode.start();\n    try {\n        nativeAudioBufferSourceNode.stop();\n    }\n    catch {\n        return false;\n    }\n    return true;\n};\n//# sourceMappingURL=test-audio-buffer-source-node-stop-method-nullified-buffer-support.js.map","export const createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer = (overwriteAccessors) => {\n    return (nativeAudioBufferSourceNode, nativeContext) => {\n        const nullifiedBuffer = nativeContext.createBuffer(1, 1, 44100);\n        if (nativeAudioBufferSourceNode.buffer === null) {\n            nativeAudioBufferSourceNode.buffer = nullifiedBuffer;\n        }\n        overwriteAccessors(nativeAudioBufferSourceNode, 'buffer', (get) => () => {\n            const value = get.call(nativeAudioBufferSourceNode);\n            return value === nullifiedBuffer ? null : value;\n        }, (set) => (value) => {\n            return set.call(nativeAudioBufferSourceNode, value === null ? nullifiedBuffer : value);\n        });\n    };\n};\n//# sourceMappingURL=wrap-audio-buffer-source-node-stop-method-nullified-buffer.js.map","export const createRenderAutomation = (getAudioParamRenderer, renderInputsOfAudioParam) => {\n    return (nativeOfflineAudioContext, audioParam, nativeAudioParam) => {\n        const audioParamRenderer = getAudioParamRenderer(audioParam);\n        audioParamRenderer.replay(nativeAudioParam);\n        return renderInputsOfAudioParam(audioParam, nativeOfflineAudioContext, nativeAudioParam);\n    };\n};\n//# sourceMappingURL=render-automation.js.map","export const createGetAudioParamRenderer = (getAudioParamConnections) => {\n    return (audioParam) => {\n        const audioParamConnections = getAudioParamConnections(audioParam);\n        if (audioParamConnections.renderer === null) {\n            throw new Error('Missing the renderer of the given AudioParam in the audio graph.');\n        }\n        return audioParamConnections.renderer;\n    };\n};\n//# sourceMappingURL=get-audio-param-renderer.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createAudioBufferSourceNodeRendererFactory = (connectAudioParam, createNativeAudioBufferSourceNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeAudioBufferSourceNodes = new WeakMap();\n        let start = null;\n        let stop = null;\n        const createAudioBufferSourceNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeAudioBufferSourceNode = getNativeAudioNode(proxy);\n            /*\n             * If the initially used nativeAudioBufferSourceNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeAudioBufferSourceNodeIsOwnedByContext = isOwnedByContext(nativeAudioBufferSourceNode, nativeOfflineAudioContext);\n            if (!nativeAudioBufferSourceNodeIsOwnedByContext) {\n                const options = {\n                    buffer: nativeAudioBufferSourceNode.buffer,\n                    channelCount: nativeAudioBufferSourceNode.channelCount,\n                    channelCountMode: nativeAudioBufferSourceNode.channelCountMode,\n                    channelInterpretation: nativeAudioBufferSourceNode.channelInterpretation,\n                    // Bug #149: Safari does not yet support the detune AudioParam.\n                    loop: nativeAudioBufferSourceNode.loop,\n                    loopEnd: nativeAudioBufferSourceNode.loopEnd,\n                    loopStart: nativeAudioBufferSourceNode.loopStart,\n                    playbackRate: nativeAudioBufferSourceNode.playbackRate.value\n                };\n                nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, options);\n                if (start !== null) {\n                    nativeAudioBufferSourceNode.start(...start);\n                }\n                if (stop !== null) {\n                    nativeAudioBufferSourceNode.stop(stop);\n                }\n            }\n            renderedNativeAudioBufferSourceNodes.set(nativeOfflineAudioContext, nativeAudioBufferSourceNode);\n            if (!nativeAudioBufferSourceNodeIsOwnedByContext) {\n                // Bug #149: Safari does not yet support the detune AudioParam.\n                await renderAutomation(nativeOfflineAudioContext, proxy.playbackRate, nativeAudioBufferSourceNode.playbackRate);\n            }\n            else {\n                // Bug #149: Safari does not yet support the detune AudioParam.\n                await connectAudioParam(nativeOfflineAudioContext, proxy.playbackRate, nativeAudioBufferSourceNode.playbackRate);\n            }\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioBufferSourceNode);\n            return nativeAudioBufferSourceNode;\n        };\n        return {\n            set start(value) {\n                start = value;\n            },\n            set stop(value) {\n                stop = value;\n            },\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeAudioBufferSourceNode = renderedNativeAudioBufferSourceNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeAudioBufferSourceNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioBufferSourceNode);\n                }\n                return createAudioBufferSourceNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=audio-buffer-source-node-renderer-factory.js.map","import { AutomationEventList } from 'automation-events';\nexport const createAudioParamFactory = (addAudioParamConnections, audioParamAudioNodeStore, audioParamStore, createAudioParamRenderer, createCancelAndHoldAutomationEvent, createCancelScheduledValuesAutomationEvent, createExponentialRampToValueAutomationEvent, createLinearRampToValueAutomationEvent, createSetTargetAutomationEvent, createSetValueAutomationEvent, createSetValueCurveAutomationEvent, nativeAudioContextConstructor, setValueAtTimeUntilPossible) => {\n    return (audioNode, isAudioParamOfOfflineAudioContext, nativeAudioParam, maxValue = null, minValue = null) => {\n        // Bug #196 Only Safari sets the defaultValue to the initial value.\n        const defaultValue = nativeAudioParam.value;\n        const automationEventList = new AutomationEventList(defaultValue);\n        const audioParamRenderer = isAudioParamOfOfflineAudioContext ? createAudioParamRenderer(automationEventList) : null;\n        const audioParam = {\n            get defaultValue() {\n                return defaultValue;\n            },\n            get maxValue() {\n                return maxValue === null ? nativeAudioParam.maxValue : maxValue;\n            },\n            get minValue() {\n                return minValue === null ? nativeAudioParam.minValue : minValue;\n            },\n            get value() {\n                return nativeAudioParam.value;\n            },\n            set value(value) {\n                nativeAudioParam.value = value;\n                // Bug #98: Firefox & Safari do not yet treat the value setter like a call to setValueAtTime().\n                audioParam.setValueAtTime(value, audioNode.context.currentTime);\n            },\n            cancelAndHoldAtTime(cancelTime) {\n                // Bug #28: Firefox & Safari do not yet implement cancelAndHoldAtTime().\n                if (typeof nativeAudioParam.cancelAndHoldAtTime === 'function') {\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n                    automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime));\n                    nativeAudioParam.cancelAndHoldAtTime(cancelTime);\n                }\n                else {\n                    const previousLastEvent = Array.from(automationEventList).pop();\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n                    automationEventList.add(createCancelAndHoldAutomationEvent(cancelTime));\n                    const currentLastEvent = Array.from(automationEventList).pop();\n                    nativeAudioParam.cancelScheduledValues(cancelTime);\n                    if (previousLastEvent !== currentLastEvent && currentLastEvent !== undefined) {\n                        if (currentLastEvent.type === 'exponentialRampToValue') {\n                            nativeAudioParam.exponentialRampToValueAtTime(currentLastEvent.value, currentLastEvent.endTime);\n                        }\n                        else if (currentLastEvent.type === 'linearRampToValue') {\n                            nativeAudioParam.linearRampToValueAtTime(currentLastEvent.value, currentLastEvent.endTime);\n                        }\n                        else if (currentLastEvent.type === 'setValue') {\n                            nativeAudioParam.setValueAtTime(currentLastEvent.value, currentLastEvent.startTime);\n                        }\n                        else if (currentLastEvent.type === 'setValueCurve') {\n                            nativeAudioParam.setValueCurveAtTime(currentLastEvent.values, currentLastEvent.startTime, currentLastEvent.duration);\n                        }\n                    }\n                }\n                return audioParam;\n            },\n            cancelScheduledValues(cancelTime) {\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(audioNode.context.currentTime);\n                }\n                automationEventList.add(createCancelScheduledValuesAutomationEvent(cancelTime));\n                nativeAudioParam.cancelScheduledValues(cancelTime);\n                return audioParam;\n            },\n            exponentialRampToValueAtTime(value, endTime) {\n                // Bug #45: Safari does not throw an error yet.\n                if (value === 0) {\n                    throw new RangeError();\n                }\n                // Bug #187: Safari does not throw an error yet.\n                if (!Number.isFinite(endTime) || endTime < 0) {\n                    throw new RangeError();\n                }\n                const currentTime = audioNode.context.currentTime;\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(currentTime);\n                }\n                // Bug #194: Firefox does not implicitly call setValueAtTime() if there is no previous event.\n                if (Array.from(automationEventList).length === 0) {\n                    automationEventList.add(createSetValueAutomationEvent(defaultValue, currentTime));\n                    nativeAudioParam.setValueAtTime(defaultValue, currentTime);\n                }\n                automationEventList.add(createExponentialRampToValueAutomationEvent(value, endTime));\n                nativeAudioParam.exponentialRampToValueAtTime(value, endTime);\n                return audioParam;\n            },\n            linearRampToValueAtTime(value, endTime) {\n                const currentTime = audioNode.context.currentTime;\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(currentTime);\n                }\n                // Bug #195: Firefox does not implicitly call setValueAtTime() if there is no previous event.\n                if (Array.from(automationEventList).length === 0) {\n                    automationEventList.add(createSetValueAutomationEvent(defaultValue, currentTime));\n                    nativeAudioParam.setValueAtTime(defaultValue, currentTime);\n                }\n                automationEventList.add(createLinearRampToValueAutomationEvent(value, endTime));\n                nativeAudioParam.linearRampToValueAtTime(value, endTime);\n                return audioParam;\n            },\n            setTargetAtTime(target, startTime, timeConstant) {\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(audioNode.context.currentTime);\n                }\n                automationEventList.add(createSetTargetAutomationEvent(target, startTime, timeConstant));\n                nativeAudioParam.setTargetAtTime(target, startTime, timeConstant);\n                return audioParam;\n            },\n            setValueAtTime(value, startTime) {\n                if (audioParamRenderer === null) {\n                    automationEventList.flush(audioNode.context.currentTime);\n                }\n                automationEventList.add(createSetValueAutomationEvent(value, startTime));\n                nativeAudioParam.setValueAtTime(value, startTime);\n                return audioParam;\n            },\n            setValueCurveAtTime(values, startTime, duration) {\n                // Bug 183: Safari only accepts a Float32Array.\n                const convertedValues = values instanceof Float32Array ? values : new Float32Array(values);\n                /*\n                 * Bug #152: Safari does not correctly interpolate the values of the curve.\n                 * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the\n                 * existence of the webkitAudioContext is used as a workaround here.\n                 */\n                if (nativeAudioContextConstructor !== null && nativeAudioContextConstructor.name === 'webkitAudioContext') {\n                    const endTime = startTime + duration;\n                    const sampleRate = audioNode.context.sampleRate;\n                    const firstSample = Math.ceil(startTime * sampleRate);\n                    const lastSample = Math.floor(endTime * sampleRate);\n                    const numberOfInterpolatedValues = lastSample - firstSample;\n                    const interpolatedValues = new Float32Array(numberOfInterpolatedValues);\n                    for (let i = 0; i < numberOfInterpolatedValues; i += 1) {\n                        const theoreticIndex = ((convertedValues.length - 1) / duration) * ((firstSample + i) / sampleRate - startTime);\n                        const lowerIndex = Math.floor(theoreticIndex);\n                        const upperIndex = Math.ceil(theoreticIndex);\n                        interpolatedValues[i] =\n                            lowerIndex === upperIndex\n                                ? convertedValues[lowerIndex]\n                                : (1 - (theoreticIndex - lowerIndex)) * convertedValues[lowerIndex] +\n                                    (1 - (upperIndex - theoreticIndex)) * convertedValues[upperIndex];\n                    }\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n                    automationEventList.add(createSetValueCurveAutomationEvent(interpolatedValues, startTime, duration));\n                    nativeAudioParam.setValueCurveAtTime(interpolatedValues, startTime, duration);\n                    const timeOfLastSample = lastSample / sampleRate;\n                    if (timeOfLastSample < endTime) {\n                        setValueAtTimeUntilPossible(audioParam, interpolatedValues[interpolatedValues.length - 1], timeOfLastSample);\n                    }\n                    setValueAtTimeUntilPossible(audioParam, convertedValues[convertedValues.length - 1], endTime);\n                }\n                else {\n                    if (audioParamRenderer === null) {\n                        automationEventList.flush(audioNode.context.currentTime);\n                    }\n                    automationEventList.add(createSetValueCurveAutomationEvent(convertedValues, startTime, duration));\n                    nativeAudioParam.setValueCurveAtTime(convertedValues, startTime, duration);\n                }\n                return audioParam;\n            }\n        };\n        audioParamStore.set(audioParam, nativeAudioParam);\n        audioParamAudioNodeStore.set(audioParam, audioNode);\n        addAudioParamConnections(audioParam, audioParamRenderer);\n        return audioParam;\n    };\n};\n//# sourceMappingURL=audio-param-factory.js.map","export const createAudioParamRenderer = (automationEventList) => {\n    return {\n        replay(audioParam) {\n            for (const automationEvent of automationEventList) {\n                if (automationEvent.type === 'exponentialRampToValue') {\n                    const { endTime, value } = automationEvent;\n                    audioParam.exponentialRampToValueAtTime(value, endTime);\n                }\n                else if (automationEvent.type === 'linearRampToValue') {\n                    const { endTime, value } = automationEvent;\n                    audioParam.linearRampToValueAtTime(value, endTime);\n                }\n                else if (automationEvent.type === 'setTarget') {\n                    const { startTime, target, timeConstant } = automationEvent;\n                    audioParam.setTargetAtTime(target, startTime, timeConstant);\n                }\n                else if (automationEvent.type === 'setValue') {\n                    const { startTime, value } = automationEvent;\n                    audioParam.setValueAtTime(value, startTime);\n                }\n                else if (automationEvent.type === 'setValueCurve') {\n                    const { duration, startTime, values } = automationEvent;\n                    audioParam.setValueCurveAtTime(values, startTime, duration);\n                }\n                else {\n                    throw new Error(\"Can't apply an unknown automation.\");\n                }\n            }\n        }\n    };\n};\n//# sourceMappingURL=audio-param-renderer.js.map","export const createAddAudioParamConnections = (audioParamConnectionsStore) => {\n    return (audioParam, audioParamRenderer) => {\n        audioParamConnectionsStore.set(audioParam, { activeInputs: new Set(), passiveInputs: new WeakMap(), renderer: audioParamRenderer });\n    };\n};\n//# sourceMappingURL=add-audio-param-connections.js.map","export const createAudioDestinationNodeConstructor = (audioNodeConstructor, createAudioDestinationNodeRenderer, createIndexSizeError, createInvalidStateError, createNativeAudioDestinationNode, getNativeContext, isNativeOfflineAudioContext, renderInputsOfAudioNode) => {\n    return class AudioDestinationNode extends audioNodeConstructor {\n        constructor(context, channelCount) {\n            const nativeContext = getNativeContext(context);\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            const nativeAudioDestinationNode = createNativeAudioDestinationNode(nativeContext, channelCount, isOffline);\n            const audioDestinationNodeRenderer = ((isOffline ? createAudioDestinationNodeRenderer(renderInputsOfAudioNode) : null));\n            super(context, false, nativeAudioDestinationNode, audioDestinationNodeRenderer);\n            this._isNodeOfNativeOfflineAudioContext = isOffline;\n            this._nativeAudioDestinationNode = nativeAudioDestinationNode;\n        }\n        get channelCount() {\n            return this._nativeAudioDestinationNode.channelCount;\n        }\n        set channelCount(value) {\n            // Bug #52: Chrome, Edge & Safari do not throw an exception at all.\n            // Bug #54: Firefox does throw an IndexSizeError.\n            if (this._isNodeOfNativeOfflineAudioContext) {\n                throw createInvalidStateError();\n            }\n            // Bug #47: The AudioDestinationNode in Safari does not initialize the maxChannelCount property correctly.\n            if (value > this._nativeAudioDestinationNode.maxChannelCount) {\n                throw createIndexSizeError();\n            }\n            this._nativeAudioDestinationNode.channelCount = value;\n        }\n        get channelCountMode() {\n            return this._nativeAudioDestinationNode.channelCountMode;\n        }\n        set channelCountMode(value) {\n            // Bug #53: No browser does throw an exception yet.\n            if (this._isNodeOfNativeOfflineAudioContext) {\n                throw createInvalidStateError();\n            }\n            this._nativeAudioDestinationNode.channelCountMode = value;\n        }\n        get maxChannelCount() {\n            return this._nativeAudioDestinationNode.maxChannelCount;\n        }\n    };\n};\n//# sourceMappingURL=audio-destination-node-constructor.js.map","export const createAudioDestinationNodeRenderer = (renderInputsOfAudioNode) => {\n    const renderedNativeAudioDestinationNodes = new WeakMap();\n    const createAudioDestinationNode = async (proxy, nativeOfflineAudioContext) => {\n        const nativeAudioDestinationNode = nativeOfflineAudioContext.destination;\n        renderedNativeAudioDestinationNodes.set(nativeOfflineAudioContext, nativeAudioDestinationNode);\n        await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioDestinationNode);\n        return nativeAudioDestinationNode;\n    };\n    return {\n        render(proxy, nativeOfflineAudioContext) {\n            const renderedNativeAudioDestinationNode = renderedNativeAudioDestinationNodes.get(nativeOfflineAudioContext);\n            if (renderedNativeAudioDestinationNode !== undefined) {\n                return Promise.resolve(renderedNativeAudioDestinationNode);\n            }\n            return createAudioDestinationNode(proxy, nativeOfflineAudioContext);\n        }\n    };\n};\n//# sourceMappingURL=audio-destination-node-renderer-factory.js.map","export const createNativeAudioDestinationNodeFactory = (createNativeGainNode, overwriteAccessors) => {\n    return (nativeContext, channelCount, isNodeOfNativeOfflineAudioContext) => {\n        const nativeAudioDestinationNode = nativeContext.destination;\n        // Bug #132: Safari does not have the correct channelCount.\n        if (nativeAudioDestinationNode.channelCount !== channelCount) {\n            try {\n                nativeAudioDestinationNode.channelCount = channelCount;\n            }\n            catch {\n                // Bug #169: Safari throws an error on each attempt to change the channelCount.\n            }\n        }\n        // Bug #83: Safari does not have the correct channelCountMode.\n        if (isNodeOfNativeOfflineAudioContext && nativeAudioDestinationNode.channelCountMode !== 'explicit') {\n            nativeAudioDestinationNode.channelCountMode = 'explicit';\n        }\n        // Bug #47: The AudioDestinationNode in Safari does not initialize the maxChannelCount property correctly.\n        if (nativeAudioDestinationNode.maxChannelCount === 0) {\n            Object.defineProperty(nativeAudioDestinationNode, 'maxChannelCount', {\n                value: channelCount\n            });\n        }\n        // Bug #168: No browser does yet have an AudioDestinationNode with an output.\n        const gainNode = createNativeGainNode(nativeContext, {\n            channelCount,\n            channelCountMode: nativeAudioDestinationNode.channelCountMode,\n            channelInterpretation: nativeAudioDestinationNode.channelInterpretation,\n            gain: 1\n        });\n        overwriteAccessors(gainNode, 'channelCount', (get) => () => get.call(gainNode), (set) => (value) => {\n            set.call(gainNode, value);\n            try {\n                nativeAudioDestinationNode.channelCount = value;\n            }\n            catch (err) {\n                // Bug #169: Safari throws an error on each attempt to change the channelCount.\n                if (value > nativeAudioDestinationNode.maxChannelCount) {\n                    throw err;\n                }\n            }\n        });\n        overwriteAccessors(gainNode, 'channelCountMode', (get) => () => get.call(gainNode), (set) => (value) => {\n            set.call(gainNode, value);\n            nativeAudioDestinationNode.channelCountMode = value;\n        });\n        overwriteAccessors(gainNode, 'channelInterpretation', (get) => () => get.call(gainNode), (set) => (value) => {\n            set.call(gainNode, value);\n            nativeAudioDestinationNode.channelInterpretation = value;\n        });\n        Object.defineProperty(gainNode, 'maxChannelCount', {\n            get: () => nativeAudioDestinationNode.maxChannelCount\n        });\n        // @todo This should be disconnected when the context is closed.\n        gainNode.connect(nativeAudioDestinationNode);\n        return gainNode;\n    };\n};\n//# sourceMappingURL=native-audio-destination-node.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createBiquadFilterNodeRendererFactory = (connectAudioParam, createNativeBiquadFilterNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeBiquadFilterNodes = new WeakMap();\n        const createBiquadFilterNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeBiquadFilterNode = getNativeAudioNode(proxy);\n            /*\n             * If the initially used nativeBiquadFilterNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeBiquadFilterNodeIsOwnedByContext = isOwnedByContext(nativeBiquadFilterNode, nativeOfflineAudioContext);\n            if (!nativeBiquadFilterNodeIsOwnedByContext) {\n                const options = {\n                    Q: nativeBiquadFilterNode.Q.value,\n                    channelCount: nativeBiquadFilterNode.channelCount,\n                    channelCountMode: nativeBiquadFilterNode.channelCountMode,\n                    channelInterpretation: nativeBiquadFilterNode.channelInterpretation,\n                    detune: nativeBiquadFilterNode.detune.value,\n                    frequency: nativeBiquadFilterNode.frequency.value,\n                    gain: nativeBiquadFilterNode.gain.value,\n                    type: nativeBiquadFilterNode.type\n                };\n                nativeBiquadFilterNode = createNativeBiquadFilterNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeBiquadFilterNodes.set(nativeOfflineAudioContext, nativeBiquadFilterNode);\n            if (!nativeBiquadFilterNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.Q, nativeBiquadFilterNode.Q);\n                await renderAutomation(nativeOfflineAudioContext, proxy.detune, nativeBiquadFilterNode.detune);\n                await renderAutomation(nativeOfflineAudioContext, proxy.frequency, nativeBiquadFilterNode.frequency);\n                await renderAutomation(nativeOfflineAudioContext, proxy.gain, nativeBiquadFilterNode.gain);\n            }\n            else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.Q, nativeBiquadFilterNode.Q);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.detune, nativeBiquadFilterNode.detune);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.frequency, nativeBiquadFilterNode.frequency);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.gain, nativeBiquadFilterNode.gain);\n            }\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeBiquadFilterNode);\n            return nativeBiquadFilterNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeBiquadFilterNode = renderedNativeBiquadFilterNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeBiquadFilterNode !== undefined) {\n                    return Promise.resolve(renderedNativeBiquadFilterNode);\n                }\n                return createBiquadFilterNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=biquad-filter-node-renderer-factory.js.map","export const createSetAudioNodeTailTime = (audioNodeTailTimeStore) => {\n    return (audioNode, tailTime) => audioNodeTailTimeStore.set(audioNode, tailTime);\n};\n//# sourceMappingURL=set-audio-node-tail-time.js.map","export const createMonitorConnections = (insertElementInSet, isNativeAudioNode) => {\n    return (nativeAudioNode, whenConnected, whenDisconnected) => {\n        const connections = new Set();\n        nativeAudioNode.connect = ((connect) => {\n            // tslint:disable-next-line:invalid-void no-inferrable-types\n            return (destination, output = 0, input = 0) => {\n                const wasDisconnected = connections.size === 0;\n                if (isNativeAudioNode(destination)) {\n                    // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\n                    connect.call(nativeAudioNode, destination, output, input);\n                    insertElementInSet(connections, [destination, output, input], (connection) => connection[0] === destination && connection[1] === output && connection[2] === input, true);\n                    if (wasDisconnected) {\n                        whenConnected();\n                    }\n                    return destination;\n                }\n                connect.call(nativeAudioNode, destination, output);\n                insertElementInSet(connections, [destination, output], (connection) => connection[0] === destination && connection[1] === output, true);\n                if (wasDisconnected) {\n                    whenConnected();\n                }\n                return;\n            };\n        })(nativeAudioNode.connect);\n        nativeAudioNode.disconnect = ((disconnect) => {\n            return (destinationOrOutput, output, input) => {\n                const wasConnected = connections.size > 0;\n                if (destinationOrOutput === undefined) {\n                    disconnect.apply(nativeAudioNode);\n                    connections.clear();\n                }\n                else if (typeof destinationOrOutput === 'number') {\n                    // @todo TypeScript cannot infer the overloaded signature with 1 argument yet.\n                    disconnect.call(nativeAudioNode, destinationOrOutput);\n                    for (const connection of connections) {\n                        if (connection[1] === destinationOrOutput) {\n                            connections.delete(connection);\n                        }\n                    }\n                }\n                else {\n                    if (isNativeAudioNode(destinationOrOutput)) {\n                        // @todo TypeScript cannot infer the overloaded signature with 3 arguments yet.\n                        disconnect.call(nativeAudioNode, destinationOrOutput, output, input);\n                    }\n                    else {\n                        // @todo TypeScript cannot infer the overloaded signature with 2 arguments yet.\n                        disconnect.call(nativeAudioNode, destinationOrOutput, output);\n                    }\n                    for (const connection of connections) {\n                        if (connection[0] === destinationOrOutput &&\n                            (output === undefined || connection[1] === output) &&\n                            (input === undefined || connection[2] === input)) {\n                            connections.delete(connection);\n                        }\n                    }\n                }\n                const isDisconnected = connections.size === 0;\n                if (wasConnected && isDisconnected) {\n                    whenDisconnected();\n                }\n            };\n        })(nativeAudioNode.disconnect);\n        return nativeAudioNode;\n    };\n};\n//# sourceMappingURL=monitor-connections.js.map","export const createWrapChannelMergerNode = (createInvalidStateError, monitorConnections) => {\n    return (nativeContext, channelMergerNode) => {\n        // Bug #15: Safari does not return the default properties.\n        channelMergerNode.channelCount = 1;\n        channelMergerNode.channelCountMode = 'explicit';\n        // Bug #16: Safari does not throw an error when setting a different channelCount or channelCountMode.\n        Object.defineProperty(channelMergerNode, 'channelCount', {\n            get: () => 1,\n            set: () => {\n                throw createInvalidStateError();\n            }\n        });\n        Object.defineProperty(channelMergerNode, 'channelCountMode', {\n            get: () => 'explicit',\n            set: () => {\n                throw createInvalidStateError();\n            }\n        });\n        // Bug #20: Safari requires a connection of any kind to treat the input signal correctly.\n        const audioBufferSourceNode = nativeContext.createBufferSource();\n        const whenConnected = () => {\n            const length = channelMergerNode.numberOfInputs;\n            for (let i = 0; i < length; i += 1) {\n                audioBufferSourceNode.connect(channelMergerNode, 0, i);\n            }\n        };\n        const whenDisconnected = () => audioBufferSourceNode.disconnect(channelMergerNode);\n        monitorConnections(channelMergerNode, whenConnected, whenDisconnected);\n    };\n};\n//# sourceMappingURL=wrap-channel-merger-node.js.map","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeChannelMergerNodeFactory = (nativeAudioContextConstructor, wrapChannelMergerNode) => {\n    return (nativeContext, options) => {\n        const nativeChannelMergerNode = nativeContext.createChannelMerger(options.numberOfInputs);\n        /*\n         * Bug #20: Safari requires a connection of any kind to treat the input signal correctly.\n         * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the existence of\n         * the webkitAudioContext is used as a workaround here.\n         */\n        if (nativeAudioContextConstructor !== null && nativeAudioContextConstructor.name === 'webkitAudioContext') {\n            wrapChannelMergerNode(nativeContext, nativeChannelMergerNode);\n        }\n        assignNativeAudioNodeOptions(nativeChannelMergerNode, options);\n        return nativeChannelMergerNode;\n    };\n};\n//# sourceMappingURL=native-channel-merger-node-factory.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createChannelMergerNodeRendererFactory = (createNativeChannelMergerNode, getNativeAudioNode, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeAudioNodes = new WeakMap();\n        const createAudioNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeAudioNode = getNativeAudioNode(proxy);\n            // If the initially used nativeAudioNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeAudioNodeIsOwnedByContext = isOwnedByContext(nativeAudioNode, nativeOfflineAudioContext);\n            if (!nativeAudioNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeAudioNode.channelCount,\n                    channelCountMode: nativeAudioNode.channelCountMode,\n                    channelInterpretation: nativeAudioNode.channelInterpretation,\n                    numberOfInputs: nativeAudioNode.numberOfInputs\n                };\n                nativeAudioNode = createNativeChannelMergerNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeAudioNode);\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioNode);\n            return nativeAudioNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeAudioNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioNode);\n                }\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=channel-merger-node-renderer-factory.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createChannelSplitterNodeRendererFactory = (createNativeChannelSplitterNode, getNativeAudioNode, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeAudioNodes = new WeakMap();\n        const createAudioNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeAudioNode = getNativeAudioNode(proxy);\n            // If the initially used nativeAudioNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeAudioNodeIsOwnedByContext = isOwnedByContext(nativeAudioNode, nativeOfflineAudioContext);\n            if (!nativeAudioNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeAudioNode.channelCount,\n                    channelCountMode: nativeAudioNode.channelCountMode,\n                    channelInterpretation: nativeAudioNode.channelInterpretation,\n                    numberOfOutputs: nativeAudioNode.numberOfOutputs\n                };\n                nativeAudioNode = createNativeChannelSplitterNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeAudioNode);\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeAudioNode);\n            return nativeAudioNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeAudioNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioNode);\n                }\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=channel-splitter-node-renderer-factory.js.map","export const sanitizeChannelSplitterOptions = (options) => {\n    return { ...options, channelCount: options.numberOfOutputs };\n};\n//# sourceMappingURL=sanitize-channel-splitter-options.js.map","import { interceptConnections } from '../helpers/intercept-connections';\nexport const createNativeConstantSourceNodeFakerFactory = (addSilentConnection, createNativeAudioBufferSourceNode, createNativeGainNode, monitorConnections) => {\n    return (nativeContext, { offset, ...audioNodeOptions }) => {\n        const audioBuffer = nativeContext.createBuffer(1, 2, 44100);\n        const audioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, {\n            buffer: null,\n            channelCount: 2,\n            channelCountMode: 'max',\n            channelInterpretation: 'speakers',\n            loop: false,\n            loopEnd: 0,\n            loopStart: 0,\n            playbackRate: 1\n        });\n        const gainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: offset });\n        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n        const channelData = audioBuffer.getChannelData(0);\n        // Bug #95: Safari does not play or loop one sample buffers.\n        channelData[0] = 1;\n        channelData[1] = 1;\n        audioBufferSourceNode.buffer = audioBuffer;\n        audioBufferSourceNode.loop = true;\n        const nativeConstantSourceNodeFaker = {\n            get bufferSize() {\n                return undefined;\n            },\n            get channelCount() {\n                return gainNode.channelCount;\n            },\n            set channelCount(value) {\n                gainNode.channelCount = value;\n            },\n            get channelCountMode() {\n                return gainNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                gainNode.channelCountMode = value;\n            },\n            get channelInterpretation() {\n                return gainNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                gainNode.channelInterpretation = value;\n            },\n            get context() {\n                return gainNode.context;\n            },\n            get inputs() {\n                return [];\n            },\n            get numberOfInputs() {\n                return audioBufferSourceNode.numberOfInputs;\n            },\n            get numberOfOutputs() {\n                return gainNode.numberOfOutputs;\n            },\n            get offset() {\n                return gainNode.gain;\n            },\n            get onended() {\n                return audioBufferSourceNode.onended;\n            },\n            set onended(value) {\n                audioBufferSourceNode.onended = value;\n            },\n            addEventListener(...args) {\n                return audioBufferSourceNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args) {\n                return audioBufferSourceNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args) {\n                return audioBufferSourceNode.removeEventListener(args[0], args[1], args[2]);\n            },\n            start(when = 0) {\n                audioBufferSourceNode.start.call(audioBufferSourceNode, when);\n            },\n            stop(when = 0) {\n                audioBufferSourceNode.stop.call(audioBufferSourceNode, when);\n            }\n        };\n        const whenConnected = () => audioBufferSourceNode.connect(gainNode);\n        const whenDisconnected = () => audioBufferSourceNode.disconnect(gainNode);\n        // Bug #175: Safari will not fire an ended event if the AudioBufferSourceNode is unconnected.\n        addSilentConnection(nativeContext, audioBufferSourceNode);\n        return monitorConnections(interceptConnections(nativeConstantSourceNodeFaker, gainNode), whenConnected, whenDisconnected);\n    };\n};\n//# sourceMappingURL=native-constant-source-node-faker-factory.js.map","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nexport const createNativeConstantSourceNodeFactory = (addSilentConnection, cacheTestResult, createNativeConstantSourceNodeFaker, testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, testAudioScheduledSourceNodeStopMethodNegativeParametersSupport) => {\n    return (nativeContext, options) => {\n        // Bug #62: Safari does not support ConstantSourceNodes.\n        if (nativeContext.createConstantSource === undefined) {\n            return createNativeConstantSourceNodeFaker(nativeContext, options);\n        }\n        const nativeConstantSourceNode = nativeContext.createConstantSource();\n        assignNativeAudioNodeOptions(nativeConstantSourceNode, options);\n        assignNativeAudioNodeAudioParamValue(nativeConstantSourceNode, options, 'offset');\n        // Bug #44: Safari does not throw a RangeError yet.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () => testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeConstantSourceNode);\n        }\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () => testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeConstantSourceNode);\n        }\n        // Bug #175: Safari will not fire an ended event if the ConstantSourceNode is unconnected.\n        addSilentConnection(nativeContext, nativeConstantSourceNode);\n        return nativeConstantSourceNode;\n    };\n};\n//# sourceMappingURL=native-constant-source-node-factory.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createConstantSourceNodeRendererFactory = (connectAudioParam, createNativeConstantSourceNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeConstantSourceNodes = new WeakMap();\n        let start = null;\n        let stop = null;\n        const createConstantSourceNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeConstantSourceNode = getNativeAudioNode(proxy);\n            /*\n             * If the initially used nativeConstantSourceNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeConstantSourceNodeIsOwnedByContext = isOwnedByContext(nativeConstantSourceNode, nativeOfflineAudioContext);\n            if (!nativeConstantSourceNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeConstantSourceNode.channelCount,\n                    channelCountMode: nativeConstantSourceNode.channelCountMode,\n                    channelInterpretation: nativeConstantSourceNode.channelInterpretation,\n                    offset: nativeConstantSourceNode.offset.value\n                };\n                nativeConstantSourceNode = createNativeConstantSourceNode(nativeOfflineAudioContext, options);\n                if (start !== null) {\n                    nativeConstantSourceNode.start(start);\n                }\n                if (stop !== null) {\n                    nativeConstantSourceNode.stop(stop);\n                }\n            }\n            renderedNativeConstantSourceNodes.set(nativeOfflineAudioContext, nativeConstantSourceNode);\n            if (!nativeConstantSourceNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.offset, nativeConstantSourceNode.offset);\n            }\n            else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.offset, nativeConstantSourceNode.offset);\n            }\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConstantSourceNode);\n            return nativeConstantSourceNode;\n        };\n        return {\n            set start(value) {\n                start = value;\n            },\n            set stop(value) {\n                stop = value;\n            },\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeConstantSourceNode = renderedNativeConstantSourceNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeConstantSourceNode !== undefined) {\n                    return Promise.resolve(renderedNativeConstantSourceNode);\n                }\n                return createConstantSourceNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=constant-source-node-renderer-factory.js.map","import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeConvolverNodeFactory = (createNotSupportedError, overwriteAccessors) => {\n    return (nativeContext, options) => {\n        const nativeConvolverNode = nativeContext.createConvolver();\n        assignNativeAudioNodeOptions(nativeConvolverNode, options);\n        // The normalize property needs to be set before setting the buffer.\n        if (options.disableNormalization === nativeConvolverNode.normalize) {\n            nativeConvolverNode.normalize = !options.disableNormalization;\n        }\n        assignNativeAudioNodeOption(nativeConvolverNode, options, 'buffer');\n        // Bug #113: Safari does allow to set the channelCount to a value larger than 2.\n        if (options.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n        overwriteAccessors(nativeConvolverNode, 'channelCount', (get) => () => get.call(nativeConvolverNode), (set) => (value) => {\n            if (value > 2) {\n                throw createNotSupportedError();\n            }\n            return set.call(nativeConvolverNode, value);\n        });\n        // Bug #114: Safari allows to set the channelCountMode to 'max'.\n        if (options.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n        overwriteAccessors(nativeConvolverNode, 'channelCountMode', (get) => () => get.call(nativeConvolverNode), (set) => (value) => {\n            if (value === 'max') {\n                throw createNotSupportedError();\n            }\n            return set.call(nativeConvolverNode, value);\n        });\n        return nativeConvolverNode;\n    };\n};\n//# sourceMappingURL=native-convolver-node-factory.js.map","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createConvolverNodeRendererFactory = (createNativeConvolverNode, getNativeAudioNode, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeConvolverNodes = new WeakMap();\n        const createConvolverNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeConvolverNode = getNativeAudioNode(proxy);\n            // If the initially used nativeConvolverNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeConvolverNodeIsOwnedByContext = isOwnedByContext(nativeConvolverNode, nativeOfflineAudioContext);\n            if (!nativeConvolverNodeIsOwnedByContext) {\n                const options = {\n                    buffer: nativeConvolverNode.buffer,\n                    channelCount: nativeConvolverNode.channelCount,\n                    channelCountMode: nativeConvolverNode.channelCountMode,\n                    channelInterpretation: nativeConvolverNode.channelInterpretation,\n                    disableNormalization: !nativeConvolverNode.normalize\n                };\n                nativeConvolverNode = createNativeConvolverNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeConvolverNodes.set(nativeOfflineAudioContext, nativeConvolverNode);\n            if (isNativeAudioNodeFaker(nativeConvolverNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConvolverNode.inputs[0]);\n            }\n            else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeConvolverNode);\n            }\n            return nativeConvolverNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeConvolverNode = renderedNativeConvolverNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeConvolverNode !== undefined) {\n                    return Promise.resolve(renderedNativeConvolverNode);\n                }\n                return createConvolverNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=convolver-node-renderer-factory.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createDelayNodeRendererFactory = (connectAudioParam, createNativeDelayNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode) => {\n    return (maxDelayTime) => {\n        const renderedNativeDelayNodes = new WeakMap();\n        const createDelayNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeDelayNode = getNativeAudioNode(proxy);\n            // If the initially used nativeDelayNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeDelayNodeIsOwnedByContext = isOwnedByContext(nativeDelayNode, nativeOfflineAudioContext);\n            if (!nativeDelayNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeDelayNode.channelCount,\n                    channelCountMode: nativeDelayNode.channelCountMode,\n                    channelInterpretation: nativeDelayNode.channelInterpretation,\n                    delayTime: nativeDelayNode.delayTime.value,\n                    maxDelayTime\n                };\n                nativeDelayNode = createNativeDelayNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeDelayNodes.set(nativeOfflineAudioContext, nativeDelayNode);\n            if (!nativeDelayNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.delayTime, nativeDelayNode.delayTime);\n            }\n            else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.delayTime, nativeDelayNode.delayTime);\n            }\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeDelayNode);\n            return nativeDelayNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeDelayNode = renderedNativeDelayNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeDelayNode !== undefined) {\n                    return Promise.resolve(renderedNativeDelayNode);\n                }\n                return createDelayNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=delay-node-renderer-factory.js.map","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeDynamicsCompressorNodeFactory = (createNotSupportedError) => {\n    return (nativeContext, options) => {\n        const nativeDynamicsCompressorNode = nativeContext.createDynamicsCompressor();\n        assignNativeAudioNodeOptions(nativeDynamicsCompressorNode, options);\n        // Bug #108: Safari allows a channelCount of three and above.\n        if (options.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n        // Bug #109: Only Chrome and Firefox disallow a channelCountMode of 'max'.\n        if (options.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'attack');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'knee');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'ratio');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'release');\n        assignNativeAudioNodeAudioParamValue(nativeDynamicsCompressorNode, options, 'threshold');\n        return nativeDynamicsCompressorNode;\n    };\n};\n//# sourceMappingURL=native-dynamics-compressor-node-factory.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createDynamicsCompressorNodeRendererFactory = (connectAudioParam, createNativeDynamicsCompressorNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeDynamicsCompressorNodes = new WeakMap();\n        const createDynamicsCompressorNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeDynamicsCompressorNode = getNativeAudioNode(proxy);\n            /*\n             * If the initially used nativeDynamicsCompressorNode was not constructed on the same OfflineAudioContext it needs to be\n             * created again.\n             */\n            const nativeDynamicsCompressorNodeIsOwnedByContext = isOwnedByContext(nativeDynamicsCompressorNode, nativeOfflineAudioContext);\n            if (!nativeDynamicsCompressorNodeIsOwnedByContext) {\n                const options = {\n                    attack: nativeDynamicsCompressorNode.attack.value,\n                    channelCount: nativeDynamicsCompressorNode.channelCount,\n                    channelCountMode: nativeDynamicsCompressorNode.channelCountMode,\n                    channelInterpretation: nativeDynamicsCompressorNode.channelInterpretation,\n                    knee: nativeDynamicsCompressorNode.knee.value,\n                    ratio: nativeDynamicsCompressorNode.ratio.value,\n                    release: nativeDynamicsCompressorNode.release.value,\n                    threshold: nativeDynamicsCompressorNode.threshold.value\n                };\n                nativeDynamicsCompressorNode = createNativeDynamicsCompressorNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeDynamicsCompressorNodes.set(nativeOfflineAudioContext, nativeDynamicsCompressorNode);\n            if (!nativeDynamicsCompressorNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.attack, nativeDynamicsCompressorNode.attack);\n                await renderAutomation(nativeOfflineAudioContext, proxy.knee, nativeDynamicsCompressorNode.knee);\n                await renderAutomation(nativeOfflineAudioContext, proxy.ratio, nativeDynamicsCompressorNode.ratio);\n                await renderAutomation(nativeOfflineAudioContext, proxy.release, nativeDynamicsCompressorNode.release);\n                await renderAutomation(nativeOfflineAudioContext, proxy.threshold, nativeDynamicsCompressorNode.threshold);\n            }\n            else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.attack, nativeDynamicsCompressorNode.attack);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.knee, nativeDynamicsCompressorNode.knee);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.ratio, nativeDynamicsCompressorNode.ratio);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.release, nativeDynamicsCompressorNode.release);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.threshold, nativeDynamicsCompressorNode.threshold);\n            }\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeDynamicsCompressorNode);\n            return nativeDynamicsCompressorNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeDynamicsCompressorNode = renderedNativeDynamicsCompressorNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeDynamicsCompressorNode !== undefined) {\n                    return Promise.resolve(renderedNativeDynamicsCompressorNode);\n                }\n                return createDynamicsCompressorNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=dynamics-compressor-node-renderer-factory.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createGainNodeRendererFactory = (connectAudioParam, createNativeGainNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeGainNodes = new WeakMap();\n        const createGainNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeGainNode = getNativeAudioNode(proxy);\n            // If the initially used nativeGainNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeGainNodeIsOwnedByContext = isOwnedByContext(nativeGainNode, nativeOfflineAudioContext);\n            if (!nativeGainNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeGainNode.channelCount,\n                    channelCountMode: nativeGainNode.channelCountMode,\n                    channelInterpretation: nativeGainNode.channelInterpretation,\n                    gain: nativeGainNode.gain.value\n                };\n                nativeGainNode = createNativeGainNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeGainNodes.set(nativeOfflineAudioContext, nativeGainNode);\n            if (!nativeGainNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.gain, nativeGainNode.gain);\n            }\n            else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.gain, nativeGainNode.gain);\n            }\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeGainNode);\n            return nativeGainNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeGainNode = renderedNativeGainNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeGainNode !== undefined) {\n                    return Promise.resolve(renderedNativeGainNode);\n                }\n                return createGainNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=gain-node-renderer-factory.js.map","import { testPromiseSupport } from '../helpers/test-promise-support';\nexport const createRenderNativeOfflineAudioContext = (cacheTestResult, createNativeGainNode, createNativeScriptProcessorNode, testOfflineAudioContextCurrentTimeSupport) => {\n    return (nativeOfflineAudioContext) => {\n        // Bug #21: Safari does not support promises yet.\n        if (cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeOfflineAudioContext))) {\n            // Bug #158: Chrome and Edge do not advance currentTime if it is not accessed while rendering the audio.\n            return Promise.resolve(cacheTestResult(testOfflineAudioContextCurrentTimeSupport, testOfflineAudioContextCurrentTimeSupport)).then((isOfflineAudioContextCurrentTimeSupported) => {\n                if (!isOfflineAudioContextCurrentTimeSupported) {\n                    const scriptProcessorNode = createNativeScriptProcessorNode(nativeOfflineAudioContext, 512, 0, 1);\n                    nativeOfflineAudioContext.oncomplete = () => {\n                        scriptProcessorNode.onaudioprocess = null; // tslint:disable-line:deprecation\n                        scriptProcessorNode.disconnect();\n                    };\n                    scriptProcessorNode.onaudioprocess = () => nativeOfflineAudioContext.currentTime; // tslint:disable-line:deprecation\n                    scriptProcessorNode.connect(nativeOfflineAudioContext.destination);\n                }\n                return nativeOfflineAudioContext.startRendering();\n            });\n        }\n        return new Promise((resolve) => {\n            // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\n            const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\n                channelCount: 1,\n                channelCountMode: 'explicit',\n                channelInterpretation: 'discrete',\n                gain: 0\n            });\n            nativeOfflineAudioContext.oncomplete = (event) => {\n                gainNode.disconnect();\n                resolve(event.renderedBuffer);\n            };\n            gainNode.connect(nativeOfflineAudioContext.destination);\n            nativeOfflineAudioContext.startRendering();\n        });\n    };\n};\n//# sourceMappingURL=render-native-offline-audio-context.js.map","export const createTestOfflineAudioContextCurrentTimeSupport = (createNativeGainNode, nativeOfflineAudioContextConstructor) => {\n    return () => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            return Promise.resolve(false);\n        }\n        const nativeOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n        // Bug #48: Safari does not render an OfflineAudioContext without any connected node.\n        const gainNode = createNativeGainNode(nativeOfflineAudioContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n        // Bug #21: Safari does not support promises yet.\n        return new Promise((resolve) => {\n            nativeOfflineAudioContext.oncomplete = () => {\n                gainNode.disconnect();\n                resolve(nativeOfflineAudioContext.currentTime !== 0);\n            };\n            nativeOfflineAudioContext.startRendering();\n        });\n    };\n};\n//# sourceMappingURL=test-offline-audio-context-current-time-support.js.map","import { filterBuffer } from '../helpers/filter-buffer';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nconst filterFullBuffer = (renderedBuffer, nativeOfflineAudioContext, feedback, feedforward) => {\n    const convertedFeedback = feedback instanceof Float64Array ? feedback : new Float64Array(feedback);\n    const convertedFeedforward = feedforward instanceof Float64Array ? feedforward : new Float64Array(feedforward);\n    const feedbackLength = convertedFeedback.length;\n    const feedforwardLength = convertedFeedforward.length;\n    const minLength = Math.min(feedbackLength, feedforwardLength);\n    if (convertedFeedback[0] !== 1) {\n        for (let i = 0; i < feedbackLength; i += 1) {\n            convertedFeedforward[i] /= convertedFeedback[0];\n        }\n        for (let i = 1; i < feedforwardLength; i += 1) {\n            convertedFeedback[i] /= convertedFeedback[0];\n        }\n    }\n    const bufferLength = 32;\n    const xBuffer = new Float32Array(bufferLength);\n    const yBuffer = new Float32Array(bufferLength);\n    const filteredBuffer = nativeOfflineAudioContext.createBuffer(renderedBuffer.numberOfChannels, renderedBuffer.length, renderedBuffer.sampleRate);\n    const numberOfChannels = renderedBuffer.numberOfChannels;\n    for (let i = 0; i < numberOfChannels; i += 1) {\n        const input = renderedBuffer.getChannelData(i);\n        const output = filteredBuffer.getChannelData(i);\n        xBuffer.fill(0);\n        yBuffer.fill(0);\n        filterBuffer(convertedFeedback, feedbackLength, convertedFeedforward, feedforwardLength, minLength, xBuffer, yBuffer, 0, bufferLength, input, output);\n    }\n    return filteredBuffer;\n};\nexport const createIIRFilterNodeRendererFactory = (createNativeAudioBufferSourceNode, getNativeAudioNode, nativeOfflineAudioContextConstructor, renderInputsOfAudioNode, renderNativeOfflineAudioContext) => {\n    return (feedback, feedforward) => {\n        const renderedNativeAudioNodes = new WeakMap();\n        let filteredBufferPromise = null;\n        const createAudioNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeAudioBufferSourceNode = null;\n            let nativeIIRFilterNode = getNativeAudioNode(proxy);\n            // If the initially used nativeIIRFilterNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeIIRFilterNodeIsOwnedByContext = isOwnedByContext(nativeIIRFilterNode, nativeOfflineAudioContext);\n            // Bug #9: Safari does not support IIRFilterNodes.\n            if (nativeOfflineAudioContext.createIIRFilter === undefined) {\n                nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeOfflineAudioContext, {\n                    buffer: null,\n                    channelCount: 2,\n                    channelCountMode: 'max',\n                    channelInterpretation: 'speakers',\n                    loop: false,\n                    loopEnd: 0,\n                    loopStart: 0,\n                    playbackRate: 1\n                });\n            }\n            else if (!nativeIIRFilterNodeIsOwnedByContext) {\n                // @todo TypeScript defines the parameters of createIIRFilter() as arrays of numbers.\n                nativeIIRFilterNode = nativeOfflineAudioContext.createIIRFilter(feedforward, feedback);\n            }\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeAudioBufferSourceNode === null ? nativeIIRFilterNode : nativeAudioBufferSourceNode);\n            if (nativeAudioBufferSourceNode !== null) {\n                if (filteredBufferPromise === null) {\n                    if (nativeOfflineAudioContextConstructor === null) {\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\n                    }\n                    const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(\n                    // Bug #47: The AudioDestinationNode in Safari gets not initialized correctly.\n                    proxy.context.destination.channelCount, \n                    // Bug #17: Safari does not yet expose the length.\n                    proxy.context.length, nativeOfflineAudioContext.sampleRate);\n                    filteredBufferPromise = (async () => {\n                        await renderInputsOfAudioNode(proxy, partialOfflineAudioContext, partialOfflineAudioContext.destination);\n                        const renderedBuffer = await renderNativeOfflineAudioContext(partialOfflineAudioContext);\n                        return filterFullBuffer(renderedBuffer, nativeOfflineAudioContext, feedback, feedforward);\n                    })();\n                }\n                const filteredBuffer = await filteredBufferPromise;\n                nativeAudioBufferSourceNode.buffer = filteredBuffer;\n                nativeAudioBufferSourceNode.start(0);\n                return nativeAudioBufferSourceNode;\n            }\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeIIRFilterNode);\n            return nativeIIRFilterNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeAudioNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeAudioNode !== undefined) {\n                    return Promise.resolve(renderedNativeAudioNode);\n                }\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=iir-filter-node-renderer-factory.js.map","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeIIRFilterNodeFactory = (createNativeIIRFilterNodeFaker) => {\n    return (nativeContext, baseLatency, options) => {\n        // Bug #9: Safari does not support IIRFilterNodes.\n        if (nativeContext.createIIRFilter === undefined) {\n            return createNativeIIRFilterNodeFaker(nativeContext, baseLatency, options);\n        }\n        // @todo TypeScript defines the parameters of createIIRFilter() as arrays of numbers.\n        const nativeIIRFilterNode = nativeContext.createIIRFilter(options.feedforward, options.feedback);\n        assignNativeAudioNodeOptions(nativeIIRFilterNode, options);\n        return nativeIIRFilterNode;\n    };\n};\n//# sourceMappingURL=native-iir-filter-node-factory.js.map","import { createInvalidAccessError } from '../factories/invalid-access-error';\nexport const wrapIIRFilterNodeGetFrequencyResponseMethod = (nativeIIRFilterNode) => {\n    nativeIIRFilterNode.getFrequencyResponse = ((getFrequencyResponse) => {\n        return (frequencyHz, magResponse, phaseResponse) => {\n            if (frequencyHz.length !== magResponse.length || magResponse.length !== phaseResponse.length) {\n                throw createInvalidAccessError();\n            }\n            return getFrequencyResponse.call(nativeIIRFilterNode, frequencyHz, magResponse, phaseResponse);\n        };\n    })(nativeIIRFilterNode.getFrequencyResponse);\n};\n//# sourceMappingURL=wrap-iir-filter-node-get-frequency-response-method.js.map","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nexport const createAudioListenerFactory = (createAudioParam, createNativeChannelMergerNode, createNativeConstantSourceNode, createNativeScriptProcessorNode, createNotSupportedError, getFirstSample, isNativeOfflineAudioContext, overwriteAccessors) => {\n    return (context, nativeContext) => {\n        const nativeListener = nativeContext.listener;\n        // Bug #117: Only Chrome & Edge support the new interface already.\n        const createFakeAudioParams = () => {\n            const buffer = new Float32Array(1);\n            const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n                channelCount: 1,\n                channelCountMode: 'explicit',\n                channelInterpretation: 'speakers',\n                numberOfInputs: 9\n            });\n            const isOffline = isNativeOfflineAudioContext(nativeContext);\n            let isScriptProcessorNodeCreated = false;\n            let lastOrientation = [0, 0, -1, 0, 1, 0];\n            let lastPosition = [0, 0, 0];\n            const createScriptProcessorNode = () => {\n                if (isScriptProcessorNodeCreated) {\n                    return;\n                }\n                isScriptProcessorNodeCreated = true;\n                const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 9, 0);\n                // tslint:disable-next-line:deprecation\n                scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\n                    const orientation = [\n                        getFirstSample(inputBuffer, buffer, 0),\n                        getFirstSample(inputBuffer, buffer, 1),\n                        getFirstSample(inputBuffer, buffer, 2),\n                        getFirstSample(inputBuffer, buffer, 3),\n                        getFirstSample(inputBuffer, buffer, 4),\n                        getFirstSample(inputBuffer, buffer, 5)\n                    ];\n                    if (orientation.some((value, index) => value !== lastOrientation[index])) {\n                        nativeListener.setOrientation(...orientation); // tslint:disable-line:deprecation\n                        lastOrientation = orientation;\n                    }\n                    const positon = [\n                        getFirstSample(inputBuffer, buffer, 6),\n                        getFirstSample(inputBuffer, buffer, 7),\n                        getFirstSample(inputBuffer, buffer, 8)\n                    ];\n                    if (positon.some((value, index) => value !== lastPosition[index])) {\n                        nativeListener.setPosition(...positon); // tslint:disable-line:deprecation\n                        lastPosition = positon;\n                    }\n                };\n                channelMergerNode.connect(scriptProcessorNode);\n            };\n            const createSetOrientation = (index) => (value) => {\n                if (value !== lastOrientation[index]) {\n                    lastOrientation[index] = value;\n                    nativeListener.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\n                }\n            };\n            const createSetPosition = (index) => (value) => {\n                if (value !== lastPosition[index]) {\n                    lastPosition[index] = value;\n                    nativeListener.setPosition(...lastPosition); // tslint:disable-line:deprecation\n                }\n            };\n            const createFakeAudioParam = (input, initialValue, setValue) => {\n                const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\n                    channelCount: 1,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    offset: initialValue\n                });\n                constantSourceNode.connect(channelMergerNode, 0, input);\n                // @todo This should be stopped when the context is closed.\n                constantSourceNode.start();\n                Object.defineProperty(constantSourceNode.offset, 'defaultValue', {\n                    get() {\n                        return initialValue;\n                    }\n                });\n                /*\n                 * Bug #62 & #74: Safari does not support ConstantSourceNodes and does not export the correct values for maxValue and\n                 * minValue for GainNodes.\n                 */\n                const audioParam = createAudioParam({ context }, isOffline, constantSourceNode.offset, MOST_POSITIVE_SINGLE_FLOAT, MOST_NEGATIVE_SINGLE_FLOAT);\n                overwriteAccessors(audioParam, 'value', (get) => () => get.call(audioParam), (set) => (value) => {\n                    try {\n                        set.call(audioParam, value);\n                    }\n                    catch (err) {\n                        if (err.code !== 9) {\n                            throw err;\n                        }\n                    }\n                    createScriptProcessorNode();\n                    if (isOffline) {\n                        // Bug #117: Using setOrientation() and setPosition() doesn't work with an OfflineAudioContext.\n                        setValue(value);\n                    }\n                });\n                audioParam.cancelAndHoldAtTime = ((cancelAndHoldAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n                    return (...args) => {\n                        const value = cancelAndHoldAtTime.apply(audioParam, args);\n                        createScriptProcessorNode();\n                        return value;\n                    };\n                })(audioParam.cancelAndHoldAtTime);\n                audioParam.cancelScheduledValues = ((cancelScheduledValues) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n                    return (...args) => {\n                        const value = cancelScheduledValues.apply(audioParam, args);\n                        createScriptProcessorNode();\n                        return value;\n                    };\n                })(audioParam.cancelScheduledValues);\n                audioParam.exponentialRampToValueAtTime = ((exponentialRampToValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n                    return (...args) => {\n                        const value = exponentialRampToValueAtTime.apply(audioParam, args);\n                        createScriptProcessorNode();\n                        return value;\n                    };\n                })(audioParam.exponentialRampToValueAtTime);\n                audioParam.linearRampToValueAtTime = ((linearRampToValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n                    return (...args) => {\n                        const value = linearRampToValueAtTime.apply(audioParam, args);\n                        createScriptProcessorNode();\n                        return value;\n                    };\n                })(audioParam.linearRampToValueAtTime);\n                audioParam.setTargetAtTime = ((setTargetAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n                    return (...args) => {\n                        const value = setTargetAtTime.apply(audioParam, args);\n                        createScriptProcessorNode();\n                        return value;\n                    };\n                })(audioParam.setTargetAtTime);\n                audioParam.setValueAtTime = ((setValueAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n                    return (...args) => {\n                        const value = setValueAtTime.apply(audioParam, args);\n                        createScriptProcessorNode();\n                        return value;\n                    };\n                })(audioParam.setValueAtTime);\n                audioParam.setValueCurveAtTime = ((setValueCurveAtTime) => {\n                    if (isOffline) {\n                        return () => {\n                            throw createNotSupportedError();\n                        };\n                    }\n                    return (...args) => {\n                        const value = setValueCurveAtTime.apply(audioParam, args);\n                        createScriptProcessorNode();\n                        return value;\n                    };\n                })(audioParam.setValueCurveAtTime);\n                return audioParam;\n            };\n            return {\n                forwardX: createFakeAudioParam(0, 0, createSetOrientation(0)),\n                forwardY: createFakeAudioParam(1, 0, createSetOrientation(1)),\n                forwardZ: createFakeAudioParam(2, -1, createSetOrientation(2)),\n                positionX: createFakeAudioParam(6, 0, createSetPosition(0)),\n                positionY: createFakeAudioParam(7, 0, createSetPosition(1)),\n                positionZ: createFakeAudioParam(8, 0, createSetPosition(2)),\n                upX: createFakeAudioParam(3, 0, createSetOrientation(3)),\n                upY: createFakeAudioParam(4, 1, createSetOrientation(4)),\n                upZ: createFakeAudioParam(5, 0, createSetOrientation(5))\n            };\n        };\n        const { forwardX, forwardY, forwardZ, positionX, positionY, positionZ, upX, upY, upZ } = nativeListener.forwardX === undefined ? createFakeAudioParams() : nativeListener;\n        return {\n            get forwardX() {\n                return forwardX;\n            },\n            get forwardY() {\n                return forwardY;\n            },\n            get forwardZ() {\n                return forwardZ;\n            },\n            get positionX() {\n                return positionX;\n            },\n            get positionY() {\n                return positionY;\n            },\n            get positionZ() {\n                return positionZ;\n            },\n            get upX() {\n                return upX;\n            },\n            get upY() {\n                return upY;\n            },\n            get upZ() {\n                return upZ;\n            }\n        };\n    };\n};\n//# sourceMappingURL=audio-listener-factory.js.map","import { CONTEXT_STORE } from '../globals';\nexport const createMinimalBaseAudioContextConstructor = (audioDestinationNodeConstructor, createAudioListener, eventTargetConstructor, isNativeOfflineAudioContext, unrenderedAudioWorkletNodeStore, wrapEventListener) => {\n    return class MinimalBaseAudioContext extends eventTargetConstructor {\n        constructor(_nativeContext, numberOfChannels) {\n            super(_nativeContext);\n            this._nativeContext = _nativeContext;\n            CONTEXT_STORE.set(this, _nativeContext);\n            if (isNativeOfflineAudioContext(_nativeContext)) {\n                unrenderedAudioWorkletNodeStore.set(_nativeContext, new Set());\n            }\n            this._destination = new audioDestinationNodeConstructor(this, numberOfChannels);\n            this._listener = createAudioListener(this, _nativeContext);\n            this._onstatechange = null;\n        }\n        get currentTime() {\n            return this._nativeContext.currentTime;\n        }\n        get destination() {\n            return this._destination;\n        }\n        get listener() {\n            return this._listener;\n        }\n        get onstatechange() {\n            return this._onstatechange;\n        }\n        set onstatechange(value) {\n            const wrappedListener = typeof value === 'function' ? wrapEventListener(this, value) : null;\n            this._nativeContext.onstatechange = wrappedListener;\n            const nativeOnStateChange = this._nativeContext.onstatechange;\n            this._onstatechange = nativeOnStateChange !== null && nativeOnStateChange === wrappedListener ? value : nativeOnStateChange;\n        }\n        get sampleRate() {\n            return this._nativeContext.sampleRate;\n        }\n        get state() {\n            return this._nativeContext.state;\n        }\n    };\n};\n//# sourceMappingURL=minimal-base-audio-context-constructor.js.map","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { wrapAudioScheduledSourceNodeStartMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-start-method-negative-parameters';\nimport { wrapAudioScheduledSourceNodeStopMethodNegativeParameters } from '../helpers/wrap-audio-scheduled-source-node-stop-method-negative-parameters';\nexport const createNativeOscillatorNodeFactory = (addSilentConnection, cacheTestResult, testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls) => {\n    return (nativeContext, options) => {\n        const nativeOscillatorNode = nativeContext.createOscillator();\n        assignNativeAudioNodeOptions(nativeOscillatorNode, options);\n        assignNativeAudioNodeAudioParamValue(nativeOscillatorNode, options, 'detune');\n        assignNativeAudioNodeAudioParamValue(nativeOscillatorNode, options, 'frequency');\n        if (options.periodicWave !== undefined) {\n            nativeOscillatorNode.setPeriodicWave(options.periodicWave);\n        }\n        else {\n            assignNativeAudioNodeOption(nativeOscillatorNode, options, 'type');\n        }\n        // Bug #44: Only Chrome & Edge throw a RangeError yet.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStartMethodNegativeParametersSupport, () => testAudioScheduledSourceNodeStartMethodNegativeParametersSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStartMethodNegativeParameters(nativeOscillatorNode);\n        }\n        // Bug #19: Safari does not ignore calls to stop() of an already stopped AudioBufferSourceNode.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport, () => testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls(nativeOscillatorNode, nativeContext);\n        }\n        // Bug #44: Only Firefox does not throw a RangeError yet.\n        if (!cacheTestResult(testAudioScheduledSourceNodeStopMethodNegativeParametersSupport, () => testAudioScheduledSourceNodeStopMethodNegativeParametersSupport(nativeContext))) {\n            wrapAudioScheduledSourceNodeStopMethodNegativeParameters(nativeOscillatorNode);\n        }\n        // Bug #175: Safari will not fire an ended event if the OscillatorNode is unconnected.\n        addSilentConnection(nativeContext, nativeOscillatorNode);\n        return nativeOscillatorNode;\n    };\n};\n//# sourceMappingURL=native-oscillator-node-factory.js.map","import { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createOscillatorNodeRendererFactory = (connectAudioParam, createNativeOscillatorNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeOscillatorNodes = new WeakMap();\n        let periodicWave = null;\n        let start = null;\n        let stop = null;\n        const createOscillatorNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeOscillatorNode = getNativeAudioNode(proxy);\n            // If the initially used nativeOscillatorNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeOscillatorNodeIsOwnedByContext = isOwnedByContext(nativeOscillatorNode, nativeOfflineAudioContext);\n            if (!nativeOscillatorNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeOscillatorNode.channelCount,\n                    channelCountMode: nativeOscillatorNode.channelCountMode,\n                    channelInterpretation: nativeOscillatorNode.channelInterpretation,\n                    detune: nativeOscillatorNode.detune.value,\n                    frequency: nativeOscillatorNode.frequency.value,\n                    periodicWave: periodicWave === null ? undefined : periodicWave,\n                    type: nativeOscillatorNode.type\n                };\n                nativeOscillatorNode = createNativeOscillatorNode(nativeOfflineAudioContext, options);\n                if (start !== null) {\n                    nativeOscillatorNode.start(start);\n                }\n                if (stop !== null) {\n                    nativeOscillatorNode.stop(stop);\n                }\n            }\n            renderedNativeOscillatorNodes.set(nativeOfflineAudioContext, nativeOscillatorNode);\n            if (!nativeOscillatorNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.detune, nativeOscillatorNode.detune);\n                await renderAutomation(nativeOfflineAudioContext, proxy.frequency, nativeOscillatorNode.frequency);\n            }\n            else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.detune, nativeOscillatorNode.detune);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.frequency, nativeOscillatorNode.frequency);\n            }\n            await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeOscillatorNode);\n            return nativeOscillatorNode;\n        };\n        return {\n            set periodicWave(value) {\n                periodicWave = value;\n            },\n            set start(value) {\n                start = value;\n            },\n            set stop(value) {\n                stop = value;\n            },\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeOscillatorNode = renderedNativeOscillatorNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeOscillatorNode !== undefined) {\n                    return Promise.resolve(renderedNativeOscillatorNode);\n                }\n                return createOscillatorNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=oscillator-node-renderer-factory.js.map","export const createConnectedNativeAudioBufferSourceNodeFactory = (createNativeAudioBufferSourceNode) => {\n    return (nativeContext, nativeAudioNode) => {\n        const nativeAudioBufferSourceNode = createNativeAudioBufferSourceNode(nativeContext, {\n            buffer: null,\n            channelCount: 2,\n            channelCountMode: 'max',\n            channelInterpretation: 'speakers',\n            loop: false,\n            loopEnd: 0,\n            loopStart: 0,\n            playbackRate: 1\n        });\n        const nativeAudioBuffer = nativeContext.createBuffer(1, 2, 44100);\n        nativeAudioBufferSourceNode.buffer = nativeAudioBuffer;\n        nativeAudioBufferSourceNode.loop = true;\n        nativeAudioBufferSourceNode.connect(nativeAudioNode);\n        nativeAudioBufferSourceNode.start();\n        return () => {\n            nativeAudioBufferSourceNode.stop();\n            nativeAudioBufferSourceNode.disconnect(nativeAudioNode);\n        };\n    };\n};\n//# sourceMappingURL=connected-native-audio-buffer-source-node-factory.js.map","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { interceptConnections } from '../helpers/intercept-connections';\nexport const createNativeWaveShaperNodeFakerFactory = (createConnectedNativeAudioBufferSourceNode, createInvalidStateError, createNativeGainNode, isDCCurve, monitorConnections) => {\n    return (nativeContext, { curve, oversample, ...audioNodeOptions }) => {\n        const negativeWaveShaperNode = nativeContext.createWaveShaper();\n        const positiveWaveShaperNode = nativeContext.createWaveShaper();\n        assignNativeAudioNodeOptions(negativeWaveShaperNode, audioNodeOptions);\n        assignNativeAudioNodeOptions(positiveWaveShaperNode, audioNodeOptions);\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const invertGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: -1 });\n        const outputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const revertGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: -1 });\n        let disconnectNativeAudioBufferSourceNode = null;\n        let isConnected = false;\n        let unmodifiedCurve = null;\n        const nativeWaveShaperNodeFaker = {\n            get bufferSize() {\n                return undefined;\n            },\n            get channelCount() {\n                return negativeWaveShaperNode.channelCount;\n            },\n            set channelCount(value) {\n                inputGainNode.channelCount = value;\n                invertGainNode.channelCount = value;\n                negativeWaveShaperNode.channelCount = value;\n                outputGainNode.channelCount = value;\n                positiveWaveShaperNode.channelCount = value;\n                revertGainNode.channelCount = value;\n            },\n            get channelCountMode() {\n                return negativeWaveShaperNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                inputGainNode.channelCountMode = value;\n                invertGainNode.channelCountMode = value;\n                negativeWaveShaperNode.channelCountMode = value;\n                outputGainNode.channelCountMode = value;\n                positiveWaveShaperNode.channelCountMode = value;\n                revertGainNode.channelCountMode = value;\n            },\n            get channelInterpretation() {\n                return negativeWaveShaperNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n                invertGainNode.channelInterpretation = value;\n                negativeWaveShaperNode.channelInterpretation = value;\n                outputGainNode.channelInterpretation = value;\n                positiveWaveShaperNode.channelInterpretation = value;\n                revertGainNode.channelInterpretation = value;\n            },\n            get context() {\n                return negativeWaveShaperNode.context;\n            },\n            get curve() {\n                return unmodifiedCurve;\n            },\n            set curve(value) {\n                // Bug #102: Safari does not throw an InvalidStateError when the curve has less than two samples.\n                if (value !== null && value.length < 2) {\n                    throw createInvalidStateError();\n                }\n                if (value === null) {\n                    negativeWaveShaperNode.curve = value;\n                    positiveWaveShaperNode.curve = value;\n                }\n                else {\n                    const curveLength = value.length;\n                    const negativeCurve = new Float32Array(curveLength + 2 - (curveLength % 2));\n                    const positiveCurve = new Float32Array(curveLength + 2 - (curveLength % 2));\n                    negativeCurve[0] = value[0];\n                    positiveCurve[0] = -value[curveLength - 1];\n                    const length = Math.ceil((curveLength + 1) / 2);\n                    const centerIndex = (curveLength + 1) / 2 - 1;\n                    for (let i = 1; i < length; i += 1) {\n                        const theoreticIndex = (i / length) * centerIndex;\n                        const lowerIndex = Math.floor(theoreticIndex);\n                        const upperIndex = Math.ceil(theoreticIndex);\n                        negativeCurve[i] =\n                            lowerIndex === upperIndex\n                                ? value[lowerIndex]\n                                : (1 - (theoreticIndex - lowerIndex)) * value[lowerIndex] +\n                                    (1 - (upperIndex - theoreticIndex)) * value[upperIndex];\n                        positiveCurve[i] =\n                            lowerIndex === upperIndex\n                                ? -value[curveLength - 1 - lowerIndex]\n                                : -((1 - (theoreticIndex - lowerIndex)) * value[curveLength - 1 - lowerIndex]) -\n                                    (1 - (upperIndex - theoreticIndex)) * value[curveLength - 1 - upperIndex];\n                    }\n                    negativeCurve[length] = curveLength % 2 === 1 ? value[length - 1] : (value[length - 2] + value[length - 1]) / 2;\n                    negativeWaveShaperNode.curve = negativeCurve;\n                    positiveWaveShaperNode.curve = positiveCurve;\n                }\n                unmodifiedCurve = value;\n                if (isConnected) {\n                    if (isDCCurve(unmodifiedCurve) && disconnectNativeAudioBufferSourceNode === null) {\n                        disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, inputGainNode);\n                    }\n                    else if (disconnectNativeAudioBufferSourceNode !== null) {\n                        disconnectNativeAudioBufferSourceNode();\n                        disconnectNativeAudioBufferSourceNode = null;\n                    }\n                }\n            },\n            get inputs() {\n                return [inputGainNode];\n            },\n            get numberOfInputs() {\n                return negativeWaveShaperNode.numberOfInputs;\n            },\n            get numberOfOutputs() {\n                return negativeWaveShaperNode.numberOfOutputs;\n            },\n            get oversample() {\n                return negativeWaveShaperNode.oversample;\n            },\n            set oversample(value) {\n                negativeWaveShaperNode.oversample = value;\n                positiveWaveShaperNode.oversample = value;\n            },\n            addEventListener(...args) {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args) {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args) {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n        if (curve !== null) {\n            // Only values of type Float32Array can be assigned to the curve property.\n            nativeWaveShaperNodeFaker.curve = curve instanceof Float32Array ? curve : new Float32Array(curve);\n        }\n        if (oversample !== nativeWaveShaperNodeFaker.oversample) {\n            nativeWaveShaperNodeFaker.oversample = oversample;\n        }\n        const whenConnected = () => {\n            inputGainNode.connect(negativeWaveShaperNode).connect(outputGainNode);\n            inputGainNode.connect(invertGainNode).connect(positiveWaveShaperNode).connect(revertGainNode).connect(outputGainNode);\n            isConnected = true;\n            if (isDCCurve(unmodifiedCurve)) {\n                disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, inputGainNode);\n            }\n        };\n        const whenDisconnected = () => {\n            inputGainNode.disconnect(negativeWaveShaperNode);\n            negativeWaveShaperNode.disconnect(outputGainNode);\n            inputGainNode.disconnect(invertGainNode);\n            invertGainNode.disconnect(positiveWaveShaperNode);\n            positiveWaveShaperNode.disconnect(revertGainNode);\n            revertGainNode.disconnect(outputGainNode);\n            isConnected = false;\n            if (disconnectNativeAudioBufferSourceNode !== null) {\n                disconnectNativeAudioBufferSourceNode();\n                disconnectNativeAudioBufferSourceNode = null;\n            }\n        };\n        return monitorConnections(interceptConnections(nativeWaveShaperNodeFaker, outputGainNode), whenConnected, whenDisconnected);\n    };\n};\n//# sourceMappingURL=native-wave-shaper-node-faker-factory.js.map","import { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeWaveShaperNodeFactory = (createConnectedNativeAudioBufferSourceNode, createInvalidStateError, createNativeWaveShaperNodeFaker, isDCCurve, monitorConnections, nativeAudioContextConstructor, overwriteAccessors) => {\n    return (nativeContext, options) => {\n        const nativeWaveShaperNode = nativeContext.createWaveShaper();\n        /*\n         * Bug #119: Safari does not correctly map the values.\n         * @todo Unfortunately there is no way to test for this behavior in a synchronous fashion which is why testing for the existence of\n         * the webkitAudioContext is used as a workaround here. Testing for the automationRate property is necessary because this workaround\n         * isn't necessary anymore since v14.0.2 of Safari.\n         */\n        if (nativeAudioContextConstructor !== null &&\n            nativeAudioContextConstructor.name === 'webkitAudioContext' &&\n            nativeContext.createGain().gain.automationRate === undefined) {\n            return createNativeWaveShaperNodeFaker(nativeContext, options);\n        }\n        assignNativeAudioNodeOptions(nativeWaveShaperNode, options);\n        const curve = options.curve === null || options.curve instanceof Float32Array ? options.curve : new Float32Array(options.curve);\n        // Bug #104: Chrome and Edge will throw an InvalidAccessError when the curve has less than two samples.\n        if (curve !== null && curve.length < 2) {\n            throw createInvalidStateError();\n        }\n        // Only values of type Float32Array can be assigned to the curve property.\n        assignNativeAudioNodeOption(nativeWaveShaperNode, { curve }, 'curve');\n        assignNativeAudioNodeOption(nativeWaveShaperNode, options, 'oversample');\n        let disconnectNativeAudioBufferSourceNode = null;\n        let isConnected = false;\n        overwriteAccessors(nativeWaveShaperNode, 'curve', (get) => () => get.call(nativeWaveShaperNode), (set) => (value) => {\n            set.call(nativeWaveShaperNode, value);\n            if (isConnected) {\n                if (isDCCurve(value) && disconnectNativeAudioBufferSourceNode === null) {\n                    disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, nativeWaveShaperNode);\n                }\n                else if (!isDCCurve(value) && disconnectNativeAudioBufferSourceNode !== null) {\n                    disconnectNativeAudioBufferSourceNode();\n                    disconnectNativeAudioBufferSourceNode = null;\n                }\n            }\n            return value;\n        });\n        const whenConnected = () => {\n            isConnected = true;\n            if (isDCCurve(nativeWaveShaperNode.curve)) {\n                disconnectNativeAudioBufferSourceNode = createConnectedNativeAudioBufferSourceNode(nativeContext, nativeWaveShaperNode);\n            }\n        };\n        const whenDisconnected = () => {\n            isConnected = false;\n            if (disconnectNativeAudioBufferSourceNode !== null) {\n                disconnectNativeAudioBufferSourceNode();\n                disconnectNativeAudioBufferSourceNode = null;\n            }\n        };\n        return monitorConnections(nativeWaveShaperNode, whenConnected, whenDisconnected);\n    };\n};\n//# sourceMappingURL=native-wave-shaper-node-factory.js.map","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nimport { interceptConnections } from '../helpers/intercept-connections';\nexport const createNativePannerNodeFakerFactory = (connectNativeAudioNodeToNativeAudioNode, createInvalidStateError, createNativeChannelMergerNode, createNativeGainNode, createNativeScriptProcessorNode, createNativeWaveShaperNode, createNotSupportedError, disconnectNativeAudioNodeFromNativeAudioNode, getFirstSample, monitorConnections) => {\n    return (nativeContext, { coneInnerAngle, coneOuterAngle, coneOuterGain, distanceModel, maxDistance, orientationX, orientationY, orientationZ, panningModel, positionX, positionY, positionZ, refDistance, rolloffFactor, ...audioNodeOptions }) => {\n        const pannerNode = nativeContext.createPanner();\n        // Bug #125: Safari does not throw an error yet.\n        if (audioNodeOptions.channelCount > 2) {\n            throw createNotSupportedError();\n        }\n        // Bug #126: Safari does not throw an error yet.\n        if (audioNodeOptions.channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n        assignNativeAudioNodeOptions(pannerNode, audioNodeOptions);\n        const SINGLE_CHANNEL_OPTIONS = {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete'\n        };\n        const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            ...SINGLE_CHANNEL_OPTIONS,\n            channelInterpretation: 'speakers',\n            numberOfInputs: 6\n        });\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, gain: 1 });\n        const orientationXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 1 });\n        const orientationYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const orientationZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionXGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionYGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const positionZGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, 256, 6, 1);\n        const waveShaperNode = createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_OPTIONS,\n            curve: new Float32Array([1, 1]),\n            oversample: 'none'\n        });\n        let lastOrientation = [orientationX, orientationY, orientationZ];\n        let lastPosition = [positionX, positionY, positionZ];\n        const buffer = new Float32Array(1);\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = ({ inputBuffer }) => {\n            const orientation = [\n                getFirstSample(inputBuffer, buffer, 0),\n                getFirstSample(inputBuffer, buffer, 1),\n                getFirstSample(inputBuffer, buffer, 2)\n            ];\n            if (orientation.some((value, index) => value !== lastOrientation[index])) {\n                pannerNode.setOrientation(...orientation); // tslint:disable-line:deprecation\n                lastOrientation = orientation;\n            }\n            const positon = [\n                getFirstSample(inputBuffer, buffer, 3),\n                getFirstSample(inputBuffer, buffer, 4),\n                getFirstSample(inputBuffer, buffer, 5)\n            ];\n            if (positon.some((value, index) => value !== lastPosition[index])) {\n                pannerNode.setPosition(...positon); // tslint:disable-line:deprecation\n                lastPosition = positon;\n            }\n        };\n        Object.defineProperty(orientationYGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(orientationZGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionXGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionYGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(positionZGainNode.gain, 'defaultValue', { get: () => 0 });\n        const nativePannerNodeFaker = {\n            get bufferSize() {\n                return undefined;\n            },\n            get channelCount() {\n                return pannerNode.channelCount;\n            },\n            set channelCount(value) {\n                // Bug #125: Safari does not throw an error yet.\n                if (value > 2) {\n                    throw createNotSupportedError();\n                }\n                inputGainNode.channelCount = value;\n                pannerNode.channelCount = value;\n            },\n            get channelCountMode() {\n                return pannerNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                // Bug #126: Safari does not throw an error yet.\n                if (value === 'max') {\n                    throw createNotSupportedError();\n                }\n                inputGainNode.channelCountMode = value;\n                pannerNode.channelCountMode = value;\n            },\n            get channelInterpretation() {\n                return pannerNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n                pannerNode.channelInterpretation = value;\n            },\n            get coneInnerAngle() {\n                return pannerNode.coneInnerAngle;\n            },\n            set coneInnerAngle(value) {\n                pannerNode.coneInnerAngle = value;\n            },\n            get coneOuterAngle() {\n                return pannerNode.coneOuterAngle;\n            },\n            set coneOuterAngle(value) {\n                pannerNode.coneOuterAngle = value;\n            },\n            get coneOuterGain() {\n                return pannerNode.coneOuterGain;\n            },\n            set coneOuterGain(value) {\n                // Bug #127: Safari does not throw an InvalidStateError yet.\n                if (value < 0 || value > 1) {\n                    throw createInvalidStateError();\n                }\n                pannerNode.coneOuterGain = value;\n            },\n            get context() {\n                return pannerNode.context;\n            },\n            get distanceModel() {\n                return pannerNode.distanceModel;\n            },\n            set distanceModel(value) {\n                pannerNode.distanceModel = value;\n            },\n            get inputs() {\n                return [inputGainNode];\n            },\n            get maxDistance() {\n                return pannerNode.maxDistance;\n            },\n            set maxDistance(value) {\n                // Bug #128: Safari does not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n                pannerNode.maxDistance = value;\n            },\n            get numberOfInputs() {\n                return pannerNode.numberOfInputs;\n            },\n            get numberOfOutputs() {\n                return pannerNode.numberOfOutputs;\n            },\n            get orientationX() {\n                return orientationXGainNode.gain;\n            },\n            get orientationY() {\n                return orientationYGainNode.gain;\n            },\n            get orientationZ() {\n                return orientationZGainNode.gain;\n            },\n            get panningModel() {\n                return pannerNode.panningModel;\n            },\n            set panningModel(value) {\n                pannerNode.panningModel = value;\n            },\n            get positionX() {\n                return positionXGainNode.gain;\n            },\n            get positionY() {\n                return positionYGainNode.gain;\n            },\n            get positionZ() {\n                return positionZGainNode.gain;\n            },\n            get refDistance() {\n                return pannerNode.refDistance;\n            },\n            set refDistance(value) {\n                // Bug #129: Safari does not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n                pannerNode.refDistance = value;\n            },\n            get rolloffFactor() {\n                return pannerNode.rolloffFactor;\n            },\n            set rolloffFactor(value) {\n                // Bug #130: Safari does not throw an error yet.\n                if (value < 0) {\n                    throw new RangeError();\n                }\n                pannerNode.rolloffFactor = value;\n            },\n            addEventListener(...args) {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args) {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args) {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n        if (coneInnerAngle !== nativePannerNodeFaker.coneInnerAngle) {\n            nativePannerNodeFaker.coneInnerAngle = coneInnerAngle;\n        }\n        if (coneOuterAngle !== nativePannerNodeFaker.coneOuterAngle) {\n            nativePannerNodeFaker.coneOuterAngle = coneOuterAngle;\n        }\n        if (coneOuterGain !== nativePannerNodeFaker.coneOuterGain) {\n            nativePannerNodeFaker.coneOuterGain = coneOuterGain;\n        }\n        if (distanceModel !== nativePannerNodeFaker.distanceModel) {\n            nativePannerNodeFaker.distanceModel = distanceModel;\n        }\n        if (maxDistance !== nativePannerNodeFaker.maxDistance) {\n            nativePannerNodeFaker.maxDistance = maxDistance;\n        }\n        if (orientationX !== nativePannerNodeFaker.orientationX.value) {\n            nativePannerNodeFaker.orientationX.value = orientationX;\n        }\n        if (orientationY !== nativePannerNodeFaker.orientationY.value) {\n            nativePannerNodeFaker.orientationY.value = orientationY;\n        }\n        if (orientationZ !== nativePannerNodeFaker.orientationZ.value) {\n            nativePannerNodeFaker.orientationZ.value = orientationZ;\n        }\n        if (panningModel !== nativePannerNodeFaker.panningModel) {\n            nativePannerNodeFaker.panningModel = panningModel;\n        }\n        if (positionX !== nativePannerNodeFaker.positionX.value) {\n            nativePannerNodeFaker.positionX.value = positionX;\n        }\n        if (positionY !== nativePannerNodeFaker.positionY.value) {\n            nativePannerNodeFaker.positionY.value = positionY;\n        }\n        if (positionZ !== nativePannerNodeFaker.positionZ.value) {\n            nativePannerNodeFaker.positionZ.value = positionZ;\n        }\n        if (refDistance !== nativePannerNodeFaker.refDistance) {\n            nativePannerNodeFaker.refDistance = refDistance;\n        }\n        if (rolloffFactor !== nativePannerNodeFaker.rolloffFactor) {\n            nativePannerNodeFaker.rolloffFactor = rolloffFactor;\n        }\n        if (lastOrientation[0] !== 1 || lastOrientation[1] !== 0 || lastOrientation[2] !== 0) {\n            pannerNode.setOrientation(...lastOrientation); // tslint:disable-line:deprecation\n        }\n        if (lastPosition[0] !== 0 || lastPosition[1] !== 0 || lastPosition[2] !== 0) {\n            pannerNode.setPosition(...lastPosition); // tslint:disable-line:deprecation\n        }\n        const whenConnected = () => {\n            inputGainNode.connect(pannerNode);\n            // Bug #119: Safari does not fully support the WaveShaperNode.\n            connectNativeAudioNodeToNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n            waveShaperNode.connect(orientationXGainNode).connect(channelMergerNode, 0, 0);\n            waveShaperNode.connect(orientationYGainNode).connect(channelMergerNode, 0, 1);\n            waveShaperNode.connect(orientationZGainNode).connect(channelMergerNode, 0, 2);\n            waveShaperNode.connect(positionXGainNode).connect(channelMergerNode, 0, 3);\n            waveShaperNode.connect(positionYGainNode).connect(channelMergerNode, 0, 4);\n            waveShaperNode.connect(positionZGainNode).connect(channelMergerNode, 0, 5);\n            channelMergerNode.connect(scriptProcessorNode).connect(nativeContext.destination);\n        };\n        const whenDisconnected = () => {\n            inputGainNode.disconnect(pannerNode);\n            // Bug #119: Safari does not fully support the WaveShaperNode.\n            disconnectNativeAudioNodeFromNativeAudioNode(inputGainNode, waveShaperNode, 0, 0);\n            waveShaperNode.disconnect(orientationXGainNode);\n            orientationXGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(orientationYGainNode);\n            orientationYGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(orientationZGainNode);\n            orientationZGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionXGainNode);\n            positionXGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionYGainNode);\n            positionYGainNode.disconnect(channelMergerNode);\n            waveShaperNode.disconnect(positionZGainNode);\n            positionZGainNode.disconnect(channelMergerNode);\n            channelMergerNode.disconnect(scriptProcessorNode);\n            scriptProcessorNode.disconnect(nativeContext.destination);\n        };\n        return monitorConnections(interceptConnections(nativePannerNodeFaker, pannerNode), whenConnected, whenDisconnected);\n    };\n};\n//# sourceMappingURL=native-panner-node-faker-factory.js.map","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOption } from '../helpers/assign-native-audio-node-option';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativePannerNodeFactory = (createNativePannerNodeFaker) => {\n    return (nativeContext, options) => {\n        const nativePannerNode = nativeContext.createPanner();\n        // Bug #124: Safari does not support modifying the orientation and the position with AudioParams.\n        if (nativePannerNode.orientationX === undefined) {\n            return createNativePannerNodeFaker(nativeContext, options);\n        }\n        assignNativeAudioNodeOptions(nativePannerNode, options);\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationX');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationY');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'orientationZ');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionX');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionY');\n        assignNativeAudioNodeAudioParamValue(nativePannerNode, options, 'positionZ');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneInnerAngle');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneOuterAngle');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'coneOuterGain');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'distanceModel');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'maxDistance');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'panningModel');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'refDistance');\n        assignNativeAudioNodeOption(nativePannerNode, options, 'rolloffFactor');\n        return nativePannerNode;\n    };\n};\n//# sourceMappingURL=native-panner-node-factory.js.map","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createPannerNodeRendererFactory = (connectAudioParam, createNativeChannelMergerNode, createNativeConstantSourceNode, createNativeGainNode, createNativePannerNode, getNativeAudioNode, nativeOfflineAudioContextConstructor, renderAutomation, renderInputsOfAudioNode, renderNativeOfflineAudioContext) => {\n    return () => {\n        const renderedNativeAudioNodes = new WeakMap();\n        let renderedBufferPromise = null;\n        const createAudioNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeGainNode = null;\n            let nativePannerNode = getNativeAudioNode(proxy);\n            const commonAudioNodeOptions = {\n                channelCount: nativePannerNode.channelCount,\n                channelCountMode: nativePannerNode.channelCountMode,\n                channelInterpretation: nativePannerNode.channelInterpretation\n            };\n            const commonNativePannerNodeOptions = {\n                ...commonAudioNodeOptions,\n                coneInnerAngle: nativePannerNode.coneInnerAngle,\n                coneOuterAngle: nativePannerNode.coneOuterAngle,\n                coneOuterGain: nativePannerNode.coneOuterGain,\n                distanceModel: nativePannerNode.distanceModel,\n                maxDistance: nativePannerNode.maxDistance,\n                panningModel: nativePannerNode.panningModel,\n                refDistance: nativePannerNode.refDistance,\n                rolloffFactor: nativePannerNode.rolloffFactor\n            };\n            // If the initially used nativePannerNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativePannerNodeIsOwnedByContext = isOwnedByContext(nativePannerNode, nativeOfflineAudioContext);\n            // Bug #124: Safari does not support modifying the orientation and the position with AudioParams.\n            if ('bufferSize' in nativePannerNode) {\n                nativeGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\n            }\n            else if (!nativePannerNodeIsOwnedByContext) {\n                const options = {\n                    ...commonNativePannerNodeOptions,\n                    orientationX: nativePannerNode.orientationX.value,\n                    orientationY: nativePannerNode.orientationY.value,\n                    orientationZ: nativePannerNode.orientationZ.value,\n                    positionX: nativePannerNode.positionX.value,\n                    positionY: nativePannerNode.positionY.value,\n                    positionZ: nativePannerNode.positionZ.value\n                };\n                nativePannerNode = createNativePannerNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeAudioNodes.set(nativeOfflineAudioContext, nativeGainNode === null ? nativePannerNode : nativeGainNode);\n            if (nativeGainNode !== null) {\n                if (renderedBufferPromise === null) {\n                    if (nativeOfflineAudioContextConstructor === null) {\n                        throw new Error('Missing the native OfflineAudioContext constructor.');\n                    }\n                    const partialOfflineAudioContext = new nativeOfflineAudioContextConstructor(6, \n                    // Bug #17: Safari does not yet expose the length.\n                    proxy.context.length, nativeOfflineAudioContext.sampleRate);\n                    const nativeChannelMergerNode = createNativeChannelMergerNode(partialOfflineAudioContext, {\n                        channelCount: 1,\n                        channelCountMode: 'explicit',\n                        channelInterpretation: 'speakers',\n                        numberOfInputs: 6\n                    });\n                    nativeChannelMergerNode.connect(partialOfflineAudioContext.destination);\n                    renderedBufferPromise = (async () => {\n                        const nativeConstantSourceNodes = await Promise.all([\n                            proxy.orientationX,\n                            proxy.orientationY,\n                            proxy.orientationZ,\n                            proxy.positionX,\n                            proxy.positionY,\n                            proxy.positionZ\n                        ].map(async (audioParam, index) => {\n                            const nativeConstantSourceNode = createNativeConstantSourceNode(partialOfflineAudioContext, {\n                                channelCount: 1,\n                                channelCountMode: 'explicit',\n                                channelInterpretation: 'discrete',\n                                offset: index === 0 ? 1 : 0\n                            });\n                            await renderAutomation(partialOfflineAudioContext, audioParam, nativeConstantSourceNode.offset);\n                            return nativeConstantSourceNode;\n                        }));\n                        for (let i = 0; i < 6; i += 1) {\n                            nativeConstantSourceNodes[i].connect(nativeChannelMergerNode, 0, i);\n                            nativeConstantSourceNodes[i].start(0);\n                        }\n                        return renderNativeOfflineAudioContext(partialOfflineAudioContext);\n                    })();\n                }\n                const renderedBuffer = await renderedBufferPromise;\n                const inputGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, inputGainNode);\n                const channelDatas = [];\n                for (let i = 0; i < renderedBuffer.numberOfChannels; i += 1) {\n                    channelDatas.push(renderedBuffer.getChannelData(i));\n                }\n                let lastOrientation = [channelDatas[0][0], channelDatas[1][0], channelDatas[2][0]];\n                let lastPosition = [channelDatas[3][0], channelDatas[4][0], channelDatas[5][0]];\n                let gateGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 1 });\n                let partialPannerNode = createNativePannerNode(nativeOfflineAudioContext, {\n                    ...commonNativePannerNodeOptions,\n                    orientationX: lastOrientation[0],\n                    orientationY: lastOrientation[1],\n                    orientationZ: lastOrientation[2],\n                    positionX: lastPosition[0],\n                    positionY: lastPosition[1],\n                    positionZ: lastPosition[2]\n                });\n                inputGainNode.connect(gateGainNode).connect(partialPannerNode.inputs[0]);\n                partialPannerNode.connect(nativeGainNode);\n                for (let i = 128; i < renderedBuffer.length; i += 128) {\n                    const orientation = [channelDatas[0][i], channelDatas[1][i], channelDatas[2][i]];\n                    const positon = [channelDatas[3][i], channelDatas[4][i], channelDatas[5][i]];\n                    if (orientation.some((value, index) => value !== lastOrientation[index]) ||\n                        positon.some((value, index) => value !== lastPosition[index])) {\n                        lastOrientation = orientation;\n                        lastPosition = positon;\n                        const currentTime = i / nativeOfflineAudioContext.sampleRate;\n                        gateGainNode.gain.setValueAtTime(0, currentTime);\n                        gateGainNode = createNativeGainNode(nativeOfflineAudioContext, { ...commonAudioNodeOptions, gain: 0 });\n                        partialPannerNode = createNativePannerNode(nativeOfflineAudioContext, {\n                            ...commonNativePannerNodeOptions,\n                            orientationX: lastOrientation[0],\n                            orientationY: lastOrientation[1],\n                            orientationZ: lastOrientation[2],\n                            positionX: lastPosition[0],\n                            positionY: lastPosition[1],\n                            positionZ: lastPosition[2]\n                        });\n                        gateGainNode.gain.setValueAtTime(1, currentTime);\n                        inputGainNode.connect(gateGainNode).connect(partialPannerNode.inputs[0]);\n                        partialPannerNode.connect(nativeGainNode);\n                    }\n                }\n                return nativeGainNode;\n            }\n            if (!nativePannerNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationX, nativePannerNode.orientationX);\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationY, nativePannerNode.orientationY);\n                await renderAutomation(nativeOfflineAudioContext, proxy.orientationZ, nativePannerNode.orientationZ);\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionX, nativePannerNode.positionX);\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionY, nativePannerNode.positionY);\n                await renderAutomation(nativeOfflineAudioContext, proxy.positionZ, nativePannerNode.positionZ);\n            }\n            else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationX, nativePannerNode.orientationX);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationY, nativePannerNode.orientationY);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.orientationZ, nativePannerNode.orientationZ);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionX, nativePannerNode.positionX);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionY, nativePannerNode.positionY);\n                await connectAudioParam(nativeOfflineAudioContext, proxy.positionZ, nativePannerNode.positionZ);\n            }\n            if (isNativeAudioNodeFaker(nativePannerNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativePannerNode.inputs[0]);\n            }\n            else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativePannerNode);\n            }\n            return nativePannerNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeGainNodeOrNativePannerNode = renderedNativeAudioNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeGainNodeOrNativePannerNode !== undefined) {\n                    return Promise.resolve(renderedNativeGainNodeOrNativePannerNode);\n                }\n                return createAudioNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=panner-node-renderer-factory.js.map","export const createNativePeriodicWaveFactory = (createIndexSizeError) => {\n    return (nativeContext, { disableNormalization, imag, real }) => {\n        // Bug #180: Safari does not allow to use ordinary arrays.\n        const convertedImag = imag instanceof Float32Array ? imag : new Float32Array(imag);\n        const convertedReal = real instanceof Float32Array ? real : new Float32Array(real);\n        const nativePeriodicWave = nativeContext.createPeriodicWave(convertedReal, convertedImag, { disableNormalization });\n        // Bug #181: Safari does not throw an IndexSizeError so far if the given arrays have less than two values.\n        if (Array.from(imag).length < 2) {\n            throw createIndexSizeError();\n        }\n        return nativePeriodicWave;\n    };\n};\n//# sourceMappingURL=native-periodic-wave-factory.js.map","export const sanitizePeriodicWaveOptions = (options) => {\n    const { imag, real } = options;\n    if (imag === undefined) {\n        if (real === undefined) {\n            return { ...options, imag: [0, 0], real: [0, 0] };\n        }\n        return { ...options, imag: Array.from(real, () => 0), real };\n    }\n    if (real === undefined) {\n        return { ...options, imag, real: Array.from(imag, () => 0) };\n    }\n    return { ...options, imag, real };\n};\n//# sourceMappingURL=sanitize-periodic-wave-options.js.map","import { interceptConnections } from '../helpers/intercept-connections';\nexport const createNativeStereoPannerNodeFakerFactory = (createNativeChannelMergerNode, createNativeChannelSplitterNode, createNativeGainNode, createNativeWaveShaperNode, createNotSupportedError, monitorConnections) => {\n    // The curve has a size of 14bit plus 1 value to have an exact representation for zero. This value has been determined experimentally.\n    const CURVE_SIZE = 16385;\n    const DC_CURVE = new Float32Array([1, 1]);\n    const HALF_PI = Math.PI / 2;\n    const SINGLE_CHANNEL_OPTIONS = { channelCount: 1, channelCountMode: 'explicit', channelInterpretation: 'discrete' };\n    const SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS = { ...SINGLE_CHANNEL_OPTIONS, oversample: 'none' };\n    const buildInternalGraphForMono = (nativeContext, inputGainNode, panGainNode, channelMergerNode) => {\n        const leftWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const rightWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        for (let i = 0; i < CURVE_SIZE; i += 1) {\n            const x = (i / (CURVE_SIZE - 1)) * HALF_PI;\n            leftWaveShaperCurve[i] = Math.cos(x);\n            rightWaveShaperCurve[i] = Math.sin(x);\n        }\n        const leftGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const leftWaveShaperNode = (createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: leftWaveShaperCurve }));\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const panWaveShaperNode = (createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: DC_CURVE }));\n        const rightGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const rightWaveShaperNode = (createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: rightWaveShaperCurve }));\n        return {\n            connectGraph() {\n                inputGainNode.connect(leftGainNode);\n                inputGainNode.connect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n                inputGainNode.connect(rightGainNode);\n                panWaveShaperNode.connect(panGainNode);\n                panGainNode.connect(leftWaveShaperNode.inputs === undefined ? leftWaveShaperNode : leftWaveShaperNode.inputs[0]);\n                panGainNode.connect(rightWaveShaperNode.inputs === undefined ? rightWaveShaperNode : rightWaveShaperNode.inputs[0]);\n                leftWaveShaperNode.connect(leftGainNode.gain);\n                rightWaveShaperNode.connect(rightGainNode.gain);\n                leftGainNode.connect(channelMergerNode, 0, 0);\n                rightGainNode.connect(channelMergerNode, 0, 1);\n            },\n            disconnectGraph() {\n                inputGainNode.disconnect(leftGainNode);\n                inputGainNode.disconnect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n                inputGainNode.disconnect(rightGainNode);\n                panWaveShaperNode.disconnect(panGainNode);\n                panGainNode.disconnect(leftWaveShaperNode.inputs === undefined ? leftWaveShaperNode : leftWaveShaperNode.inputs[0]);\n                panGainNode.disconnect(rightWaveShaperNode.inputs === undefined ? rightWaveShaperNode : rightWaveShaperNode.inputs[0]);\n                leftWaveShaperNode.disconnect(leftGainNode.gain);\n                rightWaveShaperNode.disconnect(rightGainNode.gain);\n                leftGainNode.disconnect(channelMergerNode, 0, 0);\n                rightGainNode.disconnect(channelMergerNode, 0, 1);\n            }\n        };\n    };\n    const buildInternalGraphForStereo = (nativeContext, inputGainNode, panGainNode, channelMergerNode) => {\n        const leftInputForLeftOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const leftInputForRightOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const rightInputForLeftOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const rightInputForRightOutputWaveShaperCurve = new Float32Array(CURVE_SIZE);\n        const centerIndex = Math.floor(CURVE_SIZE / 2);\n        for (let i = 0; i < CURVE_SIZE; i += 1) {\n            if (i > centerIndex) {\n                const x = ((i - centerIndex) / (CURVE_SIZE - 1 - centerIndex)) * HALF_PI;\n                leftInputForLeftOutputWaveShaperCurve[i] = Math.cos(x);\n                leftInputForRightOutputWaveShaperCurve[i] = Math.sin(x);\n                rightInputForLeftOutputWaveShaperCurve[i] = 0;\n                rightInputForRightOutputWaveShaperCurve[i] = 1;\n            }\n            else {\n                const x = (i / (CURVE_SIZE - 1 - centerIndex)) * HALF_PI;\n                leftInputForLeftOutputWaveShaperCurve[i] = 1;\n                leftInputForRightOutputWaveShaperCurve[i] = 0;\n                rightInputForLeftOutputWaveShaperCurve[i] = Math.cos(x);\n                rightInputForRightOutputWaveShaperCurve[i] = Math.sin(x);\n            }\n        }\n        const channelSplitterNode = createNativeChannelSplitterNode(nativeContext, {\n            channelCount: 2,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            numberOfOutputs: 2\n        });\n        const leftInputForLeftOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const leftInputForLeftOutputWaveShaperNode = createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: leftInputForLeftOutputWaveShaperCurve\n        });\n        const leftInputForRightOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const leftInputForRightOutputWaveShaperNode = createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: leftInputForRightOutputWaveShaperCurve\n        });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const panWaveShaperNode = (createNativeWaveShaperNode(nativeContext, { ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS, curve: DC_CURVE }));\n        const rightInputForLeftOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const rightInputForLeftOutputWaveShaperNode = createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: rightInputForLeftOutputWaveShaperCurve\n        });\n        const rightInputForRightOutputGainNode = createNativeGainNode(nativeContext, { ...SINGLE_CHANNEL_OPTIONS, gain: 0 });\n        // Bug #119: Safari does not fully support the WaveShaperNode.\n        const rightInputForRightOutputWaveShaperNode = createNativeWaveShaperNode(nativeContext, {\n            ...SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS,\n            curve: rightInputForRightOutputWaveShaperCurve\n        });\n        return {\n            connectGraph() {\n                inputGainNode.connect(channelSplitterNode);\n                inputGainNode.connect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n                channelSplitterNode.connect(leftInputForLeftOutputGainNode, 0);\n                channelSplitterNode.connect(leftInputForRightOutputGainNode, 0);\n                channelSplitterNode.connect(rightInputForLeftOutputGainNode, 1);\n                channelSplitterNode.connect(rightInputForRightOutputGainNode, 1);\n                panWaveShaperNode.connect(panGainNode);\n                panGainNode.connect(leftInputForLeftOutputWaveShaperNode.inputs === undefined\n                    ? leftInputForLeftOutputWaveShaperNode\n                    : leftInputForLeftOutputWaveShaperNode.inputs[0]);\n                panGainNode.connect(leftInputForRightOutputWaveShaperNode.inputs === undefined\n                    ? leftInputForRightOutputWaveShaperNode\n                    : leftInputForRightOutputWaveShaperNode.inputs[0]);\n                panGainNode.connect(rightInputForLeftOutputWaveShaperNode.inputs === undefined\n                    ? rightInputForLeftOutputWaveShaperNode\n                    : rightInputForLeftOutputWaveShaperNode.inputs[0]);\n                panGainNode.connect(rightInputForRightOutputWaveShaperNode.inputs === undefined\n                    ? rightInputForRightOutputWaveShaperNode\n                    : rightInputForRightOutputWaveShaperNode.inputs[0]);\n                leftInputForLeftOutputWaveShaperNode.connect(leftInputForLeftOutputGainNode.gain);\n                leftInputForRightOutputWaveShaperNode.connect(leftInputForRightOutputGainNode.gain);\n                rightInputForLeftOutputWaveShaperNode.connect(rightInputForLeftOutputGainNode.gain);\n                rightInputForRightOutputWaveShaperNode.connect(rightInputForRightOutputGainNode.gain);\n                leftInputForLeftOutputGainNode.connect(channelMergerNode, 0, 0);\n                rightInputForLeftOutputGainNode.connect(channelMergerNode, 0, 0);\n                leftInputForRightOutputGainNode.connect(channelMergerNode, 0, 1);\n                rightInputForRightOutputGainNode.connect(channelMergerNode, 0, 1);\n            },\n            disconnectGraph() {\n                inputGainNode.disconnect(channelSplitterNode);\n                inputGainNode.disconnect(panWaveShaperNode.inputs === undefined ? panWaveShaperNode : panWaveShaperNode.inputs[0]);\n                channelSplitterNode.disconnect(leftInputForLeftOutputGainNode, 0);\n                channelSplitterNode.disconnect(leftInputForRightOutputGainNode, 0);\n                channelSplitterNode.disconnect(rightInputForLeftOutputGainNode, 1);\n                channelSplitterNode.disconnect(rightInputForRightOutputGainNode, 1);\n                panWaveShaperNode.disconnect(panGainNode);\n                panGainNode.disconnect(leftInputForLeftOutputWaveShaperNode.inputs === undefined\n                    ? leftInputForLeftOutputWaveShaperNode\n                    : leftInputForLeftOutputWaveShaperNode.inputs[0]);\n                panGainNode.disconnect(leftInputForRightOutputWaveShaperNode.inputs === undefined\n                    ? leftInputForRightOutputWaveShaperNode\n                    : leftInputForRightOutputWaveShaperNode.inputs[0]);\n                panGainNode.disconnect(rightInputForLeftOutputWaveShaperNode.inputs === undefined\n                    ? rightInputForLeftOutputWaveShaperNode\n                    : rightInputForLeftOutputWaveShaperNode.inputs[0]);\n                panGainNode.disconnect(rightInputForRightOutputWaveShaperNode.inputs === undefined\n                    ? rightInputForRightOutputWaveShaperNode\n                    : rightInputForRightOutputWaveShaperNode.inputs[0]);\n                leftInputForLeftOutputWaveShaperNode.disconnect(leftInputForLeftOutputGainNode.gain);\n                leftInputForRightOutputWaveShaperNode.disconnect(leftInputForRightOutputGainNode.gain);\n                rightInputForLeftOutputWaveShaperNode.disconnect(rightInputForLeftOutputGainNode.gain);\n                rightInputForRightOutputWaveShaperNode.disconnect(rightInputForRightOutputGainNode.gain);\n                leftInputForLeftOutputGainNode.disconnect(channelMergerNode, 0, 0);\n                rightInputForLeftOutputGainNode.disconnect(channelMergerNode, 0, 0);\n                leftInputForRightOutputGainNode.disconnect(channelMergerNode, 0, 1);\n                rightInputForRightOutputGainNode.disconnect(channelMergerNode, 0, 1);\n            }\n        };\n    };\n    const buildInternalGraph = (nativeContext, channelCount, inputGainNode, panGainNode, channelMergerNode) => {\n        if (channelCount === 1) {\n            return buildInternalGraphForMono(nativeContext, inputGainNode, panGainNode, channelMergerNode);\n        }\n        if (channelCount === 2) {\n            return buildInternalGraphForStereo(nativeContext, inputGainNode, panGainNode, channelMergerNode);\n        }\n        throw createNotSupportedError();\n    };\n    return (nativeContext, { channelCount, channelCountMode, pan, ...audioNodeOptions }) => {\n        if (channelCountMode === 'max') {\n            throw createNotSupportedError();\n        }\n        const channelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            ...audioNodeOptions,\n            channelCount: 1,\n            channelCountMode,\n            numberOfInputs: 2\n        });\n        const inputGainNode = createNativeGainNode(nativeContext, { ...audioNodeOptions, channelCount, channelCountMode, gain: 1 });\n        const panGainNode = createNativeGainNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: pan\n        });\n        let { connectGraph, disconnectGraph } = buildInternalGraph(nativeContext, channelCount, inputGainNode, panGainNode, channelMergerNode);\n        Object.defineProperty(panGainNode.gain, 'defaultValue', { get: () => 0 });\n        Object.defineProperty(panGainNode.gain, 'maxValue', { get: () => 1 });\n        Object.defineProperty(panGainNode.gain, 'minValue', { get: () => -1 });\n        const nativeStereoPannerNodeFakerFactory = {\n            get bufferSize() {\n                return undefined;\n            },\n            get channelCount() {\n                return inputGainNode.channelCount;\n            },\n            set channelCount(value) {\n                if (inputGainNode.channelCount !== value) {\n                    if (isConnected) {\n                        disconnectGraph();\n                    }\n                    ({ connectGraph, disconnectGraph } = buildInternalGraph(nativeContext, value, inputGainNode, panGainNode, channelMergerNode));\n                    if (isConnected) {\n                        connectGraph();\n                    }\n                }\n                inputGainNode.channelCount = value;\n            },\n            get channelCountMode() {\n                return inputGainNode.channelCountMode;\n            },\n            set channelCountMode(value) {\n                if (value === 'clamped-max' || value === 'max') {\n                    throw createNotSupportedError();\n                }\n                inputGainNode.channelCountMode = value;\n            },\n            get channelInterpretation() {\n                return inputGainNode.channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                inputGainNode.channelInterpretation = value;\n            },\n            get context() {\n                return inputGainNode.context;\n            },\n            get inputs() {\n                return [inputGainNode];\n            },\n            get numberOfInputs() {\n                return inputGainNode.numberOfInputs;\n            },\n            get numberOfOutputs() {\n                return inputGainNode.numberOfOutputs;\n            },\n            get pan() {\n                return panGainNode.gain;\n            },\n            addEventListener(...args) {\n                return inputGainNode.addEventListener(args[0], args[1], args[2]);\n            },\n            dispatchEvent(...args) {\n                return inputGainNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args) {\n                return inputGainNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n        let isConnected = false;\n        const whenConnected = () => {\n            connectGraph();\n            isConnected = true;\n        };\n        const whenDisconnected = () => {\n            disconnectGraph();\n            isConnected = false;\n        };\n        return monitorConnections(interceptConnections(nativeStereoPannerNodeFakerFactory, channelMergerNode), whenConnected, whenDisconnected);\n    };\n};\n//# sourceMappingURL=native-stereo-panner-node-faker-factory.js.map","import { assignNativeAudioNodeAudioParamValue } from '../helpers/assign-native-audio-node-audio-param-value';\nimport { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeStereoPannerNodeFactory = (createNativeStereoPannerNodeFaker, createNotSupportedError) => {\n    return (nativeContext, options) => {\n        const channelCountMode = options.channelCountMode;\n        /*\n         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari\n         * which supports it and therefore it can't be supported at all.\n         */\n        if (channelCountMode === 'clamped-max') {\n            throw createNotSupportedError();\n        }\n        // Bug #105: Safari does not support the StereoPannerNode.\n        if (nativeContext.createStereoPanner === undefined) {\n            return createNativeStereoPannerNodeFaker(nativeContext, options);\n        }\n        const nativeStereoPannerNode = nativeContext.createStereoPanner();\n        assignNativeAudioNodeOptions(nativeStereoPannerNode, options);\n        assignNativeAudioNodeAudioParamValue(nativeStereoPannerNode, options, 'pan');\n        /*\n         * Bug #105: The channelCountMode of 'clamped-max' should be supported. However it is not possible to write a polyfill for Safari\n         * which supports it and therefore it can't be supported at all.\n         */\n        Object.defineProperty(nativeStereoPannerNode, 'channelCountMode', {\n            get: () => channelCountMode,\n            set: (value) => {\n                if (value !== channelCountMode) {\n                    throw createNotSupportedError();\n                }\n            }\n        });\n        return nativeStereoPannerNode;\n    };\n};\n//# sourceMappingURL=native-stereo-panner-node-factory.js.map","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createStereoPannerNodeRendererFactory = (connectAudioParam, createNativeStereoPannerNode, getNativeAudioNode, renderAutomation, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeStereoPannerNodes = new WeakMap();\n        const createStereoPannerNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeStereoPannerNode = getNativeAudioNode(proxy);\n            /*\n             * If the initially used nativeStereoPannerNode was not constructed on the same OfflineAudioContext it needs to be created\n             * again.\n             */\n            const nativeStereoPannerNodeIsOwnedByContext = isOwnedByContext(nativeStereoPannerNode, nativeOfflineAudioContext);\n            if (!nativeStereoPannerNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeStereoPannerNode.channelCount,\n                    channelCountMode: nativeStereoPannerNode.channelCountMode,\n                    channelInterpretation: nativeStereoPannerNode.channelInterpretation,\n                    pan: nativeStereoPannerNode.pan.value\n                };\n                nativeStereoPannerNode = createNativeStereoPannerNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeStereoPannerNodes.set(nativeOfflineAudioContext, nativeStereoPannerNode);\n            if (!nativeStereoPannerNodeIsOwnedByContext) {\n                await renderAutomation(nativeOfflineAudioContext, proxy.pan, nativeStereoPannerNode.pan);\n            }\n            else {\n                await connectAudioParam(nativeOfflineAudioContext, proxy.pan, nativeStereoPannerNode.pan);\n            }\n            if (isNativeAudioNodeFaker(nativeStereoPannerNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeStereoPannerNode.inputs[0]);\n            }\n            else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeStereoPannerNode);\n            }\n            return nativeStereoPannerNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeStereoPannerNode = renderedNativeStereoPannerNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeStereoPannerNode !== undefined) {\n                    return Promise.resolve(renderedNativeStereoPannerNode);\n                }\n                return createStereoPannerNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=stereo-panner-node-renderer-factory.js.map","import { isNativeAudioNodeFaker } from '../guards/native-audio-node-faker';\nimport { isOwnedByContext } from '../helpers/is-owned-by-context';\nexport const createWaveShaperNodeRendererFactory = (createNativeWaveShaperNode, getNativeAudioNode, renderInputsOfAudioNode) => {\n    return () => {\n        const renderedNativeWaveShaperNodes = new WeakMap();\n        const createWaveShaperNode = async (proxy, nativeOfflineAudioContext) => {\n            let nativeWaveShaperNode = getNativeAudioNode(proxy);\n            // If the initially used nativeWaveShaperNode was not constructed on the same OfflineAudioContext it needs to be created again.\n            const nativeWaveShaperNodeIsOwnedByContext = isOwnedByContext(nativeWaveShaperNode, nativeOfflineAudioContext);\n            if (!nativeWaveShaperNodeIsOwnedByContext) {\n                const options = {\n                    channelCount: nativeWaveShaperNode.channelCount,\n                    channelCountMode: nativeWaveShaperNode.channelCountMode,\n                    channelInterpretation: nativeWaveShaperNode.channelInterpretation,\n                    curve: nativeWaveShaperNode.curve,\n                    oversample: nativeWaveShaperNode.oversample\n                };\n                nativeWaveShaperNode = createNativeWaveShaperNode(nativeOfflineAudioContext, options);\n            }\n            renderedNativeWaveShaperNodes.set(nativeOfflineAudioContext, nativeWaveShaperNode);\n            if (isNativeAudioNodeFaker(nativeWaveShaperNode)) {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeWaveShaperNode.inputs[0]);\n            }\n            else {\n                await renderInputsOfAudioNode(proxy, nativeOfflineAudioContext, nativeWaveShaperNode);\n            }\n            return nativeWaveShaperNode;\n        };\n        return {\n            render(proxy, nativeOfflineAudioContext) {\n                const renderedNativeWaveShaperNode = renderedNativeWaveShaperNodes.get(nativeOfflineAudioContext);\n                if (renderedNativeWaveShaperNode !== undefined) {\n                    return Promise.resolve(renderedNativeWaveShaperNode);\n                }\n                return createWaveShaperNode(proxy, nativeOfflineAudioContext);\n            }\n        };\n    };\n};\n//# sourceMappingURL=wave-shaper-node-renderer-factory.js.map","export const createIsSecureContext = (window) => window !== null && window.isSecureContext;\n//# sourceMappingURL=is-secure-context.js.map","export const createExposeCurrentFrameAndCurrentTime = (window) => {\n    return (currentTime, sampleRate, fn) => {\n        Object.defineProperties(window, {\n            currentFrame: {\n                configurable: true,\n                get() {\n                    return Math.round(currentTime * sampleRate);\n                }\n            },\n            currentTime: {\n                configurable: true,\n                get() {\n                    return currentTime;\n                }\n            }\n        });\n        try {\n            return fn();\n        }\n        finally {\n            if (window !== null) {\n                delete window.currentFrame;\n                delete window.currentTime;\n            }\n        }\n    };\n};\n//# sourceMappingURL=expose-current-frame-and-current-time.js.map","export const createGetOrCreateBackupOfflineAudioContext = (backupOfflineAudioContextStore, nativeOfflineAudioContextConstructor) => {\n    return (nativeContext) => {\n        let backupOfflineAudioContext = backupOfflineAudioContextStore.get(nativeContext);\n        if (backupOfflineAudioContext !== undefined) {\n            return backupOfflineAudioContext;\n        }\n        if (nativeOfflineAudioContextConstructor === null) {\n            throw new Error('Missing the native OfflineAudioContext constructor.');\n        }\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\n        backupOfflineAudioContext = new nativeOfflineAudioContextConstructor(1, 1, 44100);\n        backupOfflineAudioContextStore.set(nativeContext, backupOfflineAudioContext);\n        return backupOfflineAudioContext;\n    };\n};\n//# sourceMappingURL=get-or-create-backup-offline-audio-context.js.map","export const createEvaluateSource = (window) => {\n    return (source) => new Promise((resolve, reject) => {\n        if (window === null) {\n            // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n            reject(new SyntaxError());\n            return;\n        }\n        const head = window.document.head;\n        if (head === null) {\n            // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n            reject(new SyntaxError());\n        }\n        else {\n            const script = window.document.createElement('script');\n            // @todo Safari doesn't like URLs with a type of 'application/javascript; charset=utf-8'.\n            const blob = new Blob([source], { type: 'application/javascript' });\n            const url = URL.createObjectURL(blob);\n            const originalOnErrorHandler = window.onerror;\n            const removeErrorEventListenerAndRevokeUrl = () => {\n                window.onerror = originalOnErrorHandler;\n                URL.revokeObjectURL(url);\n            };\n            window.onerror = (message, src, lineno, colno, error) => {\n                // @todo Edge thinks the source is the one of the html document.\n                if (src === url || (src === window.location.href && lineno === 1 && colno === 1)) {\n                    removeErrorEventListenerAndRevokeUrl();\n                    reject(error);\n                    return false;\n                }\n                if (originalOnErrorHandler !== null) {\n                    return originalOnErrorHandler(message, src, lineno, colno, error);\n                }\n            };\n            script.onerror = () => {\n                removeErrorEventListenerAndRevokeUrl();\n                // Bug #182 Chrome and Edge do throw an instance of a SyntaxError instead of a DOMException.\n                reject(new SyntaxError());\n            };\n            script.onload = () => {\n                removeErrorEventListenerAndRevokeUrl();\n                resolve();\n            };\n            script.src = url;\n            script.type = 'module';\n            head.appendChild(script);\n        }\n    });\n};\n//# sourceMappingURL=evaluate-source.js.map","export const createFetchSource = (createAbortError) => {\n    return async (url) => {\n        try {\n            const response = await fetch(url);\n            if (response.ok) {\n                return [await response.text(), response.url];\n            }\n        }\n        catch {\n            // Ignore errors.\n        } // tslint:disable-line:no-empty\n        throw createAbortError();\n    };\n};\n//# sourceMappingURL=fetch-source.js.map","// Bug #179: Firefox does not allow to transfer any buffer which has been passed to the process() method as an argument.\nexport const createTestAudioWorkletProcessorPostMessageSupport = (nativeAudioWorkletNodeConstructor, nativeOfflineAudioContextConstructor) => {\n    return async () => {\n        // Bug #61: If there is no native AudioWorkletNode it gets faked and therefore it is no problem if the it doesn't exist.\n        if (nativeAudioWorkletNodeConstructor === null) {\n            return true;\n        }\n        if (nativeOfflineAudioContextConstructor === null) {\n            return false;\n        }\n        const blob = new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor(\"a\",A)'], {\n            type: 'application/javascript; charset=utf-8'\n        });\n        // Bug #141: Safari does not support creating an OfflineAudioContext with less than 44100 Hz.\n        const offlineAudioContext = new nativeOfflineAudioContextConstructor(1, 128, 44100);\n        const url = URL.createObjectURL(blob);\n        let isEmittingMessageEvents = false;\n        let isEmittingProcessorErrorEvents = false;\n        try {\n            await offlineAudioContext.audioWorklet.addModule(url);\n            const audioWorkletNode = new nativeAudioWorkletNodeConstructor(offlineAudioContext, 'a', { numberOfOutputs: 0 });\n            const oscillator = offlineAudioContext.createOscillator();\n            audioWorkletNode.port.onmessage = () => (isEmittingMessageEvents = true);\n            audioWorkletNode.onprocessorerror = () => (isEmittingProcessorErrorEvents = true);\n            oscillator.connect(audioWorkletNode);\n            oscillator.start(0);\n            await offlineAudioContext.startRendering();\n            // Bug #197: Safari does not deliver the messages before the promise returned by startRendering() resolves.\n            await new Promise((resolve) => setTimeout(resolve));\n        }\n        catch {\n            // Ignore errors.\n        }\n        finally {\n            URL.revokeObjectURL(url);\n        }\n        return isEmittingMessageEvents && !isEmittingProcessorErrorEvents;\n    };\n};\n//# sourceMappingURL=test-audio-worklet-processor-post-message-support.js.map","export const createIsNativeContext = (isNativeAudioContext, isNativeOfflineAudioContext) => {\n    return (anything) => {\n        return isNativeAudioContext(anything) || isNativeOfflineAudioContext(anything);\n    };\n};\n//# sourceMappingURL=is-native-context.js.map","import { detachArrayBuffer } from '../helpers/detach-array-buffer';\nimport { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\nexport const createDecodeAudioData = (audioBufferStore, cacheTestResult, createDataCloneError, createEncodingError, detachedArrayBuffers, getNativeContext, isNativeContext, testAudioBufferCopyChannelMethodsOutOfBoundsSupport, testPromiseSupport, wrapAudioBufferCopyChannelMethods, wrapAudioBufferCopyChannelMethodsOutOfBounds) => {\n    return (anyContext, audioData) => {\n        const nativeContext = isNativeContext(anyContext) ? anyContext : getNativeContext(anyContext);\n        // Bug #43: Only Chrome and Edge do throw a DataCloneError.\n        if (detachedArrayBuffers.has(audioData)) {\n            const err = createDataCloneError();\n            return Promise.reject(err);\n        }\n        // The audioData parameter maybe of a type which can't be added to a WeakSet.\n        try {\n            detachedArrayBuffers.add(audioData);\n        }\n        catch {\n            // Ignore errors.\n        }\n        // Bug #21: Safari does not support promises yet.\n        if (cacheTestResult(testPromiseSupport, () => testPromiseSupport(nativeContext))) {\n            return nativeContext.decodeAudioData(audioData).then((audioBuffer) => {\n                // Bug #133: Safari does neuter the ArrayBuffer.\n                detachArrayBuffer(audioData).catch(() => {\n                    // Ignore errors.\n                });\n                // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\n                if (!cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () => testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer))) {\n                    wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\n                }\n                audioBufferStore.add(audioBuffer);\n                return audioBuffer;\n            });\n        }\n        // Bug #21: Safari does not return a Promise yet.\n        return new Promise((resolve, reject) => {\n            const complete = async () => {\n                // Bug #133: Safari does neuter the ArrayBuffer.\n                try {\n                    await detachArrayBuffer(audioData);\n                }\n                catch {\n                    // Ignore errors.\n                }\n            };\n            const fail = (err) => {\n                reject(err);\n                complete();\n            };\n            // Bug #26: Safari throws a synchronous error.\n            try {\n                // Bug #1: Safari requires a successCallback.\n                nativeContext.decodeAudioData(audioData, (audioBuffer) => {\n                    // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n                    // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\n                    if (typeof audioBuffer.copyFromChannel !== 'function') {\n                        wrapAudioBufferCopyChannelMethods(audioBuffer);\n                        wrapAudioBufferGetChannelDataMethod(audioBuffer);\n                    }\n                    audioBufferStore.add(audioBuffer);\n                    complete().then(() => resolve(audioBuffer));\n                }, (err) => {\n                    // Bug #4: Safari returns null instead of an error.\n                    if (err === null) {\n                        fail(createEncodingError());\n                    }\n                    else {\n                        fail(err);\n                    }\n                });\n            }\n            catch (err) {\n                fail(err);\n            }\n        });\n    };\n};\n//# sourceMappingURL=decode-audio-data.js.map","export const createDataCloneError = () => new DOMException('', 'DataCloneError');\n//# sourceMappingURL=data-clone-error.js.map","export const createEncodingError = () => new DOMException('', 'EncodingError');\n//# sourceMappingURL=encoding-error.js.map","export const createBaseAudioContextConstructor = (addAudioWorkletModule, analyserNodeConstructor, audioBufferConstructor, audioBufferSourceNodeConstructor, biquadFilterNodeConstructor, channelMergerNodeConstructor, channelSplitterNodeConstructor, constantSourceNodeConstructor, convolverNodeConstructor, decodeAudioData, delayNodeConstructor, dynamicsCompressorNodeConstructor, gainNodeConstructor, iIRFilterNodeConstructor, minimalBaseAudioContextConstructor, oscillatorNodeConstructor, pannerNodeConstructor, periodicWaveConstructor, stereoPannerNodeConstructor, waveShaperNodeConstructor) => {\n    return class BaseAudioContext extends minimalBaseAudioContextConstructor {\n        constructor(_nativeContext, numberOfChannels) {\n            super(_nativeContext, numberOfChannels);\n            this._nativeContext = _nativeContext;\n            this._audioWorklet =\n                addAudioWorkletModule === undefined\n                    ? undefined\n                    : {\n                        addModule: (moduleURL, options) => {\n                            return addAudioWorkletModule(this, moduleURL, options);\n                        }\n                    };\n        }\n        get audioWorklet() {\n            return this._audioWorklet;\n        }\n        createAnalyser() {\n            return new analyserNodeConstructor(this);\n        }\n        createBiquadFilter() {\n            return new biquadFilterNodeConstructor(this);\n        }\n        createBuffer(numberOfChannels, length, sampleRate) {\n            return new audioBufferConstructor({ length, numberOfChannels, sampleRate });\n        }\n        createBufferSource() {\n            return new audioBufferSourceNodeConstructor(this);\n        }\n        createChannelMerger(numberOfInputs = 6) {\n            return new channelMergerNodeConstructor(this, { numberOfInputs });\n        }\n        createChannelSplitter(numberOfOutputs = 6) {\n            return new channelSplitterNodeConstructor(this, { numberOfOutputs });\n        }\n        createConstantSource() {\n            return new constantSourceNodeConstructor(this);\n        }\n        createConvolver() {\n            return new convolverNodeConstructor(this);\n        }\n        createDelay(maxDelayTime = 1) {\n            return new delayNodeConstructor(this, { maxDelayTime });\n        }\n        createDynamicsCompressor() {\n            return new dynamicsCompressorNodeConstructor(this);\n        }\n        createGain() {\n            return new gainNodeConstructor(this);\n        }\n        createIIRFilter(feedforward, feedback) {\n            return new iIRFilterNodeConstructor(this, { feedback, feedforward });\n        }\n        createOscillator() {\n            return new oscillatorNodeConstructor(this);\n        }\n        createPanner() {\n            return new pannerNodeConstructor(this);\n        }\n        createPeriodicWave(real, imag, constraints = { disableNormalization: false }) {\n            return new periodicWaveConstructor(this, { ...constraints, imag, real });\n        }\n        createStereoPanner() {\n            return new stereoPannerNodeConstructor(this);\n        }\n        createWaveShaper() {\n            return new waveShaperNodeConstructor(this);\n        }\n        decodeAudioData(audioData, successCallback, errorCallback) {\n            return decodeAudioData(this._nativeContext, audioData).then((audioBuffer) => {\n                if (typeof successCallback === 'function') {\n                    successCallback(audioBuffer);\n                }\n                return audioBuffer;\n            }, (err) => {\n                if (typeof errorCallback === 'function') {\n                    errorCallback(err);\n                }\n                throw err;\n            });\n        }\n    };\n};\n//# sourceMappingURL=base-audio-context-constructor.js.map","export const createMediaElementAudioSourceNodeConstructor = (audioNodeConstructor, createNativeMediaElementAudioSourceNode, getNativeContext, isNativeOfflineAudioContext) => {\n    return class MediaElementAudioSourceNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const nativeMediaElementAudioSourceNode = createNativeMediaElementAudioSourceNode(nativeContext, options);\n            // Bug #171: Safari allows to create a MediaElementAudioSourceNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(nativeContext)) {\n                throw TypeError();\n            }\n            super(context, true, nativeMediaElementAudioSourceNode, null);\n            this._nativeMediaElementAudioSourceNode = nativeMediaElementAudioSourceNode;\n        }\n        get mediaElement() {\n            return this._nativeMediaElementAudioSourceNode.mediaElement;\n        }\n    };\n};\n//# sourceMappingURL=media-element-audio-source-node-constructor.js.map","export const createNativeMediaElementAudioSourceNode = (nativeAudioContext, options) => {\n    return nativeAudioContext.createMediaElementSource(options.mediaElement);\n};\n//# sourceMappingURL=native-media-element-audio-source-node.js.map","import { assignNativeAudioNodeOptions } from '../helpers/assign-native-audio-node-options';\nexport const createNativeMediaStreamAudioDestinationNode = (nativeAudioContext, options) => {\n    const nativeMediaStreamAudioDestinationNode = nativeAudioContext.createMediaStreamDestination();\n    assignNativeAudioNodeOptions(nativeMediaStreamAudioDestinationNode, options);\n    // Bug #174: Safari does expose a wrong numberOfOutputs.\n    if (nativeMediaStreamAudioDestinationNode.numberOfOutputs === 1) {\n        Object.defineProperty(nativeMediaStreamAudioDestinationNode, 'numberOfOutputs', { get: () => 0 });\n    }\n    return nativeMediaStreamAudioDestinationNode;\n};\n//# sourceMappingURL=native-media-stream-audio-destination-node.js.map","export const createMediaStreamAudioSourceNodeConstructor = (audioNodeConstructor, createNativeMediaStreamAudioSourceNode, getNativeContext, isNativeOfflineAudioContext) => {\n    return class MediaStreamAudioSourceNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const nativeMediaStreamAudioSourceNode = createNativeMediaStreamAudioSourceNode(nativeContext, options);\n            // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n            if (isNativeOfflineAudioContext(nativeContext)) {\n                throw new TypeError();\n            }\n            super(context, true, nativeMediaStreamAudioSourceNode, null);\n            this._nativeMediaStreamAudioSourceNode = nativeMediaStreamAudioSourceNode;\n        }\n        get mediaStream() {\n            return this._nativeMediaStreamAudioSourceNode.mediaStream;\n        }\n    };\n};\n//# sourceMappingURL=media-stream-audio-source-node-constructor.js.map","export const createNativeMediaStreamAudioSourceNode = (nativeAudioContext, { mediaStream }) => {\n    const audioStreamTracks = mediaStream.getAudioTracks();\n    /*\n     * Bug #151: Safari does not use the audio track as input anymore if it gets removed from the mediaStream after construction.\n     * Bug #159: Safari picks the first audio track if the MediaStream has more than one audio track.\n     */\n    audioStreamTracks.sort((a, b) => (a.id < b.id ? -1 : a.id > b.id ? 1 : 0));\n    const filteredAudioStreamTracks = audioStreamTracks.slice(0, 1);\n    const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(new MediaStream(filteredAudioStreamTracks));\n    /*\n     * Bug #151 & #159: The given mediaStream gets reconstructed before it gets passed to the native node which is why the accessor needs\n     * to be overwritten as it would otherwise expose the reconstructed version.\n     */\n    Object.defineProperty(nativeMediaStreamAudioSourceNode, 'mediaStream', { value: mediaStream });\n    return nativeMediaStreamAudioSourceNode;\n};\n//# sourceMappingURL=native-media-stream-audio-source-node.js.map","export const createNativeMediaStreamTrackAudioSourceNodeFactory = (createInvalidStateError, isNativeOfflineAudioContext) => {\n    return (nativeAudioContext, { mediaStreamTrack }) => {\n        // Bug #121: Only Firefox does yet support the MediaStreamTrackAudioSourceNode.\n        if (typeof nativeAudioContext.createMediaStreamTrackSource === 'function') {\n            return nativeAudioContext.createMediaStreamTrackSource(mediaStreamTrack);\n        }\n        const mediaStream = new MediaStream([mediaStreamTrack]);\n        const nativeMediaStreamAudioSourceNode = nativeAudioContext.createMediaStreamSource(mediaStream);\n        // Bug #120: Firefox does not throw an error if the mediaStream has no audio track.\n        if (mediaStreamTrack.kind !== 'audio') {\n            throw createInvalidStateError();\n        }\n        // Bug #172: Safari allows to create a MediaStreamAudioSourceNode with an OfflineAudioContext.\n        if (isNativeOfflineAudioContext(nativeAudioContext)) {\n            throw new TypeError();\n        }\n        return nativeMediaStreamAudioSourceNode;\n    };\n};\n//# sourceMappingURL=native-media-stream-track-audio-source-node-factory.js.map","export const createMediaStreamTrackAudioSourceNodeConstructor = (audioNodeConstructor, createNativeMediaStreamTrackAudioSourceNode, getNativeContext) => {\n    return class MediaStreamTrackAudioSourceNode extends audioNodeConstructor {\n        constructor(context, options) {\n            const nativeContext = getNativeContext(context);\n            const nativeMediaStreamTrackAudioSourceNode = createNativeMediaStreamTrackAudioSourceNode(nativeContext, options);\n            super(context, true, nativeMediaStreamTrackAudioSourceNode, null);\n        }\n    };\n};\n//# sourceMappingURL=media-stream-track-audio-source-node-constructor.js.map","import { deactivateAudioGraph } from '../helpers/deactivate-audio-graph';\nimport { isValidLatencyHint } from '../helpers/is-valid-latency-hint';\nexport const createAudioContextConstructor = (baseAudioContextConstructor, createInvalidStateError, createNotSupportedError, createUnknownError, mediaElementAudioSourceNodeConstructor, mediaStreamAudioDestinationNodeConstructor, mediaStreamAudioSourceNodeConstructor, mediaStreamTrackAudioSourceNodeConstructor, nativeAudioContextConstructor) => {\n    return class AudioContext extends baseAudioContextConstructor {\n        constructor(options = {}) {\n            if (nativeAudioContextConstructor === null) {\n                throw new Error('Missing the native AudioContext constructor.');\n            }\n            let nativeAudioContext;\n            try {\n                nativeAudioContext = new nativeAudioContextConstructor(options);\n            }\n            catch (err) {\n                // Bug #192 Safari does throw a SyntaxError if the sampleRate is not supported.\n                if (err.code === 12 && err.message === 'sampleRate is not in range') {\n                    throw createNotSupportedError();\n                }\n                throw err;\n            }\n            // Bug #131 Safari returns null when there are four other AudioContexts running already.\n            if (nativeAudioContext === null) {\n                throw createUnknownError();\n            }\n            // Bug #51 Only Chrome and Edge throw an error if the given latencyHint is invalid.\n            if (!isValidLatencyHint(options.latencyHint)) {\n                throw new TypeError(`The provided value '${options.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);\n            }\n            // Bug #150 Safari does not support setting the sampleRate.\n            if (options.sampleRate !== undefined && nativeAudioContext.sampleRate !== options.sampleRate) {\n                throw createNotSupportedError();\n            }\n            super(nativeAudioContext, 2);\n            const { latencyHint } = options;\n            const { sampleRate } = nativeAudioContext;\n            // @todo The values for 'balanced', 'interactive' and 'playback' are just copied from Chrome's implementation.\n            this._baseLatency =\n                typeof nativeAudioContext.baseLatency === 'number'\n                    ? nativeAudioContext.baseLatency\n                    : latencyHint === 'balanced'\n                        ? 512 / sampleRate\n                        : latencyHint === 'interactive' || latencyHint === undefined\n                            ? 256 / sampleRate\n                            : latencyHint === 'playback'\n                                ? 1024 / sampleRate\n                                : /*\n                                   * @todo The min (256) and max (16384) values are taken from the allowed bufferSize values of a\n                                   * ScriptProcessorNode.\n                                   */\n                                    (Math.max(2, Math.min(128, Math.round((latencyHint * sampleRate) / 128))) * 128) / sampleRate;\n            this._nativeAudioContext = nativeAudioContext;\n            // Bug #188: Safari will set the context's state to 'interrupted' in case the user switches tabs.\n            if (nativeAudioContextConstructor.name === 'webkitAudioContext') {\n                this._nativeGainNode = nativeAudioContext.createGain();\n                this._nativeOscillatorNode = nativeAudioContext.createOscillator();\n                this._nativeGainNode.gain.value = 1e-37;\n                this._nativeOscillatorNode.connect(this._nativeGainNode).connect(nativeAudioContext.destination);\n                this._nativeOscillatorNode.start();\n            }\n            else {\n                this._nativeGainNode = null;\n                this._nativeOscillatorNode = null;\n            }\n            this._state = null;\n            /*\n             * Bug #34: Chrome and Edge pretend to be running right away, but fire an onstatechange event when the state actually changes\n             * to 'running'.\n             */\n            if (nativeAudioContext.state === 'running') {\n                this._state = 'suspended';\n                const revokeState = () => {\n                    if (this._state === 'suspended') {\n                        this._state = null;\n                    }\n                    nativeAudioContext.removeEventListener('statechange', revokeState);\n                };\n                nativeAudioContext.addEventListener('statechange', revokeState);\n            }\n        }\n        get baseLatency() {\n            return this._baseLatency;\n        }\n        get state() {\n            return this._state !== null ? this._state : this._nativeAudioContext.state;\n        }\n        close() {\n            // Bug #35: Firefox does not throw an error if the AudioContext was closed before.\n            if (this.state === 'closed') {\n                return this._nativeAudioContext.close().then(() => {\n                    throw createInvalidStateError();\n                });\n            }\n            // Bug #34: If the state was set to suspended before it should be revoked now.\n            if (this._state === 'suspended') {\n                this._state = null;\n            }\n            return this._nativeAudioContext.close().then(() => {\n                if (this._nativeGainNode !== null && this._nativeOscillatorNode !== null) {\n                    this._nativeOscillatorNode.stop();\n                    this._nativeGainNode.disconnect();\n                    this._nativeOscillatorNode.disconnect();\n                }\n                deactivateAudioGraph(this);\n            });\n        }\n        createMediaElementSource(mediaElement) {\n            return new mediaElementAudioSourceNodeConstructor(this, { mediaElement });\n        }\n        createMediaStreamDestination() {\n            return new mediaStreamAudioDestinationNodeConstructor(this);\n        }\n        createMediaStreamSource(mediaStream) {\n            return new mediaStreamAudioSourceNodeConstructor(this, { mediaStream });\n        }\n        createMediaStreamTrackSource(mediaStreamTrack) {\n            return new mediaStreamTrackAudioSourceNodeConstructor(this, { mediaStreamTrack });\n        }\n        resume() {\n            if (this._state === 'suspended') {\n                return new Promise((resolve, reject) => {\n                    const resolvePromise = () => {\n                        this._nativeAudioContext.removeEventListener('statechange', resolvePromise);\n                        if (this._nativeAudioContext.state === 'running') {\n                            resolve();\n                        }\n                        else {\n                            this.resume().then(resolve, reject);\n                        }\n                    };\n                    this._nativeAudioContext.addEventListener('statechange', resolvePromise);\n                });\n            }\n            return this._nativeAudioContext.resume().catch((err) => {\n                // Bug #55: Chrome and Edge do throw an InvalidAccessError instead of an InvalidStateError.\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined || err.code === 15) {\n                    throw createInvalidStateError();\n                }\n                throw err;\n            });\n        }\n        suspend() {\n            return this._nativeAudioContext.suspend().catch((err) => {\n                // Bug #56: Safari invokes the catch handler but without an error.\n                if (err === undefined) {\n                    throw createInvalidStateError();\n                }\n                throw err;\n            });\n        }\n    };\n};\n//# sourceMappingURL=audio-context-constructor.js.map","export const isValidLatencyHint = (latencyHint) => {\n    return (latencyHint === undefined ||\n        typeof latencyHint === 'number' ||\n        (typeof latencyHint === 'string' && (latencyHint === 'balanced' || latencyHint === 'interactive' || latencyHint === 'playback')));\n};\n//# sourceMappingURL=is-valid-latency-hint.js.map","export const createGetUnrenderedAudioWorkletNodes = (unrenderedAudioWorkletNodeStore) => {\n    return (nativeContext) => {\n        const unrenderedAudioWorkletNodes = unrenderedAudioWorkletNodeStore.get(nativeContext);\n        if (unrenderedAudioWorkletNodes === undefined) {\n            throw new Error('The context has no set of AudioWorkletNodes.');\n        }\n        return unrenderedAudioWorkletNodes;\n    };\n};\n//# sourceMappingURL=get-unrendered-audio-worklet-nodes.js.map","export const createAddUnrenderedAudioWorkletNode = (getUnrenderedAudioWorkletNodes) => {\n    return (nativeContext, audioWorkletNode) => {\n        getUnrenderedAudioWorkletNodes(nativeContext).add(audioWorkletNode);\n    };\n};\n//# sourceMappingURL=add-unrendered-audio-worklet-node.js.map","import { isNativeAudioNode } from '../guards/native-audio-node';\nexport const createConnectMultipleOutputs = (createIndexSizeError) => {\n    return (outputAudioNodes, destination, output = 0, input = 0) => {\n        const outputAudioNode = outputAudioNodes[output];\n        if (outputAudioNode === undefined) {\n            throw createIndexSizeError();\n        }\n        if (isNativeAudioNode(destination)) {\n            return outputAudioNode.connect(destination, 0, input);\n        }\n        return outputAudioNode.connect(destination, 0);\n    };\n};\n//# sourceMappingURL=connect-multiple-outputs.js.map","export const createDeleteUnrenderedAudioWorkletNode = (getUnrenderedAudioWorkletNodes) => {\n    return (nativeContext, audioWorkletNode) => {\n        getUnrenderedAudioWorkletNodes(nativeContext).delete(audioWorkletNode);\n    };\n};\n//# sourceMappingURL=delete-unrendered-audio-worklet-node.js.map","export const createGetActiveAudioWorkletNodeInputs = (activeAudioWorkletNodeInputsStore, getValueForKey) => {\n    return (nativeAudioWorkletNode) => getValueForKey(activeAudioWorkletNodeInputsStore, nativeAudioWorkletNode);\n};\n//# sourceMappingURL=get-active-audio-worklet-node-inputs.js.map","import { MOST_NEGATIVE_SINGLE_FLOAT, MOST_POSITIVE_SINGLE_FLOAT } from '../constants';\nimport { computeBufferSize } from '../helpers/compute-buffer-size';\nimport { copyFromChannel } from '../helpers/copy-from-channel';\nimport { copyToChannel } from '../helpers/copy-to-channel';\nimport { createAudioWorkletProcessor } from '../helpers/create-audio-worklet-processor';\nimport { createNestedArrays } from '../helpers/create-nested-arrays';\nimport { ReadOnlyMap } from '../read-only-map';\nexport const createNativeAudioWorkletNodeFakerFactory = (connectMultipleOutputs, createIndexSizeError, createInvalidStateError, createNativeChannelMergerNode, createNativeChannelSplitterNode, createNativeConstantSourceNode, createNativeGainNode, createNativeScriptProcessorNode, createNotSupportedError, disconnectMultipleOutputs, exposeCurrentFrameAndCurrentTime, getActiveAudioWorkletNodeInputs, monitorConnections) => {\n    return (nativeContext, baseLatency, processorConstructor, options) => {\n        if (options.numberOfInputs === 0 && options.numberOfOutputs === 0) {\n            throw createNotSupportedError();\n        }\n        const outputChannelCount = Array.isArray(options.outputChannelCount)\n            ? options.outputChannelCount\n            : Array.from(options.outputChannelCount);\n        // @todo Check if any of the channelCount values is greater than the implementation's maximum number of channels.\n        if (outputChannelCount.some((channelCount) => channelCount < 1)) {\n            throw createNotSupportedError();\n        }\n        if (outputChannelCount.length !== options.numberOfOutputs) {\n            throw createIndexSizeError();\n        }\n        // Bug #61: This is not part of the standard but required for the faker to work.\n        if (options.channelCountMode !== 'explicit') {\n            throw createNotSupportedError();\n        }\n        const numberOfInputChannels = options.channelCount * options.numberOfInputs;\n        const numberOfOutputChannels = outputChannelCount.reduce((sum, value) => sum + value, 0);\n        const numberOfParameters = processorConstructor.parameterDescriptors === undefined ? 0 : processorConstructor.parameterDescriptors.length;\n        // Bug #61: This is not part of the standard but required for the faker to work.\n        if (numberOfInputChannels + numberOfParameters > 6 || numberOfOutputChannels > 6) {\n            throw createNotSupportedError();\n        }\n        const messageChannel = new MessageChannel();\n        const gainNodes = [];\n        const inputChannelSplitterNodes = [];\n        for (let i = 0; i < options.numberOfInputs; i += 1) {\n            gainNodes.push(createNativeGainNode(nativeContext, {\n                channelCount: options.channelCount,\n                channelCountMode: options.channelCountMode,\n                channelInterpretation: options.channelInterpretation,\n                gain: 1\n            }));\n            inputChannelSplitterNodes.push(createNativeChannelSplitterNode(nativeContext, {\n                channelCount: options.channelCount,\n                channelCountMode: 'explicit',\n                channelInterpretation: 'discrete',\n                numberOfOutputs: options.channelCount\n            }));\n        }\n        const constantSourceNodes = [];\n        if (processorConstructor.parameterDescriptors !== undefined) {\n            for (const { defaultValue, maxValue, minValue, name } of processorConstructor.parameterDescriptors) {\n                const constantSourceNode = createNativeConstantSourceNode(nativeContext, {\n                    channelCount: 1,\n                    channelCountMode: 'explicit',\n                    channelInterpretation: 'discrete',\n                    offset: options.parameterData[name] !== undefined\n                        ? options.parameterData[name]\n                        : defaultValue === undefined\n                            ? 0\n                            : defaultValue\n                });\n                Object.defineProperties(constantSourceNode.offset, {\n                    defaultValue: {\n                        get: () => (defaultValue === undefined ? 0 : defaultValue)\n                    },\n                    maxValue: {\n                        get: () => (maxValue === undefined ? MOST_POSITIVE_SINGLE_FLOAT : maxValue)\n                    },\n                    minValue: {\n                        get: () => (minValue === undefined ? MOST_NEGATIVE_SINGLE_FLOAT : minValue)\n                    }\n                });\n                constantSourceNodes.push(constantSourceNode);\n            }\n        }\n        const inputChannelMergerNode = createNativeChannelMergerNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'speakers',\n            numberOfInputs: Math.max(1, numberOfInputChannels + numberOfParameters)\n        });\n        const bufferSize = computeBufferSize(baseLatency, nativeContext.sampleRate);\n        const scriptProcessorNode = createNativeScriptProcessorNode(nativeContext, bufferSize, numberOfInputChannels + numberOfParameters, \n        // Bug #87: Only Firefox will fire an AudioProcessingEvent if there is no connected output.\n        Math.max(1, numberOfOutputChannels));\n        const outputChannelSplitterNode = createNativeChannelSplitterNode(nativeContext, {\n            channelCount: Math.max(1, numberOfOutputChannels),\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            numberOfOutputs: Math.max(1, numberOfOutputChannels)\n        });\n        const outputChannelMergerNodes = [];\n        for (let i = 0; i < options.numberOfOutputs; i += 1) {\n            outputChannelMergerNodes.push(createNativeChannelMergerNode(nativeContext, {\n                channelCount: 1,\n                channelCountMode: 'explicit',\n                channelInterpretation: 'speakers',\n                numberOfInputs: outputChannelCount[i]\n            }));\n        }\n        for (let i = 0; i < options.numberOfInputs; i += 1) {\n            gainNodes[i].connect(inputChannelSplitterNodes[i]);\n            for (let j = 0; j < options.channelCount; j += 1) {\n                inputChannelSplitterNodes[i].connect(inputChannelMergerNode, j, i * options.channelCount + j);\n            }\n        }\n        const parameterMap = new ReadOnlyMap(processorConstructor.parameterDescriptors === undefined\n            ? []\n            : processorConstructor.parameterDescriptors.map(({ name }, index) => {\n                const constantSourceNode = constantSourceNodes[index];\n                constantSourceNode.connect(inputChannelMergerNode, 0, numberOfInputChannels + index);\n                constantSourceNode.start(0);\n                return [name, constantSourceNode.offset];\n            }));\n        inputChannelMergerNode.connect(scriptProcessorNode);\n        let channelInterpretation = options.channelInterpretation;\n        let onprocessorerror = null;\n        // Bug #87: Expose at least one output to make this node connectable.\n        const outputAudioNodes = options.numberOfOutputs === 0 ? [scriptProcessorNode] : outputChannelMergerNodes;\n        const nativeAudioWorkletNodeFaker = {\n            get bufferSize() {\n                return bufferSize;\n            },\n            get channelCount() {\n                return options.channelCount;\n            },\n            set channelCount(_) {\n                // Bug #61: This is not part of the standard but required for the faker to work.\n                throw createInvalidStateError();\n            },\n            get channelCountMode() {\n                return options.channelCountMode;\n            },\n            set channelCountMode(_) {\n                // Bug #61: This is not part of the standard but required for the faker to work.\n                throw createInvalidStateError();\n            },\n            get channelInterpretation() {\n                return channelInterpretation;\n            },\n            set channelInterpretation(value) {\n                for (const gainNode of gainNodes) {\n                    gainNode.channelInterpretation = value;\n                }\n                channelInterpretation = value;\n            },\n            get context() {\n                return scriptProcessorNode.context;\n            },\n            get inputs() {\n                return gainNodes;\n            },\n            get numberOfInputs() {\n                return options.numberOfInputs;\n            },\n            get numberOfOutputs() {\n                return options.numberOfOutputs;\n            },\n            get onprocessorerror() {\n                return onprocessorerror;\n            },\n            set onprocessorerror(value) {\n                if (typeof onprocessorerror === 'function') {\n                    nativeAudioWorkletNodeFaker.removeEventListener('processorerror', onprocessorerror);\n                }\n                onprocessorerror = typeof value === 'function' ? value : null;\n                if (typeof onprocessorerror === 'function') {\n                    nativeAudioWorkletNodeFaker.addEventListener('processorerror', onprocessorerror);\n                }\n            },\n            get parameters() {\n                return parameterMap;\n            },\n            get port() {\n                return messageChannel.port2;\n            },\n            addEventListener(...args) {\n                return scriptProcessorNode.addEventListener(args[0], args[1], args[2]);\n            },\n            connect: connectMultipleOutputs.bind(null, outputAudioNodes),\n            disconnect: disconnectMultipleOutputs.bind(null, outputAudioNodes),\n            dispatchEvent(...args) {\n                return scriptProcessorNode.dispatchEvent(args[0]);\n            },\n            removeEventListener(...args) {\n                return scriptProcessorNode.removeEventListener(args[0], args[1], args[2]);\n            }\n        };\n        const patchedEventListeners = new Map();\n        messageChannel.port1.addEventListener = ((addEventListener) => {\n            return (...args) => {\n                if (args[0] === 'message') {\n                    const unpatchedEventListener = typeof args[1] === 'function'\n                        ? args[1]\n                        : typeof args[1] === 'object' && args[1] !== null && typeof args[1].handleEvent === 'function'\n                            ? args[1].handleEvent\n                            : null;\n                    if (unpatchedEventListener !== null) {\n                        const patchedEventListener = patchedEventListeners.get(args[1]);\n                        if (patchedEventListener !== undefined) {\n                            args[1] = patchedEventListener;\n                        }\n                        else {\n                            args[1] = (event) => {\n                                exposeCurrentFrameAndCurrentTime(nativeContext.currentTime, nativeContext.sampleRate, () => unpatchedEventListener(event));\n                            };\n                            patchedEventListeners.set(unpatchedEventListener, args[1]);\n                        }\n                    }\n                }\n                return addEventListener.call(messageChannel.port1, args[0], args[1], args[2]);\n            };\n        })(messageChannel.port1.addEventListener);\n        messageChannel.port1.removeEventListener = ((removeEventListener) => {\n            return (...args) => {\n                if (args[0] === 'message') {\n                    const patchedEventListener = patchedEventListeners.get(args[1]);\n                    if (patchedEventListener !== undefined) {\n                        patchedEventListeners.delete(args[1]);\n                        args[1] = patchedEventListener;\n                    }\n                }\n                return removeEventListener.call(messageChannel.port1, args[0], args[1], args[2]);\n            };\n        })(messageChannel.port1.removeEventListener);\n        let onmessage = null;\n        Object.defineProperty(messageChannel.port1, 'onmessage', {\n            get: () => onmessage,\n            set: (value) => {\n                if (typeof onmessage === 'function') {\n                    messageChannel.port1.removeEventListener('message', onmessage);\n                }\n                onmessage = typeof value === 'function' ? value : null;\n                if (typeof onmessage === 'function') {\n                    messageChannel.port1.addEventListener('message', onmessage);\n                    messageChannel.port1.start();\n                }\n            }\n        });\n        processorConstructor.prototype.port = messageChannel.port1;\n        let audioWorkletProcessor = null;\n        const audioWorkletProcessorPromise = createAudioWorkletProcessor(nativeContext, nativeAudioWorkletNodeFaker, processorConstructor, options);\n        audioWorkletProcessorPromise.then((dWrkltPrcssr) => (audioWorkletProcessor = dWrkltPrcssr));\n        const inputs = createNestedArrays(options.numberOfInputs, options.channelCount);\n        const outputs = createNestedArrays(options.numberOfOutputs, outputChannelCount);\n        const parameters = processorConstructor.parameterDescriptors === undefined\n            ? []\n            : processorConstructor.parameterDescriptors.reduce((prmtrs, { name }) => ({ ...prmtrs, [name]: new Float32Array(128) }), {});\n        let isActive = true;\n        const disconnectOutputsGraph = () => {\n            if (options.numberOfOutputs > 0) {\n                scriptProcessorNode.disconnect(outputChannelSplitterNode);\n            }\n            for (let i = 0, outputChannelSplitterNodeOutput = 0; i < options.numberOfOutputs; i += 1) {\n                const outputChannelMergerNode = outputChannelMergerNodes[i];\n                for (let j = 0; j < outputChannelCount[i]; j += 1) {\n                    outputChannelSplitterNode.disconnect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\n                }\n                outputChannelSplitterNodeOutput += outputChannelCount[i];\n            }\n        };\n        const activeInputIndexes = new Map();\n        // tslint:disable-next-line:deprecation\n        scriptProcessorNode.onaudioprocess = ({ inputBuffer, outputBuffer }) => {\n            if (audioWorkletProcessor !== null) {\n                const activeInputs = getActiveAudioWorkletNodeInputs(nativeAudioWorkletNodeFaker);\n                for (let i = 0; i < bufferSize; i += 128) {\n                    for (let j = 0; j < options.numberOfInputs; j += 1) {\n                        for (let k = 0; k < options.channelCount; k += 1) {\n                            copyFromChannel(inputBuffer, inputs[j], k, k, i);\n                        }\n                    }\n                    if (processorConstructor.parameterDescriptors !== undefined) {\n                        processorConstructor.parameterDescriptors.forEach(({ name }, index) => {\n                            copyFromChannel(inputBuffer, parameters, name, numberOfInputChannels + index, i);\n                        });\n                    }\n                    for (let j = 0; j < options.numberOfInputs; j += 1) {\n                        for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                            // The byteLength will be 0 when the ArrayBuffer was transferred.\n                            if (outputs[j][k].byteLength === 0) {\n                                outputs[j][k] = new Float32Array(128);\n                            }\n                        }\n                    }\n                    try {\n                        const potentiallyEmptyInputs = inputs.map((input, index) => {\n                            const activeInput = activeInputs[index];\n                            if (activeInput.size > 0) {\n                                activeInputIndexes.set(index, bufferSize / 128);\n                                return input;\n                            }\n                            const count = activeInputIndexes.get(index);\n                            if (count === undefined) {\n                                return [];\n                            }\n                            if (input.every((channelData) => channelData.every((sample) => sample === 0))) {\n                                if (count === 1) {\n                                    activeInputIndexes.delete(index);\n                                }\n                                else {\n                                    activeInputIndexes.set(index, count - 1);\n                                }\n                            }\n                            return input;\n                        });\n                        const activeSourceFlag = exposeCurrentFrameAndCurrentTime(nativeContext.currentTime + i / nativeContext.sampleRate, nativeContext.sampleRate, () => audioWorkletProcessor.process(potentiallyEmptyInputs, outputs, parameters));\n                        isActive = activeSourceFlag;\n                        for (let j = 0, outputChannelSplitterNodeOutput = 0; j < options.numberOfOutputs; j += 1) {\n                            for (let k = 0; k < outputChannelCount[j]; k += 1) {\n                                copyToChannel(outputBuffer, outputs[j], k, outputChannelSplitterNodeOutput + k, i);\n                            }\n                            outputChannelSplitterNodeOutput += outputChannelCount[j];\n                        }\n                    }\n                    catch (error) {\n                        isActive = false;\n                        nativeAudioWorkletNodeFaker.dispatchEvent(new ErrorEvent('processorerror', {\n                            colno: error.colno,\n                            filename: error.filename,\n                            lineno: error.lineno,\n                            message: error.message\n                        }));\n                    }\n                    if (!isActive) {\n                        for (let j = 0; j < options.numberOfInputs; j += 1) {\n                            gainNodes[j].disconnect(inputChannelSplitterNodes[j]);\n                            for (let k = 0; k < options.channelCount; k += 1) {\n                                inputChannelSplitterNodes[i].disconnect(inputChannelMergerNode, k, j * options.channelCount + k);\n                            }\n                        }\n                        if (processorConstructor.parameterDescriptors !== undefined) {\n                            const length = processorConstructor.parameterDescriptors.length;\n                            for (let j = 0; j < length; j += 1) {\n                                const constantSourceNode = constantSourceNodes[j];\n                                constantSourceNode.disconnect(inputChannelMergerNode, 0, numberOfInputChannels + j);\n                                constantSourceNode.stop();\n                            }\n                        }\n                        inputChannelMergerNode.disconnect(scriptProcessorNode);\n                        scriptProcessorNode.onaudioprocess = null; // tslint:disable-line:deprecation\n                        if (isConnected) {\n                            disconnectOutputsGraph();\n                        }\n                        else {\n                            disconnectFakeGraph();\n                        }\n                        break;\n                    }\n                }\n            }\n        };\n        let isConnected = false;\n        // Bug #87: Only Firefox will fire an AudioProcessingEvent if there is no connected output.\n        const nativeGainNode = createNativeGainNode(nativeContext, {\n            channelCount: 1,\n            channelCountMode: 'explicit',\n            channelInterpretation: 'discrete',\n            gain: 0\n        });\n        const connectFakeGraph = () => scriptProcessorNode.connect(nativeGainNode).connect(nativeContext.destination);\n        const disconnectFakeGraph = () => {\n            scriptProcessorNode.disconnect(nativeGainNode);\n            nativeGainNode.disconnect();\n        };\n        const whenConnected = () => {\n            if (isActive) {\n                disconnectFakeGraph();\n                if (options.numberOfOutputs > 0) {\n                    scriptProcessorNode.connect(outputChannelSplitterNode);\n                }\n                for (let i = 0, outputChannelSplitterNodeOutput = 0; i < options.numberOfOutputs; i += 1) {\n                    const outputChannelMergerNode = outputChannelMergerNodes[i];\n                    for (let j = 0; j < outputChannelCount[i]; j += 1) {\n                        outputChannelSplitterNode.connect(outputChannelMergerNode, outputChannelSplitterNodeOutput + j, j);\n                    }\n                    outputChannelSplitterNodeOutput += outputChannelCount[i];\n                }\n            }\n            isConnected = true;\n        };\n        const whenDisconnected = () => {\n            if (isActive) {\n                connectFakeGraph();\n                disconnectOutputsGraph();\n            }\n            isConnected = false;\n        };\n        connectFakeGraph();\n        return monitorConnections(nativeAudioWorkletNodeFaker, whenConnected, whenDisconnected);\n    };\n};\n//# sourceMappingURL=native-audio-worklet-node-faker-factory.js.map","import { NODE_TO_PROCESSOR_MAPS } from '../globals';\nimport { createAudioWorkletProcessorPromise } from './create-audio-worklet-processor-promise';\nexport const createAudioWorkletProcessor = (nativeContext, nativeAudioWorkletNode, processorConstructor, audioWorkletNodeOptions) => {\n    let nodeToProcessorMap = NODE_TO_PROCESSOR_MAPS.get(nativeContext);\n    if (nodeToProcessorMap === undefined) {\n        nodeToProcessorMap = new WeakMap();\n        NODE_TO_PROCESSOR_MAPS.set(nativeContext, nodeToProcessorMap);\n    }\n    const audioWorkletProcessorPromise = createAudioWorkletProcessorPromise(processorConstructor, audioWorkletNodeOptions);\n    nodeToProcessorMap.set(nativeAudioWorkletNode, audioWorkletProcessorPromise);\n    return audioWorkletProcessorPromise;\n};\n//# sourceMappingURL=create-audio-worklet-processor.js.map","import { cloneAudioWorkletNodeOptions } from './clone-audio-worklet-node-options';\nexport const createAudioWorkletProcessorPromise = async (processorConstructor, audioWorkletNodeOptions) => {\n    const clonedAudioWorkletNodeOptions = await cloneAudioWorkletNodeOptions(audioWorkletNodeOptions);\n    return new processorConstructor(clonedAudioWorkletNodeOptions);\n};\n//# sourceMappingURL=create-audio-worklet-processor-promise.js.map","export const cloneAudioWorkletNodeOptions = (audioWorkletNodeOptions) => {\n    return new Promise((resolve, reject) => {\n        const { port1, port2 } = new MessageChannel();\n        port1.onmessage = ({ data }) => {\n            port1.close();\n            port2.close();\n            resolve(data);\n        };\n        port1.onmessageerror = ({ data }) => {\n            port1.close();\n            port2.close();\n            reject(data);\n        };\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\n        port2.postMessage(audioWorkletNodeOptions);\n    });\n};\n//# sourceMappingURL=clone-audio-worklet-node-options.js.map","import { testClonabilityOfAudioWorkletNodeOptions } from '../helpers/test-clonability-of-audio-worklet-node-options';\nexport const createNativeAudioWorkletNodeFactory = (createInvalidStateError, createNativeAudioWorkletNodeFaker, createNativeGainNode, createNotSupportedError, monitorConnections) => {\n    return (nativeContext, baseLatency, nativeAudioWorkletNodeConstructor, name, processorConstructor, options) => {\n        if (nativeAudioWorkletNodeConstructor !== null) {\n            try {\n                const nativeAudioWorkletNode = new nativeAudioWorkletNodeConstructor(nativeContext, name, options);\n                const patchedEventListeners = new Map();\n                let onprocessorerror = null;\n                Object.defineProperties(nativeAudioWorkletNode, {\n                    /*\n                     * Bug #61: Overwriting the property accessors for channelCount and channelCountMode is necessary as long as some\n                     * browsers have no native implementation to achieve a consistent behavior.\n                     */\n                    channelCount: {\n                        get: () => options.channelCount,\n                        set: () => {\n                            throw createInvalidStateError();\n                        }\n                    },\n                    channelCountMode: {\n                        get: () => 'explicit',\n                        set: () => {\n                            throw createInvalidStateError();\n                        }\n                    },\n                    // Bug #156: Chrome and Edge do not yet fire an ErrorEvent.\n                    onprocessorerror: {\n                        get: () => onprocessorerror,\n                        set: (value) => {\n                            if (typeof onprocessorerror === 'function') {\n                                nativeAudioWorkletNode.removeEventListener('processorerror', onprocessorerror);\n                            }\n                            onprocessorerror = typeof value === 'function' ? value : null;\n                            if (typeof onprocessorerror === 'function') {\n                                nativeAudioWorkletNode.addEventListener('processorerror', onprocessorerror);\n                            }\n                        }\n                    }\n                });\n                nativeAudioWorkletNode.addEventListener = ((addEventListener) => {\n                    return (...args) => {\n                        if (args[0] === 'processorerror') {\n                            const unpatchedEventListener = typeof args[1] === 'function'\n                                ? args[1]\n                                : typeof args[1] === 'object' && args[1] !== null && typeof args[1].handleEvent === 'function'\n                                    ? args[1].handleEvent\n                                    : null;\n                            if (unpatchedEventListener !== null) {\n                                const patchedEventListener = patchedEventListeners.get(args[1]);\n                                if (patchedEventListener !== undefined) {\n                                    args[1] = patchedEventListener;\n                                }\n                                else {\n                                    args[1] = (event) => {\n                                        // Bug #178: Chrome and Edge do fire an event of type error.\n                                        if (event.type === 'error') {\n                                            Object.defineProperties(event, {\n                                                type: { value: 'processorerror' }\n                                            });\n                                            unpatchedEventListener(event);\n                                        }\n                                        else {\n                                            unpatchedEventListener(new ErrorEvent(args[0], { ...event }));\n                                        }\n                                    };\n                                    patchedEventListeners.set(unpatchedEventListener, args[1]);\n                                }\n                            }\n                        }\n                        // Bug #178: Chrome and Edge do fire an event of type error.\n                        addEventListener.call(nativeAudioWorkletNode, 'error', args[1], args[2]);\n                        return addEventListener.call(nativeAudioWorkletNode, ...args);\n                    };\n                })(nativeAudioWorkletNode.addEventListener);\n                nativeAudioWorkletNode.removeEventListener = ((removeEventListener) => {\n                    return (...args) => {\n                        if (args[0] === 'processorerror') {\n                            const patchedEventListener = patchedEventListeners.get(args[1]);\n                            if (patchedEventListener !== undefined) {\n                                patchedEventListeners.delete(args[1]);\n                                args[1] = patchedEventListener;\n                            }\n                        }\n                        // Bug #178: Chrome and Edge do fire an event of type error.\n                        removeEventListener.call(nativeAudioWorkletNode, 'error', args[1], args[2]);\n                        return removeEventListener.call(nativeAudioWorkletNode, args[0], args[1], args[2]);\n                    };\n                })(nativeAudioWorkletNode.removeEventListener);\n                /*\n                 * Bug #86: Chrome and Edge do not invoke the process() function if the corresponding AudioWorkletNode is unconnected but\n                 * has an output.\n                 */\n                if (options.numberOfOutputs !== 0) {\n                    const nativeGainNode = createNativeGainNode(nativeContext, {\n                        channelCount: 1,\n                        channelCountMode: 'explicit',\n                        channelInterpretation: 'discrete',\n                        gain: 0\n                    });\n                    nativeAudioWorkletNode.connect(nativeGainNode).connect(nativeContext.destination);\n                    const whenConnected = () => nativeGainNode.disconnect();\n                    const whenDisconnected = () => nativeGainNode.connect(nativeContext.destination);\n                    // @todo Disconnect the connection when the process() function of the AudioWorkletNode returns false.\n                    return monitorConnections(nativeAudioWorkletNode, whenConnected, whenDisconnected);\n                }\n                return nativeAudioWorkletNode;\n            }\n            catch (err) {\n                // Bug #60: Chrome & Edge throw an InvalidStateError instead of a NotSupportedError.\n                if (err.code === 11) {\n                    throw createNotSupportedError();\n                }\n                throw err;\n            }\n        }\n        // Bug #61: Only Chrome & Edge have an implementation of the AudioWorkletNode yet.\n        if (processorConstructor === undefined) {\n            throw createNotSupportedError();\n        }\n        testClonabilityOfAudioWorkletNodeOptions(options);\n        return createNativeAudioWorkletNodeFaker(nativeContext, baseLatency, processorConstructor, options);\n    };\n};\n//# sourceMappingURL=native-audio-worklet-node-factory.js.map","export const testClonabilityOfAudioWorkletNodeOptions = (audioWorkletNodeOptions) => {\n    const { port1 } = new MessageChannel();\n    try {\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\n        port1.postMessage(audioWorkletNodeOptions);\n    }\n    finally {\n        port1.close();\n    }\n};\n//# sourceMappingURL=test-clonability-of-audio-worklet-node-options.js.map","export const createGetBackupOfflineAudioContext = (backupOfflineAudioContextStore) => {\n    return (nativeContext) => {\n        return backupOfflineAudioContextStore.get(nativeContext);\n    };\n};\n//# sourceMappingURL=get-backup-offline-audio-context.js.map","export const createSetActiveAudioWorkletNodeInputs = (activeAudioWorkletNodeInputsStore) => {\n    return (nativeAudioWorkletNode, activeInputs) => {\n        activeAudioWorkletNodeInputsStore.set(nativeAudioWorkletNode, activeInputs);\n    };\n};\n//# sourceMappingURL=set-active-audio-worklet-node-inputs.js.map","export const sanitizeAudioWorkletNodeOptions = (options) => {\n    return {\n        ...options,\n        outputChannelCount: options.outputChannelCount !== undefined\n            ? options.outputChannelCount\n            : options.numberOfInputs === 1 && options.numberOfOutputs === 1\n                ? /*\n                   * Bug #61: This should be the computedNumberOfChannels, but unfortunately that is almost impossible to fake. That's why\n                   * the channelCountMode is required to be 'explicit' as long as there is not a native implementation in every browser. That\n                   * makes sure the computedNumberOfChannels is equivilant to the channelCount which makes it much easier to compute.\n                   */\n                    [options.channelCount]\n                : Array.from({ length: options.numberOfOutputs }, () => 1)\n    };\n};\n//# sourceMappingURL=sanitize-audio-worklet-node-options.js.map","export const testAudioWorkletNodeOptionsClonability = (audioWorkletNodeOptions) => {\n    const { port1, port2 } = new MessageChannel();\n    try {\n        // This will throw an error if the audioWorkletNodeOptions are not clonable.\n        port1.postMessage(audioWorkletNodeOptions);\n    }\n    finally {\n        port1.close();\n        port2.close();\n    }\n};\n//# sourceMappingURL=test-audio-worklet-node-options-clonability.js.map","export const createCreateNativeOfflineAudioContext = (createNotSupportedError, nativeOfflineAudioContextConstructor) => {\n    return (numberOfChannels, length, sampleRate) => {\n        if (nativeOfflineAudioContextConstructor === null) {\n            throw new Error('Missing the native OfflineAudioContext constructor.');\n        }\n        try {\n            return new nativeOfflineAudioContextConstructor(numberOfChannels, length, sampleRate);\n        }\n        catch (err) {\n            // Bug #143, #144 & #146: Safari throws a SyntaxError when numberOfChannels, length or sampleRate are invalid.\n            if (err.name === 'SyntaxError') {\n                throw createNotSupportedError();\n            }\n            throw err;\n        }\n    };\n};\n//# sourceMappingURL=create-native-offline-audio-context.js.map","import { wrapAudioBufferGetChannelDataMethod } from '../helpers/wrap-audio-buffer-get-channel-data-method';\nexport const createStartRendering = (audioBufferStore, cacheTestResult, getAudioNodeRenderer, getUnrenderedAudioWorkletNodes, renderNativeOfflineAudioContext, testAudioBufferCopyChannelMethodsOutOfBoundsSupport, wrapAudioBufferCopyChannelMethods, wrapAudioBufferCopyChannelMethodsOutOfBounds) => {\n    return (destination, nativeOfflineAudioContext) => getAudioNodeRenderer(destination)\n        .render(destination, nativeOfflineAudioContext)\n        /*\n         * Bug #86 & #87: Invoking the renderer of an AudioWorkletNode might be necessary if it has no direct or indirect connection to the\n         * destination.\n         */\n        .then(() => Promise.all(Array.from(getUnrenderedAudioWorkletNodes(nativeOfflineAudioContext)).map((audioWorkletNode) => getAudioNodeRenderer(audioWorkletNode).render(audioWorkletNode, nativeOfflineAudioContext))))\n        .then(() => renderNativeOfflineAudioContext(nativeOfflineAudioContext))\n        .then((audioBuffer) => {\n        // Bug #5: Safari does not support copyFromChannel() and copyToChannel().\n        // Bug #100: Safari does throw a wrong error when calling getChannelData() with an out-of-bounds value.\n        if (typeof audioBuffer.copyFromChannel !== 'function') {\n            wrapAudioBufferCopyChannelMethods(audioBuffer);\n            wrapAudioBufferGetChannelDataMethod(audioBuffer);\n            // Bug #157: Firefox does not allow the bufferOffset to be out-of-bounds.\n        }\n        else if (!cacheTestResult(testAudioBufferCopyChannelMethodsOutOfBoundsSupport, () => testAudioBufferCopyChannelMethodsOutOfBoundsSupport(audioBuffer))) {\n            wrapAudioBufferCopyChannelMethodsOutOfBounds(audioBuffer);\n        }\n        audioBufferStore.add(audioBuffer);\n        return audioBuffer;\n    });\n};\n//# sourceMappingURL=start-rendering.js.map","export const createIsAnyAudioContext = (contextStore, isNativeAudioContext) => {\n    return (anything) => {\n        const nativeContext = contextStore.get(anything);\n        return isNativeAudioContext(nativeContext) || isNativeAudioContext(anything);\n    };\n};\n//# sourceMappingURL=is-any-audio-context.js.map","export const createIsAnyAudioNode = (audioNodeStore, isNativeAudioNode) => {\n    return (anything) => audioNodeStore.has(anything) || isNativeAudioNode(anything);\n};\n//# sourceMappingURL=is-any-audio-node.js.map","export const createIsAnyAudioParam = (audioParamStore, isNativeAudioParam) => {\n    return (anything) => audioParamStore.has(anything) || isNativeAudioParam(anything);\n};\n//# sourceMappingURL=is-any-audio-param.js.map","export const createIsAnyOfflineAudioContext = (contextStore, isNativeOfflineAudioContext) => {\n    return (anything) => {\n        const nativeContext = contextStore.get(anything);\n        return isNativeOfflineAudioContext(nativeContext) || isNativeOfflineAudioContext(anything);\n    };\n};\n//# sourceMappingURL=is-any-offline-audio-context.js.map","/**\n * Test if the arg is undefined\n */\nexport function isUndef(arg) {\n    return arg === undefined;\n}\n/**\n * Test if the arg is not undefined\n */\nexport function isDefined(arg) {\n    return arg !== undefined;\n}\n/**\n * Test if the arg is a function\n */\nexport function isFunction(arg) {\n    return typeof arg === \"function\";\n}\n/**\n * Test if the argument is a number.\n */\nexport function isNumber(arg) {\n    return typeof arg === \"number\";\n}\n/**\n * Test if the given argument is an object literal (i.e. `{}`);\n */\nexport function isObject(arg) {\n    return (Object.prototype.toString.call(arg) === \"[object Object]\" &&\n        arg.constructor === Object);\n}\n/**\n * Test if the argument is a boolean.\n */\nexport function isBoolean(arg) {\n    return typeof arg === \"boolean\";\n}\n/**\n * Test if the argument is an Array\n */\nexport function isArray(arg) {\n    return Array.isArray(arg);\n}\n/**\n * Test if the argument is a string.\n */\nexport function isString(arg) {\n    return typeof arg === \"string\";\n}\n/**\n * Test if the argument is in the form of a note in scientific pitch notation.\n * e.g. \"C4\"\n */\nexport function isNote(arg) {\n    return isString(arg) && /^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(arg);\n}\n//# sourceMappingURL=TypeCheck.js.map","import { isUndef } from \"./TypeCheck.js\";\n/**\n * Assert that the statement is true, otherwise invoke the error.\n * @param statement\n * @param error The message which is passed into an Error\n */\nexport function assert(statement, error) {\n    if (!statement) {\n        throw new Error(error);\n    }\n}\n/**\n * Make sure that the given value is within the range\n */\nexport function assertRange(value, gte, lte = Infinity) {\n    if (!(gte <= value && value <= lte)) {\n        throw new RangeError(`Value must be within [${gte}, ${lte}], got: ${value}`);\n    }\n}\n/**\n * Warn if the context is not running.\n */\nexport function assertContextRunning(context) {\n    // add a warning if the context is not started\n    if (!context.isOffline && context.state !== \"running\") {\n        warn('The AudioContext is \"suspended\". Invoke Tone.start() from a user action to start the audio.');\n    }\n}\n/**\n * If it is currently inside a scheduled callback\n */\nlet isInsideScheduledCallback = false;\nlet printedScheduledWarning = false;\n/**\n * Notify that the following block of code is occurring inside a Transport callback.\n */\nexport function enterScheduledCallback(insideCallback) {\n    isInsideScheduledCallback = insideCallback;\n}\n/**\n * Make sure that a time was passed into\n */\nexport function assertUsedScheduleTime(time) {\n    if (isUndef(time) &&\n        isInsideScheduledCallback &&\n        !printedScheduledWarning) {\n        printedScheduledWarning = true;\n        warn(\"Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing\");\n    }\n}\n/**\n * The default logger is the console\n */\nlet defaultLogger = console;\n/**\n * Set the logging interface\n */\nexport function setLogger(logger) {\n    defaultLogger = logger;\n}\n/**\n * Log anything\n */\nexport function log(...args) {\n    defaultLogger.log(...args);\n}\n/**\n * Warn anything\n */\nexport function warn(...args) {\n    defaultLogger.warn(...args);\n}\n//# sourceMappingURL=Debug.js.map","import { AudioContext as stdAudioContext, AudioWorkletNode as stdAudioWorkletNode, OfflineAudioContext as stdOfflineAudioContext, } from \"standardized-audio-context\";\nimport { assert } from \"../util/Debug.js\";\nimport { isDefined } from \"../util/TypeCheck.js\";\n/**\n * Create a new AudioContext\n */\nexport function createAudioContext(options) {\n    return new stdAudioContext(options);\n}\n/**\n * Create a new OfflineAudioContext\n */\nexport function createOfflineAudioContext(channels, length, sampleRate) {\n    return new stdOfflineAudioContext(channels, length, sampleRate);\n}\n/**\n * A reference to the window object\n * @hidden\n */\nexport const theWindow = typeof self === \"object\" ? self : null;\n/**\n * If the browser has a window object which has an AudioContext\n * @hidden\n */\nexport const hasAudioContext = theWindow &&\n    (theWindow.hasOwnProperty(\"AudioContext\") ||\n        theWindow.hasOwnProperty(\"webkitAudioContext\"));\nexport function createAudioWorkletNode(context, name, options) {\n    assert(isDefined(stdAudioWorkletNode), \"AudioWorkletNode only works in a secure context (https or localhost)\");\n    return new (context instanceof (theWindow === null || theWindow === void 0 ? void 0 : theWindow.BaseAudioContext)\n        ? theWindow === null || theWindow === void 0 ? void 0 : theWindow.AudioWorkletNode\n        : stdAudioWorkletNode)(context, name, options);\n}\n/**\n * This promise resolves to a boolean which indicates if the\n * functionality is supported within the currently used browse.\n * Taken from [standardized-audio-context](https://github.com/chrisguttandin/standardized-audio-context#issupported)\n */\nexport { isSupported as supported } from \"standardized-audio-context\";\n//# sourceMappingURL=AudioContext.js.map","/******************************************************************************\nCopyright (c) Microsoft Corporation.\n\nPermission to use, copy, modify, and/or distribute this software for any\npurpose with or without fee is hereby granted.\n\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\nPERFORMANCE OF THIS SOFTWARE.\n***************************************************************************** */\n/* global Reflect, Promise, SuppressedError, Symbol, Iterator */\n\nvar extendStatics = function(d, b) {\n  extendStatics = Object.setPrototypeOf ||\n      ({ __proto__: [] } instanceof Array && function (d, b) { d.__proto__ = b; }) ||\n      function (d, b) { for (var p in b) if (Object.prototype.hasOwnProperty.call(b, p)) d[p] = b[p]; };\n  return extendStatics(d, b);\n};\n\nexport function __extends(d, b) {\n  if (typeof b !== \"function\" && b !== null)\n      throw new TypeError(\"Class extends value \" + String(b) + \" is not a constructor or null\");\n  extendStatics(d, b);\n  function __() { this.constructor = d; }\n  d.prototype = b === null ? Object.create(b) : (__.prototype = b.prototype, new __());\n}\n\nexport var __assign = function() {\n  __assign = Object.assign || function __assign(t) {\n      for (var s, i = 1, n = arguments.length; i < n; i++) {\n          s = arguments[i];\n          for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p)) t[p] = s[p];\n      }\n      return t;\n  }\n  return __assign.apply(this, arguments);\n}\n\nexport function __rest(s, e) {\n  var t = {};\n  for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\n      t[p] = s[p];\n  if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\n      for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\n          if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\n              t[p[i]] = s[p[i]];\n      }\n  return t;\n}\n\nexport function __decorate(decorators, target, key, desc) {\n  var c = arguments.length, r = c < 3 ? target : desc === null ? desc = Object.getOwnPropertyDescriptor(target, key) : desc, d;\n  if (typeof Reflect === \"object\" && typeof Reflect.decorate === \"function\") r = Reflect.decorate(decorators, target, key, desc);\n  else for (var i = decorators.length - 1; i >= 0; i--) if (d = decorators[i]) r = (c < 3 ? d(r) : c > 3 ? d(target, key, r) : d(target, key)) || r;\n  return c > 3 && r && Object.defineProperty(target, key, r), r;\n}\n\nexport function __param(paramIndex, decorator) {\n  return function (target, key) { decorator(target, key, paramIndex); }\n}\n\nexport function __esDecorate(ctor, descriptorIn, decorators, contextIn, initializers, extraInitializers) {\n  function accept(f) { if (f !== void 0 && typeof f !== \"function\") throw new TypeError(\"Function expected\"); return f; }\n  var kind = contextIn.kind, key = kind === \"getter\" ? \"get\" : kind === \"setter\" ? \"set\" : \"value\";\n  var target = !descriptorIn && ctor ? contextIn[\"static\"] ? ctor : ctor.prototype : null;\n  var descriptor = descriptorIn || (target ? Object.getOwnPropertyDescriptor(target, contextIn.name) : {});\n  var _, done = false;\n  for (var i = decorators.length - 1; i >= 0; i--) {\n      var context = {};\n      for (var p in contextIn) context[p] = p === \"access\" ? {} : contextIn[p];\n      for (var p in contextIn.access) context.access[p] = contextIn.access[p];\n      context.addInitializer = function (f) { if (done) throw new TypeError(\"Cannot add initializers after decoration has completed\"); extraInitializers.push(accept(f || null)); };\n      var result = (0, decorators[i])(kind === \"accessor\" ? { get: descriptor.get, set: descriptor.set } : descriptor[key], context);\n      if (kind === \"accessor\") {\n          if (result === void 0) continue;\n          if (result === null || typeof result !== \"object\") throw new TypeError(\"Object expected\");\n          if (_ = accept(result.get)) descriptor.get = _;\n          if (_ = accept(result.set)) descriptor.set = _;\n          if (_ = accept(result.init)) initializers.unshift(_);\n      }\n      else if (_ = accept(result)) {\n          if (kind === \"field\") initializers.unshift(_);\n          else descriptor[key] = _;\n      }\n  }\n  if (target) Object.defineProperty(target, contextIn.name, descriptor);\n  done = true;\n};\n\nexport function __runInitializers(thisArg, initializers, value) {\n  var useValue = arguments.length > 2;\n  for (var i = 0; i < initializers.length; i++) {\n      value = useValue ? initializers[i].call(thisArg, value) : initializers[i].call(thisArg);\n  }\n  return useValue ? value : void 0;\n};\n\nexport function __propKey(x) {\n  return typeof x === \"symbol\" ? x : \"\".concat(x);\n};\n\nexport function __setFunctionName(f, name, prefix) {\n  if (typeof name === \"symbol\") name = name.description ? \"[\".concat(name.description, \"]\") : \"\";\n  return Object.defineProperty(f, \"name\", { configurable: true, value: prefix ? \"\".concat(prefix, \" \", name) : name });\n};\n\nexport function __metadata(metadataKey, metadataValue) {\n  if (typeof Reflect === \"object\" && typeof Reflect.metadata === \"function\") return Reflect.metadata(metadataKey, metadataValue);\n}\n\nexport function __awaiter(thisArg, _arguments, P, generator) {\n  function adopt(value) { return value instanceof P ? value : new P(function (resolve) { resolve(value); }); }\n  return new (P || (P = Promise))(function (resolve, reject) {\n      function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n      function rejected(value) { try { step(generator[\"throw\"](value)); } catch (e) { reject(e); } }\n      function step(result) { result.done ? resolve(result.value) : adopt(result.value).then(fulfilled, rejected); }\n      step((generator = generator.apply(thisArg, _arguments || [])).next());\n  });\n}\n\nexport function __generator(thisArg, body) {\n  var _ = { label: 0, sent: function() { if (t[0] & 1) throw t[1]; return t[1]; }, trys: [], ops: [] }, f, y, t, g = Object.create((typeof Iterator === \"function\" ? Iterator : Object).prototype);\n  return g.next = verb(0), g[\"throw\"] = verb(1), g[\"return\"] = verb(2), typeof Symbol === \"function\" && (g[Symbol.iterator] = function() { return this; }), g;\n  function verb(n) { return function (v) { return step([n, v]); }; }\n  function step(op) {\n      if (f) throw new TypeError(\"Generator is already executing.\");\n      while (g && (g = 0, op[0] && (_ = 0)), _) try {\n          if (f = 1, y && (t = op[0] & 2 ? y[\"return\"] : op[0] ? y[\"throw\"] || ((t = y[\"return\"]) && t.call(y), 0) : y.next) && !(t = t.call(y, op[1])).done) return t;\n          if (y = 0, t) op = [op[0] & 2, t.value];\n          switch (op[0]) {\n              case 0: case 1: t = op; break;\n              case 4: _.label++; return { value: op[1], done: false };\n              case 5: _.label++; y = op[1]; op = [0]; continue;\n              case 7: op = _.ops.pop(); _.trys.pop(); continue;\n              default:\n                  if (!(t = _.trys, t = t.length > 0 && t[t.length - 1]) && (op[0] === 6 || op[0] === 2)) { _ = 0; continue; }\n                  if (op[0] === 3 && (!t || (op[1] > t[0] && op[1] < t[3]))) { _.label = op[1]; break; }\n                  if (op[0] === 6 && _.label < t[1]) { _.label = t[1]; t = op; break; }\n                  if (t && _.label < t[2]) { _.label = t[2]; _.ops.push(op); break; }\n                  if (t[2]) _.ops.pop();\n                  _.trys.pop(); continue;\n          }\n          op = body.call(thisArg, _);\n      } catch (e) { op = [6, e]; y = 0; } finally { f = t = 0; }\n      if (op[0] & 5) throw op[1]; return { value: op[0] ? op[1] : void 0, done: true };\n  }\n}\n\nexport var __createBinding = Object.create ? (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  var desc = Object.getOwnPropertyDescriptor(m, k);\n  if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\n      desc = { enumerable: true, get: function() { return m[k]; } };\n  }\n  Object.defineProperty(o, k2, desc);\n}) : (function(o, m, k, k2) {\n  if (k2 === undefined) k2 = k;\n  o[k2] = m[k];\n});\n\nexport function __exportStar(m, o) {\n  for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(o, p)) __createBinding(o, m, p);\n}\n\nexport function __values(o) {\n  var s = typeof Symbol === \"function\" && Symbol.iterator, m = s && o[s], i = 0;\n  if (m) return m.call(o);\n  if (o && typeof o.length === \"number\") return {\n      next: function () {\n          if (o && i >= o.length) o = void 0;\n          return { value: o && o[i++], done: !o };\n      }\n  };\n  throw new TypeError(s ? \"Object is not iterable.\" : \"Symbol.iterator is not defined.\");\n}\n\nexport function __read(o, n) {\n  var m = typeof Symbol === \"function\" && o[Symbol.iterator];\n  if (!m) return o;\n  var i = m.call(o), r, ar = [], e;\n  try {\n      while ((n === void 0 || n-- > 0) && !(r = i.next()).done) ar.push(r.value);\n  }\n  catch (error) { e = { error: error }; }\n  finally {\n      try {\n          if (r && !r.done && (m = i[\"return\"])) m.call(i);\n      }\n      finally { if (e) throw e.error; }\n  }\n  return ar;\n}\n\n/** @deprecated */\nexport function __spread() {\n  for (var ar = [], i = 0; i < arguments.length; i++)\n      ar = ar.concat(__read(arguments[i]));\n  return ar;\n}\n\n/** @deprecated */\nexport function __spreadArrays() {\n  for (var s = 0, i = 0, il = arguments.length; i < il; i++) s += arguments[i].length;\n  for (var r = Array(s), k = 0, i = 0; i < il; i++)\n      for (var a = arguments[i], j = 0, jl = a.length; j < jl; j++, k++)\n          r[k] = a[j];\n  return r;\n}\n\nexport function __spreadArray(to, from, pack) {\n  if (pack || arguments.length === 2) for (var i = 0, l = from.length, ar; i < l; i++) {\n      if (ar || !(i in from)) {\n          if (!ar) ar = Array.prototype.slice.call(from, 0, i);\n          ar[i] = from[i];\n      }\n  }\n  return to.concat(ar || Array.prototype.slice.call(from));\n}\n\nexport function __await(v) {\n  return this instanceof __await ? (this.v = v, this) : new __await(v);\n}\n\nexport function __asyncGenerator(thisArg, _arguments, generator) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var g = generator.apply(thisArg, _arguments || []), i, q = [];\n  return i = Object.create((typeof AsyncIterator === \"function\" ? AsyncIterator : Object).prototype), verb(\"next\"), verb(\"throw\"), verb(\"return\", awaitReturn), i[Symbol.asyncIterator] = function () { return this; }, i;\n  function awaitReturn(f) { return function (v) { return Promise.resolve(v).then(f, reject); }; }\n  function verb(n, f) { if (g[n]) { i[n] = function (v) { return new Promise(function (a, b) { q.push([n, v, a, b]) > 1 || resume(n, v); }); }; if (f) i[n] = f(i[n]); } }\n  function resume(n, v) { try { step(g[n](v)); } catch (e) { settle(q[0][3], e); } }\n  function step(r) { r.value instanceof __await ? Promise.resolve(r.value.v).then(fulfill, reject) : settle(q[0][2], r); }\n  function fulfill(value) { resume(\"next\", value); }\n  function reject(value) { resume(\"throw\", value); }\n  function settle(f, v) { if (f(v), q.shift(), q.length) resume(q[0][0], q[0][1]); }\n}\n\nexport function __asyncDelegator(o) {\n  var i, p;\n  return i = {}, verb(\"next\"), verb(\"throw\", function (e) { throw e; }), verb(\"return\"), i[Symbol.iterator] = function () { return this; }, i;\n  function verb(n, f) { i[n] = o[n] ? function (v) { return (p = !p) ? { value: __await(o[n](v)), done: false } : f ? f(v) : v; } : f; }\n}\n\nexport function __asyncValues(o) {\n  if (!Symbol.asyncIterator) throw new TypeError(\"Symbol.asyncIterator is not defined.\");\n  var m = o[Symbol.asyncIterator], i;\n  return m ? m.call(o) : (o = typeof __values === \"function\" ? __values(o) : o[Symbol.iterator](), i = {}, verb(\"next\"), verb(\"throw\"), verb(\"return\"), i[Symbol.asyncIterator] = function () { return this; }, i);\n  function verb(n) { i[n] = o[n] && function (v) { return new Promise(function (resolve, reject) { v = o[n](v), settle(resolve, reject, v.done, v.value); }); }; }\n  function settle(resolve, reject, d, v) { Promise.resolve(v).then(function(v) { resolve({ value: v, done: d }); }, reject); }\n}\n\nexport function __makeTemplateObject(cooked, raw) {\n  if (Object.defineProperty) { Object.defineProperty(cooked, \"raw\", { value: raw }); } else { cooked.raw = raw; }\n  return cooked;\n};\n\nvar __setModuleDefault = Object.create ? (function(o, v) {\n  Object.defineProperty(o, \"default\", { enumerable: true, value: v });\n}) : function(o, v) {\n  o[\"default\"] = v;\n};\n\nvar ownKeys = function(o) {\n  ownKeys = Object.getOwnPropertyNames || function (o) {\n    var ar = [];\n    for (var k in o) if (Object.prototype.hasOwnProperty.call(o, k)) ar[ar.length] = k;\n    return ar;\n  };\n  return ownKeys(o);\n};\n\nexport function __importStar(mod) {\n  if (mod && mod.__esModule) return mod;\n  var result = {};\n  if (mod != null) for (var k = ownKeys(mod), i = 0; i < k.length; i++) if (k[i] !== \"default\") __createBinding(result, mod, k[i]);\n  __setModuleDefault(result, mod);\n  return result;\n}\n\nexport function __importDefault(mod) {\n  return (mod && mod.__esModule) ? mod : { default: mod };\n}\n\nexport function __classPrivateFieldGet(receiver, state, kind, f) {\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a getter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot read private member from an object whose class did not declare it\");\n  return kind === \"m\" ? f : kind === \"a\" ? f.call(receiver) : f ? f.value : state.get(receiver);\n}\n\nexport function __classPrivateFieldSet(receiver, state, value, kind, f) {\n  if (kind === \"m\") throw new TypeError(\"Private method is not writable\");\n  if (kind === \"a\" && !f) throw new TypeError(\"Private accessor was defined without a setter\");\n  if (typeof state === \"function\" ? receiver !== state || !f : !state.has(receiver)) throw new TypeError(\"Cannot write private member to an object whose class did not declare it\");\n  return (kind === \"a\" ? f.call(receiver, value) : f ? f.value = value : state.set(receiver, value)), value;\n}\n\nexport function __classPrivateFieldIn(state, receiver) {\n  if (receiver === null || (typeof receiver !== \"object\" && typeof receiver !== \"function\")) throw new TypeError(\"Cannot use 'in' operator on non-object\");\n  return typeof state === \"function\" ? receiver === state : state.has(receiver);\n}\n\nexport function __addDisposableResource(env, value, async) {\n  if (value !== null && value !== void 0) {\n    if (typeof value !== \"object\" && typeof value !== \"function\") throw new TypeError(\"Object expected.\");\n    var dispose, inner;\n    if (async) {\n      if (!Symbol.asyncDispose) throw new TypeError(\"Symbol.asyncDispose is not defined.\");\n      dispose = value[Symbol.asyncDispose];\n    }\n    if (dispose === void 0) {\n      if (!Symbol.dispose) throw new TypeError(\"Symbol.dispose is not defined.\");\n      dispose = value[Symbol.dispose];\n      if (async) inner = dispose;\n    }\n    if (typeof dispose !== \"function\") throw new TypeError(\"Object not disposable.\");\n    if (inner) dispose = function() { try { inner.call(this); } catch (e) { return Promise.reject(e); } };\n    env.stack.push({ value: value, dispose: dispose, async: async });\n  }\n  else if (async) {\n    env.stack.push({ async: true });\n  }\n  return value;\n}\n\nvar _SuppressedError = typeof SuppressedError === \"function\" ? SuppressedError : function (error, suppressed, message) {\n  var e = new Error(message);\n  return e.name = \"SuppressedError\", e.error = error, e.suppressed = suppressed, e;\n};\n\nexport function __disposeResources(env) {\n  function fail(e) {\n    env.error = env.hasError ? new _SuppressedError(e, env.error, \"An error was suppressed during disposal.\") : e;\n    env.hasError = true;\n  }\n  var r, s = 0;\n  function next() {\n    while (r = env.stack.pop()) {\n      try {\n        if (!r.async && s === 1) return s = 0, env.stack.push(r), Promise.resolve().then(next);\n        if (r.dispose) {\n          var result = r.dispose.call(r.value);\n          if (r.async) return s |= 2, Promise.resolve(result).then(next, function(e) { fail(e); return next(); });\n        }\n        else s |= 1;\n      }\n      catch (e) {\n        fail(e);\n      }\n    }\n    if (s === 1) return env.hasError ? Promise.reject(env.error) : Promise.resolve();\n    if (env.hasError) throw env.error;\n  }\n  return next();\n}\n\nexport function __rewriteRelativeImportExtension(path, preserveJsx) {\n  if (typeof path === \"string\" && /^\\.\\.?\\//.test(path)) {\n      return path.replace(/\\.(tsx)$|((?:\\.d)?)((?:\\.[^./]+?)?)\\.([cm]?)ts$/i, function (m, tsx, d, ext, cm) {\n          return tsx ? preserveJsx ? \".jsx\" : \".js\" : d && (!ext || !cm) ? m : (d + ext + \".\" + cm.toLowerCase() + \"js\");\n      });\n  }\n  return path;\n}\n\nexport default {\n  __extends,\n  __assign,\n  __rest,\n  __decorate,\n  __param,\n  __esDecorate,\n  __runInitializers,\n  __propKey,\n  __setFunctionName,\n  __metadata,\n  __awaiter,\n  __generator,\n  __createBinding,\n  __exportStar,\n  __values,\n  __read,\n  __spread,\n  __spreadArrays,\n  __spreadArray,\n  __await,\n  __asyncGenerator,\n  __asyncDelegator,\n  __asyncValues,\n  __makeTemplateObject,\n  __importStar,\n  __importDefault,\n  __classPrivateFieldGet,\n  __classPrivateFieldSet,\n  __classPrivateFieldIn,\n  __addDisposableResource,\n  __disposeResources,\n  __rewriteRelativeImportExtension,\n};\n","/**\n * A class which provides a reliable callback using either\n * a Web Worker, or if that isn't supported, falls back to setTimeout.\n */\nexport class Ticker {\n    constructor(callback, type, updateInterval, contextSampleRate) {\n        this._callback = callback;\n        this._type = type;\n        this._minimumUpdateInterval = Math.max(128 / (contextSampleRate || 44100), 0.001);\n        this.updateInterval = updateInterval;\n        // create the clock source for the first time\n        this._createClock();\n    }\n    /**\n     * Generate a web worker\n     */\n    _createWorker() {\n        const blob = new Blob([\n            /* javascript */ `\n\t\t\t// the initial timeout time\n\t\t\tlet timeoutTime =  ${(this._updateInterval * 1000).toFixed(1)};\n\t\t\t// onmessage callback\n\t\t\tself.onmessage = function(msg){\n\t\t\t\ttimeoutTime = parseInt(msg.data);\n\t\t\t};\n\t\t\t// the tick function which posts a message\n\t\t\t// and schedules a new tick\n\t\t\tfunction tick(){\n\t\t\t\tsetTimeout(tick, timeoutTime);\n\t\t\t\tself.postMessage('tick');\n\t\t\t}\n\t\t\t// call tick initially\n\t\t\ttick();\n\t\t\t`,\n        ], { type: \"text/javascript\" });\n        const blobUrl = URL.createObjectURL(blob);\n        const worker = new Worker(blobUrl);\n        worker.onmessage = this._callback.bind(this);\n        this._worker = worker;\n    }\n    /**\n     * Create a timeout loop\n     */\n    _createTimeout() {\n        this._timeout = setTimeout(() => {\n            this._createTimeout();\n            this._callback();\n        }, this._updateInterval * 1000);\n    }\n    /**\n     * Create the clock source.\n     */\n    _createClock() {\n        if (this._type === \"worker\") {\n            try {\n                this._createWorker();\n            }\n            catch (e) {\n                // workers not supported, fallback to timeout\n                this._type = \"timeout\";\n                this._createClock();\n            }\n        }\n        else if (this._type === \"timeout\") {\n            this._createTimeout();\n        }\n    }\n    /**\n     * Clean up the current clock source\n     */\n    _disposeClock() {\n        if (this._timeout) {\n            clearTimeout(this._timeout);\n        }\n        if (this._worker) {\n            this._worker.terminate();\n            this._worker.onmessage = null;\n        }\n    }\n    /**\n     * The rate in seconds the ticker will update\n     */\n    get updateInterval() {\n        return this._updateInterval;\n    }\n    set updateInterval(interval) {\n        var _a;\n        this._updateInterval = Math.max(interval, this._minimumUpdateInterval);\n        if (this._type === \"worker\") {\n            (_a = this._worker) === null || _a === void 0 ? void 0 : _a.postMessage(this._updateInterval * 1000);\n        }\n    }\n    /**\n     * The type of the ticker, either a worker or a timeout\n     */\n    get type() {\n        return this._type;\n    }\n    set type(type) {\n        this._disposeClock();\n        this._type = type;\n        this._createClock();\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        this._disposeClock();\n    }\n}\n//# sourceMappingURL=Ticker.js.map","import { AudioBuffer, isAnyAudioContext, isAnyAudioNode, isAnyAudioParam, isAnyOfflineAudioContext, } from \"standardized-audio-context\";\n/**\n * Test if the given value is an instanceof AudioParam\n */\nexport function isAudioParam(arg) {\n    return isAnyAudioParam(arg);\n}\n/**\n * Test if the given value is an instanceof AudioNode\n */\nexport function isAudioNode(arg) {\n    return isAnyAudioNode(arg);\n}\n/**\n * Test if the arg is instanceof an OfflineAudioContext\n */\nexport function isOfflineAudioContext(arg) {\n    return isAnyOfflineAudioContext(arg);\n}\n/**\n * Test if the arg is an instanceof AudioContext\n */\nexport function isAudioContext(arg) {\n    return isAnyAudioContext(arg);\n}\n/**\n * Test if the arg is instanceof an AudioBuffer\n */\nexport function isAudioBuffer(arg) {\n    return arg instanceof AudioBuffer;\n}\n//# sourceMappingURL=AdvancedTypeCheck.js.map","import { isAudioBuffer, isAudioNode, isAudioParam, } from \"./AdvancedTypeCheck.js\";\nimport { isDefined, isObject, isUndef } from \"./TypeCheck.js\";\n/**\n * Some objects should not be merged\n */\nfunction noCopy(key, arg) {\n    return (key === \"value\" ||\n        isAudioParam(arg) ||\n        isAudioNode(arg) ||\n        isAudioBuffer(arg));\n}\n/**\n * Recursively merge an object\n * @param target the object to merge into\n * @param sources the source objects to merge\n */\nexport function deepMerge(target, ...sources) {\n    if (!sources.length) {\n        return target;\n    }\n    const source = sources.shift();\n    if (isObject(target) && isObject(source)) {\n        for (const key in source) {\n            if (noCopy(key, source[key])) {\n                target[key] = source[key];\n            }\n            else if (isObject(source[key])) {\n                if (!target[key]) {\n                    Object.assign(target, { [key]: {} });\n                }\n                deepMerge(target[key], source[key]);\n            }\n            else {\n                Object.assign(target, { [key]: source[key] });\n            }\n        }\n    }\n    // @ts-ignore\n    return deepMerge(target, ...sources);\n}\n/**\n * Returns true if the two arrays have the same value for each of the elements\n */\nexport function deepEquals(arrayA, arrayB) {\n    return (arrayA.length === arrayB.length &&\n        arrayA.every((element, index) => arrayB[index] === element));\n}\n/**\n * Convert an args array into an object.\n * @internal\n */\nexport function optionsFromArguments(defaults, argsArray, keys = [], objKey) {\n    const opts = {};\n    const args = Array.from(argsArray);\n    // if the first argument is an object and has an object key\n    if (isObject(args[0]) && objKey && !Reflect.has(args[0], objKey)) {\n        // if it's not part of the defaults\n        const partOfDefaults = Object.keys(args[0]).some((key) => Reflect.has(defaults, key));\n        if (!partOfDefaults) {\n            // merge that key\n            deepMerge(opts, { [objKey]: args[0] });\n            // remove the obj key from the keys\n            keys.splice(keys.indexOf(objKey), 1);\n            // shift the first argument off\n            args.shift();\n        }\n    }\n    if (args.length === 1 && isObject(args[0])) {\n        deepMerge(opts, args[0]);\n    }\n    else {\n        for (let i = 0; i < keys.length; i++) {\n            if (isDefined(args[i])) {\n                opts[keys[i]] = args[i];\n            }\n        }\n    }\n    return deepMerge(defaults, opts);\n}\n/**\n * Return this instances default values by calling Constructor.getDefaults()\n */\nexport function getDefaultsFromInstance(instance) {\n    return instance.constructor.getDefaults();\n}\n/**\n * Returns the fallback if the given object is undefined.\n * Take an array of arguments and return a formatted options object.\n * @internal\n */\nexport function defaultArg(given, fallback) {\n    if (isUndef(given)) {\n        return fallback;\n    }\n    else {\n        return given;\n    }\n}\n/**\n * Remove all of the properties belonging to omit from obj.\n */\nexport function omitFromObject(obj, omit) {\n    omit.forEach((prop) => {\n        if (Reflect.has(obj, prop)) {\n            delete obj[prop];\n        }\n    });\n    return obj;\n}\n//# sourceMappingURL=Defaults.js.map","/**\n * Tone.js\n * @author Yotam Mann\n * @license http://opensource.org/licenses/MIT MIT License\n * @copyright 2014-2024 Yotam Mann\n */\nimport { version } from \"../version.js\";\nimport { theWindow } from \"./context/AudioContext.js\";\nimport { log } from \"./util/Debug.js\";\n/**\n * Tone is the base class of all other classes.\n *\n * @category Core\n * @constructor\n */\nexport class Tone {\n    constructor() {\n        //-------------------------------------\n        // \tDEBUGGING\n        //-------------------------------------\n        /**\n         * Set this debug flag to log all events that happen in this class.\n         */\n        this.debug = false;\n        //-------------------------------------\n        // \tDISPOSING\n        //-------------------------------------\n        /**\n         * Indicates if the instance was disposed\n         */\n        this._wasDisposed = false;\n    }\n    /**\n     * Returns all of the default options belonging to the class.\n     */\n    static getDefaults() {\n        return {};\n    }\n    /**\n     * Prints the outputs to the console log for debugging purposes.\n     * Prints the contents only if either the object has a property\n     * called `debug` set to true, or a variable called TONE_DEBUG_CLASS\n     * is set to the name of the class.\n     * @example\n     * const osc = new Tone.Oscillator();\n     * // prints all logs originating from this oscillator\n     * osc.debug = true;\n     * // calls to start/stop will print in the console\n     * osc.start();\n     */\n    log(...args) {\n        // if the object is either set to debug = true\n        // or if there is a string on the Tone.global.with the class name\n        if (this.debug ||\n            (theWindow && this.toString() === theWindow.TONE_DEBUG_CLASS)) {\n            log(this, ...args);\n        }\n    }\n    /**\n     * disconnect and dispose.\n     */\n    dispose() {\n        this._wasDisposed = true;\n        return this;\n    }\n    /**\n     * Indicates if the instance was disposed. 'Disposing' an\n     * instance means that all of the Web Audio nodes that were\n     * created for the instance are disconnected and freed for garbage collection.\n     */\n    get disposed() {\n        return this._wasDisposed;\n    }\n    /**\n     * Convert the class to a string\n     * @example\n     * const osc = new Tone.Oscillator();\n     * console.log(osc.toString());\n     */\n    toString() {\n        return this.name;\n    }\n}\n/**\n * The version number semver\n */\nTone.version = version;\n//# sourceMappingURL=Tone.js.map","/**\n * The threshold for correctness for operators. Less than one sample even\n * at very high sampling rates (e.g. `1e-6 < 1 / 192000`).\n */\nconst EPSILON = 1e-6;\n/**\n * Test if A is greater than B\n */\nexport function GT(a, b) {\n    return a > b + EPSILON;\n}\n/**\n * Test if A is greater than or equal to B\n */\nexport function GTE(a, b) {\n    return GT(a, b) || EQ(a, b);\n}\n/**\n * Test if A is less than B\n */\nexport function LT(a, b) {\n    return a + EPSILON < b;\n}\n/**\n * Test if A is less than B\n */\nexport function EQ(a, b) {\n    return Math.abs(a - b) < EPSILON;\n}\n/**\n * Clamp the value within the given range\n */\nexport function clamp(value, min, max) {\n    return Math.max(Math.min(value, max), min);\n}\n//# sourceMappingURL=Math.js.map","import { Tone } from \"../Tone.js\";\nimport { optionsFromArguments } from \"./Defaults.js\";\nimport { assert } from \"./Debug.js\";\nimport { EQ, GT, GTE, LT } from \"./Math.js\";\n/**\n * A Timeline class for scheduling and maintaining state\n * along a timeline. All events must have a \"time\" property.\n * Internally, events are stored in time order for fast\n * retrieval.\n * @internal\n */\nexport class Timeline extends Tone {\n    constructor() {\n        super();\n        this.name = \"Timeline\";\n        /**\n         * The array of scheduled timeline events\n         */\n        this._timeline = [];\n        const options = optionsFromArguments(Timeline.getDefaults(), arguments, [\"memory\"]);\n        this.memory = options.memory;\n        this.increasing = options.increasing;\n    }\n    static getDefaults() {\n        return {\n            memory: Infinity,\n            increasing: false,\n        };\n    }\n    /**\n     * The number of items in the timeline.\n     */\n    get length() {\n        return this._timeline.length;\n    }\n    /**\n     * Insert an event object onto the timeline. Events must have a \"time\" attribute.\n     * @param event  The event object to insert into the timeline.\n     */\n    add(event) {\n        // the event needs to have a time attribute\n        assert(Reflect.has(event, \"time\"), \"Timeline: events must have a time attribute\");\n        event.time = event.time.valueOf();\n        if (this.increasing && this.length) {\n            const lastValue = this._timeline[this.length - 1];\n            assert(GTE(event.time, lastValue.time), \"The time must be greater than or equal to the last scheduled time\");\n            this._timeline.push(event);\n        }\n        else {\n            const index = this._search(event.time);\n            this._timeline.splice(index + 1, 0, event);\n        }\n        // if the length is more than the memory, remove the previous ones\n        if (this.length > this.memory) {\n            const diff = this.length - this.memory;\n            this._timeline.splice(0, diff);\n        }\n        return this;\n    }\n    /**\n     * Remove an event from the timeline.\n     * @param  {Object}  event  The event object to remove from the list.\n     * @returns {Timeline} this\n     */\n    remove(event) {\n        const index = this._timeline.indexOf(event);\n        if (index !== -1) {\n            this._timeline.splice(index, 1);\n        }\n        return this;\n    }\n    /**\n     * Get the nearest event whose time is less than or equal to the given time.\n     * @param  time  The time to query.\n     */\n    get(time, param = \"time\") {\n        const index = this._search(time, param);\n        if (index !== -1) {\n            return this._timeline[index];\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Return the first event in the timeline without removing it\n     * @returns {Object} The first event object\n     * @deprecated\n     */\n    peek() {\n        return this._timeline[0];\n    }\n    /**\n     * Return the first event in the timeline and remove it\n     * @deprecated\n     */\n    shift() {\n        return this._timeline.shift();\n    }\n    /**\n     * Get the event which is scheduled after the given time.\n     * @param  time  The time to query.\n     */\n    getAfter(time, param = \"time\") {\n        const index = this._search(time, param);\n        if (index + 1 < this._timeline.length) {\n            return this._timeline[index + 1];\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Get the event before the event at the given time.\n     * @param  time  The time to query.\n     */\n    getBefore(time) {\n        const len = this._timeline.length;\n        // if it's after the last item, return the last item\n        if (len > 0 && this._timeline[len - 1].time < time) {\n            return this._timeline[len - 1];\n        }\n        const index = this._search(time);\n        if (index - 1 >= 0) {\n            return this._timeline[index - 1];\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Cancel events at and after the given time\n     * @param  after  The time to query.\n     */\n    cancel(after) {\n        if (this._timeline.length > 1) {\n            let index = this._search(after);\n            if (index >= 0) {\n                if (EQ(this._timeline[index].time, after)) {\n                    // get the first item with that time\n                    for (let i = index; i >= 0; i--) {\n                        if (EQ(this._timeline[i].time, after)) {\n                            index = i;\n                        }\n                        else {\n                            break;\n                        }\n                    }\n                    this._timeline = this._timeline.slice(0, index);\n                }\n                else {\n                    this._timeline = this._timeline.slice(0, index + 1);\n                }\n            }\n            else {\n                this._timeline = [];\n            }\n        }\n        else if (this._timeline.length === 1) {\n            // the first item's time\n            if (GTE(this._timeline[0].time, after)) {\n                this._timeline = [];\n            }\n        }\n        return this;\n    }\n    /**\n     * Cancel events before or equal to the given time.\n     * @param  time  The time to cancel before.\n     */\n    cancelBefore(time) {\n        const index = this._search(time);\n        if (index >= 0) {\n            this._timeline = this._timeline.slice(index + 1);\n        }\n        return this;\n    }\n    /**\n     * Returns the previous event if there is one. null otherwise\n     * @param  event The event to find the previous one of\n     * @return The event right before the given event\n     */\n    previousEvent(event) {\n        const index = this._timeline.indexOf(event);\n        if (index > 0) {\n            return this._timeline[index - 1];\n        }\n        else {\n            return null;\n        }\n    }\n    /**\n     * Does a binary search on the timeline array and returns the\n     * nearest event index whose time is after or equal to the given time.\n     * If a time is searched before the first index in the timeline, -1 is returned.\n     * If the time is after the end, the index of the last item is returned.\n     */\n    _search(time, param = \"time\") {\n        if (this._timeline.length === 0) {\n            return -1;\n        }\n        let beginning = 0;\n        const len = this._timeline.length;\n        let end = len;\n        if (len > 0 && this._timeline[len - 1][param] <= time) {\n            return len - 1;\n        }\n        while (beginning < end) {\n            // calculate the midpoint for roughly equal partition\n            let midPoint = Math.floor(beginning + (end - beginning) / 2);\n            const event = this._timeline[midPoint];\n            const nextEvent = this._timeline[midPoint + 1];\n            if (EQ(event[param], time)) {\n                // choose the last one that has the same time\n                for (let i = midPoint; i < this._timeline.length; i++) {\n                    const testEvent = this._timeline[i];\n                    if (EQ(testEvent[param], time)) {\n                        midPoint = i;\n                    }\n                    else {\n                        break;\n                    }\n                }\n                return midPoint;\n            }\n            else if (LT(event[param], time) && GT(nextEvent[param], time)) {\n                return midPoint;\n            }\n            else if (GT(event[param], time)) {\n                // search lower\n                end = midPoint;\n            }\n            else {\n                // search upper\n                beginning = midPoint + 1;\n            }\n        }\n        return -1;\n    }\n    /**\n     * Internal iterator. Applies extra safety checks for\n     * removing items from the array.\n     */\n    _iterate(callback, lowerBound = 0, upperBound = this._timeline.length - 1) {\n        this._timeline.slice(lowerBound, upperBound + 1).forEach(callback);\n    }\n    /**\n     * Iterate over everything in the array\n     * @param  callback The callback to invoke with every item\n     */\n    forEach(callback) {\n        this._iterate(callback);\n        return this;\n    }\n    /**\n     * Iterate over everything in the array at or before the given time.\n     * @param  time The time to check if items are before\n     * @param  callback The callback to invoke with every item\n     */\n    forEachBefore(time, callback) {\n        // iterate over the items in reverse so that removing an item doesn't break things\n        const upperBound = this._search(time);\n        if (upperBound !== -1) {\n            this._iterate(callback, 0, upperBound);\n        }\n        return this;\n    }\n    /**\n     * Iterate over everything in the array after the given time.\n     * @param  time The time to check if items are before\n     * @param  callback The callback to invoke with every item\n     */\n    forEachAfter(time, callback) {\n        // iterate over the items in reverse so that removing an item doesn't break things\n        const lowerBound = this._search(time);\n        this._iterate(callback, lowerBound + 1);\n        return this;\n    }\n    /**\n     * Iterate over everything in the array between the startTime and endTime.\n     * The timerange is inclusive of the startTime, but exclusive of the endTime.\n     * range = [startTime, endTime).\n     * @param  startTime The time to check if items are before\n     * @param  endTime The end of the test interval.\n     * @param  callback The callback to invoke with every item\n     */\n    forEachBetween(startTime, endTime, callback) {\n        let lowerBound = this._search(startTime);\n        let upperBound = this._search(endTime);\n        if (lowerBound !== -1 && upperBound !== -1) {\n            if (this._timeline[lowerBound].time !== startTime) {\n                lowerBound += 1;\n            }\n            // exclusive of the end time\n            if (this._timeline[upperBound].time === endTime) {\n                upperBound -= 1;\n            }\n            this._iterate(callback, lowerBound, upperBound);\n        }\n        else if (lowerBound === -1) {\n            this._iterate(callback, 0, upperBound);\n        }\n        return this;\n    }\n    /**\n     * Iterate over everything in the array at or after the given time. Similar to\n     * forEachAfter, but includes the item(s) at the given time.\n     * @param  time The time to check if items are before\n     * @param  callback The callback to invoke with every item\n     */\n    forEachFrom(time, callback) {\n        // iterate over the items in reverse so that removing an item doesn't break things\n        let lowerBound = this._search(time);\n        // work backwards until the event time is less than time\n        while (lowerBound >= 0 && this._timeline[lowerBound].time >= time) {\n            lowerBound--;\n        }\n        this._iterate(callback, lowerBound + 1);\n        return this;\n    }\n    /**\n     * Iterate over everything in the array at the given time\n     * @param  time The time to check if items are before\n     * @param  callback The callback to invoke with every item\n     */\n    forEachAtTime(time, callback) {\n        // iterate over the items in reverse so that removing an item doesn't break things\n        const upperBound = this._search(time);\n        if (upperBound !== -1 && EQ(this._timeline[upperBound].time, time)) {\n            let lowerBound = upperBound;\n            for (let i = upperBound; i >= 0; i--) {\n                if (EQ(this._timeline[i].time, time)) {\n                    lowerBound = i;\n                }\n                else {\n                    break;\n                }\n            }\n            this._iterate((event) => {\n                callback(event);\n            }, lowerBound, upperBound);\n        }\n        return this;\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this._timeline = [];\n        return this;\n    }\n}\n//# sourceMappingURL=Timeline.js.map","/**\n * Array of callbacks to invoke when a new context is created\n */\nconst notifyNewContext = [];\n/**\n * Used internally to setup a new Context\n */\nexport function onContextInit(cb) {\n    notifyNewContext.push(cb);\n}\n/**\n * Invoke any classes which need to also be initialized when a new context is created.\n */\nexport function initializeContext(ctx) {\n    // add any additional modules\n    notifyNewContext.forEach((cb) => cb(ctx));\n}\n/**\n * Array of callbacks to invoke when a new context is closed\n */\nconst notifyCloseContext = [];\n/**\n * Used internally to tear down a Context\n */\nexport function onContextClose(cb) {\n    notifyCloseContext.push(cb);\n}\nexport function closeContext(ctx) {\n    // remove any additional modules\n    notifyCloseContext.forEach((cb) => cb(ctx));\n}\n//# sourceMappingURL=ContextInitialization.js.map","import { Tone } from \"../Tone.js\";\nimport { isUndef } from \"./TypeCheck.js\";\n/**\n * Emitter gives classes which extend it\n * the ability to listen for and emit events.\n * Inspiration and reference from Jerome Etienne's [MicroEvent](https://github.com/jeromeetienne/microevent.js).\n * MIT (c) 2011 Jerome Etienne.\n * @category Core\n */\nexport class Emitter extends Tone {\n    constructor() {\n        super(...arguments);\n        this.name = \"Emitter\";\n    }\n    /**\n     * Bind a callback to a specific event.\n     * @param  event     The name of the event to listen for.\n     * @param  callback  The callback to invoke when the event is emitted\n     */\n    on(event, callback) {\n        // split the event\n        const events = event.split(/\\W+/);\n        events.forEach((eventName) => {\n            if (isUndef(this._events)) {\n                this._events = {};\n            }\n            if (!this._events.hasOwnProperty(eventName)) {\n                this._events[eventName] = [];\n            }\n            this._events[eventName].push(callback);\n        });\n        return this;\n    }\n    /**\n     * Bind a callback which is only invoked once\n     * @param  event     The name of the event to listen for.\n     * @param  callback  The callback to invoke when the event is emitted\n     */\n    once(event, callback) {\n        const boundCallback = (...args) => {\n            // invoke the callback\n            callback(...args);\n            // remove the event\n            this.off(event, boundCallback);\n        };\n        this.on(event, boundCallback);\n        return this;\n    }\n    /**\n     * Remove the event listener.\n     * @param  event     The event to stop listening to.\n     * @param  callback  The callback which was bound to the event with Emitter.on.\n     *                   If no callback is given, all callbacks events are removed.\n     */\n    off(event, callback) {\n        const events = event.split(/\\W+/);\n        events.forEach((eventName) => {\n            if (isUndef(this._events)) {\n                this._events = {};\n            }\n            if (this._events.hasOwnProperty(eventName)) {\n                if (isUndef(callback)) {\n                    this._events[eventName] = [];\n                }\n                else {\n                    const eventList = this._events[eventName];\n                    for (let i = eventList.length - 1; i >= 0; i--) {\n                        if (eventList[i] === callback) {\n                            eventList.splice(i, 1);\n                        }\n                    }\n                }\n            }\n        });\n        return this;\n    }\n    /**\n     * Invoke all of the callbacks bound to the event\n     * with any arguments passed in.\n     * @param  event  The name of the event.\n     * @param args The arguments to pass to the functions listening.\n     */\n    emit(event, ...args) {\n        if (this._events) {\n            if (this._events.hasOwnProperty(event)) {\n                const eventList = this._events[event].slice(0);\n                for (let i = 0, len = eventList.length; i < len; i++) {\n                    eventList[i].apply(this, args);\n                }\n            }\n        }\n        return this;\n    }\n    /**\n     * Add Emitter functions (on/off/emit) to the object\n     */\n    static mixin(constr) {\n        // instance._events = {};\n        [\"on\", \"once\", \"off\", \"emit\"].forEach((name) => {\n            const property = Object.getOwnPropertyDescriptor(Emitter.prototype, name);\n            Object.defineProperty(constr.prototype, name, property);\n        });\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        super.dispose();\n        this._events = undefined;\n        return this;\n    }\n}\n//# sourceMappingURL=Emitter.js.map","import { Emitter } from \"../util/Emitter.js\";\nexport class BaseContext extends Emitter {\n    constructor() {\n        super(...arguments);\n        this.isOffline = false;\n    }\n    /*\n     * This is a placeholder so that JSON.stringify does not throw an error\n     * This matches what JSON.stringify(audioContext) returns on a native\n     * audioContext instance.\n     */\n    toJSON() {\n        return {};\n    }\n}\n//# sourceMappingURL=BaseContext.js.map","import { __awaiter } from \"tslib\";\nimport { Ticker } from \"../clock/Ticker.js\";\nimport { isAudioContext } from \"../util/AdvancedTypeCheck.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { Timeline } from \"../util/Timeline.js\";\nimport { isDefined } from \"../util/TypeCheck.js\";\nimport { createAudioContext, createAudioWorkletNode, } from \"./AudioContext.js\";\nimport { closeContext, initializeContext } from \"./ContextInitialization.js\";\nimport { BaseContext } from \"./BaseContext.js\";\nimport { assert } from \"../util/Debug.js\";\n/**\n * Wrapper around the native AudioContext.\n * @category Core\n */\nexport class Context extends BaseContext {\n    constructor() {\n        var _a, _b;\n        super();\n        this.name = \"Context\";\n        /**\n         * An object containing all of the constants AudioBufferSourceNodes\n         */\n        this._constants = new Map();\n        /**\n         * All of the setTimeout events.\n         */\n        this._timeouts = new Timeline();\n        /**\n         * The timeout id counter\n         */\n        this._timeoutIds = 0;\n        /**\n         * Private indicator if the context has been initialized\n         */\n        this._initialized = false;\n        /**\n         * Private indicator if a close() has been called on the context, since close is async\n         */\n        this._closeStarted = false;\n        /**\n         * Indicates if the context is an OfflineAudioContext or an AudioContext\n         */\n        this.isOffline = false;\n        //--------------------------------------------\n        // AUDIO WORKLET\n        //--------------------------------------------\n        /**\n         * Maps a module name to promise of the addModule method\n         */\n        this._workletPromise = null;\n        const options = optionsFromArguments(Context.getDefaults(), arguments, [\n            \"context\",\n        ]);\n        if (options.context) {\n            this._context = options.context;\n            // custom context provided, latencyHint unknown (unless explicitly provided in options)\n            this._latencyHint = ((_a = arguments[0]) === null || _a === void 0 ? void 0 : _a.latencyHint) || \"\";\n        }\n        else {\n            this._context = createAudioContext({\n                latencyHint: options.latencyHint,\n            });\n            this._latencyHint = options.latencyHint;\n        }\n        this._ticker = new Ticker(this.emit.bind(this, \"tick\"), options.clockSource, options.updateInterval, this._context.sampleRate);\n        this.on(\"tick\", this._timeoutLoop.bind(this));\n        // fwd events from the context\n        this._context.onstatechange = () => {\n            this.emit(\"statechange\", this.state);\n        };\n        // if no custom updateInterval provided, updateInterval will be derived by lookAhead setter\n        this[((_b = arguments[0]) === null || _b === void 0 ? void 0 : _b.hasOwnProperty(\"updateInterval\"))\n            ? \"_lookAhead\"\n            : \"lookAhead\"] = options.lookAhead;\n    }\n    static getDefaults() {\n        return {\n            clockSource: \"worker\",\n            latencyHint: \"interactive\",\n            lookAhead: 0.1,\n            updateInterval: 0.05,\n        };\n    }\n    /**\n     * Finish setting up the context. **You usually do not need to do this manually.**\n     */\n    initialize() {\n        if (!this._initialized) {\n            // add any additional modules\n            initializeContext(this);\n            this._initialized = true;\n        }\n        return this;\n    }\n    //---------------------------\n    // BASE AUDIO CONTEXT METHODS\n    //---------------------------\n    createAnalyser() {\n        return this._context.createAnalyser();\n    }\n    createOscillator() {\n        return this._context.createOscillator();\n    }\n    createBufferSource() {\n        return this._context.createBufferSource();\n    }\n    createBiquadFilter() {\n        return this._context.createBiquadFilter();\n    }\n    createBuffer(numberOfChannels, length, sampleRate) {\n        return this._context.createBuffer(numberOfChannels, length, sampleRate);\n    }\n    createChannelMerger(numberOfInputs) {\n        return this._context.createChannelMerger(numberOfInputs);\n    }\n    createChannelSplitter(numberOfOutputs) {\n        return this._context.createChannelSplitter(numberOfOutputs);\n    }\n    createConstantSource() {\n        return this._context.createConstantSource();\n    }\n    createConvolver() {\n        return this._context.createConvolver();\n    }\n    createDelay(maxDelayTime) {\n        return this._context.createDelay(maxDelayTime);\n    }\n    createDynamicsCompressor() {\n        return this._context.createDynamicsCompressor();\n    }\n    createGain() {\n        return this._context.createGain();\n    }\n    createIIRFilter(feedForward, feedback) {\n        // @ts-ignore\n        return this._context.createIIRFilter(feedForward, feedback);\n    }\n    createPanner() {\n        return this._context.createPanner();\n    }\n    createPeriodicWave(real, imag, constraints) {\n        return this._context.createPeriodicWave(real, imag, constraints);\n    }\n    createStereoPanner() {\n        return this._context.createStereoPanner();\n    }\n    createWaveShaper() {\n        return this._context.createWaveShaper();\n    }\n    createMediaStreamSource(stream) {\n        assert(isAudioContext(this._context), \"Not available if OfflineAudioContext\");\n        const context = this._context;\n        return context.createMediaStreamSource(stream);\n    }\n    createMediaElementSource(element) {\n        assert(isAudioContext(this._context), \"Not available if OfflineAudioContext\");\n        const context = this._context;\n        return context.createMediaElementSource(element);\n    }\n    createMediaStreamDestination() {\n        assert(isAudioContext(this._context), \"Not available if OfflineAudioContext\");\n        const context = this._context;\n        return context.createMediaStreamDestination();\n    }\n    decodeAudioData(audioData) {\n        return this._context.decodeAudioData(audioData);\n    }\n    /**\n     * The current time in seconds of the AudioContext.\n     */\n    get currentTime() {\n        return this._context.currentTime;\n    }\n    /**\n     * The current time in seconds of the AudioContext.\n     */\n    get state() {\n        return this._context.state;\n    }\n    /**\n     * The current time in seconds of the AudioContext.\n     */\n    get sampleRate() {\n        return this._context.sampleRate;\n    }\n    /**\n     * The listener\n     */\n    get listener() {\n        this.initialize();\n        return this._listener;\n    }\n    set listener(l) {\n        assert(!this._initialized, \"The listener cannot be set after initialization.\");\n        this._listener = l;\n    }\n    /**\n     * There is only one Transport per Context. It is created on initialization.\n     */\n    get transport() {\n        this.initialize();\n        return this._transport;\n    }\n    set transport(t) {\n        assert(!this._initialized, \"The transport cannot be set after initialization.\");\n        this._transport = t;\n    }\n    /**\n     * This is the Draw object for the context which is useful for synchronizing the draw frame with the Tone.js clock.\n     */\n    get draw() {\n        this.initialize();\n        return this._draw;\n    }\n    set draw(d) {\n        assert(!this._initialized, \"Draw cannot be set after initialization.\");\n        this._draw = d;\n    }\n    /**\n     * A reference to the Context's destination node.\n     */\n    get destination() {\n        this.initialize();\n        return this._destination;\n    }\n    set destination(d) {\n        assert(!this._initialized, \"The destination cannot be set after initialization.\");\n        this._destination = d;\n    }\n    /**\n     * Create an audio worklet node from a name and options. The module\n     * must first be loaded using {@link addAudioWorkletModule}.\n     */\n    createAudioWorkletNode(name, options) {\n        return createAudioWorkletNode(this.rawContext, name, options);\n    }\n    /**\n     * Add an AudioWorkletProcessor module\n     * @param url The url of the module\n     */\n    addAudioWorkletModule(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            assert(isDefined(this.rawContext.audioWorklet), \"AudioWorkletNode is only available in a secure context (https or localhost)\");\n            if (!this._workletPromise) {\n                this._workletPromise = this.rawContext.audioWorklet.addModule(url);\n            }\n            yield this._workletPromise;\n        });\n    }\n    /**\n     * Returns a promise which resolves when all of the worklets have been loaded on this context\n     */\n    workletsAreReady() {\n        return __awaiter(this, void 0, void 0, function* () {\n            (yield this._workletPromise) ? this._workletPromise : Promise.resolve();\n        });\n    }\n    //---------------------------\n    // TICKER\n    //---------------------------\n    /**\n     * How often the interval callback is invoked.\n     * This number corresponds to how responsive the scheduling\n     * can be. Setting to 0 will result in the lowest practial interval\n     * based on context properties. context.updateInterval + context.lookAhead\n     * gives you the total latency between scheduling an event and hearing it.\n     */\n    get updateInterval() {\n        return this._ticker.updateInterval;\n    }\n    set updateInterval(interval) {\n        this._ticker.updateInterval = interval;\n    }\n    /**\n     * What the source of the clock is, either \"worker\" (default),\n     * \"timeout\", or \"offline\" (none).\n     */\n    get clockSource() {\n        return this._ticker.type;\n    }\n    set clockSource(type) {\n        this._ticker.type = type;\n    }\n    /**\n     * The amount of time into the future events are scheduled. Giving Web Audio\n     * a short amount of time into the future to schedule events can reduce clicks and\n     * improve performance. This value can be set to 0 to get the lowest latency.\n     * Adjusting this value also affects the {@link updateInterval}.\n     */\n    get lookAhead() {\n        return this._lookAhead;\n    }\n    set lookAhead(time) {\n        this._lookAhead = time;\n        // if lookAhead is 0, default to .01 updateInterval\n        this.updateInterval = time ? time / 2 : 0.01;\n    }\n    /**\n     * The type of playback, which affects tradeoffs between audio\n     * output latency and responsiveness.\n     * In addition to setting the value in seconds, the latencyHint also\n     * accepts the strings \"interactive\" (prioritizes low latency),\n     * \"playback\" (prioritizes sustained playback), \"balanced\" (balances\n     * latency and performance).\n     * @example\n     * // prioritize sustained playback\n     * const context = new Tone.Context({ latencyHint: \"playback\" });\n     * // set this context as the global Context\n     * Tone.setContext(context);\n     * // the global context is gettable with Tone.getContext()\n     * console.log(Tone.getContext().latencyHint);\n     */\n    get latencyHint() {\n        return this._latencyHint;\n    }\n    /**\n     * The unwrapped AudioContext or OfflineAudioContext\n     */\n    get rawContext() {\n        return this._context;\n    }\n    /**\n     * The current audio context time plus a short {@link lookAhead}.\n     * @example\n     * setInterval(() => {\n     * \tconsole.log(\"now\", Tone.now());\n     * }, 100);\n     */\n    now() {\n        return this._context.currentTime + this._lookAhead;\n    }\n    /**\n     * The current audio context time without the {@link lookAhead}.\n     * In most cases it is better to use {@link now} instead of {@link immediate} since\n     * with {@link now} the {@link lookAhead} is applied equally to _all_ components including internal components,\n     * to making sure that everything is scheduled in sync. Mixing {@link now} and {@link immediate}\n     * can cause some timing issues. If no lookAhead is desired, you can set the {@link lookAhead} to `0`.\n     */\n    immediate() {\n        return this._context.currentTime;\n    }\n    /**\n     * Starts the audio context from a suspended state. This is required\n     * to initially start the AudioContext.\n     * @see {@link start}\n     */\n    resume() {\n        if (isAudioContext(this._context)) {\n            return this._context.resume();\n        }\n        else {\n            return Promise.resolve();\n        }\n    }\n    /**\n     * Close the context. Once closed, the context can no longer be used and\n     * any AudioNodes created from the context will be silent.\n     */\n    close() {\n        return __awaiter(this, void 0, void 0, function* () {\n            if (isAudioContext(this._context) &&\n                this.state !== \"closed\" &&\n                !this._closeStarted) {\n                this._closeStarted = true;\n                yield this._context.close();\n            }\n            if (this._initialized) {\n                closeContext(this);\n            }\n        });\n    }\n    /**\n     * **Internal** Generate a looped buffer at some constant value.\n     */\n    getConstant(val) {\n        if (this._constants.has(val)) {\n            return this._constants.get(val);\n        }\n        else {\n            const buffer = this._context.createBuffer(1, 128, this._context.sampleRate);\n            const arr = buffer.getChannelData(0);\n            for (let i = 0; i < arr.length; i++) {\n                arr[i] = val;\n            }\n            const constant = this._context.createBufferSource();\n            constant.channelCount = 1;\n            constant.channelCountMode = \"explicit\";\n            constant.buffer = buffer;\n            constant.loop = true;\n            constant.start(0);\n            this._constants.set(val, constant);\n            return constant;\n        }\n    }\n    /**\n     * Clean up. Also closes the audio context.\n     */\n    dispose() {\n        super.dispose();\n        this._ticker.dispose();\n        this._timeouts.dispose();\n        Object.keys(this._constants).map((val) => this._constants[val].disconnect());\n        this.close();\n        return this;\n    }\n    //---------------------------\n    // TIMEOUTS\n    //---------------------------\n    /**\n     * The private loop which keeps track of the context scheduled timeouts\n     * Is invoked from the clock source\n     */\n    _timeoutLoop() {\n        const now = this.now();\n        this._timeouts.forEachBefore(now, (event) => {\n            // invoke the callback\n            event.callback();\n            this._timeouts.remove(event);\n        });\n    }\n    /**\n     * A setTimeout which is guaranteed by the clock source.\n     * Also runs in the offline context.\n     * @param  fn       The callback to invoke\n     * @param  timeout  The timeout in seconds\n     * @returns ID to use when invoking Context.clearTimeout\n     */\n    setTimeout(fn, timeout) {\n        this._timeoutIds++;\n        const now = this.now();\n        this._timeouts.add({\n            callback: fn,\n            id: this._timeoutIds,\n            time: now + timeout,\n        });\n        return this._timeoutIds;\n    }\n    /**\n     * Clears a previously scheduled timeout with Tone.context.setTimeout\n     * @param  id  The ID returned from setTimeout\n     */\n    clearTimeout(id) {\n        this._timeouts.forEach((event) => {\n            if (event.id === id) {\n                this._timeouts.remove(event);\n            }\n        });\n        return this;\n    }\n    /**\n     * Clear the function scheduled by {@link setInterval}\n     */\n    clearInterval(id) {\n        return this.clearTimeout(id);\n    }\n    /**\n     * Adds a repeating event to the context's callback clock\n     */\n    setInterval(fn, interval) {\n        const id = ++this._timeoutIds;\n        const intervalFn = () => {\n            const now = this.now();\n            this._timeouts.add({\n                callback: () => {\n                    // invoke the callback\n                    fn();\n                    // invoke the event to repeat it\n                    intervalFn();\n                },\n                id,\n                time: now + interval,\n            });\n        };\n        // kick it off\n        intervalFn();\n        return id;\n    }\n}\n//# sourceMappingURL=Context.js.map","import { isArray } from \"./TypeCheck.js\";\n/**\n * Make the property not writable using `defineProperty`. Internal use only.\n */\nexport function readOnly(target, property) {\n    if (isArray(property)) {\n        property.forEach((str) => readOnly(target, str));\n    }\n    else {\n        Object.defineProperty(target, property, {\n            enumerable: true,\n            writable: false,\n        });\n    }\n}\n/**\n * Make an attribute writeable. Internal use only.\n */\nexport function writable(target, property) {\n    if (isArray(property)) {\n        property.forEach((str) => writable(target, str));\n    }\n    else {\n        Object.defineProperty(target, property, {\n            writable: true,\n        });\n    }\n}\nexport const noOp = () => {\n    // no operation here!\n};\n//# sourceMappingURL=Interface.js.map","import { __awaiter } from \"tslib\";\nimport { getContext } from \"../Global.js\";\nimport { Tone } from \"../Tone.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { noOp } from \"../util/Interface.js\";\nimport { isArray, isNumber, isString } from \"../util/TypeCheck.js\";\nimport { assert } from \"../util/Debug.js\";\n/**\n * AudioBuffer loading and storage. ToneAudioBuffer is used internally by all\n * classes that make requests for audio files such as Tone.Player,\n * Tone.Sampler and Tone.Convolver.\n * @example\n * const buffer = new Tone.ToneAudioBuffer(\"https://tonejs.github.io/audio/casio/A1.mp3\", () => {\n * \tconsole.log(\"loaded\");\n * });\n * @category Core\n */\nexport class ToneAudioBuffer extends Tone {\n    constructor() {\n        super();\n        this.name = \"ToneAudioBuffer\";\n        /**\n         * Callback when the buffer is loaded.\n         */\n        this.onload = noOp;\n        const options = optionsFromArguments(ToneAudioBuffer.getDefaults(), arguments, [\"url\", \"onload\", \"onerror\"]);\n        this.reverse = options.reverse;\n        this.onload = options.onload;\n        if (isString(options.url)) {\n            // initiate the download\n            this.load(options.url).catch(options.onerror);\n        }\n        else if (options.url) {\n            this.set(options.url);\n        }\n    }\n    static getDefaults() {\n        return {\n            onerror: noOp,\n            onload: noOp,\n            reverse: false,\n        };\n    }\n    /**\n     * The sample rate of the AudioBuffer\n     */\n    get sampleRate() {\n        if (this._buffer) {\n            return this._buffer.sampleRate;\n        }\n        else {\n            return getContext().sampleRate;\n        }\n    }\n    /**\n     * Pass in an AudioBuffer or ToneAudioBuffer to set the value of this buffer.\n     */\n    set(buffer) {\n        if (buffer instanceof ToneAudioBuffer) {\n            // if it's loaded, set it\n            if (buffer.loaded) {\n                this._buffer = buffer.get();\n            }\n            else {\n                // otherwise when it's loaded, invoke it's callback\n                buffer.onload = () => {\n                    this.set(buffer);\n                    this.onload(this);\n                };\n            }\n        }\n        else {\n            this._buffer = buffer;\n        }\n        // reverse it initially\n        if (this._reversed) {\n            this._reverse();\n        }\n        return this;\n    }\n    /**\n     * The audio buffer stored in the object.\n     */\n    get() {\n        return this._buffer;\n    }\n    /**\n     * Makes an fetch request for the selected url then decodes the file as an audio buffer.\n     * Invokes the callback once the audio buffer loads.\n     * @param url The url of the buffer to load. filetype support depends on the browser.\n     * @returns A Promise which resolves with this ToneAudioBuffer\n     */\n    load(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const doneLoading = ToneAudioBuffer.load(url).then((audioBuffer) => {\n                this.set(audioBuffer);\n                // invoke the onload method\n                this.onload(this);\n            });\n            ToneAudioBuffer.downloads.push(doneLoading);\n            try {\n                yield doneLoading;\n            }\n            finally {\n                // remove the downloaded file\n                const index = ToneAudioBuffer.downloads.indexOf(doneLoading);\n                ToneAudioBuffer.downloads.splice(index, 1);\n            }\n            return this;\n        });\n    }\n    /**\n     * clean up\n     */\n    dispose() {\n        super.dispose();\n        this._buffer = undefined;\n        return this;\n    }\n    /**\n     * Set the audio buffer from the array.\n     * To create a multichannel AudioBuffer, pass in a multidimensional array.\n     * @param array The array to fill the audio buffer\n     */\n    fromArray(array) {\n        const isMultidimensional = isArray(array) && array[0].length > 0;\n        const channels = isMultidimensional ? array.length : 1;\n        const len = isMultidimensional\n            ? array[0].length\n            : array.length;\n        const context = getContext();\n        const buffer = context.createBuffer(channels, len, context.sampleRate);\n        const multiChannelArray = !isMultidimensional && channels === 1\n            ? [array]\n            : array;\n        for (let c = 0; c < channels; c++) {\n            buffer.copyToChannel(multiChannelArray[c], c);\n        }\n        this._buffer = buffer;\n        return this;\n    }\n    /**\n     * Sums multiple channels into 1 channel\n     * @param chanNum Optionally only copy a single channel from the array.\n     */\n    toMono(chanNum) {\n        if (isNumber(chanNum)) {\n            this.fromArray(this.toArray(chanNum));\n        }\n        else {\n            let outputArray = new Float32Array(this.length);\n            const numChannels = this.numberOfChannels;\n            for (let channel = 0; channel < numChannels; channel++) {\n                const channelArray = this.toArray(channel);\n                for (let i = 0; i < channelArray.length; i++) {\n                    outputArray[i] += channelArray[i];\n                }\n            }\n            // divide by the number of channels\n            outputArray = outputArray.map((sample) => sample / numChannels);\n            this.fromArray(outputArray);\n        }\n        return this;\n    }\n    /**\n     * Get the buffer as an array. Single channel buffers will return a 1-dimensional\n     * Float32Array, and multichannel buffers will return multidimensional arrays.\n     * @param channel Optionally only copy a single channel from the array.\n     */\n    toArray(channel) {\n        if (isNumber(channel)) {\n            return this.getChannelData(channel);\n        }\n        else if (this.numberOfChannels === 1) {\n            return this.toArray(0);\n        }\n        else {\n            const ret = [];\n            for (let c = 0; c < this.numberOfChannels; c++) {\n                ret[c] = this.getChannelData(c);\n            }\n            return ret;\n        }\n    }\n    /**\n     * Returns the Float32Array representing the PCM audio data for the specific channel.\n     * @param  channel  The channel number to return\n     * @return The audio as a TypedArray\n     */\n    getChannelData(channel) {\n        if (this._buffer) {\n            return this._buffer.getChannelData(channel);\n        }\n        else {\n            return new Float32Array(0);\n        }\n    }\n    /**\n     * Cut a subsection of the array and return a buffer of the\n     * subsection. Does not modify the original buffer\n     * @param start The time to start the slice\n     * @param end The end time to slice. If none is given will default to the end of the buffer\n     */\n    slice(start, end = this.duration) {\n        assert(this.loaded, \"Buffer is not loaded\");\n        const startSamples = Math.floor(start * this.sampleRate);\n        const endSamples = Math.floor(end * this.sampleRate);\n        assert(startSamples < endSamples, \"The start time must be less than the end time\");\n        const length = endSamples - startSamples;\n        const retBuffer = getContext().createBuffer(this.numberOfChannels, length, this.sampleRate);\n        for (let channel = 0; channel < this.numberOfChannels; channel++) {\n            retBuffer.copyToChannel(this.getChannelData(channel).subarray(startSamples, endSamples), channel);\n        }\n        return new ToneAudioBuffer(retBuffer);\n    }\n    /**\n     * Reverse the buffer.\n     */\n    _reverse() {\n        if (this.loaded) {\n            for (let i = 0; i < this.numberOfChannels; i++) {\n                this.getChannelData(i).reverse();\n            }\n        }\n        return this;\n    }\n    /**\n     * If the buffer is loaded or not\n     */\n    get loaded() {\n        return this.length > 0;\n    }\n    /**\n     * The duration of the buffer in seconds.\n     */\n    get duration() {\n        if (this._buffer) {\n            return this._buffer.duration;\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * The length of the buffer in samples\n     */\n    get length() {\n        if (this._buffer) {\n            return this._buffer.length;\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * The number of discrete audio channels. Returns 0 if no buffer is loaded.\n     */\n    get numberOfChannels() {\n        if (this._buffer) {\n            return this._buffer.numberOfChannels;\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * Reverse the buffer.\n     */\n    get reverse() {\n        return this._reversed;\n    }\n    set reverse(rev) {\n        if (this._reversed !== rev) {\n            this._reversed = rev;\n            this._reverse();\n        }\n    }\n    /**\n     * Create a ToneAudioBuffer from the array. To create a multichannel AudioBuffer,\n     * pass in a multidimensional array.\n     * @param array The array to fill the audio buffer\n     * @return A ToneAudioBuffer created from the array\n     */\n    static fromArray(array) {\n        return new ToneAudioBuffer().fromArray(array);\n    }\n    /**\n     * Creates a ToneAudioBuffer from a URL, returns a promise which resolves to a ToneAudioBuffer\n     * @param  url The url to load.\n     * @return A promise which resolves to a ToneAudioBuffer\n     */\n    static fromUrl(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            const buffer = new ToneAudioBuffer();\n            return yield buffer.load(url);\n        });\n    }\n    /**\n     * Loads a url using fetch and returns the AudioBuffer.\n     */\n    static load(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            // make sure there is a slash between the baseUrl and the url\n            const baseUrl = ToneAudioBuffer.baseUrl === \"\" ||\n                ToneAudioBuffer.baseUrl.endsWith(\"/\")\n                ? ToneAudioBuffer.baseUrl\n                : ToneAudioBuffer.baseUrl + \"/\";\n            const response = yield fetch(baseUrl + url);\n            if (!response.ok) {\n                throw new Error(`could not load url: ${url}`);\n            }\n            const arrayBuffer = yield response.arrayBuffer();\n            const audioBuffer = yield getContext().decodeAudioData(arrayBuffer);\n            return audioBuffer;\n        });\n    }\n    /**\n     * Checks a url's extension to see if the current browser can play that file type.\n     * @param url The url/extension to test\n     * @return If the file extension can be played\n     * @static\n     * @example\n     * Tone.ToneAudioBuffer.supportsType(\"wav\"); // returns true\n     * Tone.ToneAudioBuffer.supportsType(\"path/to/file.wav\"); // returns true\n     */\n    static supportsType(url) {\n        const extensions = url.split(\".\");\n        const extension = extensions[extensions.length - 1];\n        const response = document\n            .createElement(\"audio\")\n            .canPlayType(\"audio/\" + extension);\n        return response !== \"\";\n    }\n    /**\n     * Returns a Promise which resolves when all of the buffers have loaded\n     */\n    static loaded() {\n        return __awaiter(this, void 0, void 0, function* () {\n            // this makes sure that the function is always async\n            yield Promise.resolve();\n            while (ToneAudioBuffer.downloads.length) {\n                yield ToneAudioBuffer.downloads[0];\n            }\n        });\n    }\n}\n//-------------------------------------\n// STATIC METHODS\n//-------------------------------------\n/**\n * A path which is prefixed before every url.\n */\nToneAudioBuffer.baseUrl = \"\";\n/**\n * All of the downloads\n */\nToneAudioBuffer.downloads = [];\n//# sourceMappingURL=ToneAudioBuffer.js.map","import { __awaiter } from \"tslib\";\nimport { createOfflineAudioContext } from \"../context/AudioContext.js\";\nimport { Context } from \"../context/Context.js\";\nimport { isOfflineAudioContext } from \"../util/AdvancedTypeCheck.js\";\nimport { ToneAudioBuffer } from \"./ToneAudioBuffer.js\";\n/**\n * Wrapper around the OfflineAudioContext\n * @category Core\n * @example\n * // generate a single channel, 0.5 second buffer\n * const context = new Tone.OfflineContext(1, 0.5, 44100);\n * const osc = new Tone.Oscillator({ context });\n * context.render().then(buffer => {\n * \tconsole.log(buffer.numberOfChannels, buffer.duration);\n * });\n */\nexport class OfflineContext extends Context {\n    constructor() {\n        super({\n            clockSource: \"offline\",\n            context: isOfflineAudioContext(arguments[0])\n                ? arguments[0]\n                : createOfflineAudioContext(arguments[0], arguments[1] * arguments[2], arguments[2]),\n            lookAhead: 0,\n            updateInterval: isOfflineAudioContext(arguments[0])\n                ? 128 / arguments[0].sampleRate\n                : 128 / arguments[2],\n        });\n        this.name = \"OfflineContext\";\n        /**\n         * An artificial clock source\n         */\n        this._currentTime = 0;\n        this.isOffline = true;\n        this._duration = isOfflineAudioContext(arguments[0])\n            ? arguments[0].length / arguments[0].sampleRate\n            : arguments[1];\n    }\n    /**\n     * Override the now method to point to the internal clock time\n     */\n    now() {\n        return this._currentTime;\n    }\n    /**\n     * Same as this.now()\n     */\n    get currentTime() {\n        return this._currentTime;\n    }\n    /**\n     * Render just the clock portion of the audio context.\n     */\n    _renderClock(asynchronous) {\n        return __awaiter(this, void 0, void 0, function* () {\n            let index = 0;\n            while (this._duration - this._currentTime >= 0) {\n                // invoke all the callbacks on that time\n                this.emit(\"tick\");\n                // increment the clock in block-sized chunks\n                this._currentTime += 128 / this.sampleRate;\n                // yield once a second of audio\n                index++;\n                const yieldEvery = Math.floor(this.sampleRate / 128);\n                if (asynchronous && index % yieldEvery === 0) {\n                    yield new Promise((done) => setTimeout(done, 1));\n                }\n            }\n        });\n    }\n    /**\n     * Render the output of the OfflineContext\n     * @param asynchronous If the clock should be rendered asynchronously, which will not block the main thread, but be slightly slower.\n     */\n    render() {\n        return __awaiter(this, arguments, void 0, function* (asynchronous = true) {\n            yield this.workletsAreReady();\n            yield this._renderClock(asynchronous);\n            const buffer = yield this._context.startRendering();\n            return new ToneAudioBuffer(buffer);\n        });\n    }\n    /**\n     * Close the context\n     */\n    close() {\n        return Promise.resolve();\n    }\n}\n//# sourceMappingURL=OfflineContext.js.map","import { version } from \"../version.js\";\nimport { hasAudioContext, theWindow, } from \"./context/AudioContext.js\";\nimport { Context } from \"./context/Context.js\";\nimport { DummyContext } from \"./context/DummyContext.js\";\nimport { OfflineContext } from \"./context/OfflineContext.js\";\nimport { isAudioContext, isOfflineAudioContext, } from \"./util/AdvancedTypeCheck.js\";\n/**\n * This dummy context is used to avoid throwing immediate errors when importing in Node.js\n */\nconst dummyContext = new DummyContext();\n/**\n * The global audio context which is getable and assignable through\n * getContext and setContext\n */\nlet globalContext = dummyContext;\n/**\n * Returns the default system-wide {@link Context}\n * @category Core\n */\nexport function getContext() {\n    if (globalContext === dummyContext && hasAudioContext) {\n        setContext(new Context());\n    }\n    return globalContext;\n}\n/**\n * Set the default audio context\n * @param context\n * @param disposeOld Pass `true` if you don't need the old context to dispose it.\n * @category Core\n */\nexport function setContext(context, disposeOld = false) {\n    if (disposeOld) {\n        globalContext.dispose();\n    }\n    if (isAudioContext(context)) {\n        globalContext = new Context(context);\n    }\n    else if (isOfflineAudioContext(context)) {\n        globalContext = new OfflineContext(context);\n    }\n    else {\n        globalContext = context;\n    }\n}\n/**\n * Most browsers will not play _any_ audio until a user\n * clicks something (like a play button). Invoke this method\n * on a click or keypress event handler to start the audio context.\n * More about the Autoplay policy\n * [here](https://developers.google.com/web/updates/2017/09/autoplay-policy-changes#webaudio)\n * @example\n * document.querySelector(\"button\").addEventListener(\"click\", async () => {\n * \tawait Tone.start();\n * \tconsole.log(\"context started\");\n * });\n * @category Core\n */\nexport function start() {\n    return globalContext.resume();\n}\n/**\n * Log Tone.js + version in the console.\n */\nif (theWindow && !theWindow.TONE_SILENCE_LOGGING) {\n    let prefix = \"v\";\n    if (version === \"dev\") {\n        prefix = \"\";\n    }\n    const printString = ` * Tone.js ${prefix}${version} * `;\n    // eslint-disable-next-line no-console\n    console.log(`%c${printString}`, \"background: #000; color: #fff\");\n}\n//# sourceMappingURL=Global.js.map","import { __awaiter } from \"tslib\";\nimport { BaseContext } from \"./BaseContext.js\";\nexport class DummyContext extends BaseContext {\n    constructor() {\n        super(...arguments);\n        this.lookAhead = 0;\n        this.latencyHint = 0;\n        this.isOffline = false;\n    }\n    //---------------------------\n    // BASE AUDIO CONTEXT METHODS\n    //---------------------------\n    createAnalyser() {\n        return {};\n    }\n    createOscillator() {\n        return {};\n    }\n    createBufferSource() {\n        return {};\n    }\n    createBiquadFilter() {\n        return {};\n    }\n    createBuffer(_numberOfChannels, _length, _sampleRate) {\n        return {};\n    }\n    createChannelMerger(_numberOfInputs) {\n        return {};\n    }\n    createChannelSplitter(_numberOfOutputs) {\n        return {};\n    }\n    createConstantSource() {\n        return {};\n    }\n    createConvolver() {\n        return {};\n    }\n    createDelay(_maxDelayTime) {\n        return {};\n    }\n    createDynamicsCompressor() {\n        return {};\n    }\n    createGain() {\n        return {};\n    }\n    createIIRFilter(_feedForward, _feedback) {\n        return {};\n    }\n    createPanner() {\n        return {};\n    }\n    createPeriodicWave(_real, _imag, _constraints) {\n        return {};\n    }\n    createStereoPanner() {\n        return {};\n    }\n    createWaveShaper() {\n        return {};\n    }\n    createMediaStreamSource(_stream) {\n        return {};\n    }\n    createMediaElementSource(_element) {\n        return {};\n    }\n    createMediaStreamDestination() {\n        return {};\n    }\n    decodeAudioData(_audioData) {\n        return Promise.resolve({});\n    }\n    //---------------------------\n    // TONE AUDIO CONTEXT METHODS\n    //---------------------------\n    createAudioWorkletNode(_name, _options) {\n        return {};\n    }\n    get rawContext() {\n        return {};\n    }\n    addAudioWorkletModule(_url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            return Promise.resolve();\n        });\n    }\n    resume() {\n        return Promise.resolve();\n    }\n    setTimeout(_fn, _timeout) {\n        return 0;\n    }\n    clearTimeout(_id) {\n        return this;\n    }\n    setInterval(_fn, _interval) {\n        return 0;\n    }\n    clearInterval(_id) {\n        return this;\n    }\n    getConstant(_val) {\n        return {};\n    }\n    get currentTime() {\n        return 0;\n    }\n    get state() {\n        return {};\n    }\n    get sampleRate() {\n        return 0;\n    }\n    get listener() {\n        return {};\n    }\n    get transport() {\n        return {};\n    }\n    get draw() {\n        return {};\n    }\n    set draw(_d) { }\n    get destination() {\n        return {};\n    }\n    set destination(_d) { }\n    now() {\n        return 0;\n    }\n    immediate() {\n        return 0;\n    }\n}\n//# sourceMappingURL=DummyContext.js.map","/**\n * Equal power gain scale. Good for cross-fading.\n * @param  percent (0-1)\n */\nexport function equalPowerScale(percent) {\n    const piFactor = 0.5 * Math.PI;\n    return Math.sin(percent * piFactor);\n}\n/**\n * Convert decibels into gain.\n */\nexport function dbToGain(db) {\n    return Math.pow(10, db / 20);\n}\n/**\n * Convert gain to decibels.\n */\nexport function gainToDb(gain) {\n    return 20 * (Math.log(gain) / Math.LN10);\n}\n/**\n * Convert an interval (in semitones) to a frequency ratio.\n * @param interval the number of semitones above the base note\n * @example\n * Tone.intervalToFrequencyRatio(0); // 1\n * Tone.intervalToFrequencyRatio(12); // 2\n * Tone.intervalToFrequencyRatio(-12); // 0.5\n */\nexport function intervalToFrequencyRatio(interval) {\n    return Math.pow(2, interval / 12);\n}\n/**\n * The Global [concert tuning pitch](https://en.wikipedia.org/wiki/Concert_pitch) which is used\n * to generate all the other pitch values from notes. A4's values in Hertz.\n */\nlet A4 = 440;\nexport function getA4() {\n    return A4;\n}\nexport function setA4(freq) {\n    A4 = freq;\n}\n/**\n * Convert a frequency value to a MIDI note.\n * @param frequency The value to frequency value to convert.\n * @example\n * Tone.ftom(440); // returns 69\n */\nexport function ftom(frequency) {\n    return Math.round(ftomf(frequency));\n}\n/**\n * Convert a frequency to a floating point midi value\n */\nexport function ftomf(frequency) {\n    return 69 + 12 * Math.log2(frequency / A4);\n}\n/**\n * Convert a MIDI note to frequency value.\n * @param  midi The midi number to convert.\n * @return The corresponding frequency value\n * @example\n * Tone.mtof(69); // 440\n */\nexport function mtof(midi) {\n    return A4 * Math.pow(2, (midi - 69) / 12);\n}\n//# sourceMappingURL=Conversions.js.map","import { Tone } from \"../Tone.js\";\nimport { isDefined, isObject, isString, isUndef } from \"../util/TypeCheck.js\";\n/**\n * TimeBase is a flexible encoding of time which can be evaluated to and from a string.\n */\nexport class TimeBaseClass extends Tone {\n    /**\n     * @param context The context associated with the time value. Used to compute\n     * Transport and context-relative timing.\n     * @param  value  The time value as a number, string or object\n     * @param  units  Unit values\n     */\n    constructor(context, value, units) {\n        super();\n        /**\n         * The default units\n         */\n        this.defaultUnits = \"s\";\n        this._val = value;\n        this._units = units;\n        this.context = context;\n        this._expressions = this._getExpressions();\n    }\n    /**\n     * All of the time encoding expressions\n     */\n    _getExpressions() {\n        return {\n            hz: {\n                method: (value) => {\n                    return this._frequencyToUnits(parseFloat(value));\n                },\n                regexp: /^(\\d+(?:\\.\\d+)?)hz$/i,\n            },\n            i: {\n                method: (value) => {\n                    return this._ticksToUnits(parseInt(value, 10));\n                },\n                regexp: /^(\\d+)i$/i,\n            },\n            m: {\n                method: (value) => {\n                    return this._beatsToUnits(parseInt(value, 10) * this._getTimeSignature());\n                },\n                regexp: /^(\\d+)m$/i,\n            },\n            n: {\n                method: (value, dot) => {\n                    const numericValue = parseInt(value, 10);\n                    const scalar = dot === \".\" ? 1.5 : 1;\n                    if (numericValue === 1) {\n                        return (this._beatsToUnits(this._getTimeSignature()) *\n                            scalar);\n                    }\n                    else {\n                        return (this._beatsToUnits(4 / numericValue) *\n                            scalar);\n                    }\n                },\n                regexp: /^(\\d+)n(\\.?)$/i,\n            },\n            number: {\n                method: (value) => {\n                    return this._expressions[this.defaultUnits].method.call(this, value);\n                },\n                regexp: /^(\\d+(?:\\.\\d+)?)$/,\n            },\n            s: {\n                method: (value) => {\n                    return this._secondsToUnits(parseFloat(value));\n                },\n                regexp: /^(\\d+(?:\\.\\d+)?)s$/,\n            },\n            samples: {\n                method: (value) => {\n                    return (parseInt(value, 10) /\n                        this.context.sampleRate);\n                },\n                regexp: /^(\\d+)samples$/,\n            },\n            t: {\n                method: (value) => {\n                    const numericValue = parseInt(value, 10);\n                    return this._beatsToUnits(8 / (Math.floor(numericValue) * 3));\n                },\n                regexp: /^(\\d+)t$/i,\n            },\n            tr: {\n                method: (m, q, s) => {\n                    let total = 0;\n                    if (m && m !== \"0\") {\n                        total += this._beatsToUnits(this._getTimeSignature() * parseFloat(m));\n                    }\n                    if (q && q !== \"0\") {\n                        total += this._beatsToUnits(parseFloat(q));\n                    }\n                    if (s && s !== \"0\") {\n                        total += this._beatsToUnits(parseFloat(s) / 4);\n                    }\n                    return total;\n                },\n                regexp: /^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?$/,\n            },\n        };\n    }\n    //-------------------------------------\n    // \tVALUE OF\n    //-------------------------------------\n    /**\n     * Evaluate the time value. Returns the time in seconds.\n     */\n    valueOf() {\n        if (this._val instanceof TimeBaseClass) {\n            this.fromType(this._val);\n        }\n        if (isUndef(this._val)) {\n            return this._noArg();\n        }\n        else if (isString(this._val) && isUndef(this._units)) {\n            for (const units in this._expressions) {\n                if (this._expressions[units].regexp.test(this._val.trim())) {\n                    this._units = units;\n                    break;\n                }\n            }\n        }\n        else if (isObject(this._val)) {\n            let total = 0;\n            for (const typeName in this._val) {\n                if (isDefined(this._val[typeName])) {\n                    const quantity = this._val[typeName];\n                    const time = \n                    // @ts-ignore\n                    new this.constructor(this.context, typeName).valueOf() *\n                        quantity;\n                    total += time;\n                }\n            }\n            return total;\n        }\n        if (isDefined(this._units)) {\n            const expr = this._expressions[this._units];\n            const matching = this._val.toString().trim().match(expr.regexp);\n            if (matching) {\n                return expr.method.apply(this, matching.slice(1));\n            }\n            else {\n                return expr.method.call(this, this._val);\n            }\n        }\n        else if (isString(this._val)) {\n            return parseFloat(this._val);\n        }\n        else {\n            return this._val;\n        }\n    }\n    //-------------------------------------\n    // \tUNIT CONVERSIONS\n    //-------------------------------------\n    /**\n     * Returns the value of a frequency in the current units\n     */\n    _frequencyToUnits(freq) {\n        return (1 / freq);\n    }\n    /**\n     * Return the value of the beats in the current units\n     */\n    _beatsToUnits(beats) {\n        return ((60 / this._getBpm()) * beats);\n    }\n    /**\n     * Returns the value of a second in the current units\n     */\n    _secondsToUnits(seconds) {\n        return seconds;\n    }\n    /**\n     * Returns the value of a tick in the current time units\n     */\n    _ticksToUnits(ticks) {\n        return ((ticks * this._beatsToUnits(1)) / this._getPPQ());\n    }\n    /**\n     * With no arguments, return 'now'\n     */\n    _noArg() {\n        return this._now();\n    }\n    //-------------------------------------\n    // \tTEMPO CONVERSIONS\n    //-------------------------------------\n    /**\n     * Return the bpm\n     */\n    _getBpm() {\n        return this.context.transport.bpm.value;\n    }\n    /**\n     * Return the timeSignature\n     */\n    _getTimeSignature() {\n        return this.context.transport.timeSignature;\n    }\n    /**\n     * Return the PPQ or 192 if Transport is not available\n     */\n    _getPPQ() {\n        return this.context.transport.PPQ;\n    }\n    //-------------------------------------\n    // \tCONVERSION INTERFACE\n    //-------------------------------------\n    /**\n     * Coerce a time type into this units type.\n     * @param type Any time type units\n     */\n    fromType(type) {\n        this._units = undefined;\n        switch (this.defaultUnits) {\n            case \"s\":\n                this._val = type.toSeconds();\n                break;\n            case \"i\":\n                this._val = type.toTicks();\n                break;\n            case \"hz\":\n                this._val = type.toFrequency();\n                break;\n            case \"midi\":\n                this._val = type.toMidi();\n                break;\n        }\n        return this;\n    }\n    /**\n     * Return the value in hertz\n     */\n    toFrequency() {\n        return 1 / this.toSeconds();\n    }\n    /**\n     * Return the time in samples\n     */\n    toSamples() {\n        return this.toSeconds() * this.context.sampleRate;\n    }\n    /**\n     * Return the time in milliseconds.\n     */\n    toMilliseconds() {\n        return this.toSeconds() * 1000;\n    }\n}\n//# sourceMappingURL=TimeBase.js.map","import { getContext } from \"../Global.js\";\nimport { ftom } from \"./Conversions.js\";\nimport { TimeBaseClass, } from \"./TimeBase.js\";\n/**\n * TimeClass is a primitive type for encoding and decoding Time values.\n * TimeClass can be passed into the parameter of any method which takes time as an argument.\n * @param  val    The time value.\n * @param  units  The units of the value.\n * @example\n * const time = Tone.Time(\"4n\"); // a quarter note\n * @category Unit\n */\nexport class TimeClass extends TimeBaseClass {\n    constructor() {\n        super(...arguments);\n        this.name = \"TimeClass\";\n    }\n    _getExpressions() {\n        return Object.assign(super._getExpressions(), {\n            now: {\n                method: (capture) => {\n                    return (this._now() +\n                        new this.constructor(this.context, capture).valueOf());\n                },\n                regexp: /^\\+(.+)/,\n            },\n            quantize: {\n                method: (capture) => {\n                    const quantTo = new TimeClass(this.context, capture).valueOf();\n                    return this._secondsToUnits(this.context.transport.nextSubdivision(quantTo));\n                },\n                regexp: /^@(.+)/,\n            },\n        });\n    }\n    /**\n     * Quantize the time by the given subdivision. Optionally add a\n     * percentage which will move the time value towards the ideal\n     * quantized value by that percentage.\n     * @param  subdiv    The subdivision to quantize to\n     * @param  percent  Move the time value towards the quantized value by a percentage.\n     * @example\n     * Tone.Time(21).quantize(2); // returns 22\n     * Tone.Time(0.6).quantize(\"4n\", 0.5); // returns 0.55\n     */\n    quantize(subdiv, percent = 1) {\n        const subdivision = new this.constructor(this.context, subdiv).valueOf();\n        const value = this.valueOf();\n        const multiple = Math.round(value / subdivision);\n        const ideal = multiple * subdivision;\n        const diff = ideal - value;\n        return (value + diff * percent);\n    }\n    //-------------------------------------\n    // CONVERSIONS\n    //-------------------------------------\n    /**\n     * Convert a Time to Notation. The notation values are will be the\n     * closest representation between 1m to 128th note.\n     * @return {Notation}\n     * @example\n     * // if the Transport is at 120bpm:\n     * Tone.Time(2).toNotation(); // returns \"1m\"\n     */\n    toNotation() {\n        const time = this.toSeconds();\n        const testNotations = [\"1m\"];\n        for (let power = 1; power < 9; power++) {\n            const subdiv = Math.pow(2, power);\n            testNotations.push((subdiv + \"n.\"));\n            testNotations.push((subdiv + \"n\"));\n            testNotations.push((subdiv + \"t\"));\n        }\n        testNotations.push(\"0\");\n        // find the closets notation representation\n        let closest = testNotations[0];\n        let closestSeconds = new TimeClass(this.context, testNotations[0]).toSeconds();\n        testNotations.forEach((notation) => {\n            const notationSeconds = new TimeClass(this.context, notation).toSeconds();\n            if (Math.abs(notationSeconds - time) <\n                Math.abs(closestSeconds - time)) {\n                closest = notation;\n                closestSeconds = notationSeconds;\n            }\n        });\n        return closest;\n    }\n    /**\n     * Return the time encoded as Bars:Beats:Sixteenths.\n     */\n    toBarsBeatsSixteenths() {\n        const quarterTime = this._beatsToUnits(1);\n        let quarters = this.valueOf() / quarterTime;\n        quarters = parseFloat(quarters.toFixed(4));\n        const measures = Math.floor(quarters / this._getTimeSignature());\n        let sixteenths = (quarters % 1) * 4;\n        quarters = Math.floor(quarters) % this._getTimeSignature();\n        const sixteenthString = sixteenths.toString();\n        if (sixteenthString.length > 3) {\n            // the additional parseFloat removes insignificant trailing zeroes\n            sixteenths = parseFloat(parseFloat(sixteenthString).toFixed(3));\n        }\n        const progress = [measures, quarters, sixteenths];\n        return progress.join(\":\");\n    }\n    /**\n     * Return the time in ticks.\n     */\n    toTicks() {\n        const quarterTime = this._beatsToUnits(1);\n        const quarters = this.valueOf() / quarterTime;\n        return quarters * this._getPPQ();\n    }\n    /**\n     * Return the time in seconds.\n     */\n    toSeconds() {\n        return this.valueOf();\n    }\n    /**\n     * Return the value as a midi note.\n     */\n    toMidi() {\n        return ftom(this.toFrequency());\n    }\n    _now() {\n        return this.context.now();\n    }\n}\n/**\n * Create a TimeClass from a time string or number. The time is computed against the\n * global Tone.Context. To use a specific context, use {@link TimeClass}\n * @param value A value which represents time\n * @param units The value's units if they can't be inferred by the value.\n * @category Unit\n * @example\n * const time = Tone.Time(\"4n\").toSeconds();\n * console.log(time);\n * @example\n * const note = Tone.Time(1).toNotation();\n * console.log(note);\n * @example\n * const freq = Tone.Time(0.5).toFrequency();\n * console.log(freq);\n */\nexport function Time(value, units) {\n    return new TimeClass(getContext(), value, units);\n}\n//# sourceMappingURL=Time.js.map","/* eslint-disable key-spacing */\nimport { getContext } from \"../Global.js\";\nimport { intervalToFrequencyRatio, mtof } from \"./Conversions.js\";\nimport { ftom, getA4, setA4 } from \"./Conversions.js\";\nimport { TimeClass } from \"./Time.js\";\n/**\n * Frequency is a primitive type for encoding Frequency values.\n * Eventually all time values are evaluated to hertz using the `valueOf` method.\n * @example\n * Tone.Frequency(\"C3\"); // 261\n * Tone.Frequency(38, \"midi\");\n * Tone.Frequency(\"C3\").transpose(4);\n * @category Unit\n */\nexport class FrequencyClass extends TimeClass {\n    constructor() {\n        super(...arguments);\n        this.name = \"Frequency\";\n        this.defaultUnits = \"hz\";\n    }\n    /**\n     * The [concert tuning pitch](https://en.wikipedia.org/wiki/Concert_pitch) which is used\n     * to generate all the other pitch values from notes. A4's values in Hertz.\n     */\n    static get A4() {\n        return getA4();\n    }\n    static set A4(freq) {\n        setA4(freq);\n    }\n    //-------------------------------------\n    // \tAUGMENT BASE EXPRESSIONS\n    //-------------------------------------\n    _getExpressions() {\n        return Object.assign({}, super._getExpressions(), {\n            midi: {\n                regexp: /^(\\d+(?:\\.\\d+)?midi)/,\n                method(value) {\n                    if (this.defaultUnits === \"midi\") {\n                        return value;\n                    }\n                    else {\n                        return FrequencyClass.mtof(value);\n                    }\n                },\n            },\n            note: {\n                regexp: /^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,\n                method(pitch, octave) {\n                    const index = noteToScaleIndex[pitch.toLowerCase()];\n                    const noteNumber = index + (parseInt(octave, 10) + 1) * 12;\n                    if (this.defaultUnits === \"midi\") {\n                        return noteNumber;\n                    }\n                    else {\n                        return FrequencyClass.mtof(noteNumber);\n                    }\n                },\n            },\n            tr: {\n                regexp: /^(\\d+(?:\\.\\d+)?):(\\d+(?:\\.\\d+)?):?(\\d+(?:\\.\\d+)?)?/,\n                method(m, q, s) {\n                    let total = 1;\n                    if (m && m !== \"0\") {\n                        total *= this._beatsToUnits(this._getTimeSignature() * parseFloat(m));\n                    }\n                    if (q && q !== \"0\") {\n                        total *= this._beatsToUnits(parseFloat(q));\n                    }\n                    if (s && s !== \"0\") {\n                        total *= this._beatsToUnits(parseFloat(s) / 4);\n                    }\n                    return total;\n                },\n            },\n        });\n    }\n    //-------------------------------------\n    // \tEXPRESSIONS\n    //-------------------------------------\n    /**\n     * Transposes the frequency by the given number of semitones.\n     * @return  A new transposed frequency\n     * @example\n     * Tone.Frequency(\"A4\").transpose(3); // \"C5\"\n     */\n    transpose(interval) {\n        return new FrequencyClass(this.context, this.valueOf() * intervalToFrequencyRatio(interval));\n    }\n    /**\n     * Takes an array of semitone intervals and returns\n     * an array of frequencies transposed by those intervals.\n     * @return  Returns an array of Frequencies\n     * @example\n     * Tone.Frequency(\"A4\").harmonize([0, 3, 7]); // [\"A4\", \"C5\", \"E5\"]\n     */\n    harmonize(intervals) {\n        return intervals.map((interval) => {\n            return this.transpose(interval);\n        });\n    }\n    //-------------------------------------\n    // \tUNIT CONVERSIONS\n    //-------------------------------------\n    /**\n     * Return the value of the frequency as a MIDI note\n     * @example\n     * Tone.Frequency(\"C4\").toMidi(); // 60\n     */\n    toMidi() {\n        return ftom(this.valueOf());\n    }\n    /**\n     * Return the value of the frequency in Scientific Pitch Notation\n     * @example\n     * Tone.Frequency(69, \"midi\").toNote(); // \"A4\"\n     */\n    toNote() {\n        const freq = this.toFrequency();\n        const log = Math.log2(freq / FrequencyClass.A4);\n        let noteNumber = Math.round(12 * log) + 57;\n        const octave = Math.floor(noteNumber / 12);\n        if (octave < 0) {\n            noteNumber += -12 * octave;\n        }\n        const noteName = scaleIndexToNote[noteNumber % 12];\n        return (noteName + octave.toString());\n    }\n    /**\n     * Return the duration of one cycle in seconds.\n     */\n    toSeconds() {\n        return 1 / super.toSeconds();\n    }\n    /**\n     * Return the duration of one cycle in ticks\n     */\n    toTicks() {\n        const quarterTime = this._beatsToUnits(1);\n        const quarters = this.valueOf() / quarterTime;\n        return Math.floor(quarters * this._getPPQ());\n    }\n    //-------------------------------------\n    // \tUNIT CONVERSIONS HELPERS\n    //-------------------------------------\n    /**\n     * With no arguments, return 0\n     */\n    _noArg() {\n        return 0;\n    }\n    /**\n     * Returns the value of a frequency in the current units\n     */\n    _frequencyToUnits(freq) {\n        return freq;\n    }\n    /**\n     * Returns the value of a tick in the current time units\n     */\n    _ticksToUnits(ticks) {\n        return (1 / ((ticks * 60) / (this._getBpm() * this._getPPQ())));\n    }\n    /**\n     * Return the value of the beats in the current units\n     */\n    _beatsToUnits(beats) {\n        return (1 / super._beatsToUnits(beats));\n    }\n    /**\n     * Returns the value of a second in the current units\n     */\n    _secondsToUnits(seconds) {\n        return (1 / seconds);\n    }\n    /**\n     * Convert a MIDI note to frequency value.\n     * @param  midi The midi number to convert.\n     * @return The corresponding frequency value\n     */\n    static mtof(midi) {\n        return mtof(midi);\n    }\n    /**\n     * Convert a frequency value to a MIDI note.\n     * @param frequency The value to frequency value to convert.\n     */\n    static ftom(frequency) {\n        return ftom(frequency);\n    }\n}\n//-------------------------------------\n// \tFREQUENCY CONVERSIONS\n//-------------------------------------\n/**\n * Note to scale index.\n * @hidden\n */\nconst noteToScaleIndex = {\n    cbbb: -3,\n    cbb: -2,\n    cb: -1,\n    c: 0,\n    \"c#\": 1,\n    cx: 2,\n    \"c##\": 2,\n    \"c###\": 3,\n    \"cx#\": 3,\n    \"c#x\": 3,\n    dbbb: -1,\n    dbb: 0,\n    db: 1,\n    d: 2,\n    \"d#\": 3,\n    dx: 4,\n    \"d##\": 4,\n    \"d###\": 5,\n    \"dx#\": 5,\n    \"d#x\": 5,\n    ebbb: 1,\n    ebb: 2,\n    eb: 3,\n    e: 4,\n    \"e#\": 5,\n    ex: 6,\n    \"e##\": 6,\n    \"e###\": 7,\n    \"ex#\": 7,\n    \"e#x\": 7,\n    fbbb: 2,\n    fbb: 3,\n    fb: 4,\n    f: 5,\n    \"f#\": 6,\n    fx: 7,\n    \"f##\": 7,\n    \"f###\": 8,\n    \"fx#\": 8,\n    \"f#x\": 8,\n    gbbb: 4,\n    gbb: 5,\n    gb: 6,\n    g: 7,\n    \"g#\": 8,\n    gx: 9,\n    \"g##\": 9,\n    \"g###\": 10,\n    \"gx#\": 10,\n    \"g#x\": 10,\n    abbb: 6,\n    abb: 7,\n    ab: 8,\n    a: 9,\n    \"a#\": 10,\n    ax: 11,\n    \"a##\": 11,\n    \"a###\": 12,\n    \"ax#\": 12,\n    \"a#x\": 12,\n    bbbb: 8,\n    bbb: 9,\n    bb: 10,\n    b: 11,\n    \"b#\": 12,\n    bx: 13,\n    \"b##\": 13,\n    \"b###\": 14,\n    \"bx#\": 14,\n    \"b#x\": 14,\n};\n/**\n * scale index to note (sharps)\n * @hidden\n */\nconst scaleIndexToNote = [\n    \"C\",\n    \"C#\",\n    \"D\",\n    \"D#\",\n    \"E\",\n    \"F\",\n    \"F#\",\n    \"G\",\n    \"G#\",\n    \"A\",\n    \"A#\",\n    \"B\",\n];\n/**\n * Convert a value into a FrequencyClass object.\n * @category Unit\n * @example\n * const midi = Tone.Frequency(\"C3\").toMidi();\n * console.log(midi);\n * @example\n * const hertz = Tone.Frequency(38, \"midi\").toFrequency();\n * console.log(hertz);\n */\nexport function Frequency(value, units) {\n    return new FrequencyClass(getContext(), value, units);\n}\n//# sourceMappingURL=Frequency.js.map","import { getContext } from \"../Global.js\";\nimport { TimeClass } from \"./Time.js\";\n/**\n * TransportTime is a time along the Transport's\n * timeline. It is similar to Tone.Time, but instead of evaluating\n * against the AudioContext's clock, it is evaluated against\n * the Transport's position. See [TransportTime wiki](https://github.com/Tonejs/Tone.js/wiki/TransportTime).\n * @category Unit\n */\nexport class TransportTimeClass extends TimeClass {\n    constructor() {\n        super(...arguments);\n        this.name = \"TransportTime\";\n    }\n    /**\n     * Return the current time in whichever context is relevant\n     */\n    _now() {\n        return this.context.transport.seconds;\n    }\n}\n/**\n * TransportTime is a time along the Transport's\n * timeline. It is similar to Tone.Time, but instead of evaluating\n * against the AudioContext's clock, it is evaluated against\n * the Transport's position. See [TransportTime wiki](https://github.com/Tonejs/Tone.js/wiki/TransportTime).\n * @category Unit\n */\nexport function TransportTime(value, units) {\n    return new TransportTimeClass(getContext(), value, units);\n}\n//# sourceMappingURL=TransportTime.js.map","import { getContext } from \"../Global.js\";\nimport { Tone } from \"../Tone.js\";\nimport { FrequencyClass } from \"../type/Frequency.js\";\nimport { TimeClass } from \"../type/Time.js\";\nimport { TransportTimeClass } from \"../type/TransportTime.js\";\nimport { assertUsedScheduleTime } from \"../util/Debug.js\";\nimport { getDefaultsFromInstance, optionsFromArguments, } from \"../util/Defaults.js\";\nimport { isArray, isBoolean, isDefined, isNumber, isString, isUndef, } from \"../util/TypeCheck.js\";\n/**\n * The Base class for all nodes that have an AudioContext.\n */\nexport class ToneWithContext extends Tone {\n    constructor() {\n        super();\n        const options = optionsFromArguments(ToneWithContext.getDefaults(), arguments, [\"context\"]);\n        if (this.defaultContext) {\n            this.context = this.defaultContext;\n        }\n        else {\n            this.context = options.context;\n        }\n    }\n    static getDefaults() {\n        return {\n            context: getContext(),\n        };\n    }\n    /**\n     * Return the current time of the Context clock plus the lookAhead.\n     * @example\n     * setInterval(() => {\n     * \tconsole.log(Tone.now());\n     * }, 100);\n     */\n    now() {\n        return this.context.currentTime + this.context.lookAhead;\n    }\n    /**\n     * Return the current time of the Context clock without any lookAhead.\n     * @example\n     * setInterval(() => {\n     * \tconsole.log(Tone.immediate());\n     * }, 100);\n     */\n    immediate() {\n        return this.context.currentTime;\n    }\n    /**\n     * The duration in seconds of one sample.\n     */\n    get sampleTime() {\n        return 1 / this.context.sampleRate;\n    }\n    /**\n     * The number of seconds of 1 processing block (128 samples)\n     * @example\n     * console.log(Tone.Destination.blockTime);\n     */\n    get blockTime() {\n        return 128 / this.context.sampleRate;\n    }\n    /**\n     * Convert the incoming time to seconds.\n     * This is calculated against the current {@link TransportClass} bpm\n     * @example\n     * const gain = new Tone.Gain();\n     * setInterval(() => console.log(gain.toSeconds(\"4n\")), 100);\n     * // ramp the tempo to 60 bpm over 30 seconds\n     * Tone.getTransport().bpm.rampTo(60, 30);\n     */\n    toSeconds(time) {\n        assertUsedScheduleTime(time);\n        return new TimeClass(this.context, time).toSeconds();\n    }\n    /**\n     * Convert the input to a frequency number\n     * @example\n     * const gain = new Tone.Gain();\n     * console.log(gain.toFrequency(\"4n\"));\n     */\n    toFrequency(freq) {\n        return new FrequencyClass(this.context, freq).toFrequency();\n    }\n    /**\n     * Convert the input time into ticks\n     * @example\n     * const gain = new Tone.Gain();\n     * console.log(gain.toTicks(\"4n\"));\n     */\n    toTicks(time) {\n        return new TransportTimeClass(this.context, time).toTicks();\n    }\n    //-------------------------------------\n    // \tGET/SET\n    //-------------------------------------\n    /**\n     * Get a subset of the properties which are in the partial props\n     */\n    _getPartialProperties(props) {\n        const options = this.get();\n        // remove attributes from the prop that are not in the partial\n        Object.keys(options).forEach((name) => {\n            if (isUndef(props[name])) {\n                delete options[name];\n            }\n        });\n        return options;\n    }\n    /**\n     * Get the object's attributes.\n     * @example\n     * const osc = new Tone.Oscillator();\n     * console.log(osc.get());\n     */\n    get() {\n        const defaults = getDefaultsFromInstance(this);\n        Object.keys(defaults).forEach((attribute) => {\n            if (Reflect.has(this, attribute)) {\n                const member = this[attribute];\n                if (isDefined(member) &&\n                    isDefined(member.value) &&\n                    isDefined(member.setValueAtTime)) {\n                    defaults[attribute] = member.value;\n                }\n                else if (member instanceof ToneWithContext) {\n                    defaults[attribute] = member._getPartialProperties(defaults[attribute]);\n                    // otherwise make sure it's a serializable type\n                }\n                else if (isArray(member) ||\n                    isNumber(member) ||\n                    isString(member) ||\n                    isBoolean(member)) {\n                    defaults[attribute] = member;\n                }\n                else {\n                    // remove all undefined and unserializable attributes\n                    delete defaults[attribute];\n                }\n            }\n        });\n        return defaults;\n    }\n    /**\n     * Set multiple properties at once with an object.\n     * @example\n     * const filter = new Tone.Filter().toDestination();\n     * // set values using an object\n     * filter.set({\n     * \tfrequency: \"C6\",\n     * \ttype: \"highpass\"\n     * });\n     * const player = new Tone.Player(\"https://tonejs.github.io/audio/berklee/Analogsynth_octaves_highmid.mp3\").connect(filter);\n     * player.autostart = true;\n     */\n    set(props) {\n        Object.keys(props).forEach((attribute) => {\n            if (Reflect.has(this, attribute) && isDefined(this[attribute])) {\n                if (this[attribute] &&\n                    isDefined(this[attribute].value) &&\n                    isDefined(this[attribute].setValueAtTime)) {\n                    // small optimization\n                    if (this[attribute].value !== props[attribute]) {\n                        this[attribute].value = props[attribute];\n                    }\n                }\n                else if (this[attribute] instanceof ToneWithContext) {\n                    this[attribute].set(props[attribute]);\n                }\n                else {\n                    this[attribute] = props[attribute];\n                }\n            }\n        });\n        return this;\n    }\n}\n//# sourceMappingURL=ToneWithContext.js.map","import { Timeline } from \"./Timeline.js\";\nimport { assertRange } from \"./Debug.js\";\n/**\n * A Timeline State. Provides the methods: `setStateAtTime(\"state\", time)` and `getValueAtTime(time)`\n * @param initial The initial state of the StateTimeline.  Defaults to `undefined`\n * @internal\n */\nexport class StateTimeline extends Timeline {\n    constructor(initial = \"stopped\") {\n        super();\n        this.name = \"StateTimeline\";\n        this._initial = initial;\n        this.setStateAtTime(this._initial, 0);\n    }\n    /**\n     * Returns the scheduled state scheduled before or at\n     * the given time.\n     * @param  time  The time to query.\n     * @return  The name of the state input in setStateAtTime.\n     */\n    getValueAtTime(time) {\n        const event = this.get(time);\n        if (event !== null) {\n            return event.state;\n        }\n        else {\n            return this._initial;\n        }\n    }\n    /**\n     * Add a state to the timeline.\n     * @param  state The name of the state to set.\n     * @param  time  The time to query.\n     * @param options Any additional options that are needed in the timeline.\n     */\n    setStateAtTime(state, time, options) {\n        assertRange(time, 0);\n        this.add(Object.assign({}, options, {\n            state,\n            time,\n        }));\n        return this;\n    }\n    /**\n     * Return the event before the time with the given state\n     * @param  state The state to look for\n     * @param  time  When to check before\n     * @return  The event with the given state before the time\n     */\n    getLastState(state, time) {\n        // time = this.toSeconds(time);\n        const index = this._search(time);\n        for (let i = index; i >= 0; i--) {\n            const event = this._timeline[i];\n            if (event.state === state) {\n                return event;\n            }\n        }\n    }\n    /**\n     * Return the event after the time with the given state\n     * @param  state The state to look for\n     * @param  time  When to check from\n     * @return  The event with the given state after the time\n     */\n    getNextState(state, time) {\n        // time = this.toSeconds(time);\n        const index = this._search(time);\n        if (index !== -1) {\n            for (let i = index; i < this._timeline.length; i++) {\n                const event = this._timeline[i];\n                if (event.state === state) {\n                    return event;\n                }\n            }\n        }\n    }\n}\n//# sourceMappingURL=StateTimeline.js.map","import { dbToGain, gainToDb } from \"../type/Conversions.js\";\nimport { isAudioParam } from \"../util/AdvancedTypeCheck.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { Timeline } from \"../util/Timeline.js\";\nimport { isDefined } from \"../util/TypeCheck.js\";\nimport { ToneWithContext } from \"./ToneWithContext.js\";\nimport { EQ } from \"../util/Math.js\";\nimport { assert, assertRange } from \"../util/Debug.js\";\n/**\n * Param wraps the native Web Audio's AudioParam to provide\n * additional unit conversion functionality. It also\n * serves as a base-class for classes which have a single,\n * automatable parameter.\n * @category Core\n */\nexport class Param extends ToneWithContext {\n    constructor() {\n        const options = optionsFromArguments(Param.getDefaults(), arguments, [\n            \"param\",\n            \"units\",\n            \"convert\",\n        ]);\n        super(options);\n        this.name = \"Param\";\n        this.overridden = false;\n        /**\n         * The minimum output value\n         */\n        this._minOutput = 1e-7;\n        assert(isDefined(options.param) &&\n            (isAudioParam(options.param) || options.param instanceof Param), \"param must be an AudioParam\");\n        while (!isAudioParam(options.param)) {\n            options.param = options.param._param;\n        }\n        this._swappable = isDefined(options.swappable)\n            ? options.swappable\n            : false;\n        if (this._swappable) {\n            this.input = this.context.createGain();\n            // initialize\n            this._param = options.param;\n            this.input.connect(this._param);\n        }\n        else {\n            this._param = this.input = options.param;\n        }\n        this._events = new Timeline(1000);\n        this._initialValue = this._param.defaultValue;\n        this.units = options.units;\n        this.convert = options.convert;\n        this._minValue = options.minValue;\n        this._maxValue = options.maxValue;\n        // if the value is defined, set it immediately\n        if (isDefined(options.value) &&\n            options.value !== this._toType(this._initialValue)) {\n            this.setValueAtTime(options.value, 0);\n        }\n    }\n    static getDefaults() {\n        return Object.assign(ToneWithContext.getDefaults(), {\n            convert: true,\n            units: \"number\",\n        });\n    }\n    get value() {\n        const now = this.now();\n        return this.getValueAtTime(now);\n    }\n    set value(value) {\n        this.cancelScheduledValues(this.now());\n        this.setValueAtTime(value, this.now());\n    }\n    get minValue() {\n        // if it's not the default minValue, return it\n        if (isDefined(this._minValue)) {\n            return this._minValue;\n        }\n        else if (this.units === \"time\" ||\n            this.units === \"frequency\" ||\n            this.units === \"normalRange\" ||\n            this.units === \"positive\" ||\n            this.units === \"transportTime\" ||\n            this.units === \"ticks\" ||\n            this.units === \"bpm\" ||\n            this.units === \"hertz\" ||\n            this.units === \"samples\") {\n            return 0;\n        }\n        else if (this.units === \"audioRange\") {\n            return -1;\n        }\n        else if (this.units === \"decibels\") {\n            return -Infinity;\n        }\n        else {\n            return this._param.minValue;\n        }\n    }\n    get maxValue() {\n        if (isDefined(this._maxValue)) {\n            return this._maxValue;\n        }\n        else if (this.units === \"normalRange\" ||\n            this.units === \"audioRange\") {\n            return 1;\n        }\n        else {\n            return this._param.maxValue;\n        }\n    }\n    /**\n     * Type guard based on the unit name\n     */\n    _is(arg, type) {\n        return this.units === type;\n    }\n    /**\n     * Make sure the value is always in the defined range\n     */\n    _assertRange(value) {\n        if (isDefined(this.maxValue) && isDefined(this.minValue)) {\n            assertRange(value, this._fromType(this.minValue), this._fromType(this.maxValue));\n        }\n        return value;\n    }\n    /**\n     * Convert the given value from the type specified by Param.units\n     * into the destination value (such as Gain or Frequency).\n     */\n    _fromType(val) {\n        if (this.convert && !this.overridden) {\n            if (this._is(val, \"time\")) {\n                return this.toSeconds(val);\n            }\n            else if (this._is(val, \"decibels\")) {\n                return dbToGain(val);\n            }\n            else if (this._is(val, \"frequency\")) {\n                return this.toFrequency(val);\n            }\n            else {\n                return val;\n            }\n        }\n        else if (this.overridden) {\n            // if it's overridden, should only schedule 0s\n            return 0;\n        }\n        else {\n            return val;\n        }\n    }\n    /**\n     * Convert the parameters value into the units specified by Param.units.\n     */\n    _toType(val) {\n        if (this.convert && this.units === \"decibels\") {\n            return gainToDb(val);\n        }\n        else {\n            return val;\n        }\n    }\n    //-------------------------------------\n    // ABSTRACT PARAM INTERFACE\n    // all docs are generated from ParamInterface.ts\n    //-------------------------------------\n    setValueAtTime(value, time) {\n        const computedTime = this.toSeconds(time);\n        const numericValue = this._fromType(value);\n        assert(isFinite(numericValue) && isFinite(computedTime), `Invalid argument(s) to setValueAtTime: ${JSON.stringify(value)}, ${JSON.stringify(time)}`);\n        this._assertRange(numericValue);\n        this.log(this.units, \"setValueAtTime\", value, computedTime);\n        this._events.add({\n            time: computedTime,\n            type: \"setValueAtTime\",\n            value: numericValue,\n        });\n        this._param.setValueAtTime(numericValue, computedTime);\n        return this;\n    }\n    getValueAtTime(time) {\n        const computedTime = Math.max(this.toSeconds(time), 0);\n        const after = this._events.getAfter(computedTime);\n        const before = this._events.get(computedTime);\n        let value = this._initialValue;\n        // if it was set by\n        if (before === null) {\n            value = this._initialValue;\n        }\n        else if (before.type === \"setTargetAtTime\" &&\n            (after === null || after.type === \"setValueAtTime\")) {\n            const previous = this._events.getBefore(before.time);\n            let previousVal;\n            if (previous === null) {\n                previousVal = this._initialValue;\n            }\n            else {\n                previousVal = previous.value;\n            }\n            if (before.type === \"setTargetAtTime\") {\n                value = this._exponentialApproach(before.time, previousVal, before.value, before.constant, computedTime);\n            }\n        }\n        else if (after === null) {\n            value = before.value;\n        }\n        else if (after.type === \"linearRampToValueAtTime\" ||\n            after.type === \"exponentialRampToValueAtTime\") {\n            let beforeValue = before.value;\n            if (before.type === \"setTargetAtTime\") {\n                const previous = this._events.getBefore(before.time);\n                if (previous === null) {\n                    beforeValue = this._initialValue;\n                }\n                else {\n                    beforeValue = previous.value;\n                }\n            }\n            if (after.type === \"linearRampToValueAtTime\") {\n                value = this._linearInterpolate(before.time, beforeValue, after.time, after.value, computedTime);\n            }\n            else {\n                value = this._exponentialInterpolate(before.time, beforeValue, after.time, after.value, computedTime);\n            }\n        }\n        else {\n            value = before.value;\n        }\n        return this._toType(value);\n    }\n    setRampPoint(time) {\n        time = this.toSeconds(time);\n        let currentVal = this.getValueAtTime(time);\n        this.cancelAndHoldAtTime(time);\n        if (this._fromType(currentVal) === 0) {\n            currentVal = this._toType(this._minOutput);\n        }\n        this.setValueAtTime(currentVal, time);\n        return this;\n    }\n    linearRampToValueAtTime(value, endTime) {\n        const numericValue = this._fromType(value);\n        const computedTime = this.toSeconds(endTime);\n        assert(isFinite(numericValue) && isFinite(computedTime), `Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(value)}, ${JSON.stringify(endTime)}`);\n        this._assertRange(numericValue);\n        this._events.add({\n            time: computedTime,\n            type: \"linearRampToValueAtTime\",\n            value: numericValue,\n        });\n        this.log(this.units, \"linearRampToValueAtTime\", value, computedTime);\n        this._param.linearRampToValueAtTime(numericValue, computedTime);\n        return this;\n    }\n    exponentialRampToValueAtTime(value, endTime) {\n        let numericValue = this._fromType(value);\n        // the value can't be 0\n        numericValue = EQ(numericValue, 0) ? this._minOutput : numericValue;\n        this._assertRange(numericValue);\n        const computedTime = this.toSeconds(endTime);\n        assert(isFinite(numericValue) && isFinite(computedTime), `Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(value)}, ${JSON.stringify(endTime)}`);\n        // store the event\n        this._events.add({\n            time: computedTime,\n            type: \"exponentialRampToValueAtTime\",\n            value: numericValue,\n        });\n        this.log(this.units, \"exponentialRampToValueAtTime\", value, computedTime);\n        this._param.exponentialRampToValueAtTime(numericValue, computedTime);\n        return this;\n    }\n    exponentialRampTo(value, rampTime, startTime) {\n        startTime = this.toSeconds(startTime);\n        this.setRampPoint(startTime);\n        this.exponentialRampToValueAtTime(value, startTime + this.toSeconds(rampTime));\n        return this;\n    }\n    linearRampTo(value, rampTime, startTime) {\n        startTime = this.toSeconds(startTime);\n        this.setRampPoint(startTime);\n        this.linearRampToValueAtTime(value, startTime + this.toSeconds(rampTime));\n        return this;\n    }\n    targetRampTo(value, rampTime, startTime) {\n        startTime = this.toSeconds(startTime);\n        this.setRampPoint(startTime);\n        this.exponentialApproachValueAtTime(value, startTime, rampTime);\n        return this;\n    }\n    exponentialApproachValueAtTime(value, time, rampTime) {\n        time = this.toSeconds(time);\n        rampTime = this.toSeconds(rampTime);\n        const timeConstant = Math.log(rampTime + 1) / Math.log(200);\n        this.setTargetAtTime(value, time, timeConstant);\n        // at 90% start a linear ramp to the final value\n        this.cancelAndHoldAtTime(time + rampTime * 0.9);\n        this.linearRampToValueAtTime(value, time + rampTime);\n        return this;\n    }\n    setTargetAtTime(value, startTime, timeConstant) {\n        const numericValue = this._fromType(value);\n        // The value will never be able to approach without timeConstant > 0.\n        assert(isFinite(timeConstant) && timeConstant > 0, \"timeConstant must be a number greater than 0\");\n        const computedTime = this.toSeconds(startTime);\n        this._assertRange(numericValue);\n        assert(isFinite(numericValue) && isFinite(computedTime), `Invalid argument(s) to setTargetAtTime: ${JSON.stringify(value)}, ${JSON.stringify(startTime)}`);\n        this._events.add({\n            constant: timeConstant,\n            time: computedTime,\n            type: \"setTargetAtTime\",\n            value: numericValue,\n        });\n        this.log(this.units, \"setTargetAtTime\", value, computedTime, timeConstant);\n        this._param.setTargetAtTime(numericValue, computedTime, timeConstant);\n        return this;\n    }\n    setValueCurveAtTime(values, startTime, duration, scaling = 1) {\n        duration = this.toSeconds(duration);\n        startTime = this.toSeconds(startTime);\n        const startingValue = this._fromType(values[0]) * scaling;\n        this.setValueAtTime(this._toType(startingValue), startTime);\n        const segTime = duration / (values.length - 1);\n        for (let i = 1; i < values.length; i++) {\n            const numericValue = this._fromType(values[i]) * scaling;\n            this.linearRampToValueAtTime(this._toType(numericValue), startTime + i * segTime);\n        }\n        return this;\n    }\n    cancelScheduledValues(time) {\n        const computedTime = this.toSeconds(time);\n        assert(isFinite(computedTime), `Invalid argument to cancelScheduledValues: ${JSON.stringify(time)}`);\n        this._events.cancel(computedTime);\n        this._param.cancelScheduledValues(computedTime);\n        this.log(this.units, \"cancelScheduledValues\", computedTime);\n        return this;\n    }\n    cancelAndHoldAtTime(time) {\n        const computedTime = this.toSeconds(time);\n        const valueAtTime = this._fromType(this.getValueAtTime(computedTime));\n        // remove the schedule events\n        assert(isFinite(computedTime), `Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(time)}`);\n        this.log(this.units, \"cancelAndHoldAtTime\", computedTime, \"value=\" + valueAtTime);\n        // if there is an event at the given computedTime\n        // and that even is not a \"set\"\n        const before = this._events.get(computedTime);\n        const after = this._events.getAfter(computedTime);\n        if (before && EQ(before.time, computedTime)) {\n            // remove everything after\n            if (after) {\n                this._param.cancelScheduledValues(after.time);\n                this._events.cancel(after.time);\n            }\n            else {\n                this._param.cancelAndHoldAtTime(computedTime);\n                this._events.cancel(computedTime + this.sampleTime);\n            }\n        }\n        else if (after) {\n            this._param.cancelScheduledValues(after.time);\n            // cancel the next event(s)\n            this._events.cancel(after.time);\n            if (after.type === \"linearRampToValueAtTime\") {\n                this.linearRampToValueAtTime(this._toType(valueAtTime), computedTime);\n            }\n            else if (after.type === \"exponentialRampToValueAtTime\") {\n                this.exponentialRampToValueAtTime(this._toType(valueAtTime), computedTime);\n            }\n        }\n        // set the value at the given time\n        this._events.add({\n            time: computedTime,\n            type: \"setValueAtTime\",\n            value: valueAtTime,\n        });\n        this._param.setValueAtTime(valueAtTime, computedTime);\n        return this;\n    }\n    rampTo(value, rampTime = 0.1, startTime) {\n        if (this.units === \"frequency\" ||\n            this.units === \"bpm\" ||\n            this.units === \"decibels\") {\n            this.exponentialRampTo(value, rampTime, startTime);\n        }\n        else {\n            this.linearRampTo(value, rampTime, startTime);\n        }\n        return this;\n    }\n    /**\n     * Apply all of the previously scheduled events to the passed in Param or AudioParam.\n     * The applied values will start at the context's current time and schedule\n     * all of the events which are scheduled on this Param onto the passed in param.\n     */\n    apply(param) {\n        const now = this.context.currentTime;\n        // set the param's value at the current time and schedule everything else\n        param.setValueAtTime(this.getValueAtTime(now), now);\n        // if the previous event was a curve, then set the rest of it\n        const previousEvent = this._events.get(now);\n        if (previousEvent && previousEvent.type === \"setTargetAtTime\") {\n            // approx it until the next event with linear ramps\n            const nextEvent = this._events.getAfter(previousEvent.time);\n            // or for 2 seconds if there is no event\n            const endTime = nextEvent ? nextEvent.time : now + 2;\n            const subdivisions = (endTime - now) / 10;\n            for (let i = now; i < endTime; i += subdivisions) {\n                param.linearRampToValueAtTime(this.getValueAtTime(i), i);\n            }\n        }\n        this._events.forEachAfter(this.context.currentTime, (event) => {\n            if (event.type === \"cancelScheduledValues\") {\n                param.cancelScheduledValues(event.time);\n            }\n            else if (event.type === \"setTargetAtTime\") {\n                param.setTargetAtTime(event.value, event.time, event.constant);\n            }\n            else {\n                param[event.type](event.value, event.time);\n            }\n        });\n        return this;\n    }\n    /**\n     * Replace the Param's internal AudioParam. Will apply scheduled curves\n     * onto the parameter and replace the connections.\n     */\n    setParam(param) {\n        assert(this._swappable, \"The Param must be assigned as 'swappable' in the constructor\");\n        const input = this.input;\n        input.disconnect(this._param);\n        this.apply(param);\n        this._param = param;\n        input.connect(this._param);\n        return this;\n    }\n    dispose() {\n        super.dispose();\n        this._events.dispose();\n        return this;\n    }\n    get defaultValue() {\n        return this._toType(this._param.defaultValue);\n    }\n    //-------------------------------------\n    // \tAUTOMATION CURVE CALCULATIONS\n    // \tMIT License, copyright (c) 2014 Jordan Santell\n    //-------------------------------------\n    // Calculates the the value along the curve produced by setTargetAtTime\n    _exponentialApproach(t0, v0, v1, timeConstant, t) {\n        return v1 + (v0 - v1) * Math.exp(-(t - t0) / timeConstant);\n    }\n    // Calculates the the value along the curve produced by linearRampToValueAtTime\n    _linearInterpolate(t0, v0, t1, v1, t) {\n        return v0 + (v1 - v0) * ((t - t0) / (t1 - t0));\n    }\n    // Calculates the the value along the curve produced by exponentialRampToValueAtTime\n    _exponentialInterpolate(t0, v0, t1, v1, t) {\n        return v0 * Math.pow(v1 / v0, (t - t0) / (t1 - t0));\n    }\n}\n//# sourceMappingURL=Param.js.map","import { isAudioNode, isAudioParam } from \"../util/AdvancedTypeCheck.js\";\nimport { isDefined } from \"../util/TypeCheck.js\";\nimport { Param } from \"./Param.js\";\nimport { ToneWithContext } from \"./ToneWithContext.js\";\nimport { assert, warn } from \"../util/Debug.js\";\n/**\n * ToneAudioNode is the base class for classes which process audio.\n * @category Core\n */\nexport class ToneAudioNode extends ToneWithContext {\n    constructor() {\n        super(...arguments);\n        /**\n         * List all of the node that must be set to match the ChannelProperties\n         */\n        this._internalChannels = [];\n    }\n    /**\n     * The number of inputs feeding into the AudioNode.\n     * For source nodes, this will be 0.\n     * @example\n     * const node = new Tone.Gain();\n     * console.log(node.numberOfInputs);\n     */\n    get numberOfInputs() {\n        if (isDefined(this.input)) {\n            if (isAudioParam(this.input) || this.input instanceof Param) {\n                return 1;\n            }\n            else {\n                return this.input.numberOfInputs;\n            }\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * The number of outputs of the AudioNode.\n     * @example\n     * const node = new Tone.Gain();\n     * console.log(node.numberOfOutputs);\n     */\n    get numberOfOutputs() {\n        if (isDefined(this.output)) {\n            return this.output.numberOfOutputs;\n        }\n        else {\n            return 0;\n        }\n    }\n    //-------------------------------------\n    // AUDIO PROPERTIES\n    //-------------------------------------\n    /**\n     * Used to decide which nodes to get/set properties on\n     */\n    _isAudioNode(node) {\n        return (isDefined(node) &&\n            (node instanceof ToneAudioNode || isAudioNode(node)));\n    }\n    /**\n     * Get all of the audio nodes (either internal or input/output) which together\n     * make up how the class node responds to channel input/output\n     */\n    _getInternalNodes() {\n        const nodeList = this._internalChannels.slice(0);\n        if (this._isAudioNode(this.input)) {\n            nodeList.push(this.input);\n        }\n        if (this._isAudioNode(this.output)) {\n            if (this.input !== this.output) {\n                nodeList.push(this.output);\n            }\n        }\n        return nodeList;\n    }\n    /**\n     * Set the audio options for this node such as channelInterpretation\n     * channelCount, etc.\n     * @param options\n     */\n    _setChannelProperties(options) {\n        const nodeList = this._getInternalNodes();\n        nodeList.forEach((node) => {\n            node.channelCount = options.channelCount;\n            node.channelCountMode = options.channelCountMode;\n            node.channelInterpretation = options.channelInterpretation;\n        });\n    }\n    /**\n     * Get the current audio options for this node such as channelInterpretation\n     * channelCount, etc.\n     */\n    _getChannelProperties() {\n        const nodeList = this._getInternalNodes();\n        assert(nodeList.length > 0, \"ToneAudioNode does not have any internal nodes\");\n        // use the first node to get properties\n        // they should all be the same\n        const node = nodeList[0];\n        return {\n            channelCount: node.channelCount,\n            channelCountMode: node.channelCountMode,\n            channelInterpretation: node.channelInterpretation,\n        };\n    }\n    /**\n     * channelCount is the number of channels used when up-mixing and down-mixing\n     * connections to any inputs to the node. The default value is 2 except for\n     * specific nodes where its value is specially determined.\n     */\n    get channelCount() {\n        return this._getChannelProperties().channelCount;\n    }\n    set channelCount(channelCount) {\n        const props = this._getChannelProperties();\n        // merge it with the other properties\n        this._setChannelProperties(Object.assign(props, { channelCount }));\n    }\n    /**\n     * channelCountMode determines how channels will be counted when up-mixing and\n     * down-mixing connections to any inputs to the node.\n     * The default value is \"max\". This attribute has no effect for nodes with no inputs.\n     * * \"max\" - computedNumberOfChannels is the maximum of the number of channels of all connections to an input. In this mode channelCount is ignored.\n     * * \"clamped-max\" - computedNumberOfChannels is determined as for \"max\" and then clamped to a maximum value of the given channelCount.\n     * * \"explicit\" - computedNumberOfChannels is the exact value as specified by the channelCount.\n     */\n    get channelCountMode() {\n        return this._getChannelProperties().channelCountMode;\n    }\n    set channelCountMode(channelCountMode) {\n        const props = this._getChannelProperties();\n        // merge it with the other properties\n        this._setChannelProperties(Object.assign(props, { channelCountMode }));\n    }\n    /**\n     * channelInterpretation determines how individual channels will be treated\n     * when up-mixing and down-mixing connections to any inputs to the node.\n     * The default value is \"speakers\".\n     */\n    get channelInterpretation() {\n        return this._getChannelProperties().channelInterpretation;\n    }\n    set channelInterpretation(channelInterpretation) {\n        const props = this._getChannelProperties();\n        // merge it with the other properties\n        this._setChannelProperties(Object.assign(props, { channelInterpretation }));\n    }\n    //-------------------------------------\n    // CONNECTIONS\n    //-------------------------------------\n    /**\n     * connect the output of a ToneAudioNode to an AudioParam, AudioNode, or ToneAudioNode\n     * @param destination The output to connect to\n     * @param outputNum The output to connect from\n     * @param inputNum The input to connect to\n     */\n    connect(destination, outputNum = 0, inputNum = 0) {\n        connect(this, destination, outputNum, inputNum);\n        return this;\n    }\n    /**\n     * Connect the output to the context's destination node.\n     * @example\n     * const osc = new Tone.Oscillator(\"C2\").start();\n     * osc.toDestination();\n     */\n    toDestination() {\n        this.connect(this.context.destination);\n        return this;\n    }\n    /**\n     * Connect the output to the context's destination node.\n     * @see {@link toDestination}\n     * @deprecated\n     */\n    toMaster() {\n        warn(\"toMaster() has been renamed toDestination()\");\n        return this.toDestination();\n    }\n    /**\n     * disconnect the output\n     */\n    disconnect(destination, outputNum = 0, inputNum = 0) {\n        disconnect(this, destination, outputNum, inputNum);\n        return this;\n    }\n    /**\n     * Connect the output of this node to the rest of the nodes in series.\n     * @example\n     * const player = new Tone.Player(\"https://tonejs.github.io/audio/drum-samples/handdrum-loop.mp3\");\n     * player.autostart = true;\n     * const filter = new Tone.AutoFilter(4).start();\n     * const distortion = new Tone.Distortion(0.5);\n     * // connect the player to the filter, distortion and then to the master output\n     * player.chain(filter, distortion, Tone.Destination);\n     */\n    chain(...nodes) {\n        connectSeries(this, ...nodes);\n        return this;\n    }\n    /**\n     * connect the output of this node to the rest of the nodes in parallel.\n     * @example\n     * const player = new Tone.Player(\"https://tonejs.github.io/audio/drum-samples/conga-rhythm.mp3\");\n     * player.autostart = true;\n     * const pitchShift = new Tone.PitchShift(4).toDestination();\n     * const filter = new Tone.Filter(\"G5\").toDestination();\n     * // connect a node to the pitch shift and filter in parallel\n     * player.fan(pitchShift, filter);\n     */\n    fan(...nodes) {\n        nodes.forEach((node) => this.connect(node));\n        return this;\n    }\n    /**\n     * Dispose and disconnect\n     */\n    dispose() {\n        super.dispose();\n        if (isDefined(this.input)) {\n            if (this.input instanceof ToneAudioNode) {\n                this.input.dispose();\n            }\n            else if (isAudioNode(this.input)) {\n                this.input.disconnect();\n            }\n        }\n        if (isDefined(this.output)) {\n            if (this.output instanceof ToneAudioNode) {\n                this.output.dispose();\n            }\n            else if (isAudioNode(this.output)) {\n                this.output.disconnect();\n            }\n        }\n        this._internalChannels = [];\n        return this;\n    }\n}\n//-------------------------------------\n// CONNECTIONS\n//-------------------------------------\n/**\n * connect together all of the arguments in series\n * @param nodes\n */\nexport function connectSeries(...nodes) {\n    const first = nodes.shift();\n    nodes.reduce((prev, current) => {\n        if (prev instanceof ToneAudioNode) {\n            prev.connect(current);\n        }\n        else if (isAudioNode(prev)) {\n            connect(prev, current);\n        }\n        return current;\n    }, first);\n}\n/**\n * Connect two nodes together so that signal flows from the\n * first node to the second. Optionally specify the input and output channels.\n * @param srcNode The source node\n * @param dstNode The destination node\n * @param outputNumber The output channel of the srcNode\n * @param inputNumber The input channel of the dstNode\n */\nexport function connect(srcNode, dstNode, outputNumber = 0, inputNumber = 0) {\n    assert(isDefined(srcNode), \"Cannot connect from undefined node\");\n    assert(isDefined(dstNode), \"Cannot connect to undefined node\");\n    if (dstNode instanceof ToneAudioNode || isAudioNode(dstNode)) {\n        assert(dstNode.numberOfInputs > 0, \"Cannot connect to node with no inputs\");\n    }\n    assert(srcNode.numberOfOutputs > 0, \"Cannot connect from node with no outputs\");\n    // resolve the input of the dstNode\n    while (dstNode instanceof ToneAudioNode || dstNode instanceof Param) {\n        if (isDefined(dstNode.input)) {\n            dstNode = dstNode.input;\n        }\n    }\n    while (srcNode instanceof ToneAudioNode) {\n        if (isDefined(srcNode.output)) {\n            srcNode = srcNode.output;\n        }\n    }\n    // make the connection\n    if (isAudioParam(dstNode)) {\n        srcNode.connect(dstNode, outputNumber);\n    }\n    else {\n        srcNode.connect(dstNode, outputNumber, inputNumber);\n    }\n}\n/**\n * Disconnect a node from all nodes or optionally include a destination node and input/output channels.\n * @param srcNode The source node\n * @param dstNode The destination node\n * @param outputNumber The output channel of the srcNode\n * @param inputNumber The input channel of the dstNode\n */\nexport function disconnect(srcNode, dstNode, outputNumber = 0, inputNumber = 0) {\n    // resolve the destination node\n    if (isDefined(dstNode)) {\n        while (dstNode instanceof ToneAudioNode) {\n            dstNode = dstNode.input;\n        }\n    }\n    // resolve the src node\n    while (!isAudioNode(srcNode)) {\n        if (isDefined(srcNode.output)) {\n            srcNode = srcNode.output;\n        }\n    }\n    if (isAudioParam(dstNode)) {\n        srcNode.disconnect(dstNode, outputNumber);\n    }\n    else if (isAudioNode(dstNode)) {\n        srcNode.disconnect(dstNode, outputNumber, inputNumber);\n    }\n    else {\n        srcNode.disconnect();\n    }\n}\n/**\n * Connect the output of one or more source nodes to a single destination node\n * @param nodes One or more source nodes followed by one destination node\n * @example\n * const player = new Tone.Player(\"https://tonejs.github.io/audio/drum-samples/conga-rhythm.mp3\");\n * const player1 = new Tone.Player(\"https://tonejs.github.io/audio/drum-samples/conga-rhythm.mp3\");\n * const filter = new Tone.Filter(\"G5\").toDestination();\n * // connect nodes to a common destination\n * Tone.fanIn(player, player1, filter);\n */\nexport function fanIn(...nodes) {\n    const dstNode = nodes.pop();\n    if (isDefined(dstNode)) {\n        nodes.forEach((node) => connect(node, dstNode));\n    }\n}\n//# sourceMappingURL=ToneAudioNode.js.map","import { Param } from \"../context/Param.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { readOnly } from \"../util/Interface.js\";\nimport { ToneAudioNode } from \"./ToneAudioNode.js\";\n/**\n * A thin wrapper around the Native Web Audio GainNode.\n * The GainNode is a basic building block of the Web Audio\n * API and is useful for routing audio and adjusting gains.\n * @category Core\n * @example\n * return Tone.Offline(() => {\n * \tconst gainNode = new Tone.Gain(0).toDestination();\n * \tconst osc = new Tone.Oscillator(30).connect(gainNode).start();\n * \tgainNode.gain.rampTo(1, 0.1);\n * \tgainNode.gain.rampTo(0, 0.4, 0.2);\n * }, 0.7, 1);\n */\nexport class Gain extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(Gain.getDefaults(), arguments, [\n            \"gain\",\n            \"units\",\n        ]);\n        super(options);\n        this.name = \"Gain\";\n        /**\n         * The wrapped GainNode.\n         */\n        this._gainNode = this.context.createGain();\n        // input = output\n        this.input = this._gainNode;\n        this.output = this._gainNode;\n        this.gain = new Param({\n            context: this.context,\n            convert: options.convert,\n            param: this._gainNode.gain,\n            units: options.units,\n            value: options.gain,\n            minValue: options.minValue,\n            maxValue: options.maxValue,\n        });\n        readOnly(this, \"gain\");\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            convert: true,\n            gain: 1,\n            units: \"gain\",\n        });\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this._gainNode.disconnect();\n        this.gain.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=Gain.js.map","import { Gain } from \"../core/context/Gain.js\";\nimport { ToneAudioNode, } from \"../core/context/ToneAudioNode.js\";\nimport { noOp } from \"../core/util/Interface.js\";\nimport { assert } from \"../core/util/Debug.js\";\n/**\n * Base class for fire-and-forget nodes\n */\nexport class OneShotSource extends ToneAudioNode {\n    constructor(options) {\n        super(options);\n        /**\n         * The callback to invoke after the\n         * source is done playing.\n         */\n        this.onended = noOp;\n        /**\n         * The start time\n         */\n        this._startTime = -1;\n        /**\n         * The stop time\n         */\n        this._stopTime = -1;\n        /**\n         * The id of the timeout\n         */\n        this._timeout = -1;\n        /**\n         * The public output node\n         */\n        this.output = new Gain({\n            context: this.context,\n            gain: 0,\n        });\n        /**\n         * The output gain node.\n         */\n        this._gainNode = this.output;\n        /**\n         * Get the playback state at the given time\n         */\n        this.getStateAtTime = function (time) {\n            const computedTime = this.toSeconds(time);\n            if (this._startTime !== -1 &&\n                computedTime >= this._startTime &&\n                (this._stopTime === -1 || computedTime <= this._stopTime)) {\n                return \"started\";\n            }\n            else {\n                return \"stopped\";\n            }\n        };\n        this._fadeIn = options.fadeIn;\n        this._fadeOut = options.fadeOut;\n        this._curve = options.curve;\n        this.onended = options.onended;\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            curve: \"linear\",\n            fadeIn: 0,\n            fadeOut: 0,\n            onended: noOp,\n        });\n    }\n    /**\n     * Start the source at the given time\n     * @param  time When to start the source\n     */\n    _startGain(time, gain = 1) {\n        assert(this._startTime === -1, \"Source cannot be started more than once\");\n        // apply a fade in envelope\n        const fadeInTime = this.toSeconds(this._fadeIn);\n        // record the start time\n        this._startTime = time + fadeInTime;\n        this._startTime = Math.max(this._startTime, this.context.currentTime);\n        // schedule the envelope\n        if (fadeInTime > 0) {\n            this._gainNode.gain.setValueAtTime(0, time);\n            if (this._curve === \"linear\") {\n                this._gainNode.gain.linearRampToValueAtTime(gain, time + fadeInTime);\n            }\n            else {\n                this._gainNode.gain.exponentialApproachValueAtTime(gain, time, fadeInTime);\n            }\n        }\n        else {\n            this._gainNode.gain.setValueAtTime(gain, time);\n        }\n        return this;\n    }\n    /**\n     * Stop the source node at the given time.\n     * @param time When to stop the source\n     */\n    stop(time) {\n        this.log(\"stop\", time);\n        this._stopGain(this.toSeconds(time));\n        return this;\n    }\n    /**\n     * Stop the source at the given time\n     * @param  time When to stop the source\n     */\n    _stopGain(time) {\n        assert(this._startTime !== -1, \"'start' must be called before 'stop'\");\n        // cancel the previous stop\n        this.cancelStop();\n        // the fadeOut time\n        const fadeOutTime = this.toSeconds(this._fadeOut);\n        // schedule the stop callback\n        this._stopTime = this.toSeconds(time) + fadeOutTime;\n        this._stopTime = Math.max(this._stopTime, this.now());\n        if (fadeOutTime > 0) {\n            // start the fade out curve at the given time\n            if (this._curve === \"linear\") {\n                this._gainNode.gain.linearRampTo(0, fadeOutTime, time);\n            }\n            else {\n                this._gainNode.gain.targetRampTo(0, fadeOutTime, time);\n            }\n        }\n        else {\n            // stop any ongoing ramps, and set the value to 0\n            this._gainNode.gain.cancelAndHoldAtTime(time);\n            this._gainNode.gain.setValueAtTime(0, time);\n        }\n        this.context.clearTimeout(this._timeout);\n        this._timeout = this.context.setTimeout(() => {\n            // allow additional time for the exponential curve to fully decay\n            const additionalTail = this._curve === \"exponential\" ? fadeOutTime * 2 : 0;\n            this._stopSource(this.now() + additionalTail);\n            this._onended();\n        }, this._stopTime - this.context.currentTime);\n        return this;\n    }\n    /**\n     * Invoke the onended callback\n     */\n    _onended() {\n        if (this.onended === noOp) {\n            return;\n        }\n        this.onended(this);\n        // overwrite onended to make sure it only is called once\n        this.onended = noOp;\n        // dispose when it's ended to free up for garbage collection only in the online context\n        if (!this.context.isOffline) {\n            const disposeCallback = () => this.dispose();\n            if (typeof requestIdleCallback !== \"undefined\") {\n                requestIdleCallback(disposeCallback);\n            }\n            else {\n                setTimeout(disposeCallback, 10);\n            }\n        }\n    }\n    /**\n     * Get the playback state at the current time\n     */\n    get state() {\n        return this.getStateAtTime(this.now());\n    }\n    /**\n     * Cancel a scheduled stop event\n     */\n    cancelStop() {\n        this.log(\"cancelStop\");\n        assert(this._startTime !== -1, \"Source is not started\");\n        // cancel the stop envelope\n        this._gainNode.gain.cancelScheduledValues(this._startTime + this.sampleTime);\n        this.context.clearTimeout(this._timeout);\n        this._stopTime = -1;\n        return this;\n    }\n    dispose() {\n        super.dispose();\n        this._gainNode.dispose();\n        this.onended = noOp;\n        return this;\n    }\n}\n//# sourceMappingURL=OneShotSource.js.map","import { connect } from \"../core/context/ToneAudioNode.js\";\nimport { Param } from \"../core/context/Param.js\";\nimport { optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { OneShotSource, } from \"../source/OneShotSource.js\";\n/**\n * Wrapper around the native fire-and-forget ConstantSource.\n * Adds the ability to reschedule the stop method.\n * @category Signal\n */\nexport class ToneConstantSource extends OneShotSource {\n    constructor() {\n        const options = optionsFromArguments(ToneConstantSource.getDefaults(), arguments, [\"offset\"]);\n        super(options);\n        this.name = \"ToneConstantSource\";\n        /**\n         * The signal generator\n         */\n        this._source = this.context.createConstantSource();\n        connect(this._source, this._gainNode);\n        this.offset = new Param({\n            context: this.context,\n            convert: options.convert,\n            param: this._source.offset,\n            units: options.units,\n            value: options.offset,\n            minValue: options.minValue,\n            maxValue: options.maxValue,\n        });\n    }\n    static getDefaults() {\n        return Object.assign(OneShotSource.getDefaults(), {\n            convert: true,\n            offset: 1,\n            units: \"number\",\n        });\n    }\n    /**\n     * Start the source node at the given time\n     * @param  time When to start the source\n     */\n    start(time) {\n        const computedTime = this.toSeconds(time);\n        this.log(\"start\", computedTime);\n        this._startGain(computedTime);\n        this._source.start(computedTime);\n        return this;\n    }\n    _stopSource(time) {\n        this._source.stop(time);\n    }\n    dispose() {\n        super.dispose();\n        if (this.state === \"started\") {\n            this.stop();\n        }\n        this._source.disconnect();\n        this.offset.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=ToneConstantSource.js.map","import { Param } from \"../core/context/Param.js\";\nimport { ToneAudioNode, } from \"../core/context/ToneAudioNode.js\";\nimport { connect } from \"../core/context/ToneAudioNode.js\";\nimport { isAudioParam } from \"../core/util/AdvancedTypeCheck.js\";\nimport { optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { ToneConstantSource } from \"./ToneConstantSource.js\";\n/**\n * A signal is an audio-rate value. Tone.Signal is a core component of the library.\n * Unlike a number, Signals can be scheduled with sample-level accuracy. Tone.Signal\n * has all of the methods available to native Web Audio\n * [AudioParam](http://webaudio.github.io/web-audio-api/#the-audioparam-interface)\n * as well as additional conveniences. Read more about working with signals\n * [here](https://github.com/Tonejs/Tone.js/wiki/Signals).\n *\n * @example\n * const osc = new Tone.Oscillator().toDestination().start();\n * // a scheduleable signal which can be connected to control an AudioParam or another Signal\n * const signal = new Tone.Signal({\n * \tvalue: \"C4\",\n * \tunits: \"frequency\"\n * }).connect(osc.frequency);\n * // the scheduled ramp controls the connected signal\n * signal.rampTo(\"C2\", 4, \"+0.5\");\n * @category Signal\n */\nexport class Signal extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(Signal.getDefaults(), arguments, [\n            \"value\",\n            \"units\",\n        ]);\n        super(options);\n        this.name = \"Signal\";\n        /**\n         * Indicates if the value should be overridden on connection.\n         */\n        this.override = true;\n        this.output = this._constantSource = new ToneConstantSource({\n            context: this.context,\n            convert: options.convert,\n            offset: options.value,\n            units: options.units,\n            minValue: options.minValue,\n            maxValue: options.maxValue,\n        });\n        this._constantSource.start(0);\n        this.input = this._param = this._constantSource.offset;\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            convert: true,\n            units: \"number\",\n            value: 0,\n        });\n    }\n    connect(destination, outputNum = 0, inputNum = 0) {\n        // start it only when connected to something\n        connectSignal(this, destination, outputNum, inputNum);\n        return this;\n    }\n    dispose() {\n        super.dispose();\n        this._param.dispose();\n        this._constantSource.dispose();\n        return this;\n    }\n    //-------------------------------------\n    // ABSTRACT PARAM INTERFACE\n    // just a proxy for the ConstantSourceNode's offset AudioParam\n    // all docs are generated from AbstractParam.ts\n    //-------------------------------------\n    setValueAtTime(value, time) {\n        this._param.setValueAtTime(value, time);\n        return this;\n    }\n    getValueAtTime(time) {\n        return this._param.getValueAtTime(time);\n    }\n    setRampPoint(time) {\n        this._param.setRampPoint(time);\n        return this;\n    }\n    linearRampToValueAtTime(value, time) {\n        this._param.linearRampToValueAtTime(value, time);\n        return this;\n    }\n    exponentialRampToValueAtTime(value, time) {\n        this._param.exponentialRampToValueAtTime(value, time);\n        return this;\n    }\n    exponentialRampTo(value, rampTime, startTime) {\n        this._param.exponentialRampTo(value, rampTime, startTime);\n        return this;\n    }\n    linearRampTo(value, rampTime, startTime) {\n        this._param.linearRampTo(value, rampTime, startTime);\n        return this;\n    }\n    targetRampTo(value, rampTime, startTime) {\n        this._param.targetRampTo(value, rampTime, startTime);\n        return this;\n    }\n    exponentialApproachValueAtTime(value, time, rampTime) {\n        this._param.exponentialApproachValueAtTime(value, time, rampTime);\n        return this;\n    }\n    setTargetAtTime(value, startTime, timeConstant) {\n        this._param.setTargetAtTime(value, startTime, timeConstant);\n        return this;\n    }\n    setValueCurveAtTime(values, startTime, duration, scaling) {\n        this._param.setValueCurveAtTime(values, startTime, duration, scaling);\n        return this;\n    }\n    cancelScheduledValues(time) {\n        this._param.cancelScheduledValues(time);\n        return this;\n    }\n    cancelAndHoldAtTime(time) {\n        this._param.cancelAndHoldAtTime(time);\n        return this;\n    }\n    rampTo(value, rampTime, startTime) {\n        this._param.rampTo(value, rampTime, startTime);\n        return this;\n    }\n    get value() {\n        return this._param.value;\n    }\n    set value(value) {\n        this._param.value = value;\n    }\n    get convert() {\n        return this._param.convert;\n    }\n    set convert(convert) {\n        this._param.convert = convert;\n    }\n    get units() {\n        return this._param.units;\n    }\n    get overridden() {\n        return this._param.overridden;\n    }\n    set overridden(overridden) {\n        this._param.overridden = overridden;\n    }\n    get maxValue() {\n        return this._param.maxValue;\n    }\n    get minValue() {\n        return this._param.minValue;\n    }\n    /**\n     * @see {@link Param.apply}.\n     */\n    apply(param) {\n        this._param.apply(param);\n        return this;\n    }\n}\n/**\n * When connecting from a signal, it's necessary to zero out the node destination\n * node if that node is also a signal. If the destination is not 0, then the values\n * will be summed. This method insures that the output of the destination signal will\n * be the same as the source signal, making the destination signal a pass through node.\n * @param signal The output signal to connect from\n * @param destination the destination to connect to\n * @param outputNum the optional output number\n * @param inputNum the input number\n */\nexport function connectSignal(signal, destination, outputNum, inputNum) {\n    if (destination instanceof Param ||\n        isAudioParam(destination) ||\n        (destination instanceof Signal && destination.override)) {\n        // cancel changes\n        destination.cancelScheduledValues(0);\n        // reset the value\n        destination.setValueAtTime(0, 0);\n        // mark the value as overridden\n        if (destination instanceof Signal) {\n            destination.overridden = true;\n        }\n    }\n    connect(signal, destination, outputNum, inputNum);\n}\n//# sourceMappingURL=Signal.js.map","import { Param } from \"../context/Param.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { Timeline } from \"../util/Timeline.js\";\nimport { isUndef } from \"../util/TypeCheck.js\";\n/**\n * A Param class just for computing ticks. Similar to the {@link Param} class,\n * but offers conversion to BPM values as well as ability to compute tick\n * duration and elapsed ticks\n */\nexport class TickParam extends Param {\n    constructor() {\n        const options = optionsFromArguments(TickParam.getDefaults(), arguments, [\"value\"]);\n        super(options);\n        this.name = \"TickParam\";\n        /**\n         * The timeline which tracks all of the automations.\n         */\n        this._events = new Timeline(Infinity);\n        /**\n         * The internal holder for the multiplier value\n         */\n        this._multiplier = 1;\n        // set the multiplier\n        this._multiplier = options.multiplier;\n        // clear the ticks from the beginning\n        this._events.cancel(0);\n        // set an initial event\n        this._events.add({\n            ticks: 0,\n            time: 0,\n            type: \"setValueAtTime\",\n            value: this._fromType(options.value),\n        });\n        this.setValueAtTime(options.value, 0);\n    }\n    static getDefaults() {\n        return Object.assign(Param.getDefaults(), {\n            multiplier: 1,\n            units: \"hertz\",\n            value: 1,\n        });\n    }\n    setTargetAtTime(value, time, constant) {\n        // approximate it with multiple linear ramps\n        time = this.toSeconds(time);\n        this.setRampPoint(time);\n        const computedValue = this._fromType(value);\n        // start from previously scheduled value\n        const prevEvent = this._events.get(time);\n        const segments = Math.round(Math.max(1 / constant, 1));\n        for (let i = 0; i <= segments; i++) {\n            const segTime = constant * i + time;\n            const rampVal = this._exponentialApproach(prevEvent.time, prevEvent.value, computedValue, constant, segTime);\n            this.linearRampToValueAtTime(this._toType(rampVal), segTime);\n        }\n        return this;\n    }\n    setValueAtTime(value, time) {\n        const computedTime = this.toSeconds(time);\n        super.setValueAtTime(value, time);\n        const event = this._events.get(computedTime);\n        const previousEvent = this._events.previousEvent(event);\n        const ticksUntilTime = this._getTicksUntilEvent(previousEvent, computedTime);\n        event.ticks = Math.max(ticksUntilTime, 0);\n        return this;\n    }\n    linearRampToValueAtTime(value, time) {\n        const computedTime = this.toSeconds(time);\n        super.linearRampToValueAtTime(value, time);\n        const event = this._events.get(computedTime);\n        const previousEvent = this._events.previousEvent(event);\n        const ticksUntilTime = this._getTicksUntilEvent(previousEvent, computedTime);\n        event.ticks = Math.max(ticksUntilTime, 0);\n        return this;\n    }\n    exponentialRampToValueAtTime(value, time) {\n        // aproximate it with multiple linear ramps\n        time = this.toSeconds(time);\n        const computedVal = this._fromType(value);\n        // start from previously scheduled value\n        const prevEvent = this._events.get(time);\n        // approx 10 segments per second\n        const segments = Math.round(Math.max((time - prevEvent.time) * 10, 1));\n        const segmentDur = (time - prevEvent.time) / segments;\n        for (let i = 0; i <= segments; i++) {\n            const segTime = segmentDur * i + prevEvent.time;\n            const rampVal = this._exponentialInterpolate(prevEvent.time, prevEvent.value, time, computedVal, segTime);\n            this.linearRampToValueAtTime(this._toType(rampVal), segTime);\n        }\n        return this;\n    }\n    /**\n     * Returns the tick value at the time. Takes into account\n     * any automation curves scheduled on the signal.\n     * @param  event The time to get the tick count at\n     * @return The number of ticks which have elapsed at the time given any automations.\n     */\n    _getTicksUntilEvent(event, time) {\n        if (event === null) {\n            event = {\n                ticks: 0,\n                time: 0,\n                type: \"setValueAtTime\",\n                value: 0,\n            };\n        }\n        else if (isUndef(event.ticks)) {\n            const previousEvent = this._events.previousEvent(event);\n            event.ticks = this._getTicksUntilEvent(previousEvent, event.time);\n        }\n        const val0 = this._fromType(this.getValueAtTime(event.time));\n        let val1 = this._fromType(this.getValueAtTime(time));\n        // if it's right on the line, take the previous value\n        const onTheLineEvent = this._events.get(time);\n        if (onTheLineEvent &&\n            onTheLineEvent.time === time &&\n            onTheLineEvent.type === \"setValueAtTime\") {\n            val1 = this._fromType(this.getValueAtTime(time - this.sampleTime));\n        }\n        return 0.5 * (time - event.time) * (val0 + val1) + event.ticks;\n    }\n    /**\n     * Returns the tick value at the time. Takes into account\n     * any automation curves scheduled on the signal.\n     * @param  time The time to get the tick count at\n     * @return The number of ticks which have elapsed at the time given any automations.\n     */\n    getTicksAtTime(time) {\n        const computedTime = this.toSeconds(time);\n        const event = this._events.get(computedTime);\n        return Math.max(this._getTicksUntilEvent(event, computedTime), 0);\n    }\n    /**\n     * Return the elapsed time of the number of ticks from the given time\n     * @param ticks The number of ticks to calculate\n     * @param  time The time to get the next tick from\n     * @return The duration of the number of ticks from the given time in seconds\n     */\n    getDurationOfTicks(ticks, time) {\n        const computedTime = this.toSeconds(time);\n        const currentTick = this.getTicksAtTime(time);\n        return this.getTimeOfTick(currentTick + ticks) - computedTime;\n    }\n    /**\n     * Given a tick, returns the time that tick occurs at.\n     * @return The time that the tick occurs.\n     */\n    getTimeOfTick(tick) {\n        const before = this._events.get(tick, \"ticks\");\n        const after = this._events.getAfter(tick, \"ticks\");\n        if (before && before.ticks === tick) {\n            return before.time;\n        }\n        else if (before &&\n            after &&\n            after.type === \"linearRampToValueAtTime\" &&\n            before.value !== after.value) {\n            const val0 = this._fromType(this.getValueAtTime(before.time));\n            const val1 = this._fromType(this.getValueAtTime(after.time));\n            const delta = (val1 - val0) / (after.time - before.time);\n            const k = Math.sqrt(Math.pow(val0, 2) - 2 * delta * (before.ticks - tick));\n            const sol1 = (-val0 + k) / delta;\n            const sol2 = (-val0 - k) / delta;\n            return (sol1 > 0 ? sol1 : sol2) + before.time;\n        }\n        else if (before) {\n            if (before.value === 0) {\n                return Infinity;\n            }\n            else {\n                return before.time + (tick - before.ticks) / before.value;\n            }\n        }\n        else {\n            return tick / this._initialValue;\n        }\n    }\n    /**\n     * Convert some number of ticks their the duration in seconds accounting\n     * for any automation curves starting at the given time.\n     * @param  ticks The number of ticks to convert to seconds.\n     * @param  when  When along the automation timeline to convert the ticks.\n     * @return The duration in seconds of the ticks.\n     */\n    ticksToTime(ticks, when) {\n        return this.getDurationOfTicks(ticks, when);\n    }\n    /**\n     * The inverse of {@link ticksToTime}. Convert a duration in\n     * seconds to the corresponding number of ticks accounting for any\n     * automation curves starting at the given time.\n     * @param  duration The time interval to convert to ticks.\n     * @param  when When along the automation timeline to convert the ticks.\n     * @return The duration in ticks.\n     */\n    timeToTicks(duration, when) {\n        const computedTime = this.toSeconds(when);\n        const computedDuration = this.toSeconds(duration);\n        const startTicks = this.getTicksAtTime(computedTime);\n        const endTicks = this.getTicksAtTime(computedTime + computedDuration);\n        return endTicks - startTicks;\n    }\n    /**\n     * Convert from the type when the unit value is BPM\n     */\n    _fromType(val) {\n        if (this.units === \"bpm\" && this.multiplier) {\n            return 1 / (60 / val / this.multiplier);\n        }\n        else {\n            return super._fromType(val);\n        }\n    }\n    /**\n     * Special case of type conversion where the units === \"bpm\"\n     */\n    _toType(val) {\n        if (this.units === \"bpm\" && this.multiplier) {\n            return ((val / this.multiplier) * 60);\n        }\n        else {\n            return super._toType(val);\n        }\n    }\n    /**\n     * A multiplier on the bpm value. Useful for setting a PPQ relative to the base frequency value.\n     */\n    get multiplier() {\n        return this._multiplier;\n    }\n    set multiplier(m) {\n        // get and reset the current value with the new multiplier\n        // might be necessary to clear all the previous values\n        const currentVal = this.value;\n        this._multiplier = m;\n        this.cancelScheduledValues(0);\n        this.setValueAtTime(currentVal, 0);\n    }\n}\n//# sourceMappingURL=TickParam.js.map","import { Signal } from \"../../signal/Signal.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { TickParam } from \"./TickParam.js\";\n/**\n * TickSignal extends Tone.Signal, but adds the capability\n * to calculate the number of elapsed ticks. exponential and target curves\n * are approximated with multiple linear ramps.\n *\n * Thank you Bruno Dias, H. Sofia Pinto, and David M. Matos,\n * for your [WAC paper](https://smartech.gatech.edu/bitstream/handle/1853/54588/WAC2016-49.pdf)\n * describing integrating timing functions for tempo calculations.\n */\nexport class TickSignal extends Signal {\n    constructor() {\n        const options = optionsFromArguments(TickSignal.getDefaults(), arguments, [\"value\"]);\n        super(options);\n        this.name = \"TickSignal\";\n        this.input = this._param = new TickParam({\n            context: this.context,\n            convert: options.convert,\n            multiplier: options.multiplier,\n            param: this._constantSource.offset,\n            units: options.units,\n            value: options.value,\n        });\n    }\n    static getDefaults() {\n        return Object.assign(Signal.getDefaults(), {\n            multiplier: 1,\n            units: \"hertz\",\n            value: 1,\n        });\n    }\n    ticksToTime(ticks, when) {\n        return this._param.ticksToTime(ticks, when);\n    }\n    timeToTicks(duration, when) {\n        return this._param.timeToTicks(duration, when);\n    }\n    getTimeOfTick(tick) {\n        return this._param.getTimeOfTick(tick);\n    }\n    getDurationOfTicks(ticks, time) {\n        return this._param.getDurationOfTicks(ticks, time);\n    }\n    getTicksAtTime(time) {\n        return this._param.getTicksAtTime(time);\n    }\n    /**\n     * A multiplier on the bpm value. Useful for setting a PPQ relative to the base frequency value.\n     */\n    get multiplier() {\n        return this._param.multiplier;\n    }\n    set multiplier(m) {\n        this._param.multiplier = m;\n    }\n    dispose() {\n        super.dispose();\n        this._param.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=TickSignal.js.map","import { ToneWithContext, } from \"../context/ToneWithContext.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { readOnly } from \"../util/Interface.js\";\nimport { StateTimeline, } from \"../util/StateTimeline.js\";\nimport { Timeline } from \"../util/Timeline.js\";\nimport { isDefined } from \"../util/TypeCheck.js\";\nimport { TickSignal } from \"./TickSignal.js\";\nimport { EQ } from \"../util/Math.js\";\n/**\n * Uses [TickSignal](TickSignal) to track elapsed ticks with complex automation curves.\n */\nexport class TickSource extends ToneWithContext {\n    constructor() {\n        const options = optionsFromArguments(TickSource.getDefaults(), arguments, [\"frequency\"]);\n        super(options);\n        this.name = \"TickSource\";\n        /**\n         * The state timeline\n         */\n        this._state = new StateTimeline();\n        /**\n         * The offset values of the ticks\n         */\n        this._tickOffset = new Timeline();\n        /**\n         * Memoized values of getTicksAtTime at events with state other than \"started\"\n         */\n        this._ticksAtTime = new Timeline();\n        /**\n         * Memoized values of getSecondsAtTime at events with state other than \"started\"\n         */\n        this._secondsAtTime = new Timeline();\n        this.frequency = new TickSignal({\n            context: this.context,\n            units: options.units,\n            value: options.frequency,\n        });\n        readOnly(this, \"frequency\");\n        // set the initial state\n        this._state.setStateAtTime(\"stopped\", 0);\n        // add the first event\n        this.setTicksAtTime(0, 0);\n    }\n    static getDefaults() {\n        return Object.assign({\n            frequency: 1,\n            units: \"hertz\",\n        }, ToneWithContext.getDefaults());\n    }\n    /**\n     * Returns the playback state of the source, either \"started\", \"stopped\" or \"paused\".\n     */\n    get state() {\n        return this.getStateAtTime(this.now());\n    }\n    /**\n     * Start the clock at the given time. Optionally pass in an offset\n     * of where to start the tick counter from.\n     * @param  time    The time the clock should start\n     * @param offset The number of ticks to start the source at\n     */\n    start(time, offset) {\n        const computedTime = this.toSeconds(time);\n        if (this._state.getValueAtTime(computedTime) !== \"started\") {\n            this._state.setStateAtTime(\"started\", computedTime);\n            if (isDefined(offset)) {\n                this.setTicksAtTime(offset, computedTime);\n            }\n            this._ticksAtTime.cancel(computedTime);\n            this._secondsAtTime.cancel(computedTime);\n        }\n        return this;\n    }\n    /**\n     * Stop the clock. Stopping the clock resets the tick counter to 0.\n     * @param time The time when the clock should stop.\n     */\n    stop(time) {\n        const computedTime = this.toSeconds(time);\n        // cancel the previous stop\n        if (this._state.getValueAtTime(computedTime) === \"stopped\") {\n            const event = this._state.get(computedTime);\n            if (event && event.time > 0) {\n                this._tickOffset.cancel(event.time);\n                this._state.cancel(event.time);\n            }\n        }\n        this._state.cancel(computedTime);\n        this._state.setStateAtTime(\"stopped\", computedTime);\n        this.setTicksAtTime(0, computedTime);\n        this._ticksAtTime.cancel(computedTime);\n        this._secondsAtTime.cancel(computedTime);\n        return this;\n    }\n    /**\n     * Pause the clock. Pausing does not reset the tick counter.\n     * @param time The time when the clock should stop.\n     */\n    pause(time) {\n        const computedTime = this.toSeconds(time);\n        if (this._state.getValueAtTime(computedTime) === \"started\") {\n            this._state.setStateAtTime(\"paused\", computedTime);\n            this._ticksAtTime.cancel(computedTime);\n            this._secondsAtTime.cancel(computedTime);\n        }\n        return this;\n    }\n    /**\n     * Cancel start/stop/pause and setTickAtTime events scheduled after the given time.\n     * @param time When to clear the events after\n     */\n    cancel(time) {\n        time = this.toSeconds(time);\n        this._state.cancel(time);\n        this._tickOffset.cancel(time);\n        this._ticksAtTime.cancel(time);\n        this._secondsAtTime.cancel(time);\n        return this;\n    }\n    /**\n     * Get the elapsed ticks at the given time\n     * @param  time  When to get the tick value\n     * @return The number of ticks\n     */\n    getTicksAtTime(time) {\n        const computedTime = this.toSeconds(time);\n        const stopEvent = this._state.getLastState(\"stopped\", computedTime);\n        // get previously memoized ticks if available\n        const memoizedEvent = this._ticksAtTime.get(computedTime);\n        // this event allows forEachBetween to iterate until the current time\n        const tmpEvent = {\n            state: \"paused\",\n            time: computedTime,\n        };\n        this._state.add(tmpEvent);\n        // keep track of the previous offset event\n        let lastState = memoizedEvent ? memoizedEvent : stopEvent;\n        let elapsedTicks = memoizedEvent ? memoizedEvent.ticks : 0;\n        let eventToMemoize = null;\n        // iterate through all the events since the last stop\n        this._state.forEachBetween(lastState.time, computedTime + this.sampleTime, (e) => {\n            let periodStartTime = lastState.time;\n            // if there is an offset event in this period use that\n            const offsetEvent = this._tickOffset.get(e.time);\n            if (offsetEvent && offsetEvent.time >= lastState.time) {\n                elapsedTicks = offsetEvent.ticks;\n                periodStartTime = offsetEvent.time;\n            }\n            if (lastState.state === \"started\" && e.state !== \"started\") {\n                elapsedTicks +=\n                    this.frequency.getTicksAtTime(e.time) -\n                        this.frequency.getTicksAtTime(periodStartTime);\n                // do not memoize the temporary event\n                if (e.time !== tmpEvent.time) {\n                    eventToMemoize = {\n                        state: e.state,\n                        time: e.time,\n                        ticks: elapsedTicks,\n                    };\n                }\n            }\n            lastState = e;\n        });\n        // remove the temporary event\n        this._state.remove(tmpEvent);\n        // memoize the ticks at the most recent event with state other than \"started\"\n        if (eventToMemoize) {\n            this._ticksAtTime.add(eventToMemoize);\n        }\n        // return the ticks\n        return elapsedTicks;\n    }\n    /**\n     * The number of times the callback was invoked. Starts counting at 0\n     * and increments after the callback was invoked. Returns -1 when stopped.\n     */\n    get ticks() {\n        return this.getTicksAtTime(this.now());\n    }\n    set ticks(t) {\n        this.setTicksAtTime(t, this.now());\n    }\n    /**\n     * The time since ticks=0 that the TickSource has been running. Accounts\n     * for tempo curves\n     */\n    get seconds() {\n        return this.getSecondsAtTime(this.now());\n    }\n    set seconds(s) {\n        const now = this.now();\n        const ticks = this.frequency.timeToTicks(s, now);\n        this.setTicksAtTime(ticks, now);\n    }\n    /**\n     * Return the elapsed seconds at the given time.\n     * @param  time  When to get the elapsed seconds\n     * @return  The number of elapsed seconds\n     */\n    getSecondsAtTime(time) {\n        time = this.toSeconds(time);\n        const stopEvent = this._state.getLastState(\"stopped\", time);\n        // this event allows forEachBetween to iterate until the current time\n        const tmpEvent = { state: \"paused\", time };\n        this._state.add(tmpEvent);\n        // get previously memoized seconds if available\n        const memoizedEvent = this._secondsAtTime.get(time);\n        // keep track of the previous offset event\n        let lastState = memoizedEvent ? memoizedEvent : stopEvent;\n        let elapsedSeconds = memoizedEvent ? memoizedEvent.seconds : 0;\n        let eventToMemoize = null;\n        // iterate through all the events since the last stop\n        this._state.forEachBetween(lastState.time, time + this.sampleTime, (e) => {\n            let periodStartTime = lastState.time;\n            // if there is an offset event in this period use that\n            const offsetEvent = this._tickOffset.get(e.time);\n            if (offsetEvent && offsetEvent.time >= lastState.time) {\n                elapsedSeconds = offsetEvent.seconds;\n                periodStartTime = offsetEvent.time;\n            }\n            if (lastState.state === \"started\" && e.state !== \"started\") {\n                elapsedSeconds += e.time - periodStartTime;\n                // do not memoize the temporary event\n                if (e.time !== tmpEvent.time) {\n                    eventToMemoize = {\n                        state: e.state,\n                        time: e.time,\n                        seconds: elapsedSeconds,\n                    };\n                }\n            }\n            lastState = e;\n        });\n        // remove the temporary event\n        this._state.remove(tmpEvent);\n        // memoize the seconds at the most recent event with state other than \"started\"\n        if (eventToMemoize) {\n            this._secondsAtTime.add(eventToMemoize);\n        }\n        // return the seconds\n        return elapsedSeconds;\n    }\n    /**\n     * Set the clock's ticks at the given time.\n     * @param  ticks The tick value to set\n     * @param  time  When to set the tick value\n     */\n    setTicksAtTime(ticks, time) {\n        time = this.toSeconds(time);\n        this._tickOffset.cancel(time);\n        this._tickOffset.add({\n            seconds: this.frequency.getDurationOfTicks(ticks, time),\n            ticks,\n            time,\n        });\n        this._ticksAtTime.cancel(time);\n        this._secondsAtTime.cancel(time);\n        return this;\n    }\n    /**\n     * Returns the scheduled state at the given time.\n     * @param  time  The time to query.\n     */\n    getStateAtTime(time) {\n        time = this.toSeconds(time);\n        return this._state.getValueAtTime(time);\n    }\n    /**\n     * Get the time of the given tick. The second argument\n     * is when to test before. Since ticks can be set (with setTicksAtTime)\n     * there may be multiple times for a given tick value.\n     * @param  tick The tick number.\n     * @param  before When to measure the tick value from.\n     * @return The time of the tick\n     */\n    getTimeOfTick(tick, before = this.now()) {\n        const offset = this._tickOffset.get(before);\n        const event = this._state.get(before);\n        const startTime = Math.max(offset.time, event.time);\n        const absoluteTicks = this.frequency.getTicksAtTime(startTime) + tick - offset.ticks;\n        return this.frequency.getTimeOfTick(absoluteTicks);\n    }\n    /**\n     * Invoke the callback event at all scheduled ticks between the\n     * start time and the end time\n     * @param  startTime  The beginning of the search range\n     * @param  endTime    The end of the search range\n     * @param  callback   The callback to invoke with each tick\n     */\n    forEachTickBetween(startTime, endTime, callback) {\n        // only iterate through the sections where it is \"started\"\n        let lastStateEvent = this._state.get(startTime);\n        this._state.forEachBetween(startTime, endTime, (event) => {\n            if (lastStateEvent &&\n                lastStateEvent.state === \"started\" &&\n                event.state !== \"started\") {\n                this.forEachTickBetween(Math.max(lastStateEvent.time, startTime), event.time - this.sampleTime, callback);\n            }\n            lastStateEvent = event;\n        });\n        let error = null;\n        if (lastStateEvent && lastStateEvent.state === \"started\") {\n            const maxStartTime = Math.max(lastStateEvent.time, startTime);\n            // figure out the difference between the frequency ticks and the\n            const startTicks = this.frequency.getTicksAtTime(maxStartTime);\n            const ticksAtStart = this.frequency.getTicksAtTime(lastStateEvent.time);\n            const diff = startTicks - ticksAtStart;\n            let offset = Math.ceil(diff) - diff;\n            // guard against floating point issues\n            offset = EQ(offset, 1) ? 0 : offset;\n            let nextTickTime = this.frequency.getTimeOfTick(startTicks + offset);\n            while (nextTickTime < endTime) {\n                try {\n                    callback(nextTickTime, Math.round(this.getTicksAtTime(nextTickTime)));\n                }\n                catch (e) {\n                    error = e;\n                    break;\n                }\n                nextTickTime += this.frequency.getDurationOfTicks(1, nextTickTime);\n            }\n        }\n        if (error) {\n            throw error;\n        }\n        return this;\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        super.dispose();\n        this._state.dispose();\n        this._tickOffset.dispose();\n        this._ticksAtTime.dispose();\n        this._secondsAtTime.dispose();\n        this.frequency.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=TickSource.js.map","import { ToneWithContext, } from \"../context/ToneWithContext.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { Emitter } from \"../util/Emitter.js\";\nimport { noOp, readOnly } from \"../util/Interface.js\";\nimport { StateTimeline } from \"../util/StateTimeline.js\";\nimport { TickSource } from \"./TickSource.js\";\nimport { assertContextRunning } from \"../util/Debug.js\";\n/**\n * A sample accurate clock which provides a callback at the given rate.\n * While the callback is not sample-accurate (it is still susceptible to\n * loose JS timing), the time passed in as the argument to the callback\n * is precise. For most applications, it is better to use Tone.Transport\n * instead of the Clock by itself since you can synchronize multiple callbacks.\n * @example\n * // the callback will be invoked approximately once a second\n * // and will print the time exactly once a second apart.\n * const clock = new Tone.Clock(time => {\n * \tconsole.log(time);\n * }, 1);\n * clock.start();\n * @category Core\n */\nexport class Clock extends ToneWithContext {\n    constructor() {\n        const options = optionsFromArguments(Clock.getDefaults(), arguments, [\n            \"callback\",\n            \"frequency\",\n        ]);\n        super(options);\n        this.name = \"Clock\";\n        /**\n         * The callback function to invoke at the scheduled tick.\n         */\n        this.callback = noOp;\n        /**\n         * The last time the loop callback was invoked\n         */\n        this._lastUpdate = 0;\n        /**\n         * Keep track of the playback state\n         */\n        this._state = new StateTimeline(\"stopped\");\n        /**\n         * Context bound reference to the _loop method\n         * This is necessary to remove the event in the end.\n         */\n        this._boundLoop = this._loop.bind(this);\n        this.callback = options.callback;\n        this._tickSource = new TickSource({\n            context: this.context,\n            frequency: options.frequency,\n            units: options.units,\n        });\n        this._lastUpdate = 0;\n        this.frequency = this._tickSource.frequency;\n        readOnly(this, \"frequency\");\n        // add an initial state\n        this._state.setStateAtTime(\"stopped\", 0);\n        // bind a callback to the worker thread\n        this.context.on(\"tick\", this._boundLoop);\n    }\n    static getDefaults() {\n        return Object.assign(ToneWithContext.getDefaults(), {\n            callback: noOp,\n            frequency: 1,\n            units: \"hertz\",\n        });\n    }\n    /**\n     * Returns the playback state of the source, either \"started\", \"stopped\" or \"paused\".\n     */\n    get state() {\n        return this._state.getValueAtTime(this.now());\n    }\n    /**\n     * Start the clock at the given time. Optionally pass in an offset\n     * of where to start the tick counter from.\n     * @param  time    The time the clock should start\n     * @param offset  Where the tick counter starts counting from.\n     */\n    start(time, offset) {\n        // make sure the context is running\n        assertContextRunning(this.context);\n        // start the loop\n        const computedTime = this.toSeconds(time);\n        this.log(\"start\", computedTime);\n        if (this._state.getValueAtTime(computedTime) !== \"started\") {\n            this._state.setStateAtTime(\"started\", computedTime);\n            this._tickSource.start(computedTime, offset);\n            if (computedTime < this._lastUpdate) {\n                this.emit(\"start\", computedTime, offset);\n            }\n        }\n        return this;\n    }\n    /**\n     * Stop the clock. Stopping the clock resets the tick counter to 0.\n     * @param time The time when the clock should stop.\n     * @example\n     * const clock = new Tone.Clock(time => {\n     * \tconsole.log(time);\n     * }, 1);\n     * clock.start();\n     * // stop the clock after 10 seconds\n     * clock.stop(\"+10\");\n     */\n    stop(time) {\n        const computedTime = this.toSeconds(time);\n        this.log(\"stop\", computedTime);\n        this._state.cancel(computedTime);\n        this._state.setStateAtTime(\"stopped\", computedTime);\n        this._tickSource.stop(computedTime);\n        if (computedTime < this._lastUpdate) {\n            this.emit(\"stop\", computedTime);\n        }\n        return this;\n    }\n    /**\n     * Pause the clock. Pausing does not reset the tick counter.\n     * @param time The time when the clock should stop.\n     */\n    pause(time) {\n        const computedTime = this.toSeconds(time);\n        if (this._state.getValueAtTime(computedTime) === \"started\") {\n            this._state.setStateAtTime(\"paused\", computedTime);\n            this._tickSource.pause(computedTime);\n            if (computedTime < this._lastUpdate) {\n                this.emit(\"pause\", computedTime);\n            }\n        }\n        return this;\n    }\n    /**\n     * The number of times the callback was invoked. Starts counting at 0\n     * and increments after the callback was invoked.\n     */\n    get ticks() {\n        return Math.ceil(this.getTicksAtTime(this.now()));\n    }\n    set ticks(t) {\n        this._tickSource.ticks = t;\n    }\n    /**\n     * The time since ticks=0 that the Clock has been running. Accounts for tempo curves\n     */\n    get seconds() {\n        return this._tickSource.seconds;\n    }\n    set seconds(s) {\n        this._tickSource.seconds = s;\n    }\n    /**\n     * Return the elapsed seconds at the given time.\n     * @param  time  When to get the elapsed seconds\n     * @return  The number of elapsed seconds\n     */\n    getSecondsAtTime(time) {\n        return this._tickSource.getSecondsAtTime(time);\n    }\n    /**\n     * Set the clock's ticks at the given time.\n     * @param  ticks The tick value to set\n     * @param  time  When to set the tick value\n     */\n    setTicksAtTime(ticks, time) {\n        this._tickSource.setTicksAtTime(ticks, time);\n        return this;\n    }\n    /**\n     * Get the time of the given tick. The second argument\n     * is when to test before. Since ticks can be set (with setTicksAtTime)\n     * there may be multiple times for a given tick value.\n     * @param  tick The tick number.\n     * @param  before When to measure the tick value from.\n     * @return The time of the tick\n     */\n    getTimeOfTick(tick, before = this.now()) {\n        return this._tickSource.getTimeOfTick(tick, before);\n    }\n    /**\n     * Get the clock's ticks at the given time.\n     * @param  time  When to get the tick value\n     * @return The tick value at the given time.\n     */\n    getTicksAtTime(time) {\n        return this._tickSource.getTicksAtTime(time);\n    }\n    /**\n     * Get the time of the next tick\n     * @param  offset The tick number.\n     */\n    nextTickTime(offset, when) {\n        const computedTime = this.toSeconds(when);\n        const currentTick = this.getTicksAtTime(computedTime);\n        return this._tickSource.getTimeOfTick(currentTick + offset, computedTime);\n    }\n    /**\n     * The scheduling loop.\n     */\n    _loop() {\n        const startTime = this._lastUpdate;\n        const endTime = this.now();\n        this._lastUpdate = endTime;\n        this.log(\"loop\", startTime, endTime);\n        if (startTime !== endTime) {\n            // the state change events\n            this._state.forEachBetween(startTime, endTime, (e) => {\n                switch (e.state) {\n                    case \"started\":\n                        const offset = this._tickSource.getTicksAtTime(e.time);\n                        this.emit(\"start\", e.time, offset);\n                        break;\n                    case \"stopped\":\n                        if (e.time !== 0) {\n                            this.emit(\"stop\", e.time);\n                        }\n                        break;\n                    case \"paused\":\n                        this.emit(\"pause\", e.time);\n                        break;\n                }\n            });\n            // the tick callbacks\n            this._tickSource.forEachTickBetween(startTime, endTime, (time, ticks) => {\n                this.callback(time, ticks);\n            });\n        }\n    }\n    /**\n     * Returns the scheduled state at the given time.\n     * @param  time  The time to query.\n     * @return  The name of the state input in setStateAtTime.\n     * @example\n     * const clock = new Tone.Clock();\n     * clock.start(\"+0.1\");\n     * clock.getStateAtTime(\"+0.1\"); // returns \"started\"\n     */\n    getStateAtTime(time) {\n        const computedTime = this.toSeconds(time);\n        return this._state.getValueAtTime(computedTime);\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        super.dispose();\n        this.context.off(\"tick\", this._boundLoop);\n        this._tickSource.dispose();\n        this._state.dispose();\n        return this;\n    }\n}\nEmitter.mixin(Clock);\n//# sourceMappingURL=Clock.js.map","import { Gain } from \"../../core/context/Gain.js\";\nimport { ToneAudioNode, } from \"../../core/context/ToneAudioNode.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\n/**\n * Volume is a simple volume node, useful for creating a volume fader.\n *\n * @example\n * const vol = new Tone.Volume(-12).toDestination();\n * const osc = new Tone.Oscillator().connect(vol).start();\n * @category Component\n */\nexport class Volume extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(Volume.getDefaults(), arguments, [\n            \"volume\",\n        ]);\n        super(options);\n        this.name = \"Volume\";\n        this.input = this.output = new Gain({\n            context: this.context,\n            gain: options.volume,\n            units: \"decibels\",\n        });\n        this.volume = this.output.gain;\n        readOnly(this, \"volume\");\n        this._unmutedVolume = options.volume;\n        // set the mute initially\n        this.mute = options.mute;\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            mute: false,\n            volume: 0,\n        });\n    }\n    /**\n     * Mute the output.\n     * @example\n     * const vol = new Tone.Volume(-12).toDestination();\n     * const osc = new Tone.Oscillator().connect(vol).start();\n     * // mute the output\n     * vol.mute = true;\n     */\n    get mute() {\n        return this.volume.value === -Infinity;\n    }\n    set mute(mute) {\n        if (!this.mute && mute) {\n            this._unmutedVolume = this.volume.value;\n            // maybe it should ramp here?\n            this.volume.value = -Infinity;\n        }\n        else if (this.mute && !mute) {\n            this.volume.value = this._unmutedVolume;\n        }\n    }\n    /**\n     * clean up\n     */\n    dispose() {\n        super.dispose();\n        this.input.dispose();\n        this.volume.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=Volume.js.map","import { Volume } from \"../../component/channel/Volume.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { onContextClose, onContextInit } from \"./ContextInitialization.js\";\nimport { Gain } from \"./Gain.js\";\nimport { connectSeries, ToneAudioNode, } from \"./ToneAudioNode.js\";\n/**\n * A single master output which is connected to the\n * AudioDestinationNode (aka your speakers).\n * It provides useful conveniences such as the ability\n * to set the volume and mute the entire application.\n * It also gives you the ability to apply master effects to your application.\n *\n * @example\n * const oscillator = new Tone.Oscillator().start();\n * // the audio will go from the oscillator to the speakers\n * oscillator.connect(Tone.getDestination());\n * // a convenience for connecting to the master output is also provided:\n * oscillator.toDestination();\n * @category Core\n */\nexport class DestinationClass extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(DestinationClass.getDefaults(), arguments);\n        super(options);\n        this.name = \"Destination\";\n        this.input = new Volume({ context: this.context });\n        this.output = new Gain({ context: this.context });\n        /**\n         * The volume of the master output in decibels. -Infinity is silent, and 0 is no change.\n         * @example\n         * const osc = new Tone.Oscillator().toDestination();\n         * osc.start();\n         * // ramp the volume down to silent over 10 seconds\n         * Tone.getDestination().volume.rampTo(-Infinity, 10);\n         */\n        this.volume = this.input.volume;\n        connectSeries(this.input, this.output, this.context.rawContext.destination);\n        this.mute = options.mute;\n        this._internalChannels = [\n            this.input,\n            this.context.rawContext.destination,\n            this.output,\n        ];\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            mute: false,\n            volume: 0,\n        });\n    }\n    /**\n     * Mute the output.\n     * @example\n     * const oscillator = new Tone.Oscillator().start().toDestination();\n     * setTimeout(() => {\n     * \t// mute the output\n     * \tTone.Destination.mute = true;\n     * }, 1000);\n     */\n    get mute() {\n        return this.input.mute;\n    }\n    set mute(mute) {\n        this.input.mute = mute;\n    }\n    /**\n     * Add a master effects chain. NOTE: this will disconnect any nodes which were previously\n     * chained in the master effects chain.\n     * @param args All arguments will be connected in a row and the Master will be routed through it.\n     * @example\n     * // route all audio through a filter and compressor\n     * const lowpass = new Tone.Filter(800, \"lowpass\");\n     * const compressor = new Tone.Compressor(-18);\n     * Tone.Destination.chain(lowpass, compressor);\n     */\n    chain(...args) {\n        this.input.disconnect();\n        args.unshift(this.input);\n        args.push(this.output);\n        connectSeries(...args);\n        return this;\n    }\n    /**\n     * The maximum number of channels the system can output\n     * @example\n     * console.log(Tone.Destination.maxChannelCount);\n     */\n    get maxChannelCount() {\n        return this.context.rawContext.destination.maxChannelCount;\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        super.dispose();\n        this.volume.dispose();\n        return this;\n    }\n}\n//-------------------------------------\n// \tINITIALIZATION\n//-------------------------------------\nonContextInit((context) => {\n    context.destination = new DestinationClass({ context });\n});\nonContextClose((context) => {\n    context.destination.dispose();\n});\n//# sourceMappingURL=Destination.js.map","import { ToneAudioNode } from \"./ToneAudioNode.js\";\nimport { Param } from \"./Param.js\";\nimport { onContextClose, onContextInit } from \"./ContextInitialization.js\";\n/**\n * Tone.Listener is a thin wrapper around the AudioListener. Listener combined\n * with {@link Panner3D} makes up the Web Audio API's 3D panning system. Panner3D allows you\n * to place sounds in 3D and Listener allows you to navigate the 3D sound environment from\n * a first-person perspective. There is only one listener per audio context.\n */\nexport class ListenerClass extends ToneAudioNode {\n    constructor() {\n        super(...arguments);\n        this.name = \"Listener\";\n        this.positionX = new Param({\n            context: this.context,\n            param: this.context.rawContext.listener.positionX,\n        });\n        this.positionY = new Param({\n            context: this.context,\n            param: this.context.rawContext.listener.positionY,\n        });\n        this.positionZ = new Param({\n            context: this.context,\n            param: this.context.rawContext.listener.positionZ,\n        });\n        this.forwardX = new Param({\n            context: this.context,\n            param: this.context.rawContext.listener.forwardX,\n        });\n        this.forwardY = new Param({\n            context: this.context,\n            param: this.context.rawContext.listener.forwardY,\n        });\n        this.forwardZ = new Param({\n            context: this.context,\n            param: this.context.rawContext.listener.forwardZ,\n        });\n        this.upX = new Param({\n            context: this.context,\n            param: this.context.rawContext.listener.upX,\n        });\n        this.upY = new Param({\n            context: this.context,\n            param: this.context.rawContext.listener.upY,\n        });\n        this.upZ = new Param({\n            context: this.context,\n            param: this.context.rawContext.listener.upZ,\n        });\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            positionX: 0,\n            positionY: 0,\n            positionZ: 0,\n            forwardX: 0,\n            forwardY: 0,\n            forwardZ: -1,\n            upX: 0,\n            upY: 1,\n            upZ: 0,\n        });\n    }\n    dispose() {\n        super.dispose();\n        this.positionX.dispose();\n        this.positionY.dispose();\n        this.positionZ.dispose();\n        this.forwardX.dispose();\n        this.forwardY.dispose();\n        this.forwardZ.dispose();\n        this.upX.dispose();\n        this.upY.dispose();\n        this.upZ.dispose();\n        return this;\n    }\n}\n//-------------------------------------\n// \tINITIALIZATION\n//-------------------------------------\nonContextInit((context) => {\n    context.listener = new ListenerClass({ context });\n});\nonContextClose((context) => {\n    context.listener.dispose();\n});\n//# sourceMappingURL=Listener.js.map","import { Tone } from \"../Tone.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { noOp } from \"../util/Interface.js\";\nimport { isString } from \"../util/TypeCheck.js\";\nimport { ToneAudioBuffer } from \"./ToneAudioBuffer.js\";\nimport { assert } from \"../util/Debug.js\";\n/**\n * A data structure for holding multiple buffers in a Map-like datastructure.\n *\n * @example\n * const pianoSamples = new Tone.ToneAudioBuffers({\n * \tA1: \"https://tonejs.github.io/audio/casio/A1.mp3\",\n * \tA2: \"https://tonejs.github.io/audio/casio/A2.mp3\",\n * }, () => {\n * \tconst player = new Tone.Player().toDestination();\n * \t// play one of the samples when they all load\n * \tplayer.buffer = pianoSamples.get(\"A2\");\n * \tplayer.start();\n * });\n * @example\n * // To pass in additional parameters in the second parameter\n * const buffers = new Tone.ToneAudioBuffers({\n * \t urls: {\n * \t\t A1: \"A1.mp3\",\n * \t\t A2: \"A2.mp3\",\n * \t },\n * \t onload: () => console.log(\"loaded\"),\n * \t baseUrl: \"https://tonejs.github.io/audio/casio/\"\n * });\n * @category Core\n */\nexport class ToneAudioBuffers extends Tone {\n    constructor() {\n        super();\n        this.name = \"ToneAudioBuffers\";\n        /**\n         * All of the buffers\n         */\n        this._buffers = new Map();\n        /**\n         * Keep track of the number of loaded buffers\n         */\n        this._loadingCount = 0;\n        const options = optionsFromArguments(ToneAudioBuffers.getDefaults(), arguments, [\"urls\", \"onload\", \"baseUrl\"], \"urls\");\n        this.baseUrl = options.baseUrl;\n        // add each one\n        Object.keys(options.urls).forEach((name) => {\n            this._loadingCount++;\n            const url = options.urls[name];\n            this.add(name, url, this._bufferLoaded.bind(this, options.onload), options.onerror);\n        });\n    }\n    static getDefaults() {\n        return {\n            baseUrl: \"\",\n            onerror: noOp,\n            onload: noOp,\n            urls: {},\n        };\n    }\n    /**\n     * True if the buffers object has a buffer by that name.\n     * @param  name  The key or index of the buffer.\n     */\n    has(name) {\n        return this._buffers.has(name.toString());\n    }\n    /**\n     * Get a buffer by name. If an array was loaded,\n     * then use the array index.\n     * @param  name  The key or index of the buffer.\n     */\n    get(name) {\n        assert(this.has(name), `ToneAudioBuffers has no buffer named: ${name}`);\n        return this._buffers.get(name.toString());\n    }\n    /**\n     * A buffer was loaded. decrement the counter.\n     */\n    _bufferLoaded(callback) {\n        this._loadingCount--;\n        if (this._loadingCount === 0 && callback) {\n            callback();\n        }\n    }\n    /**\n     * If the buffers are loaded or not\n     */\n    get loaded() {\n        return Array.from(this._buffers).every(([_, buffer]) => buffer.loaded);\n    }\n    /**\n     * Add a buffer by name and url to the Buffers\n     * @param  name      A unique name to give the buffer\n     * @param  url  Either the url of the bufer, or a buffer which will be added with the given name.\n     * @param  callback  The callback to invoke when the url is loaded.\n     * @param  onerror  Invoked if the buffer can't be loaded\n     */\n    add(name, url, callback = noOp, onerror = noOp) {\n        if (isString(url)) {\n            // don't include the baseUrl if the url is a base64 encoded sound\n            if (this.baseUrl &&\n                url.trim().substring(0, 11).toLowerCase() === \"data:audio/\") {\n                this.baseUrl = \"\";\n            }\n            this._buffers.set(name.toString(), new ToneAudioBuffer(this.baseUrl + url, callback, onerror));\n        }\n        else {\n            this._buffers.set(name.toString(), new ToneAudioBuffer(url, callback, onerror));\n        }\n        return this;\n    }\n    dispose() {\n        super.dispose();\n        this._buffers.forEach((buffer) => buffer.dispose());\n        this._buffers.clear();\n        return this;\n    }\n}\n//# sourceMappingURL=ToneAudioBuffers.js.map","import { getContext } from \"../Global.js\";\nimport { ftom, mtof } from \"./Conversions.js\";\nimport { FrequencyClass } from \"./Frequency.js\";\n/**\n * Midi is a primitive type for encoding Time values.\n * Midi can be constructed with or without the `new` keyword. Midi can be passed\n * into the parameter of any method which takes time as an argument.\n * @category Unit\n */\nexport class MidiClass extends FrequencyClass {\n    constructor() {\n        super(...arguments);\n        this.name = \"MidiClass\";\n        this.defaultUnits = \"midi\";\n    }\n    /**\n     * Returns the value of a frequency in the current units\n     */\n    _frequencyToUnits(freq) {\n        return ftom(super._frequencyToUnits(freq));\n    }\n    /**\n     * Returns the value of a tick in the current time units\n     */\n    _ticksToUnits(ticks) {\n        return ftom(super._ticksToUnits(ticks));\n    }\n    /**\n     * Return the value of the beats in the current units\n     */\n    _beatsToUnits(beats) {\n        return ftom(super._beatsToUnits(beats));\n    }\n    /**\n     * Returns the value of a second in the current units\n     */\n    _secondsToUnits(seconds) {\n        return ftom(super._secondsToUnits(seconds));\n    }\n    /**\n     * Return the value of the frequency as a MIDI note\n     * @example\n     * Tone.Midi(60).toMidi(); // 60\n     */\n    toMidi() {\n        return this.valueOf();\n    }\n    /**\n     * Return the value of the frequency as a MIDI note\n     * @example\n     * Tone.Midi(60).toFrequency(); // 261.6255653005986\n     */\n    toFrequency() {\n        return mtof(this.toMidi());\n    }\n    /**\n     * Transposes the frequency by the given number of semitones.\n     * @return A new transposed MidiClass\n     * @example\n     * Tone.Midi(\"A4\").transpose(3); // \"C5\"\n     */\n    transpose(interval) {\n        return new MidiClass(this.context, this.toMidi() + interval);\n    }\n}\n/**\n * Convert a value into a FrequencyClass object.\n * @category Unit\n */\nexport function Midi(value, units) {\n    return new MidiClass(getContext(), value, units);\n}\n//# sourceMappingURL=Midi.js.map","import { getContext } from \"../Global.js\";\nimport { TransportTimeClass } from \"./TransportTime.js\";\n/**\n * Ticks is a primitive type for encoding Time values.\n * Ticks can be constructed with or without the `new` keyword. Ticks can be passed\n * into the parameter of any method which takes time as an argument.\n * @example\n * const t = Tone.Ticks(\"4n\"); // a quarter note as ticks\n * @category Unit\n */\nexport class TicksClass extends TransportTimeClass {\n    constructor() {\n        super(...arguments);\n        this.name = \"Ticks\";\n        this.defaultUnits = \"i\";\n    }\n    /**\n     * Get the current time in the given units\n     */\n    _now() {\n        return this.context.transport.ticks;\n    }\n    /**\n     * Return the value of the beats in the current units\n     */\n    _beatsToUnits(beats) {\n        return this._getPPQ() * beats;\n    }\n    /**\n     * Returns the value of a second in the current units\n     */\n    _secondsToUnits(seconds) {\n        return Math.floor((seconds / (60 / this._getBpm())) * this._getPPQ());\n    }\n    /**\n     * Returns the value of a tick in the current time units\n     */\n    _ticksToUnits(ticks) {\n        return ticks;\n    }\n    /**\n     * Return the time in ticks\n     */\n    toTicks() {\n        return this.valueOf();\n    }\n    /**\n     * Return the time in seconds\n     */\n    toSeconds() {\n        return (this.valueOf() / this._getPPQ()) * (60 / this._getBpm());\n    }\n}\n/**\n * Convert a time representation to ticks\n * @category Unit\n */\nexport function Ticks(value, units) {\n    return new TicksClass(getContext(), value, units);\n}\n//# sourceMappingURL=Ticks.js.map","import { ToneWithContext, } from \"../context/ToneWithContext.js\";\nimport { Timeline } from \"./Timeline.js\";\nimport { onContextClose, onContextInit, } from \"../context/ContextInitialization.js\";\n/**\n * Draw is useful for synchronizing visuals and audio events.\n * Callbacks from Tone.Transport or any of the Tone.Event classes\n * always happen _before_ the scheduled time and are not synchronized\n * to the animation frame so they are not good for triggering tightly\n * synchronized visuals and sound. Draw makes it easy to schedule\n * callbacks using the AudioContext time and uses requestAnimationFrame.\n * @example\n * Tone.Transport.schedule((time) => {\n * \t// use the time argument to schedule a callback with Draw\n * \tTone.Draw.schedule(() => {\n * \t\t// do drawing or DOM manipulation here\n * \t\tconsole.log(time);\n * \t}, time);\n * }, \"+0.5\");\n * Tone.Transport.start();\n * @category Core\n */\nexport class DrawClass extends ToneWithContext {\n    constructor() {\n        super(...arguments);\n        this.name = \"Draw\";\n        /**\n         * The duration after which events are not invoked.\n         */\n        this.expiration = 0.25;\n        /**\n         * The amount of time before the scheduled time\n         * that the callback can be invoked. Default is\n         * half the time of an animation frame (0.008 seconds).\n         */\n        this.anticipation = 0.008;\n        /**\n         * All of the events.\n         */\n        this._events = new Timeline();\n        /**\n         * The draw loop\n         */\n        this._boundDrawLoop = this._drawLoop.bind(this);\n        /**\n         * The animation frame id\n         */\n        this._animationFrame = -1;\n    }\n    /**\n     * Schedule a function at the given time to be invoked\n     * on the nearest animation frame.\n     * @param  callback  Callback is invoked at the given time.\n     * @param  time      The time relative to the AudioContext time to invoke the callback.\n     * @example\n     * Tone.Transport.scheduleRepeat(time => {\n     * \tTone.Draw.schedule(() => console.log(time), time);\n     * }, 1);\n     * Tone.Transport.start();\n     */\n    schedule(callback, time) {\n        this._events.add({\n            callback,\n            time: this.toSeconds(time),\n        });\n        // start the draw loop on the first event\n        if (this._events.length === 1) {\n            this._animationFrame = requestAnimationFrame(this._boundDrawLoop);\n        }\n        return this;\n    }\n    /**\n     * Cancel events scheduled after the given time\n     * @param  after  Time after which scheduled events will be removed from the scheduling timeline.\n     */\n    cancel(after) {\n        this._events.cancel(this.toSeconds(after));\n        return this;\n    }\n    /**\n     * The draw loop\n     */\n    _drawLoop() {\n        const now = this.context.currentTime;\n        this._events.forEachBefore(now + this.anticipation, (event) => {\n            if (now - event.time <= this.expiration) {\n                event.callback();\n            }\n            this._events.remove(event);\n        });\n        if (this._events.length > 0) {\n            this._animationFrame = requestAnimationFrame(this._boundDrawLoop);\n        }\n    }\n    dispose() {\n        super.dispose();\n        this._events.dispose();\n        cancelAnimationFrame(this._animationFrame);\n        return this;\n    }\n}\n//-------------------------------------\n// \tINITIALIZATION\n//-------------------------------------\nonContextInit((context) => {\n    context.draw = new DrawClass({ context });\n});\nonContextClose((context) => {\n    context.draw.dispose();\n});\n//# sourceMappingURL=Draw.js.map","import { Tone } from \"../Tone.js\";\nimport { isDefined } from \"./TypeCheck.js\";\nimport { assert } from \"./Debug.js\";\n/**\n * Similar to Tone.Timeline, but all events represent\n * intervals with both \"time\" and \"duration\" times. The\n * events are placed in a tree structure optimized\n * for querying an intersection point with the timeline\n * events. Internally uses an [Interval Tree](https://en.wikipedia.org/wiki/Interval_tree)\n * to represent the data.\n * @internal\n */\nexport class IntervalTimeline extends Tone {\n    constructor() {\n        super(...arguments);\n        this.name = \"IntervalTimeline\";\n        /**\n         * The root node of the inteval tree\n         */\n        this._root = null;\n        /**\n         * Keep track of the length of the timeline.\n         */\n        this._length = 0;\n    }\n    /**\n     * The event to add to the timeline. All events must\n     * have a time and duration value\n     * @param  event  The event to add to the timeline\n     */\n    add(event) {\n        assert(isDefined(event.time), \"Events must have a time property\");\n        assert(isDefined(event.duration), \"Events must have a duration parameter\");\n        event.time = event.time.valueOf();\n        let node = new IntervalNode(event.time, event.time + event.duration, event);\n        if (this._root === null) {\n            this._root = node;\n        }\n        else {\n            this._root.insert(node);\n        }\n        this._length++;\n        // Restructure tree to be balanced\n        while (node !== null) {\n            node.updateHeight();\n            node.updateMax();\n            this._rebalance(node);\n            node = node.parent;\n        }\n        return this;\n    }\n    /**\n     * Remove an event from the timeline.\n     * @param  event  The event to remove from the timeline\n     */\n    remove(event) {\n        if (this._root !== null) {\n            const results = [];\n            this._root.search(event.time, results);\n            for (const node of results) {\n                if (node.event === event) {\n                    this._removeNode(node);\n                    this._length--;\n                    break;\n                }\n            }\n        }\n        return this;\n    }\n    /**\n     * The number of items in the timeline.\n     * @readOnly\n     */\n    get length() {\n        return this._length;\n    }\n    /**\n     * Remove events whose time time is after the given time\n     * @param  after  The time to query.\n     */\n    cancel(after) {\n        this.forEachFrom(after, (event) => this.remove(event));\n        return this;\n    }\n    /**\n     * Set the root node as the given node\n     */\n    _setRoot(node) {\n        this._root = node;\n        if (this._root !== null) {\n            this._root.parent = null;\n        }\n    }\n    /**\n     * Replace the references to the node in the node's parent\n     * with the replacement node.\n     */\n    _replaceNodeInParent(node, replacement) {\n        if (node.parent !== null) {\n            if (node.isLeftChild()) {\n                node.parent.left = replacement;\n            }\n            else {\n                node.parent.right = replacement;\n            }\n            this._rebalance(node.parent);\n        }\n        else {\n            this._setRoot(replacement);\n        }\n    }\n    /**\n     * Remove the node from the tree and replace it with\n     * a successor which follows the schema.\n     */\n    _removeNode(node) {\n        if (node.left === null && node.right === null) {\n            this._replaceNodeInParent(node, null);\n        }\n        else if (node.right === null) {\n            this._replaceNodeInParent(node, node.left);\n        }\n        else if (node.left === null) {\n            this._replaceNodeInParent(node, node.right);\n        }\n        else {\n            const balance = node.getBalance();\n            let replacement;\n            let temp = null;\n            if (balance > 0) {\n                if (node.left.right === null) {\n                    replacement = node.left;\n                    replacement.right = node.right;\n                    temp = replacement;\n                }\n                else {\n                    replacement = node.left.right;\n                    while (replacement.right !== null) {\n                        replacement = replacement.right;\n                    }\n                    if (replacement.parent) {\n                        replacement.parent.right = replacement.left;\n                        temp = replacement.parent;\n                        replacement.left = node.left;\n                        replacement.right = node.right;\n                    }\n                }\n            }\n            else if (node.right.left === null) {\n                replacement = node.right;\n                replacement.left = node.left;\n                temp = replacement;\n            }\n            else {\n                replacement = node.right.left;\n                while (replacement.left !== null) {\n                    replacement = replacement.left;\n                }\n                if (replacement.parent) {\n                    replacement.parent.left = replacement.right;\n                    temp = replacement.parent;\n                    replacement.left = node.left;\n                    replacement.right = node.right;\n                }\n            }\n            if (node.parent !== null) {\n                if (node.isLeftChild()) {\n                    node.parent.left = replacement;\n                }\n                else {\n                    node.parent.right = replacement;\n                }\n            }\n            else {\n                this._setRoot(replacement);\n            }\n            if (temp) {\n                this._rebalance(temp);\n            }\n        }\n        node.dispose();\n    }\n    /**\n     * Rotate the tree to the left\n     */\n    _rotateLeft(node) {\n        const parent = node.parent;\n        const isLeftChild = node.isLeftChild();\n        // Make node.right the new root of this sub tree (instead of node)\n        const pivotNode = node.right;\n        if (pivotNode) {\n            node.right = pivotNode.left;\n            pivotNode.left = node;\n        }\n        if (parent !== null) {\n            if (isLeftChild) {\n                parent.left = pivotNode;\n            }\n            else {\n                parent.right = pivotNode;\n            }\n        }\n        else {\n            this._setRoot(pivotNode);\n        }\n    }\n    /**\n     * Rotate the tree to the right\n     */\n    _rotateRight(node) {\n        const parent = node.parent;\n        const isLeftChild = node.isLeftChild();\n        // Make node.left the new root of this sub tree (instead of node)\n        const pivotNode = node.left;\n        if (pivotNode) {\n            node.left = pivotNode.right;\n            pivotNode.right = node;\n        }\n        if (parent !== null) {\n            if (isLeftChild) {\n                parent.left = pivotNode;\n            }\n            else {\n                parent.right = pivotNode;\n            }\n        }\n        else {\n            this._setRoot(pivotNode);\n        }\n    }\n    /**\n     * Balance the BST\n     */\n    _rebalance(node) {\n        const balance = node.getBalance();\n        if (balance > 1 && node.left) {\n            if (node.left.getBalance() < 0) {\n                this._rotateLeft(node.left);\n            }\n            else {\n                this._rotateRight(node);\n            }\n        }\n        else if (balance < -1 && node.right) {\n            if (node.right.getBalance() > 0) {\n                this._rotateRight(node.right);\n            }\n            else {\n                this._rotateLeft(node);\n            }\n        }\n    }\n    /**\n     * Get an event whose time and duration span the give time. Will\n     * return the match whose \"time\" value is closest to the given time.\n     * @return  The event which spans the desired time\n     */\n    get(time) {\n        if (this._root !== null) {\n            const results = [];\n            this._root.search(time, results);\n            if (results.length > 0) {\n                let max = results[0];\n                for (let i = 1; i < results.length; i++) {\n                    if (results[i].low > max.low) {\n                        max = results[i];\n                    }\n                }\n                return max.event;\n            }\n        }\n        return null;\n    }\n    /**\n     * Iterate over everything in the timeline.\n     * @param  callback The callback to invoke with every item\n     */\n    forEach(callback) {\n        if (this._root !== null) {\n            const allNodes = [];\n            this._root.traverse((node) => allNodes.push(node));\n            allNodes.forEach((node) => {\n                if (node.event) {\n                    callback(node.event);\n                }\n            });\n        }\n        return this;\n    }\n    /**\n     * Iterate over everything in the array in which the given time\n     * overlaps with the time and duration time of the event.\n     * @param  time The time to check if items are overlapping\n     * @param  callback The callback to invoke with every item\n     */\n    forEachAtTime(time, callback) {\n        if (this._root !== null) {\n            const results = [];\n            this._root.search(time, results);\n            results.forEach((node) => {\n                if (node.event) {\n                    callback(node.event);\n                }\n            });\n        }\n        return this;\n    }\n    /**\n     * Iterate over everything in the array in which the time is greater\n     * than or equal to the given time.\n     * @param  time The time to check if items are before\n     * @param  callback The callback to invoke with every item\n     */\n    forEachFrom(time, callback) {\n        if (this._root !== null) {\n            const results = [];\n            this._root.searchAfter(time, results);\n            results.forEach((node) => {\n                if (node.event) {\n                    callback(node.event);\n                }\n            });\n        }\n        return this;\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        super.dispose();\n        if (this._root !== null) {\n            this._root.traverse((node) => node.dispose());\n        }\n        this._root = null;\n        return this;\n    }\n}\n//-------------------------------------\n// \tINTERVAL NODE HELPER\n//-------------------------------------\n/**\n * Represents a node in the binary search tree, with the addition\n * of a \"high\" value which keeps track of the highest value of\n * its children.\n * References:\n * https://brooknovak.wordpress.com/2013/12/07/augmented-interval-tree-in-c/\n * http://www.mif.vu.lt/~valdas/ALGORITMAI/LITERATURA/Cormen/Cormen.pdf\n * @param low\n * @param high\n */\nclass IntervalNode {\n    constructor(low, high, event) {\n        // the nodes to the left\n        this._left = null;\n        // the nodes to the right\n        this._right = null;\n        // the parent node\n        this.parent = null;\n        // the number of child nodes\n        this.height = 0;\n        this.event = event;\n        // the low value\n        this.low = low;\n        // the high value\n        this.high = high;\n        // the high value for this and all child nodes\n        this.max = this.high;\n    }\n    /**\n     * Insert a node into the correct spot in the tree\n     */\n    insert(node) {\n        if (node.low <= this.low) {\n            if (this.left === null) {\n                this.left = node;\n            }\n            else {\n                this.left.insert(node);\n            }\n        }\n        else if (this.right === null) {\n            this.right = node;\n        }\n        else {\n            this.right.insert(node);\n        }\n    }\n    /**\n     * Search the tree for nodes which overlap\n     * with the given point\n     * @param  point  The point to query\n     * @param  results  The array to put the results\n     */\n    search(point, results) {\n        // If p is to the right of the rightmost point of any interval\n        // in this node and all children, there won't be any matches.\n        if (point > this.max) {\n            return;\n        }\n        // Search left children\n        if (this.left !== null) {\n            this.left.search(point, results);\n        }\n        // Check this node\n        if (this.low <= point && this.high > point) {\n            results.push(this);\n        }\n        // If p is to the left of the time of this interval,\n        // then it can't be in any child to the right.\n        if (this.low > point) {\n            return;\n        }\n        // Search right children\n        if (this.right !== null) {\n            this.right.search(point, results);\n        }\n    }\n    /**\n     * Search the tree for nodes which are less\n     * than the given point\n     * @param  point  The point to query\n     * @param  results  The array to put the results\n     */\n    searchAfter(point, results) {\n        // Check this node\n        if (this.low >= point) {\n            results.push(this);\n            if (this.left !== null) {\n                this.left.searchAfter(point, results);\n            }\n        }\n        // search the right side\n        if (this.right !== null) {\n            this.right.searchAfter(point, results);\n        }\n    }\n    /**\n     * Invoke the callback on this element and both it's branches\n     * @param  {Function}  callback\n     */\n    traverse(callback) {\n        callback(this);\n        if (this.left !== null) {\n            this.left.traverse(callback);\n        }\n        if (this.right !== null) {\n            this.right.traverse(callback);\n        }\n    }\n    /**\n     * Update the height of the node\n     */\n    updateHeight() {\n        if (this.left !== null && this.right !== null) {\n            this.height = Math.max(this.left.height, this.right.height) + 1;\n        }\n        else if (this.right !== null) {\n            this.height = this.right.height + 1;\n        }\n        else if (this.left !== null) {\n            this.height = this.left.height + 1;\n        }\n        else {\n            this.height = 0;\n        }\n    }\n    /**\n     * Update the height of the node\n     */\n    updateMax() {\n        this.max = this.high;\n        if (this.left !== null) {\n            this.max = Math.max(this.max, this.left.max);\n        }\n        if (this.right !== null) {\n            this.max = Math.max(this.max, this.right.max);\n        }\n    }\n    /**\n     * The balance is how the leafs are distributed on the node\n     * @return  Negative numbers are balanced to the right\n     */\n    getBalance() {\n        let balance = 0;\n        if (this.left !== null && this.right !== null) {\n            balance = this.left.height - this.right.height;\n        }\n        else if (this.left !== null) {\n            balance = this.left.height + 1;\n        }\n        else if (this.right !== null) {\n            balance = -(this.right.height + 1);\n        }\n        return balance;\n    }\n    /**\n     * @returns true if this node is the left child of its parent\n     */\n    isLeftChild() {\n        return this.parent !== null && this.parent.left === this;\n    }\n    /**\n     * get/set the left node\n     */\n    get left() {\n        return this._left;\n    }\n    set left(node) {\n        this._left = node;\n        if (node !== null) {\n            node.parent = this;\n        }\n        this.updateHeight();\n        this.updateMax();\n    }\n    /**\n     * get/set the right node\n     */\n    get right() {\n        return this._right;\n    }\n    set right(node) {\n        this._right = node;\n        if (node !== null) {\n            node.parent = this;\n        }\n        this.updateHeight();\n        this.updateMax();\n    }\n    /**\n     * null out references.\n     */\n    dispose() {\n        this.parent = null;\n        this._left = null;\n        this._right = null;\n        this.event = null;\n    }\n}\n//# sourceMappingURL=IntervalTimeline.js.map","import { Timeline } from \"./Timeline.js\";\nimport { Tone } from \"../Tone.js\";\n/**\n * Represents a single value which is gettable and settable in a timed way\n */\nexport class TimelineValue extends Tone {\n    /**\n     * @param initialValue The value to return if there is no scheduled values\n     */\n    constructor(initialValue) {\n        super();\n        this.name = \"TimelineValue\";\n        /**\n         * The timeline which stores the values\n         */\n        this._timeline = new Timeline({\n            memory: 10,\n        });\n        this._initialValue = initialValue;\n    }\n    /**\n     * Set the value at the given time\n     */\n    set(value, time) {\n        this._timeline.add({\n            value,\n            time,\n        });\n        return this;\n    }\n    /**\n     * Get the value at the given time\n     */\n    get(time) {\n        const event = this._timeline.get(time);\n        if (event) {\n            return event.value;\n        }\n        else {\n            return this._initialValue;\n        }\n    }\n}\n//# sourceMappingURL=TimelineValue.js.map","import { optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { ToneAudioNode, } from \"../core/context/ToneAudioNode.js\";\nimport { connectSignal } from \"./Signal.js\";\n/**\n * A signal operator has an input and output and modifies the signal.\n */\nexport class SignalOperator extends ToneAudioNode {\n    constructor() {\n        super(optionsFromArguments(SignalOperator.getDefaults(), arguments, [\n            \"context\",\n        ]));\n    }\n    connect(destination, outputNum = 0, inputNum = 0) {\n        connectSignal(this, destination, outputNum, inputNum);\n        return this;\n    }\n}\n//# sourceMappingURL=SignalOperator.js.map","import { optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { isArray, isFunction } from \"../core/util/TypeCheck.js\";\nimport { assert } from \"../core/util/Debug.js\";\nimport { Signal } from \"./Signal.js\";\nimport { SignalOperator } from \"./SignalOperator.js\";\n/**\n * Wraps the native Web Audio API\n * [WaveShaperNode](http://webaudio.github.io/web-audio-api/#the-waveshapernode-interface).\n *\n * @example\n * const osc = new Tone.Oscillator().toDestination().start();\n * // multiply the output of the signal by 2 using the waveshaper's function\n * const timesTwo = new Tone.WaveShaper((val) => val * 2, 2048).connect(osc.frequency);\n * const signal = new Tone.Signal(440).connect(timesTwo);\n * @category Signal\n */\nexport class WaveShaper extends SignalOperator {\n    constructor() {\n        const options = optionsFromArguments(WaveShaper.getDefaults(), arguments, [\"mapping\", \"length\"]);\n        super(options);\n        this.name = \"WaveShaper\";\n        /**\n         * the waveshaper node\n         */\n        this._shaper = this.context.createWaveShaper();\n        /**\n         * The input to the waveshaper node.\n         */\n        this.input = this._shaper;\n        /**\n         * The output from the waveshaper node\n         */\n        this.output = this._shaper;\n        if (isArray(options.mapping) ||\n            options.mapping instanceof Float32Array) {\n            this.curve = Float32Array.from(options.mapping);\n        }\n        else if (isFunction(options.mapping)) {\n            this.setMap(options.mapping, options.length);\n        }\n    }\n    static getDefaults() {\n        return Object.assign(Signal.getDefaults(), {\n            length: 1024,\n        });\n    }\n    /**\n     * Uses a mapping function to set the value of the curve.\n     * @param mapping The function used to define the values.\n     *                The mapping function take two arguments:\n     *                the first is the value at the current position\n     *                which goes from -1 to 1 over the number of elements\n     *                in the curve array. The second argument is the array position.\n     * @example\n     * const shaper = new Tone.WaveShaper();\n     * // map the input signal from [-1, 1] to [0, 10]\n     * shaper.setMap((val, index) => (val + 1) * 5);\n     */\n    setMap(mapping, length = 1024) {\n        const array = new Float32Array(length);\n        for (let i = 0, len = length; i < len; i++) {\n            const normalized = (i / (len - 1)) * 2 - 1;\n            array[i] = mapping(normalized, i);\n        }\n        this.curve = array;\n        return this;\n    }\n    /**\n     * The array to set as the waveshaper curve. For linear curves\n     * array length does not make much difference, but for complex curves\n     * longer arrays will provide smoother interpolation.\n     */\n    get curve() {\n        return this._shaper.curve;\n    }\n    set curve(mapping) {\n        this._shaper.curve = mapping;\n    }\n    /**\n     * Specifies what type of oversampling (if any) should be used when\n     * applying the shaping curve. Can either be \"none\", \"2x\" or \"4x\".\n     */\n    get oversample() {\n        return this._shaper.oversample;\n    }\n    set oversample(oversampling) {\n        const isOverSampleType = [\"none\", \"2x\", \"4x\"].some((str) => str.includes(oversampling));\n        assert(isOverSampleType, \"oversampling must be either 'none', '2x', or '4x'\");\n        this._shaper.oversample = oversampling;\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this._shaper.disconnect();\n        return this;\n    }\n}\n//# sourceMappingURL=WaveShaper.js.map","import { WaveShaper } from \"./WaveShaper.js\";\nimport { optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { SignalOperator } from \"./SignalOperator.js\";\n/**\n * Pow applies an exponent to the incoming signal. The incoming signal must be AudioRange [-1, 1]\n *\n * @example\n * const pow = new Tone.Pow(2);\n * const sig = new Tone.Signal(0.5).connect(pow);\n * // output of pow is 0.25.\n * @category Signal\n */\nexport class Pow extends SignalOperator {\n    constructor() {\n        const options = optionsFromArguments(Pow.getDefaults(), arguments, [\n            \"value\",\n        ]);\n        super(options);\n        this.name = \"Pow\";\n        this._exponentScaler =\n            this.input =\n                this.output =\n                    new WaveShaper({\n                        context: this.context,\n                        mapping: this._expFunc(options.value),\n                        length: 8192,\n                    });\n        this._exponent = options.value;\n    }\n    static getDefaults() {\n        return Object.assign(SignalOperator.getDefaults(), {\n            value: 1,\n        });\n    }\n    /**\n     * the function which maps the waveshaper\n     * @param exponent exponent value\n     */\n    _expFunc(exponent) {\n        return (val) => {\n            return Math.pow(Math.abs(val), exponent);\n        };\n    }\n    /**\n     * The value of the exponent.\n     */\n    get value() {\n        return this._exponent;\n    }\n    set value(exponent) {\n        this._exponent = exponent;\n        this._exponentScaler.setMap(this._expFunc(this._exponent));\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this._exponentScaler.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=Pow.js.map","import { noOp } from \"../util/Interface.js\";\n/**\n * TransportEvent is an internal class used by {@link TransportClass}\n * to schedule events. Do no invoke this class directly, it is\n * handled from within Tone.Transport.\n */\nexport class TransportEvent {\n    /**\n     * @param transport The transport object which the event belongs to\n     */\n    constructor(transport, opts) {\n        /**\n         * The unique id of the event\n         */\n        this.id = TransportEvent._eventId++;\n        /**\n         * The remaining value between the passed in time, and Math.floor(time).\n         * This value is later added back when scheduling to get sub-tick precision.\n         */\n        this._remainderTime = 0;\n        const options = Object.assign(TransportEvent.getDefaults(), opts);\n        this.transport = transport;\n        this.callback = options.callback;\n        this._once = options.once;\n        this.time = Math.floor(options.time);\n        this._remainderTime = options.time - this.time;\n    }\n    static getDefaults() {\n        return {\n            callback: noOp,\n            once: false,\n            time: 0,\n        };\n    }\n    /**\n     * Get the time and remainder time.\n     */\n    get floatTime() {\n        return this.time + this._remainderTime;\n    }\n    /**\n     * Invoke the event callback.\n     * @param  time  The AudioContext time in seconds of the event\n     */\n    invoke(time) {\n        if (this.callback) {\n            const tickDuration = this.transport.bpm.getDurationOfTicks(1, time);\n            this.callback(time + this._remainderTime * tickDuration);\n            if (this._once) {\n                this.transport.clear(this.id);\n            }\n        }\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        this.callback = undefined;\n        return this;\n    }\n}\n/**\n * Current ID counter\n */\nTransportEvent._eventId = 0;\n//# sourceMappingURL=TransportEvent.js.map","import { TicksClass } from \"../type/Ticks.js\";\nimport { TransportEvent } from \"./TransportEvent.js\";\nimport { GT, LT } from \"../util/Math.js\";\n/**\n * TransportRepeatEvent is an internal class used by Tone.Transport\n * to schedule repeat events. This class should not be instantiated directly.\n */\nexport class TransportRepeatEvent extends TransportEvent {\n    /**\n     * @param transport The transport object which the event belongs to\n     */\n    constructor(transport, opts) {\n        super(transport, opts);\n        /**\n         * The ID of the current timeline event\n         */\n        this._currentId = -1;\n        /**\n         * The ID of the next timeline event\n         */\n        this._nextId = -1;\n        /**\n         * The time of the next event\n         */\n        this._nextTick = this.time;\n        /**\n         * a reference to the bound start method\n         */\n        this._boundRestart = this._restart.bind(this);\n        const options = Object.assign(TransportRepeatEvent.getDefaults(), opts);\n        this.duration = options.duration;\n        this._interval = options.interval;\n        this._nextTick = options.time;\n        this.transport.on(\"start\", this._boundRestart);\n        this.transport.on(\"loopStart\", this._boundRestart);\n        this.transport.on(\"ticks\", this._boundRestart);\n        this.context = this.transport.context;\n        this._restart();\n    }\n    static getDefaults() {\n        return Object.assign({}, TransportEvent.getDefaults(), {\n            duration: Infinity,\n            interval: 1,\n            once: false,\n        });\n    }\n    /**\n     * Invoke the callback. Returns the tick time which\n     * the next event should be scheduled at.\n     * @param  time  The AudioContext time in seconds of the event\n     */\n    invoke(time) {\n        // create more events if necessary\n        this._createEvents(time);\n        // call the super class\n        super.invoke(time);\n    }\n    /**\n     * Create an event on the transport on the nextTick\n     */\n    _createEvent() {\n        if (LT(this._nextTick, this.floatTime + this.duration)) {\n            return this.transport.scheduleOnce(this.invoke.bind(this), new TicksClass(this.context, this._nextTick).toSeconds());\n        }\n        return -1;\n    }\n    /**\n     * Push more events onto the timeline to keep up with the position of the timeline\n     */\n    _createEvents(time) {\n        // schedule the next event\n        // const ticks = this.transport.getTicksAtTime(time);\n        // if the next tick is within the bounds set by \"duration\"\n        if (LT(this._nextTick + this._interval, this.floatTime + this.duration)) {\n            this._nextTick += this._interval;\n            this._currentId = this._nextId;\n            this._nextId = this.transport.scheduleOnce(this.invoke.bind(this), new TicksClass(this.context, this._nextTick).toSeconds());\n        }\n    }\n    /**\n     * Re-compute the events when the transport time has changed from a start/ticks/loopStart event\n     */\n    _restart(time) {\n        this.transport.clear(this._currentId);\n        this.transport.clear(this._nextId);\n        // start at the first event\n        this._nextTick = this.floatTime;\n        const ticks = this.transport.getTicksAtTime(time);\n        if (GT(ticks, this.time)) {\n            // the event is not being scheduled from the beginning and should be offset\n            this._nextTick =\n                this.floatTime +\n                    Math.ceil((ticks - this.floatTime) / this._interval) *\n                        this._interval;\n        }\n        this._currentId = this._createEvent();\n        this._nextTick += this._interval;\n        this._nextId = this._createEvent();\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        super.dispose();\n        this.transport.clear(this._currentId);\n        this.transport.clear(this._nextId);\n        this.transport.off(\"start\", this._boundRestart);\n        this.transport.off(\"loopStart\", this._boundRestart);\n        this.transport.off(\"ticks\", this._boundRestart);\n        return this;\n    }\n}\n//# sourceMappingURL=TransportRepeatEvent.js.map","import { TimeClass } from \"../../core/type/Time.js\";\nimport { TimelineValue } from \"../../core/util/TimelineValue.js\";\nimport { Pow } from \"../../signal/Pow.js\";\nimport { onContextClose, onContextInit, } from \"../context/ContextInitialization.js\";\nimport { Gain } from \"../context/Gain.js\";\nimport { ToneWithContext, } from \"../context/ToneWithContext.js\";\nimport { TicksClass } from \"../type/Ticks.js\";\nimport { TransportTimeClass } from \"../type/TransportTime.js\";\nimport { enterScheduledCallback } from \"../util/Debug.js\";\nimport { optionsFromArguments } from \"../util/Defaults.js\";\nimport { Emitter } from \"../util/Emitter.js\";\nimport { readOnly, writable } from \"../util/Interface.js\";\nimport { IntervalTimeline } from \"../util/IntervalTimeline.js\";\nimport { Timeline } from \"../util/Timeline.js\";\nimport { isArray, isDefined } from \"../util/TypeCheck.js\";\nimport { Clock } from \"./Clock.js\";\nimport { TransportEvent } from \"./TransportEvent.js\";\nimport { TransportRepeatEvent } from \"./TransportRepeatEvent.js\";\n/**\n * Transport for timing musical events.\n * Supports tempo curves and time changes. Unlike browser-based timing (setInterval, requestAnimationFrame)\n * Transport timing events pass in the exact time of the scheduled event\n * in the argument of the callback function. Pass that time value to the object\n * you're scheduling. <br><br>\n * A single transport is created for you when the library is initialized.\n * <br><br>\n * The transport emits the events: \"start\", \"stop\", \"pause\", and \"loop\" which are\n * called with the time of that event as the argument.\n *\n * @example\n * const osc = new Tone.Oscillator().toDestination();\n * // repeated event every 8th note\n * Tone.getTransport().scheduleRepeat((time) => {\n * \t// use the callback time to schedule events\n * \tosc.start(time).stop(time + 0.1);\n * }, \"8n\");\n * // transport must be started before it starts invoking events\n * Tone.getTransport().start();\n * @category Core\n */\nexport class TransportClass extends ToneWithContext {\n    constructor() {\n        const options = optionsFromArguments(TransportClass.getDefaults(), arguments);\n        super(options);\n        this.name = \"Transport\";\n        //-------------------------------------\n        // \tLOOPING\n        //-------------------------------------\n        /**\n         * If the transport loops or not.\n         */\n        this._loop = new TimelineValue(false);\n        /**\n         * The loop start position in ticks\n         */\n        this._loopStart = 0;\n        /**\n         * The loop end position in ticks\n         */\n        this._loopEnd = 0;\n        //-------------------------------------\n        // \tTIMELINE EVENTS\n        //-------------------------------------\n        /**\n         * All the events in an object to keep track by ID\n         */\n        this._scheduledEvents = {};\n        /**\n         * The scheduled events.\n         */\n        this._timeline = new Timeline();\n        /**\n         * Repeated events\n         */\n        this._repeatedEvents = new IntervalTimeline();\n        /**\n         * All of the synced Signals\n         */\n        this._syncedSignals = [];\n        /**\n         * The swing amount\n         */\n        this._swingAmount = 0;\n        // CLOCK/TEMPO\n        this._ppq = options.ppq;\n        this._clock = new Clock({\n            callback: this._processTick.bind(this),\n            context: this.context,\n            frequency: 0,\n            units: \"bpm\",\n        });\n        this._bindClockEvents();\n        this.bpm = this._clock.frequency;\n        this._clock.frequency.multiplier = options.ppq;\n        this.bpm.setValueAtTime(options.bpm, 0);\n        readOnly(this, \"bpm\");\n        this._timeSignature = options.timeSignature;\n        // SWING\n        this._swingTicks = options.ppq / 2; // 8n\n    }\n    static getDefaults() {\n        return Object.assign(ToneWithContext.getDefaults(), {\n            bpm: 120,\n            loopEnd: \"4m\",\n            loopStart: 0,\n            ppq: 192,\n            swing: 0,\n            swingSubdivision: \"8n\",\n            timeSignature: 4,\n        });\n    }\n    //-------------------------------------\n    // \tTICKS\n    //-------------------------------------\n    /**\n     * called on every tick\n     * @param  tickTime clock relative tick time\n     */\n    _processTick(tickTime, ticks) {\n        // do the loop test\n        if (this._loop.get(tickTime)) {\n            if (ticks >= this._loopEnd) {\n                this.emit(\"loopEnd\", tickTime);\n                this._clock.setTicksAtTime(this._loopStart, tickTime);\n                ticks = this._loopStart;\n                this.emit(\"loopStart\", tickTime, this._clock.getSecondsAtTime(tickTime));\n                this.emit(\"loop\", tickTime);\n            }\n        }\n        // handle swing\n        if (this._swingAmount > 0 &&\n            ticks % this._ppq !== 0 && // not on a downbeat\n            ticks % (this._swingTicks * 2) !== 0) {\n            // add some swing\n            const progress = (ticks % (this._swingTicks * 2)) / (this._swingTicks * 2);\n            const amount = Math.sin(progress * Math.PI) * this._swingAmount;\n            tickTime +=\n                new TicksClass(this.context, (this._swingTicks * 2) / 3).toSeconds() * amount;\n        }\n        // invoke the timeline events scheduled on this tick\n        enterScheduledCallback(true);\n        this._timeline.forEachAtTime(ticks, (event) => event.invoke(tickTime));\n        enterScheduledCallback(false);\n    }\n    //-------------------------------------\n    // \tSCHEDULABLE EVENTS\n    //-------------------------------------\n    /**\n     * Schedule an event along the timeline.\n     * @param callback The callback to be invoked at the time.\n     * @param time The time to invoke the callback at.\n     * @return The id of the event which can be used for canceling the event.\n     * @example\n     * // schedule an event on the 16th measure\n     * Tone.getTransport().schedule((time) => {\n     * \t// invoked on measure 16\n     * \tconsole.log(\"measure 16!\");\n     * }, \"16:0:0\");\n     */\n    schedule(callback, time) {\n        const event = new TransportEvent(this, {\n            callback,\n            time: new TransportTimeClass(this.context, time).toTicks(),\n        });\n        return this._addEvent(event, this._timeline);\n    }\n    /**\n     * Schedule a repeated event along the timeline. The event will fire\n     * at the `interval` starting at the `startTime` and for the specified\n     * `duration`.\n     * @param  callback   The callback to invoke.\n     * @param  interval   The duration between successive callbacks. Must be a positive number.\n     * @param  startTime  When along the timeline the events should start being invoked.\n     * @param  duration How long the event should repeat.\n     * @return  The ID of the scheduled event. Use this to cancel the event.\n     * @example\n     * const osc = new Tone.Oscillator().toDestination().start();\n     * // a callback invoked every eighth note after the first measure\n     * Tone.getTransport().scheduleRepeat((time) => {\n     * \tosc.start(time).stop(time + 0.1);\n     * }, \"8n\", \"1m\");\n     */\n    scheduleRepeat(callback, interval, startTime, duration = Infinity) {\n        const event = new TransportRepeatEvent(this, {\n            callback,\n            duration: new TimeClass(this.context, duration).toTicks(),\n            interval: new TimeClass(this.context, interval).toTicks(),\n            time: new TransportTimeClass(this.context, startTime).toTicks(),\n        });\n        // kick it off if the Transport is started\n        // @ts-ignore\n        return this._addEvent(event, this._repeatedEvents);\n    }\n    /**\n     * Schedule an event that will be removed after it is invoked.\n     * @param callback The callback to invoke once.\n     * @param time The time the callback should be invoked.\n     * @returns The ID of the scheduled event.\n     */\n    scheduleOnce(callback, time) {\n        const event = new TransportEvent(this, {\n            callback,\n            once: true,\n            time: new TransportTimeClass(this.context, time).toTicks(),\n        });\n        return this._addEvent(event, this._timeline);\n    }\n    /**\n     * Clear the passed in event id from the timeline\n     * @param eventId The id of the event.\n     */\n    clear(eventId) {\n        if (this._scheduledEvents.hasOwnProperty(eventId)) {\n            const item = this._scheduledEvents[eventId.toString()];\n            item.timeline.remove(item.event);\n            item.event.dispose();\n            delete this._scheduledEvents[eventId.toString()];\n        }\n        return this;\n    }\n    /**\n     * Add an event to the correct timeline. Keep track of the\n     * timeline it was added to.\n     * @returns the event id which was just added\n     */\n    _addEvent(event, timeline) {\n        this._scheduledEvents[event.id.toString()] = {\n            event,\n            timeline,\n        };\n        timeline.add(event);\n        return event.id;\n    }\n    /**\n     * Remove scheduled events from the timeline after\n     * the given time. Repeated events will be removed\n     * if their startTime is after the given time\n     * @param after Clear all events after this time.\n     */\n    cancel(after = 0) {\n        const computedAfter = this.toTicks(after);\n        this._timeline.forEachFrom(computedAfter, (event) => this.clear(event.id));\n        this._repeatedEvents.forEachFrom(computedAfter, (event) => this.clear(event.id));\n        return this;\n    }\n    //-------------------------------------\n    // \tSTART/STOP/PAUSE\n    //-------------------------------------\n    /**\n     * Bind start/stop/pause events from the clock and emit them.\n     */\n    _bindClockEvents() {\n        this._clock.on(\"start\", (time, offset) => {\n            offset = new TicksClass(this.context, offset).toSeconds();\n            this.emit(\"start\", time, offset);\n        });\n        this._clock.on(\"stop\", (time) => {\n            this.emit(\"stop\", time);\n        });\n        this._clock.on(\"pause\", (time) => {\n            this.emit(\"pause\", time);\n        });\n    }\n    /**\n     * Returns the playback state of the source, either \"started\", \"stopped\", or \"paused\"\n     */\n    get state() {\n        return this._clock.getStateAtTime(this.now());\n    }\n    /**\n     * Start the transport and all sources synced to the transport.\n     * @param  time The time when the transport should start.\n     * @param  offset The timeline offset to start the transport.\n     * @example\n     * // start the transport in one second starting at beginning of the 5th measure.\n     * Tone.getTransport().start(\"+1\", \"4:0:0\");\n     */\n    start(time, offset) {\n        // start the context\n        this.context.resume();\n        let offsetTicks;\n        if (isDefined(offset)) {\n            offsetTicks = this.toTicks(offset);\n        }\n        // start the clock\n        this._clock.start(time, offsetTicks);\n        return this;\n    }\n    /**\n     * Stop the transport and all sources synced to the transport.\n     * @param time The time when the transport should stop.\n     * @example\n     * Tone.getTransport().stop();\n     */\n    stop(time) {\n        this._clock.stop(time);\n        return this;\n    }\n    /**\n     * Pause the transport and all sources synced to the transport.\n     */\n    pause(time) {\n        this._clock.pause(time);\n        return this;\n    }\n    /**\n     * Toggle the current state of the transport. If it is\n     * started, it will stop it, otherwise it will start the Transport.\n     * @param  time The time of the event\n     */\n    toggle(time) {\n        time = this.toSeconds(time);\n        if (this._clock.getStateAtTime(time) !== \"started\") {\n            this.start(time);\n        }\n        else {\n            this.stop(time);\n        }\n        return this;\n    }\n    //-------------------------------------\n    // \tSETTERS/GETTERS\n    //-------------------------------------\n    /**\n     * The time signature as just the numerator over 4.\n     * For example 4/4 would be just 4 and 6/8 would be 3.\n     * @example\n     * // common time\n     * Tone.getTransport().timeSignature = 4;\n     * // 7/8\n     * Tone.getTransport().timeSignature = [7, 8];\n     * // this will be reduced to a single number\n     * Tone.getTransport().timeSignature; // returns 3.5\n     */\n    get timeSignature() {\n        return this._timeSignature;\n    }\n    set timeSignature(timeSig) {\n        if (isArray(timeSig)) {\n            timeSig = (timeSig[0] / timeSig[1]) * 4;\n        }\n        this._timeSignature = timeSig;\n    }\n    /**\n     * When the Transport.loop = true, this is the starting position of the loop.\n     */\n    get loopStart() {\n        return new TimeClass(this.context, this._loopStart, \"i\").toSeconds();\n    }\n    set loopStart(startPosition) {\n        this._loopStart = this.toTicks(startPosition);\n    }\n    /**\n     * When the Transport.loop = true, this is the ending position of the loop.\n     */\n    get loopEnd() {\n        return new TimeClass(this.context, this._loopEnd, \"i\").toSeconds();\n    }\n    set loopEnd(endPosition) {\n        this._loopEnd = this.toTicks(endPosition);\n    }\n    /**\n     * If the transport loops or not.\n     */\n    get loop() {\n        return this._loop.get(this.now());\n    }\n    set loop(loop) {\n        this._loop.set(loop, this.now());\n    }\n    /**\n     * Set the loop start and stop at the same time.\n     * @example\n     * // loop over the first measure\n     * Tone.getTransport().setLoopPoints(0, \"1m\");\n     * Tone.getTransport().loop = true;\n     */\n    setLoopPoints(startPosition, endPosition) {\n        this.loopStart = startPosition;\n        this.loopEnd = endPosition;\n        return this;\n    }\n    /**\n     * The swing value. Between 0-1 where 1 equal to the note + half the subdivision.\n     */\n    get swing() {\n        return this._swingAmount;\n    }\n    set swing(amount) {\n        // scale the values to a normal range\n        this._swingAmount = amount;\n    }\n    /**\n     * Set the subdivision which the swing will be applied to.\n     * The default value is an 8th note. Value must be less\n     * than a quarter note.\n     */\n    get swingSubdivision() {\n        return new TicksClass(this.context, this._swingTicks).toNotation();\n    }\n    set swingSubdivision(subdivision) {\n        this._swingTicks = this.toTicks(subdivision);\n    }\n    /**\n     * The Transport's position in Bars:Beats:Sixteenths.\n     * Setting the value will jump to that position right away.\n     */\n    get position() {\n        const now = this.now();\n        const ticks = this._clock.getTicksAtTime(now);\n        return new TicksClass(this.context, ticks).toBarsBeatsSixteenths();\n    }\n    set position(progress) {\n        const ticks = this.toTicks(progress);\n        this.ticks = ticks;\n    }\n    /**\n     * The Transport's position in seconds.\n     * Setting the value will jump to that position right away.\n     */\n    get seconds() {\n        return this._clock.seconds;\n    }\n    set seconds(s) {\n        const now = this.now();\n        const ticks = this._clock.frequency.timeToTicks(s, now);\n        this.ticks = ticks;\n    }\n    /**\n     * The Transport's loop position as a normalized value. Always\n     * returns 0 if the Transport.loop = false.\n     */\n    get progress() {\n        if (this.loop) {\n            const now = this.now();\n            const ticks = this._clock.getTicksAtTime(now);\n            return ((ticks - this._loopStart) / (this._loopEnd - this._loopStart));\n        }\n        else {\n            return 0;\n        }\n    }\n    /**\n     * The Transport's current tick position.\n     */\n    get ticks() {\n        return this._clock.ticks;\n    }\n    set ticks(t) {\n        if (this._clock.ticks !== t) {\n            const now = this.now();\n            // stop everything synced to the transport\n            if (this.state === \"started\") {\n                const ticks = this._clock.getTicksAtTime(now);\n                // schedule to start on the next tick, #573\n                const remainingTick = this._clock.frequency.getDurationOfTicks(Math.ceil(ticks) - ticks, now);\n                const time = now + remainingTick;\n                this.emit(\"stop\", time);\n                this._clock.setTicksAtTime(t, time);\n                // restart it with the new time\n                this.emit(\"start\", time, this._clock.getSecondsAtTime(time));\n            }\n            else {\n                this.emit(\"ticks\", now);\n                this._clock.setTicksAtTime(t, now);\n            }\n        }\n    }\n    /**\n     * Get the clock's ticks at the given time.\n     * @param  time  When to get the tick value\n     * @return The tick value at the given time.\n     */\n    getTicksAtTime(time) {\n        return this._clock.getTicksAtTime(time);\n    }\n    /**\n     * Return the elapsed seconds at the given time.\n     * @param  time  When to get the elapsed seconds\n     * @return  The number of elapsed seconds\n     */\n    getSecondsAtTime(time) {\n        return this._clock.getSecondsAtTime(time);\n    }\n    /**\n     * Pulses Per Quarter note. This is the smallest resolution\n     * the Transport timing supports. This should be set once\n     * on initialization and not set again. Changing this value\n     * after other objects have been created can cause problems.\n     */\n    get PPQ() {\n        return this._clock.frequency.multiplier;\n    }\n    set PPQ(ppq) {\n        this._clock.frequency.multiplier = ppq;\n    }\n    //-------------------------------------\n    // \tSYNCING\n    //-------------------------------------\n    /**\n     * Returns the time aligned to the next subdivision\n     * of the Transport. If the Transport is not started,\n     * it will return 0.\n     * Note: this will not work precisely during tempo ramps.\n     * @param  subdivision  The subdivision to quantize to\n     * @return  The context time of the next subdivision.\n     * @example\n     * // the transport must be started, otherwise returns 0\n     * Tone.getTransport().start();\n     * Tone.getTransport().nextSubdivision(\"4n\");\n     */\n    nextSubdivision(subdivision) {\n        subdivision = this.toTicks(subdivision);\n        if (this.state !== \"started\") {\n            // if the transport's not started, return 0\n            return 0;\n        }\n        else {\n            const now = this.now();\n            // the remainder of the current ticks and the subdivision\n            const transportPos = this.getTicksAtTime(now);\n            const remainingTicks = subdivision - (transportPos % subdivision);\n            return this._clock.nextTickTime(remainingTicks, now);\n        }\n    }\n    /**\n     * Attaches the signal to the tempo control signal so that\n     * any changes in the tempo will change the signal in the same\n     * ratio.\n     *\n     * @param signal\n     * @param ratio Optionally pass in the ratio between the two signals.\n     * \t\t\tOtherwise it will be computed based on their current values.\n     */\n    syncSignal(signal, ratio) {\n        const now = this.now();\n        let source = this.bpm;\n        let sourceValue = 1 / (60 / source.getValueAtTime(now) / this.PPQ);\n        let nodes = [];\n        // If the signal is in the time domain, sync it to the reciprocal of\n        // the tempo instead of the tempo.\n        if (signal.units === \"time\") {\n            // The input to Pow should be in the range [1 / 4096, 1], where\n            // where 4096 is half of the buffer size of Pow's waveshaper.\n            // Pick a scaling factor based on the initial tempo that ensures\n            // that the initial input is in this range, while leaving room for\n            // tempo changes.\n            const scaleFactor = 1 / 64 / sourceValue;\n            const scaleBefore = new Gain(scaleFactor);\n            const reciprocal = new Pow(-1);\n            const scaleAfter = new Gain(scaleFactor);\n            // @ts-ignore\n            source.chain(scaleBefore, reciprocal, scaleAfter);\n            source = scaleAfter;\n            sourceValue = 1 / sourceValue;\n            nodes = [scaleBefore, reciprocal, scaleAfter];\n        }\n        if (!ratio) {\n            // get the sync ratio\n            if (signal.getValueAtTime(now) !== 0) {\n                ratio = signal.getValueAtTime(now) / sourceValue;\n            }\n            else {\n                ratio = 0;\n            }\n        }\n        const ratioSignal = new Gain(ratio);\n        // @ts-ignore\n        source.connect(ratioSignal);\n        // @ts-ignore\n        ratioSignal.connect(signal._param);\n        nodes.push(ratioSignal);\n        this._syncedSignals.push({\n            initial: signal.value,\n            nodes: nodes,\n            signal,\n        });\n        signal.value = 0;\n        return this;\n    }\n    /**\n     * Unsyncs a previously synced signal from the transport's control.\n     * @see {@link syncSignal}.\n     */\n    unsyncSignal(signal) {\n        for (let i = this._syncedSignals.length - 1; i >= 0; i--) {\n            const syncedSignal = this._syncedSignals[i];\n            if (syncedSignal.signal === signal) {\n                syncedSignal.nodes.forEach((node) => node.dispose());\n                syncedSignal.signal.value = syncedSignal.initial;\n                this._syncedSignals.splice(i, 1);\n            }\n        }\n        return this;\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this._clock.dispose();\n        writable(this, \"bpm\");\n        this._timeline.dispose();\n        this._repeatedEvents.dispose();\n        return this;\n    }\n}\nEmitter.mixin(TransportClass);\n//-------------------------------------\n// \tINITIALIZATION\n//-------------------------------------\nonContextInit((context) => {\n    context.transport = new TransportClass({ context });\n});\nonContextClose((context) => {\n    context.transport.dispose();\n});\n//# sourceMappingURL=Transport.js.map","import { Volume } from \"../component/channel/Volume.js\";\nimport \"../core/context/Destination.js\";\nimport \"../core/clock/Transport.js\";\nimport { ToneAudioNode, } from \"../core/context/ToneAudioNode.js\";\nimport { defaultArg } from \"../core/util/Defaults.js\";\nimport { noOp, readOnly } from \"../core/util/Interface.js\";\nimport { StateTimeline, } from \"../core/util/StateTimeline.js\";\nimport { isDefined, isUndef } from \"../core/util/TypeCheck.js\";\nimport { assert, assertContextRunning } from \"../core/util/Debug.js\";\nimport { GT } from \"../core/util/Math.js\";\n/**\n * Base class for sources.\n * start/stop of this.context.transport.\n *\n * ```\n * // Multiple state change events can be chained together,\n * // but must be set in the correct order and with ascending times\n * // OK\n * state.start().stop(\"+0.2\");\n * // OK\n * state.start().stop(\"+0.2\").start(\"+0.4\").stop(\"+0.7\")\n * // BAD\n * state.stop(\"+0.2\").start();\n * // BAD\n * state.start(\"+0.3\").stop(\"+0.2\");\n * ```\n */\nexport class Source extends ToneAudioNode {\n    constructor(options) {\n        super(options);\n        /**\n         * Sources have no inputs\n         */\n        this.input = undefined;\n        /**\n         * Keep track of the scheduled state.\n         */\n        this._state = new StateTimeline(\"stopped\");\n        /**\n         * The synced `start` callback function from the transport\n         */\n        this._synced = false;\n        /**\n         * Keep track of all of the scheduled event ids\n         */\n        this._scheduled = [];\n        /**\n         * Placeholder functions for syncing/unsyncing to transport\n         */\n        this._syncedStart = noOp;\n        this._syncedStop = noOp;\n        this._state.memory = 100;\n        this._state.increasing = true;\n        this._volume = this.output = new Volume({\n            context: this.context,\n            mute: options.mute,\n            volume: options.volume,\n        });\n        this.volume = this._volume.volume;\n        readOnly(this, \"volume\");\n        this.onstop = options.onstop;\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            mute: false,\n            onstop: noOp,\n            volume: 0,\n        });\n    }\n    /**\n     * Returns the playback state of the source, either \"started\" or \"stopped\".\n     * @example\n     * const player = new Tone.Player(\"https://tonejs.github.io/audio/berklee/ahntone_c3.mp3\", () => {\n     * \tplayer.start();\n     * \tconsole.log(player.state);\n     * }).toDestination();\n     */\n    get state() {\n        if (this._synced) {\n            if (this.context.transport.state === \"started\") {\n                return this._state.getValueAtTime(this.context.transport.seconds);\n            }\n            else {\n                return \"stopped\";\n            }\n        }\n        else {\n            return this._state.getValueAtTime(this.now());\n        }\n    }\n    /**\n     * Mute the output.\n     * @example\n     * const osc = new Tone.Oscillator().toDestination().start();\n     * // mute the output\n     * osc.mute = true;\n     */\n    get mute() {\n        return this._volume.mute;\n    }\n    set mute(mute) {\n        this._volume.mute = mute;\n    }\n    /**\n     * Ensure that the scheduled time is not before the current time.\n     * Should only be used when scheduled unsynced.\n     */\n    _clampToCurrentTime(time) {\n        if (this._synced) {\n            return time;\n        }\n        else {\n            return Math.max(time, this.context.currentTime);\n        }\n    }\n    /**\n     * Start the source at the specified time. If no time is given,\n     * start the source now.\n     * @param  time When the source should be started.\n     * @example\n     * const source = new Tone.Oscillator().toDestination();\n     * source.start(\"+0.5\"); // starts the source 0.5 seconds from now\n     */\n    start(time, offset, duration) {\n        let computedTime = isUndef(time) && this._synced\n            ? this.context.transport.seconds\n            : this.toSeconds(time);\n        computedTime = this._clampToCurrentTime(computedTime);\n        // if it's started, stop it and restart it\n        if (!this._synced &&\n            this._state.getValueAtTime(computedTime) === \"started\") {\n            // time should be strictly greater than the previous start time\n            assert(GT(computedTime, this._state.get(computedTime).time), \"Start time must be strictly greater than previous start time\");\n            this._state.cancel(computedTime);\n            this._state.setStateAtTime(\"started\", computedTime);\n            this.log(\"restart\", computedTime);\n            this.restart(computedTime, offset, duration);\n        }\n        else {\n            this.log(\"start\", computedTime);\n            this._state.setStateAtTime(\"started\", computedTime);\n            if (this._synced) {\n                // add the offset time to the event\n                const event = this._state.get(computedTime);\n                if (event) {\n                    event.offset = this.toSeconds(defaultArg(offset, 0));\n                    event.duration = duration\n                        ? this.toSeconds(duration)\n                        : undefined;\n                }\n                const sched = this.context.transport.schedule((t) => {\n                    this._start(t, offset, duration);\n                }, computedTime);\n                this._scheduled.push(sched);\n                // if the transport is already started\n                // and the time is greater than where the transport is\n                if (this.context.transport.state === \"started\" &&\n                    this.context.transport.getSecondsAtTime(this.immediate()) >\n                        computedTime) {\n                    this._syncedStart(this.now(), this.context.transport.seconds);\n                }\n            }\n            else {\n                assertContextRunning(this.context);\n                this._start(computedTime, offset, duration);\n            }\n        }\n        return this;\n    }\n    /**\n     * Stop the source at the specified time. If no time is given,\n     * stop the source now.\n     * @param  time When the source should be stopped.\n     * @example\n     * const source = new Tone.Oscillator().toDestination();\n     * source.start();\n     * source.stop(\"+0.5\"); // stops the source 0.5 seconds from now\n     */\n    stop(time) {\n        let computedTime = isUndef(time) && this._synced\n            ? this.context.transport.seconds\n            : this.toSeconds(time);\n        computedTime = this._clampToCurrentTime(computedTime);\n        if (this._state.getValueAtTime(computedTime) === \"started\" ||\n            isDefined(this._state.getNextState(\"started\", computedTime))) {\n            this.log(\"stop\", computedTime);\n            if (!this._synced) {\n                this._stop(computedTime);\n            }\n            else {\n                const sched = this.context.transport.schedule(this._stop.bind(this), computedTime);\n                this._scheduled.push(sched);\n            }\n            this._state.cancel(computedTime);\n            this._state.setStateAtTime(\"stopped\", computedTime);\n        }\n        return this;\n    }\n    /**\n     * Restart the source.\n     */\n    restart(time, offset, duration) {\n        time = this.toSeconds(time);\n        if (this._state.getValueAtTime(time) === \"started\") {\n            this._state.cancel(time);\n            this._restart(time, offset, duration);\n        }\n        return this;\n    }\n    /**\n     * Sync the source to the Transport so that all subsequent\n     * calls to `start` and `stop` are synced to the TransportTime\n     * instead of the AudioContext time.\n     *\n     * @example\n     * const osc = new Tone.Oscillator().toDestination();\n     * // sync the source so that it plays between 0 and 0.3 on the Transport's timeline\n     * osc.sync().start(0).stop(0.3);\n     * // start the transport.\n     * Tone.Transport.start();\n     * // set it to loop once a second\n     * Tone.Transport.loop = true;\n     * Tone.Transport.loopEnd = 1;\n     */\n    sync() {\n        if (!this._synced) {\n            this._synced = true;\n            this._syncedStart = (time, offset) => {\n                if (GT(offset, 0)) {\n                    // get the playback state at that time\n                    const stateEvent = this._state.get(offset);\n                    // listen for start events which may occur in the middle of the sync'ed time\n                    if (stateEvent &&\n                        stateEvent.state === \"started\" &&\n                        stateEvent.time !== offset) {\n                        // get the offset\n                        const startOffset = offset - this.toSeconds(stateEvent.time);\n                        let duration;\n                        if (stateEvent.duration) {\n                            duration =\n                                this.toSeconds(stateEvent.duration) -\n                                    startOffset;\n                        }\n                        this._start(time, this.toSeconds(stateEvent.offset) + startOffset, duration);\n                    }\n                }\n            };\n            this._syncedStop = (time) => {\n                const seconds = this.context.transport.getSecondsAtTime(Math.max(time - this.sampleTime, 0));\n                if (this._state.getValueAtTime(seconds) === \"started\") {\n                    this._stop(time);\n                }\n            };\n            this.context.transport.on(\"start\", this._syncedStart);\n            this.context.transport.on(\"loopStart\", this._syncedStart);\n            this.context.transport.on(\"stop\", this._syncedStop);\n            this.context.transport.on(\"pause\", this._syncedStop);\n            this.context.transport.on(\"loopEnd\", this._syncedStop);\n        }\n        return this;\n    }\n    /**\n     * Unsync the source to the Transport.\n     * @see {@link sync}\n     */\n    unsync() {\n        if (this._synced) {\n            this.context.transport.off(\"stop\", this._syncedStop);\n            this.context.transport.off(\"pause\", this._syncedStop);\n            this.context.transport.off(\"loopEnd\", this._syncedStop);\n            this.context.transport.off(\"start\", this._syncedStart);\n            this.context.transport.off(\"loopStart\", this._syncedStart);\n        }\n        this._synced = false;\n        // clear all of the scheduled ids\n        this._scheduled.forEach((id) => this.context.transport.clear(id));\n        this._scheduled = [];\n        this._state.cancel(0);\n        // stop it also\n        this._stop(0);\n        return this;\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this.onstop = noOp;\n        this.unsync();\n        this._volume.dispose();\n        this._state.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=Source.js.map","import { connect } from \"../../core/context/ToneAudioNode.js\";\nimport { Param } from \"../../core/context/Param.js\";\nimport { ToneAudioBuffer } from \"../../core/context/ToneAudioBuffer.js\";\nimport { defaultArg, optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { noOp } from \"../../core/util/Interface.js\";\nimport { isDefined } from \"../../core/util/TypeCheck.js\";\nimport { assert } from \"../../core/util/Debug.js\";\nimport { OneShotSource, } from \"../OneShotSource.js\";\nimport { EQ, GTE, LT } from \"../../core/util/Math.js\";\n/**\n * Wrapper around the native BufferSourceNode.\n * @category Source\n */\nexport class ToneBufferSource extends OneShotSource {\n    constructor() {\n        const options = optionsFromArguments(ToneBufferSource.getDefaults(), arguments, [\"url\", \"onload\"]);\n        super(options);\n        this.name = \"ToneBufferSource\";\n        /**\n         * The oscillator\n         */\n        this._source = this.context.createBufferSource();\n        this._internalChannels = [this._source];\n        /**\n         * indicators if the source has started/stopped\n         */\n        this._sourceStarted = false;\n        this._sourceStopped = false;\n        connect(this._source, this._gainNode);\n        this._source.onended = () => this._stopSource();\n        /**\n         * The playbackRate of the buffer\n         */\n        this.playbackRate = new Param({\n            context: this.context,\n            param: this._source.playbackRate,\n            units: \"positive\",\n            value: options.playbackRate,\n        });\n        // set some values initially\n        this.loop = options.loop;\n        this.loopStart = options.loopStart;\n        this.loopEnd = options.loopEnd;\n        this._buffer = new ToneAudioBuffer(options.url, options.onload, options.onerror);\n        this._internalChannels.push(this._source);\n    }\n    static getDefaults() {\n        return Object.assign(OneShotSource.getDefaults(), {\n            url: new ToneAudioBuffer(),\n            loop: false,\n            loopEnd: 0,\n            loopStart: 0,\n            onload: noOp,\n            onerror: noOp,\n            playbackRate: 1,\n        });\n    }\n    /**\n     * The fadeIn time of the amplitude envelope.\n     */\n    get fadeIn() {\n        return this._fadeIn;\n    }\n    set fadeIn(t) {\n        this._fadeIn = t;\n    }\n    /**\n     * The fadeOut time of the amplitude envelope.\n     */\n    get fadeOut() {\n        return this._fadeOut;\n    }\n    set fadeOut(t) {\n        this._fadeOut = t;\n    }\n    /**\n     * The curve applied to the fades, either \"linear\" or \"exponential\"\n     */\n    get curve() {\n        return this._curve;\n    }\n    set curve(t) {\n        this._curve = t;\n    }\n    /**\n     * Start the buffer\n     * @param  time When the player should start.\n     * @param  offset The offset from the beginning of the sample to start at.\n     * @param  duration How long the sample should play. If no duration is given, it will default to the full length of the sample (minus any offset)\n     * @param  gain  The gain to play the buffer back at.\n     */\n    start(time, offset, duration, gain = 1) {\n        assert(this.buffer.loaded, \"buffer is either not set or not loaded\");\n        const computedTime = this.toSeconds(time);\n        // apply the gain envelope\n        this._startGain(computedTime, gain);\n        // if it's a loop the default offset is the loopstart point\n        if (this.loop) {\n            offset = defaultArg(offset, this.loopStart);\n        }\n        else {\n            // otherwise the default offset is 0\n            offset = defaultArg(offset, 0);\n        }\n        // make sure the offset is not less than 0\n        let computedOffset = Math.max(this.toSeconds(offset), 0);\n        // start the buffer source\n        if (this.loop) {\n            // modify the offset if it's greater than the loop time\n            const loopEnd = this.toSeconds(this.loopEnd) || this.buffer.duration;\n            const loopStart = this.toSeconds(this.loopStart);\n            const loopDuration = loopEnd - loopStart;\n            // move the offset back\n            if (GTE(computedOffset, loopEnd)) {\n                computedOffset =\n                    ((computedOffset - loopStart) % loopDuration) + loopStart;\n            }\n            // when the offset is very close to the duration, set it to 0\n            if (EQ(computedOffset, this.buffer.duration)) {\n                computedOffset = 0;\n            }\n        }\n        // this.buffer.loaded would have return false if the AudioBuffer was undefined\n        this._source.buffer = this.buffer.get();\n        this._source.loopEnd =\n            this.toSeconds(this.loopEnd) || this.buffer.duration;\n        if (LT(computedOffset, this.buffer.duration)) {\n            this._sourceStarted = true;\n            this._source.start(computedTime, computedOffset);\n        }\n        // if a duration is given, schedule a stop\n        if (isDefined(duration)) {\n            let computedDur = this.toSeconds(duration);\n            // make sure it's never negative\n            computedDur = Math.max(computedDur, 0);\n            this.stop(computedTime + computedDur);\n        }\n        return this;\n    }\n    _stopSource(time) {\n        if (!this._sourceStopped && this._sourceStarted) {\n            this._sourceStopped = true;\n            this._source.stop(this.toSeconds(time));\n            this._onended();\n        }\n    }\n    /**\n     * If loop is true, the loop will start at this position.\n     */\n    get loopStart() {\n        return this._source.loopStart;\n    }\n    set loopStart(loopStart) {\n        this._source.loopStart = this.toSeconds(loopStart);\n    }\n    /**\n     * If loop is true, the loop will end at this position.\n     */\n    get loopEnd() {\n        return this._source.loopEnd;\n    }\n    set loopEnd(loopEnd) {\n        this._source.loopEnd = this.toSeconds(loopEnd);\n    }\n    /**\n     * The audio buffer belonging to the player.\n     */\n    get buffer() {\n        return this._buffer;\n    }\n    set buffer(buffer) {\n        this._buffer.set(buffer);\n    }\n    /**\n     * If the buffer should loop once it's over.\n     */\n    get loop() {\n        return this._source.loop;\n    }\n    set loop(loop) {\n        this._source.loop = loop;\n        if (this._sourceStarted) {\n            this.cancelStop();\n        }\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this._source.onended = null;\n        this._source.disconnect();\n        this._buffer.dispose();\n        this.playbackRate.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=ToneBufferSource.js.map","import { __awaiter } from \"tslib\";\nimport { OfflineContext } from \"../../core/context/OfflineContext.js\";\n/**\n * Render a segment of the oscillator to an offline context and return the results as an array\n */\nexport function generateWaveform(instance, length) {\n    return __awaiter(this, void 0, void 0, function* () {\n        const duration = length / instance.context.sampleRate;\n        const context = new OfflineContext(1, duration, instance.context.sampleRate);\n        const clone = new instance.constructor(Object.assign(instance.get(), {\n            // should do 2 iterations\n            frequency: 2 / duration,\n            // zero out the detune\n            detune: 0,\n            context,\n        })).toDestination();\n        clone.start(0);\n        const buffer = yield context.render();\n        return buffer.getChannelData(0);\n    });\n}\n//# sourceMappingURL=OscillatorInterface.js.map","import { connect } from \"../../core/context/ToneAudioNode.js\";\nimport { Param } from \"../../core/context/Param.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { OneShotSource } from \"../OneShotSource.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\n/**\n * Wrapper around the native fire-and-forget OscillatorNode.\n * Adds the ability to reschedule the stop method.\n * ***{@link Oscillator} is better for most use-cases***\n * @category Source\n */\nexport class ToneOscillatorNode extends OneShotSource {\n    constructor() {\n        const options = optionsFromArguments(ToneOscillatorNode.getDefaults(), arguments, [\"frequency\", \"type\"]);\n        super(options);\n        this.name = \"ToneOscillatorNode\";\n        /**\n         * The oscillator\n         */\n        this._oscillator = this.context.createOscillator();\n        this._internalChannels = [this._oscillator];\n        connect(this._oscillator, this._gainNode);\n        this.type = options.type;\n        this.frequency = new Param({\n            context: this.context,\n            param: this._oscillator.frequency,\n            units: \"frequency\",\n            value: options.frequency,\n        });\n        this.detune = new Param({\n            context: this.context,\n            param: this._oscillator.detune,\n            units: \"cents\",\n            value: options.detune,\n        });\n        readOnly(this, [\"frequency\", \"detune\"]);\n    }\n    static getDefaults() {\n        return Object.assign(OneShotSource.getDefaults(), {\n            detune: 0,\n            frequency: 440,\n            type: \"sine\",\n        });\n    }\n    /**\n     * Start the oscillator node at the given time\n     * @param  time When to start the oscillator\n     */\n    start(time) {\n        const computedTime = this.toSeconds(time);\n        this.log(\"start\", computedTime);\n        this._startGain(computedTime);\n        this._oscillator.start(computedTime);\n        return this;\n    }\n    _stopSource(time) {\n        this._oscillator.stop(time);\n    }\n    /**\n     * Sets an arbitrary custom periodic waveform given a PeriodicWave.\n     * @param  periodicWave PeriodicWave should be created with context.createPeriodicWave\n     */\n    setPeriodicWave(periodicWave) {\n        this._oscillator.setPeriodicWave(periodicWave);\n        return this;\n    }\n    /**\n     * The oscillator type. Either 'sine', 'sawtooth', 'square', or 'triangle'\n     */\n    get type() {\n        return this._oscillator.type;\n    }\n    set type(type) {\n        this._oscillator.type = type;\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        if (this.state === \"started\") {\n            this.stop();\n        }\n        this._oscillator.disconnect();\n        this.frequency.dispose();\n        this.detune.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=ToneOscillatorNode.js.map","import { __awaiter } from \"tslib\";\nimport { deepEquals, optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\nimport { isDefined } from \"../../core/util/TypeCheck.js\";\nimport { Signal } from \"../../signal/Signal.js\";\nimport { Source } from \"../Source.js\";\nimport { generateWaveform, } from \"./OscillatorInterface.js\";\nimport { ToneOscillatorNode } from \"./ToneOscillatorNode.js\";\nimport { assertRange } from \"../../core/util/Debug.js\";\nimport { clamp } from \"../../core/util/Math.js\";\n/**\n * Oscillator supports a number of features including\n * phase rotation, multiple oscillator types (see Oscillator.type),\n * and Transport syncing (see Oscillator.syncFrequency).\n *\n * @example\n * // make and start a 440hz sine tone\n * const osc = new Tone.Oscillator(440, \"sine\").toDestination().start();\n * @category Source\n */\nexport class Oscillator extends Source {\n    constructor() {\n        const options = optionsFromArguments(Oscillator.getDefaults(), arguments, [\"frequency\", \"type\"]);\n        super(options);\n        this.name = \"Oscillator\";\n        /**\n         * the main oscillator\n         */\n        this._oscillator = null;\n        this.frequency = new Signal({\n            context: this.context,\n            units: \"frequency\",\n            value: options.frequency,\n        });\n        readOnly(this, \"frequency\");\n        this.detune = new Signal({\n            context: this.context,\n            units: \"cents\",\n            value: options.detune,\n        });\n        readOnly(this, \"detune\");\n        this._partials = options.partials;\n        this._partialCount = options.partialCount;\n        this._type = options.type;\n        if (options.partialCount && options.type !== \"custom\") {\n            this._type = (this.baseType +\n                options.partialCount.toString());\n        }\n        this.phase = options.phase;\n    }\n    static getDefaults() {\n        return Object.assign(Source.getDefaults(), {\n            detune: 0,\n            frequency: 440,\n            partialCount: 0,\n            partials: [],\n            phase: 0,\n            type: \"sine\",\n        });\n    }\n    /**\n     * start the oscillator\n     */\n    _start(time) {\n        const computedTime = this.toSeconds(time);\n        // new oscillator with previous values\n        const oscillator = new ToneOscillatorNode({\n            context: this.context,\n            onended: () => this.onstop(this),\n        });\n        this._oscillator = oscillator;\n        if (this._wave) {\n            this._oscillator.setPeriodicWave(this._wave);\n        }\n        else {\n            this._oscillator.type = this._type;\n        }\n        // connect the control signal to the oscillator frequency & detune\n        this._oscillator.connect(this.output);\n        this.frequency.connect(this._oscillator.frequency);\n        this.detune.connect(this._oscillator.detune);\n        // start the oscillator\n        this._oscillator.start(computedTime);\n    }\n    /**\n     * stop the oscillator\n     */\n    _stop(time) {\n        const computedTime = this.toSeconds(time);\n        if (this._oscillator) {\n            this._oscillator.stop(computedTime);\n        }\n    }\n    /**\n     * Restart the oscillator. Does not stop the oscillator, but instead\n     * just cancels any scheduled 'stop' from being invoked.\n     */\n    _restart(time) {\n        const computedTime = this.toSeconds(time);\n        this.log(\"restart\", computedTime);\n        if (this._oscillator) {\n            this._oscillator.cancelStop();\n        }\n        this._state.cancel(computedTime);\n        return this;\n    }\n    /**\n     * Sync the signal to the Transport's bpm. Any changes to the transports bpm,\n     * will also affect the oscillators frequency.\n     * @example\n     * const osc = new Tone.Oscillator().toDestination().start();\n     * osc.frequency.value = 440;\n     * // the ratio between the bpm and the frequency will be maintained\n     * osc.syncFrequency();\n     * // double the tempo\n     * Tone.Transport.bpm.value *= 2;\n     * // the frequency of the oscillator is doubled to 880\n     */\n    syncFrequency() {\n        this.context.transport.syncSignal(this.frequency);\n        return this;\n    }\n    /**\n     * Unsync the oscillator's frequency from the Transport.\n     * @see {@link syncFrequency}\n     */\n    unsyncFrequency() {\n        this.context.transport.unsyncSignal(this.frequency);\n        return this;\n    }\n    /**\n     * Get a cached periodic wave. Avoids having to recompute\n     * the oscillator values when they have already been computed\n     * with the same values.\n     */\n    _getCachedPeriodicWave() {\n        if (this._type === \"custom\") {\n            const oscProps = Oscillator._periodicWaveCache.find((description) => {\n                return (description.phase === this._phase &&\n                    deepEquals(description.partials, this._partials));\n            });\n            return oscProps;\n        }\n        else {\n            const oscProps = Oscillator._periodicWaveCache.find((description) => {\n                return (description.type === this._type &&\n                    description.phase === this._phase);\n            });\n            this._partialCount = oscProps\n                ? oscProps.partialCount\n                : this._partialCount;\n            return oscProps;\n        }\n    }\n    get type() {\n        return this._type;\n    }\n    set type(type) {\n        this._type = type;\n        const isBasicType = [\"sine\", \"square\", \"sawtooth\", \"triangle\"].indexOf(type) !== -1;\n        if (this._phase === 0 && isBasicType) {\n            this._wave = undefined;\n            this._partialCount = 0;\n            // just go with the basic approach\n            if (this._oscillator !== null) {\n                // already tested that it's a basic type\n                this._oscillator.type = type;\n            }\n        }\n        else {\n            // first check if the value is cached\n            const cache = this._getCachedPeriodicWave();\n            if (isDefined(cache)) {\n                const { partials, wave } = cache;\n                this._wave = wave;\n                this._partials = partials;\n                if (this._oscillator !== null) {\n                    this._oscillator.setPeriodicWave(this._wave);\n                }\n            }\n            else {\n                const [real, imag] = this._getRealImaginary(type, this._phase);\n                const periodicWave = this.context.createPeriodicWave(real, imag);\n                this._wave = periodicWave;\n                if (this._oscillator !== null) {\n                    this._oscillator.setPeriodicWave(this._wave);\n                }\n                // set the cache\n                Oscillator._periodicWaveCache.push({\n                    imag,\n                    partialCount: this._partialCount,\n                    partials: this._partials,\n                    phase: this._phase,\n                    real,\n                    type: this._type,\n                    wave: this._wave,\n                });\n                if (Oscillator._periodicWaveCache.length > 100) {\n                    Oscillator._periodicWaveCache.shift();\n                }\n            }\n        }\n    }\n    get baseType() {\n        return this._type.replace(this.partialCount.toString(), \"\");\n    }\n    set baseType(baseType) {\n        if (this.partialCount &&\n            this._type !== \"custom\" &&\n            baseType !== \"custom\") {\n            this.type = (baseType + this.partialCount);\n        }\n        else {\n            this.type = baseType;\n        }\n    }\n    get partialCount() {\n        return this._partialCount;\n    }\n    set partialCount(p) {\n        assertRange(p, 0);\n        let type = this._type;\n        const partial = /^(sine|triangle|square|sawtooth)(\\d+)$/.exec(this._type);\n        if (partial) {\n            type = partial[1];\n        }\n        if (this._type !== \"custom\") {\n            if (p === 0) {\n                this.type = type;\n            }\n            else {\n                this.type = (type + p.toString());\n            }\n        }\n        else {\n            // extend or shorten the partials array\n            const fullPartials = new Float32Array(p);\n            // copy over the partials array\n            this._partials.forEach((v, i) => (fullPartials[i] = v));\n            this._partials = Array.from(fullPartials);\n            this.type = this._type;\n        }\n    }\n    /**\n     * Returns the real and imaginary components based\n     * on the oscillator type.\n     * @returns [real: Float32Array, imaginary: Float32Array]\n     */\n    _getRealImaginary(type, phase) {\n        const fftSize = 4096;\n        let periodicWaveSize = fftSize / 2;\n        const real = new Float32Array(periodicWaveSize);\n        const imag = new Float32Array(periodicWaveSize);\n        let partialCount = 1;\n        if (type === \"custom\") {\n            partialCount = this._partials.length + 1;\n            this._partialCount = this._partials.length;\n            periodicWaveSize = partialCount;\n            // if the partial count is 0, don't bother doing any computation\n            if (this._partials.length === 0) {\n                return [real, imag];\n            }\n        }\n        else {\n            const partial = /^(sine|triangle|square|sawtooth)(\\d+)$/.exec(type);\n            if (partial) {\n                partialCount = parseInt(partial[2], 10) + 1;\n                this._partialCount = parseInt(partial[2], 10);\n                type = partial[1];\n                partialCount = Math.max(partialCount, 2);\n                periodicWaveSize = partialCount;\n            }\n            else {\n                this._partialCount = 0;\n            }\n            this._partials = [];\n        }\n        for (let n = 1; n < periodicWaveSize; ++n) {\n            const piFactor = 2 / (n * Math.PI);\n            let b;\n            switch (type) {\n                case \"sine\":\n                    b = n <= partialCount ? 1 : 0;\n                    this._partials[n - 1] = b;\n                    break;\n                case \"square\":\n                    b = n & 1 ? 2 * piFactor : 0;\n                    this._partials[n - 1] = b;\n                    break;\n                case \"sawtooth\":\n                    b = piFactor * (n & 1 ? 1 : -1);\n                    this._partials[n - 1] = b;\n                    break;\n                case \"triangle\":\n                    if (n & 1) {\n                        b =\n                            2 *\n                                (piFactor * piFactor) *\n                                (((n - 1) >> 1) & 1 ? -1 : 1);\n                    }\n                    else {\n                        b = 0;\n                    }\n                    this._partials[n - 1] = b;\n                    break;\n                case \"custom\":\n                    b = this._partials[n - 1];\n                    break;\n                default:\n                    throw new TypeError(\"Oscillator: invalid type: \" + type);\n            }\n            if (b !== 0) {\n                real[n] = -b * Math.sin(phase * n);\n                imag[n] = b * Math.cos(phase * n);\n            }\n            else {\n                real[n] = 0;\n                imag[n] = 0;\n            }\n        }\n        return [real, imag];\n    }\n    /**\n     * Compute the inverse FFT for a given phase.\n     */\n    _inverseFFT(real, imag, phase) {\n        let sum = 0;\n        const len = real.length;\n        for (let i = 0; i < len; i++) {\n            sum +=\n                real[i] * Math.cos(i * phase) + imag[i] * Math.sin(i * phase);\n        }\n        return sum;\n    }\n    /**\n     * Returns the initial value of the oscillator when stopped.\n     * E.g. a \"sine\" oscillator with phase = 90 would return an initial value of -1.\n     */\n    getInitialValue() {\n        const [real, imag] = this._getRealImaginary(this._type, 0);\n        let maxValue = 0;\n        const twoPi = Math.PI * 2;\n        const testPositions = 32;\n        // check for peaks in 16 places\n        for (let i = 0; i < testPositions; i++) {\n            maxValue = Math.max(this._inverseFFT(real, imag, (i / testPositions) * twoPi), maxValue);\n        }\n        return clamp(-this._inverseFFT(real, imag, this._phase) / maxValue, -1, 1);\n    }\n    get partials() {\n        return this._partials.slice(0, this.partialCount);\n    }\n    set partials(partials) {\n        this._partials = partials;\n        this._partialCount = this._partials.length;\n        if (partials.length) {\n            this.type = \"custom\";\n        }\n    }\n    get phase() {\n        return this._phase * (180 / Math.PI);\n    }\n    set phase(phase) {\n        this._phase = (phase * Math.PI) / 180;\n        // reset the type\n        this.type = this._type;\n    }\n    asArray() {\n        return __awaiter(this, arguments, void 0, function* (length = 1024) {\n            return generateWaveform(this, length);\n        });\n    }\n    dispose() {\n        super.dispose();\n        if (this._oscillator !== null) {\n            this._oscillator.dispose();\n        }\n        this._wave = undefined;\n        this.frequency.dispose();\n        this.detune.dispose();\n        return this;\n    }\n}\n/**\n * Cache the periodic waves to avoid having to redo computations\n */\nOscillator._periodicWaveCache = [];\n//# sourceMappingURL=Oscillator.js.map","import { SignalOperator } from \"./SignalOperator.js\";\nimport { WaveShaper } from \"./WaveShaper.js\";\n/**\n * AudioToGain converts an input in AudioRange [-1,1] to NormalRange [0,1].\n * @see {@link GainToAudio}.\n * @category Signal\n */\nexport class AudioToGain extends SignalOperator {\n    constructor() {\n        super(...arguments);\n        this.name = \"AudioToGain\";\n        /**\n         * The node which converts the audio ranges\n         */\n        this._norm = new WaveShaper({\n            context: this.context,\n            mapping: (x) => (x + 1) / 2,\n        });\n        /**\n         * The AudioRange input [-1, 1]\n         */\n        this.input = this._norm;\n        /**\n         * The GainRange output [0, 1]\n         */\n        this.output = this._norm;\n    }\n    /**\n     * clean up\n     */\n    dispose() {\n        super.dispose();\n        this._norm.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=AudioToGain.js.map","import { Gain } from \"../core/context/Gain.js\";\nimport { optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { Signal } from \"./Signal.js\";\n/**\n * Multiply two incoming signals. Or, if a number is given in the constructor,\n * multiplies the incoming signal by that value.\n *\n * @example\n * // multiply two signals\n * const mult = new Tone.Multiply();\n * const sigA = new Tone.Signal(3);\n * const sigB = new Tone.Signal(4);\n * sigA.connect(mult);\n * sigB.connect(mult.factor);\n * // output of mult is 12.\n * @example\n * // multiply a signal and a number\n * const mult = new Tone.Multiply(10);\n * const sig = new Tone.Signal(2).connect(mult);\n * // the output of mult is 20.\n * @category Signal\n */\nexport class Multiply extends Signal {\n    constructor() {\n        const options = optionsFromArguments(Multiply.getDefaults(), arguments, [\"value\"]);\n        super(options);\n        this.name = \"Multiply\";\n        /**\n         * Indicates if the value should be overridden on connection\n         */\n        this.override = false;\n        this._mult =\n            this.input =\n                this.output =\n                    new Gain({\n                        context: this.context,\n                        minValue: options.minValue,\n                        maxValue: options.maxValue,\n                    });\n        this.factor = this._param = this._mult\n            .gain;\n        this.factor.setValueAtTime(options.value, 0);\n    }\n    static getDefaults() {\n        return Object.assign(Signal.getDefaults(), {\n            value: 0,\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._mult.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=Multiply.js.map","import { __awaiter } from \"tslib\";\nimport { Gain } from \"../../core/context/Gain.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\nimport { AudioToGain } from \"../../signal/AudioToGain.js\";\nimport { Multiply } from \"../../signal/Multiply.js\";\nimport { Source } from \"../Source.js\";\nimport { Oscillator } from \"./Oscillator.js\";\nimport { generateWaveform, } from \"./OscillatorInterface.js\";\n/**\n * An amplitude modulated oscillator node. It is implemented with\n * two oscillators, one which modulators the other's amplitude\n * through a gain node.\n * ```\n *    +-------------+       +----------+\n *    | Carrier Osc +>------> GainNode |\n *    +-------------+       |          +--->Output\n *                      +---> gain     |\n * +---------------+    |   +----------+\n * | Modulator Osc +>---+\n * +---------------+\n * ```\n * @example\n * return Tone.Offline(() => {\n * \tconst amOsc = new Tone.AMOscillator(30, \"sine\", \"square\").toDestination().start();\n * }, 0.2, 1);\n * @category Source\n */\nexport class AMOscillator extends Source {\n    constructor() {\n        const options = optionsFromArguments(AMOscillator.getDefaults(), arguments, [\"frequency\", \"type\", \"modulationType\"]);\n        super(options);\n        this.name = \"AMOscillator\";\n        /**\n         * convert the -1,1 output to 0,1\n         */\n        this._modulationScale = new AudioToGain({ context: this.context });\n        /**\n         * the node where the modulation happens\n         */\n        this._modulationNode = new Gain({\n            context: this.context,\n        });\n        this._carrier = new Oscillator({\n            context: this.context,\n            detune: options.detune,\n            frequency: options.frequency,\n            onstop: () => this.onstop(this),\n            phase: options.phase,\n            type: options.type,\n        });\n        (this.frequency = this._carrier.frequency),\n            (this.detune = this._carrier.detune);\n        this._modulator = new Oscillator({\n            context: this.context,\n            phase: options.phase,\n            type: options.modulationType,\n        });\n        this.harmonicity = new Multiply({\n            context: this.context,\n            units: \"positive\",\n            value: options.harmonicity,\n        });\n        // connections\n        this.frequency.chain(this.harmonicity, this._modulator.frequency);\n        this._modulator.chain(this._modulationScale, this._modulationNode.gain);\n        this._carrier.chain(this._modulationNode, this.output);\n        readOnly(this, [\"frequency\", \"detune\", \"harmonicity\"]);\n    }\n    static getDefaults() {\n        return Object.assign(Oscillator.getDefaults(), {\n            harmonicity: 1,\n            modulationType: \"square\",\n        });\n    }\n    /**\n     * start the oscillator\n     */\n    _start(time) {\n        this._modulator.start(time);\n        this._carrier.start(time);\n    }\n    /**\n     * stop the oscillator\n     */\n    _stop(time) {\n        this._modulator.stop(time);\n        this._carrier.stop(time);\n    }\n    _restart(time) {\n        this._modulator.restart(time);\n        this._carrier.restart(time);\n    }\n    /**\n     * The type of the carrier oscillator\n     */\n    get type() {\n        return this._carrier.type;\n    }\n    set type(type) {\n        this._carrier.type = type;\n    }\n    get baseType() {\n        return this._carrier.baseType;\n    }\n    set baseType(baseType) {\n        this._carrier.baseType = baseType;\n    }\n    get partialCount() {\n        return this._carrier.partialCount;\n    }\n    set partialCount(partialCount) {\n        this._carrier.partialCount = partialCount;\n    }\n    /**\n     * The type of the modulator oscillator\n     */\n    get modulationType() {\n        return this._modulator.type;\n    }\n    set modulationType(type) {\n        this._modulator.type = type;\n    }\n    get phase() {\n        return this._carrier.phase;\n    }\n    set phase(phase) {\n        this._carrier.phase = phase;\n        this._modulator.phase = phase;\n    }\n    get partials() {\n        return this._carrier.partials;\n    }\n    set partials(partials) {\n        this._carrier.partials = partials;\n    }\n    asArray() {\n        return __awaiter(this, arguments, void 0, function* (length = 1024) {\n            return generateWaveform(this, length);\n        });\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this.frequency.dispose();\n        this.detune.dispose();\n        this.harmonicity.dispose();\n        this._carrier.dispose();\n        this._modulator.dispose();\n        this._modulationNode.dispose();\n        this._modulationScale.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=AMOscillator.js.map","import { __awaiter } from \"tslib\";\nimport { Gain } from \"../../core/context/Gain.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\nimport { Multiply } from \"../../signal/Multiply.js\";\nimport { Signal } from \"../../signal/Signal.js\";\nimport { Source } from \"../Source.js\";\nimport { Oscillator } from \"./Oscillator.js\";\nimport { generateWaveform, } from \"./OscillatorInterface.js\";\n/**\n * FMOscillator implements a frequency modulation synthesis\n * ```\n *                                              +-------------+\n * +---------------+        +-------------+     | Carrier Osc |\n * | Modulator Osc +>-------> GainNode    |     |             +--->Output\n * +---------------+        |             +>----> frequency   |\n *                       +--> gain        |     +-------------+\n *                       |  +-------------+\n * +-----------------+   |\n * | modulationIndex +>--+\n * +-----------------+\n * ```\n *\n * @example\n * return Tone.Offline(() => {\n * \tconst fmOsc = new Tone.FMOscillator({\n * \t\tfrequency: 200,\n * \t\ttype: \"square\",\n * \t\tmodulationType: \"triangle\",\n * \t\tharmonicity: 0.2,\n * \t\tmodulationIndex: 3\n * \t}).toDestination().start();\n * }, 0.1, 1);\n * @category Source\n */\nexport class FMOscillator extends Source {\n    constructor() {\n        const options = optionsFromArguments(FMOscillator.getDefaults(), arguments, [\"frequency\", \"type\", \"modulationType\"]);\n        super(options);\n        this.name = \"FMOscillator\";\n        /**\n         * the node where the modulation happens\n         */\n        this._modulationNode = new Gain({\n            context: this.context,\n            gain: 0,\n        });\n        this._carrier = new Oscillator({\n            context: this.context,\n            detune: options.detune,\n            frequency: 0,\n            onstop: () => this.onstop(this),\n            phase: options.phase,\n            type: options.type,\n        });\n        this.detune = this._carrier.detune;\n        this.frequency = new Signal({\n            context: this.context,\n            units: \"frequency\",\n            value: options.frequency,\n        });\n        this._modulator = new Oscillator({\n            context: this.context,\n            phase: options.phase,\n            type: options.modulationType,\n        });\n        this.harmonicity = new Multiply({\n            context: this.context,\n            units: \"positive\",\n            value: options.harmonicity,\n        });\n        this.modulationIndex = new Multiply({\n            context: this.context,\n            units: \"positive\",\n            value: options.modulationIndex,\n        });\n        // connections\n        this.frequency.connect(this._carrier.frequency);\n        this.frequency.chain(this.harmonicity, this._modulator.frequency);\n        this.frequency.chain(this.modulationIndex, this._modulationNode);\n        this._modulator.connect(this._modulationNode.gain);\n        this._modulationNode.connect(this._carrier.frequency);\n        this._carrier.connect(this.output);\n        this.detune.connect(this._modulator.detune);\n        readOnly(this, [\n            \"modulationIndex\",\n            \"frequency\",\n            \"detune\",\n            \"harmonicity\",\n        ]);\n    }\n    static getDefaults() {\n        return Object.assign(Oscillator.getDefaults(), {\n            harmonicity: 1,\n            modulationIndex: 2,\n            modulationType: \"square\",\n        });\n    }\n    /**\n     * start the oscillator\n     */\n    _start(time) {\n        this._modulator.start(time);\n        this._carrier.start(time);\n    }\n    /**\n     * stop the oscillator\n     */\n    _stop(time) {\n        this._modulator.stop(time);\n        this._carrier.stop(time);\n    }\n    _restart(time) {\n        this._modulator.restart(time);\n        this._carrier.restart(time);\n        return this;\n    }\n    get type() {\n        return this._carrier.type;\n    }\n    set type(type) {\n        this._carrier.type = type;\n    }\n    get baseType() {\n        return this._carrier.baseType;\n    }\n    set baseType(baseType) {\n        this._carrier.baseType = baseType;\n    }\n    get partialCount() {\n        return this._carrier.partialCount;\n    }\n    set partialCount(partialCount) {\n        this._carrier.partialCount = partialCount;\n    }\n    /**\n     * The type of the modulator oscillator\n     */\n    get modulationType() {\n        return this._modulator.type;\n    }\n    set modulationType(type) {\n        this._modulator.type = type;\n    }\n    get phase() {\n        return this._carrier.phase;\n    }\n    set phase(phase) {\n        this._carrier.phase = phase;\n        this._modulator.phase = phase;\n    }\n    get partials() {\n        return this._carrier.partials;\n    }\n    set partials(partials) {\n        this._carrier.partials = partials;\n    }\n    asArray() {\n        return __awaiter(this, arguments, void 0, function* (length = 1024) {\n            return generateWaveform(this, length);\n        });\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this.frequency.dispose();\n        this.harmonicity.dispose();\n        this._carrier.dispose();\n        this._modulator.dispose();\n        this._modulationNode.dispose();\n        this.modulationIndex.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=FMOscillator.js.map","import { __awaiter } from \"tslib\";\nimport { Gain } from \"../../core/context/Gain.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\nimport { Signal } from \"../../signal/Signal.js\";\nimport { WaveShaper } from \"../../signal/WaveShaper.js\";\nimport { Source } from \"../Source.js\";\nimport { Oscillator } from \"./Oscillator.js\";\nimport { generateWaveform, } from \"./OscillatorInterface.js\";\n/**\n * PulseOscillator is an oscillator with control over pulse width,\n * also known as the duty cycle. At 50% duty cycle (width = 0) the wave is\n * a square wave.\n * [Read more](https://wigglewave.wordpress.com/2014/08/16/pulse-waveforms-and-harmonics/).\n * ```\n *    width = -0.25        width = 0.0          width = 0.25\n *\n *   +-----+            +-------+       +    +-------+     +-+\n *   |     |            |       |       |            |     |\n *   |     |            |       |       |            |     |\n * +-+     +-------+    +       +-------+            +-----+\n *\n *\n *    width = -0.5                              width = 0.5\n *\n *     +---+                                 +-------+   +---+\n *     |   |                                         |   |\n *     |   |                                         |   |\n * +---+   +-------+                                 +---+\n *\n *\n *    width = -0.75                             width = 0.75\n *\n *       +-+                                 +-------+ +-----+\n *       | |                                         | |\n *       | |                                         | |\n * +-----+ +-------+                                 +-+\n * ```\n * @example\n * return Tone.Offline(() => {\n * \tconst pulse = new Tone.PulseOscillator(50, 0.4).toDestination().start();\n * }, 0.1, 1);\n * @category Source\n */\nexport class PulseOscillator extends Source {\n    constructor() {\n        const options = optionsFromArguments(PulseOscillator.getDefaults(), arguments, [\"frequency\", \"width\"]);\n        super(options);\n        this.name = \"PulseOscillator\";\n        /**\n         * gate the width amount\n         */\n        this._widthGate = new Gain({\n            context: this.context,\n            gain: 0,\n        });\n        /**\n         * Threshold the signal to turn it into a square\n         */\n        this._thresh = new WaveShaper({\n            context: this.context,\n            mapping: (val) => (val <= 0 ? -1 : 1),\n        });\n        this.width = new Signal({\n            context: this.context,\n            units: \"audioRange\",\n            value: options.width,\n        });\n        this._triangle = new Oscillator({\n            context: this.context,\n            detune: options.detune,\n            frequency: options.frequency,\n            onstop: () => this.onstop(this),\n            phase: options.phase,\n            type: \"triangle\",\n        });\n        this.frequency = this._triangle.frequency;\n        this.detune = this._triangle.detune;\n        // connections\n        this._triangle.chain(this._thresh, this.output);\n        this.width.chain(this._widthGate, this._thresh);\n        readOnly(this, [\"width\", \"frequency\", \"detune\"]);\n    }\n    static getDefaults() {\n        return Object.assign(Source.getDefaults(), {\n            detune: 0,\n            frequency: 440,\n            phase: 0,\n            type: \"pulse\",\n            width: 0.2,\n        });\n    }\n    /**\n     * start the oscillator\n     */\n    _start(time) {\n        time = this.toSeconds(time);\n        this._triangle.start(time);\n        this._widthGate.gain.setValueAtTime(1, time);\n    }\n    /**\n     * stop the oscillator\n     */\n    _stop(time) {\n        time = this.toSeconds(time);\n        this._triangle.stop(time);\n        // the width is still connected to the output.\n        // that needs to be stopped also\n        this._widthGate.gain.cancelScheduledValues(time);\n        this._widthGate.gain.setValueAtTime(0, time);\n    }\n    _restart(time) {\n        this._triangle.restart(time);\n        this._widthGate.gain.cancelScheduledValues(time);\n        this._widthGate.gain.setValueAtTime(1, time);\n    }\n    /**\n     * The phase of the oscillator in degrees.\n     */\n    get phase() {\n        return this._triangle.phase;\n    }\n    set phase(phase) {\n        this._triangle.phase = phase;\n    }\n    /**\n     * The type of the oscillator. Always returns \"pulse\".\n     */\n    get type() {\n        return \"pulse\";\n    }\n    /**\n     * The baseType of the oscillator. Always returns \"pulse\".\n     */\n    get baseType() {\n        return \"pulse\";\n    }\n    /**\n     * The partials of the waveform. Cannot set partials for this waveform type\n     */\n    get partials() {\n        return [];\n    }\n    /**\n     * No partials for this waveform type.\n     */\n    get partialCount() {\n        return 0;\n    }\n    /**\n     * *Internal use* The carrier oscillator type is fed through the\n     * waveshaper node to create the pulse. Using different carrier oscillators\n     * changes oscillator's behavior.\n     */\n    set carrierType(type) {\n        this._triangle.type = type;\n    }\n    asArray() {\n        return __awaiter(this, arguments, void 0, function* (length = 1024) {\n            return generateWaveform(this, length);\n        });\n    }\n    /**\n     * Clean up method.\n     */\n    dispose() {\n        super.dispose();\n        this._triangle.dispose();\n        this.width.dispose();\n        this._widthGate.dispose();\n        this._thresh.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=PulseOscillator.js.map","import { __awaiter } from \"tslib\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { noOp, readOnly } from \"../../core/util/Interface.js\";\nimport { Signal } from \"../../signal/Signal.js\";\nimport { Source } from \"../Source.js\";\nimport { Oscillator } from \"./Oscillator.js\";\nimport { generateWaveform, } from \"./OscillatorInterface.js\";\nimport { assertRange } from \"../../core/util/Debug.js\";\n/**\n * FatOscillator is an array of oscillators with detune spread between the oscillators\n * @example\n * const fatOsc = new Tone.FatOscillator(\"Ab3\", \"sawtooth\", 40).toDestination().start();\n * @category Source\n */\nexport class FatOscillator extends Source {\n    constructor() {\n        const options = optionsFromArguments(FatOscillator.getDefaults(), arguments, [\"frequency\", \"type\", \"spread\"]);\n        super(options);\n        this.name = \"FatOscillator\";\n        /**\n         * The array of oscillators\n         */\n        this._oscillators = [];\n        this.frequency = new Signal({\n            context: this.context,\n            units: \"frequency\",\n            value: options.frequency,\n        });\n        this.detune = new Signal({\n            context: this.context,\n            units: \"cents\",\n            value: options.detune,\n        });\n        this._spread = options.spread;\n        this._type = options.type;\n        this._phase = options.phase;\n        this._partials = options.partials;\n        this._partialCount = options.partialCount;\n        // set the count initially\n        this.count = options.count;\n        readOnly(this, [\"frequency\", \"detune\"]);\n    }\n    static getDefaults() {\n        return Object.assign(Oscillator.getDefaults(), {\n            count: 3,\n            spread: 20,\n            type: \"sawtooth\",\n        });\n    }\n    /**\n     * start the oscillator\n     */\n    _start(time) {\n        time = this.toSeconds(time);\n        this._forEach((osc) => osc.start(time));\n    }\n    /**\n     * stop the oscillator\n     */\n    _stop(time) {\n        time = this.toSeconds(time);\n        this._forEach((osc) => osc.stop(time));\n    }\n    _restart(time) {\n        this._forEach((osc) => osc.restart(time));\n    }\n    /**\n     * Iterate over all of the oscillators\n     */\n    _forEach(iterator) {\n        for (let i = 0; i < this._oscillators.length; i++) {\n            iterator(this._oscillators[i], i);\n        }\n    }\n    /**\n     * The type of the oscillator\n     */\n    get type() {\n        return this._type;\n    }\n    set type(type) {\n        this._type = type;\n        this._forEach((osc) => (osc.type = type));\n    }\n    /**\n     * The detune spread between the oscillators. If \"count\" is\n     * set to 3 oscillators and the \"spread\" is set to 40,\n     * the three oscillators would be detuned like this: [-20, 0, 20]\n     * for a total detune spread of 40 cents.\n     * @example\n     * const fatOsc = new Tone.FatOscillator().toDestination().start();\n     * fatOsc.spread = 70;\n     */\n    get spread() {\n        return this._spread;\n    }\n    set spread(spread) {\n        this._spread = spread;\n        if (this._oscillators.length > 1) {\n            const start = -spread / 2;\n            const step = spread / (this._oscillators.length - 1);\n            this._forEach((osc, i) => (osc.detune.value = start + step * i));\n        }\n    }\n    /**\n     * The number of detuned oscillators. Must be an integer greater than 1.\n     * @example\n     * const fatOsc = new Tone.FatOscillator(\"C#3\", \"sawtooth\").toDestination().start();\n     * // use 4 sawtooth oscillators\n     * fatOsc.count = 4;\n     */\n    get count() {\n        return this._oscillators.length;\n    }\n    set count(count) {\n        assertRange(count, 1);\n        if (this._oscillators.length !== count) {\n            // dispose the previous oscillators\n            this._forEach((osc) => osc.dispose());\n            this._oscillators = [];\n            for (let i = 0; i < count; i++) {\n                const osc = new Oscillator({\n                    context: this.context,\n                    volume: -6 - count * 1.1,\n                    type: this._type,\n                    phase: this._phase + (i / count) * 360,\n                    partialCount: this._partialCount,\n                    onstop: i === 0 ? () => this.onstop(this) : noOp,\n                });\n                if (this.type === \"custom\") {\n                    osc.partials = this._partials;\n                }\n                this.frequency.connect(osc.frequency);\n                this.detune.connect(osc.detune);\n                osc.detune.overridden = false;\n                osc.connect(this.output);\n                this._oscillators[i] = osc;\n            }\n            // set the spread\n            this.spread = this._spread;\n            if (this.state === \"started\") {\n                this._forEach((osc) => osc.start());\n            }\n        }\n    }\n    get phase() {\n        return this._phase;\n    }\n    set phase(phase) {\n        this._phase = phase;\n        this._forEach((osc, i) => (osc.phase = this._phase + (i / this.count) * 360));\n    }\n    get baseType() {\n        return this._oscillators[0].baseType;\n    }\n    set baseType(baseType) {\n        this._forEach((osc) => (osc.baseType = baseType));\n        this._type = this._oscillators[0].type;\n    }\n    get partials() {\n        return this._oscillators[0].partials;\n    }\n    set partials(partials) {\n        this._partials = partials;\n        this._partialCount = this._partials.length;\n        if (partials.length) {\n            this._type = \"custom\";\n            this._forEach((osc) => (osc.partials = partials));\n        }\n    }\n    get partialCount() {\n        return this._oscillators[0].partialCount;\n    }\n    set partialCount(partialCount) {\n        this._partialCount = partialCount;\n        this._forEach((osc) => (osc.partialCount = partialCount));\n        this._type = this._oscillators[0].type;\n    }\n    asArray() {\n        return __awaiter(this, arguments, void 0, function* (length = 1024) {\n            return generateWaveform(this, length);\n        });\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this.frequency.dispose();\n        this.detune.dispose();\n        this._forEach((osc) => osc.dispose());\n        return this;\n    }\n}\n//# sourceMappingURL=FatOscillator.js.map","import { __awaiter } from \"tslib\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\nimport { Multiply } from \"../../signal/Multiply.js\";\nimport { Source } from \"../Source.js\";\nimport { Oscillator } from \"./Oscillator.js\";\nimport { generateWaveform, } from \"./OscillatorInterface.js\";\nimport { PulseOscillator } from \"./PulseOscillator.js\";\n/**\n * PWMOscillator modulates the width of a Tone.PulseOscillator\n * at the modulationFrequency. This has the effect of continuously\n * changing the timbre of the oscillator by altering the harmonics\n * generated.\n * @example\n * return Tone.Offline(() => {\n * \tconst pwm = new Tone.PWMOscillator(60, 0.3).toDestination().start();\n * }, 0.1, 1);\n * @category Source\n */\nexport class PWMOscillator extends Source {\n    constructor() {\n        const options = optionsFromArguments(PWMOscillator.getDefaults(), arguments, [\"frequency\", \"modulationFrequency\"]);\n        super(options);\n        this.name = \"PWMOscillator\";\n        this.sourceType = \"pwm\";\n        /**\n         * Scale the oscillator so it doesn't go silent\n         * at the extreme values.\n         */\n        this._scale = new Multiply({\n            context: this.context,\n            value: 2,\n        });\n        this._pulse = new PulseOscillator({\n            context: this.context,\n            frequency: options.modulationFrequency,\n        });\n        // change the pulse oscillator type\n        this._pulse.carrierType = \"sine\";\n        this.modulationFrequency = this._pulse.frequency;\n        this._modulator = new Oscillator({\n            context: this.context,\n            detune: options.detune,\n            frequency: options.frequency,\n            onstop: () => this.onstop(this),\n            phase: options.phase,\n        });\n        this.frequency = this._modulator.frequency;\n        this.detune = this._modulator.detune;\n        // connections\n        this._modulator.chain(this._scale, this._pulse.width);\n        this._pulse.connect(this.output);\n        readOnly(this, [\"modulationFrequency\", \"frequency\", \"detune\"]);\n    }\n    static getDefaults() {\n        return Object.assign(Source.getDefaults(), {\n            detune: 0,\n            frequency: 440,\n            modulationFrequency: 0.4,\n            phase: 0,\n            type: \"pwm\",\n        });\n    }\n    /**\n     * start the oscillator\n     */\n    _start(time) {\n        time = this.toSeconds(time);\n        this._modulator.start(time);\n        this._pulse.start(time);\n    }\n    /**\n     * stop the oscillator\n     */\n    _stop(time) {\n        time = this.toSeconds(time);\n        this._modulator.stop(time);\n        this._pulse.stop(time);\n    }\n    /**\n     * restart the oscillator\n     */\n    _restart(time) {\n        this._modulator.restart(time);\n        this._pulse.restart(time);\n    }\n    /**\n     * The type of the oscillator. Always returns \"pwm\".\n     */\n    get type() {\n        return \"pwm\";\n    }\n    /**\n     * The baseType of the oscillator. Always returns \"pwm\".\n     */\n    get baseType() {\n        return \"pwm\";\n    }\n    /**\n     * The partials of the waveform. Cannot set partials for this waveform type\n     */\n    get partials() {\n        return [];\n    }\n    /**\n     * No partials for this waveform type.\n     */\n    get partialCount() {\n        return 0;\n    }\n    /**\n     * The phase of the oscillator in degrees.\n     */\n    get phase() {\n        return this._modulator.phase;\n    }\n    set phase(phase) {\n        this._modulator.phase = phase;\n    }\n    asArray() {\n        return __awaiter(this, arguments, void 0, function* (length = 1024) {\n            return generateWaveform(this, length);\n        });\n    }\n    /**\n     * Clean up.\n     */\n    dispose() {\n        super.dispose();\n        this._pulse.dispose();\n        this._scale.dispose();\n        this._modulator.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=PWMOscillator.js.map","import { __awaiter } from \"tslib\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\nimport { isNumber, isString } from \"../../core/util/TypeCheck.js\";\nimport { Signal } from \"../../signal/Signal.js\";\nimport { Source } from \"../Source.js\";\nimport { AMOscillator } from \"./AMOscillator.js\";\nimport { FatOscillator } from \"./FatOscillator.js\";\nimport { FMOscillator } from \"./FMOscillator.js\";\nimport { Oscillator } from \"./Oscillator.js\";\nimport { generateWaveform, } from \"./OscillatorInterface.js\";\nimport { PulseOscillator } from \"./PulseOscillator.js\";\nimport { PWMOscillator } from \"./PWMOscillator.js\";\nconst OmniOscillatorSourceMap = {\n    am: AMOscillator,\n    fat: FatOscillator,\n    fm: FMOscillator,\n    oscillator: Oscillator,\n    pulse: PulseOscillator,\n    pwm: PWMOscillator,\n};\n/**\n * OmniOscillator aggregates all of the oscillator types into one.\n * @example\n * return Tone.Offline(() => {\n * \tconst omniOsc = new Tone.OmniOscillator(\"C#4\", \"pwm\").toDestination().start();\n * }, 0.1, 1);\n * @category Source\n */\nexport class OmniOscillator extends Source {\n    constructor() {\n        const options = optionsFromArguments(OmniOscillator.getDefaults(), arguments, [\"frequency\", \"type\"]);\n        super(options);\n        this.name = \"OmniOscillator\";\n        this.frequency = new Signal({\n            context: this.context,\n            units: \"frequency\",\n            value: options.frequency,\n        });\n        this.detune = new Signal({\n            context: this.context,\n            units: \"cents\",\n            value: options.detune,\n        });\n        readOnly(this, [\"frequency\", \"detune\"]);\n        // set the options\n        this.set(options);\n    }\n    static getDefaults() {\n        return Object.assign(Oscillator.getDefaults(), FMOscillator.getDefaults(), AMOscillator.getDefaults(), FatOscillator.getDefaults(), PulseOscillator.getDefaults(), PWMOscillator.getDefaults());\n    }\n    /**\n     * start the oscillator\n     */\n    _start(time) {\n        this._oscillator.start(time);\n    }\n    /**\n     * start the oscillator\n     */\n    _stop(time) {\n        this._oscillator.stop(time);\n    }\n    _restart(time) {\n        this._oscillator.restart(time);\n        return this;\n    }\n    /**\n     * The type of the oscillator. Can be any of the basic types: sine, square, triangle, sawtooth. Or\n     * prefix the basic types with \"fm\", \"am\", or \"fat\" to use the FMOscillator, AMOscillator or FatOscillator\n     * types. The oscillator could also be set to \"pwm\" or \"pulse\". All of the parameters of the\n     * oscillator's class are accessible when the oscillator is set to that type, but throws an error\n     * when it's not.\n     * @example\n     * const omniOsc = new Tone.OmniOscillator().toDestination().start();\n     * omniOsc.type = \"pwm\";\n     * // modulationFrequency is parameter which is available\n     * // only when the type is \"pwm\".\n     * omniOsc.modulationFrequency.value = 0.5;\n     */\n    get type() {\n        let prefix = \"\";\n        if ([\"am\", \"fm\", \"fat\"].some((p) => this._sourceType === p)) {\n            prefix = this._sourceType;\n        }\n        return (prefix + this._oscillator.type);\n    }\n    set type(type) {\n        if (type.substr(0, 2) === \"fm\") {\n            this._createNewOscillator(\"fm\");\n            this._oscillator = this._oscillator;\n            this._oscillator.type = type.substr(2);\n        }\n        else if (type.substr(0, 2) === \"am\") {\n            this._createNewOscillator(\"am\");\n            this._oscillator = this._oscillator;\n            this._oscillator.type = type.substr(2);\n        }\n        else if (type.substr(0, 3) === \"fat\") {\n            this._createNewOscillator(\"fat\");\n            this._oscillator = this._oscillator;\n            this._oscillator.type = type.substr(3);\n        }\n        else if (type === \"pwm\") {\n            this._createNewOscillator(\"pwm\");\n            this._oscillator = this._oscillator;\n        }\n        else if (type === \"pulse\") {\n            this._createNewOscillator(\"pulse\");\n        }\n        else {\n            this._createNewOscillator(\"oscillator\");\n            this._oscillator = this._oscillator;\n            this._oscillator.type = type;\n        }\n    }\n    /**\n     * The value is an empty array when the type is not \"custom\".\n     * This is not available on \"pwm\" and \"pulse\" oscillator types.\n     * @see {@link Oscillator.partials}\n     */\n    get partials() {\n        return this._oscillator.partials;\n    }\n    set partials(partials) {\n        if (!this._getOscType(this._oscillator, \"pulse\") &&\n            !this._getOscType(this._oscillator, \"pwm\")) {\n            this._oscillator.partials = partials;\n        }\n    }\n    get partialCount() {\n        return this._oscillator.partialCount;\n    }\n    set partialCount(partialCount) {\n        if (!this._getOscType(this._oscillator, \"pulse\") &&\n            !this._getOscType(this._oscillator, \"pwm\")) {\n            this._oscillator.partialCount = partialCount;\n        }\n    }\n    set(props) {\n        // make sure the type is set first\n        if (Reflect.has(props, \"type\") && props.type) {\n            this.type = props.type;\n        }\n        // then set the rest\n        super.set(props);\n        return this;\n    }\n    /**\n     * connect the oscillator to the frequency and detune signals\n     */\n    _createNewOscillator(oscType) {\n        if (oscType !== this._sourceType) {\n            this._sourceType = oscType;\n            const OscConstructor = OmniOscillatorSourceMap[oscType];\n            // short delay to avoid clicks on the change\n            const now = this.now();\n            if (this._oscillator) {\n                const oldOsc = this._oscillator;\n                oldOsc.stop(now);\n                // dispose the old one\n                this.context.setTimeout(() => oldOsc.dispose(), this.blockTime);\n            }\n            this._oscillator = new OscConstructor({\n                context: this.context,\n            });\n            this.frequency.connect(this._oscillator.frequency);\n            this.detune.connect(this._oscillator.detune);\n            this._oscillator.connect(this.output);\n            this._oscillator.onstop = () => this.onstop(this);\n            if (this.state === \"started\") {\n                this._oscillator.start(now);\n            }\n        }\n    }\n    get phase() {\n        return this._oscillator.phase;\n    }\n    set phase(phase) {\n        this._oscillator.phase = phase;\n    }\n    /**\n     * The source type of the oscillator.\n     * @example\n     * const omniOsc = new Tone.OmniOscillator(440, \"fmsquare\");\n     * console.log(omniOsc.sourceType); // 'fm'\n     */\n    get sourceType() {\n        return this._sourceType;\n    }\n    set sourceType(sType) {\n        // the basetype defaults to sine\n        let baseType = \"sine\";\n        if (this._oscillator.type !== \"pwm\" &&\n            this._oscillator.type !== \"pulse\") {\n            baseType = this._oscillator.type;\n        }\n        // set the type\n        if (sType === \"fm\") {\n            this.type = (\"fm\" + baseType);\n        }\n        else if (sType === \"am\") {\n            this.type = (\"am\" + baseType);\n        }\n        else if (sType === \"fat\") {\n            this.type = (\"fat\" + baseType);\n        }\n        else if (sType === \"oscillator\") {\n            this.type = baseType;\n        }\n        else if (sType === \"pulse\") {\n            this.type = \"pulse\";\n        }\n        else if (sType === \"pwm\") {\n            this.type = \"pwm\";\n        }\n    }\n    _getOscType(osc, sourceType) {\n        return osc instanceof OmniOscillatorSourceMap[sourceType];\n    }\n    /**\n     * The base type of the oscillator.\n     * @see {@link Oscillator.baseType}\n     * @example\n     * const omniOsc = new Tone.OmniOscillator(440, \"fmsquare4\");\n     * console.log(omniOsc.sourceType, omniOsc.baseType, omniOsc.partialCount);\n     */\n    get baseType() {\n        return this._oscillator.baseType;\n    }\n    set baseType(baseType) {\n        if (!this._getOscType(this._oscillator, \"pulse\") &&\n            !this._getOscType(this._oscillator, \"pwm\") &&\n            baseType !== \"pulse\" &&\n            baseType !== \"pwm\") {\n            this._oscillator.baseType = baseType;\n        }\n    }\n    /**\n     * The width of the oscillator when sourceType === \"pulse\".\n     * @see {@link PWMOscillator}\n     */\n    get width() {\n        if (this._getOscType(this._oscillator, \"pulse\")) {\n            return this._oscillator.width;\n        }\n        else {\n            return undefined;\n        }\n    }\n    /**\n     * The number of detuned oscillators when sourceType === \"fat\".\n     * @see {@link FatOscillator.count}\n     */\n    get count() {\n        if (this._getOscType(this._oscillator, \"fat\")) {\n            return this._oscillator.count;\n        }\n        else {\n            return undefined;\n        }\n    }\n    set count(count) {\n        if (this._getOscType(this._oscillator, \"fat\") && isNumber(count)) {\n            this._oscillator.count = count;\n        }\n    }\n    /**\n     * The detune spread between the oscillators when sourceType === \"fat\".\n     * @see {@link FatOscillator.count}\n     */\n    get spread() {\n        if (this._getOscType(this._oscillator, \"fat\")) {\n            return this._oscillator.spread;\n        }\n        else {\n            return undefined;\n        }\n    }\n    set spread(spread) {\n        if (this._getOscType(this._oscillator, \"fat\") && isNumber(spread)) {\n            this._oscillator.spread = spread;\n        }\n    }\n    /**\n     * The type of the modulator oscillator. Only if the oscillator is set to \"am\" or \"fm\" types.\n     * @see {@link AMOscillator} or {@link FMOscillator}\n     */\n    get modulationType() {\n        if (this._getOscType(this._oscillator, \"fm\") ||\n            this._getOscType(this._oscillator, \"am\")) {\n            return this._oscillator.modulationType;\n        }\n        else {\n            return undefined;\n        }\n    }\n    set modulationType(mType) {\n        if ((this._getOscType(this._oscillator, \"fm\") ||\n            this._getOscType(this._oscillator, \"am\")) &&\n            isString(mType)) {\n            this._oscillator.modulationType = mType;\n        }\n    }\n    /**\n     * The modulation index when the sourceType === \"fm\"\n     * @see {@link FMOscillator}.\n     */\n    get modulationIndex() {\n        if (this._getOscType(this._oscillator, \"fm\")) {\n            return this._oscillator.modulationIndex;\n        }\n        else {\n            return undefined;\n        }\n    }\n    /**\n     * Harmonicity is the frequency ratio between the carrier and the modulator oscillators.\n     * @see {@link AMOscillator} or {@link FMOscillator}\n     */\n    get harmonicity() {\n        if (this._getOscType(this._oscillator, \"fm\") ||\n            this._getOscType(this._oscillator, \"am\")) {\n            return this._oscillator.harmonicity;\n        }\n        else {\n            return undefined;\n        }\n    }\n    /**\n     * The modulationFrequency Signal of the oscillator when sourceType === \"pwm\"\n     * see {@link PWMOscillator}\n     * @min 0.1\n     * @max 5\n     */\n    get modulationFrequency() {\n        if (this._getOscType(this._oscillator, \"pwm\")) {\n            return this._oscillator.modulationFrequency;\n        }\n        else {\n            return undefined;\n        }\n    }\n    asArray() {\n        return __awaiter(this, arguments, void 0, function* (length = 1024) {\n            return generateWaveform(this, length);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this.detune.dispose();\n        this.frequency.dispose();\n        this._oscillator.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=OmniOscillator.js.map","import { assertRange } from \"./Debug.js\";\n/**\n * Assert that the number is in the given range.\n */\nexport function range(min, max = Infinity) {\n    const valueMap = new WeakMap();\n    return function (target, propertyKey) {\n        Reflect.defineProperty(target, propertyKey, {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                return valueMap.get(this);\n            },\n            set: function (newValue) {\n                assertRange(newValue, min, max);\n                valueMap.set(this, newValue);\n            },\n        });\n    };\n}\n/**\n * Convert the time to seconds and assert that the time is in between the two\n * values when being set.\n */\nexport function timeRange(min, max = Infinity) {\n    const valueMap = new WeakMap();\n    return function (target, propertyKey) {\n        Reflect.defineProperty(target, propertyKey, {\n            configurable: true,\n            enumerable: true,\n            get: function () {\n                return valueMap.get(this);\n            },\n            set: function (newValue) {\n                assertRange(this.toSeconds(newValue), min, max);\n                valueMap.set(this, newValue);\n            },\n        });\n    };\n}\n//# sourceMappingURL=Decorator.js.map","import { __awaiter, __decorate } from \"tslib\";\nimport { ToneAudioBuffer } from \"../../core/context/ToneAudioBuffer.js\";\nimport { defaultArg, optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { noOp } from \"../../core/util/Interface.js\";\nimport { isUndef } from \"../../core/util/TypeCheck.js\";\nimport { Source } from \"../Source.js\";\nimport { ToneBufferSource } from \"./ToneBufferSource.js\";\nimport { assertRange } from \"../../core/util/Debug.js\";\nimport { timeRange } from \"../../core/util/Decorator.js\";\n/**\n * Player is an audio file player with start, loop, and stop functions.\n * @example\n * const player = new Tone.Player(\"https://tonejs.github.io/audio/berklee/gong_1.mp3\").toDestination();\n * // play as soon as the buffer is loaded\n * player.autostart = true;\n * @category Source\n */\nexport class Player extends Source {\n    constructor() {\n        const options = optionsFromArguments(Player.getDefaults(), arguments, [\n            \"url\",\n            \"onload\",\n        ]);\n        super(options);\n        this.name = \"Player\";\n        /**\n         * All of the active buffer source nodes\n         */\n        this._activeSources = new Set();\n        this._buffer = new ToneAudioBuffer({\n            onload: this._onload.bind(this, options.onload),\n            onerror: options.onerror,\n            reverse: options.reverse,\n            url: options.url,\n        });\n        this.autostart = options.autostart;\n        this._loop = options.loop;\n        this._loopStart = options.loopStart;\n        this._loopEnd = options.loopEnd;\n        this._playbackRate = options.playbackRate;\n        this.fadeIn = options.fadeIn;\n        this.fadeOut = options.fadeOut;\n    }\n    static getDefaults() {\n        return Object.assign(Source.getDefaults(), {\n            autostart: false,\n            fadeIn: 0,\n            fadeOut: 0,\n            loop: false,\n            loopEnd: 0,\n            loopStart: 0,\n            onload: noOp,\n            onerror: noOp,\n            playbackRate: 1,\n            reverse: false,\n        });\n    }\n    /**\n     * Load the audio file as an audio buffer.\n     * Decodes the audio asynchronously and invokes\n     * the callback once the audio buffer loads.\n     * Note: this does not need to be called if a url\n     * was passed in to the constructor. Only use this\n     * if you want to manually load a new url.\n     * @param url The url of the buffer to load. Filetype support depends on the browser.\n     */\n    load(url) {\n        return __awaiter(this, void 0, void 0, function* () {\n            yield this._buffer.load(url);\n            this._onload();\n            return this;\n        });\n    }\n    /**\n     * Internal callback when the buffer is loaded.\n     */\n    _onload(callback = noOp) {\n        callback();\n        if (this.autostart) {\n            this.start();\n        }\n    }\n    /**\n     * Internal callback when the buffer is done playing.\n     */\n    _onSourceEnd(source) {\n        // invoke the onstop function\n        this.onstop(this);\n        // delete the source from the active sources\n        this._activeSources.delete(source);\n        if (this._activeSources.size === 0 &&\n            !this._synced &&\n            this._state.getValueAtTime(this.now()) === \"started\") {\n            // remove the 'implicitEnd' event and replace with an explicit end\n            this._state.cancel(this.now());\n            this._state.setStateAtTime(\"stopped\", this.now());\n        }\n    }\n    /**\n     * Play the buffer at the given startTime. Optionally add an offset\n     * and/or duration which will play the buffer from a position\n     * within the buffer for the given duration.\n     *\n     * @param  time When the player should start.\n     * @param  offset The offset from the beginning of the sample to start at.\n     * @param  duration How long the sample should play. If no duration is given, it will default to the full length of the sample (minus any offset)\n     */\n    start(time, offset, duration) {\n        super.start(time, offset, duration);\n        return this;\n    }\n    /**\n     * Internal start method\n     */\n    _start(startTime, offset, duration) {\n        // if it's a loop the default offset is the loopStart point\n        if (this._loop) {\n            offset = defaultArg(offset, this._loopStart);\n        }\n        else {\n            // otherwise the default offset is 0\n            offset = defaultArg(offset, 0);\n        }\n        // compute the values in seconds\n        const computedOffset = this.toSeconds(offset);\n        // compute the duration which is either the passed in duration of the buffer.duration - offset\n        const origDuration = duration;\n        duration = defaultArg(duration, Math.max(this._buffer.duration - computedOffset, 0));\n        let computedDuration = this.toSeconds(duration);\n        // scale it by the playback rate\n        computedDuration = computedDuration / this._playbackRate;\n        // get the start time\n        startTime = this.toSeconds(startTime);\n        // make the source\n        const source = new ToneBufferSource({\n            url: this._buffer,\n            context: this.context,\n            fadeIn: this.fadeIn,\n            fadeOut: this.fadeOut,\n            loop: this._loop,\n            loopEnd: this._loopEnd,\n            loopStart: this._loopStart,\n            onended: this._onSourceEnd.bind(this),\n            playbackRate: this._playbackRate,\n        }).connect(this.output);\n        // set the looping properties\n        if (!this._loop && !this._synced) {\n            // cancel the previous stop\n            this._state.cancel(startTime + computedDuration);\n            // if it's not looping, set the state change at the end of the sample\n            this._state.setStateAtTime(\"stopped\", startTime + computedDuration, {\n                implicitEnd: true,\n            });\n        }\n        // add it to the array of active sources\n        this._activeSources.add(source);\n        // start it\n        if (this._loop && isUndef(origDuration)) {\n            source.start(startTime, computedOffset);\n        }\n        else {\n            // subtract the fade out time\n            source.start(startTime, computedOffset, computedDuration - this.toSeconds(this.fadeOut));\n        }\n    }\n    /**\n     * Stop playback.\n     */\n    _stop(time) {\n        const computedTime = this.toSeconds(time);\n        this._activeSources.forEach((source) => source.stop(computedTime));\n    }\n    /**\n     * Stop and then restart the player from the beginning (or offset)\n     * @param  time When the player should start.\n     * @param  offset The offset from the beginning of the sample to start at.\n     * @param  duration How long the sample should play. If no duration is given,\n     * \t\t\t\t\tit will default to the full length of the sample (minus any offset)\n     */\n    restart(time, offset, duration) {\n        super.restart(time, offset, duration);\n        return this;\n    }\n    _restart(time, offset, duration) {\n        var _a;\n        (_a = [...this._activeSources].pop()) === null || _a === void 0 ? void 0 : _a.stop(time); // explicitly stop only the most recently created source, to avoid edge case when > 1 source exists and _stop() erroneously sets all stop times past original end offset\n        this._start(time, offset, duration);\n    }\n    /**\n     * Seek to a specific time in the player's buffer. If the\n     * source is no longer playing at that time, it will stop.\n     * @param offset The time to seek to.\n     * @param when The time for the seek event to occur.\n     * @example\n     * const player = new Tone.Player(\"https://tonejs.github.io/audio/berklee/gurgling_theremin_1.mp3\", () => {\n     * \tplayer.start();\n     * \t// seek to the offset in 1 second from now\n     * \tplayer.seek(0.4, \"+1\");\n     * }).toDestination();\n     */\n    seek(offset, when) {\n        const computedTime = this.toSeconds(when);\n        if (this._state.getValueAtTime(computedTime) === \"started\") {\n            const computedOffset = this.toSeconds(offset);\n            // if it's currently playing, stop it\n            this._stop(computedTime);\n            // restart it at the given time\n            this._start(computedTime, computedOffset);\n        }\n        return this;\n    }\n    /**\n     * Set the loop start and end. Will only loop if loop is set to true.\n     * @param loopStart The loop start time\n     * @param loopEnd The loop end time\n     * @example\n     * const player = new Tone.Player(\"https://tonejs.github.io/audio/berklee/malevoices_aa2_F3.mp3\").toDestination();\n     * // loop between the given points\n     * player.setLoopPoints(0.2, 0.3);\n     * player.loop = true;\n     * player.autostart = true;\n     */\n    setLoopPoints(loopStart, loopEnd) {\n        this.loopStart = loopStart;\n        this.loopEnd = loopEnd;\n        return this;\n    }\n    /**\n     * If loop is true, the loop will start at this position.\n     */\n    get loopStart() {\n        return this._loopStart;\n    }\n    set loopStart(loopStart) {\n        this._loopStart = loopStart;\n        if (this.buffer.loaded) {\n            assertRange(this.toSeconds(loopStart), 0, this.buffer.duration);\n        }\n        // get the current source\n        this._activeSources.forEach((source) => {\n            source.loopStart = loopStart;\n        });\n    }\n    /**\n     * If loop is true, the loop will end at this position.\n     */\n    get loopEnd() {\n        return this._loopEnd;\n    }\n    set loopEnd(loopEnd) {\n        this._loopEnd = loopEnd;\n        if (this.buffer.loaded) {\n            assertRange(this.toSeconds(loopEnd), 0, this.buffer.duration);\n        }\n        // get the current source\n        this._activeSources.forEach((source) => {\n            source.loopEnd = loopEnd;\n        });\n    }\n    /**\n     * The audio buffer belonging to the player.\n     */\n    get buffer() {\n        return this._buffer;\n    }\n    set buffer(buffer) {\n        this._buffer.set(buffer);\n    }\n    /**\n     * If the buffer should loop once it's over.\n     * @example\n     * const player = new Tone.Player(\"https://tonejs.github.io/audio/drum-samples/breakbeat.mp3\").toDestination();\n     * player.loop = true;\n     * player.autostart = true;\n     */\n    get loop() {\n        return this._loop;\n    }\n    set loop(loop) {\n        // if no change, do nothing\n        if (this._loop === loop) {\n            return;\n        }\n        this._loop = loop;\n        // set the loop of all of the sources\n        this._activeSources.forEach((source) => {\n            source.loop = loop;\n        });\n        if (loop) {\n            // remove the next stopEvent\n            const stopEvent = this._state.getNextState(\"stopped\", this.now());\n            if (stopEvent) {\n                this._state.cancel(stopEvent.time);\n            }\n        }\n    }\n    /**\n     * Normal speed is 1. The pitch will change with the playback rate.\n     * @example\n     * const player = new Tone.Player(\"https://tonejs.github.io/audio/berklee/femalevoices_aa2_A5.mp3\").toDestination();\n     * // play at 1/4 speed\n     * player.playbackRate = 0.25;\n     * // play as soon as the buffer is loaded\n     * player.autostart = true;\n     */\n    get playbackRate() {\n        return this._playbackRate;\n    }\n    set playbackRate(rate) {\n        this._playbackRate = rate;\n        const now = this.now();\n        // cancel the stop event since it's at a different time now\n        const stopEvent = this._state.getNextState(\"stopped\", now);\n        if (stopEvent && stopEvent.implicitEnd) {\n            this._state.cancel(stopEvent.time);\n            this._activeSources.forEach((source) => source.cancelStop());\n        }\n        // set all the sources\n        this._activeSources.forEach((source) => {\n            source.playbackRate.setValueAtTime(rate, now);\n        });\n    }\n    /**\n     * If the buffer should be reversed. Note that this sets the underlying {@link ToneAudioBuffer.reverse}, so\n     * if multiple players are pointing at the same ToneAudioBuffer, they will all be reversed.\n     * @example\n     * const player = new Tone.Player(\"https://tonejs.github.io/audio/berklee/chime_1.mp3\").toDestination();\n     * player.autostart = true;\n     * player.reverse = true;\n     */\n    get reverse() {\n        return this._buffer.reverse;\n    }\n    set reverse(rev) {\n        this._buffer.reverse = rev;\n    }\n    /**\n     * If the buffer is loaded\n     */\n    get loaded() {\n        return this._buffer.loaded;\n    }\n    dispose() {\n        super.dispose();\n        // disconnect all of the players\n        this._activeSources.forEach((source) => source.dispose());\n        this._activeSources.clear();\n        this._buffer.dispose();\n        return this;\n    }\n}\n__decorate([\n    timeRange(0)\n], Player.prototype, \"fadeIn\", void 0);\n__decorate([\n    timeRange(0)\n], Player.prototype, \"fadeOut\", void 0);\n//# sourceMappingURL=Player.js.map","import { __awaiter, __decorate } from \"tslib\";\nimport { ToneAudioNode, } from \"../../core/context/ToneAudioNode.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { isArray, isObject, isString } from \"../../core/util/TypeCheck.js\";\nimport { connectSignal, Signal } from \"../../signal/Signal.js\";\nimport { OfflineContext } from \"../../core/context/OfflineContext.js\";\nimport { assert } from \"../../core/util/Debug.js\";\nimport { range, timeRange } from \"../../core/util/Decorator.js\";\n/**\n * Envelope is an [ADSR](https://en.wikipedia.org/wiki/Synthesizer#ADSR_envelope)\n * envelope generator. Envelope outputs a signal which\n * can be connected to an AudioParam or Tone.Signal.\n * ```\n *           /\\\n *          /  \\\n *         /    \\\n *        /      \\\n *       /        \\___________\n *      /                     \\\n *     /                       \\\n *    /                         \\\n *   /                           \\\n * ```\n * @example\n * return Tone.Offline(() => {\n * \tconst env = new Tone.Envelope({\n * \t\tattack: 0.1,\n * \t\tdecay: 0.2,\n * \t\tsustain: 0.5,\n * \t\trelease: 0.8,\n * \t}).toDestination();\n * \tenv.triggerAttackRelease(0.5);\n * }, 1.5, 1);\n * @category Component\n */\nexport class Envelope extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(Envelope.getDefaults(), arguments, [\"attack\", \"decay\", \"sustain\", \"release\"]);\n        super(options);\n        this.name = \"Envelope\";\n        /**\n         * the signal which is output.\n         */\n        this._sig = new Signal({\n            context: this.context,\n            value: 0,\n        });\n        /**\n         * The output signal of the envelope\n         */\n        this.output = this._sig;\n        /**\n         * Envelope has no input\n         */\n        this.input = undefined;\n        this.attack = options.attack;\n        this.decay = options.decay;\n        this.sustain = options.sustain;\n        this.release = options.release;\n        this.attackCurve = options.attackCurve;\n        this.releaseCurve = options.releaseCurve;\n        this.decayCurve = options.decayCurve;\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            attack: 0.01,\n            attackCurve: \"linear\",\n            decay: 0.1,\n            decayCurve: \"exponential\",\n            release: 1,\n            releaseCurve: \"exponential\",\n            sustain: 0.5,\n        });\n    }\n    /**\n     * Read the current value of the envelope. Useful for\n     * synchronizing visual output to the envelope.\n     */\n    get value() {\n        return this.getValueAtTime(this.now());\n    }\n    /**\n     * Get the curve\n     * @param  curve\n     * @param  direction  In/Out\n     * @return The curve name\n     */\n    _getCurve(curve, direction) {\n        if (isString(curve)) {\n            return curve;\n        }\n        else {\n            // look up the name in the curves array\n            let curveName;\n            for (curveName in EnvelopeCurves) {\n                if (EnvelopeCurves[curveName][direction] === curve) {\n                    return curveName;\n                }\n            }\n            // return the custom curve\n            return curve;\n        }\n    }\n    /**\n     * Assign a the curve to the given name using the direction\n     * @param  name\n     * @param  direction In/Out\n     * @param  curve\n     */\n    _setCurve(name, direction, curve) {\n        // check if it's a valid type\n        if (isString(curve) && Reflect.has(EnvelopeCurves, curve)) {\n            const curveDef = EnvelopeCurves[curve];\n            if (isObject(curveDef)) {\n                if (name !== \"_decayCurve\") {\n                    this[name] = curveDef[direction];\n                }\n            }\n            else {\n                this[name] = curveDef;\n            }\n        }\n        else if (isArray(curve) && name !== \"_decayCurve\") {\n            this[name] = curve;\n        }\n        else {\n            throw new Error(\"Envelope: invalid curve: \" + curve);\n        }\n    }\n    /**\n     * The shape of the attack.\n     * Can be any of these strings:\n     * * \"linear\"\n     * * \"exponential\"\n     * * \"sine\"\n     * * \"cosine\"\n     * * \"bounce\"\n     * * \"ripple\"\n     * * \"step\"\n     *\n     * Can also be an array which describes the curve. Values\n     * in the array are evenly subdivided and linearly\n     * interpolated over the duration of the attack.\n     * @example\n     * return Tone.Offline(() => {\n     * \tconst env = new Tone.Envelope(0.4).toDestination();\n     * \tenv.attackCurve = \"linear\";\n     * \tenv.triggerAttack();\n     * }, 1, 1);\n     */\n    get attackCurve() {\n        return this._getCurve(this._attackCurve, \"In\");\n    }\n    set attackCurve(curve) {\n        this._setCurve(\"_attackCurve\", \"In\", curve);\n    }\n    /**\n     * The shape of the release. See the attack curve types.\n     * @example\n     * return Tone.Offline(() => {\n     * \tconst env = new Tone.Envelope({\n     * \t\trelease: 0.8\n     * \t}).toDestination();\n     * \tenv.triggerAttack();\n     * \t// release curve could also be defined by an array\n     * \tenv.releaseCurve = [1, 0.3, 0.4, 0.2, 0.7, 0];\n     * \tenv.triggerRelease(0.2);\n     * }, 1, 1);\n     */\n    get releaseCurve() {\n        return this._getCurve(this._releaseCurve, \"Out\");\n    }\n    set releaseCurve(curve) {\n        this._setCurve(\"_releaseCurve\", \"Out\", curve);\n    }\n    /**\n     * The shape of the decay either \"linear\" or \"exponential\"\n     * @example\n     * return Tone.Offline(() => {\n     * \tconst env = new Tone.Envelope({\n     * \t\tsustain: 0.1,\n     * \t\tdecay: 0.5\n     * \t}).toDestination();\n     * \tenv.decayCurve = \"linear\";\n     * \tenv.triggerAttack();\n     * }, 1, 1);\n     */\n    get decayCurve() {\n        return this._getCurve(this._decayCurve, \"Out\");\n    }\n    set decayCurve(curve) {\n        this._setCurve(\"_decayCurve\", \"Out\", curve);\n    }\n    /**\n     * Trigger the attack/decay portion of the ADSR envelope.\n     * @param  time When the attack should start.\n     * @param velocity The velocity of the envelope scales the vales.\n     *                             number between 0-1\n     * @example\n     * const env = new Tone.AmplitudeEnvelope().toDestination();\n     * const osc = new Tone.Oscillator().connect(env).start();\n     * // trigger the attack 0.5 seconds from now with a velocity of 0.2\n     * env.triggerAttack(\"+0.5\", 0.2);\n     */\n    triggerAttack(time, velocity = 1) {\n        this.log(\"triggerAttack\", time, velocity);\n        time = this.toSeconds(time);\n        const originalAttack = this.toSeconds(this.attack);\n        let attack = originalAttack;\n        const decay = this.toSeconds(this.decay);\n        // check if it's not a complete attack\n        const currentValue = this.getValueAtTime(time);\n        if (currentValue > 0) {\n            // subtract the current value from the attack time\n            const attackRate = 1 / attack;\n            const remainingDistance = 1 - currentValue;\n            // the attack is now the remaining time\n            attack = remainingDistance / attackRate;\n        }\n        // attack\n        if (attack < this.sampleTime) {\n            this._sig.cancelScheduledValues(time);\n            // case where the attack time is 0 should set instantly\n            this._sig.setValueAtTime(velocity, time);\n        }\n        else if (this._attackCurve === \"linear\") {\n            this._sig.linearRampTo(velocity, attack, time);\n        }\n        else if (this._attackCurve === \"exponential\") {\n            this._sig.targetRampTo(velocity, attack, time);\n        }\n        else {\n            this._sig.cancelAndHoldAtTime(time);\n            let curve = this._attackCurve;\n            // find the starting position in the curve\n            for (let i = 1; i < curve.length; i++) {\n                // the starting index is between the two values\n                if (curve[i - 1] <= currentValue && currentValue <= curve[i]) {\n                    curve = this._attackCurve.slice(i);\n                    // the first index is the current value\n                    curve[0] = currentValue;\n                    break;\n                }\n            }\n            this._sig.setValueCurveAtTime(curve, time, attack, velocity);\n        }\n        // decay\n        if (decay && this.sustain < 1) {\n            const decayValue = velocity * this.sustain;\n            const decayStart = time + attack;\n            this.log(\"decay\", decayStart);\n            if (this._decayCurve === \"linear\") {\n                this._sig.linearRampToValueAtTime(decayValue, decay + decayStart);\n            }\n            else {\n                this._sig.exponentialApproachValueAtTime(decayValue, decayStart, decay);\n            }\n        }\n        return this;\n    }\n    /**\n     * Triggers the release of the envelope.\n     * @param  time When the release portion of the envelope should start.\n     * @example\n     * const env = new Tone.AmplitudeEnvelope().toDestination();\n     * const osc = new Tone.Oscillator({\n     * \ttype: \"sawtooth\"\n     * }).connect(env).start();\n     * env.triggerAttack();\n     * // trigger the release half a second after the attack\n     * env.triggerRelease(\"+0.5\");\n     */\n    triggerRelease(time) {\n        this.log(\"triggerRelease\", time);\n        time = this.toSeconds(time);\n        const currentValue = this.getValueAtTime(time);\n        if (currentValue > 0) {\n            const release = this.toSeconds(this.release);\n            if (release < this.sampleTime) {\n                this._sig.setValueAtTime(0, time);\n            }\n            else if (this._releaseCurve === \"linear\") {\n                this._sig.linearRampTo(0, release, time);\n            }\n            else if (this._releaseCurve === \"exponential\") {\n                this._sig.targetRampTo(0, release, time);\n            }\n            else {\n                assert(isArray(this._releaseCurve), \"releaseCurve must be either 'linear', 'exponential' or an array\");\n                this._sig.cancelAndHoldAtTime(time);\n                this._sig.setValueCurveAtTime(this._releaseCurve, time, release, currentValue);\n            }\n        }\n        return this;\n    }\n    /**\n     * Get the scheduled value at the given time. This will\n     * return the unconverted (raw) value.\n     * @example\n     * const env = new Tone.Envelope(0.5, 1, 0.4, 2);\n     * env.triggerAttackRelease(2);\n     * setInterval(() => console.log(env.getValueAtTime(Tone.now())), 100);\n     */\n    getValueAtTime(time) {\n        return this._sig.getValueAtTime(time);\n    }\n    /**\n     * triggerAttackRelease is shorthand for triggerAttack, then waiting\n     * some duration, then triggerRelease.\n     * @param duration The duration of the sustain.\n     * @param time When the attack should be triggered.\n     * @param velocity The velocity of the envelope.\n     * @example\n     * const env = new Tone.AmplitudeEnvelope().toDestination();\n     * const osc = new Tone.Oscillator().connect(env).start();\n     * // trigger the release 0.5 seconds after the attack\n     * env.triggerAttackRelease(0.5);\n     */\n    triggerAttackRelease(duration, time, velocity = 1) {\n        time = this.toSeconds(time);\n        this.triggerAttack(time, velocity);\n        this.triggerRelease(time + this.toSeconds(duration));\n        return this;\n    }\n    /**\n     * Cancels all scheduled envelope changes after the given time.\n     */\n    cancel(after) {\n        this._sig.cancelScheduledValues(this.toSeconds(after));\n        return this;\n    }\n    /**\n     * Connect the envelope to a destination node.\n     */\n    connect(destination, outputNumber = 0, inputNumber = 0) {\n        connectSignal(this, destination, outputNumber, inputNumber);\n        return this;\n    }\n    /**\n     * Render the envelope curve to an array of the given length.\n     * Good for visualizing the envelope curve. Rescales the duration of the\n     * envelope to fit the length.\n     */\n    asArray() {\n        return __awaiter(this, arguments, void 0, function* (length = 1024) {\n            const duration = length / this.context.sampleRate;\n            const context = new OfflineContext(1, duration, this.context.sampleRate);\n            // normalize the ADSR for the given duration with 20% sustain time\n            const attackPortion = this.toSeconds(this.attack) + this.toSeconds(this.decay);\n            const envelopeDuration = attackPortion + this.toSeconds(this.release);\n            const sustainTime = envelopeDuration * 0.1;\n            const totalDuration = envelopeDuration + sustainTime;\n            // @ts-ignore\n            const clone = new this.constructor(Object.assign(this.get(), {\n                attack: (duration * this.toSeconds(this.attack)) / totalDuration,\n                decay: (duration * this.toSeconds(this.decay)) / totalDuration,\n                release: (duration * this.toSeconds(this.release)) / totalDuration,\n                context,\n            }));\n            clone._sig.toDestination();\n            clone.triggerAttackRelease((duration * (attackPortion + sustainTime)) / totalDuration, 0);\n            const buffer = yield context.render();\n            return buffer.getChannelData(0);\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._sig.dispose();\n        return this;\n    }\n}\n__decorate([\n    timeRange(0)\n], Envelope.prototype, \"attack\", void 0);\n__decorate([\n    timeRange(0)\n], Envelope.prototype, \"decay\", void 0);\n__decorate([\n    range(0, 1)\n], Envelope.prototype, \"sustain\", void 0);\n__decorate([\n    timeRange(0)\n], Envelope.prototype, \"release\", void 0);\n/**\n * Generate some complex envelope curves.\n */\nconst EnvelopeCurves = (() => {\n    const curveLen = 128;\n    let i;\n    let k;\n    // cosine curve\n    const cosineCurve = [];\n    for (i = 0; i < curveLen; i++) {\n        cosineCurve[i] = Math.sin((i / (curveLen - 1)) * (Math.PI / 2));\n    }\n    // ripple curve\n    const rippleCurve = [];\n    const rippleCurveFreq = 6.4;\n    for (i = 0; i < curveLen - 1; i++) {\n        k = i / (curveLen - 1);\n        const sineWave = Math.sin(k * (Math.PI * 2) * rippleCurveFreq - Math.PI / 2) + 1;\n        rippleCurve[i] = sineWave / 10 + k * 0.83;\n    }\n    rippleCurve[curveLen - 1] = 1;\n    // stairs curve\n    const stairsCurve = [];\n    const steps = 5;\n    for (i = 0; i < curveLen; i++) {\n        stairsCurve[i] = Math.ceil((i / (curveLen - 1)) * steps) / steps;\n    }\n    // in-out easing curve\n    const sineCurve = [];\n    for (i = 0; i < curveLen; i++) {\n        k = i / (curveLen - 1);\n        sineCurve[i] = 0.5 * (1 - Math.cos(Math.PI * k));\n    }\n    // a bounce curve\n    const bounceCurve = [];\n    for (i = 0; i < curveLen; i++) {\n        k = i / (curveLen - 1);\n        const freq = Math.pow(k, 3) * 4 + 0.2;\n        const val = Math.cos(freq * Math.PI * 2 * k);\n        bounceCurve[i] = Math.abs(val * (1 - k));\n    }\n    /**\n     * Invert a value curve to make it work for the release\n     */\n    function invertCurve(curve) {\n        const out = new Array(curve.length);\n        for (let j = 0; j < curve.length; j++) {\n            out[j] = 1 - curve[j];\n        }\n        return out;\n    }\n    /**\n     * reverse the curve\n     */\n    function reverseCurve(curve) {\n        return curve.slice(0).reverse();\n    }\n    /**\n     * attack and release curve arrays\n     */\n    return {\n        bounce: {\n            In: invertCurve(bounceCurve),\n            Out: bounceCurve,\n        },\n        cosine: {\n            In: cosineCurve,\n            Out: reverseCurve(cosineCurve),\n        },\n        exponential: \"exponential\",\n        linear: \"linear\",\n        ripple: {\n            In: rippleCurve,\n            Out: invertCurve(rippleCurve),\n        },\n        sine: {\n            In: sineCurve,\n            Out: invertCurve(sineCurve),\n        },\n        step: {\n            In: stairsCurve,\n            Out: invertCurve(stairsCurve),\n        },\n    };\n})();\n//# sourceMappingURL=Envelope.js.map","import { Volume } from \"../component/channel/Volume.js\";\nimport { ToneAudioNode, } from \"../core/context/ToneAudioNode.js\";\nimport { optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { readOnly } from \"../core/util/Interface.js\";\n/**\n * Base-class for all instruments\n */\nexport class Instrument extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(Instrument.getDefaults(), arguments);\n        super(options);\n        /**\n         * Keep track of all events scheduled to the transport\n         * when the instrument is 'synced'\n         */\n        this._scheduledEvents = [];\n        /**\n         * If the instrument is currently synced\n         */\n        this._synced = false;\n        this._original_triggerAttack = this.triggerAttack;\n        this._original_triggerRelease = this.triggerRelease;\n        /**\n         * The release which is scheduled to the timeline.\n         */\n        this._syncedRelease = (time) => this._original_triggerRelease(time);\n        this._volume = this.output = new Volume({\n            context: this.context,\n            volume: options.volume,\n        });\n        this.volume = this._volume.volume;\n        readOnly(this, \"volume\");\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            volume: 0,\n        });\n    }\n    /**\n     * Sync the instrument to the Transport. All subsequent calls of\n     * {@link triggerAttack} and {@link triggerRelease} will be scheduled along the transport.\n     * @example\n     * const fmSynth = new Tone.FMSynth().toDestination();\n     * fmSynth.volume.value = -6;\n     * fmSynth.sync();\n     * // schedule 3 notes when the transport first starts\n     * fmSynth.triggerAttackRelease(\"C4\", \"8n\", 0);\n     * fmSynth.triggerAttackRelease(\"E4\", \"8n\", \"8n\");\n     * fmSynth.triggerAttackRelease(\"G4\", \"8n\", \"4n\");\n     * // start the transport to hear the notes\n     * Tone.Transport.start();\n     */\n    sync() {\n        if (this._syncState()) {\n            this._syncMethod(\"triggerAttack\", 1);\n            this._syncMethod(\"triggerRelease\", 0);\n            this.context.transport.on(\"stop\", this._syncedRelease);\n            this.context.transport.on(\"pause\", this._syncedRelease);\n            this.context.transport.on(\"loopEnd\", this._syncedRelease);\n        }\n        return this;\n    }\n    /**\n     * set _sync\n     */\n    _syncState() {\n        let changed = false;\n        if (!this._synced) {\n            this._synced = true;\n            changed = true;\n        }\n        return changed;\n    }\n    /**\n     * Wrap the given method so that it can be synchronized\n     * @param method Which method to wrap and sync\n     * @param  timePosition What position the time argument appears in\n     */\n    _syncMethod(method, timePosition) {\n        const originalMethod = (this[\"_original_\" + method] = this[method]);\n        this[method] = (...args) => {\n            const time = args[timePosition];\n            const id = this.context.transport.schedule((t) => {\n                args[timePosition] = t;\n                originalMethod.apply(this, args);\n            }, time);\n            this._scheduledEvents.push(id);\n        };\n    }\n    /**\n     * Unsync the instrument from the Transport\n     */\n    unsync() {\n        this._scheduledEvents.forEach((id) => this.context.transport.clear(id));\n        this._scheduledEvents = [];\n        if (this._synced) {\n            this._synced = false;\n            this.triggerAttack = this._original_triggerAttack;\n            this.triggerRelease = this._original_triggerRelease;\n            this.context.transport.off(\"stop\", this._syncedRelease);\n            this.context.transport.off(\"pause\", this._syncedRelease);\n            this.context.transport.off(\"loopEnd\", this._syncedRelease);\n        }\n        return this;\n    }\n    /**\n     * Trigger the attack and then the release after the duration.\n     * @param  note     The note to trigger.\n     * @param  duration How long the note should be held for before\n     *                         triggering the release. This value must be greater than 0.\n     * @param time  When the note should be triggered.\n     * @param  velocity The velocity the note should be triggered at.\n     * @example\n     * const synth = new Tone.Synth().toDestination();\n     * // trigger \"C4\" for the duration of an 8th note\n     * synth.triggerAttackRelease(\"C4\", \"8n\");\n     */\n    triggerAttackRelease(note, duration, time, velocity) {\n        const computedTime = this.toSeconds(time);\n        const computedDuration = this.toSeconds(duration);\n        this.triggerAttack(note, computedTime, velocity);\n        this.triggerRelease(computedTime + computedDuration);\n        return this;\n    }\n    /**\n     * clean up\n     * @returns {Instrument} this\n     */\n    dispose() {\n        super.dispose();\n        this._volume.dispose();\n        this.unsync();\n        this._scheduledEvents = [];\n        return this;\n    }\n}\n//# sourceMappingURL=Instrument.js.map","import { __decorate } from \"tslib\";\nimport { FrequencyClass } from \"../core/type/Frequency.js\";\nimport { optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { noOp } from \"../core/util/Interface.js\";\nimport { Instrument } from \"../instrument/Instrument.js\";\nimport { timeRange } from \"../core/util/Decorator.js\";\n/**\n * Abstract base class for other monophonic instruments to extend.\n */\nexport class Monophonic extends Instrument {\n    constructor() {\n        const options = optionsFromArguments(Monophonic.getDefaults(), arguments);\n        super(options);\n        this.portamento = options.portamento;\n        this.onsilence = options.onsilence;\n    }\n    static getDefaults() {\n        return Object.assign(Instrument.getDefaults(), {\n            detune: 0,\n            onsilence: noOp,\n            portamento: 0,\n        });\n    }\n    /**\n     * Trigger the attack of the note optionally with a given velocity.\n     * @param  note The note to trigger.\n     * @param  time When the note should start.\n     * @param  velocity The velocity determines how \"loud\" the note will be.\n     * @example\n     * const synth = new Tone.Synth().toDestination();\n     * // trigger the note a half second from now at half velocity\n     * synth.triggerAttack(\"C4\", \"+0.5\", 0.5);\n     */\n    triggerAttack(note, time, velocity = 1) {\n        this.log(\"triggerAttack\", note, time, velocity);\n        const seconds = this.toSeconds(time);\n        this._triggerEnvelopeAttack(seconds, velocity);\n        this.setNote(note, seconds);\n        return this;\n    }\n    /**\n     * Trigger the release portion of the envelope.\n     * @param  time If no time is given, the release happens immediately.\n     * @example\n     * const synth = new Tone.Synth().toDestination();\n     * synth.triggerAttack(\"C4\");\n     * // trigger the release a second from now\n     * synth.triggerRelease(\"+1\");\n     */\n    triggerRelease(time) {\n        this.log(\"triggerRelease\", time);\n        const seconds = this.toSeconds(time);\n        this._triggerEnvelopeRelease(seconds);\n        return this;\n    }\n    /**\n     * Set the note at the given time. If no time is given, the note\n     * will set immediately.\n     * @param note The note to change to.\n     * @param  time The time when the note should be set.\n     * @example\n     * const synth = new Tone.Synth().toDestination();\n     * synth.triggerAttack(\"C4\");\n     * // change to F#6 in one quarter note from now.\n     * synth.setNote(\"F#6\", \"+4n\");\n     */\n    setNote(note, time) {\n        const computedTime = this.toSeconds(time);\n        const computedFrequency = note instanceof FrequencyClass ? note.toFrequency() : note;\n        if (this.portamento > 0 && this.getLevelAtTime(computedTime) > 0.05) {\n            const portTime = this.toSeconds(this.portamento);\n            this.frequency.exponentialRampTo(computedFrequency, portTime, computedTime);\n        }\n        else {\n            this.frequency.setValueAtTime(computedFrequency, computedTime);\n        }\n        return this;\n    }\n}\n__decorate([\n    timeRange(0)\n], Monophonic.prototype, \"portamento\", void 0);\n//# sourceMappingURL=Monophonic.js.map","import { Gain } from \"../../core/context/Gain.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { Envelope } from \"./Envelope.js\";\n/**\n * AmplitudeEnvelope is a Tone.Envelope connected to a gain node.\n * Unlike Tone.Envelope, which outputs the envelope's value, AmplitudeEnvelope accepts\n * an audio signal as the input and will apply the envelope to the amplitude\n * of the signal.\n * Read more about ADSR Envelopes on [Wikipedia](https://en.wikipedia.org/wiki/Synthesizer#ADSR_envelope).\n *\n * @example\n * return Tone.Offline(() => {\n * \tconst ampEnv = new Tone.AmplitudeEnvelope({\n * \t\tattack: 0.1,\n * \t\tdecay: 0.2,\n * \t\tsustain: 1.0,\n * \t\trelease: 0.8\n * \t}).toDestination();\n * \t// create an oscillator and connect it\n * \tconst osc = new Tone.Oscillator().connect(ampEnv).start();\n * \t// trigger the envelopes attack and release \"8t\" apart\n * \tampEnv.triggerAttackRelease(\"8t\");\n * }, 1.5, 1);\n * @category Component\n */\nexport class AmplitudeEnvelope extends Envelope {\n    constructor() {\n        super(optionsFromArguments(AmplitudeEnvelope.getDefaults(), arguments, [\n            \"attack\",\n            \"decay\",\n            \"sustain\",\n            \"release\",\n        ]));\n        this.name = \"AmplitudeEnvelope\";\n        this._gainNode = new Gain({\n            context: this.context,\n            gain: 0,\n        });\n        this.output = this._gainNode;\n        this.input = this._gainNode;\n        this._sig.connect(this._gainNode.gain);\n        this.output = this._gainNode;\n        this.input = this._gainNode;\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        super.dispose();\n        this._gainNode.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=AmplitudeEnvelope.js.map","import { AmplitudeEnvelope } from \"../component/envelope/AmplitudeEnvelope.js\";\nimport { Envelope } from \"../component/envelope/Envelope.js\";\nimport { ToneAudioNode, } from \"../core/context/ToneAudioNode.js\";\nimport { omitFromObject, optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { readOnly } from \"../core/util/Interface.js\";\nimport { OmniOscillator } from \"../source/oscillator/OmniOscillator.js\";\nimport { Source } from \"../source/Source.js\";\nimport { Monophonic } from \"./Monophonic.js\";\n/**\n * Synth is composed simply of a {@link OmniOscillator} routed through an {@link AmplitudeEnvelope}.\n * ```\n * +----------------+   +-------------------+\n * | OmniOscillator +>--> AmplitudeEnvelope +>--> Output\n * +----------------+   +-------------------+\n * ```\n * @example\n * const synth = new Tone.Synth().toDestination();\n * synth.triggerAttackRelease(\"C4\", \"8n\");\n * @category Instrument\n */\nexport class Synth extends Monophonic {\n    constructor() {\n        const options = optionsFromArguments(Synth.getDefaults(), arguments);\n        super(options);\n        this.name = \"Synth\";\n        this.oscillator = new OmniOscillator(Object.assign({\n            context: this.context,\n            detune: options.detune,\n            onstop: () => this.onsilence(this),\n        }, options.oscillator));\n        this.frequency = this.oscillator.frequency;\n        this.detune = this.oscillator.detune;\n        this.envelope = new AmplitudeEnvelope(Object.assign({\n            context: this.context,\n        }, options.envelope));\n        // connect the oscillators to the output\n        this.oscillator.chain(this.envelope, this.output);\n        readOnly(this, [\"oscillator\", \"frequency\", \"detune\", \"envelope\"]);\n    }\n    static getDefaults() {\n        return Object.assign(Monophonic.getDefaults(), {\n            envelope: Object.assign(omitFromObject(Envelope.getDefaults(), Object.keys(ToneAudioNode.getDefaults())), {\n                attack: 0.005,\n                decay: 0.1,\n                release: 1,\n                sustain: 0.3,\n            }),\n            oscillator: Object.assign(omitFromObject(OmniOscillator.getDefaults(), [\n                ...Object.keys(Source.getDefaults()),\n                \"frequency\",\n                \"detune\",\n            ]), {\n                type: \"triangle\",\n            }),\n        });\n    }\n    /**\n     * start the attack portion of the envelope\n     * @param time the time the attack should start\n     * @param velocity the velocity of the note (0-1)\n     */\n    _triggerEnvelopeAttack(time, velocity) {\n        // the envelopes\n        this.envelope.triggerAttack(time, velocity);\n        this.oscillator.start(time);\n        // if there is no release portion, stop the oscillator\n        if (this.envelope.sustain === 0) {\n            const computedAttack = this.toSeconds(this.envelope.attack);\n            const computedDecay = this.toSeconds(this.envelope.decay);\n            this.oscillator.stop(time + computedAttack + computedDecay);\n        }\n    }\n    /**\n     * start the release portion of the envelope\n     * @param time the time the release should start\n     */\n    _triggerEnvelopeRelease(time) {\n        this.envelope.triggerRelease(time);\n        this.oscillator.stop(time + this.toSeconds(this.envelope.release));\n    }\n    getLevelAtTime(time) {\n        time = this.toSeconds(time);\n        return this.envelope.getValueAtTime(time);\n    }\n    /**\n     * clean up\n     */\n    dispose() {\n        super.dispose();\n        this.oscillator.dispose();\n        this.envelope.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=Synth.js.map","import { __decorate } from \"tslib\";\nimport { FrequencyClass } from \"../core/type/Frequency.js\";\nimport { deepMerge, optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { readOnly } from \"../core/util/Interface.js\";\nimport { Monophonic } from \"./Monophonic.js\";\nimport { Synth } from \"./Synth.js\";\nimport { range, timeRange } from \"../core/util/Decorator.js\";\n/**\n * MembraneSynth makes kick and tom sounds using a single oscillator\n * with an amplitude envelope and frequency ramp. A Tone.OmniOscillator\n * is routed through a Tone.AmplitudeEnvelope to the output. The drum\n * quality of the sound comes from the frequency envelope applied\n * during MembraneSynth.triggerAttack(note). The frequency envelope\n * starts at <code>note * .octaves</code> and ramps to <code>note</code>\n * over the duration of <code>.pitchDecay</code>.\n * @example\n * const synth = new Tone.MembraneSynth().toDestination();\n * synth.triggerAttackRelease(\"C2\", \"8n\");\n * @category Instrument\n */\nexport class MembraneSynth extends Synth {\n    constructor() {\n        const options = optionsFromArguments(MembraneSynth.getDefaults(), arguments);\n        super(options);\n        this.name = \"MembraneSynth\";\n        /**\n         * Portamento is ignored in this synth. use pitch decay instead.\n         */\n        this.portamento = 0;\n        this.pitchDecay = options.pitchDecay;\n        this.octaves = options.octaves;\n        readOnly(this, [\"oscillator\", \"envelope\"]);\n    }\n    static getDefaults() {\n        return deepMerge(Monophonic.getDefaults(), Synth.getDefaults(), {\n            envelope: {\n                attack: 0.001,\n                attackCurve: \"exponential\",\n                decay: 0.4,\n                release: 1.4,\n                sustain: 0.01,\n            },\n            octaves: 10,\n            oscillator: {\n                type: \"sine\",\n            },\n            pitchDecay: 0.05,\n        });\n    }\n    setNote(note, time) {\n        const seconds = this.toSeconds(time);\n        const hertz = this.toFrequency(note instanceof FrequencyClass ? note.toFrequency() : note);\n        const maxNote = hertz * this.octaves;\n        this.oscillator.frequency.setValueAtTime(maxNote, seconds);\n        this.oscillator.frequency.exponentialRampToValueAtTime(hertz, seconds + this.toSeconds(this.pitchDecay));\n        return this;\n    }\n    dispose() {\n        super.dispose();\n        return this;\n    }\n}\n__decorate([\n    range(0)\n], MembraneSynth.prototype, \"octaves\", void 0);\n__decorate([\n    timeRange(0)\n], MembraneSynth.prototype, \"pitchDecay\", void 0);\n//# sourceMappingURL=MembraneSynth.js.map","/**\n * All of the classes or functions which are loaded into the AudioWorkletGlobalScope\n */\nconst workletContext = new Set();\n/**\n * Add a class to the AudioWorkletGlobalScope\n */\nexport function addToWorklet(classOrFunction) {\n    workletContext.add(classOrFunction);\n}\n/**\n * Register a processor in the AudioWorkletGlobalScope with the given name\n */\nexport function registerProcessor(name, classDesc) {\n    const processor = /* javascript */ `registerProcessor(\"${name}\", ${classDesc})`;\n    workletContext.add(processor);\n}\n/**\n * Get all of the modules which have been registered to the AudioWorkletGlobalScope\n */\nexport function getWorkletGlobalScope() {\n    return Array.from(workletContext).join(\"\\n\");\n}\n//# sourceMappingURL=WorkletGlobalScope.js.map","import { addToWorklet } from \"./WorkletGlobalScope.js\";\nconst toneAudioWorkletProcessor = /* javascript */ `\n\t/**\n\t * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. \n\t */\n\tclass ToneAudioWorkletProcessor extends AudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\t\n\t\t\tsuper(options);\n\t\t\t/**\n\t\t\t * If the processor was disposed or not. Keep alive until it's disposed.\n\t\t\t */\n\t\t\tthis.disposed = false;\n\t\t   \t/** \n\t\t\t * The number of samples in the processing block\n\t\t\t */\n\t\t\tthis.blockSize = 128;\n\t\t\t/**\n\t\t\t * the sample rate\n\t\t\t */\n\t\t\tthis.sampleRate = sampleRate;\n\n\t\t\tthis.port.onmessage = (event) => {\n\t\t\t\t// when it receives a dispose \n\t\t\t\tif (event.data === \"dispose\") {\n\t\t\t\t\tthis.disposed = true;\n\t\t\t\t}\n\t\t\t};\n\t\t}\n\t}\n`;\naddToWorklet(toneAudioWorkletProcessor);\n//# sourceMappingURL=ToneAudioWorkletProcessor.worklet.js.map","import \"./ToneAudioWorkletProcessor.worklet.js\";\nimport { addToWorklet } from \"./WorkletGlobalScope.js\";\nexport const singleIOProcess = /* javascript */ `\n\t/**\n\t * Abstract class for a single input/output processor. \n\t * has a 'generate' function which processes one sample at a time\n\t */\n\tclass SingleIOProcessor extends ToneAudioWorkletProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(Object.assign(options, {\n\t\t\t\tnumberOfInputs: 1,\n\t\t\t\tnumberOfOutputs: 1\n\t\t\t}));\n\t\t\t/**\n\t\t\t * Holds the name of the parameter and a single value of that\n\t\t\t * parameter at the current sample\n\t\t\t * @type { [name: string]: number }\n\t\t\t */\n\t\t\tthis.params = {}\n\t\t}\n\n\t\t/**\n\t\t * Generate an output sample from the input sample and parameters\n\t\t * @abstract\n\t\t * @param input number\n\t\t * @param channel number\n\t\t * @param parameters { [name: string]: number }\n\t\t * @returns number\n\t\t */\n\t\tgenerate(){}\n\n\t\t/**\n\t\t * Update the private params object with the \n\t\t * values of the parameters at the given index\n\t\t * @param parameters { [name: string]: Float32Array },\n\t\t * @param index number\n\t\t */\n\t\tupdateParams(parameters, index) {\n\t\t\tfor (const paramName in parameters) {\n\t\t\t\tconst param = parameters[paramName];\n\t\t\t\tif (param.length > 1) {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][index];\n\t\t\t\t} else {\n\t\t\t\t\tthis.params[paramName] = parameters[paramName][0];\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Process a single frame of the audio\n\t\t * @param inputs Float32Array[][]\n\t\t * @param outputs Float32Array[][]\n\t\t */\n\t\tprocess(inputs, outputs, parameters) {\n\t\t\tconst input = inputs[0];\n\t\t\tconst output = outputs[0];\n\t\t\t// get the parameter values\n\t\t\tconst channelCount = Math.max(input && input.length || 0, output.length);\n\t\t\tfor (let sample = 0; sample < this.blockSize; sample++) {\n\t\t\t\tthis.updateParams(parameters, sample);\n\t\t\t\tfor (let channel = 0; channel < channelCount; channel++) {\n\t\t\t\t\tconst inputSample = input && input.length ? input[channel][sample] : 0;\n\t\t\t\t\toutput[channel][sample] = this.generate(inputSample, channel, this.params);\n\t\t\t\t}\n\t\t\t}\n\t\t\treturn !this.disposed;\n\t\t}\n\t};\n`;\naddToWorklet(singleIOProcess);\n//# sourceMappingURL=SingleIOProcessor.worklet.js.map","import { addToWorklet } from \"./WorkletGlobalScope.js\";\nconst delayLine = /* javascript */ `\n\t/**\n\t * A multichannel buffer for use within an AudioWorkletProcessor as a delay line\n\t */\n\tclass DelayLine {\n\t\t\n\t\tconstructor(size, channels) {\n\t\t\tthis.buffer = [];\n\t\t\tthis.writeHead = []\n\t\t\tthis.size = size;\n\n\t\t\t// create the empty channels\n\t\t\tfor (let i = 0; i < channels; i++) {\n\t\t\t\tthis.buffer[i] = new Float32Array(this.size);\n\t\t\t\tthis.writeHead[i] = 0;\n\t\t\t}\n\t\t}\n\n\t\t/**\n\t\t * Push a value onto the end\n\t\t * @param channel number\n\t\t * @param value number\n\t\t */\n\t\tpush(channel, value) {\n\t\t\tthis.writeHead[channel] += 1;\n\t\t\tif (this.writeHead[channel] > this.size) {\n\t\t\t\tthis.writeHead[channel] = 0;\n\t\t\t}\n\t\t\tthis.buffer[channel][this.writeHead[channel]] = value;\n\t\t}\n\n\t\t/**\n\t\t * Get the recorded value of the channel given the delay\n\t\t * @param channel number\n\t\t * @param delay number delay samples\n\t\t */\n\t\tget(channel, delay) {\n\t\t\tlet readHead = this.writeHead[channel] - Math.floor(delay);\n\t\t\tif (readHead < 0) {\n\t\t\t\treadHead += this.size;\n\t\t\t}\n\t\t\treturn this.buffer[channel][readHead];\n\t\t}\n\t}\n`;\naddToWorklet(delayLine);\n//# sourceMappingURL=DelayLine.worklet.js.map","import \"../../core/worklet/SingleIOProcessor.worklet.js\";\nimport \"../../core/worklet/DelayLine.worklet.js\";\nimport { registerProcessor } from \"../../core/worklet/WorkletGlobalScope.js\";\nexport const workletName = \"feedback-comb-filter\";\nconst feedbackCombFilter = /* javascript */ `\n\tclass FeedbackCombFilterWorklet extends SingleIOProcessor {\n\n\t\tconstructor(options) {\n\t\t\tsuper(options);\n\t\t\tthis.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);\n\t\t}\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"delayTime\",\n\t\t\t\tdefaultValue: 0.1,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 1,\n\t\t\t\tautomationRate: \"k-rate\"\n\t\t\t}, {\n\t\t\t\tname: \"feedback\",\n\t\t\t\tdefaultValue: 0.5,\n\t\t\t\tminValue: 0,\n\t\t\t\tmaxValue: 0.9999,\n\t\t\t\tautomationRate: \"k-rate\"\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, channel, parameters) {\n\t\t\tconst delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);\n\t\t\tthis.delayLine.push(channel, input + delayedSample * parameters.feedback);\n\t\t\treturn delayedSample;\n\t\t}\n\t}\n`;\nregisterProcessor(workletName, feedbackCombFilter);\n//# sourceMappingURL=FeedbackCombFilter.worklet.js.map","import { __decorate } from \"tslib\";\nimport { ToneAudioBuffers } from \"../core/context/ToneAudioBuffers.js\";\nimport { ftomf, intervalToFrequencyRatio } from \"../core/type/Conversions.js\";\nimport { FrequencyClass } from \"../core/type/Frequency.js\";\nimport { optionsFromArguments } from \"../core/util/Defaults.js\";\nimport { noOp } from \"../core/util/Interface.js\";\nimport { isArray, isNote, isNumber } from \"../core/util/TypeCheck.js\";\nimport { Instrument } from \"../instrument/Instrument.js\";\nimport { ToneBufferSource, } from \"../source/buffer/ToneBufferSource.js\";\nimport { timeRange } from \"../core/util/Decorator.js\";\nimport { assert } from \"../core/util/Debug.js\";\n/**\n * Pass in an object which maps the note's pitch or midi value to the url,\n * then you can trigger the attack and release of that note like other instruments.\n * By automatically repitching the samples, it is possible to play pitches which\n * were not explicitly included which can save loading time.\n *\n * For sample or buffer playback where repitching is not necessary,\n * use {@link Player}.\n * @example\n * const sampler = new Tone.Sampler({\n * \turls: {\n * \t\tA1: \"A1.mp3\",\n * \t\tA2: \"A2.mp3\",\n * \t},\n * \tbaseUrl: \"https://tonejs.github.io/audio/casio/\",\n * \tonload: () => {\n * \t\tsampler.triggerAttackRelease([\"C1\", \"E1\", \"G1\", \"B1\"], 0.5);\n * \t}\n * }).toDestination();\n * @category Instrument\n */\nexport class Sampler extends Instrument {\n    constructor() {\n        const options = optionsFromArguments(Sampler.getDefaults(), arguments, [\"urls\", \"onload\", \"baseUrl\"], \"urls\");\n        super(options);\n        this.name = \"Sampler\";\n        /**\n         * The object of all currently playing BufferSources\n         */\n        this._activeSources = new Map();\n        const urlMap = {};\n        Object.keys(options.urls).forEach((note) => {\n            const noteNumber = parseInt(note, 10);\n            assert(isNote(note) || (isNumber(noteNumber) && isFinite(noteNumber)), `url key is neither a note or midi pitch: ${note}`);\n            if (isNote(note)) {\n                // convert the note name to MIDI\n                const mid = new FrequencyClass(this.context, note).toMidi();\n                urlMap[mid] = options.urls[note];\n            }\n            else if (isNumber(noteNumber) && isFinite(noteNumber)) {\n                // otherwise if it's numbers assume it's midi\n                urlMap[noteNumber] = options.urls[noteNumber];\n            }\n        });\n        this._buffers = new ToneAudioBuffers({\n            urls: urlMap,\n            onload: options.onload,\n            baseUrl: options.baseUrl,\n            onerror: options.onerror,\n        });\n        this.attack = options.attack;\n        this.release = options.release;\n        this.curve = options.curve;\n        // invoke the callback if it's already loaded\n        if (this._buffers.loaded) {\n            // invoke onload deferred\n            Promise.resolve().then(options.onload);\n        }\n    }\n    static getDefaults() {\n        return Object.assign(Instrument.getDefaults(), {\n            attack: 0,\n            baseUrl: \"\",\n            curve: \"exponential\",\n            onload: noOp,\n            onerror: noOp,\n            release: 0.1,\n            urls: {},\n        });\n    }\n    /**\n     * Returns the difference in steps between the given midi note at the closets sample.\n     */\n    _findClosest(midi) {\n        // searches within 8 octaves of the given midi note\n        const MAX_INTERVAL = 96;\n        let interval = 0;\n        while (interval < MAX_INTERVAL) {\n            // check above and below\n            if (this._buffers.has(midi + interval)) {\n                return -interval;\n            }\n            else if (this._buffers.has(midi - interval)) {\n                return interval;\n            }\n            interval++;\n        }\n        throw new Error(`No available buffers for note: ${midi}`);\n    }\n    /**\n     * @param  notes\tThe note to play, or an array of notes.\n     * @param  time     When to play the note\n     * @param  velocity The velocity to play the sample back.\n     */\n    triggerAttack(notes, time, velocity = 1) {\n        this.log(\"triggerAttack\", notes, time, velocity);\n        if (!Array.isArray(notes)) {\n            notes = [notes];\n        }\n        notes.forEach((note) => {\n            const midiFloat = ftomf(new FrequencyClass(this.context, note).toFrequency());\n            const midi = Math.round(midiFloat);\n            const remainder = midiFloat - midi;\n            // find the closest note pitch\n            const difference = this._findClosest(midi);\n            const closestNote = midi - difference;\n            const buffer = this._buffers.get(closestNote);\n            const playbackRate = intervalToFrequencyRatio(difference + remainder);\n            // play that note\n            const source = new ToneBufferSource({\n                url: buffer,\n                context: this.context,\n                curve: this.curve,\n                fadeIn: this.attack,\n                fadeOut: this.release,\n                playbackRate,\n            }).connect(this.output);\n            source.start(time, 0, buffer.duration / playbackRate, velocity);\n            // add it to the active sources\n            if (!isArray(this._activeSources.get(midi))) {\n                this._activeSources.set(midi, []);\n            }\n            this._activeSources.get(midi).push(source);\n            // remove it when it's done\n            source.onended = () => {\n                if (this._activeSources && this._activeSources.has(midi)) {\n                    const sources = this._activeSources.get(midi);\n                    const index = sources.indexOf(source);\n                    if (index !== -1) {\n                        sources.splice(index, 1);\n                    }\n                }\n            };\n        });\n        return this;\n    }\n    /**\n     * @param  notes\tThe note to release, or an array of notes.\n     * @param  time     \tWhen to release the note.\n     */\n    triggerRelease(notes, time) {\n        this.log(\"triggerRelease\", notes, time);\n        if (!Array.isArray(notes)) {\n            notes = [notes];\n        }\n        notes.forEach((note) => {\n            const midi = new FrequencyClass(this.context, note).toMidi();\n            // find the note\n            if (this._activeSources.has(midi) &&\n                this._activeSources.get(midi).length) {\n                const sources = this._activeSources.get(midi);\n                time = this.toSeconds(time);\n                sources.forEach((source) => {\n                    source.stop(time);\n                });\n                this._activeSources.set(midi, []);\n            }\n        });\n        return this;\n    }\n    /**\n     * Release all currently active notes.\n     * @param  time     \tWhen to release the notes.\n     */\n    releaseAll(time) {\n        const computedTime = this.toSeconds(time);\n        this._activeSources.forEach((sources) => {\n            while (sources.length) {\n                const source = sources.shift();\n                source.stop(computedTime);\n            }\n        });\n        return this;\n    }\n    sync() {\n        if (this._syncState()) {\n            this._syncMethod(\"triggerAttack\", 1);\n            this._syncMethod(\"triggerRelease\", 1);\n        }\n        return this;\n    }\n    /**\n     * Invoke the attack phase, then after the duration, invoke the release.\n     * @param  notes\tThe note to play and release, or an array of notes.\n     * @param  duration The time the note should be held\n     * @param  time     When to start the attack\n     * @param  velocity The velocity of the attack\n     */\n    triggerAttackRelease(notes, duration, time, velocity = 1) {\n        const computedTime = this.toSeconds(time);\n        this.triggerAttack(notes, computedTime, velocity);\n        if (isArray(duration)) {\n            assert(isArray(notes), \"notes must be an array when duration is array\");\n            notes.forEach((note, index) => {\n                const d = duration[Math.min(index, duration.length - 1)];\n                this.triggerRelease(note, computedTime + this.toSeconds(d));\n            });\n        }\n        else {\n            this.triggerRelease(notes, computedTime + this.toSeconds(duration));\n        }\n        return this;\n    }\n    /**\n     * Add a note to the sampler.\n     * @param  note      The buffer's pitch.\n     * @param  url  Either the url of the buffer, or a buffer which will be added with the given name.\n     * @param  callback  The callback to invoke when the url is loaded.\n     */\n    add(note, url, callback) {\n        assert(isNote(note) || isFinite(note), `note must be a pitch or midi: ${note}`);\n        if (isNote(note)) {\n            // convert the note name to MIDI\n            const mid = new FrequencyClass(this.context, note).toMidi();\n            this._buffers.add(mid, url, callback);\n        }\n        else {\n            // otherwise if it's numbers assume it's midi\n            this._buffers.add(note, url, callback);\n        }\n        return this;\n    }\n    /**\n     * If the buffers are loaded or not\n     */\n    get loaded() {\n        return this._buffers.loaded;\n    }\n    /**\n     * Clean up\n     */\n    dispose() {\n        super.dispose();\n        this._buffers.dispose();\n        this._activeSources.forEach((sources) => {\n            sources.forEach((source) => source.dispose());\n        });\n        this._activeSources.clear();\n        return this;\n    }\n}\n__decorate([\n    timeRange(0)\n], Sampler.prototype, \"attack\", void 0);\n__decorate([\n    timeRange(0)\n], Sampler.prototype, \"release\", void 0);\n//# sourceMappingURL=Sampler.js.map","import { Param } from \"../../core/context/Param.js\";\nimport { ToneAudioNode, } from \"../../core/context/ToneAudioNode.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\n/**\n * Panner is an equal power Left/Right Panner. It is a wrapper around the StereoPannerNode.\n * @example\n * return Tone.Offline(() => {\n * // move the input signal from right to left\n * \tconst panner = new Tone.Panner(1).toDestination();\n * \tpanner.pan.rampTo(-1, 0.5);\n * \tconst osc = new Tone.Oscillator(100).connect(panner).start();\n * }, 0.5, 2);\n * @category Component\n */\nexport class Panner extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(Panner.getDefaults(), arguments, [\n            \"pan\",\n        ]);\n        super(options);\n        this.name = \"Panner\";\n        /**\n         * the panner node\n         */\n        this._panner = this.context.createStereoPanner();\n        this.input = this._panner;\n        this.output = this._panner;\n        this.pan = new Param({\n            context: this.context,\n            param: this._panner.pan,\n            value: options.pan,\n            minValue: -1,\n            maxValue: 1,\n        });\n        // this is necessary for standardized-audio-context\n        // doesn't make any difference for the native AudioContext\n        // https://github.com/chrisguttandin/standardized-audio-context/issues/647\n        this._panner.channelCount = options.channelCount;\n        this._panner.channelCountMode = \"explicit\";\n        // initial value\n        readOnly(this, \"pan\");\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            pan: 0,\n            channelCount: 1,\n        });\n    }\n    dispose() {\n        super.dispose();\n        this._panner.disconnect();\n        this.pan.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=Panner.js.map","import \"../core/worklet/SingleIOProcessor.worklet.js\";\nimport { registerProcessor } from \"../core/worklet/WorkletGlobalScope.js\";\nexport const workletName = \"bit-crusher\";\nexport const bitCrusherWorklet = /* javascript */ `\n\tclass BitCrusherWorklet extends SingleIOProcessor {\n\n\t\tstatic get parameterDescriptors() {\n\t\t\treturn [{\n\t\t\t\tname: \"bits\",\n\t\t\t\tdefaultValue: 12,\n\t\t\t\tminValue: 1,\n\t\t\t\tmaxValue: 16,\n\t\t\t\tautomationRate: 'k-rate'\n\t\t\t}];\n\t\t}\n\n\t\tgenerate(input, _channel, parameters) {\n\t\t\tconst step = Math.pow(0.5, parameters.bits - 1);\n\t\t\tconst val = step * Math.floor(input / step + 0.5);\n\t\t\treturn val;\n\t\t}\n\t}\n`;\nregisterProcessor(workletName, bitCrusherWorklet);\n//# sourceMappingURL=BitCrusher.worklet.js.map","import { Gain } from \"../../core/context/Gain.js\";\nimport { ToneAudioNode, } from \"../../core/context/ToneAudioNode.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\n/**\n * Solo lets you isolate a specific audio stream. When an instance is set to `solo=true`,\n * it will mute all other instances of Solo.\n * @example\n * const soloA = new Tone.Solo().toDestination();\n * const oscA = new Tone.Oscillator(\"C4\", \"sawtooth\").connect(soloA);\n * const soloB = new Tone.Solo().toDestination();\n * const oscB = new Tone.Oscillator(\"E4\", \"square\").connect(soloB);\n * soloA.solo = true;\n * // no audio will pass through soloB\n * @category Component\n */\nexport class Solo extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(Solo.getDefaults(), arguments, [\n            \"solo\",\n        ]);\n        super(options);\n        this.name = \"Solo\";\n        this.input = this.output = new Gain({\n            context: this.context,\n        });\n        if (!Solo._allSolos.has(this.context)) {\n            Solo._allSolos.set(this.context, new Set());\n        }\n        Solo._allSolos.get(this.context).add(this);\n        // set initially\n        this.solo = options.solo;\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            solo: false,\n        });\n    }\n    /**\n     * Isolates this instance and mutes all other instances of Solo.\n     * Only one instance can be soloed at a time. A soloed\n     * instance will report `solo=false` when another instance is soloed.\n     */\n    get solo() {\n        return this._isSoloed();\n    }\n    set solo(solo) {\n        if (solo) {\n            this._addSolo();\n        }\n        else {\n            this._removeSolo();\n        }\n        Solo._allSolos.get(this.context).forEach((instance) => instance._updateSolo());\n    }\n    /**\n     * If the current instance is muted, i.e. another instance is soloed\n     */\n    get muted() {\n        return this.input.gain.value === 0;\n    }\n    /**\n     * Add this to the soloed array\n     */\n    _addSolo() {\n        if (!Solo._soloed.has(this.context)) {\n            Solo._soloed.set(this.context, new Set());\n        }\n        Solo._soloed.get(this.context).add(this);\n    }\n    /**\n     * Remove this from the soloed array\n     */\n    _removeSolo() {\n        if (Solo._soloed.has(this.context)) {\n            Solo._soloed.get(this.context).delete(this);\n        }\n    }\n    /**\n     * Is this on the soloed array\n     */\n    _isSoloed() {\n        return (Solo._soloed.has(this.context) &&\n            Solo._soloed.get(this.context).has(this));\n    }\n    /**\n     * Returns true if no one is soloed\n     */\n    _noSolos() {\n        // either does not have any soloed added\n        return (!Solo._soloed.has(this.context) ||\n            // or has a solo set but doesn't include any items\n            (Solo._soloed.has(this.context) &&\n                Solo._soloed.get(this.context).size === 0));\n    }\n    /**\n     * Solo the current instance and unsolo all other instances.\n     */\n    _updateSolo() {\n        if (this._isSoloed()) {\n            this.input.gain.value = 1;\n        }\n        else if (this._noSolos()) {\n            // no one is soloed\n            this.input.gain.value = 1;\n        }\n        else {\n            this.input.gain.value = 0;\n        }\n    }\n    dispose() {\n        super.dispose();\n        Solo._allSolos.get(this.context).delete(this);\n        this._removeSolo();\n        return this;\n    }\n}\n/**\n * Hold all of the solo'ed tracks belonging to a specific context\n */\nSolo._allSolos = new Map();\n/**\n * Hold the currently solo'ed instance(s)\n */\nSolo._soloed = new Map();\n//# sourceMappingURL=Solo.js.map","import { readOnly } from \"../../core/util/Interface.js\";\nimport { ToneAudioNode, } from \"../../core/context/ToneAudioNode.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { Panner } from \"./Panner.js\";\nimport { Volume } from \"./Volume.js\";\n/**\n * PanVol is a Tone.Panner and Tone.Volume in one.\n * @example\n * // pan the incoming signal left and drop the volume\n * const panVol = new Tone.PanVol(-0.25, -12).toDestination();\n * const osc = new Tone.Oscillator().connect(panVol).start();\n * @category Component\n */\nexport class PanVol extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(PanVol.getDefaults(), arguments, [\n            \"pan\",\n            \"volume\",\n        ]);\n        super(options);\n        this.name = \"PanVol\";\n        this._panner = this.input = new Panner({\n            context: this.context,\n            pan: options.pan,\n            channelCount: options.channelCount,\n        });\n        this.pan = this._panner.pan;\n        this._volume = this.output = new Volume({\n            context: this.context,\n            volume: options.volume,\n        });\n        this.volume = this._volume.volume;\n        // connections\n        this._panner.connect(this._volume);\n        this.mute = options.mute;\n        readOnly(this, [\"pan\", \"volume\"]);\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            mute: false,\n            pan: 0,\n            volume: 0,\n            channelCount: 1,\n        });\n    }\n    /**\n     * Mute/unmute the volume\n     */\n    get mute() {\n        return this._volume.mute;\n    }\n    set mute(mute) {\n        this._volume.mute = mute;\n    }\n    dispose() {\n        super.dispose();\n        this._panner.dispose();\n        this.pan.dispose();\n        this._volume.dispose();\n        this.volume.dispose();\n        return this;\n    }\n}\n//# sourceMappingURL=PanVol.js.map","import { ToneAudioNode, } from \"../../core/context/ToneAudioNode.js\";\nimport { optionsFromArguments } from \"../../core/util/Defaults.js\";\nimport { Solo } from \"./Solo.js\";\nimport { PanVol } from \"./PanVol.js\";\nimport { readOnly } from \"../../core/util/Interface.js\";\nimport { Gain } from \"../../core/context/Gain.js\";\n/**\n * Channel provides a channel strip interface with volume, pan, solo and mute controls.\n * @see {@link PanVol} and {@link Solo}\n * @example\n * // pan the incoming signal left and drop the volume 12db\n * const channel = new Tone.Channel(-0.25, -12);\n * @category Component\n */\nexport class Channel extends ToneAudioNode {\n    constructor() {\n        const options = optionsFromArguments(Channel.getDefaults(), arguments, [\n            \"volume\",\n            \"pan\",\n        ]);\n        super(options);\n        this.name = \"Channel\";\n        this._solo = this.input = new Solo({\n            solo: options.solo,\n            context: this.context,\n        });\n        this._panVol = this.output = new PanVol({\n            context: this.context,\n            pan: options.pan,\n            volume: options.volume,\n            mute: options.mute,\n            channelCount: options.channelCount,\n        });\n        this.pan = this._panVol.pan;\n        this.volume = this._panVol.volume;\n        this._solo.connect(this._panVol);\n        readOnly(this, [\"pan\", \"volume\"]);\n    }\n    static getDefaults() {\n        return Object.assign(ToneAudioNode.getDefaults(), {\n            pan: 0,\n            volume: 0,\n            mute: false,\n            solo: false,\n            channelCount: 1,\n        });\n    }\n    /**\n     * Solo/unsolo the channel. Soloing is only relative to other {@link Channel}s and {@link Solo} instances\n     */\n    get solo() {\n        return this._solo.solo;\n    }\n    set solo(solo) {\n        this._solo.solo = solo;\n    }\n    /**\n     * If the current instance is muted, i.e. another instance is soloed,\n     * or the channel is muted\n     */\n    get muted() {\n        return this._solo.muted || this.mute;\n    }\n    /**\n     * Mute/unmute the volume\n     */\n    get mute() {\n        return this._panVol.mute;\n    }\n    set mute(mute) {\n        this._panVol.mute = mute;\n    }\n    /**\n     * Get the gain node belonging to the bus name. Create it if\n     * it doesn't exist\n     * @param name The bus name\n     */\n    _getBus(name) {\n        if (!Channel.buses.has(name)) {\n            Channel.buses.set(name, new Gain({ context: this.context }));\n        }\n        return Channel.buses.get(name);\n    }\n    /**\n     * Send audio to another channel using a string. `send` is a lot like\n     * {@link connect}, except it uses a string instead of an object. This can\n     * be useful in large applications to decouple sections since {@link send}\n     * and {@link receive} can be invoked separately in order to connect an object\n     * @param name The channel name to send the audio\n     * @param volume The amount of the signal to send.\n     * \tDefaults to 0db, i.e. send the entire signal\n     * @returns Returns the gain node of this connection.\n     */\n    send(name, volume = 0) {\n        const bus = this._getBus(name);\n        const sendKnob = new Gain({\n            context: this.context,\n            units: \"decibels\",\n            gain: volume,\n        });\n        this.connect(sendKnob);\n        sendKnob.connect(bus);\n        return sendKnob;\n    }\n    /**\n     * Receive audio from a channel which was connected with {@link send}.\n     * @param name The channel name to receive audio from.\n     */\n    receive(name) {\n        const bus = this._getBus(name);\n        bus.connect(this);\n        return this;\n    }\n    dispose() {\n        super.dispose();\n        this._panVol.dispose();\n        this.pan.dispose();\n        this.volume.dispose();\n        this._solo.dispose();\n        return this;\n    }\n}\n/**\n * Store the send/receive channels by name.\n */\nChannel.buses = new Map();\n//# sourceMappingURL=Channel.js.map","export { getContext, setContext } from \"./core/Global.js\";\nexport * from \"./classes.js\";\nexport * from \"./version.js\";\nimport { getContext } from \"./core/Global.js\";\nimport { ToneAudioBuffer } from \"./core/context/ToneAudioBuffer.js\";\nexport { start } from \"./core/Global.js\";\nexport { supported } from \"./core/context/AudioContext.js\";\n/**\n * The current audio context time of the global {@link BaseContext}.\n * @see {@link Context.now}\n * @category Core\n */\nexport function now() {\n    return getContext().now();\n}\n/**\n * The current audio context time of the global {@link Context} without the {@link Context.lookAhead}\n * @see {@link Context.immediate}\n * @category Core\n */\nexport function immediate() {\n    return getContext().immediate();\n}\n/**\n * The Transport object belonging to the global Tone.js Context.\n * @see {@link TransportClass}\n * @category Core\n * @deprecated Use {@link getTransport} instead\n */\nexport const Transport = getContext().transport;\n/**\n * The Transport object belonging to the global Tone.js Context.\n * @see {@link TransportClass}\n * @category Core\n */\nexport function getTransport() {\n    return getContext().transport;\n}\n/**\n * The Destination (output) belonging to the global Tone.js Context.\n * @see {@link DestinationClass}\n * @category Core\n * @deprecated Use {@link getDestination} instead\n */\nexport const Destination = getContext().destination;\n/**\n * @deprecated Use {@link getDestination} instead\n */\nexport const Master = getContext().destination;\n/**\n * The Destination (output) belonging to the global Tone.js Context.\n * @see {@link DestinationClass}\n * @category Core\n */\nexport function getDestination() {\n    return getContext().destination;\n}\n/**\n * The {@link ListenerClass} belonging to the global Tone.js Context.\n * @category Core\n * @deprecated Use {@link getListener} instead\n */\nexport const Listener = getContext().listener;\n/**\n * The {@link ListenerClass} belonging to the global Tone.js Context.\n * @category Core\n */\nexport function getListener() {\n    return getContext().listener;\n}\n/**\n * Draw is used to synchronize the draw frame with the Transport's callbacks.\n * @see {@link DrawClass}\n * @category Core\n * @deprecated Use {@link getDraw} instead\n */\nexport const Draw = getContext().draw;\n/**\n * Get the singleton attached to the global context.\n * Draw is used to synchronize the draw frame with the Transport's callbacks.\n * @see {@link DrawClass}\n * @category Core\n */\nexport function getDraw() {\n    return getContext().draw;\n}\n/**\n * A reference to the global context\n * @see {@link Context}\n * @deprecated Use {@link getContext} instead\n */\nexport const context = getContext();\n/**\n * Promise which resolves when all of the loading promises are resolved.\n * Alias for static {@link ToneAudioBuffer.loaded} method.\n * @category Core\n */\nexport function loaded() {\n    return ToneAudioBuffer.loaded();\n}\n// this fills in name changes from 13.x to 14.x\nimport { ToneAudioBuffers } from \"./core/context/ToneAudioBuffers.js\";\nimport { ToneBufferSource } from \"./source/buffer/ToneBufferSource.js\";\n/** @deprecated Use {@link ToneAudioBuffer} */\nexport const Buffer = ToneAudioBuffer;\n/** @deprecated Use {@link ToneAudioBuffers} */\nexport const Buffers = ToneAudioBuffers;\n/** @deprecated Use {@link ToneBufferSource} */\nexport const BufferSource = ToneBufferSource;\n//# sourceMappingURL=index.js.map","type EventHandler<T> = T extends undefined ? () => void : (data: T) => void;\r\n\r\ninterface ListenerEntry<T> {\r\n\thandler: EventHandler<T>;\r\n\tcontext?: unknown;\r\n\tonce?: boolean;\r\n}\r\n\r\n/**\r\n * Individual event instance that can be subscribed to and emitted.\r\n */\r\nexport class TypedEmitter<T = undefined> {\r\n\tprivate listeners: ListenerEntry<T>[] = [];\r\n\r\n\t/**\r\n\t * Register an event listener.\r\n\t *\r\n\t * @param handler - The event handler function.\r\n\t * @param context - Optional context to bind the handler to.\r\n\t */\r\n\tpublic on(handler: EventHandler<T>, context?: unknown): void {\r\n\t\tthis.listeners.push({ handler, context });\r\n\t}\r\n\r\n\t/**\r\n\t * Register a one-time event listener.\r\n\t *\r\n\t * @param handler - The event handler function.\r\n\t * @param context - Optional context to bind the handler to.\r\n\t */\r\n\tpublic once(handler: EventHandler<T>, context?: unknown): void {\r\n\t\tthis.listeners.push({ handler, context, once: true });\r\n\t}\r\n\r\n\t/**\r\n\t * Unregister an event listener.\r\n\t *\r\n\t * @param handler - The event handler function to remove.\r\n\t * @param context - Optional context that was used when registering.\r\n\t */\r\n\tpublic off(handler: EventHandler<T>, context?: unknown): void {\r\n\t\tthis.listeners = this.listeners.filter((entry) => {\r\n\t\t\treturn !(entry.handler === handler && (entry.context === context || !context));\r\n\t\t});\r\n\t}\r\n\r\n\t/**\r\n\t * Emit the event.\r\n\t *\r\n\t * @param data - The event data.\r\n\t */\r\n\tpublic emit(...args: T extends undefined ? [] : [T]): void {\r\n\t\t// Create a copy to avoid issues if listeners are removed during emission\r\n\t\tconst listeners = this.listeners.slice();\r\n\r\n\t\tfor (let i = 0; i < listeners.length; i++) {\r\n\t\t\tconst entry = listeners[i];\r\n\r\n\t\t\tif (entry.once) {\r\n\t\t\t\tthis.off(entry.handler, entry.context);\r\n\t\t\t}\r\n\r\n\t\t\tif (entry.context) {\r\n\t\t\t\t(entry.handler as (...args: unknown[]) => void).call(entry.context, ...args);\r\n\t\t\t} else {\r\n\t\t\t\t(entry.handler as (...args: unknown[]) => void)(...args);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Remove all event listeners.\r\n\t */\r\n\tpublic clear(): void {\r\n\t\tthis.listeners = [];\r\n\t}\r\n\r\n\t/**\r\n\t * Get the number of listeners.\r\n\t *\r\n\t * @returns The number of listeners.\r\n\t */\r\n\tpublic get count(): number {\r\n\t\treturn this.listeners.length;\r\n\t}\r\n}\r\n","import { Midi } from \"@tonejs/midi\";\r\nimport clamp from \"lodash-es/clamp\";\r\nimport defaults from \"lodash-es/defaults\";\r\nimport * as Tone from \"tone\";\r\nimport type { Dict } from \"./types\";\r\nimport { TypedEmitter } from \"./typed-emitter\";\r\n\r\nconst CENTER_NOTE = \"A3\";\r\nconst MAX_QUEUE = 64;\r\nconst BUFFER_TIME = 3;\r\n\r\nexport interface NoteJSON {\r\n\ttime: number;\r\n\tmidi: number;\r\n\tname: string;\r\n\tvelocity: number;\r\n\tduration: number;\r\n\tticks: number;\r\n\tdurationTicks: number;\r\n}\r\n\r\nexport interface PlayOptions {\r\n\ttype: \"attack-release\" | \"attack\" | \"release\";\r\n\tdelay: number;\r\n\ttranspose: number;\r\n\tduration: number;\r\n\tvolume: number;\r\n}\r\n\r\nexport const DEFAULT_PLAY_OPTIONS: PlayOptions = {\r\n\ttype: \"attack-release\",\r\n\tdelay: 0,\r\n\ttranspose: 0,\r\n\tduration: 0,\r\n\tvolume: 1,\r\n};\r\n\r\nexport interface SourceConfig {\r\n\turl: string;\r\n\tvolume?: number;\r\n}\r\n\r\nexport interface SourceEntry extends SourceConfig {\r\n\tduration: number;\r\n}\r\n\r\nexport interface ToneAudioConfig {\r\n\tmasterVolume?: number;\r\n\tsources: Dict<SourceConfig>;\r\n}\r\n\r\nexport interface MidiPlaybackData {\r\n\ttracks: ReadonlyArray<MidiPlaybackTrackData>;\r\n\tduration: number;\r\n\tstart: number;\r\n}\r\n\r\nexport interface MidiPlaybackTrackData {\r\n\tname: string;\r\n\tnotes: NoteJSON[];\r\n\toriginal: NoteJSON[];\r\n\tloops: number;\r\n}\r\n\r\nexport interface MidiStartedEventData {\r\n\tmidi: Midi;\r\n}\r\n\r\nexport interface NoteScheduledEventData {\r\n\tabsoluteScheduledTime: number;\r\n\ttrackName: string;\r\n\tnoteData: NoteJSON;\r\n}\r\n\r\nexport class ToneAudio {\r\n\tpublic static buffers: Dict<Tone.ToneAudioBuffer> = {};\r\n\r\n\tpublic static async loadBuffers(config: ToneAudioConfig) {\r\n\t\tconst entries = Object.entries(config.sources);\r\n\r\n\t\tconst requests = [];\r\n\r\n\t\ttry {\r\n\t\t\tfor (let i = 0; i < entries.length; i++) {\r\n\t\t\t\tconst el = entries[i][1];\r\n\r\n\t\t\t\tif (!ToneAudio.buffers[el.url]) {\r\n\t\t\t\t\tconst buffer = new Tone.ToneAudioBuffer();\r\n\t\t\t\t\trequests.push(buffer.load(el.url));\r\n\t\t\t\t\tToneAudio.buffers[el.url] = buffer;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\r\n\t\t\t// TODO: Concurrent request limit.\r\n\t\t\tawait Promise.all(requests);\r\n\t\t} catch (err) {\r\n\t\t\tconsole.error(err);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic static semitoneToRate(semitones: number): number {\r\n\t\treturn Math.exp((semitones * Math.log(2)) / 12);\r\n\t}\r\n\r\n\tpublic readonly onMidiStarted = new TypedEmitter<MidiStartedEventData>();\r\n\tpublic readonly onNoteScheduled = new TypedEmitter<NoteScheduledEventData>();\r\n\r\n\tprivate samplers: Dict<Tone.Sampler> = {};\r\n\tprivate sources: Dict<SourceEntry> = {};\r\n\tprivate currentMidiPlayback?: MidiPlaybackData;\r\n\tprivate currentMidiData?: Midi;\r\n\tprivate config!: ToneAudioConfig;\r\n\r\n\tpublic async init(config: ToneAudioConfig) {\r\n\t\tif (this.config) {\r\n\t\t\tthrow new Error(\"Already initialized\");\r\n\t\t}\r\n\r\n\t\tthis.config = config;\r\n\r\n\t\tawait ToneAudio.loadBuffers(config);\r\n\r\n\t\tthis.initInstruments(config);\r\n\r\n\t\twindow.addEventListener(\"focus\", () => Tone.getDestination().volume.rampTo(0, 0.1));\r\n\t\twindow.addEventListener(\"blur\", () => Tone.getDestination().volume.rampTo(-Infinity, 0.1));\r\n\t}\r\n\r\n\tpublic update() {\r\n\t\tif (!document.hasFocus() || Tone.getContext().state !== \"running\") {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tif (this.currentMidiPlayback) {\r\n\t\t\tthis.updateMusic(this.currentMidiPlayback);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic now() {\r\n\t\treturn Tone.now();\r\n\t}\r\n\r\n\tprivate initInstruments(options: ToneAudioConfig) {\r\n\t\tconst sources = Object.entries(options.sources);\r\n\r\n\t\tfor (let i = 0; i < sources.length; i++) {\r\n\t\t\tconst entry = sources[i];\r\n\t\t\tconst key = entry[0];\r\n\t\t\tconst el = entry[1];\r\n\r\n\t\t\tconst buffer = ToneAudio.buffers[el.url];\r\n\r\n\t\t\tconst duration = buffer.duration;\r\n\r\n\t\t\tthis.sources[key] = { ...el, ...{ duration } };\r\n\r\n\t\t\tconst sampler = new Tone.Sampler({\r\n\t\t\t\turls: { [CENTER_NOTE]: buffer },\r\n\t\t\t\tvolume: el.volume ?? 0,\r\n\t\t\t}).toDestination();\r\n\r\n\t\t\tthis.samplers[key] = sampler;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic play(name: string, options: Partial<PlayOptions> = {}) {\r\n\t\tconst source = this.sources[name];\r\n\r\n\t\tif (!source) {\r\n\t\t\tthrow new Error(`Can't find sound with name \"${name}\"`);\r\n\t\t}\r\n\r\n\t\toptions.duration = options.duration ?? source.duration;\r\n\r\n\t\tconst { type, delay, transpose, volume, duration } = defaults(options, DEFAULT_PLAY_OPTIONS);\r\n\r\n\t\tconst sampler = this.samplers[name];\r\n\r\n\t\tlet note = CENTER_NOTE;\r\n\r\n\t\tlet time = Tone.now();\r\n\r\n\t\tif (transpose !== 0) {\r\n\t\t\toptions.transpose = clamp(transpose, -48, 48);\r\n\t\t\tnote = Tone.Midi(note).transpose(options.transpose).toNote();\r\n\t\t}\r\n\r\n\t\tif (delay > 0) {\r\n\t\t\ttime += delay;\r\n\t\t}\r\n\r\n\t\tswitch (type) {\r\n\t\t\tdefault:\r\n\t\t\tcase \"attack-release\":\r\n\t\t\t\tsampler.triggerAttackRelease(note, duration, time, volume);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"attack\":\r\n\t\t\t\tsampler.triggerAttack(note, time, volume);\r\n\t\t\t\tbreak;\r\n\r\n\t\t\tcase \"release\":\r\n\t\t\t\tsampler.triggerRelease(note, time);\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\r\n\tpublic async playMidi(url: string) {\r\n\t\tif (this.currentMidiData) {\r\n\t\t\treturn;\r\n\t\t}\r\n\r\n\t\tconst midi = await Midi.fromUrl(url);\r\n\r\n\t\tthis.currentMidiData = midi;\r\n\r\n\t\tthis.currentMidiPlayback = {\r\n\t\t\tduration: midi.duration,\r\n\t\t\tstart: Tone.now() + 0.5,\r\n\t\t\ttracks: midi.tracks.map((el) => {\r\n\t\t\t\treturn {\r\n\t\t\t\t\tname: el.name,\r\n\t\t\t\t\toriginal: [...el.notes],\r\n\t\t\t\t\tnotes: [...el.notes],\r\n\t\t\t\t\tloops: 0,\r\n\t\t\t\t};\r\n\t\t\t}),\r\n\t\t};\r\n\r\n\t\tthis.onMidiStarted.emit({ midi });\r\n\t}\r\n\r\n\tprivate updateMusic(midi: MidiPlaybackData) {\r\n\t\tconst { tracks, start, duration } = midi;\r\n\r\n\t\tconst now = Tone.now();\r\n\r\n\t\tfor (let i = 0; i < tracks.length; i++) {\r\n\t\t\tconst track = tracks[i];\r\n\r\n\t\t\tlet totalQueued = 0;\r\n\r\n\t\t\tconst sampler = this.samplers[track.name];\r\n\r\n\t\t\tif (track.notes.length === 0) continue;\r\n\r\n\t\t\twhile (track.notes[0].time + start + duration * track.loops < now + BUFFER_TIME) {\r\n\t\t\t\tconst note = track.notes.shift();\r\n\r\n\t\t\t\tif (!note) break;\r\n\r\n\t\t\t\t// Loop note array.\r\n\t\t\t\tif (track.notes.length === 0) {\r\n\t\t\t\t\ttrack.notes = track.notes.concat(track.original);\r\n\t\t\t\t\ttrack.loops++;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Skip past notes.\r\n\t\t\t\tif (note.time + start + duration * track.loops < now) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\t// Skip too many notes.\r\n\t\t\t\tif (totalQueued > MAX_QUEUE) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\r\n\t\t\t\ttotalQueued++;\r\n\r\n\t\t\t\tconst loopOffset = duration * track.loops;\r\n\r\n\t\t\t\ttry {\r\n\t\t\t\t\tsampler.triggerAttackRelease(note.name, note.duration, note.time + start + loopOffset, note.velocity * 0.333);\r\n\t\t\t\t} catch (err) {\r\n\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t} finally {\r\n\t\t\t\t\tthis.onNoteScheduled.emit({\r\n\t\t\t\t\t\tabsoluteScheduledTime: note.time + loopOffset + start,\r\n\t\t\t\t\t\ttrackName: track.name,\r\n\t\t\t\t\t\tnoteData: note,\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n\r\nconst unlock = async () => {\r\n\tdocument.body.removeEventListener(\"click\", unlock);\r\n\tdocument.body.removeEventListener(\"touchend\", unlock);\r\n\r\n\ttry {\r\n\t\tawait Tone.start();\r\n\t} catch (err) {\r\n\t\tconsole.error(err);\r\n\t}\r\n};\r\ndocument.body.addEventListener(\"click\", unlock);\r\ndocument.body.addEventListener(\"touchend\", unlock);\r\n","import baseClamp from './_baseClamp.js';\nimport toNumber from './toNumber.js';\n\n/**\n * Clamps `number` within the inclusive `lower` and `upper` bounds.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Number\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n * @example\n *\n * _.clamp(-10, -5, 5);\n * // => -5\n *\n * _.clamp(10, -5, 5);\n * // => 5\n */\nfunction clamp(number, lower, upper) {\n  if (upper === undefined) {\n    upper = lower;\n    lower = undefined;\n  }\n  if (upper !== undefined) {\n    upper = toNumber(upper);\n    upper = upper === upper ? upper : 0;\n  }\n  if (lower !== undefined) {\n    lower = toNumber(lower);\n    lower = lower === lower ? lower : 0;\n  }\n  return baseClamp(toNumber(number), lower, upper);\n}\n\nexport default clamp;\n","/**\n * The base implementation of `_.clamp` which doesn't coerce arguments.\n *\n * @private\n * @param {number} number The number to clamp.\n * @param {number} [lower] The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the clamped number.\n */\nfunction baseClamp(number, lower, upper) {\n  if (number === number) {\n    if (upper !== undefined) {\n      number = number <= upper ? number : upper;\n    }\n    if (lower !== undefined) {\n      number = number >= lower ? number : lower;\n    }\n  }\n  return number;\n}\n\nexport default baseClamp;\n","/** This serves as an alias to the namespaced Tween class. */\r\nexport class Ease extends createjs.Ease {}\r\n","import { TweenOptions } from \"./tween-props\";\r\nimport { Ease } from \"./ease\";\r\n\r\n/**\r\n * This serves as an alias to the namespaced Tween class.\r\n * Experimental - Adding type safety to createjs tweenjs API.\r\n */\r\n// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\nexport class Tween<T = any> extends createjs.Tween {\r\n\tpublic static get<T>(target: T, options?: TweenOptions): Tween<T> {\r\n\t\treturn new Tween(target, options);\r\n\t}\r\n\r\n\twait(duration: number, passive?: boolean): this {\r\n\t\treturn super.wait(duration, passive) as this;\r\n\t}\r\n\r\n\tto(props: Partial<T>, duration?: number, ease = Ease.sineInOut): this {\r\n\t\treturn super.to(props, duration, ease) as this;\r\n\t}\r\n\r\n\tlabel(name: string): this {\r\n\t\treturn super.label(name) as this;\r\n\t}\r\n\r\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n\tcall(callback: (...params: any[]) => void, params?: Partial<T>[], scope?: unknown): this {\r\n\t\treturn super.call(callback, params, scope) as this;\r\n\t}\r\n\r\n\tset(props: Partial<T>, target?: T): this {\r\n\t\treturn super.set(props, target) as this;\r\n\t}\r\n\r\n\tplay(tween?: Tween<T>): this {\r\n\t\treturn super.play(tween) as this;\r\n\t}\r\n\r\n\tpause(tween?: Tween<T>): this {\r\n\t\treturn super.pause(tween) as this;\r\n\t}\r\n\r\n\tcomplete(): Promise<void> {\r\n\t\treturn new Promise((resolve) => this.call(() => resolve()));\r\n\t}\r\n}\r\n","import { Tween } from \"./tween\";\r\n\r\n/**\r\n * This serves as an alias to the namespaced Tween class.\r\n */\r\nexport class TweenGroup extends createjs.TweenGroup {\r\n\t// eslint-disable-next-line @typescript-eslint/no-explicit-any\r\n\tpublic get<T>(target: T, props?: any): Tween<T> {\r\n\t\treturn this.add(new Tween(target, props)) as Tween<T>;\r\n\t}\r\n}\r\n","import * as SPINE from \"@esotericsoftware/spine-pixi-v8\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport * as screenfull from \"screenfull\";\r\nimport { lerp } from \"../maths/lerp\";\r\nimport { ToneAudio } from \"./tone-audio\";\r\nimport { Tween } from \"./tween\";\r\nimport { TweenGroup } from \"./tween-group\";\r\nimport { TweenOptions } from \"./tween-props\";\r\nimport { TypedEmitter } from \"./typed-emitter\";\r\nimport { Dict } from \"./types\";\r\n\r\nconst LOAD_OPTIONS: PIXI.LoadOptions = {\r\n\tstrategy: \"retry\",\r\n\tretryDelay: 3,\r\n\tretryCount: 10,\r\n};\r\n\r\nexport const MAX_DPR = 4;\r\nexport const MIN_DPR = 0.5;\r\n\r\nexport interface AppReferenceSize {\r\n\twidth: number;\r\n\theight: number;\r\n\tblend: number;\r\n\tresolutionBreakpoints: Array<{\r\n\t\tmaxSideSizeThreshold: number;\r\n\t\tresolution: number;\r\n\t}>;\r\n}\r\n\r\nexport interface ResizeEventData {\r\n\twidth: number;\r\n\theight: number;\r\n}\r\n\r\n/**\r\n * Engine-level app class.\r\n *\r\n * This does not contain any game-specific logic and is intended to be extended by app implementations.\r\n */\r\nexport class AppBase extends PIXI.Application {\r\n\tpublic readonly onInit = new TypedEmitter<void>();\r\n\tpublic readonly onUpdate = new TypedEmitter<number>();\r\n\tpublic readonly onResize = new TypedEmitter<ResizeEventData>();\r\n\r\n\t/** App audio manager reference */\r\n\tpublic readonly audio = new ToneAudio();\r\n\r\n\t/** Root container. */\r\n\tpublic readonly root = new PIXI.Container();\r\n\r\n\t/** Renderer pixel ratio. Use resizeRoot to modify. */\r\n\tpublic get dpr() {\r\n\t\treturn this._dpr;\r\n\t}\r\n\tprivate _dpr = 1;\r\n\r\n\t/** Renderer virtual width. Use resizeRoot to modify. */\r\n\tpublic get width() {\r\n\t\treturn this._width;\r\n\t}\r\n\tprivate _width = 0;\r\n\r\n\t/** Renderer virtual height. Use resizeRoot to modify. */\r\n\tpublic get height() {\r\n\t\treturn this._height;\r\n\t}\r\n\tprivate _height = 0;\r\n\r\n\t/** Global app tween group. */\r\n\tprotected readonly tweenGroup = new TweenGroup(false, 1);\r\n\r\n\tprivate readonly selectedDpr: number;\r\n\r\n\tprivate innerWidthLastUpdate = 0;\r\n\tprivate innerHeightLastUpdate = 0;\r\n\r\n\tprivate initialized = false;\r\n\r\n\tprivate assets: {\r\n\t\tjson: Dict<unknown>;\r\n\t\tatlas: Dict<PIXI.Spritesheet>;\r\n\t\tbmfont: Dict<PIXI.BitmapFont>;\r\n\t\tspine: Dict<SPINE.SpineFromOptions>;\r\n\t} = {\r\n\t\tjson: {},\r\n\t\tatlas: {},\r\n\t\tbmfont: {},\r\n\t\tspine: {},\r\n\t};\r\n\r\n\tconstructor(\r\n\t\t/** Reference size of the app. If this is not defined, no root scaling is applied. */\r\n\t\tprivate readonly referenceSize: AppReferenceSize,\r\n\t\tselectedDpr?: number,\r\n\t) {\r\n\t\tsuper();\r\n\r\n\t\tthis.selectedDpr = selectedDpr ?? this.getSelectedDpr();\r\n\t}\r\n\r\n\t/** Initialize the app */\r\n\tpublic startApp() {\r\n\t\tif (!this.initialized) {\r\n\t\t\tthis.initialized = true;\r\n\t\t\tthis.stage.addChild(this.root);\r\n\t\t\tthis.ticker.add(this.update, this);\r\n\t\t\tthis.ticker.add(this.audio.update, this.audio);\r\n\t\t\tthis.onInit.emit();\r\n\t\t} else {\r\n\t\t\tthrow new Error(\"App already initialized!\");\r\n\t\t}\r\n\t}\r\n\r\n\tprivate update(ticker: PIXI.Ticker) {\r\n\t\tif (window.innerWidth !== this.innerWidthLastUpdate || window.innerHeight !== this.innerHeightLastUpdate) {\r\n\t\t\tthis.innerWidthLastUpdate = window.innerWidth;\r\n\t\t\tthis.innerHeightLastUpdate = window.innerHeight;\r\n\t\t\tthis.resizeRoot(window.innerWidth, window.innerHeight, this.selectedDpr);\r\n\t\t}\r\n\r\n\t\tthis.onUpdate.emit(ticker.deltaTime);\r\n\t}\r\n\r\n\tpublic tween<T>(target: T, options?: TweenOptions): Tween<T> {\r\n\t\tconst tween = this.tweenGroup.get(target, options);\r\n\t\treturn tween;\r\n\t}\r\n\r\n\tpublic delay(time: number) {\r\n\t\treturn new Promise((resolve) => this.tween(this).wait(time).call(resolve));\r\n\t}\r\n\r\n\tpublic requestFullscreen(): Promise<void> {\r\n\t\treturn screenfull.request(this.canvas as unknown as Element);\r\n\t}\r\n\r\n\tpublic preventContextMenu() {\r\n\t\twindow.addEventListener(\"contextmenu\", (e) => e.preventDefault(), false);\r\n\t}\r\n\r\n\tprivate getSelectedDpr(): number {\r\n\t\tfor (let i = this.referenceSize.resolutionBreakpoints.length - 1; i >= 0; i--) {\r\n\t\t\tconst el = this.referenceSize.resolutionBreakpoints[i];\r\n\t\t\tconst maxSideSize = Math.max(window.innerWidth, window.innerHeight) * window.devicePixelRatio;\r\n\t\t\tif (maxSideSize > el.maxSideSizeThreshold || i === 0) {\r\n\t\t\t\treturn el.resolution;\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\treturn 1;\r\n\t}\r\n\r\n\tprivate getTextureDpr(): number {\r\n\t\treturn this.selectedDpr;\r\n\t}\r\n\r\n\tprivate resizeRoot(windowWidth: number, windowHeight: number, dpr: number) {\r\n\t\tthis._width = windowWidth;\r\n\t\tthis._height = windowHeight;\r\n\t\tthis._dpr = dpr;\r\n\r\n\t\tif (this.canvas && this.canvas.style) {\r\n\t\t\tthis.canvas.style.width = this.width + \"px\";\r\n\t\t\tthis.canvas.style.height = this.height + \"px\";\r\n\t\t}\r\n\r\n\t\tthis.renderer.resolution = this.dpr;\r\n\t\tthis.renderer.resize(this.width, this.height);\r\n\r\n\t\t// Center root container but this could be made optional.\r\n\t\tthis.root.x = this._width / 2;\r\n\t\tthis.root.y = this._height / 2;\r\n\r\n\t\tconst refSize = lerp(this.referenceSize.width, this.referenceSize.height, this.referenceSize.blend);\r\n\t\tconst refWindow = lerp(windowWidth, windowHeight, this.referenceSize.blend);\r\n\t\tconst r = refSize / refWindow;\r\n\t\tthis.root.scale.set(1 / r);\r\n\r\n\t\tthis._width *= r;\r\n\t\tthis._height *= r;\r\n\r\n\t\tthis.onResize.emit({\r\n\t\t\twidth: this.renderer.width * r,\r\n\t\t\theight: this.renderer.height * r,\r\n\t\t});\r\n\t}\r\n\r\n\tpublic getAtlas(atlasPath: string): PIXI.Spritesheet {\r\n\t\tconst resource = this.assets.atlas[atlasPath];\r\n\r\n\t\tif (!resource) {\r\n\t\t\tthrow new Error(`Can't find atlas: \"${atlasPath}\"`);\r\n\t\t}\r\n\r\n\t\treturn resource;\r\n\t}\r\n\r\n\tpublic getFrame(atlasPath: string, frameName: string): PIXI.Texture {\r\n\t\tconst atlas = this.getAtlas(atlasPath);\r\n\r\n\t\tif (!atlas.textures || !(atlas.textures[frameName] instanceof PIXI.Texture)) {\r\n\t\t\tthrow new Error(`Can't find frame \"${frameName}\" in atlas \"${atlasPath}\"`);\r\n\t\t}\r\n\r\n\t\treturn atlas.textures[frameName];\r\n\t}\r\n\r\n\tpublic getSpine(spinePath: string): SPINE.SpineFromOptions {\r\n\t\tconst spine = this.assets.spine[spinePath];\r\n\r\n\t\tif (!spine) {\r\n\t\t\tthrow new Error(`Can't find spine: \"${spinePath}\"`);\r\n\t\t}\r\n\r\n\t\treturn spine;\r\n\t}\r\n\r\n\tpublic getJson(name: string): unknown {\r\n\t\tconst resource = this.assets.json[name];\r\n\r\n\t\tif (!resource) {\r\n\t\t\tthrow new Error(`Can't find json: \"${name}\"`);\r\n\t\t}\r\n\r\n\t\treturn this.assets.json[name];\r\n\t}\r\n\r\n\t/** Add a spine asset to the loader. */\r\n\tpublic async addSpine(spinePath: string, scale: number = this.getTextureDpr()) {\r\n\t\tPIXI.Assets.add({ alias: `${spinePath}-atlas`, src: `${spinePath}@${scale}x.atlas` });\r\n\t\tPIXI.Assets.add({ alias: `${spinePath}-data`, src: `${spinePath}.json` });\r\n\t\tawait PIXI.Assets.load([`${spinePath}-data`, `${spinePath}-atlas`], LOAD_OPTIONS);\r\n\r\n\t\tthis.assets.spine[spinePath] = {\r\n\t\t\tatlas: `${spinePath}-atlas`,\r\n\t\t\tskeleton: `${spinePath}-data`,\r\n\t\t\tscale: 1,\r\n\t\t};\r\n\t}\r\n\r\n\t/** Add an atlas asset to the loader. */\r\n\tpublic async addAtlas(atlasPath: string, scale: number = this.getTextureDpr()) {\r\n\t\tconst res = (await PIXI.Assets.load({ alias: atlasPath, src: `${atlasPath}@${scale}x.json` }, LOAD_OPTIONS)) as PIXI.Spritesheet;\r\n\t\tthis.assets.atlas[atlasPath] = res;\r\n\t}\r\n\r\n\t/** Add an atlas asset to the loader. */\r\n\tpublic async addBitmapFont(assetPath: string, scale: number = this.getTextureDpr()) {\r\n\t\tconst res = (await PIXI.Assets.load(`${assetPath}@${scale}x.fnt`, LOAD_OPTIONS)) as PIXI.BitmapFont;\r\n\t\tthis.assets.bmfont[assetPath] = res;\r\n\t}\r\n\r\n\t/** Add an JSON asset to the loader. */\r\n\tpublic async addJson(jsonName: string, url: string) {\r\n\t\tconst res = await PIXI.Assets.load(url, LOAD_OPTIONS);\r\n\t\tthis.assets.json[jsonName] = res;\r\n\t}\r\n}\r\n","export enum SceneKey {\r\n\tMenu = \"menu\",\r\n\tAceOfShadows = \"aceOfShadows\",\r\n\tMagicWords = \"magicWords\",\r\n\tPhoenixFlame = \"phoenixFlame\",\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { AppBase, ResizeEventData } from \"./app-base\";\r\nimport { TypedEmitter } from \"./typed-emitter\";\r\nimport { Tween } from \"./tween\";\r\nimport { TweenGroup } from \"./tween-group\";\r\nimport { TweenOptions } from \"./tween-props\";\r\n\r\n// These are copied from the Container inline type.\r\nexport type GameObjectDestroyOptions = {\r\n\tchildren?: boolean;\r\n\ttexture?: boolean;\r\n\tbaseTexture?: boolean;\r\n};\r\n\r\n/** The start of a core component class. */\r\nexport class GameObject<T extends AppBase> extends PIXI.Container {\r\n\t/** Pixi application reference. */\r\n\tpublic app: T;\r\n\r\n\t/** Reference to audio manager instance. */\r\n\tpublic get audio() {\r\n\t\treturn this.app.audio;\r\n\t}\r\n\r\n\tpublic readonly onInit = new TypedEmitter();\r\n\tpublic readonly onDestroy = new TypedEmitter();\r\n\r\n\tprotected readonly tweenGroup = new TweenGroup(false, 1);\r\n\r\n\tprotected loadError?: unknown;\r\n\r\n\t/**\r\n\t * Core app component class helps manage linkages to core systems.\r\n\t *\r\n\t * @param app - Pixi application reference.\r\n\t */\r\n\tconstructor(app: T) {\r\n\t\tsuper();\r\n\r\n\t\tthis.app = app;\r\n\r\n\t\t// Defer load to the next tick.\r\n\t\tthis.app.ticker.addOnce(async () => {\r\n\t\t\ttry {\r\n\t\t\t\tawait this.handleLoad?.();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tconsole.error(\"Error during component load:\", error);\r\n\t\t\t\tthis.loadError = error;\r\n\t\t\t\tthis.handleLoadError?.(error);\r\n\t\t\t} finally {\r\n\t\t\t\tthis.ready();\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\r\n\tpublic ready() {\r\n\t\t// Call init function if it exists.\r\n\t\tif (this.handleInit) {\r\n\t\t\tthis.onInit.emit();\r\n\t\t\tthis.handleInit();\r\n\t\t}\r\n\r\n\t\t// Call resize function if it exists.\r\n\t\tif (this.handleResize) {\r\n\t\t\tthis.handleResize(this.app);\r\n\t\t}\r\n\r\n\t\t// Add listeners\r\n\t\tif (this.handleUpdate) {\r\n\t\t\tthis.app.onUpdate.on(this.handleUpdate, this);\r\n\t\t}\r\n\r\n\t\tif (this.handleResize) {\r\n\t\t\tthis.app.onResize.on(this.handleResize, this);\r\n\t\t}\r\n\t}\r\n\r\n\tpublic destroy(options?: GameObjectDestroyOptions) {\r\n\t\tif (this.handleUpdate) this.app.onUpdate.off(this.handleUpdate, this);\r\n\t\tif (this.handleResize) this.app.onResize.off(this.handleResize, this);\r\n\t\tif (this.handleUnload) {\r\n\t\t\ttry {\r\n\t\t\t\tthis.handleUnload();\r\n\t\t\t} catch (error) {\r\n\t\t\t\tthis.handleUnloadError?.(error);\r\n\t\t\t}\r\n\t\t}\r\n\r\n\t\tthis.clearTweens();\r\n\r\n\t\tthis.onDestroy.emit();\r\n\r\n\t\tsuper.destroy(options);\r\n\t}\r\n\r\n\tpublic clearTweens() {\r\n\t\tthis.tweenGroup.reset(true);\r\n\t}\r\n\r\n\tprotected tween<T>(target: T = {} as T, options?: TweenOptions): Tween<T> {\r\n\t\tconst tween = this.tweenGroup.get(target, options);\r\n\t\treturn tween;\r\n\t}\r\n\r\n\tprotected delay(time: number) {\r\n\t\treturn new Promise((resolve) => this.tween(this).wait(time).call(resolve));\r\n\t}\r\n\r\n\t/**\r\n\t * Init method is called after app ready event. If app is already ready, it\r\n\t * runs during the constructor.\r\n\t */\r\n\tprotected handleInit?(): void;\r\n\r\n\t/**\r\n\t * Optional method called on update.\r\n\t *\r\n\t * @param dt - Frame delta time.\r\n\t */\r\n\tprotected handleUpdate?(dt: number): void;\r\n\r\n\t/**\r\n\t * Optional method called on resize. Note, this is called once after init\r\n\t * regardles of wether the app has resized or not.\r\n\t *\r\n\t * @param width - App virtual width.\r\n\t * @param height - App virtual height.\r\n\t */\r\n\tprotected handleResize?(data: ResizeEventData): void;\r\n\r\n\t/**\r\n\t * Optional method called on destroy.\r\n\t */\r\n\tprotected async handleUnload?(): Promise<void>;\r\n\r\n\t/**\r\n\t * Optional method called on unload.\r\n\t */\r\n\tprotected handleUnloadError?(error: unknown): Promise<void>;\r\n\r\n\t/**\r\n\t * Optional method called on load.\r\n\t */\r\n\tprotected async handleLoad?(): Promise<void>;\r\n\r\n\t/**\r\n\t * Optional method called on load error.\r\n\t */\r\n\tprotected handleLoadError?(error: unknown): Promise<void>;\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\n\r\nimport { GameObject } from \"./game-object\";\r\nimport { AppBase } from \"./app-base\";\r\n\r\nconst STATUS_TEXT_STYLE: PIXI.TextStyleOptions = {\r\n\tfill: \"#ffffff\",\r\n\tfontFamily: \"monospace\",\r\n\tfontSize: 48,\r\n\twordWrap: true,\r\n\twordWrapWidth: 800,\r\n\talign: \"left\",\r\n};\r\n\r\n/**\r\n * Engine-level scene class.\r\n *\r\n * This does not have any game-specific logic, that should go in subclasses.\r\n */\r\nexport class Scene<T extends AppBase> extends GameObject<T> {\r\n\tprotected statusText = new PIXI.Text({ text: \"\", style: STATUS_TEXT_STYLE });\r\n\r\n\tconstructor(app: T) {\r\n\t\tsuper(app);\r\n\r\n\t\tthis.statusText.anchor.set(0.5);\r\n\t\tthis.statusText.visible = false;\r\n\t\tthis.addChild(this.statusText);\r\n\t}\r\n\r\n\tprotected displayAndLogError(error: unknown) {\r\n\t\tif (typeof error === \"string\") {\r\n\t\t\tthis.displayStatusText(error, 0xff0000);\r\n\t\t} else if (error instanceof Error) {\r\n\t\t\tthis.displayStatusText(error.message, 0xff0000);\r\n\t\t}\r\n\r\n\t\tconsole.error(error);\r\n\t}\r\n\r\n\tprotected hideStatusText() {\r\n\t\tthis.statusText.visible = false;\r\n\t}\r\n\r\n\tprotected displayStatusText(status: string, color: number = 0xffffff) {\r\n\t\tthis.statusText.visible = true;\r\n\t\tthis.statusText.text = status;\r\n\t\tthis.statusText.tint = color;\r\n\t}\r\n}\r\n","import defaults from \"lodash-es/defaults\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport * as Tone from \"tone\";\r\nimport { AppBase } from \"../app-base\";\r\nimport { GameObject } from \"../game-object\";\r\n\r\nexport interface ButtonOptions {\r\n\ttextureDown: PIXI.Texture;\r\n\ttextureUp: PIXI.Texture;\r\n}\r\n\r\nexport const ButtonOptionDefaults = {\r\n\ttextureDown: PIXI.Texture.WHITE,\r\n\ttextureUp: PIXI.Texture.WHITE,\r\n};\r\n\r\n/** Very quick button class. */\r\nexport class UiButton extends GameObject<AppBase> {\r\n\tprotected back: PIXI.Sprite;\r\n\tprivate config: ButtonOptions;\r\n\r\n\tpublic get tint() {\r\n\t\treturn this.back.tint as number;\r\n\t}\r\n\tpublic set tint(value: number) {\r\n\t\tthis.back.tint = value;\r\n\t}\r\n\r\n\tconstructor(app: AppBase, config: ButtonOptions) {\r\n\t\tsuper(app);\r\n\r\n\t\tthis.app = app;\r\n\t\tthis.config = defaults(config, ButtonOptionDefaults);\r\n\r\n\t\tthis.back = PIXI.Sprite.from(this.config.textureUp);\r\n\t\tthis.back.anchor.set(0.5);\r\n\r\n\t\tthis.addChild(this.back);\r\n\r\n\t\tthis.on(\"mouseover\", this.handlePointerOver, this);\r\n\t\tthis.on(\"pointerout\", this.handlePointerOut, this);\r\n\t\tthis.on(\"pointertap\", this.handlePointerTap, this);\r\n\t\tthis.on(\"pointerdown\", this.handlePointerDown, this);\r\n\t\tthis.on(\"pointerup\", this.handlePointerUp, this);\r\n\t\tthis.on(\"pointerupoutside\", this.handlePointerCancel, this);\r\n\t\tthis.on(\"pointercancel\", this.handlePointerCancel, this);\r\n\r\n\t\t// Start Tone.js context on first interaction.\r\n\t\tif (Tone.getContext().state !== \"running\") {\r\n\t\t\tthis.on(\"pointerdown\", this.toneStart, this);\r\n\t\t\tthis.on(\"pointerup\", this.toneStart, this);\r\n\t\t}\r\n\r\n\t\tthis.setInteractive(true);\r\n\t}\r\n\r\n\tpublic setInteractive(value: boolean) {\r\n\t\tthis.eventMode = value ? \"static\" : \"none\";\r\n\t\tthis.cursor = value ? \"pointer\" : \"auto\";\r\n\t}\r\n\r\n\tprivate async toneStart() {\r\n\t\tthis.off(\"pointerdown\", this.toneStart, this);\r\n\t\tthis.off(\"pointerup\", this.toneStart, this);\r\n\t\tif (Tone.getContext().state !== \"running\") {\r\n\t\t\ttry {\r\n\t\t\t\tawait Tone.start();\r\n\t\t\t} catch (err) {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected handlePointerOut() {\r\n\t\tthis.back.texture = this.config.textureUp;\r\n\t}\r\n\r\n\tprotected handlePointerOver() {\r\n\t\tthis.back.texture = this.config.textureUp;\r\n\t}\r\n\r\n\tprotected async handlePointerUp() {\r\n\t\tthis.back.texture = this.config.textureUp;\r\n\r\n\t\tthis.back.scale.set(1);\r\n\r\n\t\tif (Tone.getContext().state === \"running\") {\r\n\t\t\t// TODO: Configuration.\r\n\t\t\tthis.app.audio.play(\"blop\", { transpose: 24, delay: 0.01 });\r\n\t\t}\r\n\t}\r\n\r\n\tprotected async handlePointerDown() {\r\n\t\tthis.back.texture = this.config.textureDown;\r\n\r\n\t\tthis.back.scale.set(0.9);\r\n\r\n\t\tif (Tone.getContext().state === \"running\") {\r\n\t\t\t// TODO: Configuration.\r\n\t\t\tthis.app.audio.play(\"blop\", { transpose: 12 });\r\n\t\t}\r\n\t}\r\n\r\n\tprotected handlePointerCancel() {\r\n\t\tthis.alpha = 1;\r\n\t}\r\n\r\n\tprotected handlePointerTap() {}\r\n}\r\n","import defaults from \"lodash-es/defaults\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { AppBase } from \"../app-base\";\r\nimport { UiButton, ButtonOptions } from \"./ui-button\";\r\n\r\nexport interface ButtonTextOptions extends Partial<PIXI.TextStyle>, ButtonOptions {\r\n\ttext: string;\r\n\ttextStyle: PIXI.TextStyleOptions;\r\n}\r\n\r\nexport const ButtonTextOptionDefaults: ButtonTextOptions = {\r\n\ttextureUp: PIXI.Texture.WHITE,\r\n\ttextureDown: PIXI.Texture.WHITE,\r\n\ttextStyle: {\r\n\t\tfontSize: 32,\r\n\t\tfontFamily: \"Arial\",\r\n\t},\r\n\ttext: \"\",\r\n};\r\n\r\nexport class UiTextButton extends UiButton {\r\n\tpublic get text(): string {\r\n\t\treturn this.labelText.text;\r\n\t}\r\n\tpublic set text(value: string) {\r\n\t\tthis.labelText.text = value;\r\n\t}\r\n\r\n\tprivate options: ButtonTextOptions;\r\n\tprivate labelText: PIXI.Text;\r\n\r\n\tconstructor(app: AppBase, options: ButtonTextOptions) {\r\n\t\tsuper(app, options);\r\n\r\n\t\tthis.options = defaults(options, ButtonTextOptionDefaults);\r\n\r\n\t\tthis.labelText = new PIXI.Text({\r\n\t\t\ttext: this.options.text,\r\n\t\t\tstyle: this.options.textStyle,\r\n\t\t});\r\n\t\tthis.labelText.text = this.options.text || \"\";\r\n\t\tthis.labelText.anchor.set(0.5);\r\n\t\tthis.labelText.y = -10;\r\n\r\n\t\tthis.addChild(this.labelText);\r\n\r\n\t\tthis.on(\"pointerdown\", () => this.labelText.scale.set(0.9));\r\n\t\tthis.on(\"pointerout\", () => this.labelText.scale.set(1));\r\n\t\tthis.on(\"pointerup\", () => this.labelText.scale.set(1));\r\n\t}\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\n\r\nexport const DEFAULT_TEXT_STYLE: PIXI.TextStyleOptions = {\r\n\tfontSize: 96,\r\n\tfontFamily: \"Arial\",\r\n\tfill: 0xffffff,\r\n\talign: \"center\",\r\n};\r\n","import * as PIXI from \"pixi.js\";\r\nimport { ResizeEventData } from \"../../common/app-base\";\r\nimport { GameObject } from \"../../common/game-object\";\r\nimport { UiTextButton } from \"../../common/ui/ui-text-button\";\r\nimport { DEFAULT_TEXT_STYLE } from \"../constants\";\r\nimport { DemoApp } from \"../demo-app\";\r\n\r\nconst BUTTON_PADDING = 32;\r\n\r\nexport interface DemoAppHudOptions {\r\n\t/** Callback function to be called when the back button is pressed */\r\n\tonBackButtonPressed: () => void;\r\n}\r\n\r\n/** Demo App HUD with a back button in the top left corner. */\r\nexport class DemoAppHUD extends GameObject<DemoApp> {\r\n\tprivate backButton: UiTextButton;\r\n\tprivate options: DemoAppHudOptions;\r\n\r\n\tconstructor(app: DemoApp, options: DemoAppHudOptions) {\r\n\t\tsuper(app);\r\n\r\n\t\tthis.options = options;\r\n\r\n\t\t// Create back button\r\n\t\tthis.backButton = new UiTextButton(app, {\r\n\t\t\ttext: \"Back\",\r\n\t\t\ttextureUp: PIXI.Texture.WHITE,\r\n\t\t\ttextureDown: PIXI.Texture.WHITE,\r\n\t\t\ttextStyle: {\r\n\t\t\t\t...DEFAULT_TEXT_STYLE,\r\n\t\t\t\t...{ fontSize: 48 },\r\n\t\t\t},\r\n\t\t});\r\n\r\n\t\t// Add click handler\r\n\t\tthis.backButton.on(\"pointertap\", this.handleBackButtonPress, this);\r\n\r\n\t\tthis.addChild(this.backButton);\r\n\t}\r\n\r\n\tprivate handleBackButtonPress() {\r\n\t\tif (this.options.onBackButtonPressed) {\r\n\t\t\tthis.options.onBackButtonPressed();\r\n\t\t}\r\n\t}\r\n\r\n\tprotected handleResize({ width, height }: ResizeEventData) {\r\n\t\tthis.backButton.position.set(-width / 2 + BUTTON_PADDING + 60, -height / 2 + BUTTON_PADDING + 30);\r\n\t}\r\n}\r\n","export const TOTAL_CARDS = 144;\r\n\r\nexport const ANIMATION_DURATION = 1000;\r\n\r\nexport const DECK_STACKING_OFFSET = 0.5;\r\n\r\nexport const CARD_FRAME_IDS = [\r\n\t\"card_clubs_02\" as const,\r\n\t\"card_clubs_03\" as const,\r\n\t\"card_clubs_04\" as const,\r\n\t\"card_clubs_05\" as const,\r\n\t\"card_clubs_06\" as const,\r\n\t\"card_clubs_07\" as const,\r\n\t\"card_clubs_08\" as const,\r\n\t\"card_clubs_09\" as const,\r\n\t\"card_clubs_10\" as const,\r\n\t\"card_clubs_A\" as const,\r\n\t\"card_clubs_J\" as const,\r\n\t\"card_clubs_K\" as const,\r\n\t\"card_clubs_Q\" as const,\r\n\t\"card_diamonds_02\" as const,\r\n\t\"card_diamonds_03\" as const,\r\n\t\"card_diamonds_04\" as const,\r\n\t\"card_diamonds_05\" as const,\r\n\t\"card_diamonds_06\" as const,\r\n\t\"card_diamonds_07\" as const,\r\n\t\"card_diamonds_08\" as const,\r\n\t\"card_diamonds_09\" as const,\r\n\t\"card_diamonds_10\" as const,\r\n\t\"card_diamonds_A\" as const,\r\n\t\"card_diamonds_J\" as const,\r\n\t\"card_diamonds_K\" as const,\r\n\t\"card_diamonds_Q\" as const,\r\n\t\"card_hearts_02\" as const,\r\n\t\"card_hearts_03\" as const,\r\n\t\"card_hearts_04\" as const,\r\n\t\"card_hearts_05\" as const,\r\n\t\"card_hearts_06\" as const,\r\n\t\"card_hearts_07\" as const,\r\n\t\"card_hearts_08\" as const,\r\n\t\"card_hearts_09\" as const,\r\n\t\"card_hearts_10\" as const,\r\n\t\"card_hearts_A\" as const,\r\n\t\"card_hearts_J\" as const,\r\n\t\"card_hearts_K\" as const,\r\n\t\"card_hearts_Q\" as const,\r\n\t\"card_joker_black\" as const,\r\n\t\"card_joker_red\" as const,\r\n\t\"card_spades_02\" as const,\r\n\t\"card_spades_03\" as const,\r\n\t\"card_spades_04\" as const,\r\n\t\"card_spades_05\" as const,\r\n\t\"card_spades_06\" as const,\r\n\t\"card_spades_07\" as const,\r\n\t\"card_spades_08\" as const,\r\n\t\"card_spades_09\" as const,\r\n\t\"card_spades_10\" as const,\r\n\t\"card_spades_A\" as const,\r\n\t\"card_spades_J\" as const,\r\n\t\"card_spades_K\" as const,\r\n\t\"card_spades_Q\" as const,\r\n] as const;\r\n","import * as PIXI from \"pixi.js\";\r\nimport { DemoApp } from \"../../demo-app\";\r\nimport { GameObject } from \"../../../common/game-object\";\r\nimport { CARD_FRAME_IDS } from \"./constants\";\r\n\r\n/**\r\n * Represents a single card sprite (using Graphics as a sprite-like object).\r\n *\r\n * Currently a bit redundant, but useful for future expansions (e.g., adding card-specific effects).\r\n */\r\nexport class CardSprite extends GameObject<DemoApp> {\r\n\tprivate static readonly CARD_SCALE_COMPENSATION = 8;\r\n\r\n\tprivate cardSprite: PIXI.Sprite;\r\n\r\n\tconstructor(\r\n\t\tapp: DemoApp,\r\n\t\tprivate readonly cardIndex: number,\r\n\t) {\r\n\t\tsuper(app);\r\n\r\n\t\tconst frameID = CARD_FRAME_IDS[this.cardIndex % CARD_FRAME_IDS.length];\r\n\t\tthis.cardSprite = PIXI.Sprite.from(app.getFrame(\"textures/cards\", frameID));\r\n\t\tthis.cardSprite.anchor.set(0.5);\r\n\r\n\t\t// Card sprites are 8bit style textures and scaled up with nearest neighbor algorithm\r\n\t\tthis.cardSprite.scale.set(CardSprite.CARD_SCALE_COMPENSATION);\r\n\r\n\t\tthis.addChild(this.cardSprite);\r\n\t}\r\n}\r\n","/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeFloor = Math.floor,\n    nativeRandom = Math.random;\n\n/**\n * The base implementation of `_.random` without support for returning\n * floating-point numbers.\n *\n * @private\n * @param {number} lower The lower bound.\n * @param {number} upper The upper bound.\n * @returns {number} Returns the random number.\n */\nfunction baseRandom(lower, upper) {\n  return lower + nativeFloor(nativeRandom() * (upper - lower + 1));\n}\n\nexport default baseRandom;\n","import baseRandom from './_baseRandom.js';\n\n/**\n * A specialized version of `_.shuffle` which mutates and sets the size of `array`.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @param {number} [size=array.length] The size of `array`.\n * @returns {Array} Returns `array`.\n */\nfunction shuffleSelf(array, size) {\n  var index = -1,\n      length = array.length,\n      lastIndex = length - 1;\n\n  size = size === undefined ? length : size;\n  while (++index < size) {\n    var rand = baseRandom(index, lastIndex),\n        value = array[rand];\n\n    array[rand] = array[index];\n    array[index] = value;\n  }\n  array.length = size;\n  return array;\n}\n\nexport default shuffleSelf;\n","import copyArray from './_copyArray.js';\nimport shuffleSelf from './_shuffleSelf.js';\n\n/**\n * A specialized version of `_.shuffle` for arrays.\n *\n * @private\n * @param {Array} array The array to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction arrayShuffle(array) {\n  return shuffleSelf(copyArray(array));\n}\n\nexport default arrayShuffle;\n","/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\nexport default copyArray;\n","import arrayMap from './_arrayMap.js';\n\n/**\n * The base implementation of `_.values` and `_.valuesIn` which creates an\n * array of `object` property values corresponding to the property names\n * of `props`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Array} props The property names to get values for.\n * @returns {Object} Returns the array of property values.\n */\nfunction baseValues(object, props) {\n  return arrayMap(props, function(key) {\n    return object[key];\n  });\n}\n\nexport default baseValues;\n","/**\n * A specialized version of `_.map` for arrays without support for iteratee\n * shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the new mapped array.\n */\nfunction arrayMap(array, iteratee) {\n  var index = -1,\n      length = array == null ? 0 : array.length,\n      result = Array(length);\n\n  while (++index < length) {\n    result[index] = iteratee(array[index], index, array);\n  }\n  return result;\n}\n\nexport default arrayMap;\n","import overArg from './_overArg.js';\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeKeys = overArg(Object.keys, Object);\n\nexport default nativeKeys;\n","/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\nexport default overArg;\n","import isPrototype from './_isPrototype.js';\nimport nativeKeys from './_nativeKeys.js';\n\n/** Used for built-in method references. */\nvar objectProto = Object.prototype;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\nexport default baseKeys;\n","import arrayLikeKeys from './_arrayLikeKeys.js';\nimport baseKeys from './_baseKeys.js';\nimport isArrayLike from './isArrayLike.js';\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\nexport default keys;\n","import shuffleSelf from './_shuffleSelf.js';\nimport values from './values.js';\n\n/**\n * The base implementation of `_.shuffle`.\n *\n * @private\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n */\nfunction baseShuffle(collection) {\n  return shuffleSelf(values(collection));\n}\n\nexport default baseShuffle;\n","import baseValues from './_baseValues.js';\nimport keys from './keys.js';\n\n/**\n * Creates an array of the own enumerable string keyed property values of `object`.\n *\n * **Note:** Non-object values are coerced to objects.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property values.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.values(new Foo);\n * // => [1, 2] (iteration order is not guaranteed)\n *\n * _.values('hi');\n * // => ['h', 'i']\n */\nfunction values(object) {\n  return object == null ? [] : baseValues(object, keys(object));\n}\n\nexport default values;\n","import { shuffle } from \"lodash-es\";\r\nimport { TweenGroup } from \"../../../common/tween-group\";\r\nimport { TypedEmitter } from \"../../../common/typed-emitter\";\r\nimport { ANIMATION_DURATION, TOTAL_CARDS } from \"./constants\";\r\n\r\n/** Card data model */\r\nexport interface CardData {\r\n\tindex: number;\r\n\tstackId: number; // 1 or 2\r\n\tindexInStack: number;\r\n}\r\n\r\n/** Event data for card movement */\r\nexport interface CardMoveEvent {\r\n\tcardData: CardData;\r\n\tfromStackId: number;\r\n\ttoStackId: number;\r\n\tfromStackIndex: number;\r\n\ttoStackIndex: number;\r\n}\r\n\r\n/** Direction of card movement between stacks */\r\nexport enum CardMoveDirection {\r\n\tToStack1 = \"toStack1\",\r\n\tToStack2 = \"toStack2\",\r\n}\r\n\r\n/** Emits events that the scene can listen to for visual updates */\r\nexport class CardsController {\r\n\tpublic readonly onCardMove = new TypedEmitter<CardMoveEvent>();\r\n\tpublic readonly onCardsInitialized = new TypedEmitter<CardData[]>();\r\n\r\n\tprivate moveDirection: CardMoveDirection = CardMoveDirection.ToStack2;\r\n\r\n\tprivate allCards: CardData[] = [];\r\n\tprivate stack1: CardData[] = [];\r\n\tprivate stack2: CardData[] = [];\r\n\r\n\tpublic init(tweenGroup: TweenGroup): void {\r\n\t\tfor (let i = 0; i < TOTAL_CARDS; i++) {\r\n\t\t\tconst cardData = { index: i, stackId: 1, indexInStack: i };\r\n\t\t\tthis.allCards.push(cardData);\r\n\t\t\tthis.stack1.push(cardData);\r\n\t\t}\r\n\r\n\t\tthis.stack1 = this.shuffleStack(this.stack1);\r\n\r\n\t\tthis.onCardsInitialized.emit(this.allCards);\r\n\r\n\t\ttweenGroup.get(this, { loop: -1 }).call(this.moveTopCard.bind(this)).wait(ANIMATION_DURATION);\r\n\t}\r\n\r\n\tprivate shuffleStack(stack: CardData[]): CardData[] {\r\n\t\tstack = shuffle(stack);\r\n\r\n\t\tfor (let i = 0; i < stack.length; i++) {\r\n\t\t\tconst cardData = stack[i];\r\n\t\t\tcardData.indexInStack = i;\r\n\t\t}\r\n\r\n\t\treturn stack;\r\n\t}\r\n\r\n\tprivate moveTopCard() {\r\n\t\tif (this.stack1.length === 0 && this.moveDirection === CardMoveDirection.ToStack2) this.moveDirection = CardMoveDirection.ToStack1;\r\n\t\tif (this.stack2.length === 0 && this.moveDirection === CardMoveDirection.ToStack1) this.moveDirection = CardMoveDirection.ToStack2;\r\n\r\n\t\t// Determine which stack to move from\r\n\t\tconst fromStack = this.moveDirection === CardMoveDirection.ToStack2 ? this.stack1 : this.stack2;\r\n\t\tconst toStack = this.moveDirection === CardMoveDirection.ToStack2 ? this.stack2 : this.stack1;\r\n\t\tconst fromStackId = fromStack === this.stack1 ? 1 : 2;\r\n\t\tconst toStackId = fromStack === this.stack1 ? 2 : 1;\r\n\r\n\t\tconst cardData = fromStack[fromStack.length - 1];\r\n\t\tconst fromStackIndex = cardData.indexInStack;\r\n\t\tconst toStackIndex = toStack.length;\r\n\r\n\t\t// Update card data\r\n\t\tcardData.stackId = toStackId;\r\n\t\tcardData.indexInStack = toStackIndex;\r\n\r\n\t\t// Update stacks\r\n\t\tfromStack.pop();\r\n\t\ttoStack.push(cardData);\r\n\r\n\t\t// Emit move event\r\n\t\tthis.onCardMove.emit({ cardData, fromStackId, toStackId, fromStackIndex, toStackIndex });\r\n\t}\r\n}\r\n","import arrayShuffle from './_arrayShuffle.js';\nimport baseShuffle from './_baseShuffle.js';\nimport isArray from './isArray.js';\n\n/**\n * Creates an array of shuffled values, using a version of the\n * [Fisher-Yates shuffle](https://en.wikipedia.org/wiki/Fisher-Yates_shuffle).\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Collection\n * @param {Array|Object} collection The collection to shuffle.\n * @returns {Array} Returns the new shuffled array.\n * @example\n *\n * _.shuffle([1, 2, 3, 4]);\n * // => [4, 1, 3, 2]\n */\nfunction shuffle(collection) {\n  var func = isArray(collection) ? arrayShuffle : baseShuffle;\n  return func(collection);\n}\n\nexport default shuffle;\n","import * as PIXI from \"pixi.js\";\r\nimport { ResizeEventData } from \"../../../common/app-base\";\r\nimport { Ease } from \"../../../common/ease\";\r\nimport { Scene } from \"../../../common/scene\";\r\nimport { lerp } from \"../../../maths/lerp\";\r\nimport { DemoApp } from \"../../demo-app\";\r\nimport { SceneKey } from \"../../scene-key\";\r\nimport { DemoAppHUD } from \"../../ui/demo-app-hud\";\r\nimport { CardSprite } from \"./card-sprite\";\r\nimport { CardData, CardMoveEvent, CardsController } from \"./cards-controller\";\r\nimport { ANIMATION_DURATION, DECK_STACKING_OFFSET } from \"./constants\";\r\n\r\nconst CARDS_ATLAS_PATH = \"textures/cards\";\r\n\r\nexport class AceOfShadowsScene extends Scene<DemoApp> {\r\n\tprivate hud = new DemoAppHUD(this.app, {\r\n\t\tonBackButtonPressed: () => this.app.showScene(SceneKey.Menu),\r\n\t});\r\n\r\n\tprivate cardsController = new CardsController();\r\n\r\n\tprivate cardSprites = new Map<number, CardSprite>();\r\n\r\n\tprivate stack1Container = new PIXI.Container();\r\n\tprivate stack2Container = new PIXI.Container();\r\n\r\n\t/**\r\n\t * Get the local position of a card in a deck based on its index in the stack.\r\n\t * Assumes cards are stacked with a fixed rotation.\r\n\t */\r\n\tpublic static getLocalCardDeckPosition(indexIndStack: number) {\r\n\t\treturn {\r\n\t\t\tx: -indexIndStack * DECK_STACKING_OFFSET,\r\n\t\t\ty: -indexIndStack * DECK_STACKING_OFFSET,\r\n\t\t};\r\n\t}\r\n\r\n\tprotected handleInit() {\r\n\t\t// Create containers for the two stacks\r\n\t\tthis.stack1Container.sortableChildren = true;\r\n\t\tthis.addChild(this.stack1Container);\r\n\r\n\t\tthis.stack2Container.sortableChildren = true;\r\n\t\tthis.addChild(this.stack2Container);\r\n\r\n\t\tthis.cardsController.onCardsInitialized.once(this.handleCardsInitialized, this);\r\n\t\tthis.cardsController.onCardMove.on(this.handleCardMove, this);\r\n\t\tthis.cardsController.init(this.tweenGroup);\r\n\r\n\t\tthis.addChild(this.hud);\r\n\t}\r\n\r\n\tprotected async handleLoad() {\r\n\t\tthis.displayStatusText(\"Loading scene assets...\");\r\n\r\n\t\tawait this.app.addAtlas(CARDS_ATLAS_PATH, 1);\r\n\r\n\t\t// Ideally this would be configurable per texture/atlas, but for demo purposes we'll just set it here.\r\n\t\tconst cardsAtlas = this.app.getAtlas(CARDS_ATLAS_PATH);\r\n\t\tcardsAtlas.textureSource.style.scaleMode = \"nearest\";\r\n\r\n\t\tthis.hideStatusText();\r\n\t}\r\n\r\n\tprotected async handleLoadError() {\r\n\t\tthis.displayAndLogError(\"Failed to load scene assets...\");\r\n\t}\r\n\r\n\tprotected async handleUnload(): Promise<void> {\r\n\t\tawait PIXI.Assets.unload(CARDS_ATLAS_PATH);\r\n\t}\r\n\r\n\tprivate handleCardsInitialized(cards: CardData[]) {\r\n\t\t// Create sprites for all cards\r\n\t\tfor (let i = 0; i < cards.length; i++) {\r\n\t\t\tconst cardData = cards[i];\r\n\r\n\t\t\tconst sprite = new CardSprite(this.app, i);\r\n\t\t\tthis.cardSprites.set(cardData.index, sprite);\r\n\r\n\t\t\t// Add to appropriate container based on initial stack\r\n\t\t\tif (cardData.stackId === 1) {\r\n\t\t\t\tthis.stack1Container.addChild(sprite);\r\n\t\t\t} else {\r\n\t\t\t\tthis.stack2Container.addChild(sprite);\r\n\t\t\t}\r\n\r\n\t\t\t// Position based on stack position\r\n\t\t\tsprite.position.copyFrom(AceOfShadowsScene.getLocalCardDeckPosition(cardData.indexInStack));\r\n\t\t\tsprite.zIndex = cardData.indexInStack;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate handleCardMove(event: CardMoveEvent) {\r\n\t\tconst sprite = this.cardSprites.get(event.cardData.index);\r\n\t\tif (!sprite) return;\r\n\r\n\t\tthis.app.audio.play(\"card_flap\", { volume: 0.33, transpose: 6 + Math.random() * 2 });\r\n\t\tthis.app.audio.play(\"swish\", { volume: 0.33, delay: 0.3, transpose: Math.random() * 2 });\r\n\r\n\t\tconst fromContainer = event.fromStackId === 1 ? this.stack1Container : this.stack2Container;\r\n\t\tconst toContainer = event.toStackId === 1 ? this.stack1Container : this.stack2Container;\r\n\r\n\t\tconst globalSpritePosition = fromContainer.toGlobal(sprite.position, undefined, true);\r\n\t\tconst fromPositionLocalToRoot = this.toLocal(globalSpritePosition, undefined, undefined, true);\r\n\r\n\t\tconst toPositionLocalToStack = AceOfShadowsScene.getLocalCardDeckPosition(event.toStackIndex);\r\n\r\n\t\tsprite.position.copyFrom(fromPositionLocalToRoot);\r\n\t\tsprite.rotation = fromContainer.rotation;\r\n\r\n\t\tthis.addChild(sprite);\r\n\r\n\t\tconst animationProgress = { value: 0 };\r\n\r\n\t\tconst tween = this.tween(animationProgress).to({ value: 1 }, ANIMATION_DURATION * 0.9, Ease.quadOut);\r\n\r\n\t\ttween.on(\"change\", () => {\r\n\t\t\t// Could be more efficient by caching the global position, but this will update correctly if containers move during animation\r\n\t\t\t// which they can do in a more complex scenario or when the browser window is resized\r\n\t\t\tconst toPositionLocalToRoot = this.toLocal(toContainer.toGlobal(toPositionLocalToStack), undefined, undefined, true);\r\n\r\n\t\t\tconst easedProgress = Ease.sineInOut(animationProgress.value);\r\n\t\t\tsprite.x = lerp(fromPositionLocalToRoot.x, toPositionLocalToRoot.x, easedProgress);\r\n\t\t\tsprite.y = lerp(fromPositionLocalToRoot.y, toPositionLocalToRoot.y, easedProgress);\r\n\r\n\t\t\tconst scaleOffset = (-Math.abs(easedProgress - 0.5) + 0.5) * 0.75;\r\n\t\t\tsprite.scale.set(1 + scaleOffset);\r\n\r\n\t\t\tsprite.rotation = Math.PI * 2 * easedProgress;\r\n\t\t});\r\n\r\n\t\ttween.on(\"complete\", () => {\r\n\t\t\ttoContainer.addChild(sprite);\r\n\t\t\tsprite.position.copyFrom(toPositionLocalToStack);\r\n\t\t\tsprite.zIndex = event.toStackIndex;\r\n\t\t\tsprite.rotation = 0;\r\n\t\t});\r\n\t}\r\n\r\n\tprotected handleResize({ width }: ResizeEventData) {\r\n\t\tthis.stack1Container.position.set(-width * 0.15, 0);\r\n\t\tthis.stack2Container.position.set(width * 0.15, 0);\r\n\t}\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { GameObject } from \"../../../common/game-object\";\r\nimport { DEFAULT_TEXT_STYLE } from \"../../constants\";\r\nimport { DemoApp } from \"../../demo-app\";\r\nimport { AvatarPosition, MagicWordsAvatarData, MagicWordsDialogueEntry, MagicWordsEmojiData } from \"./fetch-magic-words\";\r\n\r\nconst TEXT_WIDTH_PERCENTAGE = 0.5;\r\nconst TEXT_MAX_WIDTH = 900;\r\nconst BUBBLE_Y_PIVOT = 64;\r\nconst BUBBLE_PADDING_X = 32;\r\nconst BUBBLE_PADDING_Y = 32;\r\n\r\nexport type MagicWordsTextEmojiData = { asset: PIXI.Texture };\r\n\r\nexport type MagicWordsTextAvatarData = { avatarData: MagicWordsAvatarData; asset: PIXI.Texture };\r\n\r\nexport class MagicWordsText extends GameObject<DemoApp> {\r\n\tprivate emojiDataMap: Map<string, MagicWordsTextEmojiData> = new Map();\r\n\tprivate avatarDataMap: Map<string, MagicWordsTextAvatarData> = new Map();\r\n\r\n\tprivate textBubble = new PIXI.Graphics();\r\n\r\n\tprivate wrapWidth: number = 800;\r\n\r\n\tprivate avatarPosition: AvatarPosition = \"left\";\r\n\r\n\tprivate avatarSprite = new PIXI.Sprite();\r\n\r\n\tprivate textDisplay = new PIXI.SplitBitmapText({\r\n\t\t// Split text error when setting to empty string, so use underscore as placeholder\r\n\t\ttext: \"_\",\r\n\t\tstyle: {\r\n\t\t\t...DEFAULT_TEXT_STYLE,\r\n\t\t\t...{\r\n\t\t\t\tfontSize: 42,\r\n\t\t\t\tlineHeight: 62,\r\n\t\t\t\twordWrapWidth: 800,\r\n\t\t\t\twordWrap: true,\r\n\t\t\t\talign: \"left\",\r\n\t\t\t},\r\n\t\t},\r\n\t});\r\n\r\n\tprotected handleInit(): void {\r\n\t\tthis.addChild(this.textBubble);\r\n\t\tthis.addChild(this.textDisplay);\r\n\t\tthis.addChild(this.avatarSprite);\r\n\t}\r\n\r\n\tpublic registerAvatars(avatarData: MagicWordsAvatarData[]) {\r\n\t\tavatarData.forEach((avatar) => {\r\n\t\t\tthis.avatarDataMap.set(avatar.name, {\r\n\t\t\t\tavatarData: avatar,\r\n\t\t\t\tasset: PIXI.Assets.get(avatar.name),\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic registerEmojis(emojiData: MagicWordsEmojiData[]) {\r\n\t\temojiData.forEach((emoji) => {\r\n\t\t\tthis.emojiDataMap.set(emoji.name, {\r\n\t\t\t\tasset: PIXI.Assets.get(emoji.name),\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\r\n\tpublic async displayText(dialogue: MagicWordsDialogueEntry) {\r\n\t\tthis.wrapWidth = Math.min(this.app.width * TEXT_WIDTH_PERCENTAGE, TEXT_MAX_WIDTH);\r\n\t\tthis.textDisplay.pivot.x = this.wrapWidth / 2;\r\n\t\tthis.textDisplay.pivot.y = BUBBLE_Y_PIVOT;\r\n\t\tthis.textDisplay.style.wordWrapWidth = this.wrapWidth;\r\n\r\n\t\tconst dialogueWords = dialogue.text.split(\" \");\r\n\r\n\t\tconst emojisToInsert: { index: number; emojiData: MagicWordsTextEmojiData }[] = [];\r\n\r\n\t\tthis.emojiDataMap.forEach((emojiData, emojiKey) => {\r\n\t\t\tconst emojiTag = `{${emojiKey}}`;\r\n\r\n\t\t\twhile (true) {\r\n\t\t\t\tconst index = dialogueWords.findIndex((word) => word === emojiTag);\r\n\t\t\t\tif (index === -1) break;\r\n\r\n\t\t\t\tdialogueWords[index] = \"----\";\r\n\t\t\t\temojisToInsert.push({ index, emojiData });\r\n\t\t\t}\r\n\t\t});\r\n\r\n\t\tconst preparedText = dialogueWords.join(\" \");\r\n\r\n\t\tthis.textDisplay.text = preparedText;\r\n\r\n\t\tthis.updateBubbleSizing();\r\n\r\n\t\tfor (let i = 0; i < emojisToInsert.length; i++) {\r\n\t\t\tconst emojiToInsert = emojisToInsert[i];\r\n\t\t\tconst emojiSprite = new PIXI.Sprite(emojiToInsert.emojiData.asset);\r\n\t\t\tthis.textDisplay.words[emojiToInsert.index].addChild(emojiSprite);\r\n\t\t\temojiSprite.anchor.set(0);\r\n\t\t\temojiSprite.width = this.textDisplay.style.fontSize * 1.35;\r\n\t\t\temojiSprite.height = this.textDisplay.style.fontSize * 1.35;\r\n\t\t}\r\n\r\n\t\tconst avatarData = this.avatarDataMap.get(dialogue.name);\r\n\t\tif (avatarData) {\r\n\t\t\tconst texture = avatarData.asset;\r\n\t\t\tthis.avatarSprite.texture = texture;\r\n\t\t\tthis.avatarPosition = avatarData.avatarData.position;\r\n\t\t\tthis.updateAvatarPosition();\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < this.textDisplay.words.length; i++) {\r\n\t\t\tconst word = this.textDisplay.words[i];\r\n\t\t\tword.alpha = 0;\r\n\t\t}\r\n\r\n\t\tfor (let i = 0; i < this.textDisplay.words.length; i++) {\r\n\t\t\tconst word = this.textDisplay.words[i];\r\n\r\n\t\t\tawait this.delay(50);\r\n\r\n\t\t\tthis.app.audio.play(\"click\", { volume: 0.5 });\r\n\t\t\tword.alpha = 1;\r\n\t\t}\r\n\t}\r\n\r\n\tprivate updateAvatarPosition() {\r\n\t\tthis.avatarSprite.anchor.set(0.5, 0.5);\r\n\r\n\t\tconst avatarSpacing = 150;\r\n\t\tthis.avatarSprite.x = this.avatarPosition === \"left\" ? -this.wrapWidth / 2 - avatarSpacing : this.wrapWidth / 2 + avatarSpacing;\r\n\r\n\t\t// Fixed size while retaining aspect ratio\r\n\t\tthis.avatarSprite.height = 256;\r\n\t\tthis.avatarSprite.width = this.avatarSprite.texture.width * (256 / this.avatarSprite.texture.height);\r\n\t}\r\n\r\n\tprivate updateBubbleSizing() {\r\n\t\tthis.textBubble.clear();\r\n\t\tthis.textBubble.roundRect(\r\n\t\t\t-this.wrapWidth / 2 - BUBBLE_PADDING_X,\r\n\t\t\t-BUBBLE_Y_PIVOT - BUBBLE_PADDING_Y,\r\n\t\t\tthis.wrapWidth + BUBBLE_PADDING_X * 2,\r\n\t\t\tthis.textDisplay.lines.length * this.textDisplay.style.lineHeight + BUBBLE_PADDING_Y * 2,\r\n\t\t);\r\n\t\tthis.textBubble.fill({ color: 0xffffff, alpha: 0.25 });\r\n\t}\r\n}\r\n","import * as PIXI from \"pixi.js\";\r\nimport { Scene } from \"../../../common/scene\";\r\nimport { DemoApp } from \"../../demo-app\";\r\nimport { SceneKey } from \"../../scene-key\";\r\nimport { DemoAppHUD } from \"../../ui/demo-app-hud\";\r\nimport { fetchMagicWords, MagicWordsResponse } from \"./fetch-magic-words\";\r\nimport { MagicWordsText } from \"./magic-words-text\";\r\n\r\nconst DIALOGUE_MIN_DELAY = 1500;\r\nconst DIALOGUE_DELAY_PER_WORD = 200;\r\n\r\n/**\r\n * Potential optimisations:\r\n *\r\n * - Generate a texture atlas for avatar textures which are brought in dynamically.\r\n * - Generate a dynamic bitmap which includes custom emoji glyphs.\r\n * - Preload assets before scene load.\r\n * - Cache the fetched data between scene loads.\r\n */\r\nexport class MagicWordsScene extends Scene<DemoApp> {\r\n\tprivate hud = new DemoAppHUD(this.app, {\r\n\t\tonBackButtonPressed: () => this.app.showScene(SceneKey.Menu),\r\n\t});\r\n\r\n\tprivate magicWordsText = new MagicWordsText(this.app);\r\n\r\n\tprivate cachedMagicWordsResponse?: MagicWordsResponse;\r\n\r\n\tprotected async handleInit() {\r\n\t\tthis.addChild(this.magicWordsText);\r\n\t\tthis.addChild(this.hud);\r\n\r\n\t\tif (this.cachedMagicWordsResponse) {\r\n\t\t\tthis.magicWordsText.registerEmojis(this.cachedMagicWordsResponse.emojies);\r\n\t\t\tthis.magicWordsText.registerAvatars(this.cachedMagicWordsResponse.avatars);\r\n\r\n\t\t\tfor (let i = 0; i < this.cachedMagicWordsResponse.dialogue.length; i++) {\r\n\t\t\t\tconst dialogueEntry = this.cachedMagicWordsResponse.dialogue[i];\r\n\t\t\t\tawait this.magicWordsText.displayText(dialogueEntry);\r\n\r\n\t\t\t\tconst wordDelay = dialogueEntry.text.split(\" \").length * DIALOGUE_DELAY_PER_WORD;\r\n\t\t\t\tconst totalDelay = Math.max(DIALOGUE_MIN_DELAY, wordDelay);\r\n\t\t\t\tawait this.tween().wait(totalDelay).complete();\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\r\n\tprotected async handleLoad() {\r\n\t\tthis.displayStatusText(\"Loading scene assets...\");\r\n\t\tawait this.loadMagicWordsData();\r\n\t\tthis.hideStatusText();\r\n\t}\r\n\r\n\tprotected async handleLoadError() {\r\n\t\tthis.displayAndLogError(\"Failed to load scene assets...\");\r\n\t}\r\n\r\n\tprotected async handleUnload() {\r\n\t\tawait this.unloadMagicWordsData();\r\n\t}\r\n\r\n\t/**\r\n\t * Currently a simple fetch and load assets function.\r\n\t * It does not retry on failure or show progress.\r\n\t * It fetches data on every scene load but could easily store it for reuse.\r\n\t */\r\n\tprivate async loadMagicWordsData() {\r\n\t\tthis.cachedMagicWordsResponse = await fetchMagicWords();\r\n\r\n\t\tconst assetsToLoad = [...this.cachedMagicWordsResponse.emojies, ...this.cachedMagicWordsResponse.avatars];\r\n\r\n\t\tawait PIXI.Assets.load(\r\n\t\t\tassetsToLoad.map((assetToLoad) => ({\r\n\t\t\t\talias: assetToLoad.name,\r\n\t\t\t\tsrc: assetToLoad.url,\r\n\t\t\t\tparser: \"texture\",\r\n\t\t\t})),\r\n\t\t);\r\n\t}\r\n\r\n\tprivate async unloadMagicWordsData() {\r\n\t\tif (this.cachedMagicWordsResponse) {\r\n\t\t\tawait PIXI.Assets.unload([\r\n\t\t\t\t...this.cachedMagicWordsResponse.emojies.map((e) => e.name),\r\n\t\t\t\t...this.cachedMagicWordsResponse.avatars.map((e) => e.name),\r\n\t\t\t]);\r\n\r\n\t\t\tdelete this.cachedMagicWordsResponse;\r\n\t\t}\r\n\t}\r\n}\r\n","import { MAGIC_WORDS_ENDPOINT } from \"./constants\";\r\n\r\nexport type AvatarPosition = \"left\" | \"right\";\r\n\r\n/**\r\n * Dialogue entry in the magic words response\r\n */\r\nexport interface MagicWordsDialogueEntry {\r\n\tname: string;\r\n\ttext: string;\r\n}\r\n\r\n/**\r\n * Emoji data in the magic words response\r\n */\r\nexport interface MagicWordsEmojiData {\r\n\tname: string;\r\n\turl: string;\r\n}\r\n\r\n/**\r\n * Avatar data in the magic words response\r\n */\r\nexport interface MagicWordsAvatarData {\r\n\tname: string;\r\n\turl: string;\r\n\tposition: AvatarPosition;\r\n}\r\n\r\n/**\r\n * Magic Words API response type\r\n */\r\nexport interface MagicWordsResponse {\r\n\tdialogue: MagicWordsDialogueEntry[];\r\n\temojies: MagicWordsEmojiData[];\r\n\tavatars: MagicWordsAvatarData[];\r\n}\r\n\r\n/**\r\n * Fetches magic words data from the API endpoint\r\n *\r\n * @returns Promise resolving to the magic words data\r\n * @throws Error if the fetch fails or returns non-OK status\r\n */\r\nexport async function fetchMagicWords(): Promise<MagicWordsResponse> {\r\n\tconst url = MAGIC_WORDS_ENDPOINT;\r\n\r\n\ttry {\r\n\t\tconst response = await fetch(url);\r\n\r\n\t\tif (!response.ok) {\r\n\t\t\tthrow new Error(`Failed to fetch magic words: ${response.status} ${response.statusText}`);\r\n\t\t}\r\n\r\n\t\tconst data = await response.json();\r\n\t\treturn data as MagicWordsResponse;\r\n\t} catch (error) {\r\n\t\tif (error instanceof Error) {\r\n\t\t\tthrow new Error(`Error fetching magic words: ${error.message}`);\r\n\t\t}\r\n\t\tthrow new Error(\"Unknown error fetching magic words\");\r\n\t}\r\n}\r\n","export const MAGIC_WORDS_ENDPOINT = \"https://private-624120-softgamesassignment.apiary-mock.com/v2/magicwords\";\r\n","import * as PIXI from \"pixi.js\";\r\nimport { ResizeEventData } from \"../../../common/app-base\";\r\nimport { Scene } from \"../../../common/scene\";\r\nimport { UiTextButton } from \"../../../common/ui/ui-text-button\";\r\nimport { DEFAULT_TEXT_STYLE } from \"../../constants\";\r\nimport { DemoApp } from \"../../demo-app\";\r\nimport { SceneKey } from \"../../scene-key\";\r\n\r\nexport class MenuScene extends Scene<DemoApp> {\r\n\tprivate sceneButtons: UiTextButton[] = [];\r\n\tprivate titleText!: PIXI.Text;\r\n\r\n\thandleInit() {\r\n\t\t// Create title\r\n\t\tthis.titleText = new PIXI.Text({\r\n\t\t\ttext: \"Select a Scene\",\r\n\t\t\tstyle: DEFAULT_TEXT_STYLE,\r\n\t\t});\r\n\t\tthis.titleText.anchor.set(0.5);\r\n\t\tthis.addChild(this.titleText);\r\n\r\n\t\t// Create buttons for each scene (excluding Menu itself)\r\n\t\tconst sceneButtons: Array<{ key: SceneKey; label: string }> = [\r\n\t\t\t{ key: SceneKey.AceOfShadows, label: \"Ace of Shadows\" },\r\n\t\t\t{ key: SceneKey.MagicWords, label: \"Magic Words\" },\r\n\t\t\t{ key: SceneKey.PhoenixFlame, label: \"Phoenix Flame\" },\r\n\t\t];\r\n\r\n\t\tsceneButtons.forEach((scene) => {\r\n\t\t\tconst button = new UiTextButton(this.app, {\r\n\t\t\t\ttext: scene.label,\r\n\t\t\t\ttextureUp: PIXI.Texture.WHITE,\r\n\t\t\t\ttextureDown: PIXI.Texture.WHITE,\r\n\t\t\t\ttextStyle: { ...DEFAULT_TEXT_STYLE, ...{ fontSize: 48 } },\r\n\t\t\t});\r\n\r\n\t\t\tbutton.on(\"pointertap\", () => {\r\n\t\t\t\tthis.app.showScene(scene.key);\r\n\t\t\t});\r\n\r\n\t\t\tthis.sceneButtons.push(button);\r\n\t\t\tthis.addChild(button);\r\n\t\t});\r\n\t}\r\n\r\n\thandleResize({ height }: ResizeEventData) {\r\n\t\t// Position title at the top\r\n\t\tthis.titleText.position.set(0, -height * 0.3);\r\n\r\n\t\t// Position buttons vertically in the center\r\n\t\tconst buttonSpacing = 160;\r\n\t\tconst totalHeight = (this.sceneButtons.length - 1) * buttonSpacing;\r\n\t\tconst startY = -totalHeight / 2;\r\n\r\n\t\tthis.sceneButtons.forEach((button, index) => {\r\n\t\t\tbutton.position.set(0, startY + index * buttonSpacing);\r\n\t\t});\r\n\t}\r\n}\r\n","var __defProp = Object.defineProperty;\nvar __defNormalProp = (obj, key, value) => key in obj ? __defProp(obj, key, { enumerable: true, configurable: true, writable: true, value }) : obj[key] = value;\nvar __export = (target, all) => {\n  for (var name in all)\n    __defProp(target, name, { get: all[name], enumerable: true });\n};\nvar __publicField = (obj, key, value) => __defNormalProp(obj, typeof key !== \"symbol\" ? key + \"\" : key, value);\n\n// src/Emitter.ts\nimport { Point, Ticker } from \"pixi.js\";\n\n// src/ParticleUtils.ts\nvar ParticleUtils_exports = {};\n__export(ParticleUtils_exports, {\n  DEG_TO_RADS: () => DEG_TO_RADS,\n  GetTextureFromString: () => GetTextureFromString,\n  combineRGBComponents: () => combineRGBComponents,\n  createSteppedGradient: () => createSteppedGradient,\n  generateEase: () => generateEase,\n  getBlendMode: () => getBlendMode,\n  getTexturesFromConfig: () => getTexturesFromConfig,\n  hexToRGB: () => hexToRGB,\n  length: () => length,\n  normalize: () => normalize,\n  parseTextures: () => parseTextures,\n  parsingAnimatedTextures: () => parsingAnimatedTextures,\n  rotatePoint: () => rotatePoint,\n  scaleBy: () => scaleBy,\n  verbose: () => verbose\n});\nimport {\n  Texture,\n  Color as PixiColor,\n  Assets\n} from \"pixi.js\";\n\n// src/PropertyNode.ts\nvar PropertyNode = class _PropertyNode {\n  /**\n   * @param value The value for this node\n   * @param time The time for this node, between 0-1\n   * @param [ease] Custom ease for this list. Only relevant for the first node.\n   */\n  constructor(value, time, ease) {\n    /**\n     * Value for the node.\n     */\n    __publicField(this, \"value\");\n    /**\n     * Time value for the node. Between 0-1.\n     */\n    __publicField(this, \"time\");\n    /**\n     * The next node in line.\n     */\n    __publicField(this, \"next\");\n    /**\n     * If this is the first node in the list, controls if the entire list is stepped or not.\n     */\n    __publicField(this, \"isStepped\");\n    __publicField(this, \"ease\");\n    this.value = value;\n    this.time = time;\n    this.next = void 0;\n    this.isStepped = false;\n    if (ease) {\n      this.ease = typeof ease === \"function\" ? ease : generateEase(ease);\n    } else {\n      this.ease = void 0;\n    }\n  }\n  /**\n   * Creates a list of property values from a data object {list, isStepped} with a list of objects in\n   * the form {value, time}. Alternatively, the data object can be in the deprecated form of\n   * {start, end}.\n   * @param data The data for the list.\n   * @param data.list The array of value and time objects.\n   * @param data.isStepped If the list is stepped rather than interpolated.\n   * @param data.ease Custom ease for this list.\n   * @return The first node in the list\n   */\n  // eslint-disable-next-line max-len\n  static createList(data) {\n    if (\"list\" in data) {\n      const array = data.list;\n      let node;\n      const { value, time } = array[0];\n      const first = node = new _PropertyNode(\n        typeof value === \"string\" ? hexToRGB(value) : value,\n        time,\n        data.ease\n      );\n      if (array.length > 2 || array.length === 2 && array[1].value !== value) {\n        for (let i = 1; i < array.length; ++i) {\n          const { value: value2, time: time2 } = array[i];\n          node.next = new _PropertyNode(\n            typeof value2 === \"string\" ? hexToRGB(value2) : value2,\n            time2\n          );\n          node = node.next;\n        }\n      }\n      first.isStepped = !!data.isStepped;\n      return first;\n    }\n    const start = new _PropertyNode(\n      typeof data.start === \"string\" ? hexToRGB(data.start) : data.start,\n      0\n    );\n    if (data.end !== data.start) {\n      start.next = new _PropertyNode(\n        typeof data.end === \"string\" ? hexToRGB(data.end) : data.end,\n        1\n      );\n    }\n    return start;\n  }\n};\n\n// src/ParticleUtils.ts\nvar GetTextureFromString = Texture.from;\nvar verbose = false;\nvar DEG_TO_RADS = Math.PI / 180;\nvar BlendModeSet = /* @__PURE__ */ new Set([\n  \"inherit\",\n  \"normal\",\n  \"add\",\n  \"multiply\",\n  \"screen\",\n  \"darken\",\n  \"lighten\",\n  \"erase\",\n  \"color-dodge\",\n  \"color-burn\",\n  \"linear-burn\",\n  \"linear-dodge\",\n  \"linear-light\",\n  \"hard-light\",\n  \"soft-light\",\n  \"pin-light\",\n  \"difference\",\n  \"exclusion\",\n  \"overlay\",\n  \"saturation\",\n  \"color\",\n  \"luminosity\",\n  \"normal-npm\",\n  \"add-npm\",\n  \"screen-npm\",\n  \"none\",\n  \"subtract\",\n  \"divide\",\n  \"vivid-light\",\n  \"hard-mix\",\n  \"negation\",\n  \"min\",\n  \"max\"\n]);\nfunction rotatePoint(angle, p) {\n  if (!angle) return;\n  const s = Math.sin(angle);\n  const c = Math.cos(angle);\n  const xnew = p.x * c - p.y * s;\n  const ynew = p.x * s + p.y * c;\n  p.x = xnew;\n  p.y = ynew;\n}\nfunction combineRGBComponents(r, g, b) {\n  return (\n    /* a << 24 |*/\n    r << 16 | g << 8 | b\n  );\n}\nfunction length(point) {\n  return Math.sqrt(point.x * point.x + point.y * point.y);\n}\nfunction normalize(point) {\n  const oneOverLen = 1 / length(point);\n  point.x *= oneOverLen;\n  point.y *= oneOverLen;\n}\nfunction scaleBy(point, value) {\n  point.x *= value;\n  point.y *= value;\n}\nfunction hexToRGB(color, _output) {\n  const temp = PixiColor.shared.setValue(color);\n  return {\n    r: temp.red * 255,\n    g: temp.green * 255,\n    b: temp.blue * 255,\n    a: temp.alpha === 1 ? void 0 : temp.alpha * 255\n  };\n}\nfunction generateEase(segments) {\n  const qty = segments.length;\n  const oneOverQty = 1 / qty;\n  return (time) => {\n    const i = qty * time | 0;\n    const t = (time - i * oneOverQty) * qty;\n    const s = segments[i] || segments[qty - 1];\n    return s.s + t * (2 * (1 - t) * (s.cp - s.s) + t * (s.e - s.s));\n  };\n}\nfunction getBlendMode(name) {\n  if (!BlendModeSet.has(name)) {\n    return \"normal\";\n  }\n  return name;\n}\nfunction createSteppedGradient(list, numSteps = 10) {\n  if (typeof numSteps !== \"number\" || numSteps <= 0) {\n    numSteps = 10;\n  }\n  const first = new PropertyNode(hexToRGB(list[0].value), list[0].time);\n  first.isStepped = true;\n  let currentNode = first;\n  let current = list[0];\n  let nextIndex = 1;\n  let next = list[nextIndex];\n  for (let i = 1; i < numSteps; ++i) {\n    let lerp = i / numSteps;\n    while (lerp > next.time) {\n      current = next;\n      next = list[++nextIndex];\n    }\n    lerp = (lerp - current.time) / (next.time - current.time);\n    const curVal = hexToRGB(current.value);\n    const nextVal = hexToRGB(next.value);\n    const output = {\n      r: (nextVal.r - curVal.r) * lerp + curVal.r,\n      g: (nextVal.g - curVal.g) * lerp + curVal.g,\n      b: (nextVal.b - curVal.b) * lerp + curVal.b\n    };\n    currentNode.next = new PropertyNode(output, i / numSteps);\n    currentNode = currentNode.next;\n  }\n  return first;\n}\nfunction parseTextures(textures) {\n  const images = (Array.isArray(textures) ? textures : [textures]).map((v) => {\n    if (typeof v === \"string\") {\n      return Assets.get(v);\n    }\n    return v;\n  });\n  const isAllFromSameSource = images.every(\n    (image) => image && image.source === images[0].source\n  );\n  if (!isAllFromSameSource) {\n    throw new Error(\"All particle images must use the same source\");\n  }\n  return images;\n}\nfunction parsingAnimatedTextures(texture) {\n  if (typeof texture === \"object\" && \"texture\" in texture) {\n    return texture.texture;\n  }\n  return texture;\n}\nfunction getUniqueTextures(textures) {\n  return Array.from(new Set(textures));\n}\nfunction getTexturesFromConfig(config) {\n  return config.behaviors.reduce((_, b) => {\n    const behavior = b;\n    if (behavior.type === \"textureSingle\") {\n      return parseTextures(behavior.config.texture);\n    }\n    if (behavior.type === \"textureOrdered\") {\n      const parsedTextures = parseTextures(behavior.config.textures);\n      return getUniqueTextures(parsedTextures);\n    }\n    if (behavior.type === \"textureRandom\") {\n      return parseTextures(behavior.config.textures);\n    }\n    if (behavior.type === \"animatedSingle\") {\n      const parsedTextures = parseTextures(\n        behavior.config.anim.textures.map(parsingAnimatedTextures)\n      );\n      return getUniqueTextures(parsedTextures);\n    }\n    if (behavior.type === \"animatedRandom\") {\n      const parsedTextures = parseTextures(\n        behavior.config.anims.flatMap(\n          (anim) => anim.textures.map(parsingAnimatedTextures)\n        )\n      );\n      return getUniqueTextures(parsedTextures);\n    }\n    return [];\n  }, []);\n}\n\n// src/GsapCustomEase.ts\nvar _svgPathExp = /[achlmqstvz]|(-?\\d*\\.?\\d*(?:e[-+]?\\d+)?)[0-9]/gi;\nvar _scientific = /[+-]?\\d*\\.?\\d+e[+-]?\\d+/gi;\nvar _DEG2RAD = Math.PI / 180;\nvar _RAD2DEG = 180 / Math.PI;\nvar _sin = Math.sin;\nvar _cos = Math.cos;\nvar _abs = Math.abs;\nvar _sqrt = Math.sqrt;\nfunction arcToSegment(lastX, lastY, rx, ry, angle, largeArcFlag, sweepFlag, x, y) {\n  if (lastX === x && lastY === y) {\n    return;\n  }\n  rx = _abs(rx);\n  ry = _abs(ry);\n  let angleRad = angle % 360 * _DEG2RAD, cosAngle = _cos(angleRad), sinAngle = _sin(angleRad), PI = Math.PI, TWOPI = PI * 2, dx2 = (lastX - x) / 2, dy2 = (lastY - y) / 2, x1 = cosAngle * dx2 + sinAngle * dy2, y1 = -sinAngle * dx2 + cosAngle * dy2, x1_sq = x1 * x1, y1_sq = y1 * y1, radiiCheck = x1_sq / (rx * rx) + y1_sq / (ry * ry);\n  if (radiiCheck > 1) {\n    rx = _sqrt(radiiCheck) * rx;\n    ry = _sqrt(radiiCheck) * ry;\n  }\n  let rx_sq = rx * rx, ry_sq = ry * ry, sq = (rx_sq * ry_sq - rx_sq * y1_sq - ry_sq * x1_sq) / (rx_sq * y1_sq + ry_sq * x1_sq);\n  if (sq < 0) {\n    sq = 0;\n  }\n  let coef = (largeArcFlag === sweepFlag ? -1 : 1) * _sqrt(sq), cx1 = coef * (rx * y1 / ry), cy1 = coef * -(ry * x1 / rx), sx2 = (lastX + x) / 2, sy2 = (lastY + y) / 2, cx = sx2 + (cosAngle * cx1 - sinAngle * cy1), cy = sy2 + (sinAngle * cx1 + cosAngle * cy1), ux = (x1 - cx1) / rx, uy = (y1 - cy1) / ry, vx = (-x1 - cx1) / rx, vy = (-y1 - cy1) / ry, temp = ux * ux + uy * uy, angleStart = (uy < 0 ? -1 : 1) * Math.acos(ux / _sqrt(temp)), angleExtent = (ux * vy - uy * vx < 0 ? -1 : 1) * Math.acos((ux * vx + uy * vy) / _sqrt(temp * (vx * vx + vy * vy)));\n  Number.isNaN(angleExtent) && (angleExtent = PI);\n  if (!sweepFlag && angleExtent > 0) {\n    angleExtent -= TWOPI;\n  } else if (sweepFlag && angleExtent < 0) {\n    angleExtent += TWOPI;\n  }\n  angleStart %= TWOPI;\n  angleExtent %= TWOPI;\n  let segments = Math.ceil(_abs(angleExtent) / (TWOPI / 4)), rawPath = [], angleIncrement = angleExtent / segments, controlLength = 4 / 3 * _sin(angleIncrement / 2) / (1 + _cos(angleIncrement / 2)), ma = cosAngle * rx, mb = sinAngle * rx, mc = sinAngle * -ry, md = cosAngle * ry, i;\n  for (i = 0; i < segments; i++) {\n    angle = angleStart + i * angleIncrement;\n    x1 = _cos(angle);\n    y1 = _sin(angle);\n    ux = _cos(angle += angleIncrement);\n    uy = _sin(angle);\n    rawPath.push(\n      x1 - controlLength * y1,\n      y1 + controlLength * x1,\n      ux + controlLength * uy,\n      uy - controlLength * ux,\n      ux,\n      uy\n    );\n  }\n  for (i = 0; i < rawPath.length; i += 2) {\n    x1 = rawPath[i];\n    y1 = rawPath[i + 1];\n    rawPath[i] = x1 * ma + y1 * mc + cx;\n    rawPath[i + 1] = x1 * mb + y1 * md + cy;\n  }\n  rawPath[i - 2] = x;\n  rawPath[i - 1] = y;\n  return rawPath;\n}\nfunction stringToRawPath(d) {\n  let a = `${d}`.replace(_scientific, (m) => {\n    const n = +m;\n    return n < 1e-4 && n > -1e-4 ? 0 : n;\n  }).match(_svgPathExp) || [], path = [], relativeX = 0, relativeY = 0, twoThirds = 2 / 3, elements = a.length, points = 0, errorMessage = `ERROR: malformed path: ${d}`, i, j, x, y, command, isRelative, segment, startX, startY, difX, difY, beziers, prevCommand, flag1, flag2, line = (sx, sy, ex, ey) => {\n    difX = (ex - sx) / 3;\n    difY = (ey - sy) / 3;\n    segment.push(sx + difX, sy + difY, ex - difX, ey - difY, ex, ey);\n  };\n  if (!d || !Number.isNaN(a[0]) || Number.isNaN(a[1])) {\n    console.log(errorMessage);\n    return path;\n  }\n  for (i = 0; i < elements; i++) {\n    prevCommand = command;\n    if (Number.isNaN(a[i])) {\n      command = a[i].toUpperCase();\n      isRelative = command !== a[i];\n    } else {\n      i--;\n    }\n    x = +a[i + 1];\n    y = +a[i + 2];\n    if (isRelative) {\n      x += relativeX;\n      y += relativeY;\n    }\n    if (!i) {\n      startX = x;\n      startY = y;\n    }\n    if (command === \"M\") {\n      if (segment) {\n        if (segment.length < 8) {\n          path.length -= 1;\n        } else {\n          points += segment.length;\n        }\n      }\n      relativeX = startX = x;\n      relativeY = startY = y;\n      segment = [x, y];\n      path.push(segment);\n      i += 2;\n      command = \"L\";\n    } else if (command === \"C\") {\n      if (!segment) {\n        segment = [0, 0];\n      }\n      if (!isRelative) {\n        relativeX = relativeY = 0;\n      }\n      segment.push(\n        x,\n        y,\n        relativeX + a[i + 3] * 1,\n        relativeY + a[i + 4] * 1,\n        relativeX += a[i + 5] * 1,\n        relativeY += a[i + 6] * 1\n      );\n      i += 6;\n    } else if (command === \"S\") {\n      difX = relativeX;\n      difY = relativeY;\n      if (prevCommand === \"C\" || prevCommand === \"S\") {\n        difX += relativeX - segment[segment.length - 4];\n        difY += relativeY - segment[segment.length - 3];\n      }\n      if (!isRelative) {\n        relativeX = relativeY = 0;\n      }\n      segment.push(\n        difX,\n        difY,\n        x,\n        y,\n        relativeX += a[i + 3] * 1,\n        relativeY += a[i + 4] * 1\n      );\n      i += 4;\n    } else if (command === \"Q\") {\n      difX = relativeX + (x - relativeX) * twoThirds;\n      difY = relativeY + (y - relativeY) * twoThirds;\n      if (!isRelative) {\n        relativeX = relativeY = 0;\n      }\n      relativeX += a[i + 3] * 1;\n      relativeY += a[i + 4] * 1;\n      segment.push(\n        difX,\n        difY,\n        relativeX + (x - relativeX) * twoThirds,\n        relativeY + (y - relativeY) * twoThirds,\n        relativeX,\n        relativeY\n      );\n      i += 4;\n    } else if (command === \"T\") {\n      difX = relativeX - segment[segment.length - 4];\n      difY = relativeY - segment[segment.length - 3];\n      segment.push(\n        relativeX + difX,\n        relativeY + difY,\n        x + (relativeX + difX * 1.5 - x) * twoThirds,\n        y + (relativeY + difY * 1.5 - y) * twoThirds,\n        relativeX = x,\n        relativeY = y\n      );\n      i += 2;\n    } else if (command === \"H\") {\n      line(relativeX, relativeY, relativeX = x, relativeY);\n      i += 1;\n    } else if (command === \"V\") {\n      line(\n        relativeX,\n        relativeY,\n        relativeX,\n        relativeY = x + (isRelative ? relativeY - relativeX : 0)\n      );\n      i += 1;\n    } else if (command === \"L\" || command === \"Z\") {\n      if (command === \"Z\") {\n        x = startX;\n        y = startY;\n        segment.closed = true;\n      }\n      if (command === \"L\" || _abs(relativeX - x) > 0.5 || _abs(relativeY - y) > 0.5) {\n        line(relativeX, relativeY, x, y);\n        if (command === \"L\") {\n          i += 2;\n        }\n      }\n      relativeX = x;\n      relativeY = y;\n    } else if (command === \"A\") {\n      flag1 = a[i + 4];\n      flag2 = a[i + 5];\n      difX = a[i + 6];\n      difY = a[i + 7];\n      j = 7;\n      if (flag1.length > 1) {\n        if (flag1.length < 3) {\n          difY = difX;\n          difX = flag2;\n          j--;\n        } else {\n          difY = flag2;\n          difX = flag1.substr(2);\n          j -= 2;\n        }\n        flag2 = flag1.charAt(1);\n        flag1 = flag1.charAt(0);\n      }\n      beziers = arcToSegment(\n        relativeX,\n        relativeY,\n        +a[i + 1],\n        +a[i + 2],\n        +a[i + 3],\n        +flag1,\n        +flag2,\n        (isRelative ? relativeX : 0) + difX * 1,\n        (isRelative ? relativeY : 0) + difY * 1\n      );\n      i += j;\n      if (beziers) {\n        for (j = 0; j < beziers.length; j++) {\n          segment.push(beziers[j]);\n        }\n      }\n      relativeX = segment[segment.length - 2];\n      relativeY = segment[segment.length - 1];\n    } else {\n      console.log(errorMessage);\n    }\n  }\n  i = segment.length;\n  if (i < 6) {\n    path.pop();\n    i = 0;\n  } else if (segment[0] === segment[i - 2] && segment[1] === segment[i - 1]) {\n    segment.closed = true;\n  }\n  path.totalPoints = points + i;\n  return path;\n}\nvar _bigNum = 1e20;\nvar _numExp = /[-+=.]*\\d+[.e\\-+]*\\d*[e\\-+]*\\d*/gi;\nvar _needsParsingExp = /[cLlsSaAhHvVtTqQ]/g;\nvar _findMinimum = (values) => {\n  let l = values.length, min = _bigNum, i;\n  for (i = 1; i < l; i += 6) {\n    +values[i] < min && (min = +values[i]);\n  }\n  return min;\n};\nvar _normalize = (values, height, originY) => {\n  if (!originY && originY !== 0) {\n    originY = Math.max(+values[values.length - 1], +values[1]);\n  }\n  let tx = +values[0] * -1, ty = -originY, l = values.length, sx = 1 / (+values[l - 2] + tx), sy = -height || (Math.abs(+values[l - 1] - +values[1]) < 0.01 * (+values[l - 2] - +values[0]) ? _findMinimum(values) + ty : +values[l - 1] + ty), i;\n  if (sy) {\n    sy = 1 / sy;\n  } else {\n    sy = -sx;\n  }\n  for (i = 0; i < l; i += 2) {\n    values[i] = (+values[i] + tx) * sx;\n    values[i + 1] = (+values[i + 1] + ty) * sy;\n  }\n};\nvar _bezierToPoints = (x1, y1, x2, y2, x3, y3, x4, y4, threshold, points, index) => {\n  let x12 = (x1 + x2) / 2, y12 = (y1 + y2) / 2, x23 = (x2 + x3) / 2, y23 = (y2 + y3) / 2, x34 = (x3 + x4) / 2, y34 = (y3 + y4) / 2, x123 = (x12 + x23) / 2, y123 = (y12 + y23) / 2, x234 = (x23 + x34) / 2, y234 = (y23 + y34) / 2, x1234 = (x123 + x234) / 2, y1234 = (y123 + y234) / 2, dx = x4 - x1, dy = y4 - y1, d2 = Math.abs((x2 - x4) * dy - (y2 - y4) * dx), d3 = Math.abs((x3 - x4) * dy - (y3 - y4) * dx), length2;\n  if (!points) {\n    points = [\n      { x: x1, y: y1 },\n      { x: x4, y: y4 }\n    ];\n    index = 1;\n  }\n  points.splice(index || points.length - 1, 0, { x: x1234, y: y1234 });\n  if ((d2 + d3) * (d2 + d3) > threshold * (dx * dx + dy * dy)) {\n    length2 = points.length;\n    _bezierToPoints(\n      x1,\n      y1,\n      x12,\n      y12,\n      x123,\n      y123,\n      x1234,\n      y1234,\n      threshold,\n      points,\n      index\n    );\n    _bezierToPoints(\n      x1234,\n      y1234,\n      x234,\n      y234,\n      x34,\n      y34,\n      x4,\n      y4,\n      threshold,\n      points,\n      index + 1 + (points.length - length2)\n    );\n  }\n  return points;\n};\nfunction generateEaseFromPath(data, config = {}) {\n  data = data || \"0,0,1,1\";\n  let values = data.match(_numExp), closest = 1, points = [], lookup = [], precision = config.precision || 1, fast = precision <= 1, l, a1, a2, i, inc, j, point, prevPoint, p;\n  if (_needsParsingExp.test(data) || ~data.indexOf(\"M\") && data.indexOf(\"C\") < 0) {\n    values = stringToRawPath(data)[0];\n  }\n  l = values.length;\n  if (l === 4) {\n    values.unshift(0, 0);\n    values.push(1, 1);\n    l = 8;\n  } else if ((l - 2) % 6) {\n    throw \"Invalid CustomEase\";\n  }\n  if (+values[0] !== 0 || +values[l - 2] !== 1) {\n    _normalize(values, config.height, config.originY);\n  }\n  for (i = 2; i < l; i += 6) {\n    a1 = { x: +values[i - 2], y: +values[i - 1] };\n    a2 = { x: +values[i + 4], y: +values[i + 5] };\n    points.push(a1, a2);\n    _bezierToPoints(\n      a1.x,\n      a1.y,\n      +values[i],\n      +values[i + 1],\n      +values[i + 2],\n      +values[i + 3],\n      a2.x,\n      a2.y,\n      1 / (precision * 2e5),\n      points,\n      points.length - 1\n    );\n  }\n  l = points.length;\n  for (i = 0; i < l; i++) {\n    point = points[i];\n    prevPoint = points[i - 1] || point;\n    if ((point.x > prevPoint.x || prevPoint.y !== point.y && prevPoint.x === point.x || point === prevPoint) && point.x <= 1) {\n      prevPoint.cx = point.x - prevPoint.x;\n      prevPoint.cy = point.y - prevPoint.y;\n      prevPoint.n = point;\n      prevPoint.nx = point.x;\n      if (fast && i > 1 && Math.abs(\n        prevPoint.cy / prevPoint.cx - points[i - 2].cy / points[i - 2].cx\n      ) > 2) {\n        fast = 0;\n      }\n      if (prevPoint.cx < closest) {\n        if (!prevPoint.cx) {\n          prevPoint.cx = 1e-3;\n          if (i === l - 1) {\n            prevPoint.x -= 1e-3;\n            closest = Math.min(closest, 1e-3);\n            fast = 0;\n          }\n        } else {\n          closest = prevPoint.cx;\n        }\n      }\n    } else {\n      points.splice(i--, 1);\n      l--;\n    }\n  }\n  l = 1 / closest + 1 | 0;\n  inc = 1 / l;\n  j = 0;\n  point = points[0];\n  if (fast) {\n    for (i = 0; i < l; i++) {\n      p = i * inc;\n      if (point.nx < p) {\n        point = points[++j];\n      }\n      a1 = point.y + (p - point.x) / point.cx * point.cy;\n      lookup[i] = { x: p, cx: inc, y: a1, cy: 0, nx: 9 };\n      if (i) {\n        lookup[i - 1].cy = a1 - lookup[i - 1].y;\n      }\n    }\n    j = points[points.length - 1];\n    lookup[l - 1].cy = j.y - a1;\n    lookup[l - 1].cx = j.x - lookup[lookup.length - 1].x;\n  } else {\n    for (i = 0; i < l; i++) {\n      if (point.nx < i * inc) {\n        point = points[++j];\n      }\n      lookup[i] = point;\n    }\n    if (j < points.length - 1) {\n      lookup[i - 1] = points[points.length - 2];\n    }\n  }\n  return function customEase(p2) {\n    let point2 = lookup[p2 * l | 0] || lookup[l - 1];\n    if (point2.nx < p2) {\n      point2 = point2.n;\n    }\n    return point2.y + (p2 - point2.x) / point2.cx * point2.cy;\n  };\n}\n\n// src/Particle.ts\nimport { Particle as PixiParticle } from \"pixi.js\";\nvar Particle = class extends PixiParticle {\n  /**\n   * @param emitter The emitter that controls this particle.\n   */\n  constructor(emitter) {\n    super(emitter.particleImages[0]);\n    /**\n     * The emitter that controls this particle.\n     */\n    __publicField(this, \"emitter\");\n    /**\n     * The maximum lifetime of this particle, in seconds.\n     */\n    __publicField(this, \"maxLife\");\n    /**\n     * The current age of the particle, in seconds.\n     */\n    __publicField(this, \"age\");\n    /**\n     * The current age of the particle as a normalized value between 0 and 1.\n     */\n    __publicField(this, \"agePercent\");\n    /**\n     * One divided by the max life of the particle, saved for slightly faster math.\n     */\n    __publicField(this, \"oneOverLife\");\n    /**\n     * Reference to the next particle in the list.\n     */\n    __publicField(this, \"next\");\n    /**\n     * Reference to the previous Particle in the list.\n     */\n    __publicField(this, \"prev\");\n    /**\n     * Static per-particle configuration for behaviors to use. Is not cleared when recycling.\n     */\n    __publicField(this, \"config\");\n    __publicField(this, \"parent\");\n    this.emitter = emitter;\n    this.config = {};\n    this.anchorX = this.anchorY = 0.5;\n    this.maxLife = 0;\n    this.age = 0;\n    this.agePercent = 0;\n    this.oneOverLife = 0;\n    this.init = this.init;\n    this.kill = this.kill;\n  }\n  /**\n   * Initializes the particle for use, based on the properties that have to\n   * have been set already on the particle.\n   */\n  init(maxLife) {\n    this.maxLife = maxLife;\n    this.age = this.agePercent = 0;\n    this.rotation = 0;\n    this.x = this.y = 0;\n    this.scaleX = this.scaleY = 1;\n    this.tint = 16777215;\n    this.alpha = 1;\n    this.oneOverLife = 1 / this.maxLife;\n  }\n  appendTo(parent) {\n    this.parent?.removeParticle(this);\n    this.parent = parent;\n    parent.addParticle(this);\n  }\n  appendAt(parent, index) {\n    this.parent?.removeParticle(this);\n    this.parent = parent;\n    parent.addParticleAt(this, index);\n  }\n  removeFromParent() {\n    this.alpha = 0;\n    this.parent?.removeParticle(this);\n    this.parent = void 0;\n  }\n  /**\n   * Kills the particle, removing it from the display list\n   * and telling the emitter to recycle it.\n   */\n  kill() {\n    this.emitter.recycle(this);\n  }\n  /**\n   * Destroys the particle, removing references and preventing future use.\n   */\n  destroy() {\n    this.removeFromParent();\n    if (this.next && this.prev) {\n      this.next.prev = this.prev;\n      this.prev.next = this.next;\n    }\n    this.emitter = this.next = this.prev = null;\n  }\n};\n\n// src/behaviors/Behaviors.ts\nvar BehaviorOrder = /* @__PURE__ */ ((BehaviorOrder2) => {\n  BehaviorOrder2[BehaviorOrder2[\"Spawn\"] = 0] = \"Spawn\";\n  BehaviorOrder2[BehaviorOrder2[\"Normal\"] = 2] = \"Normal\";\n  BehaviorOrder2[BehaviorOrder2[\"Late\"] = 5] = \"Late\";\n  return BehaviorOrder2;\n})(BehaviorOrder || {});\n\n// src/Emitter.ts\nvar ticker = Ticker.shared;\nvar PositionParticle = Symbol(\"Position particle per emitter position\");\nvar _Emitter = class _Emitter {\n  /**\n   * @param particleParent The container to add the particles to.\n   * @param config A configuration object containing settings for the emitter.\n   * @param config.emit If config.emit is explicitly passed as false, the\n   *                    Emitter will start disabled.\n   * @param config.autoUpdate If config.autoUpdate is explicitly passed as\n   *                          true, the Emitter will automatically call\n   *                          update via the PIXI shared ticker.\n   * @param particleImages A texture or array of textures to use\n   *                       for the particles. Strings will be turned\n   *                       into textures via Texture.from(). this is only used\n   *                       for create initial texture for particles, and will\n   *                       auto generate by config.behaviors if not provided.\n   */\n  constructor(particleParent, config, particleImages) {\n    /**\n     * Active initialization behaviors for this emitter.\n     */\n    __publicField(this, \"initBehaviors\");\n    /**\n     * Active update behaviors for this emitter.\n     */\n    __publicField(this, \"updateBehaviors\");\n    /**\n     * Active recycle behaviors for this emitter.\n     */\n    __publicField(this, \"recycleBehaviors\");\n    // properties for individual particles\n    /**\n     * The minimum lifetime for a particle, in seconds.\n     */\n    __publicField(this, \"minLifetime\");\n    /**\n     * The maximum lifetime for a particle, in seconds.\n     */\n    __publicField(this, \"maxLifetime\");\n    /**\n     * An easing function for nonlinear interpolation of values. Accepts a single\n     * parameter of time as a value from 0-1, inclusive. Expected outputs are values\n     * from 0-1, inclusive.\n     */\n    __publicField(this, \"customEase\");\n    // properties for spawning particles\n    /**\n     * Time between particle spawns in seconds.\n     */\n    __publicField(this, \"_frequency\");\n    /**\n     * Chance that a particle will be spawned on each opportunity to spawn one.\n     * 0 is 0%, 1 is 100%.\n     */\n    __publicField(this, \"spawnChance\");\n    /**\n     * Maximum number of particles to keep alive at a time. If this limit\n     * is reached, no more particles will spawn until some have died.\n     */\n    __publicField(this, \"maxParticles\");\n    /**\n     * The amount of time in seconds to emit for before setting emit to false.\n     * A value of -1 is an unlimited amount of time.\n     */\n    __publicField(this, \"emitterLifetime\");\n    /**\n     * Position at which to spawn particles, relative to the emitter's owner's origin.\n     * For example, the flames of a rocket travelling right might have a spawnPos\n     * of {x:-50, y:0}.\n     * to spawn at the rear of the rocket.\n     * To change this, use updateSpawnPos().\n     */\n    __publicField(this, \"spawnPos\");\n    /**\n     * Number of particles to spawn time that the frequency allows for particles to spawn.\n     */\n    __publicField(this, \"particlesPerWave\");\n    /**\n     * Rotation of the emitter or emitter's owner in degrees. This is added to\n     * the calculated spawn angle.\n     * To change this, use rotate().\n     */\n    __publicField(this, \"rotation\");\n    /**\n     * The world position of the emitter's owner, to add spawnPos to when\n     * spawning particles. To change this, use updateOwnerPos().\n     */\n    __publicField(this, \"ownerPos\");\n    /**\n     * The origin + spawnPos in the previous update, so that the spawn position\n     * can be interpolated to space out particles better.\n     */\n    __publicField(this, \"_prevEmitterPos\");\n    /**\n     * If _prevEmitterPos is valid, to prevent interpolation on the first update\n     */\n    __publicField(this, \"_prevPosIsValid\");\n    /**\n     * If either ownerPos or spawnPos has changed since the previous update.\n     */\n    __publicField(this, \"_posChanged\");\n    /**\n     * The container to add particles to.\n     */\n    __publicField(this, \"_parent\");\n    /**\n     * If particles should be added at the back of the display list instead of the front.\n     */\n    __publicField(this, \"addAtBack\");\n    /**\n     * The current number of active particles.\n     */\n    __publicField(this, \"particleCount\");\n    /**\n     * If particles should be emitted during update() calls. Setting this to false\n     * stops new particles from being created, but allows existing ones to die out.\n     */\n    __publicField(this, \"_emit\");\n    /**\n     * The timer for when to spawn particles in seconds, where numbers less\n     * than 0 mean that particles should be spawned.\n     */\n    __publicField(this, \"_spawnTimer\");\n    /**\n     * The life of the emitter in seconds.\n     */\n    __publicField(this, \"_emitterLife\");\n    /**\n     * The particles that are active and on the display list. This is the first particle in a\n     * linked list.\n     */\n    __publicField(this, \"_activeParticlesFirst\");\n    /**\n     * The particles that are active and on the display list. This is the last particle in a\n     * linked list.\n     */\n    __publicField(this, \"_activeParticlesLast\");\n    /**\n     * The particles that are not currently being used. This is the first particle in a\n     * linked list.\n     */\n    __publicField(this, \"_poolFirst\");\n    /**\n     * The original config object that this emitter was initialized with.\n     */\n    __publicField(this, \"_origConfig\");\n    /**\n     * If the update function is called automatically from the shared ticker.\n     * Setting this to false requires calling the update function manually.\n     */\n    __publicField(this, \"_autoUpdate\");\n    /**\n     * If the emitter should destroy itself when all particles have died out. This is set by\n     * playOnceAndDestroy();\n     */\n    __publicField(this, \"_destroyWhenComplete\");\n    /**\n     * A callback for when all particles have died out. This is set by\n     * playOnceAndDestroy() or playOnce();\n     */\n    __publicField(this, \"_completeCallback\");\n    __publicField(this, \"_particleImages\");\n    this.initBehaviors = [];\n    this.updateBehaviors = [];\n    this.recycleBehaviors = [];\n    this.minLifetime = 0;\n    this.maxLifetime = 0;\n    this.customEase = void 0;\n    this._frequency = 1;\n    this.spawnChance = 1;\n    this.maxParticles = 1e3;\n    this.emitterLifetime = -1;\n    this.spawnPos = new Point();\n    this.particlesPerWave = 1;\n    this.rotation = 0;\n    this.ownerPos = new Point();\n    this._prevEmitterPos = new Point();\n    this._prevPosIsValid = false;\n    this._posChanged = false;\n    this._parent = void 0;\n    this.addAtBack = false;\n    this.particleCount = 0;\n    this._emit = false;\n    this._spawnTimer = 0;\n    this._emitterLife = -1;\n    this._origConfig = void 0;\n    this._autoUpdate = false;\n    this._destroyWhenComplete = false;\n    this._completeCallback = void 0;\n    this._particleImages = [];\n    this.parent = particleParent;\n    this.particleImages = particleImages ?? getTexturesFromConfig(config);\n    this.init(config);\n    this.recycle = this.recycle;\n    this.update = this.update;\n    this.rotate = this.rotate;\n    this.updateSpawnPos = this.updateSpawnPos;\n    this.updateOwnerPos = this.updateOwnerPos;\n  }\n  /**\n   * Registers a new behavior, so that it will be recognized when initializing emitters.\n   * Behaviors registered later with duplicate types will override older ones, although there is no limit on\n   * the allowed types.\n   * @param behaviorClass The behavior class to register.\n   */\n  static registerBehavior(behaviorClass) {\n    _Emitter.knownBehaviors[behaviorClass.type] = behaviorClass;\n  }\n  /**\n   * Time between particle spawns in seconds. If this value is not a number greater than 0,\n   * it will be set to 1 (particle per second) to prevent infinite loops.\n   */\n  get frequency() {\n    return this._frequency;\n  }\n  set frequency(value) {\n    if (typeof value === \"number\" && value > 0) {\n      this._frequency = value;\n    } else {\n      this._frequency = 1;\n    }\n  }\n  /**\n   * The container to add particles to. Settings this will dump any active particles.\n   */\n  get parent() {\n    return this._parent;\n  }\n  set parent(value) {\n    this.cleanup();\n    this._parent = value;\n  }\n  get particleImages() {\n    return this._particleImages;\n  }\n  set particleImages(value) {\n    this._particleImages = parseTextures(value);\n  }\n  /**\n   * Sets up the emitter based on the config settings.\n   * @param config A configuration object containing settings for the emitter.\n   */\n  init(config) {\n    if (!config) {\n      return;\n    }\n    this.cleanup();\n    this._origConfig = config;\n    this.minLifetime = config.lifetime.min;\n    this.maxLifetime = config.lifetime.max;\n    if (config.ease) {\n      this.customEase = typeof config.ease === \"function\" ? config.ease : typeof config.ease === \"string\" ? generateEaseFromPath(config.ease) : generateEase(config.ease);\n    } else {\n      this.customEase = void 0;\n    }\n    this.particlesPerWave = 1;\n    if (config.particlesPerWave && config.particlesPerWave > 1) {\n      this.particlesPerWave = config.particlesPerWave;\n    }\n    this.frequency = config.frequency;\n    this.spawnChance = typeof config.spawnChance === \"number\" && config.spawnChance > 0 ? config.spawnChance : 1;\n    this.emitterLifetime = config.emitterLifetime || -1;\n    const maxParticles = config.maxParticles ?? 0;\n    this.maxParticles = maxParticles > 0 ? maxParticles : 1e3;\n    this.addAtBack = !!config.addAtBack;\n    this.rotation = 0;\n    this.ownerPos.set(0);\n    if (config.pos) {\n      this.spawnPos.copyFrom(config.pos);\n    } else {\n      this.spawnPos.set(0);\n    }\n    this._prevEmitterPos.copyFrom(this.spawnPos);\n    this._prevPosIsValid = false;\n    this._spawnTimer = 0;\n    this.emit = config.emit === void 0 ? true : !!config.emit;\n    this.autoUpdate = !!config.autoUpdate;\n    const behaviors = config.behaviors.map((data) => {\n      const behaviorClass = _Emitter.knownBehaviors[data.type];\n      if (!behaviorClass) {\n        console.error(`Unknown behavior: ${data.type}`);\n        return null;\n      }\n      return new behaviorClass(data.config);\n    }).filter((b) => !!b);\n    behaviors.push(PositionParticle);\n    behaviors.sort((a, b) => {\n      if (a === PositionParticle) {\n        return b.order === 0 /* Spawn */ ? 1 : -1;\n      } else if (b === PositionParticle) {\n        return a.order === 0 /* Spawn */ ? -1 : 1;\n      }\n      return a.order - b.order;\n    });\n    this.initBehaviors = behaviors.slice();\n    this.updateBehaviors = behaviors.filter(\n      (b) => b !== PositionParticle && b.updateParticle\n    );\n    this.recycleBehaviors = behaviors.filter(\n      (b) => b !== PositionParticle && b.recycleParticle\n    );\n  }\n  /**\n   * Gets the instantiated behavior of the specified type, if it is present on this emitter.\n   * @param type The behavior type to find.\n   */\n  getBehavior(type) {\n    if (!_Emitter.knownBehaviors[type]) return null;\n    return this.initBehaviors.find(\n      (b) => b instanceof _Emitter.knownBehaviors[type]\n    ) || null;\n  }\n  /**\n   * Fills the pool with the specified number of particles, so that they don't have to be instantiated later.\n   * @param count The number of particles to create.\n   */\n  fillPool(count) {\n    for (; count > 0; --count) {\n      const p = new Particle(this);\n      p.next = this._poolFirst;\n      this._poolFirst = p;\n    }\n  }\n  /**\n   * Recycles an individual particle. For internal use only.\n   * @param particle The particle to recycle.\n   * @param fromCleanup If this is being called to manually clean up all particles.\n   * @internal\n   */\n  recycle(particle, fromCleanup = false) {\n    for (let i = 0; i < this.recycleBehaviors.length; ++i) {\n      this.recycleBehaviors[i].recycleParticle?.(particle, !fromCleanup);\n    }\n    if (particle.next) {\n      particle.next.prev = particle.prev;\n    }\n    if (particle.prev) {\n      particle.prev.next = particle.next;\n    }\n    if (particle === this._activeParticlesLast) {\n      this._activeParticlesLast = particle.prev;\n    }\n    if (particle === this._activeParticlesFirst) {\n      this._activeParticlesFirst = particle.next;\n    }\n    particle.prev = void 0;\n    particle.next = this._poolFirst;\n    this._poolFirst = particle;\n    particle.removeFromParent();\n    --this.particleCount;\n  }\n  /**\n   * Sets the rotation of the emitter to a new value. This rotates the spawn position in addition\n   * to particle direction.\n   * @param newRot The new rotation, in degrees.\n   */\n  rotate(newRot) {\n    if (this.rotation === newRot) return;\n    const diff = newRot - this.rotation;\n    this.rotation = newRot;\n    rotatePoint(diff, this.spawnPos);\n    this._posChanged = true;\n  }\n  /**\n   * Changes the spawn position of the emitter.\n   * @param x The new x value of the spawn position for the emitter.\n   * @param y The new y value of the spawn position for the emitter.\n   */\n  updateSpawnPos(x, y) {\n    this._posChanged = true;\n    this.spawnPos.x = x;\n    this.spawnPos.y = y;\n  }\n  /**\n   * Changes the position of the emitter's owner. You should call this if you are adding\n   * particles to the world container that your emitter's owner is moving around in.\n   * @param x The new x value of the emitter's owner.\n   * @param y The new y value of the emitter's owner.\n   */\n  updateOwnerPos(x, y) {\n    this._posChanged = true;\n    this.ownerPos.x = x;\n    this.ownerPos.y = y;\n  }\n  /**\n   * Prevents emitter position interpolation in the next update.\n   * This should be used if you made a major position change of your emitter's owner\n   * that was not normal movement.\n   */\n  resetPositionTracking() {\n    this._prevPosIsValid = false;\n  }\n  /**\n   * If particles should be emitted during update() calls. Setting this to false\n   * stops new particles from being created, but allows existing ones to die out.\n   */\n  get emit() {\n    return this._emit;\n  }\n  set emit(value) {\n    this._emit = !!value;\n    this._emitterLife = this.emitterLifetime;\n  }\n  /**\n   * If the update function is called automatically from the shared ticker.\n   * Setting this to false requires calling the update function manually.\n   */\n  get autoUpdate() {\n    return this._autoUpdate;\n  }\n  set autoUpdate(value) {\n    if (this._autoUpdate && !value) {\n      ticker.remove(this.updateByTicker, this);\n    } else if (!this._autoUpdate && value) {\n      ticker.add(this.updateByTicker, this);\n    }\n    this._autoUpdate = !!value;\n  }\n  /**\n   * Starts emitting particles, sets autoUpdate to true, and sets up the Emitter to destroy itself\n   * when particle emission is complete.\n   * @param callback Callback for when emission is complete (all particles have died off)\n   */\n  playOnceAndDestroy(callback) {\n    this.autoUpdate = true;\n    this.emit = true;\n    this._destroyWhenComplete = true;\n    this._completeCallback = callback;\n  }\n  /**\n   * Starts emitting particles and optionally calls a callback when particle emission is complete.\n   * @param callback Callback for when emission is complete (all particles have died off)\n   */\n  playOnce(callback) {\n    this.emit = true;\n    this._completeCallback = callback;\n  }\n  /**\n   * Pixi V8 Ticker.add will passing Ticker as the first argument. if you want to directly attach the update\n   * to Ticker like `ticker.add(emitter.updateByTicker, emitter)`\n   */\n  updateByTicker(delta) {\n    this.update(delta.elapsedMS * 1e-3);\n  }\n  /**\n   * Updates all particles spawned by this emitter and emits new ones.\n   * @param delta Time elapsed since the previous frame, in __seconds__.\n   */\n  update(delta) {\n    if (!this._parent) return;\n    for (let particle = this._activeParticlesFirst, next; particle; particle = next) {\n      next = particle.next;\n      particle.age += delta;\n      if (particle.age > particle.maxLife || particle.age < 0) {\n        this.recycle(particle);\n      } else {\n        let lerp = particle.age * particle.oneOverLife;\n        if (this.customEase) {\n          if (this.customEase.length === 4) {\n            lerp = this.customEase(lerp, 0, 1, 1);\n          } else {\n            lerp = this.customEase(lerp);\n          }\n        }\n        particle.agePercent = lerp;\n        for (let i = 0; i < this.updateBehaviors.length; ++i) {\n          if (this.updateBehaviors[i].updateParticle?.(particle, delta)) {\n            this.recycle(particle);\n            break;\n          }\n        }\n      }\n    }\n    let prevX = 0;\n    let prevY = 0;\n    if (this._prevPosIsValid) {\n      prevX = this._prevEmitterPos.x;\n      prevY = this._prevEmitterPos.y;\n    }\n    const curX = this.ownerPos.x + this.spawnPos.x;\n    const curY = this.ownerPos.y + this.spawnPos.y;\n    if (this._emit) {\n      this._spawnTimer -= delta < 0 ? 0 : delta;\n      while (this._spawnTimer <= 0) {\n        if (this._emitterLife >= 0) {\n          this._emitterLife -= this._frequency;\n          if (this._emitterLife <= 0) {\n            this._spawnTimer = 0;\n            this._emitterLife = 0;\n            this.emit = false;\n            break;\n          }\n        }\n        if (this.particleCount >= this.maxParticles) {\n          this._spawnTimer += this._frequency;\n          continue;\n        }\n        let emitPosX;\n        let emitPosY;\n        if (this._prevPosIsValid && this._posChanged) {\n          const lerp = 1 + this._spawnTimer / delta;\n          emitPosX = (curX - prevX) * lerp + prevX;\n          emitPosY = (curY - prevY) * lerp + prevY;\n        } else {\n          emitPosX = curX;\n          emitPosY = curY;\n        }\n        let waveFirst;\n        let waveLast;\n        for (let len = Math.min(\n          this.particlesPerWave,\n          this.maxParticles - this.particleCount\n        ), i = 0; i < len; ++i) {\n          if (this.spawnChance < 1 && Math.random() >= this.spawnChance) {\n            continue;\n          }\n          let lifetime;\n          if (this.minLifetime === this.maxLifetime) {\n            lifetime = this.minLifetime;\n          } else {\n            lifetime = Math.random() * (this.maxLifetime - this.minLifetime) + this.minLifetime;\n          }\n          if (-this._spawnTimer >= lifetime) {\n            continue;\n          }\n          let p;\n          if (this._poolFirst) {\n            p = this._poolFirst;\n            this._poolFirst = this._poolFirst.next;\n            p.next = void 0;\n          } else {\n            p = new Particle(this);\n          }\n          p.init(lifetime);\n          if (this.addAtBack) {\n            p.appendAt(this._parent, 0);\n          } else {\n            p.appendTo(this._parent);\n          }\n          if (waveFirst) {\n            waveLast.next = p;\n            p.prev = waveLast;\n            waveLast = p;\n          } else {\n            waveLast = waveFirst = p;\n          }\n          ++this.particleCount;\n        }\n        if (waveFirst) {\n          if (this._activeParticlesLast) {\n            this._activeParticlesLast.next = waveFirst;\n            waveFirst.prev = this._activeParticlesLast;\n            this._activeParticlesLast = waveLast;\n          } else {\n            this._activeParticlesFirst = waveFirst;\n            this._activeParticlesLast = waveLast;\n          }\n          for (let i = 0; i < this.initBehaviors.length; ++i) {\n            const behavior = this.initBehaviors[i];\n            if (behavior === PositionParticle) {\n              for (let particle = waveFirst, next; particle !== void 0; particle = next) {\n                next = particle.next;\n                if (this.rotation !== 0) {\n                  rotatePoint(this.rotation, particle);\n                  particle.rotation += this.rotation;\n                }\n                particle.x += emitPosX;\n                particle.y += emitPosY;\n                particle.age += -this._spawnTimer;\n                let lerp = particle.age * particle.oneOverLife;\n                if (this.customEase) {\n                  if (this.customEase.length === 4) {\n                    lerp = this.customEase(lerp, 0, 1, 1);\n                  } else {\n                    lerp = this.customEase(lerp);\n                  }\n                }\n                particle.agePercent = lerp;\n              }\n            } else {\n              behavior.initParticles(waveFirst);\n            }\n          }\n          for (let particle = waveFirst, next; particle !== void 0; particle = next) {\n            next = particle.next;\n            for (let i = 0; i < this.updateBehaviors.length; ++i) {\n              if (this.updateBehaviors[i].updateParticle?.(\n                particle,\n                -this._spawnTimer\n              )) {\n                this.recycle(particle);\n                break;\n              }\n            }\n          }\n        }\n        this._spawnTimer += this._frequency;\n      }\n    }\n    if (this._posChanged) {\n      this._prevEmitterPos.x = curX;\n      this._prevEmitterPos.y = curY;\n      this._prevPosIsValid = true;\n      this._posChanged = false;\n    }\n    if (!this._emit && !this._activeParticlesFirst) {\n      if (this._completeCallback) {\n        const cb = this._completeCallback;\n        this._completeCallback = void 0;\n        cb();\n      }\n      if (this._destroyWhenComplete) {\n        this.destroy();\n      }\n    }\n  }\n  /**\n   * Emits a single wave of particles, using standard spawnChance & particlesPerWave settings. Does not affect\n   * regular spawning through the frequency, and ignores the emit property. The max particle count is respected, however,\n   * so if there are already too many particles then nothing will happen.\n   */\n  emitNow() {\n    if (!this._parent) return;\n    const emitPosX = this.ownerPos.x + this.spawnPos.x;\n    const emitPosY = this.ownerPos.y + this.spawnPos.y;\n    let waveFirst;\n    let waveLast;\n    for (let len = Math.min(\n      this.particlesPerWave,\n      this.maxParticles - this.particleCount\n    ), i = 0; i < len; ++i) {\n      if (this.spawnChance < 1 && Math.random() >= this.spawnChance) {\n        continue;\n      }\n      let p;\n      if (this._poolFirst) {\n        p = this._poolFirst;\n        this._poolFirst = this._poolFirst.next;\n        p.next = void 0;\n      } else {\n        p = new Particle(this);\n      }\n      let lifetime;\n      if (this.minLifetime === this.maxLifetime) {\n        lifetime = this.minLifetime;\n      } else {\n        lifetime = Math.random() * (this.maxLifetime - this.minLifetime) + this.minLifetime;\n      }\n      p.init(lifetime);\n      if (this.addAtBack) {\n        p.appendAt(this._parent, 0);\n      } else {\n        p.appendTo(this._parent);\n      }\n      if (waveFirst) {\n        waveLast.next = p;\n        p.prev = waveLast;\n        waveLast = p;\n      } else {\n        waveLast = waveFirst = p;\n      }\n      ++this.particleCount;\n    }\n    if (waveFirst) {\n      if (this._activeParticlesLast) {\n        this._activeParticlesLast.next = waveFirst;\n        waveFirst.prev = this._activeParticlesLast;\n        this._activeParticlesLast = waveLast;\n      } else {\n        this._activeParticlesFirst = waveFirst;\n        this._activeParticlesLast = waveLast;\n      }\n      for (let i = 0; i < this.initBehaviors.length; ++i) {\n        const behavior = this.initBehaviors[i];\n        if (behavior === PositionParticle) {\n          for (let particle = waveFirst, next; particle !== void 0; particle = next) {\n            next = particle.next;\n            if (this.rotation !== 0) {\n              rotatePoint(this.rotation, particle);\n              particle.rotation += this.rotation;\n            }\n            particle.x += emitPosX;\n            particle.y += emitPosY;\n          }\n        } else {\n          behavior.initParticles(waveFirst);\n        }\n      }\n    }\n  }\n  /**\n   * Kills all active particles immediately.\n   */\n  cleanup() {\n    let particle;\n    let next;\n    for (particle = this._activeParticlesFirst; particle; particle = next) {\n      next = particle.next;\n      this.recycle(particle, true);\n    }\n    this._activeParticlesFirst = this._activeParticlesLast = void 0;\n    this.particleCount = 0;\n  }\n  /**\n   * If this emitter has been destroyed. Note that a destroyed emitter can still be reused, after\n   * having a new parent set and being reinitialized.\n   */\n  get destroyed() {\n    return !(this._parent && this.initBehaviors.length);\n  }\n  /**\n   * Destroys the emitter and all of its particles.\n   */\n  destroy() {\n    this.autoUpdate = false;\n    this.cleanup();\n    let next;\n    for (let particle = this._poolFirst; particle; particle = next) {\n      next = particle.next;\n      particle.destroy();\n    }\n    this._poolFirst = // @ts-expect-error\n    this.spawnPos = // @ts-expect-error\n    this.ownerPos = this._parent = this.customEase = this._completeCallback = void 0;\n    this.initBehaviors.length = this.updateBehaviors.length = this.recycleBehaviors.length = 0;\n  }\n};\n__publicField(_Emitter, \"knownBehaviors\", {});\nvar Emitter = _Emitter;\n\n// src/behaviors/index.ts\nvar behaviors_exports = {};\n__export(behaviors_exports, {\n  AccelerationBehavior: () => AccelerationBehavior,\n  AlphaBehavior: () => AlphaBehavior,\n  BehaviorOrder: () => BehaviorOrder,\n  BurstSpawnBehavior: () => BurstSpawnBehavior,\n  ColorBehavior: () => ColorBehavior,\n  NoRotationBehavior: () => NoRotationBehavior,\n  OrderedTextureBehavior: () => OrderedTextureBehavior,\n  PathBehavior: () => PathBehavior,\n  PointSpawnBehavior: () => PointSpawnBehavior,\n  RandomAnimatedTextureBehavior: () => RandomAnimatedTextureBehavior,\n  RandomTextureBehavior: () => RandomTextureBehavior,\n  RotationBehavior: () => RotationBehavior,\n  ScaleBehavior: () => ScaleBehavior,\n  ShapeSpawnBehavior: () => ShapeSpawnBehavior,\n  SingleAnimatedTextureBehavior: () => SingleAnimatedTextureBehavior,\n  SingleTextureBehavior: () => SingleTextureBehavior,\n  SpeedBehavior: () => SpeedBehavior,\n  StaticAlphaBehavior: () => StaticAlphaBehavior,\n  StaticAnchorBehavior: () => StaticAnchorBehavior,\n  StaticColorBehavior: () => StaticColorBehavior,\n  StaticRotationBehavior: () => StaticRotationBehavior,\n  StaticScaleBehavior: () => StaticScaleBehavior,\n  StaticSpeedBehavior: () => StaticSpeedBehavior,\n  getAnimatedTextures: () => getAnimatedTextures,\n  spawnShapes: () => shapes_exports\n});\n\n// src/behaviors/shapes/index.ts\nvar shapes_exports = {};\n__export(shapes_exports, {\n  PolygonalChain: () => PolygonalChain,\n  Rectangle: () => Rectangle,\n  Torus: () => Torus\n});\n\n// src/behaviors/shapes/Rectangle.ts\nvar Rectangle = class {\n  constructor(config) {\n    /**\n     * X (left) position of the rectangle.\n     */\n    __publicField(this, \"x\");\n    /**\n     * Y (top) position of the rectangle.\n     */\n    __publicField(this, \"y\");\n    /**\n     * Width of the rectangle.\n     */\n    __publicField(this, \"w\");\n    /**\n     * Height of the rectangle.\n     */\n    __publicField(this, \"h\");\n    this.x = config.x;\n    this.y = config.y;\n    this.w = Math.max(config.w, 1);\n    this.h = Math.max(config.h, 1);\n  }\n  getRandPos(particle) {\n    particle.x = Math.random() * this.w + this.x;\n    particle.y = Math.random() * this.h + this.y;\n  }\n};\n__publicField(Rectangle, \"type\", \"rect\");\n\n// src/behaviors/shapes/Torus.ts\nvar Torus = class {\n  constructor(config) {\n    /**\n     * X position of the center of the shape.\n     */\n    __publicField(this, \"x\");\n    /**\n     * Y position of the center of the shape.\n     */\n    __publicField(this, \"y\");\n    /**\n     * Radius of circle, or outer radius of a ring.\n     */\n    __publicField(this, \"radius\");\n    /**\n     * Inner radius of a ring. Use 0 to have a circle.\n     */\n    __publicField(this, \"innerRadius\");\n    /**\n     * If rotation should be applied to particles.\n     */\n    __publicField(this, \"rotation\");\n    this.x = config.x || 0;\n    this.y = config.y || 0;\n    this.radius = Math.max(config.radius, 1);\n    this.innerRadius = config.innerRadius || 0;\n    this.rotation = !!config.affectRotation;\n  }\n  getRandPos(particle) {\n    if (this.innerRadius !== this.radius) {\n      particle.x = Math.random() * (this.radius - this.innerRadius) + this.innerRadius;\n    } else {\n      particle.x = this.radius;\n    }\n    particle.y = 0;\n    const angle = Math.random() * Math.PI * 2;\n    if (this.rotation) {\n      particle.rotation += angle;\n    }\n    rotatePoint(angle, particle);\n    particle.x += this.x;\n    particle.y += this.y;\n  }\n};\n__publicField(Torus, \"type\", \"torus\");\n\n// src/behaviors/shapes/PolygonalChain.ts\nvar PolygonalChain = class {\n  /**\n   * @param data Point data for polygon chains. Either a list of points for a single chain, or a list of chains.\n   */\n  constructor(data) {\n    /**\n     * List of segment objects in the chain.\n     */\n    __publicField(this, \"segments\");\n    /**\n     * Total length of all segments of the chain.\n     */\n    __publicField(this, \"totalLength\");\n    /**\n     * Total length of segments up to and including the segment of the same index.\n     * Used for weighted random selection of segment.\n     */\n    __publicField(this, \"countingLengths\");\n    this.segments = [];\n    this.countingLengths = [];\n    this.totalLength = 0;\n    this.init(data);\n  }\n  /**\n   * @param data Point data for polygon chains. Either a list of points for a single chain, or a list of chains.\n   */\n  init(data) {\n    if (!data || !data.length) {\n      this.segments.push({ p1: { x: 0, y: 0 }, p2: { x: 0, y: 0 }, l: 0 });\n    } else if (Array.isArray(data[0])) {\n      for (let i = 0; i < data.length; ++i) {\n        const chain = data[i];\n        let prevPoint = chain[0];\n        for (let j = 1; j < chain.length; ++j) {\n          const second = chain[j];\n          this.segments.push({ p1: prevPoint, p2: second, l: 0 });\n          prevPoint = second;\n        }\n      }\n    } else {\n      let prevPoint = data[0];\n      for (let i = 1; i < data.length; ++i) {\n        const second = data[i];\n        this.segments.push({ p1: prevPoint, p2: second, l: 0 });\n        prevPoint = second;\n      }\n    }\n    for (let i = 0; i < this.segments.length; ++i) {\n      const { p1, p2 } = this.segments[i];\n      const segLength = Math.sqrt(\n        (p2.x - p1.x) * (p2.x - p1.x) + (p2.y - p1.y) * (p2.y - p1.y)\n      );\n      this.segments[i].l = segLength;\n      this.totalLength += segLength;\n      this.countingLengths.push(this.totalLength);\n    }\n  }\n  /**\n   * Gets a random point in the chain.\n   * @param out The point to store the selected position in.\n   */\n  getRandPos(out) {\n    const rand = Math.random() * this.totalLength;\n    let chosenSeg;\n    let lerp = 0;\n    if (this.segments.length === 1) {\n      chosenSeg = this.segments[0];\n      lerp = rand;\n    } else {\n      for (let i = 0; i < this.countingLengths.length; ++i) {\n        if (rand < this.countingLengths[i]) {\n          chosenSeg = this.segments[i];\n          lerp = i === 0 ? rand : rand - this.countingLengths[i - 1];\n          break;\n        }\n      }\n    }\n    lerp /= chosenSeg.l || 1;\n    const { p1, p2 } = chosenSeg;\n    out.x = p1.x + lerp * (p2.x - p1.x);\n    out.y = p1.y + lerp * (p2.y - p1.y);\n  }\n};\n__publicField(PolygonalChain, \"type\", \"polygonalChain\");\n\n// src/behaviors/AccelerationMovement.ts\nimport { Point as Point2 } from \"pixi.js\";\nvar AccelerationBehavior = class {\n  constructor(config) {\n    // doesn't _really_ need to be late, but doing so ensures that we can override any\n    // rotation behavior that is mistakenly added\n    __publicField(this, \"order\", 5 /* Late */);\n    __publicField(this, \"minStart\");\n    __publicField(this, \"maxStart\");\n    __publicField(this, \"accel\");\n    __publicField(this, \"rotate\");\n    __publicField(this, \"maxSpeed\");\n    this.minStart = config.minStart;\n    this.maxStart = config.maxStart;\n    this.accel = config.accel;\n    this.rotate = !!config.rotate;\n    this.maxSpeed = config.maxSpeed ?? 0;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      const speed = Math.random() * (this.maxStart - this.minStart) + this.minStart;\n      if (!next.config.velocity) {\n        next.config.velocity = new Point2(speed, 0);\n      } else {\n        next.config.velocity.set(speed, 0);\n      }\n      rotatePoint(next.rotation, next.config.velocity);\n      next = next.next;\n    }\n  }\n  updateParticle(particle, deltaSec) {\n    const vel = particle.config.velocity;\n    const oldVX = vel.x;\n    const oldVY = vel.y;\n    vel.x += this.accel.x * deltaSec;\n    vel.y += this.accel.y * deltaSec;\n    if (this.maxSpeed) {\n      const currentSpeed = length(vel);\n      if (currentSpeed > this.maxSpeed) {\n        scaleBy(vel, this.maxSpeed / currentSpeed);\n      }\n    }\n    particle.x += (oldVX + vel.x) / 2 * deltaSec;\n    particle.y += (oldVY + vel.y) / 2 * deltaSec;\n    if (this.rotate) {\n      particle.rotation = Math.atan2(vel.y, vel.x);\n    }\n  }\n};\n__publicField(AccelerationBehavior, \"type\", \"moveAcceleration\");\n\n// src/PropertyList.ts\nfunction intValueSimple(lerp) {\n  if (this.ease) lerp = this.ease(lerp);\n  return (this.first.next.value - this.first.value) * lerp + this.first.value;\n}\nfunction intColorSimple(lerp) {\n  if (this.ease) lerp = this.ease(lerp);\n  const curVal = this.first.value;\n  const nextVal = this.first.next.value;\n  const r = (nextVal.r - curVal.r) * lerp + curVal.r;\n  const g = (nextVal.g - curVal.g) * lerp + curVal.g;\n  const b = (nextVal.b - curVal.b) * lerp + curVal.b;\n  return { r, g, b };\n}\nfunction intValueComplex(lerp) {\n  if (this.ease) lerp = this.ease(lerp);\n  let current = this.first;\n  let next = current.next;\n  while (lerp > next.time) {\n    current = next;\n    next = next.next;\n  }\n  lerp = (lerp - current.time) / (next.time - current.time);\n  return (next.value - current.value) * lerp + current.value;\n}\nfunction intColorComplex(lerp) {\n  if (this.ease) lerp = this.ease(lerp);\n  let current = this.first;\n  let next = current.next;\n  while (lerp > next.time) {\n    current = next;\n    next = next.next;\n  }\n  lerp = (lerp - current.time) / (next.time - current.time);\n  const curVal = current.value;\n  const nextVal = next.value;\n  const r = (nextVal.r - curVal.r) * lerp + curVal.r;\n  const g = (nextVal.g - curVal.g) * lerp + curVal.g;\n  const b = (nextVal.b - curVal.b) * lerp + curVal.b;\n  return { r, g, b };\n}\nfunction intValueStepped(lerp) {\n  if (this.ease) lerp = this.ease(lerp);\n  let current = this.first;\n  while (current.next && lerp > current.next.time) {\n    current = current.next;\n  }\n  return current.value;\n}\nfunction intColorStepped(lerp) {\n  if (this.ease) lerp = this.ease(lerp);\n  let current = this.first;\n  while (current.next && lerp > current.next.time) {\n    current = current.next;\n  }\n  const curVal = current.value;\n  return curVal;\n}\nvar PropertyList = class {\n  /**\n   * @param isColor If this list handles color values\n   */\n  constructor(isColor = false) {\n    /**\n     * The first property node in the linked list.\n     */\n    __publicField(this, \"first\");\n    /**\n     * Calculates the correct value for the current interpolation value. This method is set in\n     * the reset() method.\n     * @param lerp The interpolation value from 0-1.\n     * @return The interpolated value. Colors are converted to the hex value.\n     */\n    __publicField(this, \"interpolate\");\n    /**\n     * A custom easing method for this list.\n     * @param lerp The interpolation value from 0-1.\n     * @return The eased value, also from 0-1.\n     */\n    __publicField(this, \"ease\");\n    /**\n     * If this list manages colors, which requires a different method for interpolation.\n     */\n    __publicField(this, \"isColor\");\n    this.first = void 0;\n    this.isColor = !!isColor;\n    this.interpolate = void 0;\n    this.ease = void 0;\n  }\n  /**\n   * Resets the list for use.\n   * @param first The first node in the list.\n   * @param first.isStepped If the values should be stepped instead of interpolated linearly.\n   */\n  reset(first) {\n    this.first = first;\n    const isSimple = first.next && first.next.time >= 1;\n    if (isSimple) {\n      this.interpolate = this.isColor ? intColorSimple : intValueSimple;\n    } else if (first.isStepped) {\n      this.interpolate = this.isColor ? intColorStepped : intValueStepped;\n    } else {\n      this.interpolate = this.isColor ? intColorComplex : intValueComplex;\n    }\n    this.ease = this.first.ease;\n  }\n};\n\n// src/behaviors/Alpha.ts\nvar AlphaBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"list\");\n    this.list = new PropertyList(false);\n    this.list.reset(PropertyNode.createList(config.alpha));\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      next.alpha = this.list.first.value;\n      next = next.next;\n    }\n  }\n  updateParticle(particle) {\n    particle.alpha = this.list.interpolate(particle.agePercent);\n  }\n};\n__publicField(AlphaBehavior, \"type\", \"alpha\");\nvar StaticAlphaBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"value\");\n    this.value = config.alpha;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      next.alpha = this.value;\n      next = next.next;\n    }\n  }\n};\n__publicField(StaticAlphaBehavior, \"type\", \"alphaStatic\");\n\n// src/behaviors/Anchor.ts\nvar StaticAnchorBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"x\");\n    __publicField(this, \"y\");\n    this.x = config.x;\n    this.y = config.y;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      next.anchorX = this.x;\n      next.anchorY = this.y;\n      next = next.next;\n    }\n  }\n};\n__publicField(StaticAnchorBehavior, \"type\", \"anchorStatic\");\n\n// src/behaviors/AnimatedTexture.ts\nimport { Texture as Texture2 } from \"pixi.js\";\nfunction getAnimatedTextures(textures) {\n  const textureList = textures.map((texture) => {\n    if (typeof texture === \"string\" || texture instanceof Texture2) {\n      return texture;\n    }\n    return texture.texture;\n  });\n  const parsedTextures = parseTextures(textureList);\n  const outTextures = [];\n  for (let j = 0; j < textures.length; ++j) {\n    const config = textures[j];\n    const texture = parsedTextures[j];\n    if (typeof config === \"string\" || config instanceof Texture2) {\n      outTextures.push(texture);\n    } else {\n      for (let dupe = config.count || 1; dupe > 0; --dupe) {\n        outTextures.push(texture);\n      }\n    }\n  }\n  return outTextures;\n}\nvar RandomAnimatedTextureBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"anims\");\n    this.anims = [];\n    for (let i = 0; i < config.anims.length; ++i) {\n      const anim = config.anims[i];\n      const textures = getAnimatedTextures(anim.textures);\n      const framerate = anim.framerate < 0 ? -1 : anim.framerate > 0 ? anim.framerate : 60;\n      const parsedAnim = {\n        textures,\n        duration: framerate > 0 ? textures.length / framerate : 0,\n        framerate,\n        loop: framerate > 0 ? !!anim.loop : false\n      };\n      this.anims.push(parsedAnim);\n    }\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      const index = Math.floor(Math.random() * this.anims.length);\n      const anim = next.config.anim = this.anims[index];\n      next.texture = anim.textures[0];\n      next.config.animElapsed = 0;\n      if (anim.framerate === -1) {\n        next.config.animDuration = next.maxLife;\n        next.config.animFramerate = anim.textures.length / next.maxLife;\n      } else {\n        next.config.animDuration = anim.duration;\n        next.config.animFramerate = anim.framerate;\n      }\n      next = next.next;\n    }\n  }\n  updateParticle(particle, deltaSec) {\n    const config = particle.config;\n    const anim = config.anim;\n    config.animElapsed += deltaSec;\n    if (config.animElapsed >= config.animDuration) {\n      if (config.anim.loop) {\n        config.animElapsed = config.animElapsed % config.animDuration;\n      } else {\n        config.animElapsed = config.animDuration - 1e-6;\n      }\n    }\n    const frame = config.animElapsed * config.animFramerate + 1e-7 | 0;\n    particle.texture = anim.textures[frame] || anim.textures[anim.textures.length - 1] || Texture2.EMPTY;\n  }\n};\n__publicField(RandomAnimatedTextureBehavior, \"type\", \"animatedRandom\");\nvar SingleAnimatedTextureBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"anim\");\n    const anim = config.anim;\n    const textures = getAnimatedTextures(anim.textures);\n    const framerate = anim.framerate < 0 ? -1 : anim.framerate > 0 ? anim.framerate : 60;\n    this.anim = {\n      textures,\n      duration: framerate > 0 ? textures.length / framerate : 0,\n      framerate,\n      loop: framerate > 0 ? !!anim.loop : false\n    };\n  }\n  initParticles(first) {\n    let next = first;\n    const anim = this.anim;\n    while (next) {\n      next.texture = anim.textures[0];\n      next.config.animElapsed = 0;\n      if (anim.framerate === -1) {\n        next.config.animDuration = next.maxLife;\n        next.config.animFramerate = anim.textures.length / next.maxLife;\n      } else {\n        next.config.animDuration = anim.duration;\n        next.config.animFramerate = anim.framerate;\n      }\n      next = next.next;\n    }\n  }\n  updateParticle(particle, deltaSec) {\n    const anim = this.anim;\n    const config = particle.config;\n    config.animElapsed += deltaSec;\n    if (config.animElapsed >= config.animDuration) {\n      if (anim.loop) {\n        config.animElapsed = config.animElapsed % config.animDuration;\n      } else {\n        config.animElapsed = config.animDuration - 1e-6;\n      }\n    }\n    const frame = config.animElapsed * config.animFramerate + 1e-7 | 0;\n    particle.texture = anim.textures[frame] || anim.textures[anim.textures.length - 1] || anim.textures[0];\n  }\n};\n__publicField(SingleAnimatedTextureBehavior, \"type\", \"animatedSingle\");\n\n// src/behaviors/BurstSpawn.ts\nvar BurstSpawnBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 0 /* Spawn */);\n    __publicField(this, \"spacing\");\n    __publicField(this, \"start\");\n    __publicField(this, \"distance\");\n    this.spacing = config.spacing * DEG_TO_RADS;\n    this.start = config.start * DEG_TO_RADS;\n    this.distance = config.distance;\n  }\n  initParticles(first) {\n    let count = 0;\n    let next = first;\n    while (next) {\n      let angle;\n      if (this.spacing) {\n        angle = this.start + this.spacing * count;\n      } else {\n        angle = Math.random() * Math.PI * 2;\n      }\n      next.rotation = angle;\n      if (this.distance) {\n        next.x = this.distance;\n        rotatePoint(angle, next);\n      }\n      next = next.next;\n      ++count;\n    }\n  }\n};\n__publicField(BurstSpawnBehavior, \"type\", \"spawnBurst\");\n\n// src/behaviors/Color.ts\nimport { Color as PixiColor2 } from \"pixi.js\";\nvar ColorBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"list\");\n    this.list = new PropertyList(true);\n    this.list.reset(PropertyNode.createList(config.color));\n  }\n  initParticles(first) {\n    let next = first;\n    const color = this.list.first.value;\n    while (next) {\n      next.tint = PixiColor2.shared.setValue(color);\n      next = next.next;\n    }\n  }\n  updateParticle(particle) {\n    const color = this.list.interpolate(particle.agePercent);\n    particle.tint = PixiColor2.shared.setValue(color);\n  }\n};\n__publicField(ColorBehavior, \"type\", \"color\");\nvar StaticColorBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"value\");\n    const color = new PixiColor2(config.color);\n    this.value = color;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      next.tint = this.value;\n      next = next.next;\n    }\n  }\n};\n__publicField(StaticColorBehavior, \"type\", \"colorStatic\");\n\n// src/behaviors/OrderedTexture.ts\nvar OrderedTextureBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"textures\");\n    __publicField(this, \"index\");\n    this.index = 0;\n    this.textures = parseTextures(config.textures);\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      next.texture = this.textures[this.index];\n      if (++this.index >= this.textures.length) {\n        this.index = 0;\n      }\n      next = next.next;\n    }\n  }\n};\n__publicField(OrderedTextureBehavior, \"type\", \"textureOrdered\");\n\n// src/behaviors/PathMovement.ts\nimport { Point as Point3 } from \"pixi.js\";\nvar helperPoint = Point3.shared;\nvar MATH_FUNCS = [\n  \"E\",\n  \"LN2\",\n  \"LN10\",\n  \"LOG2E\",\n  \"LOG10E\",\n  \"PI\",\n  \"SQRT1_2\",\n  \"SQRT2\",\n  \"abs\",\n  \"acos\",\n  \"acosh\",\n  \"asin\",\n  \"asinh\",\n  \"atan\",\n  \"atanh\",\n  \"atan2\",\n  \"cbrt\",\n  \"ceil\",\n  \"cos\",\n  \"cosh\",\n  \"exp\",\n  \"expm1\",\n  \"floor\",\n  \"fround\",\n  \"hypot\",\n  \"log\",\n  \"log1p\",\n  \"log10\",\n  \"log2\",\n  \"max\",\n  \"min\",\n  \"pow\",\n  \"random\",\n  \"round\",\n  \"sign\",\n  \"sin\",\n  \"sinh\",\n  \"sqrt\",\n  \"tan\",\n  \"tanh\"\n];\nvar WHITELISTER = new RegExp(\n  [\n    // Allow the 4 basic operations, parentheses and all numbers/decimals, as well\n    // as 'x', for the variable usage.\n    \"[01234567890\\\\.\\\\*\\\\-\\\\+\\\\/\\\\(\\\\)x ,]\"\n  ].concat(MATH_FUNCS).join(\"|\"),\n  \"g\"\n);\nfunction parsePath(pathString) {\n  const matches = pathString.match(WHITELISTER) ?? [pathString];\n  for (let i = matches.length - 1; i >= 0; --i) {\n    if (MATH_FUNCS.indexOf(matches[i]) >= 0) {\n      matches[i] = `Math.${matches[i]}`;\n    }\n  }\n  pathString = matches.join(\"\");\n  return new Function(\"x\", `return ${pathString};`);\n}\nvar PathBehavior = class {\n  constructor(config) {\n    // *MUST* happen after other behaviors do initialization so that we can read initial transformations\n    __publicField(this, \"order\", 5 /* Late */);\n    /**\n     * The function representing the path the particle should take.\n     */\n    __publicField(this, \"path\");\n    __publicField(this, \"list\");\n    __publicField(this, \"minMult\");\n    if (config.path) {\n      if (typeof config.path === \"function\") {\n        this.path = config.path;\n      } else {\n        try {\n          this.path = parsePath(config.path);\n        } catch (e) {\n          if (verbose) {\n            console.error(\"PathParticle: error in parsing path expression\", e);\n          }\n          this.path = null;\n        }\n      }\n    } else {\n      if (verbose) {\n        console.error(\"PathParticle requires a path value in its config!\");\n      }\n      this.path = (x) => x;\n    }\n    this.list = new PropertyList(false);\n    this.list.reset(PropertyNode.createList(config.speed));\n    this.minMult = config.minMult ?? 1;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      next.config.initRotation = next.rotation;\n      if (!next.config.initPosition) {\n        next.config.initPosition = new Point3(next.x, next.y);\n      } else {\n        next.config.initPosition.copyFrom(next);\n      }\n      next.config.movement = 0;\n      const mult = Math.random() * (1 - this.minMult) + this.minMult;\n      next.config.speedMult = mult;\n      next = next.next;\n    }\n  }\n  updateParticle(particle, deltaSec) {\n    const speed = this.list.interpolate(particle.agePercent) * particle.config.speedMult;\n    particle.config.movement += speed * deltaSec;\n    helperPoint.x = particle.config.movement;\n    helperPoint.y = this.path(helperPoint.x);\n    rotatePoint(particle.config.initRotation, helperPoint);\n    particle.x = particle.config.initPosition.x + helperPoint.x;\n    particle.y = particle.config.initPosition.y + helperPoint.y;\n  }\n};\n__publicField(PathBehavior, \"type\", \"movePath\");\n\n// src/behaviors/PointSpawn.ts\nvar PointSpawnBehavior = class {\n  constructor() {\n    __publicField(this, \"order\", 0 /* Spawn */);\n  }\n  // eslint-disable-next-line @typescript-eslint/no-unused-vars\n  initParticles(_first) {\n  }\n};\n__publicField(PointSpawnBehavior, \"type\", \"spawnPoint\");\n\n// src/behaviors/RandomTexture.ts\nvar RandomTextureBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"textures\");\n    this.textures = parseTextures(config.textures);\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      const index = Math.floor(Math.random() * this.textures.length);\n      next.texture = this.textures[index];\n      next = next.next;\n    }\n  }\n};\n__publicField(RandomTextureBehavior, \"type\", \"textureRandom\");\n\n// src/behaviors/Rotation.ts\nvar RotationBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"minStart\");\n    __publicField(this, \"maxStart\");\n    __publicField(this, \"minSpeed\");\n    __publicField(this, \"maxSpeed\");\n    __publicField(this, \"accel\");\n    this.minStart = config.minStart * DEG_TO_RADS;\n    this.maxStart = config.maxStart * DEG_TO_RADS;\n    this.minSpeed = config.minSpeed * DEG_TO_RADS;\n    this.maxSpeed = config.maxSpeed * DEG_TO_RADS;\n    this.accel = config.accel * DEG_TO_RADS;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      if (this.minStart === this.maxStart) {\n        next.rotation += this.maxStart;\n      } else {\n        next.rotation += Math.random() * (this.maxStart - this.minStart) + this.minStart;\n      }\n      next.config.rotSpeed = Math.random() * (this.maxSpeed - this.minSpeed) + this.minSpeed;\n      next = next.next;\n    }\n  }\n  updateParticle(particle, deltaSec) {\n    if (this.accel) {\n      const oldSpeed = particle.config.rotSpeed;\n      particle.config.rotSpeed += this.accel * deltaSec;\n      particle.rotation += (particle.config.rotSpeed + oldSpeed) / 2 * deltaSec;\n    } else {\n      particle.rotation += particle.config.rotSpeed * deltaSec;\n    }\n  }\n};\n__publicField(RotationBehavior, \"type\", \"rotation\");\nvar StaticRotationBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"min\");\n    __publicField(this, \"max\");\n    this.min = config.min * DEG_TO_RADS;\n    this.max = config.max * DEG_TO_RADS;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      if (this.min === this.max) {\n        next.rotation += this.max;\n      } else {\n        next.rotation += Math.random() * (this.max - this.min) + this.min;\n      }\n      next = next.next;\n    }\n  }\n};\n__publicField(StaticRotationBehavior, \"type\", \"rotationStatic\");\nvar NoRotationBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 5 /* Late */ + 1);\n    __publicField(this, \"rotation\");\n    this.rotation = (config.rotation || 0) * DEG_TO_RADS;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      next.rotation = this.rotation;\n      next = next.next;\n    }\n  }\n};\n__publicField(NoRotationBehavior, \"type\", \"noRotation\");\n\n// src/behaviors/Scale.ts\nvar ScaleBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"list\");\n    __publicField(this, \"minMult\");\n    this.list = new PropertyList(false);\n    this.list.reset(PropertyNode.createList(config.scale));\n    this.minMult = config.minMult ?? 1;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      const mult = Math.random() * (1 - this.minMult) + this.minMult;\n      next.config.scaleMult = mult;\n      next.scaleX = next.scaleY = this.list.first.value * mult;\n      next = next.next;\n    }\n  }\n  updateParticle(particle) {\n    particle.scaleX = particle.scaleY = this.list.interpolate(particle.agePercent) * particle.config.scaleMult;\n  }\n};\n__publicField(ScaleBehavior, \"type\", \"scale\");\nvar StaticScaleBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"min\");\n    __publicField(this, \"max\");\n    this.min = config.min;\n    this.max = config.max;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      const scale = Math.random() * (this.max - this.min) + this.min;\n      next.scaleX = next.scaleY = scale;\n      next = next.next;\n    }\n  }\n};\n__publicField(StaticScaleBehavior, \"type\", \"scaleStatic\");\n\n// src/behaviors/ShapeSpawn.ts\nvar _ShapeSpawnBehavior = class _ShapeSpawnBehavior {\n  constructor(config) {\n    __publicField(this, \"order\", 0 /* Spawn */);\n    __publicField(this, \"shape\");\n    const ShapeClass = _ShapeSpawnBehavior.shapes[config.type];\n    if (!ShapeClass) {\n      throw new Error(`No shape found with type '${config.type}'`);\n    }\n    this.shape = new ShapeClass(config.data);\n  }\n  /**\n   * Registers a shape to be used by the ShapeSpawn behavior.\n   * @param shapeClass The shape class constructor to use, with a static `type` property to reference it by.\n   * @param typeOverride An optional type override, primarily for registering a shape under multiple names.\n   */\n  static registerShape(shapeClass, typeOverride) {\n    _ShapeSpawnBehavior.shapes[typeOverride || shapeClass.type] = shapeClass;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      this.shape.getRandPos(next);\n      next = next.next;\n    }\n  }\n};\n__publicField(_ShapeSpawnBehavior, \"type\", \"spawnShape\");\n/**\n * Dictionary of all registered shape classes.\n */\n__publicField(_ShapeSpawnBehavior, \"shapes\", {});\nvar ShapeSpawnBehavior = _ShapeSpawnBehavior;\nShapeSpawnBehavior.registerShape(PolygonalChain);\nShapeSpawnBehavior.registerShape(Rectangle);\nShapeSpawnBehavior.registerShape(Torus);\nShapeSpawnBehavior.registerShape(Torus, \"circle\");\n\n// src/behaviors/SingleTexture.ts\nvar SingleTextureBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 2 /* Normal */);\n    __publicField(this, \"texture\");\n    this.texture = typeof config.texture === \"string\" ? GetTextureFromString(config.texture) : config.texture;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      next.texture = this.texture;\n      next = next.next;\n    }\n  }\n};\n__publicField(SingleTextureBehavior, \"type\", \"textureSingle\");\n\n// src/behaviors/SpeedMovement.ts\nimport { Point as Point4 } from \"pixi.js\";\nvar SpeedBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 5 /* Late */);\n    __publicField(this, \"list\");\n    __publicField(this, \"minMult\");\n    this.list = new PropertyList(false);\n    this.list.reset(PropertyNode.createList(config.speed));\n    this.minMult = config.minMult ?? 1;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      const mult = Math.random() * (1 - this.minMult) + this.minMult;\n      next.config.speedMult = mult;\n      if (!next.config.velocity) {\n        next.config.velocity = new Point4(this.list.first.value * mult, 0);\n      } else {\n        next.config.velocity.set(this.list.first.value * mult, 0);\n      }\n      rotatePoint(next.rotation, next.config.velocity);\n      next = next.next;\n    }\n  }\n  updateParticle(particle, deltaSec) {\n    const speed = this.list.interpolate(particle.agePercent) * particle.config.speedMult;\n    const vel = particle.config.velocity;\n    normalize(vel);\n    scaleBy(vel, speed);\n    particle.x += vel.x * deltaSec;\n    particle.y += vel.y * deltaSec;\n  }\n};\n__publicField(SpeedBehavior, \"type\", \"moveSpeed\");\nvar StaticSpeedBehavior = class {\n  constructor(config) {\n    __publicField(this, \"order\", 5 /* Late */);\n    __publicField(this, \"min\");\n    __publicField(this, \"max\");\n    this.min = config.min;\n    this.max = config.max;\n  }\n  initParticles(first) {\n    let next = first;\n    while (next) {\n      const speed = Math.random() * (this.max - this.min) + this.min;\n      if (!next.config.velocity) {\n        next.config.velocity = new Point4(speed, 0);\n      } else {\n        next.config.velocity.set(speed, 0);\n      }\n      rotatePoint(next.rotation, next.config.velocity);\n      next = next.next;\n    }\n  }\n  updateParticle(particle, deltaSec) {\n    const velocity = particle.config.velocity;\n    particle.x += velocity.x * deltaSec;\n    particle.y += velocity.y * deltaSec;\n  }\n};\n__publicField(StaticSpeedBehavior, \"type\", \"moveSpeedStatic\");\n\n// src/EmitterConfig.ts\nfunction upgradeConfig(config, art) {\n  if (\"behaviors\" in config) {\n    return config;\n  }\n  const out = {\n    lifetime: config.lifetime,\n    ease: config.ease,\n    particlesPerWave: config.particlesPerWave,\n    frequency: config.frequency,\n    spawnChance: config.spawnChance,\n    emitterLifetime: config.emitterLifetime,\n    maxParticles: config.maxParticles,\n    addAtBack: config.addAtBack,\n    pos: config.pos,\n    emit: config.emit,\n    autoUpdate: config.autoUpdate,\n    behaviors: []\n  };\n  if (config.alpha) {\n    if (\"start\" in config.alpha) {\n      if (config.alpha.start === config.alpha.end) {\n        if (config.alpha.start !== 1) {\n          out.behaviors.push({\n            type: \"alphaStatic\",\n            config: { alpha: config.alpha.start }\n          });\n        }\n      } else {\n        const list = {\n          list: [\n            { time: 0, value: config.alpha.start },\n            { time: 1, value: config.alpha.end }\n          ]\n        };\n        out.behaviors.push({\n          type: \"alpha\",\n          config: { alpha: list }\n        });\n      }\n    } else if (config.alpha.list.length === 1) {\n      if (config.alpha.list[0].value !== 1) {\n        out.behaviors.push({\n          type: \"alphaStatic\",\n          config: { alpha: config.alpha.list[0].value }\n        });\n      }\n    } else {\n      out.behaviors.push({\n        type: \"alpha\",\n        config: { alpha: config.alpha }\n      });\n    }\n  }\n  if (config.acceleration && (config.acceleration.x || config.acceleration.y)) {\n    let minStart;\n    let maxStart;\n    if (config.speed && \"start\" in config.speed) {\n      minStart = config.speed.start * (config.speed.minimumSpeedMultiplier ?? 1);\n      maxStart = config.speed.start;\n    } else {\n      minStart = config.speed.list[0].value * (config.minimumSpeedMultiplier ?? 1);\n      maxStart = config.speed.list[0].value;\n    }\n    out.behaviors.push({\n      type: \"moveAcceleration\",\n      config: {\n        accel: config.acceleration,\n        minStart,\n        maxStart,\n        rotate: !config.noRotation,\n        maxSpeed: config.maxSpeed\n      }\n    });\n  } else if (config.extraData?.path) {\n    let list;\n    let mult;\n    if (config.speed && \"start\" in config.speed) {\n      mult = config.speed.minimumSpeedMultiplier ?? 1;\n      if (config.speed.start === config.speed.end) {\n        list = {\n          list: [{ time: 0, value: config.speed.start }]\n        };\n      } else {\n        list = {\n          list: [\n            { time: 0, value: config.speed.start },\n            { time: 1, value: config.speed.end }\n          ]\n        };\n      }\n    } else {\n      list = config.speed;\n      mult = config.minimumSpeedMultiplier ?? 1;\n    }\n    out.behaviors.push({\n      type: \"movePath\",\n      config: {\n        path: config.extraData.path,\n        speed: list,\n        minMult: mult\n      }\n    });\n  } else {\n    if (config.speed) {\n      if (\"start\" in config.speed) {\n        if (config.speed.start === config.speed.end) {\n          out.behaviors.push({\n            type: \"moveSpeedStatic\",\n            config: {\n              min: config.speed.start * (config.speed.minimumSpeedMultiplier ?? 1),\n              max: config.speed.start\n            }\n          });\n        } else {\n          const list = {\n            list: [\n              { time: 0, value: config.speed.start },\n              { time: 1, value: config.speed.end }\n            ]\n          };\n          out.behaviors.push({\n            type: \"moveSpeed\",\n            config: {\n              speed: list,\n              minMult: config.speed.minimumSpeedMultiplier\n            }\n          });\n        }\n      } else if (config.speed.list.length === 1) {\n        out.behaviors.push({\n          type: \"moveSpeedStatic\",\n          config: {\n            min: config.speed.list[0].value * (config.minimumSpeedMultiplier ?? 1),\n            max: config.speed.list[0].value\n          }\n        });\n      } else {\n        out.behaviors.push({\n          type: \"moveSpeed\",\n          config: {\n            speed: config.speed,\n            minMult: config.minimumSpeedMultiplier ?? 1\n          }\n        });\n      }\n    }\n  }\n  if (config.scale) {\n    if (\"start\" in config.scale) {\n      const mult = config.scale.minimumScaleMultiplier ?? 1;\n      if (config.scale.start === config.scale.end) {\n        out.behaviors.push({\n          type: \"scaleStatic\",\n          config: {\n            min: config.scale.start * mult,\n            max: config.scale.start\n          }\n        });\n      } else {\n        const list = {\n          list: [\n            { time: 0, value: config.scale.start },\n            { time: 1, value: config.scale.end }\n          ]\n        };\n        out.behaviors.push({\n          type: \"scale\",\n          config: { scale: list, minMult: mult }\n        });\n      }\n    } else if (config.scale.list.length === 1) {\n      const mult = config.minimumScaleMultiplier ?? 1;\n      const scale = config.scale.list[0].value;\n      out.behaviors.push({\n        type: \"scaleStatic\",\n        config: { min: scale * mult, max: scale }\n      });\n    } else {\n      out.behaviors.push({\n        type: \"scale\",\n        config: {\n          scale: config.scale,\n          minMult: config.minimumScaleMultiplier ?? 1\n        }\n      });\n    }\n  }\n  if (config.color) {\n    if (\"start\" in config.color) {\n      if (config.color.start === config.color.end) {\n        if (config.color.start !== \"ffffff\") {\n          out.behaviors.push({\n            type: \"colorStatic\",\n            config: { color: config.color.start }\n          });\n        }\n      } else {\n        const list = {\n          list: [\n            { time: 0, value: config.color.start },\n            { time: 1, value: config.color.end }\n          ]\n        };\n        out.behaviors.push({\n          type: \"color\",\n          config: { color: list }\n        });\n      }\n    } else if (config.color.list.length === 1) {\n      if (config.color.list[0].value !== \"ffffff\") {\n        out.behaviors.push({\n          type: \"colorStatic\",\n          config: { color: config.color.list[0].value }\n        });\n      }\n    } else {\n      out.behaviors.push({\n        type: \"color\",\n        config: { color: config.color }\n      });\n    }\n  }\n  if (config.rotationAcceleration || config.rotationSpeed?.min || config.rotationSpeed?.max) {\n    out.behaviors.push({\n      type: \"rotation\",\n      config: {\n        accel: config.rotationAcceleration || 0,\n        minSpeed: config.rotationSpeed?.min || 0,\n        maxSpeed: config.rotationSpeed?.max || 0,\n        minStart: config.startRotation?.min || 0,\n        maxStart: config.startRotation?.max || 0\n      }\n    });\n  } else if (config.startRotation?.min || config.startRotation?.max) {\n    out.behaviors.push({\n      type: \"rotationStatic\",\n      config: {\n        min: config.startRotation?.min || 0,\n        max: config.startRotation?.max || 0\n      }\n    });\n  }\n  if (config.noRotation) {\n    out.behaviors.push({\n      type: \"noRotation\",\n      config: {}\n    });\n  }\n  if (config.blendMode && config.blendMode !== \"normal\") {\n    out.behaviors.push({\n      type: \"blendMode\",\n      config: {\n        blendMode: config.blendMode\n      }\n    });\n  }\n  if (Array.isArray(art) && typeof art[0] !== \"string\" && \"framerate\" in art[0]) {\n    for (let i = 0; i < art.length; ++i) {\n      if (art[i].framerate === \"matchLife\") {\n        art[i].framerate = -1;\n      }\n    }\n    out.behaviors.push({\n      type: \"animatedRandom\",\n      config: {\n        anims: art\n      }\n    });\n  } else if (typeof art !== \"string\" && \"framerate\" in art) {\n    if (art.framerate === \"matchLife\") {\n      art.framerate = -1;\n    }\n    out.behaviors.push({\n      type: \"animatedSingle\",\n      config: {\n        anim: art\n      }\n    });\n  } else if (config.orderedArt && Array.isArray(art)) {\n    out.behaviors.push({\n      type: \"textureOrdered\",\n      config: {\n        textures: art\n      }\n    });\n  } else if (Array.isArray(art)) {\n    out.behaviors.push({\n      type: \"textureRandom\",\n      config: {\n        textures: art\n      }\n    });\n  } else {\n    out.behaviors.push({\n      type: \"textureSingle\",\n      config: {\n        texture: art\n      }\n    });\n  }\n  if (config.spawnType === \"burst\") {\n    out.behaviors.push({\n      type: \"spawnBurst\",\n      config: {\n        start: config.angleStart || 0,\n        spacing: config.particleSpacing,\n        // older formats bursted from a single point\n        distance: 0\n      }\n    });\n  } else if (config.spawnType === \"point\") {\n    out.behaviors.push({\n      type: \"spawnPoint\",\n      config: {}\n    });\n  } else {\n    let shape;\n    if (config.spawnType === \"ring\" && config.spawnCircle) {\n      shape = {\n        type: \"torus\",\n        data: {\n          x: config.spawnCircle.x,\n          y: config.spawnCircle.y,\n          radius: config.spawnCircle.r,\n          innerRadius: config.spawnCircle.minR,\n          affectRotation: true\n        }\n      };\n    } else if (config.spawnType === \"circle\" && config.spawnCircle) {\n      shape = {\n        type: \"torus\",\n        data: {\n          x: config.spawnCircle.x,\n          y: config.spawnCircle.y,\n          radius: config.spawnCircle.r,\n          innerRadius: 0,\n          affectRotation: false\n        }\n      };\n    } else if (config.spawnType === \"rect\") {\n      shape = {\n        type: \"rect\",\n        data: config.spawnRect\n      };\n    } else if (config.spawnType === \"polygonalChain\") {\n      shape = {\n        type: \"polygonalChain\",\n        data: config.spawnPolygon\n      };\n    }\n    if (shape) {\n      out.behaviors.push({\n        type: \"spawnShape\",\n        config: shape\n      });\n    }\n  }\n  return out;\n}\n\n// src/index.ts\nEmitter.registerBehavior(AccelerationBehavior);\nEmitter.registerBehavior(AlphaBehavior);\nEmitter.registerBehavior(StaticAlphaBehavior);\nEmitter.registerBehavior(StaticAnchorBehavior);\nEmitter.registerBehavior(RandomAnimatedTextureBehavior);\nEmitter.registerBehavior(SingleAnimatedTextureBehavior);\nEmitter.registerBehavior(BurstSpawnBehavior);\nEmitter.registerBehavior(ColorBehavior);\nEmitter.registerBehavior(StaticColorBehavior);\nEmitter.registerBehavior(OrderedTextureBehavior);\nEmitter.registerBehavior(PathBehavior);\nEmitter.registerBehavior(PointSpawnBehavior);\nEmitter.registerBehavior(RandomTextureBehavior);\nEmitter.registerBehavior(RotationBehavior);\nEmitter.registerBehavior(StaticRotationBehavior);\nEmitter.registerBehavior(NoRotationBehavior);\nEmitter.registerBehavior(ScaleBehavior);\nEmitter.registerBehavior(StaticScaleBehavior);\nEmitter.registerBehavior(ShapeSpawnBehavior);\nEmitter.registerBehavior(SingleTextureBehavior);\nEmitter.registerBehavior(SpeedBehavior);\nEmitter.registerBehavior(StaticSpeedBehavior);\nexport {\n  Emitter,\n  Particle,\n  ParticleUtils_exports as ParticleUtils,\n  PropertyList,\n  PropertyNode,\n  behaviors_exports as behaviors,\n  upgradeConfig\n};\n","import { Emitter, EmitterConfigV3 } from \"@spd789562/particle-emitter\";\r\nimport * as PIXI from \"pixi.js\";\r\nimport { Scene } from \"../../../common/scene\";\r\nimport { DemoApp } from \"../../demo-app\";\r\nimport { SceneKey } from \"../../scene-key\";\r\nimport { DemoAppHUD } from \"../../ui/demo-app-hud\";\r\nimport { Player } from \"tone\";\r\n\r\nimport fireConfig from \"./config/fire-config.json\";\r\nimport lightConfig from \"./config/light-config.json\";\r\nimport smokeConfig from \"./config/smoke-config.json\";\r\n\r\nconst ATLAS_PATH = \"textures/particles\";\r\n\r\nexport class PhoenixFlameScene extends Scene<DemoApp> {\r\n\tprivate hud = new DemoAppHUD(this.app, {\r\n\t\tonBackButtonPressed: () => this.app.showScene(SceneKey.Menu),\r\n\t});\r\n\r\n\tprivate background = new PIXI.Sprite();\r\n\r\n\tprivate particleContainer = new PIXI.ParticleContainer({\r\n\t\tdynamicProperties: {\r\n\t\t\tuvs: false,\r\n\t\t\tvertex: true,\r\n\t\t\tposition: true,\r\n\t\t\trotation: false,\r\n\t\t\tscale: true,\r\n\t\t\tcolor: true,\r\n\t\t},\r\n\t});\r\n\r\n\tprivate flameEmitter?: Emitter;\r\n\tprivate lightEmitter?: Emitter;\r\n\tprivate smokeEmitter?: Emitter;\r\n\r\n\tprivate ambiencePlayer = new Player(\"audio/forest_campfire_ambience.m4a\", () => {\r\n\t\tthis.ambiencePlayer.volume.value = -6;\r\n\t\tthis.ambiencePlayer.loop = true;\r\n\t\tthis.ambiencePlayer.start();\r\n\t}).toDestination();\r\n\r\n\tprotected handleInit() {\r\n\t\tthis.background.anchor.set(0.5);\r\n\t\tthis.background.texture = this.app.getFrame(ATLAS_PATH, \"campfire_scene\");\r\n\r\n\t\tconst preparedFireConfig: EmitterConfigV3 = { ...fireConfig };\r\n\t\tpreparedFireConfig.behaviors.push({\r\n\t\t\ttype: \"textureRandom\",\r\n\t\t\tconfig: {\r\n\t\t\t\ttextures: [\r\n\t\t\t\t\tthis.app.getFrame(ATLAS_PATH, \"flame_particle_trimmed\"),\r\n\t\t\t\t\tthis.app.getFrame(ATLAS_PATH, \"flame_particle_flipped_trimmed\"),\r\n\t\t\t\t],\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.flameEmitter = new Emitter(this.particleContainer, preparedFireConfig);\r\n\r\n\t\tconst preparedLightConfig: EmitterConfigV3 = { ...lightConfig };\r\n\t\tpreparedLightConfig.behaviors.push({\r\n\t\t\ttype: \"textureRandom\",\r\n\t\t\tconfig: {\r\n\t\t\t\ttextures: [this.app.getFrame(ATLAS_PATH, \"radial_gradient\")],\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.lightEmitter = new Emitter(this.particleContainer, preparedLightConfig);\r\n\r\n\t\tconst preparedSmokeConfig: EmitterConfigV3 = { ...smokeConfig };\r\n\t\tpreparedSmokeConfig.behaviors.push({\r\n\t\t\ttype: \"textureRandom\",\r\n\t\t\tconfig: {\r\n\t\t\t\ttextures: [this.app.getFrame(ATLAS_PATH, \"radial_gradient\")],\r\n\t\t\t},\r\n\t\t});\r\n\t\tthis.smokeEmitter = new Emitter(this.particleContainer, preparedSmokeConfig);\r\n\r\n\t\tthis.flameEmitter.emit = true;\r\n\t\tthis.lightEmitter.emit = true;\r\n\t\tthis.smokeEmitter.emit = true;\r\n\r\n\t\tthis.particleContainer.position.set(0, 120);\r\n\r\n\t\tthis.addChild(this.background);\r\n\t\tthis.addChild(this.particleContainer);\r\n\t\tthis.addChild(this.hud);\r\n\t}\r\n\r\n\tprotected handleUpdate(): void {\r\n\t\tthis.flameEmitter?.update(this.app.ticker.elapsedMS * 0.001);\r\n\t\tthis.lightEmitter?.update(this.app.ticker.elapsedMS * 0.001);\r\n\t\tthis.smokeEmitter?.update(this.app.ticker.elapsedMS * 0.001);\r\n\t}\r\n\r\n\tprotected async handleLoad() {\r\n\t\tthis.displayStatusText(\"Loading scene assets...\");\r\n\r\n\t\tawait this.app.addAtlas(ATLAS_PATH, 1);\r\n\r\n\t\t// Ideally this would be configurable per texture/atlas, but for demo purposes we'll just set it here.\r\n\t\tconst cardsAtlas = this.app.getAtlas(ATLAS_PATH);\r\n\t\tcardsAtlas.textureSource.style.scaleMode = \"nearest\";\r\n\r\n\t\tthis.hideStatusText();\r\n\t}\r\n\r\n\tprotected async handleLoadError() {\r\n\t\tthis.displayAndLogError(\"Failed to load scene assets...\");\r\n\t}\r\n\r\n\tprotected async handleUnload() {\r\n\t\tthis.ambiencePlayer.dispose();\r\n\t}\r\n}\r\n","import { AppBase } from \"../common/app-base\";\r\nimport { Scene } from \"../common/scene\";\r\nimport { SceneKey } from \"./scene-key\";\r\nimport { AceOfShadowsScene } from \"./scenes/ace-of-shadows/ace-of-shadows-scene\";\r\nimport { MagicWordsScene } from \"./scenes/magic-words/magic-words-scene\";\r\nimport { MenuScene } from \"./scenes/menu/menu-scene\";\r\nimport { PhoenixFlameScene } from \"./scenes/phoenix-flame/phoenix-flame-scene\";\r\n\r\n/**\r\n * Game-specific app class.\r\n *\r\n * Expands on the base app class with a basic scene management system.\r\n *\r\n * This scene system would ideally be more fully featured in a real app,\r\n * with proper scene transitions, loading, and unloading of assets.\r\n */\r\nexport class DemoApp extends AppBase {\r\n\tpublic scenes: { [key in SceneKey]: typeof Scene<DemoApp> } = {\r\n\t\t[SceneKey.Menu]: MenuScene,\r\n\t\t[SceneKey.AceOfShadows]: AceOfShadowsScene,\r\n\t\t[SceneKey.MagicWords]: MagicWordsScene,\r\n\t\t[SceneKey.PhoenixFlame]: PhoenixFlameScene,\r\n\t};\r\n\r\n\tprivate currentScene?: Scene<DemoApp>;\r\n\r\n\tconstructor() {\r\n\t\tsuper({\r\n\t\t\t// 4K 16:9 reference resolution\r\n\t\t\twidth: 4096,\r\n\t\t\theight: 2160,\r\n\t\t\tblend: 1,\r\n\t\t\tresolutionBreakpoints: [\r\n\t\t\t\t// Approximate breakpoints still need refinement and testing on real devices\r\n\t\t\t\t{ maxSideSizeThreshold: 0, resolution: 1 },\r\n\t\t\t\t{ maxSideSizeThreshold: 1200, resolution: 2 },\r\n\t\t\t],\r\n\t\t});\r\n\r\n\t\tthis.preventContextMenu();\r\n\t}\r\n\r\n\tpublic async showScene(key: SceneKey) {\r\n\t\tif (this.currentScene) {\r\n\t\t\tthis.currentScene.destroy({ children: true });\r\n\t\t\tdelete this.currentScene;\r\n\t\t}\r\n\r\n\t\tthis.currentScene = new this.scenes[key](this);\r\n\r\n\t\tthis.root.addChild(this.currentScene);\r\n\t}\r\n}\r\n","// CreateJS lib imports.\r\n// this is the only package that uses global namespaces due to legacy support.\r\nimport \"tweenjs/lib/tweenjs\";\r\nimport \"../libs/tween-group\";\r\ncreatejs.Ticker.timingMode = createjs.Ticker.RAF;\r\ncreatejs.Ticker.maxDelta = 100;\r\n\r\nimport { DemoApp } from \"./demo-app/demo-app\";\r\nimport { SceneKey } from \"./demo-app/scene-key\";\r\nimport * as audioManifest from \"./demo-app/audio.json\";\r\n\r\nasync function start() {\r\n\tsetWindowStyle();\r\n\r\n\tconst app = new DemoApp();\r\n\tawait app.init({ backgroundColor: 0x1f1f1f });\r\n\tapp.startApp();\r\n\r\n\tlet loadError;\r\n\r\n\ttry {\r\n\t\tawait Promise.all([\r\n\t\t\t// Currently no other assets to load, but audio is needed.\r\n\t\t\t// More common assets would usually be added here.\r\n\t\t\tapp.audio.init(audioManifest),\r\n\t\t]);\r\n\t} catch (err) {\r\n\t\tloadError = err;\r\n\t}\r\n\r\n\tif (loadError) {\r\n\t\t// Handle common asset loading errors.\r\n\t\t// Assumes essential textures could not be loaded.\r\n\t\tconsole.error(\"Error loading assets:\", loadError);\r\n\t\tshowLoadingError(loadError);\r\n\t} else {\r\n\t\t// Quick and dirty fullscreen on click implementation.\r\n\t\t// In a real app you'd want a proper UI button for this.\r\n\t\t// This also won't work on iOS Safari due to their restrictions around fullscreen.\r\n\t\t// For that you need to do some workarounds with scrolling and viewport sizing.\r\n\t\twindow.document.body.onpointerdown = () => app.requestFullscreen();\r\n\r\n\t\t// Add the app canvas to the DOM.\r\n\t\twindow.document.body.appendChild(app.canvas);\r\n\r\n\t\t// Show the menu scene.\r\n\t\tapp.showScene(SceneKey.Menu);\r\n\t}\r\n}\r\n\r\nfunction setWindowStyle() {\r\n\twindow.document.body.style.background = \"black\";\r\n\twindow.document.body.style.overflow = \"hidden\";\r\n\twindow.document.body.style.margin = \"0px\";\r\n\twindow.document.body.style.padding = \"0px\";\r\n\twindow.document.body.style.border = \"0px\";\r\n}\r\n\r\n// Quick and dirty dom-based error display.\r\nfunction showLoadingError(error: unknown) {\r\n\tconst errorContainer = window.document.createElement(\"div\");\r\n\terrorContainer.style.position = \"fixed\";\r\n\terrorContainer.style.top = \"50%\";\r\n\terrorContainer.style.left = \"50%\";\r\n\terrorContainer.style.transform = \"translate(-50%, -50%)\";\r\n\terrorContainer.style.color = \"#ff4444\";\r\n\terrorContainer.style.fontFamily = \"Arial, sans-serif\";\r\n\terrorContainer.style.fontSize = \"24px\";\r\n\terrorContainer.style.textAlign = \"center\";\r\n\terrorContainer.style.padding = \"20px\";\r\n\terrorContainer.style.backgroundColor = \"rgba(0, 0, 0, 0.8)\";\r\n\terrorContainer.style.borderRadius = \"10px\";\r\n\terrorContainer.style.maxWidth = \"80%\";\r\n\r\n\terrorContainer.innerHTML = `\r\n\t\t<h2 style=\"margin: 0 0 10px 0;\">Loading Error</h2>\r\n\t\t<p style=\"margin: 0; font-size: 16px; color: #cccccc;\">\r\n\t\t\t${error instanceof Error ? error.message : String(error)}\r\n\t\t</p>\r\n\t`;\r\n\r\n\twindow.document.body.appendChild(errorContainer);\r\n}\r\n\r\nif (window.document.readyState === \"loading\") {\r\n\twindow.addEventListener(\"load\", start);\r\n} else {\r\n\tstart();\r\n}\r\n"],"names":["leafPrototypes","getProto","module","exports","r","a","length","e","n","Array","__esModule","uidCache","default","uid","name","bgr2rgb","color","getGlobalMixin","getGlobalAlpha","skipUpdate","this","renderGroup","worldAlpha","parentRenderGroup","alpha","current","parent","getGlobalTransform","matrix","copyFrom","worldTransform","updateLocalTransform","parentTransform","get","identity","appendFrom","localTransform","return","getGlobalTint","worldColor","localColor","tint","idHash","Object","create","_TextureStyle","constructor","options","super","_resourceType","_touched","_maxAnisotropy","destroyed","defaultOptions","addressMode","addressModeU","addressModeV","addressModeW","scaleMode","magFilter","minFilter","mipmapFilter","lodMinClamp","lodMaxClamp","compare","maxAnisotropy","value","wrapMode","Math","min","_resourceId","_sharedResourceId","_generateResourceId","update","emit","bigKey","id","createResourceIdFromString","destroy","removeAllListeners","TextureStyle","cacheAsTextureMixin","isCachedAsTexture","cacheAsTexture","val","disableRenderGroup","enableRenderGroup","enableCacheAsTexture","updateCacheTexture","cacheAsBitmap","deprecation","childrenHelperMixin","allowChildren","removeChildren","beginIndex","endIndex","end","children","range","removed","i","child","push","removeItems","parentRenderLayer","detach","_didViewChangeTick","RangeError","removeChildAt","index","getChildAt","removeChild","Error","setChildIndex","getChildIndex","addChildAt","indexOf","currentIndex","splice","didChange","_updateFlags","addChild","sortableChildren","sortDirty","swapChildren","child2","index1","index2","structureDidChange","_didContainerChangeTick","removeFromParent","reparentChild","reparentChildAt","forEach","c","childMat","clone","newMatrix","invert","prepend","setFromMatrix","replaceChild","oldChild","newChild","collectRenderablesMixin","collectRenderables","instructionSet","renderer","currentLayer","globalDisplayStatus","includeInBuild","sortChildren","isSimple","collectRenderablesSimple","renderPipes","addRenderGroup","collectRenderablesWithEffects","effects","effect","pipe","pop","MaskEffectManager","_effectClasses","_tests","_initialized","init","test","add","maskClass","getMaskEffect","item","returnMaskEffect","handleByList","MaskEffect","effectsMixin","_maskEffect","_maskOptions","inverse","_filterEffect","_markStructureAsChanged","addEffect","sort","b","priority","_updateIsSimple","removeEffect","mask","setMask","filters","isArray","FilterEffect","hasFilters","slice","freeze","filterArea","findMixin","label","getChildByName","deep","getChildByLabel","RegExp","found","getChildrenByLabel","out","tempMatrix","Matrix","getFastGlobalBoundsMixin","getFastGlobalBounds","factorRenderLayers","bounds","Bounds","clear","_getGlobalBoundsRecursive","isValid","set","applyMatrix","localBounds","localDisplayStatus","measurable","manageEffects","boundsArea","addRect","renderPipeId","viewBounds","addFrame","minX","minY","maxX","maxY","groupTransform","advanced","addBounds","copyTo","relativeGroupTransform","checkChildrenDidChange","container","previousData","data","measureMixin","_localBoundsCacheId","_localBoundsCacheData","_setWidth","localWidth","sign","scale","x","_setHeight","localHeight","y","getLocalBounds","localBoundsCacheData","getBounds","getGlobalBounds","onRenderMixin","_onRender","onRender","func","removeOnRender","addOnRender","sortMixin","_zIndex","zIndex","depthOfChildModified","toLocalGlobalMixin","getGlobalPosition","point","Point","toGlobal","_position","position","globalMatrix","apply","toLocal","from","applyInverse","defaultSkew","ObservablePoint","defaultPivot","defaultScale","defaultOrigin","UPDATE_COLOR","UPDATE_BLEND","UPDATE_VISIBLE","Container","parentRenderGroupIndex","didViewUpdate","relativeRenderGroupDepth","updateTick","_scale","_pivot","_origin","_skew","_cx","_sx","_cy","_sy","_rotation","localAlpha","groupAlpha","groupColor","groupColorAlpha","localBlendMode","groupBlendMode","_didLocalTransformChangeId","assignWithIgnore","mixin","source","_didChangeId","_onUpdate","_updateSkew","onChildUpdate","isRenderGroup","RenderGroup","IDENTITY","_worldTransform","rotation","angle","pivot","warn","skew","parseFloat","origin","width","abs","height","getSize","setSize","size","cos","_y","sin","_x","updateTransform","opts","scaleX","scaleY","skewX","skewY","pivotX","pivotY","originX","originY","decompose","localTransformChangeId","lt","sx","sy","px","py","ox","oy","d","tx","ty","bgr","Color","shared","setValue","toBgrNumber","blendMode","visible","valueNumber","culled","renderable","isRenderable","oldChildren","cullArea","cullable","cullableChildren","warnCount","maxWarnings","args","console","_RenderTarget","descriptor","colorTextures","dirtyId","isRoot","_size","Float32Array","_managedColorTextures","stencil","depth","resolution","antialias","map","texture","colorSource","colorTexture","resize","_resolution","on","onSourceResize","depthStencilTexture","ensureDepthStencilTexture","pixelWidth","pixelHeight","format","autoGenerateMipmaps","mipLevelCount","skipColorTexture","off","RenderTarget","cachedGroups","getTextureBatchBindGroup","textures","maxTextures","imul","key","bindGroupResources","bindIndex","EMPTY","style","bindGroup","generateTextureBatchBindGroup","BufferResource","buffer","offset","_bufferResource","onBufferChange","destroyBuffer","_TextureSource","uploadMethodId","sampleCount","dimension","_batchTick","_textureBindLocation","resource","autoGarbageCollect","resourceWidth","resourceHeight","dimensions","alphaMode","_refreshPOT","_style","_onStyleChange","repeatMode","unload","naturalWidth","videoWidth","displayWidth","naturalHeight","videoHeight","displayHeight","newPixelWidth","round","newPixelHeight","updateMipmaps","isPowerOfTwo","_resource","TextureSource","defineProperty","DrumKitByPatchID","InstrumentFamilyByID","instrumentByPatchID","WHITE_BGR","multiplyColors","localBGRColor","parentBGRColor","environments","handleByNamedList","Environment","defaultRunners","_AbstractRenderer","config","runners","_initOptions","_systemsHash","type","combinedRunners","_addRunners","_unsafeEvalCheck","skip","skipExtensionImports","manageImports","async","env","load","loadEnvironmentExtensions","_addSystems","systems","_addPipes","renderPipeAdaptors","systemName","_roundPixels","roundPixels","items","render","deprecated","target","renderTexture","view","renderTarget","_lastObjectRendered","clearColor","background","colorRgba","clearBeforeRender","isRGBAArray","toArray","transform","prerender","renderStart","renderEnd","postrender","desiredScreenWidth","desiredScreenHeight","previousResolution","screen","resolutionChange","ALL","frame","canvas","lastObjectRendered","renderingToScreen","runnerIds","runnerId","SystemRunner","_addSystem","ClassRef","system","pipes","pipeAdaptors","adaptors","reduce","acc","adaptor","PipeClass","Adaptor","reverse","releaseGlobalResources","GlobalResourceRegistry","release","values","runner","generateTexture","textureGenerator","unsafeEvalSupported","resetState","failIfMajorPerformanceCaveat","AbstractRenderer","flatten","array","result","$flatten","InstructionSet","instructions","instructionSize","renderables","gcTick","reset","instruction","log","table","Buffer","usage","shrinkToFit","_updateID","_dataInt32","_data","byteLength","mappedAtCreation","setDataWithSize","dataInt32","Int32Array","static","STATIC","syncGPU","_updateSize","BYTES_PER_ELEMENT","oldData","sizeInBytes","isFillPattern","isFillGradient","handleFillPattern","fill","defaultStyle","handleFillGradient","buildGradient","textureSpace","toFillStyle","objectStyle","isColorLike","temp","toNumber","WHITE","handleColorLike","isTexture","handleTexture","handleFillObject","toStrokeStyle","alignment","miterLimit","cap","join","pixelLine","rest","BufferUsage","BufferUsage2","l","t","Symbol","iterator","u","f","o","call","next","done","GpuStencilModesToPixi","NONE","DISABLED","stencilWriteMask","stencilReadMask","RENDERING_MASK_ADD","stencilFront","passOp","stencilBack","RENDERING_MASK_REMOVE","MASK_ACTIVE","INVERSE_MASK_ACTIVE","processX","base","ids","tags","replace","createStringVariations","string","match","vars","split","substring","Resolver","_defaultBundleIdentifierOptions","connector","createBundleAssetId","bundleId","assetId","_bundleIdConnector","extractAssetIdFromBundle","assetBundleId","_createBundleAssetId","_extractAssetIdFromBundle","_assetMap","_preferredOrder","_parsers","_resolverHash","_bundles","setBundleIdentifier","bundleIdentifier","prefer","preferOrders","keys","params","basePath","_basePath","rootPath","_rootPath","parsers","_manifest","_defaultSearchParams","setDefaultSearchParams","searchParams","queryValues","encodeURIComponent","getAlias","asset","alias","src","convertToList","v","addManifest","manifest","bundles","bundle","addBundle","assets","assetNames","convertedAssets","entries","srcs","aliases","bundleAssetId","bundleIds","keyCheck","hasKey","loadParser","userDefinedLoadParser","parser","userDefinedParser","srcsToUse","src2","aliasesToUse","resolvedAssets","parseUrl","url","find","p","parse","formattedAsset","_buildResolvedAsset","progressSize","resolveBundle","singleAsset","isSingleItem","results","resolve","resolveUrl","preferredOrder","_getPreferredOrder","priorityKey","filteredAssets","filter","hasBundle","preferred","preference","includes","_appendDefaultSearchParams","assetData","path","toAbsolute","shift","RETINA_PREFIX","tempMat","TextureMatrix","clampMargin","mapCoord","uClampFrame","uClampOffset","_textureID","clampOffset","_texture","removeListener","addListener","multiplyUvs","uvs","mat","tex","x1","x0","y1","y0","x3","y3","orig","trim","append","texBase","margin","rotate","genericFontFamilies","fontStringFromTextStyle","fontSizeString","fontSize","fontFamilies","fontFamily","fontStyle","fontVariant","fontWeight","CLEAR","CLEAR2","loopMatrix","col","row","uboSyncFunctionsSTD40","f32","i32","uboSyncFunctionsWGSL","_DynamicBitmapFont","AbstractBitmapFont","pages","_padding","_measureCache","_currentChars","_currentX","_currentY","_currentMaxCharHeight","_currentPageIndex","_skipKerning","dynamicOptions","_textureSize","textureSize","_mipmap","mipmap","overrideFill","_fill","Texture","applyFillAsTint","requestedFontSize","baseMeasurementFontSize","font","overrideSize","_stroke","baseRenderedFontSize","skipKerning","padding","textureStyle","_textureStyle","fontMetrics","CanvasTextMetrics","measureFont","lineHeight","ensureCharacters","chars","charList","graphemeSegmenter","char","self","pageData","_nextPage","context","canvasAndContext","textureSource","currentX","currentY","currentMaxCharHeight","fontScale","skipTexture","maxTextureWidth","maxTextureHeight","metrics","measureText","paddedWidth","ceil","paddedHeight","max","pageData2","xAdvance","dropShadow","distance","codePointAt","xOffset","yOffset","kerning","_drawGlyph","Rectangle","_applyKerning","pageTextures","newChars","measureCache","first","j","second","c1","c2","total","amount","textureResolution","CanvasPool","getOptimalCanvasAndContext","_setupContext","ImageSource","textBaseline","stroke","strokeThickness","lineWidth","lineJoin","strokeStyle","getCanvasFillStyle","fillStyle","shadowOptions","rgb","dropShadowBlur","blur","dropShadowDistance","shadowColor","shadowBlur","shadowOffsetX","shadowOffsetY","text","fontProperties","descent","removeShadow","strokeText","fillText","returnCanvasAndContext","TextStyle","DynamicBitmapFont","fontCount","BitmapFontManager","ALPHA","NUMERIC","ALPHANUMERIC","ASCII","getFont","fontFamilyKey","styleKey","Cache","has","styleCopy","fnt","once","remove","dynamicFont","getLayout","trimEnd","bitmapFont","segments","layoutData","getBitmapTextLayout","install","textStyle","dynamicFill","_canUseTintForStyle","flatChars","startCode","charCodeAt","endCode","i2","j2","String","fromCharCode","resolveCharacters","uninstall","cacheKey","ViewableBuffer","sizeOrBuffer","rawBinaryData","ArrayBuffer","Uint8Array","uint32View","Uint32Array","float32View","int8View","_int8View","Int8Array","uint8View","_uint8View","int16View","_int16View","Int16Array","int32View","_int32View","float64View","_float64Array","Float64Array","bigUint64View","_bigUint64Array","BigUint64Array","uint16View","sizeOf","PI_2","PI","RAD_TO_DEG","DEG_TO_RAD","CustomRenderPipe","_renderer","updateRenderable","destroyRenderable","validateRenderable","addRenderable","batch","break","execute","extension","WebGLPipes","WebGPUPipes","CanvasPipes","executeInstructions","RenderGroupPipe","_addRenderableCacheAsTexture","_addRenderableDirect","_executeCacheAsTexture","_executeDirect","_batchableRenderGroup","batchableRenderGroup","BatchableSprite","root","_textureBounds","pushBlendMode","addToBatch","popBlendMode","textureNeedsUpdate","worldTransformMatrix","translate","globalUniforms","finishRenderPass","_batcher","updateElement","geometry","buffers","inverseParentTextureTransform","worldColorAlpha","clearList","list","tempContainer","UPDATE_BLEND_COLOR_VISIBLE","updateRenderGroupTransforms","updateChildRenderGroups","renderGroupParent","updateRenderGroupTransform","childrenToUpdate","renderGroupDepth","Number","childrenAtDepth","updateTransformAndChildren","renderGroupChildren","updateFlags","updateColorBlendVisibility","RenderGroupSystem","originalLocalTransform","_updateCachedRenderGroups","_updateRenderGroups","start","uniformBatch","closestCacheAsTexture","_parentCacheAsTextureRenderGroup","invalidateMatrices","lastTexture","TexturePool","returnTexture","textureOptions","getOptimalTexture","_source","runOnRender","childrenRenderablesToUpdate","rebuildRequired","validateRenderables","_buildInstructions","_updateRenderables","upload","rendererOrPipes","buildStart","colorMask","buildEnd","WebGLSystem","WebGPUSystem","CanvasSystem","SpritePipe","sprite","gpuSprite","_getGpuSprite","_updateBatchableSprite","checkAndUpdateTexture","batchableSprite","visualBounds","_gpuData","_initGPUSprite","_BatcherPipe","state","State","for2d","_batchersByInstructionSet","_activeBatches","_adaptor","getBatcher","_availableBatchers","batchers","DefaultBatcher","limits","maxBatchableTextures","_activeBatch","begin","batchableObject","batcherName","batches","indexBuffer","indexSize","attributeBuffer","attributeSize","batcher","dirty","action","shader","BatcherPipe","handleByMap","Batcher","MaskFilter","Filter","textureMatrix","filterUniforms","UniformGroup","uFilterMatrix","uMaskClamp","uAlpha","uInverse","gpuProgram","GpuProgram","vertex","entryPoint","fragment","glProgram","GlProgram","clipToViewport","resources","uMaskTexture","_textureMatrix","uniforms","filterManager","input","output","clearMode","calculateSpriteMatrix","applyFilter","tempBounds","AlphaMaskEffect","Sprite","AlphaMaskPipe","_activeMaskStage","maskedContainer","canBundle","renderMaskToTexture","maskContainer","_maskedContainer","renderMask","filterEffect","colorTextureSource","filterTexture","maskData","WEBGL","ColorMaskPipe","_colorStack","_colorStackIndex","_currentColor","_container","colorStack","currentColor","_mask","StencilMaskPipe","_maskStackHash","_maskHash","WeakMap","_a","setBlendMode","instructionsStart","instructionsLength","renderTargetUid","maskStackIndex","ensureDepthStencil","setStencilMode","STENCIL","_BackgroundSystem","_backgroundColor","backgroundColor","backgroundAlpha","setAlpha","BackgroundSystem","BLEND_MODE_FILTERS","handle","BlendMode","ref","BlendModePipe","_blendModeStack","_isAdvanced","_filterHash","_activeBlendMode","_endAdvancedBlendMode","_beginAdvancedBlendMode","_renderableList","_ensureFilterEffect","imageTypes","png","jpg","webp","_ExtractSystem","_normalizeOptions","defaults","image","createImage","base64","defaultImageOptions","quality","toBlob","Promise","reject","blob","reader","FileReader","onload","onerror","readAsDataURL","toDataURL","convertToBlob","generateCanvas","pixels","pixelInfo","getPixels","download","link","document","createElement","filename","href","body","appendChild","click","ExtractSystem","RenderTexture","tempRect","noColor","GenerateTextureSystem","textureSourceOptions","region","rectangle","GlobalUniformSystem","_stackIndex","_globalUniformDataStack","_uniformsPool","_activeUniforms","_bindGroupPool","_activeBindGroups","bind","projectionMatrix","currentGlobalUniformData","projectionData","globalUniformData","uniformGroup","_createUniforms","uProjectionMatrix","uResolution","uWorldTransformMatrix","uWorldColorAlpha","getUniformBindGroup","BindGroup","setResource","_currentGlobalUniformData","isStatic","SchedulerSystem","_tasks","_offset","Ticker","_update","repeat","duration","useOffset","performance","now","last","cancel","task","elapsed","saidHello","HelloSystem","hello","webGLVersion","getNavigator","userAgent","toLowerCase","globalThis","sayHello","cleanHash","hash","clean","cleanHash2","cleanArray","arr","renderableGCTick","_RenderableGCSystem","_managedRenderables","_managedHashes","_managedArrays","maxUnusedTime","renderableGCMaxUnusedTime","_frequency","renderableGCFrequency","enabled","renderableGCActive","_handler","scheduler","run","_hashHandler","_arrayHandler","addManagedHash","addManagedArray","_now","_updateInstructionGCTick","_lastUsed","_removeRenderable","managedRenderables","currentTick","rp","RenderableGCSystem","_TextureGCSystem","count","checkCount","checkCountMax","textureGCCheckCountMax","maxIdle","textureGCAMaxIdle","textureGCMaxIdle","active","textureGCActive","managedTextures","TextureGCSystem","_ViewSystem","autoDensity","createCanvas","getCanvasTexture","transparent","removeView","parentNode","SharedSystems","SharedRenderPipes","currentAdapter","Image","getCanvasRenderingContext2D","CanvasRenderingContext2D","getWebGLRenderingContext","WebGLRenderingContext","navigator","getBaseUrl","baseURI","window","location","getFontFaceSet","fonts","fetch","parseXML","xml","DOMParser","parseFromString","DOMAdapter","adapter","_slicedToArray","_classCallCheck","_createClass","createExtendedExponentialRampToValueAutomationEvent","endTime","insertTime","createExtendedLinearRampToValueAutomationEvent","createSetValueAutomationEvent","startTime","createSetValueCurveAutomationEvent","getTargetValueAtTime","time","valueAtStartTime","_ref","timeConstant","exp","isExponentialRampToValueAutomationEvent","automationEvent","isLinearRampToValueAutomationEvent","isAnyRampToValueAutomationEvent","isSetValueAutomationEvent","isSetValueCurveAutomationEvent","getValueOfAutomationEventAtIndexAtTime","automationEvents","defaultValue","undefined","getEndTimeAndValueOfPreviousAutomationEvent","currentAutomationEvent","nextAutomationEvent","isCancelAndHoldAutomationEvent","isCancelScheduledValuesAutomationEvent","getEventTime","cancelTime","getExponentialRampValueAtTime","pow","getLinearRampValueAtTime","getValueCurveValueAtTime","theoreticIndex","lowerIndex","floor","upperIndex","interpolateValue","isSetTargetAutomationEvent","AutomationEventList","_automationEvents","_currenTime","_defaultValue","eventTime","findIndex","removedAutomationEvent","lastAutomationEvent","startValue","truncatedAutomationEvent","getValue","ratio","fraction","factor","_index","previousAutomationEvent","persistentAutomationEvent","remainingAutomationEvents","firstRemainingAutomationEvent","unshift","indexOfNextEvent","indexOfCurrentEvent","_getEndTimeAndValueOf","_getEndTimeAndValueOf2","_getEndTimeAndValueOf3","_getEndTimeAndValueOf4","_startTime","_value","createCancelAndHoldAutomationEvent","createCancelScheduledValuesAutomationEvent","createExponentialRampToValueAutomationEvent","createLinearRampToValueAutomationEvent","createSetTargetAutomationEvent","factory","arguments","ascent","baseLineOffset","distanceField","distanceFieldRange","distanceFieldType","destroyTextures","page","isCommonjs","fn","fnMap","ret","eventNameMap","change","fullscreenchange","error","fullscreenerror","screenfull","request","element","onFullScreenEntered","returnPromise","documentElement","requestFullscreen","then","catch","exit","isFullscreen","onFullScreenExit","exitFullscreen","toggle","onchange","callback","event","eventName","addEventListener","removeEventListener","raw","defineProperties","Boolean","fullscreenElement","enumerable","isEnabled","fullscreenEnabled","BLEND_TO_NPM","normal","STENCIL_MODES","STENCIL_MODES2","_cache","Map","_cacheMap","cacheableAssets","getCacheableAssets","cacheableMap","key2","cacheKeys","cachedAssets","cacheMap","delete","updateQuadBounds","anchor","sourceWidth","sourceHeight","localUniformBit","header","main","localUniformBitGroup2","localUniformBitGl","ux","uy","vx","vy","rotationCayley","rotationMatrices","signum","_ux","_uy","_vx","_vy","k","groupD8","E","SE","S","SW","W","NW","N","NE","MIRROR_VERTICAL","MAIN_DIAGONAL","MIRROR_HORIZONTAL","REVERSE_DIAGONAL","uX","ind","uY","vX","vY","inv","rotationSecond","rotationFirst","sub","rotate180","isVertical","byDirection","dx","dy","matrixAppendRotationInv","transformRectCoords","rect","sourceFrame","frameX","frameY","frameWidth","frameHeight","BatchableText","_autoResolution","onViewUpdate","canvasText","getReferenceCount","currentKey","decreaseReferenceCount","CanvasTextPipe","gpuText","_getGpuText","newKey","_didTextUpdate","batchableText","_updateGpuText","updateTextBounds","getManagedTexture","initGpuText","CanvasTextSystem","_activeTextures","getTexture","_textKey","toString","CanvasTextGenerator","getCanvasAndContext","getPo2TextureFromSource","pad","updateUvs","filteredTexture","_applyFilters","initSource","renderTextToCanvas","textKey","_increaseReferenceCount","usageCount","activeTexture","currentRenderTarget","resultTexture","generateFilteredTexture","matrixPool","getPool","boundsPool","copySearchParams","targetUrl","sourceUrl","_getFinalPadding","_anchor","paddingOffset","paddingOffsetY","forceTransform","_poolKeyHash","_texturePool","enableFullScreen","createTexture","po2Width","po2Height","getSameSizeTexture","resetStyle","register","__spreadArray","to","pack","ar","prototype","concat","encode","midi_file_1","Header_1","array_flatten_1","encodeControlChange","cc","channel","absoluteTime","ticks","controllerType","number","deltaTime","encodeInstrument","track","programNumber","instrument","midi","midiData","numTracks","tracks","ticksPerBeat","ppq","meta","keySignatures","keySig","keyIndex","keySignatureKeys","encodeKeySignature","textEvent","tempos","tempo","microsecondsPerBeat","bpm","encodeTempo","timeSignatures","timeSig","denominator","timeSignature","metronome","numerator","thirtyseconds","encodeTimeSignature","notes","note","noteNumber","velocity","durationTicks","noteOffVelocity","encodeNote","encodeNotes","controlChanges","hasOwnProperty","encodeControlChanges","pitchBends","pb","encodePitchBend","encodePitchBends","lastTime","writeMidi","VERSION","grad","turn","rad","isFinite","g","s","h","m","exec","parseInt","substr","object","M","H","$","parsed","rgba","brightness","isDark","isLight","toHex","toRgb","toRgbString","toHsl","toHslString","toHsv","w","saturate","desaturate","grayscale","lighten","darken","hue","isEqual","white","bisque","blue","cadetblue","chartreuse","chocolate","coral","antiquewhite","aqua","azure","whitesmoke","papayawhip","plum","blanchedalmond","black","gold","goldenrod","gainsboro","cornsilk","cornflowerblue","burlywood","aquamarine","beige","crimson","cyan","darkblue","darkcyan","darkgoldenrod","darkkhaki","darkgray","darkgreen","darkgrey","peachpuff","darkmagenta","darkred","darkorchid","darkorange","darkslateblue","gray","darkslategray","darkslategrey","deeppink","deepskyblue","wheat","firebrick","floralwhite","ghostwhite","darkviolet","magenta","green","dodgerblue","grey","honeydew","hotpink","blueviolet","forestgreen","lawngreen","indianred","indigo","fuchsia","brown","maroon","mediumblue","lightcoral","darkturquoise","lightcyan","ivory","lightyellow","lightsalmon","lightseagreen","linen","mediumaquamarine","lemonchiffon","lime","khaki","mediumseagreen","limegreen","mediumspringgreen","lightskyblue","lightblue","midnightblue","lightpink","mistyrose","moccasin","mintcream","lightslategray","lightslategrey","navajowhite","navy","mediumvioletred","powderblue","palegoldenrod","oldlace","paleturquoise","mediumturquoise","mediumorchid","rebeccapurple","lightsteelblue","mediumslateblue","thistle","tan","orchid","mediumpurple","purple","pink","skyblue","springgreen","palegreen","red","yellow","slateblue","lavenderblush","peru","palevioletred","violet","teal","slategray","slategrey","aliceblue","darkseagreen","darkolivegreen","greenyellow","seagreen","seashell","tomato","silver","sienna","lavender","lightgreen","orange","orangered","steelblue","royalblue","turquoise","yellowgreen","salmon","saddlebrown","sandybrown","rosybrown","darksalmon","lightgoldenrodyellow","snow","lightgrey","lightgray","dimgray","dimgrey","olivedrab","olive","toName","closest","_Color","_components","_int","_cloneSource","_isSourceEqual","_normalize","isView","value1","value2","type1","every","keys1","keys2","toRgba","toRgbaString","toUint8RgbArray","_arrayRgb","_arrayRgba","toRgbArray","toLittleEndianNumber","multiply","_temp","_refreshInt","premultiply","applyToRGB","toPremultiplied","hexString","toHexa","alphaString","_clamp","Uint8ClampedArray","HEX_PATTERN","BatchableHTMLText","generatingTexture","htmlText","returnTexturePromise","texturePromise","HTMLTextPipe","batchableHTMLText","oldTexturePromise","getTexturePromise","finally","nssvg","nsxhtml","HTMLTextRenderData","svgRoot","createElementNS","foreignObject","domElement","styleElement","setAttribute","overflow","FontStylePromiseCache","tempHTMLTextRenderData","HTMLTextSystem","_createCanvas","WEBGPU","promise","_buildTexturePromise","_cleanUp","htmlTextData","dedupe","matches","addFontFamily","fontFamily2","tagStyles","extractFontFamilies","fontCSS","fontPromises","promises","entry","faces","face","weight","dataSrc","response","onloadend","loadFontAsBase64","loadFontCSS","all","css","getFontCss","measured","fontStyleCSS","htmlTextRenderData","innerHTML","cssStyle","textContent","contentBounds","getBoundingClientRect","doublePadding","measureHtmlText","svgURL","XMLSerializer","serializeToString","getSVGUrl","delay","resolve2","setTimeout","crossOrigin","loadSVGImage","isSafari","clearRect","drawImage","getTemporaryCanvasFromImage","definedProps","obj","color32BitToUniform","abgr","offsetY","lines","charPositions","spaceWidth","spacesIndex","currentLine","previousChar","firstWord","currentWord","spaceWord","positions","adjustedLetterSpacing","letterSpacing","adjustedWordWrapWidth","wordWrapWidth","adjustedLineHeight","breakWords","wordWrap","nextWord","word","nextLine","lastChar","checkIsOverflow","isEnd","charData","nextCharWidth","align","measurementData","line","alignCenter","alignRight","indy","spaceIndex","totalSpaces","alignJustify","repetitionMap","FillPattern","repetition","_tick","setTransform","observer","_observer","equals","assertPath","path2","TypeError","JSON","stringify","removeUrlParams","toPosix","isUrl","isDataUrl","isBlobUrl","startsWith","hasProtocol","getProtocol","matchFile","matchProtocol","customBaseUrl","customRootUrl","baseUrl","rootUrl","rootname","isAbsolute","normalize","protocol","trailingSeparator","endsWith","res","lastSegmentLength","lastSlash","dots","code","lastSlashIndex","lastIndexOf","normalizeStringPosix","joined","arg","prevArg","joinExtensions","extname","dirname","hasRoot","matchedSlash","proto","origpath","basename","ext","extIdx","firstNonSlashEnd","startDot","startPart","preDotState","dir","sep","delimiter","WGSL_TO_VERTEX_TYPES","vec2f","vec3f","vec4f","u32","bool","extractStructAndGroups","wgsl","groupPattern","bindingPattern","namePattern","typePattern","structMemberPattern","structName","groups","group","binding","isUniform","structs","struct","members","member","name2","some","ShaderStage","ShaderStage2","programCache","_layoutKey","_attributeLocationsKey","layout","gpuLayout","structsAndGroups","vertexStructsAndGroups","fragmentStructsAndGroups","structNameSet","Set","dupeGroupKeySet","removeStructAndGroupDuplicates","generateLayoutHash","visibility","VERTEX","FRAGMENT","sampler","sampleType","viewDimension","multisampled","generateGpuLayoutGroups","autoAssignGlobalUniforms","autoAssignLocalUniforms","localUniforms","_generateProgramKey","createIdFromString","attributeData","_attributeData","mainVertStart","arrowFunctionStart","functionArgsSubstring","inputsRegex","stride","getAttributeInfoFromFormat","instance","extractAttributesFromGpuProgram","_cacheKey","GpuGraphicsAdaptor","_maxTextures","contextChange","uTransformMatrix","uColor","uRound","bits","colorBit","generateTextureBatchBit","roundPixelsBit","Shader","graphicsPipe","customShader","contextSystem","graphicsContext","getContextRenderData","encoder","setGeometry","globalUniformsBindGroup","setBindGroup","localBindGroup","topology","setPipelineFromGeometryProgramAndState","gpuBindGroup","textureBatch","getBindGroup","renderPassEncoder","drawIndexed","WebGPUPipesAdaptor","GpuMeshAdapter","textureBit","_shader","uTexture","uSampler","textureUniforms","uTextureMatrix","meshPipe","mesh","getTextureBindGroup","draw","_geometry","tempState","GpuBatchAdaptor","batchPipe","program","pipeline","getPipeline","resetBindGroup","_touch","textureGC","setPipeline","BindGroupSystem","_hash","renderableGC","gpu","_gpu","groupIndex","_updateKey","_key","_createBindGroup","device","groupLayout","gpuResource","ubo","updateUniformGroup","getGPUBuffer","bufferResource","getGpuSampler","getGpuSource","createView","getProgramData","bindGroups","createBindGroup","GpuBufferSystem","_gpuBuffers","createGPUBuffer","updateBuffer","gpuBuffer","queue","writeBuffer","destroyAll","onBufferDestroy","createBuffer","fastCopy","getMappedRange","unmap","_destroyBuffer","GpuColorMaskSystem","_colorMaskCache","setColorMask","GpuDeviceSystem","_initPromise","_createDeviceAndAdaptor","requestAdapter","powerPreference","forceFallbackAdapter","requiredFeatures","feature","features","requestDevice","GpuEncoderSystem","_boundBindGroup","_boundVertexBuffer","commandFinished","_resolveCommandFinished","commandEncoder","createCommandEncoder","beginRenderPass","gpuRenderTarget","endRenderPass","_clearCache","setViewport","viewport","_boundPipeline","_setVertexBuffer","setVertexBuffer","_setIndexBuffer","_boundIndexBuffer","indexFormat","setIndexBuffer","buffersToBind","getBufferNamesToBind","attributes","_setShaderBindGroups","skipSync","_syncBindGroup","isUniformGroup","instanceCount","submit","finish","restoreRenderPass","getDescriptor","boundPipeline","boundVertexBuffer","boundIndexBuffer","boundBindGroup","GpuLimitsSystem","maxSampledTexturesPerShaderStage","GpuStencilSystem","_renderTargetStencilState","onRenderTargetChange","stencilState","stencilMode","stencilReference","_activeRenderTarget","setStencilReference","WGSL_ALIGN_SIZE_DATA","f16","createUboElementsWGSL","uniformData","uboElements","uboElement","generateArraySyncWGSL","offsetToAdd","remainder","createUboSyncFunctionWGSL","createUboSyncFunction","uboSyncFunctions","GpuUboSystem","UboSystem","createUboElements","generateUboSync","UboBatch","minUniformOffsetAlignment","_minUniformOffsetAlignment","byteIndex","addEmptyGroup","newSize","addGroup","GpuUniformBatchPipe","_bindGroupHash","_buffers","_bindGroups","_bufferResources","_batchBuffer","UNIFORM","COPY_DST","COPY_SRC","_uploadBindGroups","_resetBindGroups","duplicate","ensureUniformGroup","syncUniformGroup","_getBindGroup","getUboResource","_getBufferResource","getArrayBindGroup","getArrayBufferResource","bufferSystem","firstBuffer","copyBufferToBuffer","topologyStringToId","PipelineSystem","_moduleCache","_bufferLayoutsCache","_bindingNamesCache","_pipeCache","_pipeStateCaches","_colorMask","_multisampleCount","_updatePipeHash","setMultisampleCount","multisampleCount","setRenderTarget","msaaSamples","_depthStencilAttachment","depthStencilAttachment","_stencilMode","_stencilState","passEncoder","ensureAttributes","_generateBufferKey","geometryLayout","shaderKey","getGraphicsStateKey","_blendModeId","_createPipeline","_createVertexBufferLayouts","blendModes","getColorTargets","writeMask","_getModule","targets","primitive","cullMode","multisample","depthStencil","depthWriteEnabled","depthTest","depthCompare","createRenderPipeline","_createModule","createShaderModule","keyGen","attributeKeys","attribute","stringKey","_generateAttributeLocationsKey","bufferNamesToBind","shaderLocation","vertexBuffersLayout","bufferEntry","arrayStride","stepMode","bufferEntryAttributes","divisor","stencilStateId","multiSampleCount","GpuRenderTarget","contexts","msaaTextures","GpuRenderTargetAdaptor","renderTargetSystem","_renderTargetSystem","copyToTexture","sourceRenderSurfaceTexture","destinationTexture","originSrc","originDest","baseGpuTexture","_getGpuColorTexture","backGpuTexture","copyTextureToTexture","startRenderPass","getGpuRenderTarget","getCurrentTexture","clearValue","colorAttachments","resolveTarget","getTextureView","loadOp","COLOR","defaultClearColor","storeOp","msaa","stencilLoadOp","depthLoadOp","DEPTH","stencilStoreOp","depthClearValue","depthStoreOp","renderPassDescriptor","gpuCommands","initGpuRenderTarget","CanvasSource","getContext","configure","GPUTextureUsage","TEXTURE_BINDING","RENDER_ATTACHMENT","msaaTexture","destroyGpuRenderTarget","unconfigure","resizeGpuRenderTarget","GpuRenderTargetSystem","RenderTargetSystem","GpuShaderSystem","_gpuProgramData","_createGPUProgramData","createBindGroupLayout","pipelineLayoutDesc","bindGroupLayouts","createPipelineLayout","GpuBlendModesToPixi","srcFactor","dstFactor","operation","GpuStateSystem","defaultState","blend","gpuUploadBufferImageResource","gpuTexture","bytesPerPixel","writeTexture","rowsPerImage","bytesPerRow","depthOrArrayLayers","blockDataMap","blockBytes","blockWidth","blockHeight","defaultBlockData","gpuUploadCompressedTextureResource","mipWidth","mipHeight","blockData","levelBuffer","mipLevel","gpuUploadImageResource","HTMLImageElement","premultipliedAlpha","copyExternalImageToTexture","gpuUploadVideoResource","GpuMipmapGenerator","createSampler","pipelines","_getMipmapPipeline","mipmapShaderModule","generateMipmap","mipTexture","arrayLayerCount","renderToSource","mipTextureDescriptor","bindGroupLayout","getBindGroupLayout","arrayLayer","srcView","baseMipLevel","baseArrayLayer","dstMipLevel","dstView","mipLevelSize","GpuTextureSystem","_gpuSources","_gpuSamplers","_textureViewHash","_uploads","video","compressed","_initSource","biggestDimension","log2","textureDescriptor","onSourceUpdate","onSourceDestroy","onSourceUnload","onUpdateMipmaps","_mipmapGenerator","_initSampler","_createTextureBindGroup","_createTextureView","getPreferredCanvasFormat","webGPUCanvas","imageData","getImageData","DefaultWebGPUSystems","DefaultWebGPUPipes","DefaultWebGPUAdapters","WebGPURenderer","_onRenderContainers","_matrixDirty","disableCacheAsTexture","cachedParent","addRenderGroupChild","renderGroupChild","_removeRenderGroupChild","onChildViewUpdate","getChildren","_getChildren","inverseWorldTransform","_inverseWorldTransform","textureOffsetInverseTransform","_textureOffsetInverseTransform","_inverseParentTextureTransform","parentCacheAsTexture","cacheToLocalTransform","textureBitGl","_dirty","keyParts","currentResource","onResourceChange","getResource","tick","PRECISION","textMetrics","pattern","createPattern","fillPattern","fillGradient","isLinear","isLocal","gradient","isNearlyVertical","createLinearGradient","center","innerRadius","outerCenter","outerRadius","createRadialGradient","colorStops","stop","globalStop","addColorStop","maxTexturesPerBatchCache","BatchTextureArray","Batch","batchPool","batchPoolIndex","getBatchFromPool","returnBatchToPool","BATCH_TICK","_Batcher","batchIndex","_elements","gl","getTestContext","getParameter","MAX_TEXTURE_IMAGE_UNITS","checkMaxIfStatementsInShader","getExtension","loseContext","getMaxTexturesPerBatch","attributesInitialSize","indicesInitialSize","Uint16Array","elementSize","elementStart","_batchIndexStart","_batchIndexSize","_indexStart","_attributeStart","vertexSize","textureId","_batch","_textureId","packAsQuad","packQuadAttributes","packAttributes","elements","firstElement","getAdjustedBlendModeBlend","_resizeAttributeBuffer","_resizeIndexBuffer","adjustedBlendMode","breakRequired","_finishBatch","packQuadIndex","packIndex","indexStart","ensureAttributeBuffer","ensureIndexBuffer","newArrayBuffer","newIndexBuffer","indicesOffset","indices","indexOffset","attributeOffset","placeHolderBufferData","placeHolderIndexData","BatchGeometry","Geometry","aPosition","aUV","aColor","aTextureIdAndRound","INDEX","DefaultShader","batchSamplers","getBatchSamplersUniformGroup","defaultShader","_DefaultBatcher","textureIdAndRound","wt","argb","w0","w1","h0","h1","x2","y2","_updateMaxTextures","_typeof","__awaiter","thisArg","_arguments","P","generator","fulfilled","step","rejected","__generator","_","sent","trys","ops","verb","op","Header","Track","Midi","Track_1","Encode_1","midiArray","_this","midiArrayLike","parseMidi","currentTicks","newTracks","defaultTrack","trackMap","currentProgram","_i","event_1","targetTrack","trackKey","splitTracks","trackData","fromUrl","ok","arrayBuffer","configurable","durations","addTrack","toJSON","fromJSON","json","trackJSON","Track_2","Header_2","ControlChange","controlChangeIds","controlChangeNames","privateHeaderMap","privateCCNumberMap","ticksToSeconds","secondsToTicks","isContextLost","FilterPipe","PassthroughFilter","tempProjectionMatrix","quadGeometry","FilterData","inputTexture","backTexture","blendRequired","outputRenderSurface","globalFrame","firstEnabledIndex","lastEnabledIndex","FilterSystem","_filterStackIndex","_filterStack","_filterGlobalUniforms","uInputSize","uInputPixel","uInputClamp","uOutputFrame","uGlobalFrame","uOutputTexture","_globalFilterBindGroup","activeBackTexture","_activeFilterData","filterData","_pushFilterData","renderSurface","rootResolution","rootAntialias","_calculateFilterArea","_calculateFilterBounds","rootViewPort","previousFilterData","_getPreviousFilterData","globalResolution","_findFilterResolution","offsetX","_calculateGlobalFrame","_setupFilterTextures","_applyFiltersToTexture","outputTexture","_popFilterData","getBackTexture","lastRenderSurface","previousBounds","backgroundResolution","isFinalTarget","rootRenderTarget","_findPreviousFilterOffset","_updateFilterUniforms","filterToApply","_getPassthroughFilter","_setupBindGroupsAndRender","outputMatrix","mappedMatrix","_passthroughFilter","batchUniforms","_state","getRenderTarget","outputFrame","inputSize","inputPixel","inputClamp","rootTexture","lastIndex","prevFilterData","actualMatrix","getGlobalRenderableBounds","filterFrameTransform","firstEnabled","lastEnabled","flip","tempTexture","flop","viewPort","paddingMultiplier","Infinity","compatibleRenderers","backBuffer","useBackBuffer","fitBounds","isPositive","textureBatchBitGpuCache","generateBindingSrc","bindingIndex","generateSampleSrc","textureBatchBitGlCache","generateSampleGlSrc","generateTextureBatchBitGl","contextSettings","willReadFrequently","_CanvasTextMetrics","experimentalLetterSpacingSupported","_experimentalLetterSpacingSupported","lineWidths","maxLineWidth","_canvas","_measurementCache","__context","_wordWrap","_measureText","strokeWidth","leading","measurements","useExperimentalLetterSpacing","experimentalLetterSpacing","textLetterSpacing","metricWidth","actualBoundingBoxLeft","boundsWidth","actualBoundingBoxRight","cache","whiteSpace","collapseSpaces","_collapseSpaces","collapseNewlines","_collapseNewlines","canPrependSpaces","tokens","_tokenize","token","_isNewline","_addLine","currIsBreakingSpace","isBreakingSpace","lastIsBreakingSpace","tokenWidth","_getFromCache","canBreakWords","characters","wordWrapSplit","nextChar","canBreakChars","characterWidth","isLastToken","newLine","_trimRight","_newlines","_nextChar","_breakingSpaces","_token","_char","_breakWords","_fonts","_context","METRICS_STRING","BASELINE_SYMBOL","properties","actualBoundingBoxAscent","actualBoundingBoxDescent","clearMetrics","__canvas","OffscreenCanvas","BASELINE_MULTIPLIER","HEIGHT_MULTIPLIER","Intl","Segmenter","segmenter","segment","BufferImageSource","UPDATE_PRIORITY","UPDATE_PRIORITY2","colorBitGl","writeTrack","Writer","len","eventTypeByte","running","writeEvent","useByte9ForNoteOff","writeChunk","lastEventTypeByte","writeVarInt","writeUInt8","writeUInt16","writeString","port","writeUInt24","hourByte","hour","frameRate","sec","subFrame","LN2","writeInt8","writeBytes","metatypeByte","byte9","value14","lsb14","msb14","b0","b1","writeInt16","b2","writeInt24","writeUInt32","b3","writeInt32","str","bytes","timeDivision","ticksPerFrame","framesPerSecond","writeHeader","unsafeEval","Function","_e","toPropertyKey","_defineProperties","writable","LoaderParserPriority","LoaderParserPriority2","warnings","v8_0_0","v8_3_4","deprecationState","quiet","version","message","ignoreDepth","stack","deprecationMessage","useGroup","groupCollapsed","groupEnd","multiplyHexColors","color1","color2","ResizePlugin","dom","queueResize","_resizeTo","_cancelResize","_resizeId","requestAnimationFrame","cancelAnimationFrame","innerWidth","innerHeight","clientWidth","clientHeight","resizeTo","Application","TickerPlugin","assign","autoStart","sharedTicker","ticker","_ticker","LOW","oldTicker","resizeCanvas","didResize","HTMLCanvasElement","context2D","_context2D","ViewContainer","_bounds","_boundsDirty","updateBounds","containsPoint","_MeshGeometry","shrinkBuffersToFit","batchMode","MeshGeometry","RendererType","RendererType2","tempPoint","MeshGpuData","MeshPipe","localUniformsBindGroup","meshData","_getMeshData","wasBatched","batched","isBatched","batchableMesh","_getBatchableMesh","_textureMatrixUpdateId","gpuBatchableMesh","setTexture","_b","_initMeshData","_initBatchableMesh","gpuMesh","BatchableMesh","prefix","Events","EE","emitter","listener","evt","_events","_eventsCount","clearEvent","EventEmitter","__proto__","eventNames","events","names","getOwnPropertySymbols","listeners","handlers","ee","listenerCount","a1","a2","a3","a4","a5","prefixed","NOOP","defaultAnchor","defaultBorders","dynamic","noFrame","nX","nY","nW","nH","w2","h2","cX","cY","destroySource","baseTexture","addBits","srcParts","parts","part","toLocaleLowerCase","sanitisedPart","findHooksRx","compileHooks","programSrc","hook","extractInputs","fragmentSource","regex","compileInputs","fragments","template","mainInput","finalString","inValue","cleanedString","extractOutputs","injectBits","templateSrc","fragmentParts","bitCacheMap","CACHE_UID","compileHighShaderGl","cacheId","generateCacheId","compileBits","highFragment","vertexParts","shaderBit","vertexGPUTemplate","fragmentGPUTemplate","vertexGlTemplate","fragmentGlTemplate","globalUniformsBit","globalUniformsBitGl","compileHighShaderGpuProgram","vertexFragments","fragmentFragments","compiledVertex","mainStruct","mainStart","mainEnd","extractVariableName","compiledCode","compileOutputs","compileInputsAndOutputs","compileHighShader","compileHighShaderGlProgram","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","UNIFORM_TYPES_VALUES","UNIFORM_TYPES_MAP","getDefaultUniformValue","_UniformGroup","uniformStructures","_dirtyId","arrayMatch","innerType","_signature","LRU","ttl","resetTtl","prev","evict","bypass","expiresAt","expiry","Date","moveToEnd","setWithEvicted","evicted","lru","isNaN","ensureIsBuffer","addAttribute","addIndex","onBufferUpdate","getAttribute","getIndex","getBuffer","attributeOption","ensureIsAttribute","attributeId","byteSize","getGeometryBounds","destroyBuffers","batchSamplersUniformGroupHash","batchSamplersUniformGroup","sampleValues","uTextures","_registeredResources","pool","unregister","registeredCount","isRegistered","_VideoSource","isReady","_autoUpdate","_isConnectedToTicker","_updateFPS","updateFPS","_msToNextUpdate","autoPlay","_videoFrameRequestCallback","_videoFrameRequestCallbackHandle","_load","_resolve","_reject","_onCanPlay","_onCanPlayThrough","_onError","_onPlayStart","_onPlayStop","_onSeeked","autoLoad","updateFrame","elapsedMS","playbackRate","requestVideoFrameCallback","readyState","HAVE_ENOUGH_DATA","HAVE_FUTURE_DATA","complete","_isSourceReady","_mediaReady","preload","preloadTimeoutMs","_preloadTimeout","ErrorEvent","_isSourcePlaying","paused","ended","_configureAutoUpdate","clearTimeout","play","pause","autoUpdate","cancelVideoFrameCallback","HTMLVideoElement","crossorigin","loop","muted","playsinline","MIME_TYPES","ogv","mov","m4v","VideoSource","ignore","search","prop","beginning","midPoint","nextEvent","insert","parserCode","arrayGenerationFunction","singleSettersMap","funcFragments","fragmentSrc","localUniformMSDFBit","localUniformMSDFBitGl","mSDFBit","mSDFBitGl","SdfShader","uDistance","BitmapTextGraphics","Graphics","BitmapTextPipe","bitmapText","graphicsRenderable","_getGpuBitmapText","graphics","syncWithProxy","_updateContext","_updateDistanceField","proxyGraphics","bitmapTextLayout","linePositionYShift","proxyRenderable","sqrt","worldScale","proxy","fragTemplate","generateIfTestSrc","maxIfs","createShader","FRAGMENT_SHADER","shaderSource","compileShader","getShaderParameter","COMPILE_STATUS","deleteShader","transformVertices","vertices","buildCircle","ShapeBuilder","build","shape","points","rx","ry","circle","radius","ellipse","halfWidth","halfHeight","roundedRect","j1","j3","j4","y22","x02","y02","x12","x22","y12","triangulate","verticesStride","verticesOffset","centerX","centerY","centerIndex","buildEllipse","buildRoundedRectangle","closePointEps","square","nx","ny","innerWeight","outerWeight","clockwise","verts","exx","eyy","eix","eiy","eox","eoy","cx","cy","ex","ey","cx2p0x","cy2p0y","angle0","atan2","angle1","startAngle","angleDiff","absAngleDiff","segCount","angleInc","earcut","holeIndices","dim","hasHoles","outerLen","outerNode","linkedList","triangles","invSize","steiner","getLeftmost","compareXYSlope","eliminateHole","eliminateHoles","earcutLinked","sum","signedArea","insertNode","removeNode","filterPoints","again","ear","pass","z","zOrder","prevZ","nextZ","numMerges","inSize","tail","q","pSize","qSize","sortLinked","indexCurve","isEarHashed","isEar","cureLocalIntersections","splitEarcut","ax","bx","ay","by","pointInTriangleExceptFirst","minZ","maxZ","intersects","locallyInside","isValidDiagonal","splitPolygon","hole","bridge","hx","hy","qx","mx","my","tanMin","pointInTriangle","sectorContainsSector","findHoleBridge","bridgeReverse","leftmost","intersectsPolygon","inside","middleInside","p1","p2","q1","q2","o1","o2","o3","o4","onSegment","num","createNode","an","bp","triangulateWithHoles","holes","emptyArray","buildPolygon","buildRectangle","rectData","verticesIndex","buildTriangle","tempTextureMatrix","shapeBuilders","addTextureToGeometryData","geometryData","dw","dh","vertOffset","textureUvs","graphicsBatch","BatchableGraphics","baseColor","addShapePathToGeometryData","shapePath","isStroke","shapePrimitives","close","closePath","lineStyle","closed","eps","fx","fy","lx","ly","buildPixelLine","flipAlignment","orientation","area","getOrientationOfPoints","firstPoint","lastPoint","closedShape","closedPath","midPointX","midPointY","indexCount","widthSquared","miterLimitSquared","perpX","perpY","perp1x","perp1y","dist","dx0","dy0","dx1","dy1","dot","cross","pDist","imx","imy","omx","omy","insideWeight","curveEps","buildLine","otherPoints","holePrimitives","holeArrays","holePrimitive","holePoints","getHoleArrays","uvsOffset","mTx","mTy","d1","sourceStyle","FillGradient","generateTextureMatrix","uvsStride","buildUvs","buildSimpleUvs","GpuGraphicsContext","GraphicsContextRenderData","_GraphicsContextSystem","_gpuContextHash","_graphicsDataContextHash","bezierSmoothness","_initContextRenderData","updateGpuContext","gpuContext","_initContext","_cleanGraphicsContextData","buildContextBatches","isBatchable","getGpuContext","graphicsData","applyTransform","drawBatches","onGraphicsContextDestroy","GraphicsContextSystem","_Filter","addResource","sources","textureSourceFrom","hasResource","Source","skipCache","resourceToTexture","roundPixelsBitGl","BinarySearch_1","ControlChange_1","ControlChanges_1","PitchBend_1","Instrument_1","Note_1","createControlChanges","nameEvent","Instrument","noteOns","noteOffs","_loop_1","currentNote","this_1","offIndex","noteOff","addNote","addCC","addPitchBend","endOfTrackEvent","endOfTrackTicks","props","Note","PitchBend","maxDuration","sourceBuffer","destinationBuffer","lengthDouble","sourceFloat64View","remainingBytes","sourceUint8View","_visualBounds","currentTexture","_width","_height","sourceBounds","destroyTextureSource","detectVideoAlphaMode","video2","onloadeddata","autoplay","bindTexture","TEXTURE_2D","framebuffer","createFramebuffer","bindFramebuffer","FRAMEBUFFER","framebufferTexture2D","COLOR_ATTACHMENT0","pixelStorei","UNPACK_PREMULTIPLY_ALPHA_WEBGL","UNPACK_COLORSPACE_CONVERSION_WEBGL","texImage2D","RGBA","UNSIGNED_BYTE","pixel","readPixels","deleteFramebuffer","deleteTexture","identityMatrix","_syncFunctionHash","_systemCheck","getUniformGroupData","_initUniformGroup","uniformGroupSignature","syncFunction","_generateUboSync","uniformGroupData","synced","ApplicationInitHook","__PIXI_APP_INIT__","RendererInitHook","__PIXI_RENDERER_INIT__","extractedData","tempStride","tempStart","ensureStartAndStride","arrayLikeToArray","_renderSurfaceToRenderTargetHash","_gpuRenderTargetHash","_renderTargetStack","contains","isRenderingToScreen","pm","flipY","calculateProjection","currentRenderTargetData","_initRenderTarget","_PlaneGeometry","verticesX","verticesY","sizeX","sizeY","totalSub","xpos","ypos","value3","value4","PlaneGeometry","_NineSliceGeometry","_originalWidth","originalWidth","_originalHeight","originalHeight","_leftWidth","leftWidth","_rightWidth","rightWidth","_topHeight","topHeight","_bottomHeight","bottomHeight","_anchorX","_anchorY","updatePositions","scaleW","scaleH","anchorOffsetX","anchorOffsetY","_uvw","_uvh","NineSliceGeometry","NineSliceSpriteGpuData","NineSliceSpritePipe","gpuData","relativeMatrix","_getLocalBounds","rootContainer","relativeTransform","parentBounds","preserveBounds","addLocalBounds","emptyColorStops","_FillGradient","defaultLinearOptions","ensureGradientOptions","defaultRadialOptions","_wrapMode","buildLinearGradient","defaultSize","getCanvas","addColorStops","fillRect","buildRadialGradient","r0","r1","TickerListener","previous","_destroyed","_fn","_once","redirect","connect","hard","_Ticker","speed","started","_requestId","_maxElapsedMS","_minElapsedMS","_protected","_lastFrame","_head","deltaMS","targetFPMS","_requestIfNeeded","_cancelIfNeeded","_startIfPossible","NORMAL","_addListener","addOnce","currentTime","delta","head","FPS","minFPS","fps","maxFPS","minFPMS","_shared","_system","blendModeIds","overlay","erase","_State","polygonOffset","depthMask","offsets","culling","clockwiseFrontFace","_blendMode","_polygonOffset","default2d","GlGraphicsAdaptor","WebGLPipesAdaptor","GlMeshAdaptor","GlBatchAdaptor","_tempState","_didUploadHash","batcherPipe","didUpload","BUFFER_TYPE","BUFFER_TYPE2","GlBuffer","_lastBindBaseLocation","_lastBindCallId","updateID","GlBufferSystem","_boundBufferBases","_minBaseLocation","_nextBindBaseIndex","_bindCallId","_gl","_maxBindings","maxUniformBindings","getGlBuffer","createGLBuffer","glBuffer","bindBuffer","bindBufferBase","UNIFORM_BUFFER","nextBindBase","hasTransformFeedback","freeLocationForBufferBase","freeIndex","getLastBindBaseLocation","nextIndex","curBuf","bindBufferRange","drawType","STATIC_DRAW","DYNAMIC_DRAW","bufferSubData","bufferData","deleteBuffer","contextLost","ARRAY_BUFFER","ELEMENT_ARRAY_BUFFER","_GlContextSystem","supports","uint32Indices","uniformBufferObject","vertexArrayObject","srgbTextures","nonPowOf2wrapping","nonPowOf2mipmaps","extensions","handleContextLost","handleContextRestored","isLost","multiView","initFromContext","createContext","preferWebGLVersion","preserveDrawingBuffer","ensureCanvasSize","targetCanvas","getExtensions","validateContext","common","anisotropicFiltering","floatTextureLinear","s3tc","s3tc_sRGB","etc","etc1","pvrtc","atc","astc","bptc","rgtc","drawBuffers","depthTexture","uint32ElementIndex","floatTexture","textureHalfFloat","textureHalfFloatLinear","vertexAttribDivisorANGLE","srgb","colorBufferFloat","provokeExt","provokingVertexWEBGL","FIRST_VERTEX_CONVENTION_WEBGL","preventDefault","_contextLossForced","restoreContext","useProgram","forceContextLoss","getContextAttributes","isWebGl2","GlContextSystem","GL_FORMATS","GL_FORMATS2","GL_TARGETS","GL_TARGETS2","GL_TYPES","GL_TYPES2","infoMap","uint8x2","uint8x4","sint8x2","BYTE","sint8x4","unorm8x2","unorm8x4","snorm8x2","snorm8x4","uint16x2","UNSIGNED_SHORT","uint16x4","sint16x2","SHORT","sint16x4","unorm16x2","unorm16x4","snorm16x2","snorm16x4","float16x2","HALF_FLOAT","float16x4","float32","FLOAT","float32x2","float32x3","float32x4","uint32","UNSIGNED_INT","uint32x2","uint32x3","uint32x4","sint32","INT","sint32x2","sint32x3","sint32x4","getGlTypeFromFormat","topologyToGlMap","GlGeometrySystem","_geometryVaoHash","_activeGeometry","_activeVao","hasVao","hasInstance","nativeVaoExtension","createVertexArray","createVertexArrayOES","bindVertexArray","vao","bindVertexArrayOES","deleteVertexArray","deleteVertexArrayOES","nativeInstancedExtension","drawArraysInstanced","drawArraysInstancedANGLE","drawElementsInstanced","drawElementsInstancedANGLE","vertexAttribDivisor","getVao","updateBuffers","unbind","checkCompatibility","geometryAttributes","shaderAttributes","getSignature","attribs","strings","initGeometryVao","_incRefCount","_getProgramData","signature","onGeometryDestroy","vaoObjectHash","activateVao","lastBuffer","programAttrib","enableVertexAttribArray","attributeInfo","vertexAttribIPointer","vertexAttribPointer","normalised","glTopology","glType","drawElements","drawArrays","bigTriangleGeometry","_GlBackBufferSystem","_useBackBufferThisRender","_antialias","bigTriangleProgram","_bigTriangleShader","renderTarget2","_targetTexture","_getBackBufferTexture","_presentBackBuffer","_backBufferTexture","targetSourceTexture","GlBackBufferSystem","GlColorMaskSystem","GlEncoderSystem","_activeProgram","GlLimitsSystem","MAX_UNIFORM_BUFFER_BINDINGS","GlStencilSystem","_stencilCache","_comparisonFuncMapping","always","ALWAYS","never","NEVER","equal","EQUAL","NOTEQUAL","less","LESS","LEQUAL","greater","GREATER","GEQUAL","_stencilOpsMapping","keep","KEEP","zero","ZERO","REPLACE","INVERT","INCR","DECR","INCR_WRAP","DECR_WRAP","mode","enable","STENCIL_TEST","stencilFunc","stencilOp","disable","WGSL_TO_STD40_SIZE","createUboElementsSTD40","boundary","curOffset","generateArraySyncSTD40","rowSize","createUboSyncFunctionSTD40","GlUboSystem","GlRenderTarget","msaaRenderBuffer","GlRenderTargetAdaptor","_clearColorCache","_viewPortCache","glRenderTarget","resolveTargetFramebuffer","copyTexSubImage2D","viewPortY","viewPortCache","depthStencilRenderBuffer","_initStencil","READ_FRAMEBUFFER","blitFramebuffer","COLOR_BUFFER_BIT","NEAREST","_initColor","deleteRenderbuffer","renderBuffer","_renderTarget","clearColorCache","clearColorArray","_resizeColor","_resizeStencil","bindSource","glTexture","getGlSource","viewFramebuffer","createRenderbuffer","source2","glInternalFormat","internalFormat","bindRenderbuffer","RENDERBUFFER","renderbufferStorageMultisample","framebufferRenderbuffer","DEPTH_STENCIL_ATTACHMENT","DEPTH24_STENCIL8","renderbufferStorage","DEPTH_STENCIL","contextCanvas","canvasSource","GlRenderTargetSystem","GlProgramData","uniformGroups","uniformDirtyGroups","uniformBlockBindings","booleanArray","GL_TABLE","GL_TO_GLSL_TYPES","FLOAT_VEC2","FLOAT_VEC3","FLOAT_VEC4","INT_VEC2","INT_VEC3","INT_VEC4","UNSIGNED_INT_VEC2","UNSIGNED_INT_VEC3","UNSIGNED_INT_VEC4","BOOL","BOOL_VEC2","BOOL_VEC3","BOOL_VEC4","FLOAT_MAT2","FLOAT_MAT3","FLOAT_MAT4","SAMPLER_2D","INT_SAMPLER_2D","UNSIGNED_INT_SAMPLER_2D","SAMPLER_CUBE","INT_SAMPLER_CUBE","UNSIGNED_INT_SAMPLER_CUBE","SAMPLER_2D_ARRAY","INT_SAMPLER_2D_ARRAY","UNSIGNED_INT_SAMPLER_2D_ARRAY","GLSL_TO_VERTEX_TYPES","float","vec2","vec3","vec4","int","ivec2","ivec3","ivec4","uint","uvec2","uvec3","uvec4","bvec2","bvec3","bvec4","mapType","typeNames","tn","mapGlToVertexFormat","typeValue","logPrettyShaderError","shaderSrc","getShaderSource","shaderLog","getShaderInfoLog","splitShader","lineNumbers","logArgs","fragmentSourceToLog","defaultSyncData","textureCount","blockIndex","GlShaderSystem","_programDataHash","_shaderSyncFunctions","_setProgram","_generateShaderSync","transformFeedbackVaryings","bindUniformBlock","programData","isBufferResource","boundLocation","uniformBlockIndex","_uniformBlockData","uniformBlockBinding","_createProgramData","glVertShader","VERTEX_SHADER","glFragShader","webGLProgram","createProgram","attachShader","bufferMode","SEPARATE_ATTRIBS","INTERLEAVED_ATTRIBS","linkProgram","getProgramParameter","LINK_STATUS","vertexShader","fragmentShader","getProgramInfoLog","logProgramError","sortAttributes","totalAttributes","ACTIVE_ATTRIBUTES","attribData","getActiveAttrib","bindAttribLocation","getAttribLocation","extractAttributesFromGlProgram","_uniformData","totalUniforms","ACTIVE_UNIFORMS","getActiveUniform","getUniformData","ACTIVE_UNIFORM_BLOCKS","uniformBlocks","totalUniformsBlocks","getActiveUniformBlockName","getUniformBlockIndex","getActiveUniformBlockParameter","UNIFORM_BLOCK_DATA_SIZE","getUboData","getUniformLocation","generateProgram","shaderSystem","headerFragments","addedTextreSystem","resName","_uniformBindMap","uniformName","uniform1i","functionSource","generateShaderSyncCode","UNIFORM_TO_SINGLE_SETTERS","UNIFORM_TO_ARRAY_SETTERS","GlUniformGroupSystem","_uniformGroupSyncHash","syncData","_getUniformSyncFunction","syncFunc","_createUniformSyncFunction","uniformGroupSyncHash","_getSignature","_generateUniformsSync","uniform","uniformParsers","generateUniformsSync","preFix","_GlStateSystem","_invertFrontFace","stateId","_blendEq","setBlend","setOffset","setCullFace","setDepthTest","setFrontFace","setDepthMask","checks","_cullFace","_frontFace","_frontFaceDirty","blendModesMap","blendMap","ONE","ONE_MINUS_SRC_ALPHA","DST_COLOR","ONE_MINUS_SRC_COLOR","none","SRC_ALPHA","MIN_EXT","MAX_EXT","MIN","MAX","mapWebGLBlendModesToPixi","diff","forceState","_updateCheck","_checkBlendMode","BLEND","_checkPolygonOffset","POLYGON_OFFSET_FILL","DEPTH_TEST","CULL_FACE","faceMode","_glFrontFace","frontFace","blendFunc","blendFuncSeparate","blendEquationSeparate","FUNC_ADD","setPolygonOffset","CCW","UNPACK_FLIP_Y_WEBGL","GlStateSystem","GlTexture","samplerType","glUploadBufferImageResource","texSubImage2D","compressedFormatMap","glUploadCompressedTextureResource","UNPACK_ALIGNMENT","compressedTexImage2D","glUploadImageResource","glWidth","glHeight","textureWidth","textureHeight","glUploadVideoResource","scaleModeToGlFilter","linear","nearest","mipmapScaleModeToGlFilter","wrapModeToGlAddress","compareModeToGlCompare","applyStyleParams","mipmaps","anisotropicExt","glFunctionName","firstParam","forceClamp","firstCreation","castParam","wrapModeS","wrapModeT","wrapModeR","TEXTURE_WRAP_S","TEXTURE_WRAP_T","TEXTURE_WRAP_R","TEXTURE_MAG_FILTER","glFilterMode","TEXTURE_MIN_FILTER","level","MAX_TEXTURE_MAX_ANISOTROPY_EXT","TEXTURE_MAX_ANISOTROPY_EXT","TEXTURE_COMPARE_FUNC","GlTextureSystem","_glTextures","_glSamplers","_boundTextures","_activeTextureLocation","_boundSamplers","_premultiplyAlpha","_useSeparateSamplers","_mapFormatToInternalFormat","bgra8unorm","SRGB8_ALPHA8_EXT","SRGB8_ALPHA8","RGBA8","r8unorm","R8","r8snorm","R8_SNORM","r8uint","R8UI","r8sint","R8I","r16uint","R16UI","r16sint","R16I","r16float","R16F","rg8unorm","RG8","rg8snorm","RG8_SNORM","rg8uint","RG8UI","rg8sint","RG8I","r32uint","R32UI","r32sint","R32I","r32float","R32F","rg16uint","RG16UI","rg16sint","RG16I","rg16float","RG16F","rgba8unorm","rgba8snorm","RGBA8_SNORM","rgba8uint","RGBA8UI","rgba8sint","RGBA8I","rgb9e5ufloat","RGB9_E5","rgb10a2unorm","RGB10_A2","rg11b10ufloat","R11F_G11F_B10F","rg32uint","RG32UI","rg32sint","RG32I","rg32float","RG32F","rgba16uint","RGBA16UI","rgba16sint","RGBA16I","rgba16float","RGBA16F","rgba32uint","RGBA32UI","rgba32sint","RGBA32I","rgba32float","RGBA32F","stencil8","STENCIL_INDEX8","depth16unorm","DEPTH_COMPONENT16","depth24plus","DEPTH_COMPONENT24","depth32float","DEPTH_COMPONENT32F","DEPTH32F_STENCIL8","COMPRESSED_RGBA_S3TC_DXT1_EXT","COMPRESSED_RGBA_S3TC_DXT3_EXT","COMPRESSED_RGBA_S3TC_DXT5_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT","COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT","COMPRESSED_RED_RGTC1_EXT","COMPRESSED_SIGNED_RED_RGTC1_EXT","COMPRESSED_RED_GREEN_RGTC2_EXT","COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT","COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT","COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT","COMPRESSED_RGBA_BPTC_UNORM_EXT","COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT","COMPRESSED_RGB8_ETC2","COMPRESSED_SRGB8_ETC2","COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2","COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2","COMPRESSED_RGBA8_ETC2_EAC","COMPRESSED_SRGB8_ALPHA8_ETC2_EAC","COMPRESSED_R11_EAC","COMPRESSED_SIGNED_RG11_EAC","COMPRESSED_RGBA_ASTC_4x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR","COMPRESSED_RGBA_ASTC_5x4_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR","COMPRESSED_RGBA_ASTC_5x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR","COMPRESSED_RGBA_ASTC_6x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR","COMPRESSED_RGBA_ASTC_6x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR","COMPRESSED_RGBA_ASTC_8x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR","COMPRESSED_RGBA_ASTC_8x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR","COMPRESSED_RGBA_ASTC_8x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR","COMPRESSED_RGBA_ASTC_10x5_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR","COMPRESSED_RGBA_ASTC_10x6_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR","COMPRESSED_RGBA_ASTC_10x8_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR","COMPRESSED_RGBA_ASTC_10x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR","COMPRESSED_RGBA_ASTC_12x10_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR","COMPRESSED_RGBA_ASTC_12x12_KHR","COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR","mapFormatToGlInternalFormat","_mapFormatToType","UNSIGNED_INT_5_9_9_9_REV","UNSIGNED_INT_2_10_10_10_REV","UNSIGNED_INT_10F_11F_11F_REV","UNSIGNED_INT_24_8","FLOAT_32_UNSIGNED_INT_24_8_REV","mapFormatToGlType","_mapFormatToFormat","RED","RG","RGB","DEPTH_COMPONENT","mapFormatToGlFormat","_bindSampler","_activateLocation","bindSampler","_getGlSampler","boundTextures","TEXTURE0","onStyleChange","updateStyle","glSampler","ctx","createImageData","putImageData","glRenterTarget","DefaultWebGLSystems","DefaultWebGLPipes","DefaultWebGLAdapters","WebGLRenderer","canvasOptions","_canvasPool","_createCanvasAndContext","minWidth","minHeight","resetTransform","_name","a0","a6","a7","removeAll","empty","toPrimitive","parseTrack","Parser","eof","readEvent","readVarInt","readUInt8","param1","eventType","readBytes","readUInt16","readString","readUInt24","readInt8","bufferLen","pos","readInt16","readInt24","readUInt32","readChunk","headerChunk","parseHeader","trackChunk","idCounts","groupId","command","numbers","parseValues","Circle","r2","strokeContains","outerWidth","Ellipse","normx","normy","strokeOuterWidth","strokeInnerWidth","innerHorizontal","innerVertical","outerHorizontal","outerVertical","normalizedX","normalizedY","squaredDistanceToLineSegment","lenSq","xx","yy","param","Polygon","flat","il","isClockwise","containsPolygon","polygon","thisBounds","otherBounds","tempRect2","containsRect","xi","yi","xj","yj","strokeWidthSquared","rightWidthSquared","leftWidthSquared","iterationLength","pointsDesc","currentPoint","lastX","lastY","startX","startY","isCornerWithinStroke","pX","pY","cornerX","cornerY","strokeWidthInner","strokeWidthOuter","RoundedRectangle","radius2","innerX","innerY","rightBound","bottomBound","FLT_EPSILON","buildAdaptiveBezier","sX","sY","cp1x","cp1y","cp2x","cp2y","eX","eY","smoothness","distanceTolerance","recursive","x4","y4","x23","y23","x34","y34","x123","y123","x234","y234","x1234","y1234","d2","d3","buildAdaptiveQuadratic","buildArc","steps","TAU","ang1","ang2","mapToEllipse","cosPhi","sinPhi","out2","xp","yp","approxUnitArc","vectorAngle","acos","tempRectangle","ShapePath","graphicsPath2D","_currentPoly","_graphicsPath2D","signed","checkForHoles","moveTo","startPoly","lineTo","_ensurePoly","fromX","fromY","arc","endAngle","counterclockwise","arcTo","mm","dd","tt","k1","k2","qy","buildArcTo","arcToSvg","xAxisRotation","largeArcFlag","sweepFlag","pxp","pyp","lambda","rxSq","rySq","pxpSq","pypSq","radicant","centerXp","centerYp","vx1","vy1","vx2","vy2","getArcCenter","outCurvePoint","curve","buildArcToSvg","bezierCurveTo","currentPoly","quadraticCurveTo","smoothing","endPoly","addPath","isIdentity","mainShape","shapePrimitive","mainPolygon","copyWithin","drawShape","poly","regularPoly","sides","roundPoly","corner","sideLength","internalAngle","roundShape","useQuadratic","pointLerp","numPoints","thisPoint","pRadius","nextPoint","lastEdgeLength","nextEdgeLength","roundedShapeQuadraticCurve","vecFrom","pp","sharpCorner","p3","v1","v2","asin","radDirection","drawDirection","halfAngle","cRadius","lenOut","roundedShapeArc","filletRect","fillet","maxFillet","inset","right","bottom","chamferRect","chamfer","radiusX","radiusY","roundRect","lastShape","tempX","buildPath","boundsRect","GraphicsPath","svgPath","commands","subpaths","currentSubPath","bezierCurveToShort","quadraticCurveToShort","parseSVGPath","_shapePath","getLastPoint","cpx1","cpy1","star","newGraphicsPath2D","cpx2","cpy2","adjustTransform","lastInstruction","currentMatrix","parseSVGFloatAttribute","svg","parseLinearGradient","gradientUnit","parseRadialGradient","_child","extractSvgUrlId","styleAttributes","opacity","parseSVGStyle","session","useFill","useStroke","parseAttribute","styleParts","stylePart","id2","defs","calculatePathArea","pathData","coords","xs","ys","appendSVGPath","graphicsPath","tempPath","renderChildren","f1","s1","noStyle","pointsString","nodeName","fillRule","hasExplicitEvenodd","hasMultipleSubpaths","subpathsWithArea","subpath","useMultipleHolesApproach","areas","largestArea","secondArea","smallestArea","checkForNestedPattern","isMainShape","beginPath","newPath","cut","isHole","tmpPoint","_GraphicsContext","_activePath","_transform","_fillStyle","defaultFillStyle","_strokeStyle","defaultStrokeStyle","_stateStack","setFillStyle","setStrokeStyle","onUpdate","_initNextPathLocation","holePath","transformedX","transformedY","cpx","cpy","div","querySelector","definitions","querySelectorAll","definition","parseSVGDefinitions","SVGParser","restore","save","getTransform","outerPadding","hasHit","shapes","transformedPoint","holeShapes","GraphicsContext","_TextStyle","oldStyle","defaultDropShadow","dropShadowAlpha","dropShadowAngle","dropShadowColor","fillGradientStops","gradientFill","fills","convertV7Tov8Style","fullStyle","defaultTextStyle","_align","_dropShadow","_createProxy","_fontFamily","_fontSize","_fontStyle","_fontVariant","_fontWeight","_leading","_letterSpacing","_lineHeight","_filters","_trim","_textBaseline","_whiteSpace","_wordWrapWidth","_originalFill","_isFillStyle","_originalStroke","filterPadding","cb","Proxy","property","newValue","ImageBitmap","VideoFrame","attributeFormatData","CanvasObserver","_lastTransform","_tickerAttached","updateTranslation","contentWidth","contentHeight","newTransform","left","top","_domElement","_attachObserver","ensureAttached","disconnect","ResizeObserver","contentRect","_lastScaleX","_lastScaleY","observe","HIGH","FederatedEvent","manager","bubbles","cancelBubble","cancelable","composed","defaultPrevented","eventPhase","propagationStopped","propagationImmediatelyStopped","layer","CAPTURING_PHASE","AT_TARGET","BUBBLING_PHASE","layerX","layerY","pageX","pageY","composedPath","propagationPath","initEvent","_type","_bubbles","_cancelable","initUIEvent","_typeArg","_bubblesArg","_cancelableArg","_viewArg","_detailArg","nativeEvent","Event","stopImmediatePropagation","stopPropagation","appleIphone","appleIpod","appleTablet","appleUniversal","androidPhone","androidTablet","amazonPhone","amazonTablet","windowsPhone","windowsTablet","otherBlackBerry","otherBlackBerry10","otherOpera","otherChrome","otherFirefox","isAppleTabletOnIos13","platform","maxTouchPoints","MSStream","isMobile","nav","tmp","createMatch","apple","phone","ipod","tablet","universal","amazon","android","windows","other","blackberry","blackberry10","opera","firefox","chrome","any","_AccessibilitySystem","_mobileInfo","debug","_activateOnTab","_deactivateOnMouseMove","_isActive","_isMobileAccessibility","_div","_pools","_renderId","_children","_androidUpdateCount","_androidUpdateFrequency","_isRunningTests","_boundOnKeyDown","_onKeyDown","_boundOnMouseMove","_onMouseMove","_hookDiv","_createTouchHook","isActive","isMobileAccessibility","hookDiv","title","_activate","_destroyTouchHook","pointerEvents","_canvasObserver","_initAccessibilitySetup","MutationObserver","childList","subtree","_updateAccessibleObjects","_deactivate","_accessibleDiv","_accessibleActive","accessibleType","accessibleChildren","accessible","_addChild","mergedOptions","accessibilityOptions","activateOnTab","deactivateOnMouseMove","enabledByDefault","activeIds","_getPool","hitArea","_capHitArea","_updateDebugHTML","tabIndex","viewWidth","viewHeight","removeAttribute","cssText","accessibleText","innerText","borderStyle","_onClick","_onFocus","_onFocusOut","accessiblePointerEvents","accessibleTitle","accessibleHint","interactive","_dispatchEvent","rootBoundary","rootTarget","type2","dispatchEvent","keyCode","movementX","movementY","setAccessibilityEnabled","AccessibilitySystem","EventsTicker","interactionFrequency","_deltaTime","_didMove","_tickerAdded","_pauseUpdate","removeTickerListener","pauseUpdate","addTickerListener","_tickerUpdate","INTERACTION","pointerMoved","rootPointerEvent","supportsTouchEvents","pointerType","supportsPointerEvents","PointerEvent","clientX","clientY","pointerId","MouseEvent","FederatedMouseEvent","client","movement","global","globalX","globalY","screenX","screenY","getLocalPosition","globalPos","getModifierState","initMouseEvent","_canBubbleArg","_screenXArg","_screenYArg","_clientXArg","_clientYArg","_ctrlKeyArg","_altKeyArg","_shiftKeyArg","_metaKeyArg","_buttonArg","_relatedTargetArg","FederatedPointerEvent","isPrimary","getCoalescedEvents","getPredictedEvents","FederatedWheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","DOM_DELTA_PAGE","tempHitLocation","tempLocalMapping","EventBoundary","dispatch","moveOnAll","enableGlobalMoveEvents","mappingState","trackingData","eventPool","_allInteractiveElements","_hitElements","_isPointerMoveEvent","hitPruneFn","hitTestFn","mapPointerDown","mapPointerMove","mapPointerOut","mapPointerOver","mapPointerUp","mapPointerUpOutside","mapWheel","mappingTable","addEventMapping","propagate","mapEvent","mappers","hitTest","invertedPath","eventMode","currentTarget","notifyTarget","hitTestMoveRecursive","testFn","pruneFn","shouldReturn","_interactivePrune","interactiveChildren","nestedHit","_isInteractive","isInteractive","isInteractiveMode","isInteractiveTarget","hitTestRecursive","relativeLocation","handlerKey","_notifyListeners","createPointerEvent","isRightButton","button","pressTargetsByButton","freeEvent","isMouse","outTarget","findMountedTarget","overTargets","outType","outEvent","leaveEvent","overType","overEvent","clonePointerEvent","overTargetAncestor","enterEvent","allMethods","allowGlobalPointerEvents","cursor","pressTarget","clickTarget","clickEvent","clicksByButton","clickCount","timeStamp","clickHistory","detail","wheelEvent","createWheelEvent","allocateEvent","copyPointerData","copyMouseData","copyData","originalEvent","copyWheelData","deltaMode","deltaX","deltaY","deltaZ","pressure","tangentialPressure","tiltX","tiltY","twist","altKey","buttons","ctrlKey","metaKey","shiftKey","isTrusted","srcElement","which","overTarget","TOUCH_TO_POINTER","touchstart","touchend","touchendoutside","touchmove","touchcancel","_EventSystem","autoPreventDefault","_eventsAdded","_rootPointerEvent","_rootWheelEvent","cursorStyles","pointer","defaultEventFeatures","_onPointerDown","_onPointerMove","_onPointerUp","_onPointerOverOut","onWheel","defaultEventMode","_defaultEventMode","setTargetElement","eventFeatures","globalMove","_currentCursor","setCursor","applyStyles","_normalizeToPointerData","isNormalized","nativeEvent2","federatedEvent","_bootstrapEvent","move","normalizedEvents","outside","wheel","normalizeWheelEvent","_removeEvents","_addEvents","msPointerEnabled","msContentZooming","msTouchAction","touchAction","passive","capture","mapPositionToPoint","isConnected","resolutionMultiplier","TouchEvent","li","changedTouches","touch","touches","identifier","force","tempEvent","_transferMouseData","relatedTarget","EventSystem","FederatedContainer","onclick","onmousedown","onmouseenter","onmouseleave","onmousemove","onglobalmousemove","onmouseout","onmouseover","onmouseup","onmouseupoutside","onpointercancel","onpointerdown","onpointerenter","onpointerleave","onpointermove","onglobalpointermove","onpointerout","onpointerover","onpointertap","onpointerup","onpointerupoutside","onrightclick","onrightdown","onrightup","onrightupoutside","ontap","ontouchcancel","ontouchend","ontouchendoutside","ontouchmove","onglobaltouchmove","ontouchstart","onwheel","_internalEventMode","signal","listenerFn","handleEvent","DOMPipe","_attachedDomElements","domContainer","_instructionSet","_domContainer","attachedDomElements","transformOrigin","_ownedBindGroups","groupMap","nameHash","groupData","bindTick","_buildResourceAccessor","uniformsOut","destroyPrograms","addMaskBounds","skipUpdateTransform","boundsToMask","addBoundsMask","addMaskLocalBounds","localRoot","relativeMask","getMatrixRelativeToParent","AlphaMask","ColorMask","StencilMask","ExtensionType","ExtensionType2","normalizeExtension","normalizeExtensionPriority","defaultPriority","_addHandlers","_removeHandlers","_queue","extensions2","onAdd","onRemove","addHandlers","removeHandlers","Target","getOwnPropertyDescriptors","handler","Pool","ClassType","initialSize","_pool","_count","_classType","prepopulate","totalSize","totalFree","totalUsed","BigPool","_poolsByClass","Class","stats","ID","free","used","tilingBit","tilingBitGl","TilingSpriteShader","tilingUniforms","uMapCoord","uTextureTransform","uSizeAnchor","updateUniforms","anchorX","anchorY","QuadGeometry","sharedQuad","TilingSpriteGpuData","canBatch","TilingSpritePipe","tilingSpriteData","_getTilingSpriteData","couldBatch","_updateCanBatch","tilingSprite","_updateBatchableMesh","_tileTransform","_initTilingSpriteData","renderableData","applyAnchorToTexture","setUvs","setPositions","_nonPowOf2wrapping","canvasCache","onDestroy","_uvUpdateId","_topology","uvBuffer","transformedUvs","_transformedUvs","GraphicsGpuData","GraphicsPipe","_rebuild","_addToBatcher","_getGpuDataForRenderable","_updateBatchesForRenderable","_initGpuDataForRenderable","batchClone","_Spritesheet","optionsOrTexture","arg1","linkedSheets","cachePrefix","animations","metaResolution","_frames","frames","_frameKeys","_batchIndex","_callback","BATCH_SIZE","_processFrames","_processAnimations","_parseComplete","_nextBatch","initialFrameIndex","frameIndex","maxFrames","sourceSize","trimmed","rotated","spriteSourceSize","borders","animName","frameName","destroyBase","Spritesheet","validImages","ignoreMultiPack","related_multi_packs","spritesheetAsset","Asset","resolver","ResolveParser","loader","LoadParser","LoaderParser","Normal","imageTexture","imageFilename","imagePath","spritesheet","multiPacks","itemUrl","sp","_resolvedAsset","_sourceOrigin","maxFragmentPrecision","getMaxFragmentPrecision","getShaderPrecisionFormat","shaderFragment","HIGH_FLOAT","precision","fragmentNameCache","VertexNameCache","processes","stripVersion","isES300","ensurePrecision","isFragment","maxSupportedPrecision","maxSupportedFragmentPrecision","maxSupportedVertexPrecision","requestedFragmentPrecision","requestedVertexPrecision","addProgramDefines","setProgramName","nameCache","insertVersion","_GlProgram","preprocessorOptions","preferredFragmentPrecision","preferredVertexPrecision","processKey","processOptions","tempPoints","isEmpty","copyFromBounds","lb","rt","rb","n00","n10","n01","n11","m00","m10","m01","m11","paddingX","paddingY","fit","enlarge","GlParticleContainerAdaptor","particleContainerPipe","getBuffers","TRIANGLES","particleChildren","createIndicesForQuads","outBuffer","totalIndices","generateUpdateFunction","ParticleBuffer","_generateParticleUpdateCache","staticVertexSize","dynamicVertexSize","_dynamicStride","_staticStride","staticAttributeBuffer","dynamicAttributeBuffer","dynamicOffset","staticOffset","_staticBuffer","_dynamicBuffer","attributeName","uploadFunction","getParticleUpdate","_dynamicUpload","dynamicUpdate","_staticUpload","staticUpdate","getParticleSyncKey","generateParticleUpdate","generateParticleUpdateFunction","particles","uploadStatic","ParticleShader","uTranslationMatrix","ParticleContainerPipe","_renderable","_initBuffer","_properties","_childrenDirty","transformationMatrix","GlParticleContainerPipe","GpuParticleContainerAdaptor","GpuParticleContainerPipe","fromArray","transpose","newPos","tx1","_ownedContext","_callContextMethod","method","rotateTransform","scaleTransform","translateTransform","beginFill","endFill","drawCircle","drawEllipse","drawPolygon","drawRect","drawRoundedRect","drawStar","pooledMatrix","updateTransformBackwards","_getGlobalBounds","renderableBounds","midiToPitchClass","regexp","noteToScaleIndex","pitchToMidi","cbb","dbb","db","ebb","eb","fbb","fb","gbb","gb","gx","abb","ab","bbb","bb","pitch","octave","noteOn","noteEndTicks","ticksToMeasures","_internalCanvas","_internalContext","checkRow","checkColumn","getCanvasBoundingBox","globalCompositeOperation","globalAlpha","ensureInternalCanvas","strokeRect","_renderTextToCanvas","lineCap","linePositionX","linePositionY","passesCount","isShadowPass","dsOffsetText","dsOffsetShadow","strokePadding","_drawLetterSpacing","currentPosition","stringArray","previousWidth","currentWidth","currentChar","textStr","defaultMatrix","_rectangle","addVertexData","vertexData","beginOffset","endOffset","localX","localY","privatePPQMap","firstTrackCurrentTicks_1","lastEventBeats","lastBPM","beats","elapsedSeconds","lastEvent","elapsedMeasures","measures","tempoTime","elapsedBeats","timeSigEvent","seconds","setTempo","startIdx","removeCount","nextPow2","isPow2","InstrumentMaps_1","privateTrackMap","programChange","percussion","patchNumber","family","__webpack_module_cache__","__webpack_require__","moduleId","cachedModule","__webpack_modules__","getPrototypeOf","ns","def","getOwnPropertyNames","toStringTag","browserExt","webworkerExt","WorkerGlobalScope","_isWebGLSupported","_isWebGPUSupported","isWebGLSupported","contextOptions","success","isWebGPUSupported","renderPriority","_Application","stage","RendererClass","finalOptions","rendererType","webgpu","webgl","autoDetectRenderer","_plugins","plugin","rendererDestroyOptions","plugins","BitmapFont","textureFrame","textureRotate","bitmapFontTextParser","txt","rawData","info","kernings","attributeList","itemData","strValue","floatValue","distanceRange","fieldType","file","charNode","letter","xoffset","yoffset","xadvance","bitmapFontXMLParser","getElementsByTagName","bitmapFontXMLStringParser","validExtensions","bitmapFontCachePlugin","CacheParser","loadBitmapFont","bitmapFontData","textureUrls","pageFile","loadedTextures","_options","BackgroundLoader","verbose","_loader","_assetList","_isLoading","_maxConcurrent","assetUrls","_next","toLoad","toLoadAmount","cacheTextureArray","testImageFormat","createImageBitmap","detectAvif","DetectionParser","formats","imageFormats","detectDefaults","inWorker","testVideoFormat","mimeType","canPlayType","detectMp4","detectOgv","detectWebm","detectWebp","_Loader","loadOptions","_parsersValidated","promiseCache","_getLoadPromiseAndParser","_parserHash","parserX","parser2","testParse","assetsToLoadIn","onProgressOrOptions","_validateParsers","onProgress","onError","strategy","retryCount","retryDelay","assetsToLoad","_loadAssetWithRetry","assetsToUnloadIn","loadPromise","loadedAsset","attempt","wait","ms","Loader","checkDataUrl","mimes","mime","checkExtension","tempURL","loadJson","Low","loadTxt","validWeights","validFontExtensions","validFontMIMEs","CSS_IDENT_TOKEN_REGEX","validURICharactersRegex","encodeURIWhenNeeded","uri","encodeURI","loadWebFont","fontFaces","nameTokens","charAt","toUpperCase","valid","fontFamilyName","getFontFamilyName","weights","FontFace","cached","getResolutionOfUrl","loadSvg","parseAsGraphicsContext","svgSource","loadAsGraphics","decode","canvasWidth","canvasHeight","imageSmoothingEnabled","imageSmoothingQuality","_p","loadAsTexture","WORKER_URL","WorkerInstance","URL","createObjectURL","Blob","worker","Worker","revokeObjectURL","MAX_WORKERS","UUID","WorkerManager","_createdWorkers","_workerPool","_resolveHash","isImageBitmapSupported","_isImageBitmapSupported","terminate","loadImageBitmap","_run","_initWorkers","_getWorker","hardwareConcurrency","_complete","_returnWorker","uuid","toDo","postMessage","validImageExtensions","validImageMIMEs","loadTextures","High","preferWorkers","preferCreateImageBitmap","status","statusText","imageBlob","premultiplyAlpha","potentialVideoExtensions","validVideoExtensions","validVideoMIMEs","loadVideoTextures","ve","validVideoMime","vm","supportedExtensions","supportedMimes","getBrowserSupportedVideoExtensions","isValidDataUrl","isValidExtension","videoElement","attributeMap","loc","parsedUrl","hostname","determineCrossOrigin","sourceElement","onCanPlay","loaded","cleanup","err","resolveTextureUrl","resolveJsonUrl","Assets","_detections","_backgroundLoader","defaultSearchParams","resolutionPref","texturePreference","_detectFormats","preferredFormats","skipDetections","detections","preferences","setPreferences","urls","urlArray","resolveResults","_mapLoadToResolve","loadBundle","counts","resolveResult","resolveResult2","backgroundLoad","backgroundLoadBundle","progressOrLoadOptions","resolveArray","loadedAssets","_unloadFromResolved","unloadBundle","detection","assetKeyMap","_Particle","combined","_alpha","_updateColor","_tint","Particle","particleData","emptyBounds","_ParticleContainer","dynamicProperties","addParticle","removeParticle","didRemove","removeParticles","removeParticleAt","addParticleAt","_beginIndex","_endIndex","_child2","ParticleContainer","AbstractText","styleClass","_styleClass","_text","owner","ensureTextOptions","BitmapText","bitmapMeasurement","AbstractSplitText","autoSplit","lineAnchor","wordAnchor","charAnchor","_canReuseChars","words","_originalText","_autoSplit","_lineAnchor","_wordAnchor","_charAnchor","splitFn","onTextUpdate","_setOrigin","originPoint","_SplitBitmapText","completeOptions","existingChars","lineContainer","currentWordContainer","currentWordStartIndex","isSpace","isLastChar","charInstance","bitmapTextSplit","SplitBitmapText","Text","canvasMeasurement","lerp","reWhitespace","reTrimStart","freeSelf","objectProto","nativeObjectToString","symToStringTag","isOwn","tag","unmasked","reIsBadHex","reIsBinary","reIsOctal","freeParseInt","valueOf","isBinary","nativeMax","maskSrcKey","IE_PROTO","funcToString","reIsHostCtor","reIsNative","nativeNow","lastCalled","stamp","remaining","reIsUint","propertyIsEnumerable","freeExports","nodeType","freeModule","isBuffer","typedArrayTags","freeProcess","process","nodeUtil","require","types","nodeIsTypedArray","isTypedArray","inherited","isArr","isArg","isBuff","isType","skipIndexes","iteratee","Ctor","isProto","otherArgs","guard","propsIndex","propsLength","ACTIVE_AUDIO_NODE_STORE","WeakSet","AUDIO_NODE_CONNECTIONS_STORE","AUDIO_NODE_STORE","AUDIO_PARAM_CONNECTIONS_STORE","AUDIO_PARAM_STORE","CONTEXT_STORE","EVENT_LISTENERS","CYCLE_COUNTERS","NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS","NODE_TO_PROCESSOR_MAPS","construct","IMPORT_STATEMENT_REGEX","splitImportStatements","importStatements","sourceWithoutImportStatements","unresolvedUrl","importStatementWithResolvedUrl","verifyParameterDescriptors","parameterDescriptors","verifyProcessorCtor","processorCtor","constructible","isConstructible","getValueForKey","pickElementFromSet","predicate","matchingElements","matchingElement","deletePassiveInputConnectionToAudioNode","passiveInputs","passiveInputConnections","matchingConnection","passiveInputConnection","getEventListenersOfAudioNode","audioNode","setInternalStateToActive","eventListener","isAudioWorkletNode","setInternalStateToPassive","setInternalStateToPassiveWhenNecessary","activeInputs","connections","DEFAULT_OPTIONS","channelCount","channelCountMode","channelInterpretation","fftSize","maxDecibels","minDecibels","smoothingTimeConstant","isOwnedByContext","nativeAudioNode","nativeContext","testAudioBufferCopyChannelMethodsOutOfBoundsSupport","nativeAudioBuffer","copyToChannel","createIndexSizeError","DOMException","wrapAudioBufferGetChannelDataMethod","audioBuffer","getChannelData","numberOfChannels","MOST_NEGATIVE_SINGLE_FLOAT","MOST_POSITIVE_SINGLE_FLOAT","isActiveAudioNode","loopEnd","loopStart","getAudioNodeConnections","getAudioParamConnections","audioParam","deactivateActiveAudioNodeInputConnections","trace","audioParams","isAudioBufferSourceNode","parameters","isBiquadFilterNode","Q","detune","frequency","gain","isConstantSourceNode","isGainNode","isOscillatorNode","isStereoPannerNode","pan","audioParamConnections","deactivateAudioGraph","destination","isAudioNode","audioNodeOrAudioParam","isAudioNodeOutputConnection","outputConnection","insertElementInSet","ignoreDuplicates","lmnt","addActiveInputConnectionToAudioParam","activeInputConnection","addPassiveInputConnectionToAudioParam","isNativeAudioNodeFaker","nativeAudioNodeOrNativeAudioNodeFaker","connectNativeAudioNodeToNativeAudioNode","nativeSourceAudioNode","nativeDestinationAudioNode","fakeNativeDestinationAudioNode","inputs","deleteActiveInputConnection","activeInputConnections","deleteEventListenerOfAudioNode","deletePassiveInputConnectionToAudioParam","disconnectNativeAudioNodeFromNativeAudioNode","getNativeAudioNode","getNativeAudioParam","isPartOfACycle","isPassiveAudioNode","testAudioNodeDisconnectMethodSupport","nativeAudioContext","nativeAudioWorkletNodeConstructor","analyzer","createScriptProcessor","dummy","createGain","ones","channelData","createBufferSource","onaudioprocess","chnnlDt","inputBuffer","sample","visitEachAudioNodeOnce","cycles","visitor","cycle","isNativeAudioNode","nativeAudioNodeOrAudioParam","wrapAudioNodeDisconnectMethod","returnValue","connectionsToDestination","connection","destinationOrOutput","filteredConnections","deleteInputsOfAudioNode","isOffline","deleteInputConnectionOfAudioNode","deleteInputsOfAudioParam","deleteInputConnectionOfAudioParam","ReadOnlyMap","_map","numberOfInputs","numberOfOutputs","parameterData","processorOptions","copyFromChannel","channelNumber","bufferOffset","slicedInput","createNestedArrays","arrays","processBuffer","renderedBuffer","nativeOfflineAudioContext","outputChannelCount","processorConstructor","exposeCurrentFrameAndCurrentTime","numberOfInputChannels","numberOfOutputChannels","processedBuffer","sampleRate","audioNodeConnections","audioWorkletProcessor","nodeToProcessorMap","nativeAudioWorkletNode","getAudioWorkletProcessor","outputs","prmtrs","potentiallyEmptyInputs","activeSourceFlag","outputChannelSplitterNodeOutput","colno","lineno","disableNormalization","detachArrayBuffer","port1","port2","MessageChannel","closeAndResolve","onmessage","delayTime","maxDelayTime","getOutputAudioNodeAtIndex","outputAudioNodes","outputAudioNode","attack","knee","threshold","createInvalidStateError","createInvalidAccessError","filterBuffer","feedback","feedbackLength","feedforward","feedforwardLength","minLength","xBuffer","yBuffer","bufferIndex","bufferLength","inputLength","testPromiseSupport","uint32Array","decodeAudioData","assignNativeAudioNodeOption","option","assignNativeAudioNodeOptions","testAnalyserNodeGetFloatTimeDomainDataMethodSupport","nativeAnalyserNode","getFloatTimeDomainData","assignNativeAudioNodeAudioParamValue","wrapAudioScheduledSourceNodeStartMethodNegativeParameters","nativeAudioScheduledSourceNode","when","wrapAudioScheduledSourceNodeStopMethodNegativeParameters","computeBufferSize","baseLatency","createNativeBiquadFilterNode","nativeBiquadFilterNode","createBiquadFilter","createNativeChannelSplitterNode","nativeChannelSplitterNode","createChannelSplitter","channelSplitterNode","wrapChannelSplitterNode","interceptConnections","original","interceptor","createNativeDelayNode","nativeDelayNode","createDelay","createNativeGainNode","nativeGainNode","divide","evaluatePolynomial","coefficient","createNativeScriptProcessorNode","bufferSize","createNotSupportedError","periodicWave","coneInnerAngle","coneOuterAngle","coneOuterGain","distanceModel","maxDistance","orientationX","orientationY","orientationZ","panningModel","positionX","positionY","positionZ","refDistance","rolloffFactor","createUnknownError","oversample","getFirstSample","isDCCurve","overwriteAccessors","createGetter","createSetter","getOwnPropertyDescriptor","setValueAtTimeUntilPossible","setValueAtTime","testAudioScheduledSourceNodeStartMethodNegativeParametersSupport","nativeAudioBufferSourceNode","createOscillator","testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport","testAudioScheduledSourceNodeStopMethodNegativeParametersSupport","wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls","disconnectGainNode","isStopped","wrapEventListener","addActiveInputConnectionToAudioNode","createAddActiveInputConnectionToAudioNode","addPassiveInputConnectionToAudioNode","createAddPassiveInputConnectionToAudioNode","deleteActiveInputConnectionToAudioNode","createDeleteActiveInputConnectionToAudioNode","audioNodeTailTimeStore","getAudioNodeTailTime","createGetAudioNodeTailTime","cacheTestResult","ongoingTests","testResults","tester","cachedTestResult","ongoingTest","synchronousTestResult","finalTestResult","createNativeAnalyserNode","createAnalyser","byteTimeDomainData","getByteTimeDomainData","wrapAnalyserNodeGetFloatTimeDomainDataMethod","createNativeAnalyserNodeFactory","getAudioNodeRenderer","createGetAudioNodeRenderer","renderInputsOfAudioNode","audioNodeRenderer","renderedNativeAudioNode","allRenderingPromises","renderingPromises","createRenderInputsOfAudioNode","createAnalyserNodeRenderer","renderedNativeAnalyserNodes","renderedNativeAnalyserNode","createAnalyserNode","createAnalyserNodeRendererFactory","getNativeContext","contextStore","nativeOfflineAudioContextConstructor","OfflineAudioContext","webkitOfflineAudioContext","createNativeOfflineAudioContextConstructor","isNativeOfflineAudioContext","anything","createIsNativeOfflineAudioContext","audioParamAudioNodeStore","eventTargetConstructor","_nativeEventTarget","_listeners","wrappedEventListener","createEventTargetConstructor","nativeAudioContextConstructor","AudioContext","webkitAudioContext","createNativeAudioContextConstructor","isNativeAudioContext","createIsNativeAudioContext","AudioNode","createIsNativeAudioNode","isNativeAudioParam","AudioParam","createIsNativeAudioParam","AudioWorkletNode","createNativeAudioWorkletNodeConstructor","audioNodeConstructor","addAudioNodeConnections","addConnectionToAudioNode","createIncrementCycleCounter","decrementCycleCounter","detectCycles","_nativeAudioNode","isPassive","nativeAudioParam","maxValue","eventListeners","partialConnection","deleteActiveInputConnectionToAudioParam","addConnectionToAudioParamOfAudioContext","destinations","audioNodeConnectionsOfSource","deleteAnyConnection","deleteConnectionAtOutput","deleteConnectionToDestination","createAudioNodeConstructor","audioNodeConnectionsStore","tailTimeTimeoutIds","tailTime","tailTimeTimeoutId","createAddConnectionToAudioNode","cycleCounters","cycleCounter","nativeDestinationAudioParam","createIncrementCycleCounterFactory","createDecrementCycleCounter","chain","nextLink","isDelayNode","mergedCycles","nestedCycles","createDetectCycles","analyserNodeConstructor","audionNodeConstructor","_nativeAnalyserNode","frequencyBinCount","getByteFrequencyData","getFloatFrequencyData","createAnalyserNodeConstructor","audioBufferStore","nativeAudioBufferConstructor","AudioBuffer","createNativeAudioBufferConstructor","convertNumberToUnsignedLong","unit32Array","wrapAudioBufferCopyChannelMethods","channelNumberAsNumber","bufferOffsetAsNumber","audioBufferLength","destinationLength","sourceLength","createWrapAudioBufferCopyChannelMethods","wrapAudioBufferCopyChannelMethodsOutOfBounds","createWrapAudioBufferCopyChannelMethodsOutOfBounds","audioBufferConstructor","testNativeAudioBufferConstructorSupport","createAudioBufferConstructor","createTestAudioBufferConstructorSupport","addSilentConnection","createAddSilentConnection","renderInputsOfAudioParam","createRenderInputsOfAudioParam","connectAudioParam","createConnectAudioParam","createNativeAudioBufferSourceNode","testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport","testAudioBufferSourceNodeStartMethodOffsetClampingSupport","testAudioBufferSourceNodeStopMethodNullifiedBufferSupport","wrapAudioBufferSourceNodeStartMethodOffsetClampling","wrapAudioBufferSourceNodeStopMethodNullifiedBuffer","isScheduled","wrapAudioBufferSourceNodeStartMethodConsecutiveCalls","clampedOffset","createNativeAudioBufferSourceNodeFactory","nullifiedBuffer","createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer","renderAutomation","getAudioParamRenderer","replay","createRenderAutomation","createGetAudioParamRenderer","createAudioBufferSourceNodeRenderer","renderedNativeAudioBufferSourceNodes","renderedNativeAudioBufferSourceNode","nativeAudioBufferSourceNodeIsOwnedByContext","createAudioBufferSourceNode","createAudioBufferSourceNodeRendererFactory","createAudioParam","addAudioParamConnections","audioParamStore","createAudioParamRenderer","isAudioParamOfOfflineAudioContext","minValue","automationEventList","audioParamRenderer","exponentialRampToValueAtTime","linearRampToValueAtTime","setTargetAtTime","setValueCurveAtTime","cancelAndHoldAtTime","flush","previousLastEvent","currentLastEvent","cancelScheduledValues","convertedValues","firstSample","lastSample","numberOfInterpolatedValues","interpolatedValues","timeOfLastSample","createAudioParamFactory","audioParamConnectionsStore","audioBufferSourceNodeConstructor","audioBufferSourceNodeRenderer","_audioBufferSourceNodeRenderer","_isBufferNullified","_isBufferSet","_nativeAudioBufferSourceNode","_onended","_playbackRate","onended","wrappedListener","nativeOnEnded","resetInternalStateToPassive","createAudioBufferSourceNodeConstructor","audioDestinationNodeConstructor","createAudioDestinationNodeRenderer","createNativeAudioDestinationNode","nativeAudioDestinationNode","renderedNativeAudioDestinationNodes","renderedNativeAudioDestinationNode","createAudioDestinationNode","_isNodeOfNativeOfflineAudioContext","_nativeAudioDestinationNode","maxChannelCount","createAudioDestinationNodeConstructor","isNodeOfNativeOfflineAudioContext","gainNode","createNativeAudioDestinationNodeFactory","createBiquadFilterNodeRenderer","renderedNativeBiquadFilterNodes","renderedNativeBiquadFilterNode","nativeBiquadFilterNodeIsOwnedByContext","createBiquadFilterNode","createBiquadFilterNodeRendererFactory","setAudioNodeTailTime","createSetAudioNodeTailTime","biquadFilterNodeConstructor","_Q","_detune","_gain","log10","_nativeBiquadFilterNode","getFrequencyResponse","frequencyHz","magResponse","phaseResponse","createBiquadFilterNodeConstructor","monitorConnections","whenConnected","whenDisconnected","wasDisconnected","wasConnected","isDisconnected","createMonitorConnections","wrapChannelMergerNode","channelMergerNode","audioBufferSourceNode","createWrapChannelMergerNode","createNativeChannelMergerNode","nativeChannelMergerNode","createChannelMerger","createNativeChannelMergerNodeFactory","createChannelMergerNodeRenderer","renderedNativeAudioNodes","createAudioNode","createChannelMergerNodeRendererFactory","channelMergerNodeConstructor","createChannelMergerNodeConstructor","createChannelSplitterNodeRenderer","createChannelSplitterNodeRendererFactory","channelSplitterNodeConstructor","sanitizeChannelSplitterOptions","createChannelSplitterNodeConstructor","createNativeConstantSourceNodeFaker","audioNodeOptions","nativeConstantSourceNodeFaker","createNativeConstantSourceNodeFakerFactory","createNativeConstantSourceNode","createConstantSource","nativeConstantSourceNode","createNativeConstantSourceNodeFactory","createConstantSourceNodeRenderer","renderedNativeConstantSourceNodes","renderedNativeConstantSourceNode","nativeConstantSourceNodeIsOwnedByContext","createConstantSourceNode","createConstantSourceNodeRendererFactory","constantSourceNodeConstructor","constantSourceNodeRenderer","_constantSourceNodeRenderer","_nativeConstantSourceNode","createConstantSourceNodeConstructor","createNativeConvolverNode","nativeConvolverNode","createConvolver","createNativeConvolverNodeFactory","createConvolverNodeRenderer","renderedNativeConvolverNodes","renderedNativeConvolverNode","createConvolverNode","createConvolverNodeRendererFactory","convolverNodeConstructor","_nativeConvolverNode","createConvolverNodeConstructor","createDelayNodeRenderer","renderedNativeDelayNodes","renderedNativeDelayNode","nativeDelayNodeIsOwnedByContext","createDelayNode","createDelayNodeRendererFactory","delayNodeConstructor","_delayTime","createDelayNodeConstructor","createNativeDynamicsCompressorNode","nativeDynamicsCompressorNode","createDynamicsCompressor","createNativeDynamicsCompressorNodeFactory","createDynamicsCompressorNodeRenderer","renderedNativeDynamicsCompressorNodes","renderedNativeDynamicsCompressorNode","nativeDynamicsCompressorNodeIsOwnedByContext","createDynamicsCompressorNode","createDynamicsCompressorNodeRendererFactory","dynamicsCompressorNodeConstructor","_attack","_knee","_nativeDynamicsCompressorNode","_ratio","_release","_threshold","previousChannelCount","reduction","createDynamicsCompressorNodeConstructor","createGainNodeRenderer","renderedNativeGainNodes","renderedNativeGainNode","nativeGainNodeIsOwnedByContext","createGainNode","createGainNodeRendererFactory","gainNodeConstructor","createGainNodeConstructor","createNativeIIRFilterNodeFaker","convertedFeedback","convertedFeedforward","scriptProcessorNode","bufferIndexes","xBuffers","yBuffers","outputBuffer","nyquist","omega","createNativeIIRFilterNodeFakerFactory","renderNativeOfflineAudioContext","testOfflineAudioContextCurrentTimeSupport","isOfflineAudioContextCurrentTimeSupported","oncomplete","startRendering","createRenderNativeOfflineAudioContext","createTestOfflineAudioContextCurrentTimeSupport","createIIRFilterNodeRenderer","filteredBufferPromise","nativeIIRFilterNode","nativeIIRFilterNodeIsOwnedByContext","createIIRFilter","partialOfflineAudioContext","filteredBuffer","filterFullBuffer","createIIRFilterNodeRendererFactory","createNativeIIRFilterNode","createNativeIIRFilterNodeFactory","iIRFilterNodeConstructor","wrapIIRFilterNodeGetFrequencyResponseMethod","_nativeIIRFilterNode","createIIRFilterNodeConstructor","createAudioListener","nativeListener","forwardX","forwardY","forwardZ","upX","upY","upZ","isScriptProcessorNodeCreated","lastOrientation","lastPosition","createScriptProcessorNode","setOrientation","positon","setPosition","createSetOrientation","createSetPosition","createFakeAudioParam","initialValue","constantSourceNode","createFakeAudioParams","createAudioListenerFactory","unrenderedAudioWorkletNodeStore","minimalBaseAudioContextConstructor","_nativeContext","_destination","_listener","_onstatechange","onstatechange","nativeOnStateChange","createMinimalBaseAudioContextConstructor","createNativeOscillatorNode","nativeOscillatorNode","setPeriodicWave","createNativeOscillatorNodeFactory","createOscillatorNodeRenderer","renderedNativeOscillatorNodes","renderedNativeOscillatorNode","nativeOscillatorNodeIsOwnedByContext","createOscillatorNode","createOscillatorNodeRendererFactory","oscillatorNodeConstructor","oscillatorNodeRenderer","_nativeOscillatorNode","_oscillatorNodeRenderer","createOscillatorNodeConstructor","createConnectedNativeAudioBufferSourceNode","createConnectedNativeAudioBufferSourceNodeFactory","createNativeWaveShaperNodeFaker","negativeWaveShaperNode","createWaveShaper","positiveWaveShaperNode","inputGainNode","invertGainNode","outputGainNode","revertGainNode","disconnectNativeAudioBufferSourceNode","unmodifiedCurve","nativeWaveShaperNodeFaker","curveLength","negativeCurve","positiveCurve","createNativeWaveShaperNodeFakerFactory","createNativeWaveShaperNode","nativeWaveShaperNode","automationRate","createNativeWaveShaperNodeFactory","createNativePannerNodeFaker","pannerNode","createPanner","SINGLE_CHANNEL_OPTIONS","orientationXGainNode","orientationYGainNode","orientationZGainNode","positionXGainNode","positionYGainNode","positionZGainNode","waveShaperNode","nativePannerNodeFaker","createNativePannerNodeFakerFactory","createNativePannerNode","nativePannerNode","createNativePannerNodeFactory","createPannerNodeRenderer","renderedBufferPromise","renderedNativeGainNodeOrNativePannerNode","commonAudioNodeOptions","commonNativePannerNodeOptions","nativePannerNodeIsOwnedByContext","nativeConstantSourceNodes","channelDatas","gateGainNode","partialPannerNode","createPannerNodeRendererFactory","pannerNodeConstructor","_nativePannerNode","_orientationX","_orientationY","_orientationZ","_positionX","_positionY","_positionZ","createPannerNodeConstructor","createNativePeriodicWave","imag","real","convertedImag","convertedReal","nativePeriodicWave","createPeriodicWave","createNativePeriodicWaveFactory","periodicWaveConstructor","periodicWaveStore","PeriodicWave","sanitizePeriodicWaveOptions","createPeriodicWaveConstructor","nativeStereoPannerNodeFakerFactory","CURVE_SIZE","DC_CURVE","HALF_PI","SINGLE_CHANNEL_WAVE_SHAPER_OPTIONS","buildInternalGraph","panGainNode","leftWaveShaperCurve","rightWaveShaperCurve","leftGainNode","leftWaveShaperNode","panWaveShaperNode","rightGainNode","rightWaveShaperNode","connectGraph","disconnectGraph","buildInternalGraphForMono","leftInputForLeftOutputWaveShaperCurve","leftInputForRightOutputWaveShaperCurve","rightInputForLeftOutputWaveShaperCurve","rightInputForRightOutputWaveShaperCurve","leftInputForLeftOutputGainNode","leftInputForLeftOutputWaveShaperNode","leftInputForRightOutputGainNode","leftInputForRightOutputWaveShaperNode","rightInputForLeftOutputGainNode","rightInputForLeftOutputWaveShaperNode","rightInputForRightOutputGainNode","rightInputForRightOutputWaveShaperNode","buildInternalGraphForStereo","createNativeStereoPannerNodeFakerFactory","createNativeStereoPannerNode","createNativeStereoPannerNodeFaker","createStereoPanner","nativeStereoPannerNode","createNativeStereoPannerNodeFactory","createStereoPannerNodeRenderer","renderedNativeStereoPannerNodes","renderedNativeStereoPannerNode","nativeStereoPannerNodeIsOwnedByContext","createStereoPannerNode","createStereoPannerNodeRendererFactory","stereoPannerNodeConstructor","_pan","createStereoPannerNodeConstructor","createWaveShaperNodeRenderer","renderedNativeWaveShaperNodes","renderedNativeWaveShaperNode","createWaveShaperNode","createWaveShaperNodeRendererFactory","waveShaperNodeConstructor","_isCurveNullified","_nativeWaveShaperNode","createWaveShaperNodeConstructor","isSecureContext","createIsSecureContext","currentFrame","createExposeCurrentFrameAndCurrentTime","backupOfflineAudioContextStore","getOrCreateBackupOfflineAudioContext","backupOfflineAudioContext","createGetOrCreateBackupOfflineAudioContext","addAudioWorkletModule","evaluateSource","fetchSource","ongoingRequests","resolvedRequests","testAudioWorkletProcessorPostMessageSupport","moduleURL","credentials","resolvedRequestsOfContext","ongoingRequestsOfContext","promiseOfOngoingRequest","audioWorklet","absoluteUrl","evaluateAudioWorkletGlobalScope","_AWGS","SyntaxError","nodeNameToProcessorConstructorMap","isSupportingPostMessage","addModule","nativeContextOrBackupOfflineAudioContext","updatedResolvedRequestsOfContext","updatedOngoingRequestsOfContext","createAddAudioWorkletModule","script","originalOnErrorHandler","removeErrorEventListenerAndRevokeUrl","createEvaluateSource","offlineAudioContext","isEmittingMessageEvents","isEmittingProcessorErrorEvents","audioWorkletNode","oscillator","onprocessorerror","createTestAudioWorkletProcessorPostMessageSupport","isNativeContext","createIsNativeContext","createDataCloneError","createEncodingError","detachedArrayBuffers","anyContext","audioData","fail","createDecodeAudioData","baseAudioContextConstructor","_audioWorklet","constraints","successCallback","errorCallback","createBaseAudioContextConstructor","mediaElementAudioSourceNodeConstructor","createNativeMediaElementAudioSourceNode","nativeMediaElementAudioSourceNode","createMediaElementSource","mediaElement","_nativeMediaElementAudioSourceNode","createMediaElementAudioSourceNodeConstructor","mediaStreamAudioDestinationNodeConstructor","createNativeMediaStreamAudioDestinationNode","nativeMediaStreamAudioDestinationNode","createMediaStreamDestination","_nativeMediaStreamAudioDestinationNode","stream","createMediaStreamAudioDestinationNodeConstructor","mediaStreamAudioSourceNodeConstructor","createNativeMediaStreamAudioSourceNode","nativeMediaStreamAudioSourceNode","mediaStream","audioStreamTracks","getAudioTracks","filteredAudioStreamTracks","createMediaStreamSource","MediaStream","_nativeMediaStreamAudioSourceNode","createMediaStreamAudioSourceNodeConstructor","createNativeMediaStreamTrackAudioSourceNode","mediaStreamTrack","createMediaStreamTrackSource","kind","createNativeMediaStreamTrackAudioSourceNodeFactory","mediaStreamTrackAudioSourceNodeConstructor","createMediaStreamTrackAudioSourceNodeConstructor","audioContextConstructor","latencyHint","isValidLatencyHint","_baseLatency","_nativeAudioContext","_nativeGainNode","revokeState","resume","resolvePromise","suspend","createAudioContextConstructor","getUnrenderedAudioWorkletNodes","unrenderedAudioWorkletNodes","createGetUnrenderedAudioWorkletNodes","addUnrenderedAudioWorkletNode","createAddUnrenderedAudioWorkletNode","connectMultipleOutputs","createConnectMultipleOutputs","deleteUnrenderedAudioWorkletNode","createDeleteUnrenderedAudioWorkletNode","disconnectMultipleOutputs","createDisconnectMultipleOutputs","activeAudioWorkletNodeInputsStore","getActiveAudioWorkletNodeInputs","createGetActiveAudioWorkletNodeInputs","createNativeAudioWorkletNodeFaker","numberOfParameters","messageChannel","gainNodes","inputChannelSplitterNodes","constantSourceNodes","inputChannelMergerNode","outputChannelSplitterNode","outputChannelMergerNodes","parameterMap","nativeAudioWorkletNodeFaker","patchedEventListeners","unpatchedEventListener","patchedEventListener","audioWorkletProcessorPromise","audioWorkletNodeOptions","clonedAudioWorkletNodeOptions","onmessageerror","cloneAudioWorkletNodeOptions","createAudioWorkletProcessorPromise","createAudioWorkletProcessor","dWrkltPrcssr","disconnectOutputsGraph","outputChannelMergerNode","activeInputIndexes","disconnectFakeGraph","connectFakeGraph","createNativeAudioWorkletNodeFakerFactory","createNativeAudioWorkletNode","testClonabilityOfAudioWorkletNodeOptions","createNativeAudioWorkletNodeFactory","createAudioWorkletNodeRenderer","processedBufferPromise","renderedNativeAudioWorkletNodeOrGainNode","nativeOutputNodes","nativeAudioWorkletNodeIsOwnedByContext","nm","createAudioWorkletNodeRendererFactory","getBackupOfflineAudioContext","createGetBackupOfflineAudioContext","setActiveAudioWorkletNodeInputs","createSetActiveAudioWorkletNodeInputs","audioWorkletNodeConstructor","sanitizeAudioWorkletNodeOptions","testAudioWorkletNodeOptionsClonability","_nativeAudioWorkletNode","_onprocessorerror","_parameters","nativeOnProcessorError","createAudioWorkletNodeConstructor","createNativeOfflineAudioContext","createCreateNativeOfflineAudioContext","createStartRendering","offlineAudioContextConstructor","delayStateChangeEvent","_waitForThePromiseToSettle","_length","_nativeOfflineAudioContext","createOfflineAudioContextConstructor","isAnyAudioContext","createIsAnyAudioContext","isAnyAudioNode","audioNodeStore","createIsAnyAudioNode","isAnyAudioParam","createIsAnyAudioParam","isAnyOfflineAudioContext","createIsAnyOfflineAudioContext","isUndef","isNumber","isString","isNote","assert","statement","assertRange","gte","lte","assertContextRunning","isInsideScheduledCallback","printedScheduledWarning","enterScheduledCallback","insideCallback","defaultLogger","theWindow","hasAudioContext","__decorate","decorators","desc","Reflect","decorate","SuppressedError","updateInterval","contextSampleRate","_minimumUpdateInterval","_createClock","_createWorker","_updateInterval","toFixed","blobUrl","_worker","_createTimeout","_timeout","_disposeClock","interval","dispose","isAudioParam","isOfflineAudioContext","isAudioContext","noCopy","isAudioBuffer","deepMerge","optionsFromArguments","argsArray","objKey","defaultArg","given","fallback","omitFromObject","omit","Tone","_wasDisposed","getDefaults","TONE_DEBUG_CLASS","disposed","EPSILON","GT","GTE","EQ","LT","Timeline","_timeline","memory","increasing","lastValue","_search","peek","getAfter","getBefore","after","cancelBefore","previousEvent","_iterate","lowerBound","upperBound","forEachBefore","forEachAfter","forEachBetween","forEachFrom","forEachAtTime","notifyNewContext","onContextInit","notifyCloseContext","onContextClose","Emitter","boundCallback","eventList","constr","BaseContext","Context","_constants","_timeouts","_timeoutIds","_closeStarted","_workletPromise","_latencyHint","createAudioContext","clockSource","_timeoutLoop","lookAhead","initialize","feedForward","transport","_transport","_draw","createAudioWorkletNode","BaseAudioContext","rawContext","workletsAreReady","_lookAhead","immediate","getConstant","constant","timeout","clearInterval","setInterval","intervalFn","readOnly","noOp","_buffer","_reversed","_reverse","doneLoading","downloads","isMultidimensional","channels","multiChannelArray","toMono","chanNum","outputArray","numChannels","channelArray","startSamples","endSamples","retBuffer","subarray","rev","supportsType","_currentTime","_duration","_renderClock","asynchronous","yieldEvery","dummyContext","_numberOfChannels","_sampleRate","_numberOfInputs","_numberOfOutputs","_maxDelayTime","_feedForward","_feedback","_real","_imag","_constraints","_stream","_element","_audioData","_url","_id","_interval","_val","_d","globalContext","disposeOld","TONE_SILENCE_LOGGING","printString","intervalToFrequencyRatio","A4","ftom","ftomf","mtof","TimeBaseClass","units","defaultUnits","_units","_expressions","_getExpressions","hz","_frequencyToUnits","_ticksToUnits","_beatsToUnits","_getTimeSignature","numericValue","scalar","_secondsToUnits","samples","tr","fromType","_noArg","typeName","quantity","expr","matching","freq","_getBpm","_getPPQ","PPQ","toSeconds","toTicks","toFrequency","toMidi","toSamples","toMilliseconds","TimeClass","quantize","quantTo","nextSubdivision","subdiv","percent","subdivision","toNotation","testNotations","power","closestSeconds","notation","notationSeconds","toBarsBeatsSixteenths","quarterTime","quarters","sixteenths","sixteenthString","FrequencyClass","setA4","harmonize","intervals","toNote","scaleIndexToNote","cbbb","dbbb","ebbb","fbbb","gbbb","abbb","bbbb","TransportTimeClass","ToneWithContext","defaultContext","sampleTime","blockTime","assertUsedScheduleTime","_getPartialProperties","StateTimeline","initial","_initial","setStateAtTime","getValueAtTime","getLastState","getNextState","Param","overridden","_minOutput","_param","_swappable","swappable","_initialValue","convert","_minValue","_maxValue","_toType","_is","_assertRange","_fromType","LN10","computedTime","before","beforeValue","_linearInterpolate","_exponentialInterpolate","previousVal","_exponentialApproach","setRampPoint","currentVal","exponentialRampTo","rampTime","linearRampTo","targetRampTo","exponentialApproachValueAtTime","scaling","startingValue","segTime","valueAtTime","rampTo","subdivisions","setParam","t0","v0","t1","ToneAudioNode","_internalChannels","_isAudioNode","node","_getInternalNodes","nodeList","_setChannelProperties","_getChannelProperties","outputNum","inputNum","toDestination","toMaster","srcNode","dstNode","outputNumber","inputNumber","nodes","connectSeries","fan","Gain","_gainNode","OneShotSource","_stopTime","getStateAtTime","_fadeIn","fadeIn","_fadeOut","fadeOut","_curve","_startGain","fadeInTime","_stopGain","cancelStop","fadeOutTime","additionalTail","_stopSource","disposeCallback","requestIdleCallback","ToneConstantSource","Signal","override","_constantSource","connectSignal","TickParam","_multiplier","multiplier","computedValue","prevEvent","rampVal","ticksUntilTime","_getTicksUntilEvent","computedVal","segmentDur","val0","val1","onTheLineEvent","getTicksAtTime","getDurationOfTicks","getTimeOfTick","sol1","ticksToTime","timeToTicks","computedDuration","startTicks","TickSignal","TickSource","_tickOffset","_ticksAtTime","_secondsAtTime","setTicksAtTime","stopEvent","memoizedEvent","tmpEvent","lastState","elapsedTicks","eventToMemoize","periodStartTime","offsetEvent","getSecondsAtTime","absoluteTicks","forEachTickBetween","lastStateEvent","maxStartTime","nextTickTime","Clock","_lastUpdate","_boundLoop","_loop","_tickSource","Volume","volume","_unmutedVolume","mute","DestinationClass","ListenerClass","_loadingCount","_bufferLoaded","MidiClass","TicksClass","DrawClass","expiration","anticipation","_boundDrawLoop","_drawLoop","_animationFrame","schedule","IntervalTimeline","_root","IntervalNode","updateHeight","updateMax","_rebalance","_removeNode","_setRoot","_replaceNodeInParent","replacement","isLeftChild","getBalance","_rotateLeft","pivotNode","_rotateRight","balance","low","allNodes","traverse","searchAfter","high","_left","_right","TimelineValue","SignalOperator","WaveShaper","_shaper","mapping","setMap","normalized","oversampling","Pow","_exponentScaler","_expFunc","_exponent","exponent","TransportEvent","_eventId","_remainderTime","floatTime","invoke","tickDuration","TransportRepeatEvent","_currentId","_nextId","_nextTick","_boundRestart","_restart","_createEvents","_createEvent","scheduleOnce","TransportClass","_loopStart","_loopEnd","_scheduledEvents","_repeatedEvents","_syncedSignals","_swingAmount","_ppq","_clock","_processTick","_bindClockEvents","_timeSignature","_swingTicks","swing","swingSubdivision","tickTime","progress","_addEvent","scheduleRepeat","eventId","timeline","computedAfter","offsetTicks","startPosition","endPosition","setLoopPoints","remainingTicks","syncSignal","sourceValue","scaleFactor","scaleBefore","reciprocal","scaleAfter","ratioSignal","unsyncSignal","syncedSignal","_synced","_scheduled","_syncedStart","_syncedStop","_volume","onstop","_clampToCurrentTime","sched","_start","restart","_stop","sync","stateEvent","startOffset","unsync","_sourceStarted","_sourceStopped","computedOffset","loopDuration","computedDur","generateWaveform","ToneOscillatorNode","_oscillator","Oscillator","_partials","partials","_partialCount","partialCount","baseType","phase","_wave","syncFrequency","unsyncFrequency","_getCachedPeriodicWave","_periodicWaveCache","description","_phase","arrayA","arrayB","oscProps","isBasicType","wave","_getRealImaginary","partial","fullPartials","periodicWaveSize","piFactor","_inverseFFT","getInitialValue","twoPi","asArray","AudioToGain","_norm","Multiply","_mult","AMOscillator","_modulationScale","_modulationNode","_carrier","_modulator","modulationType","harmonicity","FMOscillator","modulationIndex","PulseOscillator","_widthGate","_thresh","_triangle","carrierType","FatOscillator","_oscillators","_spread","spread","_forEach","osc","PWMOscillator","sourceType","_pulse","modulationFrequency","OmniOscillatorSourceMap","am","fat","fm","pulse","pwm","OmniOscillator","_sourceType","_createNewOscillator","_getOscType","oscType","OscConstructor","oldOsc","sType","mType","valueMap","propertyKey","timeRange","Player","_activeSources","_onload","autostart","_onSourceEnd","origDuration","implicitEnd","seek","rate","Envelope","_sig","decay","sustain","attackCurve","releaseCurve","decayCurve","_getCurve","direction","curveName","EnvelopeCurves","_setCurve","curveDef","_attackCurve","_releaseCurve","_decayCurve","triggerAttack","currentValue","decayValue","decayStart","triggerRelease","triggerAttackRelease","attackPortion","envelopeDuration","sustainTime","totalDuration","curveLen","cosineCurve","rippleCurve","sineWave","stairsCurve","sineCurve","bounceCurve","invertCurve","bounce","In","Out","cosine","exponential","ripple","sine","_original_triggerAttack","_original_triggerRelease","_syncedRelease","_syncState","_syncMethod","changed","timePosition","originalMethod","Monophonic","portamento","onsilence","_triggerEnvelopeAttack","setNote","_triggerEnvelopeRelease","computedFrequency","getLevelAtTime","portTime","AmplitudeEnvelope","Synth","envelope","computedAttack","computedDecay","MembraneSynth","pitchDecay","octaves","hertz","maxNote","workletContext","addToWorklet","classOrFunction","registerProcessor","classDesc","processor","Sampler","urlMap","mid","_findClosest","midiFloat","difference","closestNote","releaseAll","Panner","_panner","Solo","_allSolos","solo","_isSoloed","_addSolo","_removeSolo","_updateSolo","_soloed","_noSolos","PanVol","Channel","_solo","_panVol","_getBus","buses","send","bus","sendKnob","receive","getDestination","TypedEmitter","CENTER_NOTE","DEFAULT_PLAY_OPTIONS","ToneAudio","loadBuffers","requests","el","semitoneToRate","semitones","onMidiStarted","onNoteScheduled","samplers","currentMidiPlayback","currentMidiData","initInstruments","hasFocus","updateMusic","lower","upper","playMidi","loops","totalQueued","loopOffset","absoluteScheduledTime","trackName","noteData","unlock","Ease","createjs","Tween","ease","sineInOut","scope","tween","TweenGroup","LOAD_OPTIONS","AppBase","referenceSize","onInit","onResize","audio","dpr","_dpr","tweenGroup","selectedDpr","innerWidthLastUpdate","innerHeightLastUpdate","initialized","atlas","bmfont","spine","getSelectedDpr","startApp","resizeRoot","preventContextMenu","resolutionBreakpoints","devicePixelRatio","maxSideSizeThreshold","getTextureDpr","windowWidth","windowHeight","getAtlas","atlasPath","getFrame","getSpine","spinePath","getJson","addSpine","skeleton","addAtlas","addBitmapFont","assetPath","addJson","jsonName","SceneKey","GameObject","app","loadError","handleLoad","handleLoadError","ready","handleInit","handleResize","handleUpdate","handleUnload","handleUnloadError","clearTweens","STATUS_TEXT_STYLE","Scene","displayAndLogError","displayStatusText","hideStatusText","ButtonOptionDefaults","textureDown","textureUp","UiButton","back","handlePointerOver","handlePointerOut","handlePointerTap","handlePointerDown","handlePointerUp","handlePointerCancel","toneStart","setInteractive","ButtonTextOptionDefaults","UiTextButton","labelText","DEFAULT_TEXT_STYLE","DemoAppHUD","backButton","handleBackButtonPress","onBackButtonPressed","CARD_FRAME_IDS","CardSprite","cardIndex","cardSprite","frameID","CARD_SCALE_COMPENSATION","nativeFloor","nativeRandom","random","rand","collection","CardMoveDirection","CardsController","onCardMove","onCardsInitialized","moveDirection","ToStack2","allCards","stack1","stack2","cardData","stackId","indexInStack","shuffleStack","moveTopCard","ToStack1","fromStack","toStack","fromStackId","toStackId","fromStackIndex","toStackIndex","CARDS_ATLAS_PATH","AceOfShadowsScene","hud","showScene","Menu","cardsController","cardSprites","stack1Container","stack2Container","getLocalCardDeckPosition","indexIndStack","handleCardsInitialized","handleCardMove","cards","fromContainer","toContainer","globalSpritePosition","fromPositionLocalToRoot","toPositionLocalToStack","animationProgress","ANIMATION_DURATION","quadOut","toPositionLocalToRoot","easedProgress","scaleOffset","MagicWordsText","emojiDataMap","avatarDataMap","textBubble","wrapWidth","avatarPosition","avatarSprite","textDisplay","registerAvatars","avatarData","avatar","registerEmojis","emojiData","emoji","displayText","dialogue","dialogueWords","emojisToInsert","emojiKey","emojiTag","preparedText","updateBubbleSizing","emojiToInsert","emojiSprite","updateAvatarPosition","BUBBLE_PADDING_X","BUBBLE_PADDING_Y","MagicWordsScene","magicWordsText","cachedMagicWordsResponse","emojies","avatars","dialogueEntry","wordDelay","totalDelay","loadMagicWordsData","unloadMagicWordsData","fetchMagicWords","assetToLoad","MenuScene","sceneButtons","titleText","AceOfShadows","MagicWords","PhoenixFlame","scene","__defProp","__export","__publicField","__defNormalProp","DEG_TO_RADS","GetTextureFromString","combineRGBComponents","createSteppedGradient","generateEase","getBlendMode","getTexturesFromConfig","hexToRGB","parseTextures","parsingAnimatedTextures","rotatePoint","scaleBy","PropertyNode","_PropertyNode","isStepped","createList","time2","BlendModeSet","xnew","ynew","oneOverLen","_output","qty","oneOverQty","cp","numSteps","currentNode","curVal","nextVal","images","getUniqueTextures","behaviors","behavior","anim","anims","flatMap","_svgPathExp","_scientific","_DEG2RAD","_sin","_cos","_abs","_sqrt","arcToSegment","angleRad","cosAngle","sinAngle","TWOPI","dx2","dy2","x1_sq","y1_sq","radiiCheck","rx_sq","ry_sq","sq","coef","cx1","cy1","angleStart","angleExtent","rawPath","angleIncrement","controlLength","ma","mb","mc","md","_numExp","_needsParsingExp","_bezierToPoints","length2","particleImages","maxLife","age","agePercent","oneOverLife","kill","appendTo","appendAt","recycle","BehaviorOrder","BehaviorOrder2","PositionParticle","_Emitter","particleParent","initBehaviors","updateBehaviors","recycleBehaviors","minLifetime","maxLifetime","customEase","spawnChance","maxParticles","emitterLifetime","spawnPos","particlesPerWave","ownerPos","_prevEmitterPos","_prevPosIsValid","_posChanged","_parent","addAtBack","particleCount","_emit","_spawnTimer","_emitterLife","_origConfig","_destroyWhenComplete","_completeCallback","_particleImages","updateSpawnPos","updateOwnerPos","registerBehavior","behaviorClass","knownBehaviors","lifetime","inc","prevPoint","lookup","fast","isRelative","difX","difY","beziers","prevCommand","flag1","flag2","relativeX","relativeY","twoThirds","errorMessage","totalPoints","stringToRawPath","_findMinimum","point2","generateEaseFromPath","order","updateParticle","recycleParticle","getBehavior","fillPool","_poolFirst","particle","fromCleanup","_activeParticlesLast","_activeParticlesFirst","newRot","resetPositionTracking","updateByTicker","playOnceAndDestroy","playOnce","prevX","prevY","curX","curY","emitPosX","emitPosY","waveFirst","waveLast","initParticles","emitNow","AccelerationBehavior","AlphaBehavior","BurstSpawnBehavior","ColorBehavior","NoRotationBehavior","OrderedTextureBehavior","PathBehavior","PointSpawnBehavior","RandomAnimatedTextureBehavior","RandomTextureBehavior","RotationBehavior","ScaleBehavior","ShapeSpawnBehavior","SingleAnimatedTextureBehavior","SingleTextureBehavior","SpeedBehavior","StaticAlphaBehavior","StaticAnchorBehavior","StaticColorBehavior","StaticRotationBehavior","StaticScaleBehavior","StaticSpeedBehavior","getAnimatedTextures","spawnShapes","shapes_exports","PolygonalChain","Torus","getRandPos","affectRotation","countingLengths","totalLength","segLength","chosenSeg","minStart","maxStart","accel","maxSpeed","deltaSec","vel","oldVX","oldVY","currentSpeed","intValueSimple","intColorSimple","intValueComplex","intColorComplex","intValueStepped","intColorStepped","PropertyList","isColor","interpolate","parsedTextures","outTextures","dupe","framerate","parsedAnim","animElapsed","animDuration","animFramerate","spacing","helperPoint","MATH_FUNCS","WHITELISTER","pathString","parsePath","minMult","initRotation","initPosition","mult","speedMult","_first","minSpeed","rotSpeed","oldSpeed","scaleMult","_ShapeSpawnBehavior","ShapeClass","registerShape","shapeClass","typeOverride","ATLAS_PATH","PhoenixFlameScene","particleContainer","flameEmitter","lightEmitter","smokeEmitter","ambiencePlayer","preparedFireConfig","preparedLightConfig","preparedSmokeConfig","DemoApp","scenes","currentScene","border","errorContainer","textAlign","borderRadius","maxWidth","showLoadingError","timingMode","RAF","maxDelta"],"ignoreList":[],"sourceRoot":""}